<!DOCTYPE html>
<html lang="zh-CN">
<head>
<!-- é¡µé¢ç‚¹å‡»å°çº¢å¿ƒ -->
<script type="text/javascript" src="/js/src/clicklove.js"></script>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.4.2',
    exturl: false,
    sidebar: {"position":"left","display":"hide","offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":"mac"},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'å¤åˆ¶',
      copy_success: 'å¤åˆ¶æˆåŠŸ',
      copy_failure: 'å¤åˆ¶å¤±è´¥'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="ç¬¬äºŒè¯¾æ¦‚è§ˆåœ¨ç¬¬ä¸€è¯¾ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå‡½æ•°ç”¨æ¥ç”Ÿæˆåƒµå°¸ï¼Œå¹¶ä¸”å°†å®ƒæ”¾å…¥åŒºå—é“¾ä¸Šçš„åƒµå°¸æ•°æ®åº“ä¸­ã€‚ åœ¨ç¬¬äºŒè¯¾é‡Œï¼Œæˆ‘ä»¬ä¼šè®©æˆ‘ä»¬çš„ app çœ‹èµ·æ¥æ›´åƒä¸€ä¸ªæ¸¸æˆï¼š å®ƒå¾—æ”¯æŒå¤šç”¨æˆ·ï¼Œå¹¶ä¸”é‡‡ç”¨æ›´åŠ æœ‰è¶£,è€Œä¸ä»…ä»…ä½¿ç”¨éšæœºçš„æ–¹å¼ï¼Œæ¥ç”Ÿæˆæ–°çš„åƒµå°¸ã€‚å¦‚ä½•ç”Ÿæˆæ–°çš„åƒµå°¸å‘¢ï¼Ÿé€šè¿‡è®©ç°æœ‰çš„åƒµå°¸çŒé£Ÿå…¶ä»–ç”Ÿç‰©ï¼åƒµå°¸çŒé£Ÿåƒµå°¸çŒé£Ÿçš„æ—¶å€™ï¼Œåƒµå°¸ç—…æ¯’ä¾µå…¥çŒç‰©ï¼Œè¿™äº›ç—…æ¯’ä¼šå°†çŒç‰©å˜ä¸ºæ–°çš„åƒµå°¸ï¼ŒåŠ å…¥ä½ çš„åƒµå°¸å¤§å†›ã€‚ç³»ç»Ÿä¼šé€šè¿‡çŒç‰©å’ŒçŒé£Ÿè€…åƒµå°¸çš„DNAè®¡">
<meta name="keywords" content="solidity">
<meta property="og:type" content="article">
<meta property="og:title" content="åƒµå°¸æ”»å‡»äººç±»">
<meta property="og:url" content="http:&#x2F;&#x2F;lisongbai.top&#x2F;2020&#x2F;06&#x2F;27&#x2F;%E5%83%B5%E5%B0%B8%E6%94%BB%E5%87%BB%E4%BA%BA%E7%B1%BB&#x2F;index.html">
<meta property="og:site_name" content="å°æã®åšå®¢">
<meta property="og:description" content="ç¬¬äºŒè¯¾æ¦‚è§ˆåœ¨ç¬¬ä¸€è¯¾ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå‡½æ•°ç”¨æ¥ç”Ÿæˆåƒµå°¸ï¼Œå¹¶ä¸”å°†å®ƒæ”¾å…¥åŒºå—é“¾ä¸Šçš„åƒµå°¸æ•°æ®åº“ä¸­ã€‚ åœ¨ç¬¬äºŒè¯¾é‡Œï¼Œæˆ‘ä»¬ä¼šè®©æˆ‘ä»¬çš„ app çœ‹èµ·æ¥æ›´åƒä¸€ä¸ªæ¸¸æˆï¼š å®ƒå¾—æ”¯æŒå¤šç”¨æˆ·ï¼Œå¹¶ä¸”é‡‡ç”¨æ›´åŠ æœ‰è¶£,è€Œä¸ä»…ä»…ä½¿ç”¨éšæœºçš„æ–¹å¼ï¼Œæ¥ç”Ÿæˆæ–°çš„åƒµå°¸ã€‚å¦‚ä½•ç”Ÿæˆæ–°çš„åƒµå°¸å‘¢ï¼Ÿé€šè¿‡è®©ç°æœ‰çš„åƒµå°¸çŒé£Ÿå…¶ä»–ç”Ÿç‰©ï¼åƒµå°¸çŒé£Ÿåƒµå°¸çŒé£Ÿçš„æ—¶å€™ï¼Œåƒµå°¸ç—…æ¯’ä¾µå…¥çŒç‰©ï¼Œè¿™äº›ç—…æ¯’ä¼šå°†çŒç‰©å˜ä¸ºæ–°çš„åƒµå°¸ï¼ŒåŠ å…¥ä½ çš„åƒµå°¸å¤§å†›ã€‚ç³»ç»Ÿä¼šé€šè¿‡çŒç‰©å’ŒçŒé£Ÿè€…åƒµå°¸çš„DNAè®¡">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;06&#x2F;27&#x2F;SMihkOofrwEHxTF.png">
<meta property="og:image" content="https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;06&#x2F;27&#x2F;vQ8uDOcFknPNsmy.png">
<meta property="og:image" content="https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;06&#x2F;27&#x2F;I9YxPTeVDuKcfmr.png">
<meta property="og:image" content="https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;06&#x2F;27&#x2F;9w4d6EMHsi2Sgo3.png">
<meta property="og:updated_time" content="2020-06-30T06:42:50.789Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;06&#x2F;27&#x2F;SMihkOofrwEHxTF.png">

<link rel="canonical" href="http://lisongbai.top/2020/06/27/%E5%83%B5%E5%B0%B8%E6%94%BB%E5%87%BB%E4%BA%BA%E7%B1%BB/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>åƒµå°¸æ”»å‡»äººç±» | å°æã®åšå®¢</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="å°æã®åšå®¢" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">å°æã®åšå®¢</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">æˆ‘æœ‰ä¸€å£¶é…’ï¼Œè¶³ä»¥æ…°å¹³ç”Ÿã€‚</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>å…³äº</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>å½’æ¡£</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="æœç´¢..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/yym08090809" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://lisongbai.top/2020/06/27/%E5%83%B5%E5%B0%B8%E6%94%BB%E5%87%BB%E4%BA%BA%E7%B1%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ææ¾æŸ">
      <meta itemprop="description" content="è®°å½•å­¦ä¹ çš„æŠ€èƒ½å’Œé‡åˆ°çš„é—®é¢˜">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å°æã®åšå®¢">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          åƒµå°¸æ”»å‡»äººç±»
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-06-27 09:54:54" itemprop="dateCreated datePublished" datetime="2020-06-27T09:54:54+08:00">2020-06-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-06-30 14:42:50" itemprop="dateModified" datetime="2020-06-30T14:42:50+08:00">2020-06-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Solidity-Path/" itemprop="url" rel="index">
                    <span itemprop="name">Solidity Path</span>
                  </a>
                </span>
            </span>

          
            <span id="/2020/06/27/%E5%83%B5%E5%B0%B8%E6%94%BB%E5%87%BB%E4%BA%BA%E7%B1%BB/" class="post-meta-item leancloud_visitors" data-flag-title="åƒµå°¸æ”»å‡»äººç±»" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/2020/06/27/%E5%83%B5%E5%B0%B8%E6%94%BB%E5%87%BB%E4%BA%BA%E7%B1%BB/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/06/27/åƒµå°¸æ”»å‡»äººç±»/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="ç¬¬äºŒè¯¾æ¦‚è§ˆ"><a href="#ç¬¬äºŒè¯¾æ¦‚è§ˆ" class="headerlink" title="ç¬¬äºŒè¯¾æ¦‚è§ˆ"></a>ç¬¬äºŒè¯¾æ¦‚è§ˆ</h1><p>åœ¨ç¬¬ä¸€è¯¾ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå‡½æ•°ç”¨æ¥ç”Ÿæˆåƒµå°¸ï¼Œå¹¶ä¸”å°†å®ƒæ”¾å…¥åŒºå—é“¾ä¸Šçš„åƒµå°¸æ•°æ®åº“ä¸­ã€‚ åœ¨ç¬¬äºŒè¯¾é‡Œï¼Œæˆ‘ä»¬ä¼šè®©æˆ‘ä»¬çš„ app çœ‹èµ·æ¥æ›´åƒä¸€ä¸ªæ¸¸æˆï¼š å®ƒå¾—æ”¯æŒå¤šç”¨æˆ·ï¼Œå¹¶ä¸”é‡‡ç”¨æ›´åŠ æœ‰è¶£,è€Œä¸ä»…ä»…ä½¿ç”¨éšæœºçš„æ–¹å¼ï¼Œæ¥ç”Ÿæˆæ–°çš„åƒµå°¸ã€‚</p><p>å¦‚ä½•ç”Ÿæˆæ–°çš„åƒµå°¸å‘¢ï¼Ÿé€šè¿‡è®©ç°æœ‰çš„åƒµå°¸çŒé£Ÿå…¶ä»–ç”Ÿç‰©ï¼</p><h2 id="åƒµå°¸çŒé£Ÿ"><a href="#åƒµå°¸çŒé£Ÿ" class="headerlink" title="åƒµå°¸çŒé£Ÿ"></a>åƒµå°¸çŒé£Ÿ</h2><p>åƒµå°¸çŒé£Ÿçš„æ—¶å€™ï¼Œåƒµå°¸ç—…æ¯’ä¾µå…¥çŒç‰©ï¼Œè¿™äº›ç—…æ¯’ä¼šå°†çŒç‰©å˜ä¸ºæ–°çš„åƒµå°¸ï¼ŒåŠ å…¥ä½ çš„åƒµå°¸å¤§å†›ã€‚ç³»ç»Ÿä¼šé€šè¿‡çŒç‰©å’ŒçŒé£Ÿè€…åƒµå°¸çš„DNAè®¡ç®—å‡ºæ–°åƒµå°¸çš„DNAã€‚</p><a id="more"></a>


<p>åƒµå°¸æœ€å–œæ¬¢çŒé£Ÿä»€ä¹ˆç‰©ç§å‘¢ï¼Ÿ ç­‰ä½ å­¦å®Œç¬¬äºŒè¯¾å°±çŸ¥é“äº†ï¼</p>
<h2 id="å®æˆ˜æ¼”ä¹ "><a href="#å®æˆ˜æ¼”ä¹ " class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>å³è¾¹æ˜¯ä¸€ä¸ªç®€å•çš„çŒé£Ÿæ¼”ç¤ºã€‚ç‚¹å‡»ä¸€ä¸ªâ€œäººâ€ï¼Œçœ‹çœ‹åƒµå°¸çŒé£Ÿçš„æ—¶å€™ä¼šå‘ç”Ÿä»€ä¹ˆ? å¯è§ï¼Œæ–°åƒµå°¸çš„DNAæ˜¯é€šè¿‡ä»åŸæ¥çš„åƒµå°¸çš„DNA, åŠ ä¸ŠçŒç‰©çš„DNAè®¡ç®—å¾—æ¥çš„ã€‚</p>
<p>å­¦å®Œè¿™ä¸€ç« ï¼Œè¯·ç‚¹å‡»â€œä¸‹ä¸€ç« â€ï¼Œ æˆ‘ä»¬è¯¥è®©æ¸¸æˆæ”¯æŒå¤šç©å®¶æ¨¡å¼äº†ã€‚</p>
<p><img src="https://i.loli.net/2020/06/27/SMihkOofrwEHxTF.png" alt="image-20200627095657273"></p>
<h1 id="æ˜ å°„ï¼ˆMappingï¼‰å’Œåœ°å€ï¼ˆAddressï¼‰"><a href="#æ˜ å°„ï¼ˆMappingï¼‰å’Œåœ°å€ï¼ˆAddressï¼‰" class="headerlink" title="æ˜ å°„ï¼ˆMappingï¼‰å’Œåœ°å€ï¼ˆAddressï¼‰"></a>æ˜ å°„ï¼ˆMappingï¼‰å’Œåœ°å€ï¼ˆAddressï¼‰</h1><p>æˆ‘ä»¬é€šè¿‡ç»™æ•°æ®åº“ä¸­çš„åƒµå°¸æŒ‡å®šâ€œä¸»äººâ€ï¼Œ æ¥æ”¯æŒâ€œå¤šç©å®¶â€æ¨¡å¼ã€‚</p>
<p>å¦‚æ­¤ä¸€æ¥ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥2ä¸ªæ–°çš„æ•°æ®ç±»å‹ï¼š<code>mapping</code>ï¼ˆæ˜ å°„ï¼‰ å’Œ <code>address</code>ï¼ˆåœ°å€ï¼‰ã€‚</p>
<h2 id="Addresses-ï¼ˆåœ°å€ï¼‰"><a href="#Addresses-ï¼ˆåœ°å€ï¼‰" class="headerlink" title="Addresses ï¼ˆåœ°å€ï¼‰"></a>Addresses ï¼ˆåœ°å€ï¼‰</h2><p>ä»¥å¤ªåŠåŒºå—é“¾ç”± <strong>_ account _</strong> (è´¦æˆ·)ç»„æˆï¼Œä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆé“¶è¡Œè´¦æˆ·ã€‚ä¸€ä¸ªå¸æˆ·çš„ä½™é¢æ˜¯ <strong><em>ä»¥å¤ª</em></strong> ï¼ˆåœ¨ä»¥å¤ªåŠåŒºå—é“¾ä¸Šä½¿ç”¨çš„å¸ç§ï¼‰ï¼Œä½ å¯ä»¥å’Œå…¶ä»–å¸æˆ·ä¹‹é—´æ”¯ä»˜å’Œæ¥å—ä»¥å¤ªå¸ï¼Œå°±åƒä½ çš„é“¶è¡Œå¸æˆ·å¯ä»¥ç”µæ±‡èµ„é‡‘åˆ°å…¶ä»–é“¶è¡Œå¸æˆ·ä¸€æ ·ã€‚</p>
<p>æ¯ä¸ªå¸æˆ·éƒ½æœ‰ä¸€ä¸ªâ€œåœ°å€â€ï¼Œä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆé“¶è¡Œè´¦å·ã€‚è¿™æ˜¯è´¦æˆ·å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œå®ƒçœ‹èµ·æ¥é•¿è¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0x0cE446255506E92DF41614C46F1d6df9Cc969183</span><br></pre></td></tr></table></figure>

<p>ï¼ˆè¿™æ˜¯ CryptoZombies å›¢é˜Ÿçš„åœ°å€ï¼Œå¦‚æœä½ å–œæ¬¢ CryptoZombies çš„è¯ï¼Œè¯·æ‰“èµæˆ‘ä»¬ä¸€äº›ä»¥å¤ªå¸ï¼ğŸ˜‰ï¼‰</p>
<p>æˆ‘ä»¬å°†åœ¨åé¢çš„è¯¾ç¨‹ä¸­ä»‹ç»åœ°å€çš„ç»†èŠ‚ï¼Œç°åœ¨ä½ åªéœ€è¦äº†è§£<strong>åœ°å€å±äºç‰¹å®šç”¨æˆ·ï¼ˆæˆ–æ™ºèƒ½åˆçº¦ï¼‰çš„</strong>ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŒ‡å®šâ€œåœ°å€â€ä½œä¸ºåƒµå°¸ä¸»äººçš„ IDã€‚å½“ç”¨æˆ·é€šè¿‡ä¸æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºäº¤äº’æ¥åˆ›å»ºæ–°çš„åƒµå°¸æ—¶ï¼Œæ–°åƒµå°¸çš„æ‰€æœ‰æƒè¢«è®¾ç½®åˆ°è°ƒç”¨è€…çš„ä»¥å¤ªåŠåœ°å€ä¸‹ã€‚</p>
<h2 id="Mappingï¼ˆæ˜ å°„ï¼‰"><a href="#Mappingï¼ˆæ˜ å°„ï¼‰" class="headerlink" title="Mappingï¼ˆæ˜ å°„ï¼‰"></a>Mappingï¼ˆæ˜ å°„ï¼‰</h2><p>åœ¨ç¬¬1è¯¾ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº† <strong>_ ç»“æ„ä½“ _</strong> å’Œ <strong>_ æ•°ç»„ _</strong> ã€‚ <strong><em>æ˜ å°„</em></strong> æ˜¯å¦ä¸€ç§åœ¨ Solidity ä¸­å­˜å‚¨æœ‰ç»„ç»‡æ•°æ®çš„æ–¹æ³•ã€‚</p>
<p>æ˜ å°„æ˜¯è¿™æ ·å®šä¹‰çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//å¯¹äºé‡‘èåº”ç”¨ç¨‹åºï¼Œå°†ç”¨æˆ·çš„ä½™é¢ä¿å­˜åœ¨ä¸€ä¸ª uintç±»å‹çš„å˜é‡ä¸­ï¼š</span><br><span class="line">mapping (address =&gt; uint) public accountBalance;</span><br><span class="line">//æˆ–è€…å¯ä»¥ç”¨æ¥é€šè¿‡userId å­˜å‚¨/æŸ¥æ‰¾çš„ç”¨æˆ·å</span><br><span class="line">mapping (uint =&gt; string) userIdToName;</span><br></pre></td></tr></table></figure>

<p>æ˜ å°„æœ¬è´¨ä¸Šæ˜¯å­˜å‚¨å’ŒæŸ¥æ‰¾æ•°æ®æ‰€ç”¨çš„é”®-å€¼å¯¹ã€‚åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œé”®æ˜¯ä¸€ä¸ª <code>address</code>ï¼Œå€¼æ˜¯ä¸€ä¸ª <code>uint</code>ï¼Œåœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­ï¼Œé”®æ˜¯ä¸€ä¸ª<code>uint</code>ï¼Œå€¼æ˜¯ä¸€ä¸ª <code>string</code>ã€‚</p>
<h2 id="å®æˆ˜æ¼”ä¹ -1"><a href="#å®æˆ˜æ¼”ä¹ -1" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>ä¸ºäº†å­˜å‚¨åƒµå°¸çš„æ‰€æœ‰æƒï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨åˆ°ä¸¤ä¸ªæ˜ å°„ï¼šä¸€ä¸ªè®°å½•åƒµå°¸æ‹¥æœ‰è€…çš„åœ°å€ï¼Œå¦ä¸€ä¸ªè®°å½•æŸåœ°å€æ‰€æ‹¥æœ‰åƒµå°¸çš„æ•°é‡ã€‚</p>
<p>1.åˆ›å»ºä¸€ä¸ªå«åš <code>zombieToOwner</code> çš„æ˜ å°„ã€‚å…¶é”®æ˜¯ä¸€ä¸ª<code>uint</code>ï¼ˆæˆ‘ä»¬å°†æ ¹æ®å®ƒçš„ id å­˜å‚¨å’ŒæŸ¥æ‰¾åƒµå°¸ï¼‰ï¼Œå€¼ä¸º <code>address</code>ã€‚æ˜ å°„å±æ€§ä¸º<code>public</code>ã€‚</p>
<p>2.åˆ›å»ºä¸€ä¸ªåä¸º <code>ownerZombieCount</code> çš„æ˜ å°„ï¼Œå…¶ä¸­é”®æ˜¯ <code>address</code>ï¼Œå€¼æ˜¯ <code>uint</code>ã€‚</p>
<h2 id="åˆçº¦å®Œå–„"><a href="#åˆçº¦å®Œå–„" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>ZombieFactory.sol</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">    event NewZombie(uint zombieId, string name, uint dna);</span><br><span class="line"></span><br><span class="line">    uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">    uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line"></span><br><span class="line">    struct Zombie &#123;</span><br><span class="line">        string name;</span><br><span class="line">        uint dna;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Zombie[] public zombies;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨è¿™é‡Œå®šä¹‰æ˜ å°„</span></span><br><span class="line">    mapping (<span class="function"><span class="params">uint</span> =&gt;</span> address) public zombieToOwner;</span><br><span class="line">    mapping (<span class="function"><span class="params">address</span> =&gt;</span> uint) ownerZombieCount;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_createZombie</span>(<span class="params">string _name, uint _dna</span>) <span class="title">private</span> </span>&#123;</span><br><span class="line">        uint id = zombies.push(Zombie(_name, _dna)) - <span class="number">1</span>;</span><br><span class="line">        NewZombie(id, _name, _dna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_generateRandomDna</span>(<span class="params">string _str</span>) <span class="title">private</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>) </span>&#123;</span><br><span class="line">        uint rand = uint(keccak256(_str));</span><br><span class="line">        <span class="keyword">return</span> rand % dnaModulus;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">createRandomZombie</span>(<span class="params">string _name</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        uint randDna = _generateRandomDna(_name);</span><br><span class="line">        _createZombie(_name, randDna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Msg-sender"><a href="#Msg-sender" class="headerlink" title="Msg.sender"></a>Msg.sender</h1><p>ç°åœ¨æœ‰äº†ä¸€å¥—æ˜ å°„æ¥è®°å½•åƒµå°¸çš„æ‰€æœ‰æƒäº†ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ <code>_createZombie</code> æ–¹æ³•æ¥è¿ç”¨å®ƒä»¬ã€‚</p>
<p>ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬è¦ç”¨åˆ° <code>msg.sender</code>ã€‚</p>
<h2 id="msg-sender"><a href="#msg-sender" class="headerlink" title="msg.sender"></a>msg.sender</h2><p>åœ¨ Solidity ä¸­ï¼Œæœ‰ä¸€äº›å…¨å±€å˜é‡å¯ä»¥è¢«æ‰€æœ‰å‡½æ•°è°ƒç”¨ã€‚ å…¶ä¸­ä¸€ä¸ªå°±æ˜¯ <code>msg.sender</code>ï¼Œå®ƒæŒ‡çš„æ˜¯å½“å‰è°ƒç”¨è€…ï¼ˆæˆ–æ™ºèƒ½åˆçº¦ï¼‰çš„ <code>address</code>ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šåœ¨ Solidity ä¸­ï¼ŒåŠŸèƒ½æ‰§è¡Œå§‹ç»ˆéœ€è¦ä»å¤–éƒ¨è°ƒç”¨è€…å¼€å§‹ã€‚ ä¸€ä¸ªåˆçº¦åªä¼šåœ¨åŒºå—é“¾ä¸Šä»€ä¹ˆä¹Ÿä¸åšï¼Œé™¤éæœ‰äººè°ƒç”¨å…¶ä¸­çš„å‡½æ•°ã€‚æ‰€ä»¥ <code>msg.sender</code>æ€»æ˜¯å­˜åœ¨çš„ã€‚</p>
</blockquote>
<p>ä»¥ä¸‹æ˜¯ä½¿ç”¨ <code>msg.sender</code> æ¥æ›´æ–° <code>mapping</code> çš„ä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mapping (<span class="function"><span class="params">address</span> =&gt;</span> uint) favoriteNumber;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setMyNumber</span>(<span class="params">uint _myNumber</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">  <span class="comment">// æ›´æ–°æˆ‘ä»¬çš„ `favoriteNumber` æ˜ å°„æ¥å°† `_myNumber`å­˜å‚¨åœ¨ `msg.sender`åä¸‹</span></span><br><span class="line">  favoriteNumber[msg.sender] = _myNumber;</span><br><span class="line">  <span class="comment">// å­˜å‚¨æ•°æ®è‡³æ˜ å°„çš„æ–¹æ³•å’Œå°†æ•°æ®å­˜å‚¨åœ¨æ•°ç»„ç›¸ä¼¼</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">whatIsMyNumber</span>(<span class="params"></span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ‹¿åˆ°å­˜å‚¨åœ¨è°ƒç”¨è€…åœ°å€åä¸‹çš„å€¼</span></span><br><span class="line">  <span class="comment">// è‹¥è°ƒç”¨è€…è¿˜æ²¡è°ƒç”¨ setMyNumberï¼Œ åˆ™å€¼ä¸º `0`</span></span><br><span class="line">  <span class="keyword">return</span> favoriteNumber[msg.sender];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªå°å°çš„ä¾‹å­ä¸­ï¼Œä»»ä½•äººéƒ½å¯ä»¥è°ƒç”¨ <code>setMyNumber</code> åœ¨æˆ‘ä»¬çš„åˆçº¦ä¸­å­˜ä¸‹ä¸€ä¸ª <code>uint</code> å¹¶ä¸”ä¸ä»–ä»¬çš„åœ°å€ç›¸ç»‘å®šã€‚ ç„¶åï¼Œä»–ä»¬è°ƒç”¨ <code>whatIsMyNumber</code> å°±ä¼šè¿”å›ä»–ä»¬å­˜å‚¨çš„ <code>uint</code>ã€‚</p>
<p>ä½¿ç”¨ <code>msg.sender</code> å¾ˆå®‰å…¨ï¼Œå› ä¸ºå®ƒå…·æœ‰ä»¥å¤ªåŠåŒºå—é“¾çš„å®‰å…¨ä¿éšœ â€”â€” é™¤éçªƒå–ä¸ä»¥å¤ªåŠåœ°å€ç›¸å…³è”çš„ç§é’¥ï¼Œå¦åˆ™æ˜¯æ²¡æœ‰åŠæ³•ä¿®æ”¹å…¶ä»–äººçš„æ•°æ®çš„ã€‚</p>
<h2 id="å®æˆ˜æ¼”ä¹ -2"><a href="#å®æˆ˜æ¼”ä¹ -2" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æˆ‘ä»¬æ¥ä¿®æ”¹ç¬¬1è¯¾çš„ <code>_createZombie</code> æ–¹æ³•ï¼Œå°†åƒµå°¸åˆ†é…ç»™å‡½æ•°è°ƒç”¨è€…å§ã€‚</p>
<ol>
<li>é¦–å…ˆï¼Œåœ¨å¾—åˆ°æ–°çš„åƒµå°¸ <code>id</code> åï¼Œæ›´æ–° <code>zombieToOwner</code> æ˜ å°„ï¼Œåœ¨ <code>id</code> ä¸‹é¢å­˜å…¥ <code>msg.sender</code>ã€‚</li>
<li>ç„¶åï¼Œæˆ‘ä»¬ä¸ºè¿™ä¸ª <code>msg.sender</code> åä¸‹çš„ <code>ownerZombieCount</code> åŠ  1ã€‚</li>
</ol>
<p>è·Ÿåœ¨ JavaScript ä¸­ä¸€æ ·ï¼Œ åœ¨ Solidity ä¸­ä½ ä¹Ÿå¯ä»¥ç”¨ <code>++</code> ä½¿ <code>uint</code> é€’å¢ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">uint number = <span class="number">0</span>;</span><br><span class="line">number++;</span><br><span class="line"><span class="comment">// `number` ç°åœ¨æ˜¯ `1`äº†</span></span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ä¸¤è¡Œä»£ç å³å¯ã€‚</p>
<h2 id="åˆçº¦å®Œå–„-1"><a href="#åˆçº¦å®Œå–„-1" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>ZombieFactory.sol</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">    event NewZombie(uint zombieId, string name, uint dna);</span><br><span class="line"></span><br><span class="line">    uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">    uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line"></span><br><span class="line">    struct Zombie &#123;</span><br><span class="line">        string name;</span><br><span class="line">        uint dna;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Zombie[] public zombies;</span><br><span class="line"></span><br><span class="line">    mapping (<span class="function"><span class="params">uint</span> =&gt;</span> address) public zombieToOwner;</span><br><span class="line">    mapping (<span class="function"><span class="params">address</span> =&gt;</span> uint) ownerZombieCount;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_createZombie</span>(<span class="params">string _name, uint _dna</span>) <span class="title">private</span> </span>&#123;</span><br><span class="line">        uint id = zombies.push(Zombie(_name, _dna)) - <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// ä»è¿™é‡Œå¼€å§‹</span></span><br><span class="line">        zombieToOwner[id] = msg.sender;</span><br><span class="line">        ownerZombieCount[msg.sender]++;</span><br><span class="line">        NewZombie(id, _name, _dna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_generateRandomDna</span>(<span class="params">string _str</span>) <span class="title">private</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>) </span>&#123;</span><br><span class="line">        uint rand = uint(keccak256(_str));</span><br><span class="line">        <span class="keyword">return</span> rand % dnaModulus;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">createRandomZombie</span>(<span class="params">string _name</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        uint randDna = _generateRandomDna(_name);</span><br><span class="line">        _createZombie(_name, randDna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Require"><a href="#Require" class="headerlink" title="Require"></a>Require</h1><p>åœ¨ç¬¬ä¸€è¯¾ä¸­ï¼Œæˆ‘ä»¬æˆåŠŸè®©ç”¨æˆ·é€šè¿‡è°ƒç”¨ <code>createRandomZombie</code>å‡½æ•° å¹¶è¾“å…¥ä¸€ä¸ªåå­—æ¥åˆ›å»ºæ–°çš„åƒµå°¸ã€‚ ä½†æ˜¯ï¼Œå¦‚æœç”¨æˆ·èƒ½æŒç»­è°ƒç”¨è¿™ä¸ªå‡½æ•°æ¥åˆ›å»ºå‡ºæ— é™å¤šä¸ªåƒµå°¸åŠ å…¥ä»–ä»¬çš„å†›å›¢ï¼Œè¿™æ¸¸æˆå°±å¤ªæ²¡æ„æ€äº†ï¼</p>
<p>äºæ˜¯ï¼Œæˆ‘ä»¬ä½œå‡ºé™å®šï¼šæ¯ä¸ªç©å®¶åªèƒ½è°ƒç”¨ä¸€æ¬¡è¿™ä¸ªå‡½æ•°ã€‚ è¿™æ ·ä¸€æ¥ï¼Œæ–°ç©å®¶å¯ä»¥åœ¨åˆšå¼€å§‹ç©æ¸¸æˆæ—¶é€šè¿‡è°ƒç”¨å®ƒï¼Œä¸ºå…¶å†›å›¢åˆ›å»ºåˆå§‹åƒµå°¸ã€‚</p>
<p>æˆ‘ä»¬æ€æ ·æ‰èƒ½é™å®šæ¯ä¸ªç©å®¶åªè°ƒç”¨ä¸€æ¬¡è¿™ä¸ªå‡½æ•°å‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ä½¿ç”¨<code>require</code>ã€‚ <code>require</code>ä½¿å¾—å‡½æ•°åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå½“ä¸æ»¡è¶³æŸäº›æ¡ä»¶æ—¶æŠ›å‡ºé”™è¯¯ï¼Œå¹¶åœæ­¢æ‰§è¡Œï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHiToVitalik</span>(<span class="params">string _name</span>) <span class="title">public</span> <span class="title">returns</span> (<span class="params">string</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ¯”è¾ƒ _name æ˜¯å¦ç­‰äº "Vitalik". å¦‚æœä¸æˆç«‹ï¼ŒæŠ›å‡ºå¼‚å¸¸å¹¶ç»ˆæ­¢ç¨‹åº</span></span><br><span class="line">  <span class="comment">// (æ•²é»‘æ¿: Solidity å¹¶ä¸æ”¯æŒåŸç”Ÿçš„å­—ç¬¦ä¸²æ¯”è¾ƒ, æˆ‘ä»¬åªèƒ½é€šè¿‡æ¯”è¾ƒ</span></span><br><span class="line">  <span class="comment">// ä¸¤å­—ç¬¦ä¸²çš„ keccak256 å“ˆå¸Œå€¼æ¥è¿›è¡Œåˆ¤æ–­)</span></span><br><span class="line">  <span class="built_in">require</span>(keccak256(_name) == keccak256(<span class="string">"Vitalik"</span>));</span><br><span class="line">  <span class="comment">// å¦‚æœè¿”å› true, è¿è¡Œå¦‚ä¸‹è¯­å¥</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">"Hi!"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ è¿™æ ·è°ƒç”¨å‡½æ•° <code>sayHiToVitalikï¼ˆâ€œVitalikâ€ï¼‰</code> ,å®ƒä¼šè¿”å›â€œHiï¼â€ã€‚è€Œå¦‚æœè°ƒç”¨çš„æ—¶å€™ä½¿ç”¨äº†å…¶ä»–å‚æ•°ï¼Œå®ƒåˆ™ä¼šæŠ›å‡ºé”™è¯¯å¹¶åœæ­¢æ‰§è¡Œã€‚</p>
<p>å› æ­¤ï¼Œåœ¨è°ƒç”¨ä¸€ä¸ªå‡½æ•°ä¹‹å‰ï¼Œç”¨ <code>require</code> éªŒè¯å‰ç½®æ¡ä»¶æ˜¯éå¸¸æœ‰å¿…è¦çš„ã€‚</p>
<h2 id="å®æˆ˜æ¼”ä¹ -3"><a href="#å®æˆ˜æ¼”ä¹ -3" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>åœ¨æˆ‘ä»¬çš„åƒµå°¸æ¸¸æˆä¸­ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›ç”¨æˆ·é€šè¿‡åå¤è°ƒç”¨ <code>createRandomZombie</code> æ¥çµ¦ä»–ä»¬çš„å†›é˜Ÿåˆ›å»ºæ— é™å¤šä¸ªåƒµå°¸ â€”â€” è¿™å°†ä½¿å¾—æ¸¸æˆéå¸¸æ— èŠã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨äº† <code>require</code> æ¥ç¡®ä¿è¿™ä¸ªå‡½æ•°åªæœ‰åœ¨æ¯ä¸ªç”¨æˆ·ç¬¬ä¸€æ¬¡è°ƒç”¨å®ƒçš„æ—¶å€™æ‰§è¡Œï¼Œç”¨ä»¥åˆ›å»ºåˆå§‹åƒµå°¸ã€‚</p>
<ol>
<li>åœ¨ <code>createRandomZombie</code> çš„å‰é¢æ”¾ç½® <code>require</code> è¯­å¥ã€‚ ä½¿å¾—å‡½æ•°å…ˆæ£€æŸ¥ <code>ownerZombieCount [msg.sender]</code> çš„å€¼ä¸º <code>0</code> ï¼Œä¸ç„¶å°±æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</li>
</ol>
<blockquote>
<p>æ³¨æ„ï¼šåœ¨ Solidity ä¸­ï¼Œå…³é”®è¯æ”¾ç½®çš„é¡ºåºå¹¶ä¸é‡è¦</p>
<ul>
<li>è™½ç„¶å‚æ•°çš„ä¸¤ä¸ªä½ç½®æ˜¯ç­‰æ•ˆçš„ã€‚ ä½†æ˜¯ï¼Œç”±äºæˆ‘ä»¬çš„ç­”æ¡ˆæ£€æŸ¥å™¨æ¯”è¾ƒå‘†æ¿ï¼Œå®ƒåªèƒ½è®¤å®šå…¶ä¸­ä¸€ä¸ªä¸ºæ­£ç¡®ç­”æ¡ˆ</li>
<li>äºæ˜¯åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°±çº¦å®šæŠŠ<code>ownerZombieCount [msg.sender]</code>æ”¾å‰é¢å§</li>
</ul>
</blockquote>
<h2 id="åˆçº¦å®Œå–„-2"><a href="#åˆçº¦å®Œå–„-2" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>ZombieFactory.sol</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">    event NewZombie(uint zombieId, string name, uint dna);</span><br><span class="line"></span><br><span class="line">    uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">    uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line"></span><br><span class="line">    struct Zombie &#123;</span><br><span class="line">        string name;</span><br><span class="line">        uint dna;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Zombie[] public zombies;</span><br><span class="line"></span><br><span class="line">    mapping (<span class="function"><span class="params">uint</span> =&gt;</span> address) public zombieToOwner;</span><br><span class="line">    mapping (<span class="function"><span class="params">address</span> =&gt;</span> uint) ownerZombieCount;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_createZombie</span>(<span class="params">string _name, uint _dna</span>) <span class="title">private</span> </span>&#123;</span><br><span class="line">        uint id = zombies.push(Zombie(_name, _dna)) - <span class="number">1</span>;</span><br><span class="line">        zombieToOwner[id] = msg.sender;</span><br><span class="line">        ownerZombieCount[msg.sender]++;</span><br><span class="line">        NewZombie(id, _name, _dna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_generateRandomDna</span>(<span class="params">string _str</span>) <span class="title">private</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>) </span>&#123;</span><br><span class="line">        uint rand = uint(keccak256(_str));</span><br><span class="line">        <span class="keyword">return</span> rand % dnaModulus;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">createRandomZombie</span>(<span class="params">string _name</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        <span class="comment">// start here</span></span><br><span class="line">        <span class="built_in">require</span>(ownerZombieCount[msg.sender] == <span class="number">0</span>);</span><br><span class="line">        uint randDna = _generateRandomDna(_name);</span><br><span class="line">        _createZombie(_name, randDna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ç»§æ‰¿ï¼ˆInheritanceï¼‰"><a href="#ç»§æ‰¿ï¼ˆInheritanceï¼‰" class="headerlink" title="ç»§æ‰¿ï¼ˆInheritanceï¼‰"></a>ç»§æ‰¿ï¼ˆInheritanceï¼‰</h1><p>æˆ‘ä»¬çš„æ¸¸æˆä»£ç è¶Šæ¥è¶Šé•¿ã€‚ å½“ä»£ç è¿‡äºå†—é•¿çš„æ—¶å€™ï¼Œæœ€å¥½å°†ä»£ç å’Œé€»è¾‘åˆ†æ‹†åˆ°å¤šä¸ªä¸åŒçš„åˆçº¦ä¸­ï¼Œä»¥ä¾¿äºç®¡ç†ã€‚</p>
<p>æœ‰ä¸ªè®© Solidity çš„ä»£ç æ˜“äºç®¡ç†çš„åŠŸèƒ½ï¼Œå°±æ˜¯åˆçº¦ <strong>inheritance</strong> (ç»§æ‰¿)ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">contract Doge &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">catchphrase</span>(<span class="params"></span>) <span class="title">public</span> <span class="title">returns</span> (<span class="params">string</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"So Wow CryptoDoge"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract BabyDoge is Doge &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">anotherCatchphrase</span>(<span class="params"></span>) <span class="title">public</span> <span class="title">returns</span> (<span class="params">string</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Such Moon BabyDoge"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”±äº <code>BabyDoge</code> æ˜¯ä» <code>Doge</code> é‚£é‡Œ <strong>inherits</strong> ï¼ˆç»§æ‰¿)è¿‡æ¥çš„ã€‚ è¿™æ„å‘³ç€å½“ä½ ç¼–è¯‘å’Œéƒ¨ç½²äº† <code>BabyDoge</code>ï¼Œå®ƒå°†å¯ä»¥è®¿é—® <code>catchphrase()</code> å’Œ <code>anotherCatchphrase()</code>å’Œå…¶ä»–æˆ‘ä»¬åœ¨ <code>Doge</code> ä¸­å®šä¹‰çš„å…¶ä»–å…¬å…±å‡½æ•°ã€‚</p>
<p>è¿™å¯ä»¥ç”¨äºé€»è¾‘ç»§æ‰¿ï¼ˆæ¯”å¦‚è¡¨è¾¾å­ç±»çš„æ—¶å€™ï¼Œ<code>Cat</code> æ˜¯ä¸€ç§ <code>Animal</code>ï¼‰ã€‚ ä½†ä¹Ÿå¯ä»¥ç®€å•åœ°å°†ç±»ä¼¼çš„é€»è¾‘ç»„åˆåˆ°ä¸åŒçš„åˆçº¦ä¸­ä»¥ç»„ç»‡ä»£ç ã€‚</p>
<h2 id="å®æˆ˜æ¼”ä¹ -4"><a href="#å®æˆ˜æ¼”ä¹ -4" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>åœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è¦ä¸ºåƒµå°¸å®ç°å„ç§åŠŸèƒ½ï¼Œè®©å®ƒå¯ä»¥â€œçŒé£Ÿâ€å’Œâ€œç¹æ®–â€ã€‚ é€šè¿‡å°†è¿™äº›è¿ç®—æ”¾åˆ°çˆ¶ç±» <code>ZombieFactory</code> ä¸­ï¼Œä½¿å¾—æ‰€æœ‰ <code>ZombieFactory</code> çš„ç»§æ‰¿è€…åˆçº¦éƒ½å¯ä»¥ä½¿ç”¨è¿™äº›æ–¹æ³•ã€‚</p>
<ol>
<li>åœ¨ <code>ZombieFactory</code> ä¸‹åˆ›å»ºä¸€ä¸ªå« <code>ZombieFeeding</code> çš„åˆçº¦ï¼Œå®ƒæ˜¯ç»§æ‰¿è‡ª `ZombieFactory åˆçº¦çš„ã€‚</li>
</ol>
<h2 id="åˆçº¦å®Œå–„-3"><a href="#åˆçº¦å®Œå–„-3" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>ZombieFactory.sol</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">    event NewZombie(uint zombieId, string name, uint dna);</span><br><span class="line"></span><br><span class="line">    uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">    uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line"></span><br><span class="line">    struct Zombie &#123;</span><br><span class="line">        string name;</span><br><span class="line">        uint dna;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Zombie[] public zombies;</span><br><span class="line"></span><br><span class="line">    mapping (<span class="function"><span class="params">uint</span> =&gt;</span> address) public zombieToOwner;</span><br><span class="line">    mapping (<span class="function"><span class="params">address</span> =&gt;</span> uint) ownerZombieCount;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_createZombie</span>(<span class="params">string _name, uint _dna</span>) <span class="title">private</span> </span>&#123;</span><br><span class="line">        uint id = zombies.push(Zombie(_name, _dna)) - <span class="number">1</span>;</span><br><span class="line">        zombieToOwner[id] = msg.sender;</span><br><span class="line">        ownerZombieCount[msg.sender]++;</span><br><span class="line">        NewZombie(id, _name, _dna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_generateRandomDna</span>(<span class="params">string _str</span>) <span class="title">private</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>) </span>&#123;</span><br><span class="line">        uint rand = uint(keccak256(_str));</span><br><span class="line">        <span class="keyword">return</span> rand % dnaModulus;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">createRandomZombie</span>(<span class="params">string _name</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        <span class="built_in">require</span>(ownerZombieCount[msg.sender] == <span class="number">0</span>);</span><br><span class="line">        uint randDna = _generateRandomDna(_name);</span><br><span class="line">        _createZombie(_name, randDna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Start here</span></span><br><span class="line">contract ZombieFeeding is ZombieFactory &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="å¼•å…¥ï¼ˆImportï¼‰"><a href="#å¼•å…¥ï¼ˆImportï¼‰" class="headerlink" title="å¼•å…¥ï¼ˆImportï¼‰"></a>å¼•å…¥ï¼ˆImportï¼‰</h1><p>å“‡ï¼ä½ æœ‰æ²¡æœ‰æ³¨æ„åˆ°ï¼Œæˆ‘ä»¬åªæ˜¯æ¸…ç†äº†ä¸‹å³è¾¹çš„ä»£ç ï¼Œç°åœ¨ä½ çš„ç¼–è¾‘å™¨çš„é¡¶éƒ¨å°±å¤šäº†ä¸ªé€‰é¡¹å¡ã€‚ å°è¯•ç‚¹å‡»å®ƒçš„æ ‡ç­¾ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆå§ï¼</p>
<p>ä»£ç å·²ç»å¤Ÿé•¿äº†ï¼Œæˆ‘ä»¬æŠŠå®ƒåˆ†æˆå¤šä¸ªæ–‡ä»¶ä»¥ä¾¿äºç®¡ç†ã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼Œå½“ Solidity é¡¹ç›®ä¸­çš„ä»£ç å¤ªé•¿çš„æ—¶å€™æˆ‘ä»¬å°±æ˜¯è¿™ä¹ˆåšçš„ã€‚</p>
<p>åœ¨ Solidity ä¸­ï¼Œå½“ä½ æœ‰å¤šä¸ªæ–‡ä»¶å¹¶ä¸”æƒ³æŠŠä¸€ä¸ªæ–‡ä»¶å¯¼å…¥å¦ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>import</code> è¯­å¥ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"./someothercontract.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract newContract is SomeOtherContract &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å½“æˆ‘ä»¬åœ¨åˆçº¦ï¼ˆcontractï¼‰ç›®å½•ä¸‹æœ‰ä¸€ä¸ªåä¸º <code>someothercontract.sol</code> çš„æ–‡ä»¶ï¼ˆ <code>./</code> å°±æ˜¯åŒä¸€ç›®å½•çš„æ„æ€ï¼‰ï¼Œå®ƒå°±ä¼šè¢«ç¼–è¯‘å™¨å¯¼å…¥ã€‚</p>
<h2 id="å®æˆ˜æ¼”ä¹ -5"><a href="#å®æˆ˜æ¼”ä¹ -5" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>ç°åœ¨æˆ‘ä»¬å·²ç»å»ºç«‹äº†ä¸€ä¸ªå¤šæ–‡ä»¶æ¶æ„ï¼Œå¹¶ç”¨ <code>import</code> æ¥è¯»å–æ¥è‡ªå¦ä¸€ä¸ªæ–‡ä»¶ä¸­åˆçº¦çš„å†…å®¹ï¼š</p>
<p>1.å°† <code>zombiefactory.sol</code> å¯¼å…¥åˆ°æˆ‘ä»¬çš„æ–°æ–‡ä»¶ <code>zombiefeeding.sol</code> ä¸­ã€‚</p>
<h2 id="åˆçº¦å®Œå–„-4"><a href="#åˆçº¦å®Œå–„-4" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>zombiefeeding.sol</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// put import statement here</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefactory.sol"</span>;</span><br><span class="line">contract ZombieFeeding is ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Storageä¸Memory"><a href="#Storageä¸Memory" class="headerlink" title="Storageä¸Memory"></a>Storageä¸Memory</h1><p>åœ¨ Solidity ä¸­ï¼Œæœ‰ä¸¤ä¸ªåœ°æ–¹å¯ä»¥å­˜å‚¨å˜é‡ â€”â€” <code>storage</code> æˆ– <code>memory</code>ã€‚</p>
<p><strong><em>Storage\</em></strong> å˜é‡æ˜¯æŒ‡æ°¸ä¹…å­˜å‚¨åœ¨åŒºå—é“¾ä¸­çš„å˜é‡ã€‚ <strong><em>Memory\</em></strong> å˜é‡åˆ™æ˜¯ä¸´æ—¶çš„ï¼Œå½“å¤–éƒ¨å‡½æ•°å¯¹æŸåˆçº¦è°ƒç”¨å®Œæˆæ—¶ï¼Œå†…å­˜å‹å˜é‡å³è¢«ç§»é™¤ã€‚ ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆå­˜å‚¨åœ¨ä½ ç”µè„‘çš„ç¡¬ç›˜æˆ–æ˜¯RAMä¸­æ•°æ®çš„å…³ç³»ã€‚</p>
<p>å¤§å¤šæ•°æ—¶å€™ä½ éƒ½ç”¨ä¸åˆ°è¿™äº›å…³é”®å­—ï¼Œé»˜è®¤æƒ…å†µä¸‹ Solidity ä¼šè‡ªåŠ¨å¤„ç†å®ƒä»¬ã€‚ çŠ¶æ€å˜é‡ï¼ˆåœ¨å‡½æ•°ä¹‹å¤–å£°æ˜çš„å˜é‡ï¼‰é»˜è®¤ä¸ºâ€œå­˜å‚¨â€å½¢å¼ï¼Œå¹¶æ°¸ä¹…å†™å…¥åŒºå—é“¾ï¼›è€Œåœ¨å‡½æ•°å†…éƒ¨å£°æ˜çš„å˜é‡æ˜¯â€œå†…å­˜â€å‹çš„ï¼Œå®ƒä»¬å‡½æ•°è°ƒç”¨ç»“æŸåæ¶ˆå¤±ã€‚</p>
<p>ç„¶è€Œä¹Ÿæœ‰ä¸€äº›æƒ…å†µä¸‹ï¼Œä½ éœ€è¦æ‰‹åŠ¨å£°æ˜å­˜å‚¨ç±»å‹ï¼Œä¸»è¦ç”¨äºå¤„ç†å‡½æ•°å†…çš„ <strong>_ ç»“æ„ä½“ _</strong> å’Œ <strong>_ æ•°ç»„ _</strong> æ—¶ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">contract SandwichFactory &#123;</span><br><span class="line">  struct Sandwich &#123;</span><br><span class="line">    string name;</span><br><span class="line">    string status;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Sandwich[] sandwiches;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">eatSandwich</span>(<span class="params">uint _index</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Sandwich mySandwich = sandwiches[_index];</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ^ çœ‹ä¸Šå»å¾ˆç›´æ¥ï¼Œä¸è¿‡ Solidity å°†ä¼šç»™å‡ºè­¦å‘Š</span></span><br><span class="line">    <span class="comment">// å‘Šè¯‰ä½ åº”è¯¥æ˜ç¡®åœ¨è¿™é‡Œå®šä¹‰ `storage` æˆ–è€… `memory`ã€‚</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰€ä»¥ä½ åº”è¯¥æ˜ç¡®å®šä¹‰ `storage`:</span></span><br><span class="line">    Sandwich storage mySandwich = sandwiches[_index];</span><br><span class="line">    <span class="comment">// ...è¿™æ · `mySandwich` æ˜¯æŒ‡å‘ `sandwiches[_index]`çš„æŒ‡é’ˆ</span></span><br><span class="line">    <span class="comment">// åœ¨å­˜å‚¨é‡Œï¼Œå¦å¤–...</span></span><br><span class="line">    mySandwich.status = <span class="string">"Eaten!"</span>;</span><br><span class="line">    <span class="comment">// ...è¿™å°†æ°¸ä¹…æŠŠ `sandwiches[_index]` å˜ä¸ºåŒºå—é“¾ä¸Šçš„å­˜å‚¨</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœä½ åªæƒ³è¦ä¸€ä¸ªå‰¯æœ¬ï¼Œå¯ä»¥ä½¿ç”¨`memory`:</span></span><br><span class="line">    Sandwich memory anotherSandwich = sandwiches[_index + <span class="number">1</span>];</span><br><span class="line">    <span class="comment">// ...è¿™æ · `anotherSandwich` å°±ä»…ä»…æ˜¯ä¸€ä¸ªå†…å­˜é‡Œçš„å‰¯æœ¬äº†</span></span><br><span class="line">    <span class="comment">// å¦å¤–</span></span><br><span class="line">    anotherSandwich.status = <span class="string">"Eaten!"</span>;</span><br><span class="line">    <span class="comment">// ...å°†ä»…ä»…ä¿®æ”¹ä¸´æ—¶å˜é‡ï¼Œå¯¹ `sandwiches[_index + 1]` æ²¡æœ‰ä»»ä½•å½±å“</span></span><br><span class="line">    <span class="comment">// ä¸è¿‡ä½ å¯ä»¥è¿™æ ·åš:</span></span><br><span class="line">    sandwiches[_index + <span class="number">1</span>] = anotherSandwich;</span><br><span class="line">    <span class="comment">// ...å¦‚æœä½ æƒ³æŠŠå‰¯æœ¬çš„æ”¹åŠ¨ä¿å­˜å›åŒºå—é“¾å­˜å‚¨</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ è¿˜æ²¡æœ‰å®Œå…¨ç†è§£ç©¶ç«Ÿåº”è¯¥ä½¿ç”¨å“ªä¸€ä¸ªï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒ â€”â€” åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†å‘Šè¯‰ä½ ä½•æ—¶ä½¿ç”¨ <code>storage</code> æˆ–æ˜¯ <code>memory</code>ï¼Œå¹¶ä¸”å½“ä½ ä¸å¾—ä¸ä½¿ç”¨åˆ°è¿™äº›å…³é”®å­—çš„æ—¶å€™ï¼ŒSolidity ç¼–è¯‘å™¨ä¹Ÿå‘è­¦ç¤ºæé†’ä½ çš„ã€‚</p>
<p>ç°åœ¨ï¼Œåªè¦çŸ¥é“åœ¨æŸäº›åœºåˆä¸‹ä¹Ÿéœ€è¦ä½ æ˜¾å¼åœ°å£°æ˜ <code>storage</code> æˆ– <code>memory</code>å°±å¤Ÿäº†ï¼</p>
<h2 id="å®æˆ˜æ¼”ä¹ -6"><a href="#å®æˆ˜æ¼”ä¹ -6" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æ˜¯æ—¶å€™ç»™æˆ‘ä»¬çš„åƒµå°¸å¢åŠ â€œçŒé£Ÿâ€å’Œâ€œç¹æ®–â€åŠŸèƒ½äº†ï¼</p>
<p>å½“ä¸€ä¸ªåƒµå°¸çŒé£Ÿå…¶ä»–ç”Ÿç‰©ä½“æ—¶ï¼Œå®ƒè‡ªèº«çš„DNAå°†ä¸çŒç‰©ç”Ÿç‰©çš„DNAç»“åˆåœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„åƒµå°¸DNAã€‚</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªåä¸º <code>feedAndMultiply</code> çš„å‡½æ•°ã€‚ ä½¿ç”¨ä¸¤ä¸ªå‚æ•°ï¼š<code>_zombieId</code>ï¼ˆ <code>uint</code>ç±»å‹ ï¼‰å’Œ<code>_targetDna</code> ï¼ˆä¹Ÿæ˜¯ <code>uint</code> ç±»å‹ï¼‰ã€‚ è®¾ç½®å±æ€§ä¸º <code>public</code> çš„ã€‚</li>
<li>æˆ‘ä»¬ä¸å¸Œæœ›åˆ«äººç”¨æˆ‘ä»¬çš„åƒµå°¸å»æ•çŒã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬ç¡®ä¿å¯¹è‡ªå·±åƒµå°¸çš„æ‰€æœ‰æƒã€‚ é€šè¿‡æ·»åŠ ä¸€ä¸ª<code>require</code> è¯­å¥æ¥ç¡®ä¿ <code>msg.sender</code> åªèƒ½æ˜¯è¿™ä¸ªåƒµå°¸çš„ä¸»äººï¼ˆç±»ä¼¼äºæˆ‘ä»¬åœ¨ <code>createRandomZombie</code> å‡½æ•°ä¸­åšè¿‡çš„é‚£æ ·ï¼‰ã€‚</li>
</ol>
<blockquote>
<p>æ³¨æ„ï¼šåŒæ ·ï¼Œå› ä¸ºæˆ‘ä»¬çš„ç­”æ¡ˆæ£€æŸ¥å™¨æ¯”è¾ƒå‘†èŒï¼Œåªè®¤è¯†æŠŠ <code>msg.sender</code> æ”¾åœ¨å‰é¢çš„ç­”æ¡ˆï¼Œå¦‚æœä½ åˆ‡æ¢äº†å‚æ•°çš„é¡ºåºï¼Œå®ƒå°±ä¸è®¤å¾—äº†ã€‚ ä½†ä½ æ­£å¸¸ç¼–ç æ—¶ï¼Œå¦‚ä½•å®‰æ’å‚æ•°é¡ºåºéƒ½æ˜¯æ­£ç¡®çš„ã€‚</p>
</blockquote>
<ol>
<li>ä¸ºäº†è·å–è¿™ä¸ªåƒµå°¸çš„DNAï¼Œæˆ‘ä»¬çš„å‡½æ•°éœ€è¦å£°æ˜ä¸€ä¸ªåä¸º <code>myZombie</code> æ•°æ®ç±»å‹ä¸º<code>Zombie</code>çš„æœ¬åœ°å˜é‡ï¼ˆè¿™æ˜¯ä¸€ä¸ª <code>storage</code> å‹çš„æŒ‡é’ˆï¼‰ã€‚ å°†å…¶å€¼è®¾å®šä¸ºåœ¨ <code>zombies</code> æ•°ç»„ä¸­ç´¢å¼•ä¸º<code>_zombieId</code>æ‰€æŒ‡å‘çš„å€¼ã€‚</li>
</ol>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒåŒ…æ‹¬å‡½æ•°ç»“æŸç¬¦ <code>}</code> çš„é‚£ä¸€è¡Œï¼Œ æ€»å…±4è¡Œä»£ç ã€‚</p>
<p>ä¸‹ä¸€ç« é‡Œï¼Œæˆ‘ä»¬ä¼šç»§ç»­ä¸°å¯Œè¿™ä¸ªåŠŸèƒ½ã€‚</p>
<h2 id="åˆçº¦å®Œå–„-5"><a href="#åˆçº¦å®Œå–„-5" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>zombiefeeding.sol</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefactory.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFeeding is ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Start here</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedAndMultiply</span>(<span class="params">uint _zombieId, uint _targetDna</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    Zombie storage myZombie = zombies[_zombieId];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="åƒµå°¸çš„DNA"><a href="#åƒµå°¸çš„DNA" class="headerlink" title="åƒµå°¸çš„DNA"></a>åƒµå°¸çš„DNA</h1><p>æˆ‘ä»¬æ¥æŠŠ <code>feedAndMultiply</code> å‡½æ•°å†™å®Œå§ã€‚</p>
<p>è·å–æ–°çš„åƒµå°¸DNAçš„å…¬å¼å¾ˆç®€å•ï¼šè®¡ç®—çŒé£Ÿåƒµå°¸DNAå’Œè¢«çŒåƒµå°¸DNAä¹‹é—´çš„å¹³å‡å€¼ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testDnaSplicing</span>(<span class="params"></span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">  uint zombieDna = <span class="number">2222222222222222</span>;</span><br><span class="line">  uint targetDna = <span class="number">4444444444444444</span>;</span><br><span class="line">  uint newZombieDna = (zombieDna + targetDna) / <span class="number">2</span>;</span><br><span class="line">  <span class="comment">// newZombieDna å°†ç­‰äº 3333333333333333</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥åï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®©å‡½æ•°å˜å¾—æ›´å¤æ‚äº›ï¼Œæ¯”æ–¹ç»™æ–°çš„åƒµå°¸çš„ DNA å¢åŠ ä¸€äº›éšæœºæ€§ä¹‹ç±»çš„ã€‚ä½†ç°åœ¨å…ˆä»æœ€ç®€å•çš„å¼€å§‹ â€”â€” ä»¥åè¿˜å¯ä»¥å›æ¥å®Œå–„å®ƒå˜›ã€‚</p>
<h2 id="å®æˆ˜æ¼”ä¹ -7"><a href="#å®æˆ˜æ¼”ä¹ -7" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><ol>
<li>é¦–å…ˆæˆ‘ä»¬ç¡®ä¿ <code>_targetDna</code> ä¸é•¿äº16ä½ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½® <code>_targetDna</code> ä¸º <code>_targetDna ï¼… dnaModulus</code> ï¼Œå¹¶ä¸”åªå–å…¶æœ€å16ä½æ•°å­—ã€‚</li>
<li>æ¥ä¸‹æ¥ä¸ºæˆ‘ä»¬çš„å‡½æ•°å£°æ˜ä¸€ä¸ªåå« <code>newDna</code> çš„ <code>uint</code>ç±»å‹çš„å˜é‡ï¼Œå¹¶å°†å…¶å€¼è®¾ç½®ä¸º <code>myZombie</code>çš„ DNA å’Œ <code>_targetDna</code> çš„å¹³å‡å€¼ï¼ˆå¦‚ä¸Šä¾‹æ‰€ç¤ºï¼‰ã€‚</li>
</ol>
<blockquote>
<p>æ³¨æ„ï¼šæ‚¨å¯ä»¥ç”¨ <code>myZombie.name</code> æˆ– <code>myZombie.dna</code> è®¿é—® <code>myZombie</code> çš„å±æ€§ã€‚</p>
</blockquote>
<ol>
<li>ä¸€æ—¦æˆ‘ä»¬è®¡ç®—å‡ºæ–°çš„DNAï¼Œå†è°ƒç”¨ <code>_createZombie</code> å°±å¯ä»¥ç”Ÿæˆæ–°çš„åƒµå°¸äº†ã€‚å¦‚æœä½ å¿˜äº†è°ƒç”¨è¿™ä¸ªå‡½æ•°æ‰€éœ€è¦çš„å‚æ•°ï¼Œå¯ä»¥æŸ¥çœ‹ <code>zombiefactory.sol</code> é€‰é¡¹å¡ã€‚è¯·æ³¨æ„ï¼Œéœ€è¦å…ˆç»™å®ƒå‘½åï¼Œæ‰€ä»¥ç°åœ¨æˆ‘ä»¬æŠŠæ–°çš„åƒµå°¸çš„åå­—è®¾ä¸º<code>NoName</code> - æˆ‘ä»¬å›å¤´å¯ä»¥ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥æ›´æ”¹åƒµå°¸çš„åå­—ã€‚</li>
</ol>
<blockquote>
<p>æ³¨æ„ï¼šå¯¹äº Solidity é«˜æ‰‹ï¼Œä½ å¯èƒ½ä¼šæ³¨æ„åˆ°æˆ‘ä»¬çš„ä»£ç å­˜åœ¨ä¸€ä¸ªé—®é¢˜ã€‚åˆ«æ‹…å¿ƒï¼Œä¸‹ä¸€ç« ä¼šè§£å†³è¿™ä¸ªé—®é¢˜çš„ ;ï¼‰</p>
</blockquote>
<h2 id="åˆçº¦å®Œå–„-6"><a href="#åˆçº¦å®Œå–„-6" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>zombiefeeding.sol</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefactory.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFeeding is ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedAndMultiply</span>(<span class="params">uint _zombieId, uint _targetDna</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    Zombie storage myZombie = zombies[_zombieId];</span><br><span class="line">    <span class="comment">// start here</span></span><br><span class="line">    _targetDna = _targetDna % dnaModulus;</span><br><span class="line">    uint newDna = (myZombie.dna + _targetDna) / <span class="number">2</span>;</span><br><span class="line">    _createZombie(<span class="string">"NoName"</span>, newDna);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="æ›´å¤šå…³äºå‡½æ•°å¯è§æ€§"><a href="#æ›´å¤šå…³äºå‡½æ•°å¯è§æ€§" class="headerlink" title="æ›´å¤šå…³äºå‡½æ•°å¯è§æ€§"></a>æ›´å¤šå…³äºå‡½æ•°å¯è§æ€§</h1><p><strong>æˆ‘ä»¬ä¸Šä¸€è¯¾çš„ä»£ç æœ‰é—®é¢˜ï¼</strong></p>
<p>ç¼–è¯‘çš„æ—¶å€™ç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ã€‚</p>
<p>é”™è¯¯åœ¨äºï¼Œæˆ‘ä»¬å°è¯•ä» <code>ZombieFeeding</code> ä¸­è°ƒç”¨ <code>_createZombie</code> å‡½æ•°ï¼Œä½† <code>_createZombie</code> å´æ˜¯ <code>ZombieFactory</code> çš„ <code>private</code> ï¼ˆç§æœ‰ï¼‰å‡½æ•°ã€‚è¿™æ„å‘³ç€ä»»ä½•ç»§æ‰¿è‡ª <code>ZombieFactory</code> çš„å­åˆçº¦éƒ½ä¸èƒ½è®¿é—®å®ƒã€‚</p>
<h2 id="internal-å’Œ-external"><a href="#internal-å’Œ-external" class="headerlink" title="internal å’Œ external"></a>internal å’Œ external</h2><p>é™¤ <code>public</code> å’Œ <code>private</code> å±æ€§ä¹‹å¤–ï¼ŒSolidity è¿˜ä½¿ç”¨äº†å¦å¤–ä¸¤ä¸ªæè¿°å‡½æ•°å¯è§æ€§çš„ä¿®é¥°è¯ï¼š<code>internal</code>ï¼ˆå†…éƒ¨ï¼‰ å’Œ <code>external</code>ï¼ˆå¤–éƒ¨ï¼‰ã€‚</p>
<p><code>internal</code> å’Œ <code>private</code> ç±»ä¼¼ï¼Œä¸è¿‡ï¼Œ å¦‚æœæŸä¸ªåˆçº¦ç»§æ‰¿è‡ªå…¶çˆ¶åˆçº¦ï¼Œè¿™ä¸ªåˆçº¦å³å¯ä»¥è®¿é—®çˆ¶åˆçº¦ä¸­å®šä¹‰çš„â€œå†…éƒ¨â€å‡½æ•°ã€‚ï¼ˆå˜¿ï¼Œè¿™å¬èµ·æ¥æ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„é‚£æ ·ï¼ï¼‰ã€‚</p>
<p><code>external</code> ä¸<code>public</code> ç±»ä¼¼ï¼Œåªä¸è¿‡è¿™äº›å‡½æ•°åªèƒ½åœ¨åˆçº¦ä¹‹å¤–è°ƒç”¨ - å®ƒä»¬ä¸èƒ½è¢«åˆçº¦å†…çš„å…¶ä»–å‡½æ•°è°ƒç”¨ã€‚ç¨åæˆ‘ä»¬å°†è®¨è®ºä»€ä¹ˆæ—¶å€™ä½¿ç”¨ <code>external</code> å’Œ <code>public</code>ã€‚</p>
<p>å£°æ˜å‡½æ•° <code>internal</code> æˆ– <code>external</code> ç±»å‹çš„è¯­æ³•ï¼Œä¸å£°æ˜ <code>private</code> å’Œ <code>public</code>ç±» å‹ç›¸åŒï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">contract Sandwich &#123;</span><br><span class="line">  uint private sandwichesEaten = 0;</span><br><span class="line"></span><br><span class="line">  function eat() internal &#123;</span><br><span class="line">    sandwichesEaten++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract BLT is Sandwich &#123;</span><br><span class="line">  uint private baconSandwichesEaten = 0;</span><br><span class="line"></span><br><span class="line">  function eatWithBacon() public returns (string) &#123;</span><br><span class="line">    baconSandwichesEaten++;</span><br><span class="line">    // å› ä¸ºeat() æ˜¯internal çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬èƒ½åœ¨è¿™é‡Œè°ƒç”¨</span><br><span class="line">    eat();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å®æˆ˜æ¼”ä¹ -8"><a href="#å®æˆ˜æ¼”ä¹ -8" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><ol>
<li><p>å°† <code>_createZombie()</code> å‡½æ•°çš„å±æ€§ä» <code>private</code> æ”¹ä¸º <code>internal</code> ï¼Œ ä½¿å¾—å…¶ä»–çš„åˆçº¦ä¹Ÿèƒ½è®¿é—®åˆ°å®ƒã€‚</p>
<p>æˆ‘ä»¬å·²ç»æˆåŠŸæŠŠä½ çš„æ³¨æ„åŠ›é›†ä¸­åœ¨åˆ°<code>zombiefactory.sol</code>è¿™ä¸ªé€‰é¡¹å¡ä¸Šå•¦ã€‚</p>
</li>
</ol>
<h2 id="åˆçº¦å®Œå–„-7"><a href="#åˆçº¦å®Œå–„-7" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>ZombieFactory.sol</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">    event NewZombie(uint zombieId, string name, uint dna);</span><br><span class="line"></span><br><span class="line">    uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">    uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line"></span><br><span class="line">    struct Zombie &#123;</span><br><span class="line">        string name;</span><br><span class="line">        uint dna;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Zombie[] public zombies;</span><br><span class="line"></span><br><span class="line">    mapping (<span class="function"><span class="params">uint</span> =&gt;</span> address) public zombieToOwner;</span><br><span class="line">    mapping (<span class="function"><span class="params">address</span> =&gt;</span> uint) ownerZombieCount;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨è¿™é‡Œä¿®æ”¹å‡½æ•°çš„åŠŸèƒ½</span></span><br><span class="line">    <span class="comment">//function _createZombie(string _name, uint _dna) private &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_createZombie</span>(<span class="params">string _name, uint _dna</span>) <span class="title">internal</span> </span>&#123;</span><br><span class="line">        uint id = zombies.push(Zombie(_name, _dna)) - <span class="number">1</span>;</span><br><span class="line">        zombieToOwner[id] = msg.sender;</span><br><span class="line">        ownerZombieCount[msg.sender]++;</span><br><span class="line">        NewZombie(id, _name, _dna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_generateRandomDna</span>(<span class="params">string _str</span>) <span class="title">private</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>) </span>&#123;</span><br><span class="line">        uint rand = uint(keccak256(_str));</span><br><span class="line">        <span class="keyword">return</span> rand % dnaModulus;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">createRandomZombie</span>(<span class="params">string _name</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        <span class="built_in">require</span>(ownerZombieCount[msg.sender] == <span class="number">0</span>);</span><br><span class="line">        uint randDna = _generateRandomDna(_name);</span><br><span class="line">        _createZombie(_name, randDna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="åƒµå°¸åƒä»€ä¹ˆ"><a href="#åƒµå°¸åƒä»€ä¹ˆ" class="headerlink" title="åƒµå°¸åƒä»€ä¹ˆ?"></a>åƒµå°¸åƒä»€ä¹ˆ?</h1><p>æ˜¯æ—¶å€™è®©æˆ‘ä»¬çš„åƒµå°¸å»æ•çŒï¼ é‚£åƒµå°¸æœ€å–œæ¬¢çš„é£Ÿç‰©æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>Crypto åƒµå°¸å–œæ¬¢åƒçš„æ˜¯â€¦</p>
<p><strong>CryptoKittiesï¼</strong> ğŸ˜±ğŸ˜±ğŸ˜±</p>
<p>ï¼ˆæ­£ç»ç‚¹ï¼Œæˆ‘å¯ä¸æ˜¯å¼€ç©ç¬‘ğŸ˜†ï¼‰</p>
<p>ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬è¦è¯»å‡º CryptoKitties æ™ºèƒ½åˆçº¦ä¸­çš„ kittyDnaã€‚è¿™äº›æ•°æ®æ˜¯å…¬å¼€å­˜å‚¨åœ¨åŒºå—é“¾ä¸Šçš„ã€‚åŒºå—é“¾æ˜¯ä¸æ˜¯å¾ˆé…·ï¼Ÿ</p>
<p>åˆ«æ‹…å¿ƒ â€”â€” æˆ‘ä»¬çš„æ¸¸æˆå¹¶ä¸ä¼šä¼¤å®³åˆ°ä»»ä½•çœŸæ­£çš„CryptoKittyã€‚ æˆ‘ä»¬åª <em>è¯»å–</em> CryptoKitties æ•°æ®ï¼Œä½†å´æ— æ³•åœ¨ç‰©ç†ä¸Šåˆ é™¤å®ƒã€‚</p>
<h2 id="ä¸å…¶ä»–åˆçº¦çš„äº¤äº’"><a href="#ä¸å…¶ä»–åˆçº¦çš„äº¤äº’" class="headerlink" title="ä¸å…¶ä»–åˆçº¦çš„äº¤äº’"></a>ä¸å…¶ä»–åˆçº¦çš„äº¤äº’</h2><p>å¦‚æœæˆ‘ä»¬çš„åˆçº¦éœ€è¦å’ŒåŒºå—é“¾ä¸Šçš„å…¶ä»–çš„åˆçº¦ä¼šè¯ï¼Œåˆ™éœ€å…ˆå®šä¹‰ä¸€ä¸ª <strong><em>interface\</em></strong> (æ¥å£)ã€‚</p>
<p>å…ˆä¸¾ä¸€ä¸ªç®€å•çš„æ —å­ã€‚ å‡è®¾åœ¨åŒºå—é“¾ä¸Šæœ‰è¿™ä¹ˆä¸€ä¸ªåˆçº¦ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">contract LuckyNumber &#123;</span><br><span class="line">  mapping(<span class="function"><span class="params">address</span> =&gt;</span> uint) numbers;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">setNum</span>(<span class="params">uint _num</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    numbers[msg.sender] = _num;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getNum</span>(<span class="params">address _myAddress</span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> numbers[_myAddress];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯ä¸ªå¾ˆç®€å•çš„åˆçº¦ï¼Œæ‚¨å¯ä»¥ç”¨å®ƒå­˜å‚¨è‡ªå·±çš„å¹¸è¿å·ç ï¼Œå¹¶å°†å…¶ä¸æ‚¨çš„ä»¥å¤ªåŠåœ°å€å…³è”ã€‚ è¿™æ ·å…¶ä»–äººå°±å¯ä»¥é€šè¿‡æ‚¨çš„åœ°å€æŸ¥æ‰¾æ‚¨çš„å¹¸è¿å·ç äº†ã€‚</p>
<p>ç°åœ¨å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå¤–éƒ¨åˆçº¦ï¼Œä½¿ç”¨ <code>getNum</code> å‡½æ•°å¯è¯»å–å…¶ä¸­çš„æ•°æ®ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰ <code>LuckyNumber</code> åˆçº¦çš„ <strong><em>interface\</em></strong> ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">contract NumberInterface &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getNum</span>(<span class="params">address _myAddress</span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>);</span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure>

<p>è¯·æ³¨æ„ï¼Œè¿™ä¸ªè¿‡ç¨‹è™½ç„¶çœ‹èµ·æ¥åƒåœ¨å®šä¹‰ä¸€ä¸ªåˆçº¦ï¼Œä½†å…¶å®å†…é‡Œä¸åŒï¼š</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬åªå£°æ˜äº†è¦ä¸ä¹‹äº¤äº’çš„å‡½æ•° â€”â€” åœ¨æœ¬ä¾‹ä¸­ä¸º <code>getNum</code> â€”â€” åœ¨å…¶ä¸­æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨åˆ°ä»»ä½•å…¶ä»–çš„å‡½æ•°æˆ–çŠ¶æ€å˜é‡ã€‚</p>
<p>å…¶æ¬¡ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰ä½¿ç”¨å¤§æ‹¬å·ï¼ˆ<code>{</code> å’Œ <code>}</code>ï¼‰å®šä¹‰å‡½æ•°ä½“ï¼Œæˆ‘ä»¬å•å•ç”¨åˆ†å·ï¼ˆ<code>;</code>ï¼‰ç»“æŸäº†å‡½æ•°å£°æ˜ã€‚è¿™ä½¿å®ƒçœ‹èµ·æ¥åƒä¸€ä¸ªåˆçº¦æ¡†æ¶ã€‚</p>
<p>ç¼–è¯‘å™¨å°±æ˜¯é è¿™äº›ç‰¹å¾è®¤å‡ºå®ƒæ˜¯ä¸€ä¸ªæ¥å£çš„ã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„ app ä»£ç ä¸­ä½¿ç”¨è¿™ä¸ªæ¥å£ï¼Œåˆçº¦å°±çŸ¥é“å…¶ä»–åˆçº¦çš„å‡½æ•°æ˜¯æ€æ ·çš„ï¼Œåº”è¯¥å¦‚ä½•è°ƒç”¨ï¼Œä»¥åŠå¯æœŸå¾…ä»€ä¹ˆç±»å‹çš„è¿”å›å€¼ã€‚</p>
<p>åœ¨ä¸‹ä¸€è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†çœŸæ­£è°ƒç”¨å…¶ä»–åˆçº¦çš„å‡½æ•°ã€‚ç›®å‰æˆ‘ä»¬åªè¦å£°æ˜ä¸€ä¸ªæ¥å£ï¼Œç”¨äºè°ƒç”¨ CryptoKitties åˆçº¦å°±è¡Œäº†ã€‚</p>
<h2 id="å®æˆ˜æ¼”ä¹ -9"><a href="#å®æˆ˜æ¼”ä¹ -9" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æˆ‘ä»¬å·²ç»ä¸ºä½ æŸ¥çœ‹è¿‡äº† CryptoKitties çš„æºä»£ç ï¼Œå¹¶ä¸”æ‰¾åˆ°äº†ä¸€ä¸ªåä¸º <code>getKitty</code>çš„å‡½æ•°ï¼Œå®ƒè¿”å›æ‰€æœ‰çš„åŠ å¯†çŒ«çš„æ•°æ®ï¼ŒåŒ…æ‹¬å®ƒçš„â€œåŸºå› â€ï¼ˆæˆ‘ä»¬çš„åƒµå°¸æ¸¸æˆè¦ç”¨å®ƒç”Ÿæˆæ–°çš„åƒµå°¸ï¼‰ã€‚</p>
<p>è¯¥å‡½æ•°å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getKitty</span>(<span class="params">uint256 _id</span>) <span class="title">external</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    bool isGestating,</span></span></span><br><span class="line"><span class="function"><span class="params">    bool isReady,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 cooldownIndex,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 nextActionAt,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 siringWithId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 birthTime,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 matronId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 sireId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 generation,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 genes</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">    Kitty storage kit = kitties[_id];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// if this variable is 0 then it's not gestating</span></span><br><span class="line">    isGestating = (kit.siringWithId != <span class="number">0</span>);</span><br><span class="line">    isReady = (kit.cooldownEndBlock &lt;= block.number);</span><br><span class="line">    cooldownIndex = uint256(kit.cooldownIndex);</span><br><span class="line">    nextActionAt = uint256(kit.cooldownEndBlock);</span><br><span class="line">    siringWithId = uint256(kit.siringWithId);</span><br><span class="line">    birthTime = uint256(kit.birthTime);</span><br><span class="line">    matronId = uint256(kit.matronId);</span><br><span class="line">    sireId = uint256(kit.sireId);</span><br><span class="line">    generation = uint256(kit.generation);</span><br><span class="line">    genes = kit.genes;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªå‡½æ•°çœ‹èµ·æ¥è·Ÿæˆ‘ä»¬ä¹ æƒ¯çš„å‡½æ•°ä¸å¤ªä¸€æ ·ã€‚ å®ƒç«Ÿç„¶è¿”å›äº†â€¦ä¸€å †ä¸åŒçš„å€¼ï¼ å¦‚æœæ‚¨ç”¨è¿‡ JavaScript ä¹‹ç±»çš„ç¼–ç¨‹è¯­è¨€ï¼Œä¸€å®šä¼šæ„Ÿåˆ°å¥‡æ€ª â€”â€” åœ¨ Solidityä¸­ï¼Œæ‚¨å¯ä»¥è®©ä¸€ä¸ªå‡½æ•°è¿”å›å¤šä¸ªå€¼ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬çŸ¥é“è¿™ä¸ªå‡½æ•°é•¿ä»€ä¹ˆæ ·çš„äº†ï¼Œå°±å¯ä»¥ç”¨å®ƒæ¥åˆ›å»ºä¸€ä¸ªæ¥å£ï¼š</p>
<p>1.å®šä¹‰ä¸€ä¸ªåä¸º <code>KittyInterface</code> çš„æ¥å£ã€‚ è¯·æ³¨æ„ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº† <code>contract</code> å…³é”®å­—ï¼Œ è¿™è¿‡ç¨‹çœ‹èµ·æ¥å°±åƒåˆ›å»ºä¸€ä¸ªæ–°çš„åˆçº¦ä¸€æ ·ã€‚</p>
<p>2.åœ¨interfaceé‡Œå®šä¹‰äº† <code>getKitty</code> å‡½æ•°ï¼ˆä¸è¿‡æ˜¯å¤åˆ¶/ç²˜è´´ä¸Šé¢çš„å‡½æ•°ï¼Œä½†åœ¨ <code>returns</code> è¯­å¥ä¹‹åç”¨åˆ†å·ï¼Œè€Œä¸æ˜¯å¤§æ‹¬å·å†…çš„æ‰€æœ‰å†…å®¹ã€‚</p>
<h2 id="åˆçº¦å®Œå–„-8"><a href="#åˆçº¦å®Œå–„-8" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>zombiefeeding.sol</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefactory.sol"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Create KittyInterface here</span></span><br><span class="line">contract KittyInterface &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getKitty</span>(<span class="params">uint256 _id</span>) <span class="title">external</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    bool isGestating,</span></span></span><br><span class="line"><span class="function"><span class="params">    bool isReady,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 cooldownIndex,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 nextActionAt,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 siringWithId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 birthTime,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 matronId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 sireId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 generation,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 genes</span></span></span><br><span class="line"><span class="function"><span class="params">  </span>);</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">contract</span> <span class="title">ZombieFeeding</span> <span class="title">is</span> <span class="title">ZombieFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedAndMultiply</span>(<span class="params">uint _zombieId, uint _targetDna</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    Zombie storage myZombie = zombies[_zombieId];</span><br><span class="line">    _targetDna = _targetDna % dnaModulus;</span><br><span class="line">    uint newDna = (myZombie.dna + _targetDna) / <span class="number">2</span>;</span><br><span class="line">    _createZombie(<span class="string">"NoName"</span>, newDna);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ä½¿ç”¨æ¥å£"><a href="#ä½¿ç”¨æ¥å£" class="headerlink" title="ä½¿ç”¨æ¥å£"></a>ä½¿ç”¨æ¥å£</h1><p>ç»§ç»­å‰é¢ <code>NumberInterface</code> çš„ä¾‹å­ï¼Œæˆ‘ä»¬æ—¢ç„¶å°†æ¥å£å®šä¹‰ä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">contract NumberInterface &#123;</span><br><span class="line">  function getNum(address _myAddress) public view returns (uint);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥åœ¨åˆçº¦ä¸­è¿™æ ·ä½¿ç”¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">contract MyContract &#123;</span><br><span class="line">  address NumberInterfaceAddress = 0xab38...;</span><br><span class="line">  // ^ è¿™æ˜¯FavoriteNumberåˆçº¦åœ¨ä»¥å¤ªåŠä¸Šçš„åœ°å€</span><br><span class="line">  NumberInterface numberContract = NumberInterface(NumberInterfaceAddress);</span><br><span class="line">  // ç°åœ¨å˜é‡ `numberContract` æŒ‡å‘å¦ä¸€ä¸ªåˆçº¦å¯¹è±¡</span><br><span class="line"></span><br><span class="line">  function someFunction() public &#123;</span><br><span class="line">    // ç°åœ¨æˆ‘ä»¬å¯ä»¥è°ƒç”¨åœ¨é‚£ä¸ªåˆçº¦ä¸­å£°æ˜çš„ `getNum`å‡½æ•°:</span><br><span class="line">    uint num = numberContract.getNum(msg.sender);</span><br><span class="line">    // ...åœ¨è¿™å„¿ä½¿ç”¨ `num`å˜é‡åšäº›ä»€ä¹ˆ</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œåªè¦å°†æ‚¨åˆçº¦çš„å¯è§æ€§è®¾ç½®ä¸º<code>public</code>(å…¬å…±)æˆ–<code>external</code>(å¤–éƒ¨)ï¼Œå®ƒä»¬å°±å¯ä»¥ä¸ä»¥å¤ªåŠåŒºå—é“¾ä¸Šçš„ä»»ä½•å…¶ä»–åˆçº¦è¿›è¡Œäº¤äº’ã€‚</p>
<h2 id="å®æˆ˜æ¼”ä¹ -10"><a href="#å®æˆ˜æ¼”ä¹ -10" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æˆ‘ä»¬æ¥å»ºä¸ªè‡ªå·±çš„åˆçº¦å»è¯»å–å¦ä¸€ä¸ªæ™ºèƒ½åˆçº¦â€“ CryptoKitties çš„å†…å®¹å§ï¼</p>
<ol>
<li>æˆ‘å·²ç»å°†ä»£ç ä¸­ CryptoKitties åˆçº¦çš„åœ°å€ä¿å­˜åœ¨ä¸€ä¸ªåä¸º <code>ckAddress</code> çš„å˜é‡ä¸­ã€‚åœ¨ä¸‹ä¸€è¡Œä¸­ï¼Œè¯·åˆ›å»ºä¸€ä¸ªåä¸º <code>kittyContract</code> çš„ KittyInterfaceï¼Œå¹¶ç”¨ <code>ckAddress</code> ä¸ºå®ƒåˆå§‹åŒ– â€”â€” å°±åƒæˆ‘ä»¬ä¸º <code>numberContract</code>æ‰€åšçš„ä¸€æ ·ã€‚</li>
</ol>
<h2 id="åˆçº¦å®Œå–„-9"><a href="#åˆçº¦å®Œå–„-9" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>zombiefeeding.sol</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefactory.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract KittyInterface &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getKitty</span>(<span class="params">uint256 _id</span>) <span class="title">external</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    bool isGestating,</span></span></span><br><span class="line"><span class="function"><span class="params">    bool isReady,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 cooldownIndex,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 nextActionAt,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 siringWithId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 birthTime,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 matronId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 sireId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 generation,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 genes</span></span></span><br><span class="line"><span class="function"><span class="params">  </span>);</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">contract</span> <span class="title">ZombieFeeding</span> <span class="title">is</span> <span class="title">ZombieFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  address ckAddress = <span class="number">0x06012c8cf97BEaD5deAe237070F9587f8E7A266d</span>;</span><br><span class="line">  <span class="comment">// Initialize kittyContract here using `ckAddress` from above</span></span><br><span class="line">  KittyInterface kittyContract = KittyInterface(ckAddress);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedAndMultiply</span>(<span class="params">uint _zombieId, uint _targetDna</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    Zombie storage myZombie = zombies[_zombieId];</span><br><span class="line">    _targetDna = _targetDna % dnaModulus;</span><br><span class="line">    uint newDna = (myZombie.dna + _targetDna) / <span class="number">2</span>;</span><br><span class="line">    _createZombie(<span class="string">"NoName"</span>, newDna);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="å¤„ç†å¤šè¿”å›å€¼"><a href="#å¤„ç†å¤šè¿”å›å€¼" class="headerlink" title="å¤„ç†å¤šè¿”å›å€¼"></a>å¤„ç†å¤šè¿”å›å€¼</h1><p><code>getKitty</code> æ˜¯æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ç¬¬ä¸€ä¸ªè¿”å›å¤šä¸ªå€¼çš„å‡½æ•°ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹æ˜¯å¦‚ä½•å¤„ç†çš„ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">multipleReturns</span>(<span class="params"></span>) <span class="title">internal</span> <span class="title">returns</span>(<span class="params">uint a, uint b, uint c</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">processMultipleReturns</span>(<span class="params"></span>) <span class="title">external</span> </span>&#123;</span><br><span class="line">  uint a;</span><br><span class="line">  uint b;</span><br><span class="line">  uint c;</span><br><span class="line">  <span class="comment">// è¿™æ ·æ¥åšæ‰¹é‡èµ‹å€¼:</span></span><br><span class="line">  (a, b, c) = multipleReturns();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–è€…å¦‚æœæˆ‘ä»¬åªæƒ³è¿”å›å…¶ä¸­ä¸€ä¸ªå˜é‡:</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getLastReturnValue</span>(<span class="params"></span>) <span class="title">external</span> </span>&#123;</span><br><span class="line">  uint c;</span><br><span class="line">  <span class="comment">// å¯ä»¥å¯¹å…¶ä»–å­—æ®µç•™ç©º:</span></span><br><span class="line">  (,,c) = multipleReturns();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å®æˆ˜æ¼”ä¹ -11"><a href="#å®æˆ˜æ¼”ä¹ -11" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æ˜¯æ—¶å€™ä¸ CryptoKitties åˆçº¦äº¤äº’èµ·æ¥äº†ï¼</p>
<p>æˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œä» kitty åˆçº¦ä¸­è·å–å®ƒçš„åŸºå› ï¼š</p>
<ol>
<li><p>åˆ›å»ºä¸€ä¸ªåä¸º <code>feedOnKitty</code> çš„å‡½æ•°ã€‚å®ƒéœ€è¦2ä¸ª <code>uint</code> ç±»å‹çš„å‚æ•°ï¼Œ<code>_zombieId</code> å’Œ<code>_kittyId</code> ï¼Œè¿™æ˜¯ä¸€ä¸ª <code>public</code> ç±»å‹çš„å‡½æ•°ã€‚</p>
</li>
<li><p>å‡½æ•°é¦–å…ˆè¦å£°æ˜ä¸€ä¸ªåä¸º <code>kittyDna</code> çš„ <code>uint</code>ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šåœ¨æˆ‘ä»¬çš„ <code>KittyInterface</code> ä¸­ï¼Œ<code>genes</code> æ˜¯ä¸€ä¸ª <code>uint256</code> ç±»å‹çš„å˜é‡ï¼Œä½†æ˜¯å¦‚æœä½ è®°å¾—ï¼Œæˆ‘ä»¬åœ¨ç¬¬ä¸€è¯¾ä¸­æåˆ°è¿‡ï¼Œ<code>uint</code> æ˜¯ <code>uint256</code> çš„åˆ«åï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä»¬æ˜¯ä¸€å›äº‹ã€‚</p>
</blockquote>
</li>
<li><p>è¿™ä¸ªå‡½æ•°æ¥ä¸‹æ¥è°ƒç”¨ <code>kittyContract.getKitty</code>å‡½æ•°, ä¼ å…¥ <code>_kittyId</code> ï¼Œå°†è¿”å›çš„ <code>genes</code> å­˜å‚¨åœ¨ <code>kittyDna</code> ä¸­ã€‚è®°ä½ â€”â€” <code>getKitty</code> ä¼šè¿”å›ä¸€å¤§å †å˜é‡ã€‚ ï¼ˆç¡®åˆ‡åœ°è¯´10ä¸ª - æˆ‘å·²ç»ä¸ºä½ æ•°è¿‡äº†ï¼Œä¸é”™å§ï¼ï¼‰ã€‚ä½†æ˜¯æˆ‘ä»¬åªå…³å¿ƒæœ€åä¸€ä¸ªâ€“ <code>genes</code>ã€‚æ•°é€—å·çš„æ—¶å€™å°å¿ƒç‚¹å“¦ï¼</p>
</li>
<li><p>æœ€åï¼Œå‡½æ•°è°ƒç”¨äº† <code>feedAndMultiply</code> ï¼Œå¹¶ä¼ å…¥äº† <code>_zombieId</code> å’Œ <code>kittyDna</code> ä¸¤ä¸ªå‚æ•°ã€‚</p>
</li>
</ol>
<h2 id="åˆçº¦å®Œå–„-10"><a href="#åˆçº¦å®Œå–„-10" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>zombiefeeding.sol</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefactory.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract KittyInterface &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getKitty</span>(<span class="params">uint256 _id</span>) <span class="title">external</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    bool isGestating,</span></span></span><br><span class="line"><span class="function"><span class="params">    bool isReady,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 cooldownIndex,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 nextActionAt,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 siringWithId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 birthTime,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 matronId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 sireId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 generation,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 genes</span></span></span><br><span class="line"><span class="function"><span class="params">  </span>);</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">contract</span> <span class="title">ZombieFeeding</span> <span class="title">is</span> <span class="title">ZombieFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  address ckAddress = <span class="number">0x06012c8cf97BEaD5deAe237070F9587f8E7A266d</span>;</span><br><span class="line">  KittyInterface kittyContract = KittyInterface(ckAddress);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedAndMultiply</span>(<span class="params">uint _zombieId, uint _targetDna</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    Zombie storage myZombie = zombies[_zombieId];</span><br><span class="line">    _targetDna = _targetDna % dnaModulus;</span><br><span class="line">    uint newDna = (myZombie.dna + _targetDna) / <span class="number">2</span>;</span><br><span class="line">    _createZombie(<span class="string">"NoName"</span>, newDna);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// define function here</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedOnKitty</span>(<span class="params">uint _zombieId, uint _kittyId</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    uint kittyDna;</span><br><span class="line">    (,,,,,,,,,kittyDna) = kittyContract.getKitty(_kittyId);</span><br><span class="line">    feedAndMultiply(_zombieId, kittyDna);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="å¥–åŠ±-Kitty-åŸºå› "><a href="#å¥–åŠ±-Kitty-åŸºå› " class="headerlink" title="å¥–åŠ±: Kitty åŸºå› "></a>å¥–åŠ±: Kitty åŸºå› </h1><p>æˆ‘ä»¬çš„åŠŸèƒ½é€»è¾‘ä¸»ä½“å·²ç»å®Œæˆäº†â€¦ç°åœ¨è®©æˆ‘ä»¬æ¥æ·»ä¸€ä¸ªå¥–åŠ±åŠŸèƒ½å§ã€‚</p>
<p>è¿™æ ·å§ï¼Œç»™ä»å°çŒ«åˆ¶é€ å‡ºçš„åƒµå°¸æ·»åŠ äº›ç‰¹å¾ï¼Œä»¥æ˜¾ç¤ºä»–ä»¬æ˜¯çŒ«åƒµå°¸ã€‚</p>
<p>è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œå’±ä»¬åœ¨æ–°åƒµå°¸çš„DNAä¸­æ·»åŠ ä¸€äº›ç‰¹æ®Šçš„å°çŒ«ä»£ç ã€‚</p>
<p>è¿˜è®°å¾—å—ï¼Œç¬¬ä¸€è¯¾ä¸­æˆ‘ä»¬æåˆ°ï¼Œæˆ‘ä»¬ç›®å‰åªä½¿ç”¨16ä½DNAçš„å‰12ä½æ•°æ¥æŒ‡å®šåƒµå°¸çš„å¤–è§‚ã€‚æ‰€ä»¥ç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æœ€å2ä¸ªæ•°å­—æ¥å¤„ç†â€œç‰¹æ®Šâ€çš„ç‰¹å¾ã€‚</p>
<p>è¿™æ ·å§ï¼ŒæŠŠçŒ«åƒµå°¸DNAçš„æœ€åä¸¤ä¸ªæ•°å­—è®¾å®šä¸º<code>99</code>ï¼ˆå› ä¸ºçŒ«æœ‰9æ¡å‘½ï¼‰ã€‚æ‰€ä»¥åœ¨æˆ‘ä»¬è¿™ä¹ˆæ¥å†™ä»£ç ï¼š<code>å¦‚æœ</code>è¿™ä¸ªåƒµå°¸æ˜¯ä¸€åªçŒ«å˜æ¥çš„ï¼Œå°±å°†å®ƒDNAçš„æœ€åä¸¤ä½æ•°å­—è®¾ç½®ä¸º<code>99</code>ã€‚</p>
<h2 id="if-è¯­å¥"><a href="#if-è¯­å¥" class="headerlink" title="if è¯­å¥"></a>if è¯­å¥</h2><p>ifè¯­å¥çš„è¯­æ³•åœ¨ Solidity ä¸­ï¼Œä¸åœ¨ JavaScript ä¸­å·®ä¸å¤šï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function eatBLT(string sandwich) public &#123;</span><br><span class="line">  // çœ‹æ¸…æ¥šäº†ï¼Œå½“æˆ‘ä»¬æ¯”è¾ƒå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œéœ€è¦æ¯”è¾ƒä»–ä»¬çš„ keccak256 å“ˆå¸Œç </span><br><span class="line">  if (keccak256(sandwich) == keccak256(&quot;BLT&quot;)) &#123;</span><br><span class="line">    eat();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å®æˆ˜æ¼”ä¹ -12"><a href="#å®æˆ˜æ¼”ä¹ -12" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>è®©æˆ‘ä»¬åœ¨æˆ‘ä»¬çš„åƒµå°¸ä»£ç ä¸­å®ç°å°çŒ«çš„åŸºå› ã€‚</p>
<ol>
<li><p>é¦–å…ˆï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸‹ <code>feedAndMultiply</code> å‡½æ•°çš„å®šä¹‰ï¼Œç»™å®ƒä¼ å…¥ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šä¸€æ¡åä¸º <code>_species</code> çš„å­—ç¬¦ä¸²ã€‚</p>
</li>
<li><p>æ¥ä¸‹æ¥ï¼Œåœ¨æˆ‘ä»¬è®¡ç®—å‡ºæ–°çš„åƒµå°¸çš„DNAä¹‹åï¼Œæ·»åŠ ä¸€ä¸ª <code>if</code> è¯­å¥æ¥æ¯”è¾ƒ <code>_species</code> å’Œå­—ç¬¦ä¸² <code>&quot;kitty&quot;</code> çš„ <code>keccak256</code> å“ˆå¸Œå€¼ã€‚</p>
</li>
<li><p>åœ¨ <code>if</code> è¯­å¥ä¸­ï¼Œæˆ‘ä»¬ç”¨ <code>99</code> æ›¿æ¢äº†æ–°åƒµå°¸DNAçš„æœ€åä¸¤ä½æ•°å­—ã€‚å¯ä»¥è¿™ä¹ˆåšï¼š<code>newDna = newDna - newDna % 100 + 99;</code>ã€‚</p>
<blockquote>
<p>è§£é‡Šï¼šå‡è®¾ <code>newDna</code> æ˜¯ <code>334455</code>ã€‚é‚£ä¹ˆ <code>newDna % 100</code> æ˜¯ <code>55</code>ï¼Œæ‰€ä»¥ <code>newDna - newDna % 100</code> å¾—åˆ° <code>334400</code>ã€‚æœ€ååŠ ä¸Š <code>99</code> å¯å¾—åˆ° <code>334499</code>ã€‚</p>
</blockquote>
</li>
<li><p>æœ€åï¼Œæˆ‘ä»¬ä¿®æ”¹äº† <code>feedOnKitty</code> ä¸­çš„å‡½æ•°è°ƒç”¨ã€‚å½“å®ƒè°ƒç”¨ <code>feedAndMultiply</code> æ—¶ï¼Œå¢åŠ  <code>â€œkittyâ€</code> ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°ã€‚</p>
</li>
</ol>
<h2 id="åˆçº¦å®Œå–„-11"><a href="#åˆçº¦å®Œå–„-11" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>zombiefeeding.sol</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefactory.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract KittyInterface &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getKitty</span>(<span class="params">uint256 _id</span>) <span class="title">external</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    bool isGestating,</span></span></span><br><span class="line"><span class="function"><span class="params">    bool isReady,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 cooldownIndex,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 nextActionAt,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 siringWithId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 birthTime,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 matronId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 sireId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 generation,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 genes</span></span></span><br><span class="line"><span class="function"><span class="params">  </span>);</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">contract</span> <span class="title">ZombieFeeding</span> <span class="title">is</span> <span class="title">ZombieFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  address ckAddress = <span class="number">0x06012c8cf97BEaD5deAe237070F9587f8E7A266d</span>;</span><br><span class="line">  KittyInterface kittyContract = KittyInterface(ckAddress);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿™é‡Œä¿®æ”¹å‡½æ•°å®šä¹‰</span></span><br><span class="line">  <span class="comment">//function feedAndMultiply(uint _zombieId, uint _targetDna) public &#123;</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedAndMultiply</span>(<span class="params">uint _zombieId, uint _targetDna, string _species</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    Zombie storage myZombie = zombies[_zombieId];</span><br><span class="line">    _targetDna = _targetDna % dnaModulus;</span><br><span class="line">    uint newDna = (myZombie.dna + _targetDna) / <span class="number">2</span>;</span><br><span class="line">    <span class="comment">// è¿™é‡Œå¢åŠ ä¸€ä¸ª if è¯­å¥</span></span><br><span class="line">    <span class="keyword">if</span> (keccak256(_species) == keccak256(<span class="string">"kitty"</span>)) &#123;</span><br><span class="line">      newDna = newDna - newDna % <span class="number">100</span> + <span class="number">99</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    _createZombie(<span class="string">"NoName"</span>, newDna);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedOnKitty</span>(<span class="params">uint _zombieId, uint _kittyId</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    uint kittyDna;</span><br><span class="line">    (,,,,,,,,,kittyDna) = kittyContract.getKitty(_kittyId);</span><br><span class="line">    <span class="comment">// å¹¶ä¿®æ”¹å‡½æ•°è°ƒç”¨</span></span><br><span class="line">    <span class="comment">//feedAndMultiply(_zombieId, kittyDna);</span></span><br><span class="line">    feedAndMultiply(_zombieId, kittyDna, <span class="string">"kitty"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="æ”¾åœ¨ä¸€èµ·"><a href="#æ”¾åœ¨ä¸€èµ·" class="headerlink" title="æ”¾åœ¨ä¸€èµ·"></a>æ”¾åœ¨ä¸€èµ·</h1><p>è‡³æ­¤ï¼Œä½ å·²ç»å­¦å®Œç¬¬äºŒè¯¾äº†ï¼</p>
<p>æŸ¥çœ‹ä¸‹â†’_â†’çš„æ¼”ç¤ºï¼Œçœ‹çœ‹ä»–ä»¬æ€ä¹ˆè¿è¡Œèµ·æ¥å¾—å§ã€‚ç»§ç»­ï¼Œä½ è‚¯å®šç­‰ä¸åŠçœ‹å®Œè¿™ä¸€é¡µğŸ˜‰ã€‚ç‚¹å‡»å°çŒ«ï¼Œæ”»å‡»ï¼çœ‹åˆ°ä½ æ–©è·ä¸€ä¸ªæ–°çš„å°çŒ«åƒµå°¸äº†å§ï¼</p>
<h2 id="JavaScript-å®ç°"><a href="#JavaScript-å®ç°" class="headerlink" title="JavaScript å®ç°"></a>JavaScript å®ç°</h2><p>æˆ‘ä»¬åªç”¨ç¼–è¯‘å’Œéƒ¨ç½² <code>ZombieFeeding</code>ï¼Œå°±å¯ä»¥å°†è¿™ä¸ªåˆçº¦éƒ¨ç½²åˆ°ä»¥å¤ªåŠäº†ã€‚æˆ‘ä»¬æœ€ç»ˆå®Œæˆçš„è¿™ä¸ªåˆçº¦ç»§æ‰¿è‡ª <code>ZombieFactory</code>ï¼Œå› æ­¤å®ƒå¯ä»¥è®¿é—®è‡ªå·±å’Œçˆ¶è¾ˆåˆçº¦ä¸­çš„æ‰€æœ‰ public æ–¹æ³•ã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¸æˆ‘ä»¬çš„åˆšéƒ¨ç½²çš„åˆçº¦è¿›è¡Œäº¤äº’çš„ä¾‹å­ï¼Œ è¿™ä¸ªä¾‹å­ä½¿ç”¨äº† JavaScript å’Œ web3.jsï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> abi = <span class="comment">/* abi generated by the compiler */</span></span><br><span class="line"><span class="keyword">var</span> ZombieFeedingContract = web3.eth.contract(abi)</span><br><span class="line"><span class="keyword">var</span> contractAddress = <span class="comment">/* our contract address on Ethereum after deploying */</span></span><br><span class="line"><span class="keyword">var</span> ZombieFeeding = ZombieFeedingContract.at(contractAddress)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡è®¾æˆ‘ä»¬æœ‰æˆ‘ä»¬çš„åƒµå°¸IDå’Œè¦æ”»å‡»çš„çŒ«å’ªID</span></span><br><span class="line"><span class="keyword">let</span> zombieId = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> kittyId = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¦æ‹¿åˆ°çŒ«å’ªçš„DNAï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨å®ƒçš„APIã€‚è¿™äº›æ•°æ®ä¿å­˜åœ¨å®ƒä»¬çš„æœåŠ¡å™¨ä¸Šè€Œä¸æ˜¯åŒºå—é“¾ä¸Šã€‚</span></span><br><span class="line"><span class="comment">// å¦‚æœä¸€åˆ‡éƒ½åœ¨åŒºå—é“¾ä¸Šï¼Œæˆ‘ä»¬å°±ä¸ç”¨æ‹…å¿ƒå®ƒä»¬çš„æœåŠ¡å™¨æŒ‚äº†ï¼Œæˆ–è€…å®ƒä»¬ä¿®æ”¹äº†APIï¼Œ</span></span><br><span class="line"><span class="comment">// æˆ–è€…å› ä¸ºä¸å–œæ¬¢æˆ‘ä»¬çš„åƒµå°¸æ¸¸æˆè€Œå°æ€äº†æˆ‘ä»¬</span></span><br><span class="line"><span class="keyword">let</span> apiUrl = <span class="string">"https://api.cryptokitties.co/kitties/"</span> + kittyId</span><br><span class="line">$.<span class="keyword">get</span>(apiUrl, function(data) &#123;</span><br><span class="line">  <span class="keyword">let</span> imgUrl = data.image_url</span><br><span class="line">  <span class="comment">// ä¸€äº›æ˜¾ç¤ºå›¾ç‰‡çš„ä»£ç </span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“ç”¨æˆ·ç‚¹å‡»ä¸€åªçŒ«å’ªçš„æ—¶å€™:</span></span><br><span class="line">$(<span class="string">".kittyImage"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// è°ƒç”¨æˆ‘ä»¬åˆçº¦çš„ `feedOnKitty` å‡½æ•°</span></span><br><span class="line">  ZombieFeeding.feedOnKitty(zombieId, kittyId)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¾¦å¬æ¥è‡ªæˆ‘ä»¬åˆçº¦çš„æ–°åƒµå°¸äº‹ä»¶å¥½æ¥å¤„ç†</span></span><br><span class="line">ZombieFactory.NewZombie(<span class="function"><span class="keyword">function</span>(<span class="params">error, result</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (error) <span class="keyword">return</span></span><br><span class="line">  <span class="comment">// è¿™ä¸ªå‡½æ•°ç”¨æ¥æ˜¾ç¤ºåƒµå°¸:</span></span><br><span class="line">  generateZombie(result.zombieId, result.name, result.dna)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="å®æˆ˜æ¼”ä¹ -13"><a href="#å®æˆ˜æ¼”ä¹ -13" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>é€‰æ‹©ä¸€åªä½ æƒ³çŒé£Ÿçš„å°çŒ«ã€‚ä½ è‡ªå®¶åƒµå°¸çš„ DNA ä¼šå’Œå°çŒ«çš„ DNA ç»“åˆï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„å°çŒ«åƒµå°¸ï¼ŒåŠ å…¥ä½ çš„å†›å›¢ï¼</p>
<p>çœ‹åˆ°æ–°åƒµå°¸ä¸Šé‚£å¯çˆ±çš„çŒ«å’ªè…¿äº†ä¹ˆï¼Ÿè¿™æ˜¯æ–°åƒµå°¸æœ€åDNAä¸­æœ€åä¸¤ä½æ•°å­— <code>99</code> çš„åŠŸåŠ³ï¼</p>
<p>ä½ æƒ³è¦çš„è¯éšæ—¶å¯ä»¥é‡æ–°å¼€å§‹ã€‚æ•è·äº†ä¸€åªçŒ«å’ªåƒµå°¸ï¼Œä½ ä¸€å®šå¾ˆé«˜å…´å§ï¼ï¼ˆä¸è¿‡ä½ åªèƒ½æŒæœ‰ä¸€åªï¼‰ï¼Œç»§ç»­å‰è¿›åˆ°ä¸‹ä¸€ç« ï¼Œå®Œæˆç¬¬äºŒè¯¾å§ï¼</p>
<p><img src="https://i.loli.net/2020/06/27/vQ8uDOcFknPNsmy.png" alt="image-20200627105007659"></p>
<h2 id="èåˆ"><a href="#èåˆ" class="headerlink" title="èåˆ"></a>èåˆ</h2><p><img src="https://i.loli.net/2020/06/27/I9YxPTeVDuKcfmr.png" alt="image-20200627105033754"></p>
<h1 id="ç¬¬äºŒè¯¾æ‰“å¡"><a href="#ç¬¬äºŒè¯¾æ‰“å¡" class="headerlink" title="ç¬¬äºŒè¯¾æ‰“å¡"></a>ç¬¬äºŒè¯¾æ‰“å¡</h1><p><img src="https://i.loli.net/2020/06/27/9w4d6EMHsi2Sgo3.png" alt="image-20200627105401927"></p>
<p><a href="https://share.cryptozombies.io/zh/lesson/2/share/truffle_solidity_web3.js_javaScript" target="_blank" rel="noopener">æˆ‘çš„åƒµå°¸å¤§å†›2</a></p>

    </div>

    
    
    
      
        <div class="reward-container">
  <div>æ‚¨çš„æ”¯æŒæ˜¯æˆ‘ç»§ç»­åˆ›ä½œçš„åŠ¨åŠ›</div>
  <button disable="enable" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    æ‰“èµ
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.png" alt="ææ¾æŸ å¾®ä¿¡æ”¯ä»˜">
        <p>å¾®ä¿¡æ”¯ä»˜</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay.png" alt="ææ¾æŸ æ”¯ä»˜å®">
        <p>æ”¯ä»˜å®</p>
      </div>

  </div>
</div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>æœ¬æ–‡ä½œè€…ï¼š </strong>ææ¾æŸ
  </li>
  <li class="post-copyright-link">
    <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong>
    <a href="http://lisongbai.top/2020/06/27/%E5%83%B5%E5%B0%B8%E6%94%BB%E5%87%BB%E4%BA%BA%E7%B1%BB/" title="åƒµå°¸æ”»å‡»äººç±»">http://lisongbai.top/2020/06/27/%E5%83%B5%E5%B0%B8%E6%94%BB%E5%87%BB%E4%BA%BA%E7%B1%BB/</a>
  </li>
  <li class="post-copyright-license">
    <strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/null" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/solidity/" rel="tag"># solidity</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
                <a href="/2020/06/27/%E6%90%AD%E5%BB%BA%E5%83%B5%E5%B0%B8%E5%B7%A5%E5%8E%82/" rel="next" title="æ­å»ºåƒµå°¸å·¥å‚">
                  <i class="fa fa-chevron-left"></i> æ­å»ºåƒµå°¸å·¥å‚
                </a>
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
                <a href="/2020/06/27/%E5%83%B5%E5%B0%B8%E4%BD%9C%E6%88%98%E7%B3%BB%E7%BB%9F/" rel="prev" title="åƒµå°¸ä½œæˆ˜ç³»ç»Ÿ">
                  åƒµå°¸ä½œæˆ˜ç³»ç»Ÿ <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
      <div class="tabs tabs-comment">
        <ul class="nav-tabs">
            <li class="tab"><a href="#comment-disqus">disqus</a></li>
            <li class="tab"><a href="#comment-livere">livere</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane disqus" id="comment-disqus">
              
  <div class="comments" id="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  
            </div>
            <div class="tab-pane livere" id="comment-livere">
              
  <div class="comments" id="comments">
    <div id="lv-container" data-id="city" data-uid="MTAyMC80NzY2MC8yNDE1OA=="></div>
  </div>
  
            </div>
        </div>
      </div>
      <script>
        window.addEventListener('tabs:register', () => {
          let activeClass = '';
            activeClass = localStorage.getItem('comments_active') || activeClass;
          if (activeClass) {
            let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
            if (activeTab) {
              activeTab.click();
            }
          }
        });
        window.addEventListener('tabs:click', event => {
          let commentClass = event.target.classList[1];
          localStorage.setItem('comments_active', commentClass);
        });
      </script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#ç¬¬äºŒè¯¾æ¦‚è§ˆ"><span class="nav-number">1.</span> <span class="nav-text">ç¬¬äºŒè¯¾æ¦‚è§ˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#åƒµå°¸çŒé£Ÿ"><span class="nav-number">1.1.</span> <span class="nav-text">åƒµå°¸çŒé£Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®æˆ˜æ¼”ä¹ "><span class="nav-number">1.2.</span> <span class="nav-text">å®æˆ˜æ¼”ä¹ </span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#æ˜ å°„ï¼ˆMappingï¼‰å’Œåœ°å€ï¼ˆAddressï¼‰"><span class="nav-number">2.</span> <span class="nav-text">æ˜ å°„ï¼ˆMappingï¼‰å’Œåœ°å€ï¼ˆAddressï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Addresses-ï¼ˆåœ°å€ï¼‰"><span class="nav-number">2.1.</span> <span class="nav-text">Addresses ï¼ˆåœ°å€ï¼‰</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Mappingï¼ˆæ˜ å°„ï¼‰"><span class="nav-number">2.2.</span> <span class="nav-text">Mappingï¼ˆæ˜ å°„ï¼‰</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®æˆ˜æ¼”ä¹ -1"><span class="nav-number">2.3.</span> <span class="nav-text">å®æˆ˜æ¼”ä¹ </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åˆçº¦å®Œå–„"><span class="nav-number">2.4.</span> <span class="nav-text">åˆçº¦å®Œå–„</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Msg-sender"><span class="nav-number">3.</span> <span class="nav-text">Msg.sender</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#msg-sender"><span class="nav-number">3.1.</span> <span class="nav-text">msg.sender</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®æˆ˜æ¼”ä¹ -2"><span class="nav-number">3.2.</span> <span class="nav-text">å®æˆ˜æ¼”ä¹ </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åˆçº¦å®Œå–„-1"><span class="nav-number">3.3.</span> <span class="nav-text">åˆçº¦å®Œå–„</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Require"><span class="nav-number">4.</span> <span class="nav-text">Require</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#å®æˆ˜æ¼”ä¹ -3"><span class="nav-number">4.1.</span> <span class="nav-text">å®æˆ˜æ¼”ä¹ </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åˆçº¦å®Œå–„-2"><span class="nav-number">4.2.</span> <span class="nav-text">åˆçº¦å®Œå–„</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ç»§æ‰¿ï¼ˆInheritanceï¼‰"><span class="nav-number">5.</span> <span class="nav-text">ç»§æ‰¿ï¼ˆInheritanceï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#å®æˆ˜æ¼”ä¹ -4"><span class="nav-number">5.1.</span> <span class="nav-text">å®æˆ˜æ¼”ä¹ </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åˆçº¦å®Œå–„-3"><span class="nav-number">5.2.</span> <span class="nav-text">åˆçº¦å®Œå–„</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å¼•å…¥ï¼ˆImportï¼‰"><span class="nav-number">6.</span> <span class="nav-text">å¼•å…¥ï¼ˆImportï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#å®æˆ˜æ¼”ä¹ -5"><span class="nav-number">6.1.</span> <span class="nav-text">å®æˆ˜æ¼”ä¹ </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åˆçº¦å®Œå–„-4"><span class="nav-number">6.2.</span> <span class="nav-text">åˆçº¦å®Œå–„</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Storageä¸Memory"><span class="nav-number">7.</span> <span class="nav-text">Storageä¸Memory</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#å®æˆ˜æ¼”ä¹ -6"><span class="nav-number">7.1.</span> <span class="nav-text">å®æˆ˜æ¼”ä¹ </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åˆçº¦å®Œå–„-5"><span class="nav-number">7.2.</span> <span class="nav-text">åˆçº¦å®Œå–„</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#åƒµå°¸çš„DNA"><span class="nav-number">8.</span> <span class="nav-text">åƒµå°¸çš„DNA</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#å®æˆ˜æ¼”ä¹ -7"><span class="nav-number">8.1.</span> <span class="nav-text">å®æˆ˜æ¼”ä¹ </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åˆçº¦å®Œå–„-6"><span class="nav-number">8.2.</span> <span class="nav-text">åˆçº¦å®Œå–„</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#æ›´å¤šå…³äºå‡½æ•°å¯è§æ€§"><span class="nav-number">9.</span> <span class="nav-text">æ›´å¤šå…³äºå‡½æ•°å¯è§æ€§</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#internal-å’Œ-external"><span class="nav-number">9.1.</span> <span class="nav-text">internal å’Œ external</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®æˆ˜æ¼”ä¹ -8"><span class="nav-number">9.2.</span> <span class="nav-text">å®æˆ˜æ¼”ä¹ </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åˆçº¦å®Œå–„-7"><span class="nav-number">9.3.</span> <span class="nav-text">åˆçº¦å®Œå–„</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#åƒµå°¸åƒä»€ä¹ˆ"><span class="nav-number">10.</span> <span class="nav-text">åƒµå°¸åƒä»€ä¹ˆ?</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ä¸å…¶ä»–åˆçº¦çš„äº¤äº’"><span class="nav-number">10.1.</span> <span class="nav-text">ä¸å…¶ä»–åˆçº¦çš„äº¤äº’</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®æˆ˜æ¼”ä¹ -9"><span class="nav-number">10.2.</span> <span class="nav-text">å®æˆ˜æ¼”ä¹ </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åˆçº¦å®Œå–„-8"><span class="nav-number">10.3.</span> <span class="nav-text">åˆçº¦å®Œå–„</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ä½¿ç”¨æ¥å£"><span class="nav-number">11.</span> <span class="nav-text">ä½¿ç”¨æ¥å£</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#å®æˆ˜æ¼”ä¹ -10"><span class="nav-number">11.1.</span> <span class="nav-text">å®æˆ˜æ¼”ä¹ </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åˆçº¦å®Œå–„-9"><span class="nav-number">11.2.</span> <span class="nav-text">åˆçº¦å®Œå–„</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å¤„ç†å¤šè¿”å›å€¼"><span class="nav-number">12.</span> <span class="nav-text">å¤„ç†å¤šè¿”å›å€¼</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#å®æˆ˜æ¼”ä¹ -11"><span class="nav-number">12.1.</span> <span class="nav-text">å®æˆ˜æ¼”ä¹ </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åˆçº¦å®Œå–„-10"><span class="nav-number">12.2.</span> <span class="nav-text">åˆçº¦å®Œå–„</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å¥–åŠ±-Kitty-åŸºå› "><span class="nav-number">13.</span> <span class="nav-text">å¥–åŠ±: Kitty åŸºå› </span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#if-è¯­å¥"><span class="nav-number">13.1.</span> <span class="nav-text">if è¯­å¥</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®æˆ˜æ¼”ä¹ -12"><span class="nav-number">13.2.</span> <span class="nav-text">å®æˆ˜æ¼”ä¹ </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åˆçº¦å®Œå–„-11"><span class="nav-number">13.3.</span> <span class="nav-text">åˆçº¦å®Œå–„</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#æ”¾åœ¨ä¸€èµ·"><span class="nav-number">14.</span> <span class="nav-text">æ”¾åœ¨ä¸€èµ·</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#JavaScript-å®ç°"><span class="nav-number">14.1.</span> <span class="nav-text">JavaScript å®ç°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®æˆ˜æ¼”ä¹ -13"><span class="nav-number">14.2.</span> <span class="nav-text">å®æˆ˜æ¼”ä¹ </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#èåˆ"><span class="nav-number">14.3.</span> <span class="nav-text">èåˆ</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ç¬¬äºŒè¯¾æ‰“å¡"><span class="nav-number">15.</span> <span class="nav-text">ç¬¬äºŒè¯¾æ‰“å¡</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="site-author-image" itemprop="image" alt="ææ¾æŸ"
    src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">ææ¾æŸ</p>
  <div class="site-description" itemprop="description">è®°å½•å­¦ä¹ çš„æŠ€èƒ½å’Œé‡åˆ°çš„é—®é¢˜</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">70</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">53</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/yym08090809" title="GitHub &amp;rarr; https:&#x2F;&#x2F;github.com&#x2F;yym08090809" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:songbai0112@163.com" title="E-Mail &amp;rarr; mailto:songbai0112@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/null" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 2019 â€“ 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ææ¾æŸ</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨ v4.0.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">ä¸»é¢˜ â€“ <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.4.2
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>






  <script>
  function leancloudSelector(url) {
    return document.getElementById(url).querySelector('.leancloud-visitors-count');
  }
  if (CONFIG.page.isPost) {
    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = visitors.getAttribute('id').trim();
      var title = visitors.getAttribute('data-flag-title').trim();

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .then(response => response.json())
              .then(() => {
                leancloudSelector(url).innerText = counter.time + 1;
              })
              .catch(error => {
                console.log('Failed to save visitor count', error);
              })
          } else {
              leancloudSelector(url).innerText = 'Counter not initialized! More info at console err msg.';
              console.error('ATTENTION! LeanCloud counter has security bug, see how to solve it here: https://github.com/theme-next/hexo-leancloud-counter-security. \n However, you can still use LeanCloud without security, by setting `security` option to `false`.');
            
          }
        })
        .catch(error => {
          console.log('LeanCloud Counter Error', error);
        });
    }
  } else {
    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return element.getAttribute('id').trim();
      });

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url: { '$in': entries } })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length === 0) {
            document.querySelectorAll('.leancloud_visitors .leancloud-visitors-count').forEach(element => {
              element.innerText = 0;
            });
            return;
          }
          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.url;
            var time = item.time;
            leancloudSelector(url).innerText = time;
          }
          for (var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = leancloudSelector(url);
            if (element.innerText == '') {
              element.innerText = 0;
            }
          }
        })
        .catch(error => {
          console.log('LeanCloud Counter Error', error);
        });
    }
  }

  fetch('https://app-router.leancloud.cn/2/route?appId=')
    .then(response => response.json())
    .then(({ api_server }) => {
      var Counter = (method, url, data) => {
        return fetch(`https://${api_server}/1.1${url}`, {
          method: method,
          headers: {
            'X-LC-Id': '',
            'X-LC-Key': '',
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        const localhost = /http:\/\/(localhost|127.0.0.1|0.0.0.0)/;
        if (localhost.test(document.URL)) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    });
  </script>






        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script>



  




  <script src="/js/local-search.js"></script>













  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://visitor.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  function loadComments() {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: {page: {
            url: "http://lisongbai.top/2020/06/27/%E5%83%B5%E5%B0%B8%E6%94%BB%E5%87%BB%E4%BA%BA%E7%B1%BB/",
            identifier: "2020/06/27/åƒµå°¸æ”»å‡»äººç±»/",
            title: "åƒµå°¸æ”»å‡»äººç±»"
          }
        }
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://visitor.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  }
    window.addEventListener('load', loadComments, false);
</script>

<script>
  window.livereOptions = {
    refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
</script>

 
</body>
</html>
