<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ERC721æ ‡å‡†å’ŒåŠ å¯†æ”¶è—å“</title>
      <link href="/2020/06/29/ERC721%E6%A0%87%E5%87%86%E5%92%8C%E5%8A%A0%E5%AF%86%E6%94%B6%E8%97%8F%E5%93%81/"/>
      <url>/2020/06/29/ERC721%E6%A0%87%E5%87%86%E5%92%8C%E5%8A%A0%E5%AF%86%E6%94%B6%E8%97%8F%E5%93%81/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»¥å¤ªåŠä¸Šçš„ä»£å¸"><a href="#ä»¥å¤ªåŠä¸Šçš„ä»£å¸" class="headerlink" title="ä»¥å¤ªåŠä¸Šçš„ä»£å¸"></a>ä»¥å¤ªåŠä¸Šçš„ä»£å¸</h1><p>è®©æˆ‘ä»¬æ¥èŠèŠ <strong><em>ä»£å¸</em></strong>.</p><p>å¦‚æœä½ å¯¹ä»¥å¤ªåŠçš„ä¸–ç•Œæœ‰ä¸€äº›äº†è§£ï¼Œä½ å¾ˆå¯èƒ½å¬è¿‡äººä»¬èŠåˆ°ä»£å¸â€”â€”å°¤å…¶æ˜¯ <strong><em>ERC20 ä»£å¸\</em></strong>.</p><p>ä¸€ä¸ª <strong><em>ä»£å¸</em></strong> åœ¨ä»¥å¤ªåŠåŸºæœ¬ä¸Šå°±æ˜¯ä¸€ä¸ªéµå¾ªä¸€äº›å…±åŒè§„åˆ™çš„æ™ºèƒ½åˆçº¦â€”â€”å³å®ƒå®ç°äº†æ‰€æœ‰å…¶ä»–ä»£å¸åˆçº¦å…±äº«çš„ä¸€ç»„æ ‡å‡†å‡½æ•°ï¼Œä¾‹å¦‚ <code>transfer(address _to, uint256 _value)</code> å’Œ <code>balanceOf(address _owner)</code>.</p><a id="more"></a><p>åœ¨æ™ºèƒ½åˆçº¦å†…éƒ¨ï¼Œé€šå¸¸æœ‰ä¸€ä¸ªæ˜ å°„ï¼Œ <code>mapping(address =&gt; uint256) balances</code>ï¼Œç”¨äºè¿½è¸ªæ¯ä¸ªåœ°å€è¿˜æœ‰å¤šå°‘ä½™é¢ã€‚</p><p>æ‰€ä»¥åŸºæœ¬ä¸Šä¸€ä¸ªä»£å¸åªæ˜¯ä¸€ä¸ªè¿½è¸ªè°æ‹¥æœ‰å¤šå°‘è¯¥ä»£å¸çš„åˆçº¦ï¼Œå’Œä¸€äº›å¯ä»¥è®©é‚£äº›ç”¨æˆ·å°†ä»–ä»¬çš„ä»£å¸è½¬ç§»åˆ°å…¶ä»–åœ°å€çš„å‡½æ•°ã€‚</p><h2 id="å®ƒä¸ºä»€ä¹ˆé‡è¦å‘¢ï¼Ÿ"><a href="#å®ƒä¸ºä»€ä¹ˆé‡è¦å‘¢ï¼Ÿ" class="headerlink" title="å®ƒä¸ºä»€ä¹ˆé‡è¦å‘¢ï¼Ÿ"></a>å®ƒä¸ºä»€ä¹ˆé‡è¦å‘¢ï¼Ÿ</h2><p>ç”±äºæ‰€æœ‰ ERC20 ä»£å¸å…±äº«å…·æœ‰ç›¸åŒåç§°çš„åŒä¸€ç»„å‡½æ•°ï¼Œå®ƒä»¬éƒ½å¯ä»¥ä»¥ç›¸åŒçš„æ–¹å¼è¿›è¡Œäº¤äº’ã€‚</p><p>è¿™æ„å‘³ç€å¦‚æœä½ æ„å»ºçš„åº”ç”¨ç¨‹åºèƒ½å¤Ÿä¸ä¸€ä¸ª ERC20 ä»£å¸è¿›è¡Œäº¤äº’ï¼Œé‚£ä¹ˆå®ƒå°±ä¹Ÿèƒ½å¤Ÿä¸ä»»ä½• ERC20 ä»£å¸è¿›è¡Œäº¤äº’ã€‚ è¿™æ ·ä¸€æ¥ï¼Œå°†æ¥ä½ å°±å¯ä»¥è½»æ¾åœ°å°†æ›´å¤šçš„ä»£å¸æ·»åŠ åˆ°ä½ çš„åº”ç”¨ä¸­ï¼Œè€Œæ— éœ€è¿›è¡Œè‡ªå®šä¹‰ç¼–ç ã€‚ ä½ å¯ä»¥ç®€å•åœ°æ’å…¥æ–°çš„ä»£å¸åˆçº¦åœ°å€ï¼Œç„¶åå“—å•¦ï¼Œä½ çš„åº”ç”¨ç¨‹åºæœ‰å¦ä¸€ä¸ªå®ƒå¯ä»¥ä½¿ç”¨çš„ä»£å¸äº†ã€‚</p><p>å…¶ä¸­ä¸€ä¸ªä¾‹å­å°±æ˜¯äº¤æ˜“æ‰€ã€‚ å½“äº¤æ˜“æ‰€æ·»åŠ ä¸€ä¸ªæ–°çš„ ERC20 ä»£å¸æ—¶ï¼Œå®é™…ä¸Šå®ƒåªéœ€è¦æ·»åŠ ä¸ä¹‹å¯¹è¯çš„å¦ä¸€ä¸ªæ™ºèƒ½åˆçº¦ã€‚ ç”¨æˆ·å¯ä»¥è®©é‚£ä¸ªåˆçº¦å°†ä»£å¸å‘é€åˆ°äº¤æ˜“æ‰€çš„é’±åŒ…åœ°å€ï¼Œç„¶åäº¤æ˜“æ‰€å¯ä»¥è®©åˆçº¦åœ¨ç”¨æˆ·è¦æ±‚å–æ¬¾æ—¶å°†ä»£å¸å‘é€å›ç»™ä»–ä»¬ã€‚</p><p>äº¤æ˜“æ‰€åªéœ€è¦å®ç°è¿™ç§è½¬ç§»é€»è¾‘ä¸€æ¬¡ï¼Œç„¶åå½“å®ƒæƒ³è¦æ·»åŠ ä¸€ä¸ªæ–°çš„ ERC20 ä»£å¸æ—¶ï¼Œåªéœ€å°†æ–°çš„åˆçº¦åœ°å€æ·»åŠ åˆ°å®ƒçš„æ•°æ®åº“å³å¯ã€‚</p><h2 id="å…¶ä»–ä»£å¸æ ‡å‡†"><a href="#å…¶ä»–ä»£å¸æ ‡å‡†" class="headerlink" title="å…¶ä»–ä»£å¸æ ‡å‡†"></a>å…¶ä»–ä»£å¸æ ‡å‡†</h2><p>å¯¹äºåƒè´§å¸ä¸€æ ·çš„ä»£å¸æ¥è¯´ï¼ŒERC20 ä»£å¸éå¸¸é…·ã€‚ ä½†æ˜¯è¦åœ¨æˆ‘ä»¬åƒµå°¸æ¸¸æˆä¸­ä»£è¡¨åƒµå°¸å°±å¹¶ä¸æ˜¯ç‰¹åˆ«æœ‰ç”¨ã€‚</p><p>é¦–å…ˆï¼Œåƒµå°¸ä¸åƒè´§å¸å¯ä»¥åˆ†å‰² â€”â€” æˆ‘å¯ä»¥å‘ç»™ä½  0.237 ä»¥å¤ªï¼Œä½†æ˜¯è½¬ç§»ç»™ä½  0.237 çš„åƒµå°¸å¬èµ·æ¥å°±æœ‰äº›æç¬‘ã€‚</p><p>å…¶æ¬¡ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰åƒµå°¸éƒ½æ˜¯å¹³ç­‰çš„ã€‚ ä½ çš„2çº§åƒµå°¸â€<strong>Steve</strong>â€œå®Œå…¨ä¸èƒ½ç­‰åŒäºæˆ‘732çº§çš„åƒµå°¸â€<strong>H4XF13LD MORRIS ğŸ’¯ğŸ’¯ğŸ˜ğŸ’¯ğŸ’¯</strong>â€œã€‚ï¼ˆä½ å·®å¾—è¿œå‘¢ï¼Œ<em>Steve</em>ï¼‰ã€‚</p><p>æœ‰å¦ä¸€ä¸ªä»£å¸æ ‡å‡†æ›´é€‚åˆå¦‚ CryptoZombies è¿™æ ·çš„åŠ å¯†æ”¶è—å“â€”â€”å®ƒä»¬è¢«ç§°ä¸º<strong><em>ERC721 ä»£å¸.\</em></strong></p><p><strong><em>ERC721 ä»£å¸\</em></strong>æ˜¯<strong>ä¸</strong>èƒ½äº’æ¢çš„ï¼Œå› ä¸ºæ¯ä¸ªä»£å¸éƒ½è¢«è®¤ä¸ºæ˜¯å”¯ä¸€ä¸”ä¸å¯åˆ†å‰²çš„ã€‚ ä½ åªèƒ½ä»¥æ•´ä¸ªå•ä½äº¤æ˜“å®ƒä»¬ï¼Œå¹¶ä¸”æ¯ä¸ªå•ä½éƒ½æœ‰å”¯ä¸€çš„ IDã€‚ è¿™äº›ç‰¹æ€§æ­£å¥½è®©æˆ‘ä»¬çš„åƒµå°¸å¯ä»¥ç”¨æ¥äº¤æ˜“ã€‚</p><blockquote><p>è¯·æ³¨æ„ï¼Œä½¿ç”¨åƒ ERC721 è¿™æ ·çš„æ ‡å‡†çš„ä¼˜åŠ¿å°±æ˜¯ï¼Œæˆ‘ä»¬ä¸å¿…åœ¨æˆ‘ä»¬çš„åˆçº¦ä¸­å®ç°æ‹å–æˆ–æ‰˜ç®¡é€»è¾‘ï¼Œè¿™å†³å®šäº†ç©å®¶èƒ½å¤Ÿå¦‚ä½•äº¤æ˜“ï¼å‡ºå”®æˆ‘ä»¬çš„åƒµå°¸ã€‚ å¦‚æœæˆ‘ä»¬ç¬¦åˆè§„èŒƒï¼Œå…¶ä»–äººå¯ä»¥ä¸ºåŠ å¯†å¯äº¤æ˜“çš„ ERC721 èµ„äº§æ­å»ºä¸€ä¸ªäº¤æ˜“æ‰€å¹³å°ï¼Œæˆ‘ä»¬çš„ ERC721 åƒµå°¸å°†å¯ä»¥åœ¨è¯¥å¹³å°ä¸Šä½¿ç”¨ã€‚ æ‰€ä»¥ä½¿ç”¨ä»£å¸æ ‡å‡†ç›¸è¾ƒäºä½¿ç”¨ä½ è‡ªå·±çš„äº¤æ˜“é€»è¾‘æœ‰æ˜æ˜¾çš„å¥½å¤„ã€‚</p></blockquote><h2 id="å®æˆ˜æ¼”ä¹ "><a href="#å®æˆ˜æ¼”ä¹ " class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€ç« æ·±å…¥è®¨è®ºERC721çš„å®ç°ã€‚ ä½†é¦–å…ˆï¼Œè®©æˆ‘ä»¬ä¸ºæœ¬è¯¾è®¾ç½®æˆ‘ä»¬çš„æ–‡ä»¶ç»“æ„ã€‚</p><p>æˆ‘ä»¬å°†æŠŠæ‰€æœ‰ERC721é€»è¾‘å­˜å‚¨åœ¨ä¸€ä¸ªå«<code>ZombieOwnership</code>çš„åˆçº¦ä¸­ã€‚</p><ol><li>åœ¨æ–‡ä»¶é¡¶éƒ¨å£°æ˜æˆ‘ä»¬<code>pragma</code>çš„ç‰ˆæœ¬ï¼ˆæ ¼å¼å‚è€ƒä¹‹å‰çš„è¯¾ç¨‹ï¼‰ã€‚</li><li>å°† <code>zombieattack.sol</code> <code>import</code> è¿›æ¥ã€‚</li><li>å£°æ˜ä¸€ä¸ªç»§æ‰¿ <code>ZombieAttack</code> çš„æ–°åˆçº¦ï¼Œ å‘½åä¸º<code>ZombieOwnership</code>ã€‚åˆçº¦çš„å…¶ä»–éƒ¨åˆ†å…ˆç•™ç©ºã€‚</li></ol><h2 id="åˆçº¦åˆ›å»º"><a href="#åˆçº¦åˆ›å»º" class="headerlink" title="åˆçº¦åˆ›å»º"></a>åˆçº¦åˆ›å»º</h2><p>ZombieOwnership.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombieattack.sol"</span>;</span><br><span class="line">contract ZombieOwnership is ZombieAttack &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ERC721-æ ‡å‡†-å¤šé‡ç»§æ‰¿"><a href="#ERC721-æ ‡å‡†-å¤šé‡ç»§æ‰¿" class="headerlink" title="ERC721 æ ‡å‡†, å¤šé‡ç»§æ‰¿"></a>ERC721 æ ‡å‡†, å¤šé‡ç»§æ‰¿</h1><p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€çœ‹ ERC721 æ ‡å‡†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">contract ERC721 &#123;</span><br><span class="line">  event Transfer(address indexed _from, address indexed _to, uint256 _tokenId);</span><br><span class="line">  event Approval(address indexed _owner, address indexed _approved, uint256 _tokenId);</span><br><span class="line"></span><br><span class="line">  function balanceOf(address _owner) public view returns (uint256 _balance);</span><br><span class="line">  function ownerOf(uint256 _tokenId) public view returns (address _owner);</span><br><span class="line">  function transfer(address _to, uint256 _tokenId) public;</span><br><span class="line">  function approve(address _to, uint256 _tokenId) public;</span><br><span class="line">  function takeOwnership(uint256 _tokenId) public;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯æˆ‘ä»¬éœ€è¦å®ç°çš„æ–¹æ³•åˆ—è¡¨ï¼Œæˆ‘ä»¬å°†åœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­é€ä¸ªå­¦ä¹ ã€‚</p><p>è™½ç„¶çœ‹èµ·æ¥å¾ˆå¤šï¼Œä½†ä¸è¦è¢«å“åˆ°äº†ï¼æˆ‘ä»¬åœ¨è¿™é‡Œå°±æ˜¯å‡†å¤‡å¸¦ç€ä½ ä¸€æ­¥ä¸€æ­¥äº†è§£å®ƒä»¬çš„ã€‚</p><blockquote><p>æ³¨æ„ï¼š ERC721ç›®å‰æ˜¯ä¸€ä¸ª <em>è‰ç¨¿</em>ï¼Œè¿˜æ²¡æœ‰æ­£å¼å•†å®šçš„å®ç°ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ OpenZeppelin åº“ä¸­çš„å½“å‰ç‰ˆæœ¬ï¼Œä½†åœ¨æœªæ¥æ­£å¼å‘å¸ƒä¹‹å‰å®ƒå¯èƒ½ä¼šæœ‰æ›´æ”¹ã€‚ æ‰€ä»¥æŠŠè¿™ <strong>ä¸€ä¸ª</strong> å¯èƒ½çš„å®ç°å½“ä½œè€ƒè™‘ï¼Œä½†ä¸è¦æŠŠå®ƒä½œä¸º ERC721 ä»£å¸çš„å®˜æ–¹æ ‡å‡†ã€‚</p></blockquote><h2 id="å®ç°ä¸€ä¸ªä»£å¸åˆçº¦"><a href="#å®ç°ä¸€ä¸ªä»£å¸åˆçº¦" class="headerlink" title="å®ç°ä¸€ä¸ªä»£å¸åˆçº¦"></a>å®ç°ä¸€ä¸ªä»£å¸åˆçº¦</h2><p>åœ¨å®ç°ä¸€ä¸ªä»£å¸åˆçº¦çš„æ—¶å€™ï¼Œæˆ‘ä»¬é¦–å…ˆè¦åšçš„æ˜¯å°†æ¥å£å¤åˆ¶åˆ°å®ƒè‡ªå·±çš„ Solidity æ–‡ä»¶å¹¶å¯¼å…¥å®ƒï¼Œ<code>import &quot;./erc721.sol&quot;;</code>ã€‚ æ¥ç€ï¼Œè®©æˆ‘ä»¬çš„åˆçº¦ç»§æ‰¿å®ƒï¼Œç„¶åæˆ‘ä»¬ç”¨ä¸€ä¸ªå‡½æ•°å®šä¹‰æ¥é‡å†™æ¯ä¸ªæ–¹æ³•ã€‚</p><p>ä½†ç­‰ä¸€ä¸‹â€”â€” <code>ZombieOwnership</code>å·²ç»ç»§æ‰¿è‡ª <code>ZombieAttack</code>äº† â€”â€” å®ƒå¦‚ä½•èƒ½å¤Ÿä¹Ÿç»§æ‰¿äº <code>ERC721</code>å‘¢ï¼Ÿ</p><p>å¹¸è¿çš„æ˜¯åœ¨Solidityï¼Œä½ çš„åˆçº¦å¯ä»¥ç»§æ‰¿è‡ªå¤šä¸ªåˆçº¦ï¼Œå‚è€ƒå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">contract SatoshiNakamoto is NickSzabo, HalFinney &#123;</span><br><span class="line">  // å•§å•§å•§ï¼Œå®‡å®™çš„å¥¥ç§˜æ³„éœ²äº†</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­£å¦‚ä½ æ‰€è§ï¼Œå½“ä½¿ç”¨å¤šé‡ç»§æ‰¿çš„æ—¶å€™ï¼Œä½ åªéœ€è¦ç”¨é€—å· <code>,</code> æ¥éš”å¼€å‡ ä¸ªä½ æƒ³è¦ç»§æ‰¿çš„åˆçº¦ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çš„åˆçº¦ç»§æ‰¿è‡ª <code>NickSzabo</code> å’Œ <code>HalFinney</code>ã€‚</p><p>æ¥è¯•è¯•å§ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -1"><a href="#å®æˆ˜æ¼”ä¹ -1" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æˆ‘ä»¬å·²ç»åœ¨ä¸Šé¢ä¸ºä½ åˆ›å»ºäº†å¸¦ç€æ¥å£çš„ <code>erc721.sol</code> ã€‚</p><ol><li>å°† <code>erc721.sol</code> å¯¼å…¥åˆ° <code>zombieownership.sol</code></li><li>å£°æ˜ <code>ZombieOwnership</code> ç»§æ‰¿è‡ª <code>ZombieAttack</code> å’Œ <code>ERC721</code></li></ol><h2 id="åˆçº¦å®Œå–„"><a href="#åˆçº¦å®Œå–„" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>ZombieOwnership.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombieattack.sol"</span>;</span><br><span class="line"><span class="comment">// åœ¨è¿™é‡Œå¼•å…¥æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./erc721.sol"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨è¿™é‡Œå£°æ˜ ERC721 çš„ç»§æ‰¿</span></span><br><span class="line">contract ZombieOwnership is ZombieAttack, ERC721 &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="balanceOf-å’Œ-ownerOf"><a href="#balanceOf-å’Œ-ownerOf" class="headerlink" title="balanceOf å’Œ ownerOf"></a>balanceOf å’Œ ownerOf</h1><p>å¤ªæ£’äº†ï¼Œæˆ‘ä»¬æ¥æ·±å…¥è®¨è®ºä¸€ä¸‹ ERC721 çš„å®ç°ã€‚</p><p>æˆ‘ä»¬å·²ç»æŠŠæ‰€æœ‰ä½ éœ€è¦åœ¨æœ¬è¯¾ä¸­å®ç°çš„å‡½æ•°çš„ç©ºå£³å¤åˆ¶å¥½äº†ã€‚</p><p>åœ¨æœ¬ç« èŠ‚ï¼Œæˆ‘ä»¬å°†å®ç°å¤´ä¸¤ä¸ªæ–¹æ³•ï¼š <code>balanceOf</code> å’Œ <code>ownerOf</code>ã€‚</p><h2 id="balanceOf"><a href="#balanceOf" class="headerlink" title="balanceOf"></a><code>balanceOf</code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function balanceOf(address _owner) public view returns (uint256 _balance);</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‡½æ•°åªéœ€è¦ä¸€ä¸ªä¼ å…¥ <code>address</code> å‚æ•°ï¼Œç„¶åè¿”å›è¿™ä¸ª <code>address</code> æ‹¥æœ‰å¤šå°‘ä»£å¸ã€‚</p><p>åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çš„â€œä»£å¸â€æ˜¯åƒµå°¸ã€‚ä½ è¿˜è®°å¾—åœ¨æˆ‘ä»¬ DApp çš„å“ªé‡Œå­˜å‚¨äº†ä¸€ä¸ªä¸»äººæ‹¥æœ‰å¤šå°‘åªåƒµå°¸å—ï¼Ÿ</p><h2 id="ownerOf"><a href="#ownerOf" class="headerlink" title="ownerOf"></a><code>ownerOf</code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function ownerOf(uint256 _tokenId) public view returns (address _owner);</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‡½æ•°éœ€è¦ä¼ å…¥ä¸€ä¸ªä»£å¸ ID ä½œä¸ºå‚æ•° (æˆ‘ä»¬çš„æƒ…å†µå°±æ˜¯ä¸€ä¸ªåƒµå°¸ ID)ï¼Œç„¶åè¿”å›è¯¥ä»£å¸æ‹¥æœ‰è€…çš„ <code>address</code>ã€‚</p><p>åŒæ ·çš„ï¼Œå› ä¸ºåœ¨æˆ‘ä»¬çš„ DApp é‡Œå·²ç»æœ‰ä¸€ä¸ª <code>mapping</code> (æ˜ å°„) å­˜å‚¨äº†è¿™ä¸ªä¿¡æ¯ï¼Œæ‰€ä»¥å¯¹æˆ‘ä»¬æ¥è¯´è¿™ä¸ªå®ç°éå¸¸ç›´æ¥æ¸…æ™°ã€‚æˆ‘ä»¬å¯ä»¥åªç”¨ä¸€è¡Œ <code>return</code> è¯­å¥æ¥å®ç°è¿™ä¸ªå‡½æ•°ã€‚</p><blockquote><p>æ³¨æ„ï¼šè¦è®°å¾—ï¼Œ <code>uint256</code> ç­‰åŒäº<code>uint</code>ã€‚æˆ‘ä»¬ä»è¯¾ç¨‹çš„å¼€å§‹ä¸€ç›´åœ¨ä»£ç ä¸­ä½¿ç”¨ <code>uint</code>ï¼Œä½†ä»ç°åœ¨å¼€å§‹æˆ‘ä»¬å°†åœ¨è¿™é‡Œç”¨ <code>uint256</code>ï¼Œå› ä¸ºæˆ‘ä»¬ç›´æ¥ä»è§„èŒƒä¸­å¤åˆ¶ç²˜è´´ã€‚</p></blockquote><h2 id="å®æˆ˜æ¼”ä¹ -2"><a href="#å®æˆ˜æ¼”ä¹ -2" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æˆ‘å°†è®©ä½ æ¥å†³å®šå¦‚ä½•å®ç°è¿™ä¸¤ä¸ªå‡½æ•°ã€‚</p><p>æ¯ä¸ªå‡½æ•°çš„ä»£ç éƒ½åº”è¯¥åªæœ‰1è¡Œ <code>return</code> è¯­å¥ã€‚çœ‹çœ‹æˆ‘ä»¬åœ¨ä¹‹å‰è¯¾ç¨‹ä¸­å†™çš„ä»£ç ï¼Œæƒ³æƒ³æˆ‘ä»¬éƒ½æŠŠè¿™ä¸ªæ•°æ®å­˜å‚¨åœ¨å“ªã€‚å¦‚æœä½ è§‰å¾—æœ‰å›°éš¾ï¼Œä½ å¯ä»¥ç‚¹â€œæˆ‘è¦çœ‹ç­”æ¡ˆâ€çš„æŒ‰é’®æ¥è·å¾—å¸®åŠ©ã€‚</p><ol><li>å®ç° <code>balanceOf</code> æ¥è¿”å› <code>_owner</code> æ‹¥æœ‰çš„åƒµå°¸æ•°é‡ã€‚</li><li>å®ç° <code>ownerOf</code> æ¥è¿”å›æ‹¥æœ‰ ID ä¸º <code>_tokenId</code> åƒµå°¸çš„æ‰€æœ‰è€…çš„åœ°å€ã€‚</li></ol><h2 id="åˆçº¦å®Œå–„-1"><a href="#åˆçº¦å®Œå–„-1" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>ZombieOwnership.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombieattack.sol"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">"./erc721.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieOwnership is ZombieAttack, ERC721 &#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">balanceOf</span>(<span class="params">address _owner</span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint256 _balance</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 1. åœ¨è¿™é‡Œè¿”å› `_owner` æ‹¥æœ‰çš„åƒµå°¸æ•°</span></span><br><span class="line">    <span class="keyword">return</span> ownerZombieCount[_owner];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">ownerOf</span>(<span class="params">uint256 _tokenId</span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">address _owner</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 2. åœ¨è¿™é‡Œè¿”å› `_tokenId` çš„æ‰€æœ‰è€…</span></span><br><span class="line">    <span class="keyword">return</span> zombieToOwner[_tokenId];</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">transfer</span>(<span class="params">address _to, uint256 _tokenId</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">approve</span>(<span class="params">address _to, uint256 _tokenId</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">takeOwnership</span>(<span class="params">uint256 _tokenId</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="é‡æ„"><a href="#é‡æ„" class="headerlink" title="é‡æ„"></a>é‡æ„</h1><p>å˜¿å˜¿ï¼æˆ‘ä»¬åˆšåˆšçš„ä»£ç ä¸­å…¶å®æœ‰ä¸ªé”™è¯¯ï¼Œä»¥è‡³äºå…¶æ ¹æœ¬æ— æ³•é€šè¿‡ç¼–è¯‘ï¼Œä½ å‘ç°äº†æ²¡ï¼Ÿ</p><p>åœ¨å‰ä¸€ä¸ªç« èŠ‚æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå« <code>ownerOf</code> çš„å‡½æ•°ã€‚ä½†å¦‚æœä½ è¿˜è®°å¾—ç¬¬4è¯¾çš„å†…å®¹ï¼Œæˆ‘ä»¬åŒæ ·åœ¨<code>zombiefeeding.sol</code> é‡Œä»¥ <code>ownerOf</code> å‘½ååˆ›å»ºäº†ä¸€ä¸ª <code>modifier</code>ï¼ˆä¿®é¥°ç¬¦ï¼‰ã€‚</p><p>å¦‚æœä½ å°è¯•ç¼–è¯‘è¿™æ®µä»£ç ï¼Œç¼–è¯‘å™¨ä¼šç»™ä½ ä¸€ä¸ªé”™è¯¯è¯´ä½ ä¸èƒ½æœ‰ç›¸åŒåç§°çš„ä¿®é¥°ç¬¦å’Œå‡½æ•°ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬åº”è¯¥æŠŠåœ¨ <code>ZombieOwnership</code> é‡Œçš„å‡½æ•°åç§°æ”¹æˆåˆ«çš„å—ï¼Ÿ</p><p>ä¸ï¼Œæˆ‘ä»¬ä¸èƒ½é‚£æ ·åšï¼ï¼ï¼è¦è®°å¾—ï¼Œæˆ‘ä»¬æ­£åœ¨ç”¨ ERC721 ä»£å¸æ ‡å‡†ï¼Œæ„å‘³ç€å…¶ä»–åˆçº¦å°†æœŸæœ›æˆ‘ä»¬çš„åˆçº¦ä»¥è¿™äº›ç¡®åˆ‡çš„åç§°æ¥å®šä¹‰å‡½æ•°ã€‚è¿™å°±æ˜¯è¿™äº›æ ‡å‡†å®ç”¨çš„åŸå› â€”â€”å¦‚æœå¦ä¸€ä¸ªåˆçº¦çŸ¥é“æˆ‘ä»¬çš„åˆçº¦ç¬¦åˆ ERC721 æ ‡å‡†ï¼Œå®ƒå¯ä»¥ç›´æ¥ä¸æˆ‘ä»¬äº¤äº’ï¼Œè€Œæ— éœ€äº†è§£ä»»ä½•å…³äºæˆ‘ä»¬å†…éƒ¨å¦‚ä½•å®ç°çš„ç»†èŠ‚ã€‚</p><p>æ‰€ä»¥ï¼Œé‚£æ„å‘³ç€æˆ‘ä»¬å°†å¿…é¡»é‡æ„æˆ‘ä»¬ç¬¬4è¯¾ä¸­çš„ä»£ç ï¼Œå°† <code>modifier</code> çš„åç§°æ¢æˆåˆ«çš„ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -3"><a href="#å®æˆ˜æ¼”ä¹ -3" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æˆ‘ä»¬å›åˆ°äº† <code>zombiefeeding.sol</code> ã€‚æˆ‘ä»¬å°†æŠŠ <code>modifier</code> çš„åç§°ä» <code>ownerOf</code> æ”¹æˆ <code>onlyOwnerOf</code>ã€‚</p><ol><li>æŠŠä¿®é¥°ç¬¦å®šä¹‰ä¸­çš„åç§°æ”¹æˆ <code>onlyOwnerOf</code></li><li>å¾€ä¸‹æ»‘åˆ°ä½¿ç”¨æ­¤ä¿®é¥°ç¬¦çš„å‡½æ•° <code>feedAndMultiply</code> ã€‚æˆ‘ä»¬ä¹Ÿéœ€è¦æ”¹è¿™é‡Œçš„åç§°ã€‚</li></ol><blockquote><p>æ³¨æ„ï¼šæˆ‘ä»¬åœ¨ <code>zombiehelper.sol</code> å’Œ <code>zombieattack.sol</code> é‡Œä¹Ÿä½¿ç”¨äº†è¿™ä¸ªä¿®é¥°ç¬¦ï¼Œä½†ä¸ºäº†ä¸åœ¨è¿™èŠ‚è¯¾çš„é‡æ„é‡ŒèŠ±å¤ªå¤šæ—¶é—´ï¼Œæˆ‘ä»¬å·²ç»å°†é‚£äº›æ–‡ä»¶é‡Œçš„ä¿®é¥°ç¬¦åç§°ä¸ºä½ æ”¹å¥½äº†ã€‚</p></blockquote><h2 id="åˆçº¦ä¿®æ”¹"><a href="#åˆçº¦ä¿®æ”¹" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><p>zombiefeeding.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefactory.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract KittyInterface &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getKitty</span>(<span class="params">uint256 _id</span>) <span class="title">external</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    bool isGestating,</span></span></span><br><span class="line"><span class="function"><span class="params">    bool isReady,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 cooldownIndex,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 nextActionAt,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 siringWithId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 birthTime,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 matronId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 sireId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 generation,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 genes</span></span></span><br><span class="line"><span class="function"><span class="params">  </span>);</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">contract</span> <span class="title">ZombieFeeding</span> <span class="title">is</span> <span class="title">ZombieFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  KittyInterface kittyContract;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1. æŠŠä¿®é¥°ç¬¦åç§°æ”¹æˆ `onlyOwnerOf`</span></span><br><span class="line">  <span class="comment">//modifier ownerOf(uint _zombieId) &#123;</span></span><br><span class="line">    modifier onlyOwnerOf(uint _zombieId) &#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    _;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">setKittyContractAddress</span>(<span class="params">address _address</span>) <span class="title">external</span> <span class="title">onlyOwner</span> </span>&#123;</span><br><span class="line">    kittyContract = KittyInterface(_address);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">_triggerCooldown</span>(<span class="params">Zombie storage _zombie</span>) <span class="title">internal</span> </span>&#123;</span><br><span class="line">    _zombie.readyTime = uint32(now + cooldownTime);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">_isReady</span>(<span class="params">Zombie storage _zombie</span>) <span class="title">internal</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">bool</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> (_zombie.readyTime &lt;= now);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. è¿™é‡Œä¹Ÿè¦ä¿®æ”¹ä¿®é¥°ç¬¦çš„åç§°</span></span><br><span class="line">  <span class="comment">//function feedAndMultiply(uint _zombieId, uint _targetDna, string _species) internal ownerOf(_zombieId) &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">feedAndMultiply</span>(<span class="params">uint _zombieId, uint _targetDna, string _species</span>) <span class="title">internal</span>  <span class="title">onlyOwnerOf</span>(<span class="params">_zombieId</span>) </span>&#123;</span><br><span class="line">    Zombie storage myZombie = zombies[_zombieId];</span><br><span class="line">    <span class="built_in">require</span>(_isReady(myZombie));</span><br><span class="line">    _targetDna = _targetDna % dnaModulus;</span><br><span class="line">    uint newDna = (myZombie.dna + _targetDna) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (keccak256(_species) == keccak256(<span class="string">"kitty"</span>)) &#123;</span><br><span class="line">      newDna = newDna - newDna % <span class="number">100</span> + <span class="number">99</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    _createZombie(<span class="string">"NoName"</span>, newDna);</span><br><span class="line">    _triggerCooldown(myZombie);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedOnKitty</span>(<span class="params">uint _zombieId, uint _kittyId</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    uint kittyDna;</span><br><span class="line">    (,,,,,,,,,kittyDna) = kittyContract.getKitty(_kittyId);</span><br><span class="line">    feedAndMultiply(_zombieId, kittyDna, <span class="string">"kitty"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ERC721-è½¬ç§»æ ‡å‡†"><a href="#ERC721-è½¬ç§»æ ‡å‡†" class="headerlink" title="ERC721: è½¬ç§»æ ‡å‡†"></a>ERC721: è½¬ç§»æ ‡å‡†</h1><p>å¥½äº†ï¼Œæˆ‘ä»¬å°†å†²çªä¿®å¤äº†ï¼</p><p>ç°åœ¨æˆ‘ä»¬å°†é€šè¿‡å­¦ä¹ æŠŠæ‰€æœ‰æƒä»ä¸€ä¸ªäººè½¬ç§»ç»™å¦ä¸€ä¸ªäººæ¥ç»§ç»­æˆ‘ä»¬çš„ ERC721 è§„èŒƒçš„å®ç°ã€‚</p><p>æ³¨æ„ ERC721 è§„èŒƒæœ‰ä¸¤ç§ä¸åŒçš„æ–¹æ³•æ¥è½¬ç§»ä»£å¸ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">transfer</span>(<span class="params">address _to, uint256 _tokenId</span>) <span class="title">public</span>;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">function</span> <span class="title">approve</span>(<span class="params">address _to, uint256 _tokenId</span>) <span class="title">public</span>;</span></span><br><span class="line"><span class="function"><span class="title">function</span> <span class="title">takeOwnership</span>(<span class="params">uint256 _tokenId</span>) <span class="title">public</span>;</span></span><br></pre></td></tr></table></figure><ol><li>ç¬¬ä¸€ç§æ–¹æ³•æ˜¯ä»£å¸çš„æ‹¥æœ‰è€…è°ƒç”¨<code>transfer</code> æ–¹æ³•ï¼Œä¼ å…¥ä»–æƒ³è½¬ç§»åˆ°çš„ <code>address</code> å’Œä»–æƒ³è½¬ç§»çš„ä»£å¸çš„ <code>_tokenId</code>ã€‚</li><li>ç¬¬äºŒç§æ–¹æ³•æ˜¯ä»£å¸æ‹¥æœ‰è€…é¦–å…ˆè°ƒç”¨ <code>approve</code>ï¼Œç„¶åä¼ å…¥ä¸ä»¥ä¸Šç›¸åŒçš„å‚æ•°ã€‚æ¥ç€ï¼Œè¯¥åˆçº¦ä¼šå­˜å‚¨è°è¢«å…è®¸æå–ä»£å¸ï¼Œé€šå¸¸å­˜å‚¨åˆ°ä¸€ä¸ª <code>mapping (uint256 =&gt; address)</code> é‡Œã€‚ç„¶åï¼Œå½“æœ‰äººè°ƒç”¨ <code>takeOwnership</code> æ—¶ï¼Œåˆçº¦ä¼šæ£€æŸ¥ <code>msg.sender</code> æ˜¯å¦å¾—åˆ°æ‹¥æœ‰è€…çš„æ‰¹å‡†æ¥æå–ä»£å¸ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å°†ä»£å¸è½¬ç§»ç»™ä»–ã€‚</li></ol><p>ä½ æ³¨æ„åˆ°äº†å—ï¼Œ<code>transfer</code> å’Œ <code>takeOwnership</code> éƒ½å°†åŒ…å«ç›¸åŒçš„è½¬ç§»é€»è¾‘ï¼Œåªæ˜¯ä»¥ç›¸åçš„é¡ºåºã€‚ ï¼ˆä¸€ç§æƒ…å†µæ˜¯ä»£å¸çš„å‘é€è€…è°ƒç”¨å‡½æ•°ï¼›å¦ä¸€ç§æƒ…å†µæ˜¯ä»£å¸çš„æ¥æ”¶è€…è°ƒç”¨å®ƒï¼‰ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬æŠŠè¿™ä¸ªé€»è¾‘æŠ½è±¡æˆå®ƒè‡ªå·±çš„ç§æœ‰å‡½æ•° <code>_transfer</code>ï¼Œç„¶åç”±è¿™ä¸¤ä¸ªå‡½æ•°æ¥è°ƒç”¨å®ƒã€‚ è¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨å†™é‡å¤çš„ä»£ç äº†ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -4"><a href="#å®æˆ˜æ¼”ä¹ -4" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>è®©æˆ‘ä»¬æ¥å®šä¹‰ <code>_transfer</code> çš„é€»è¾‘ã€‚</p><ol><li><p>å®šä¹‰ä¸€ä¸ªåä¸º <code>_transfer</code>çš„å‡½æ•°ã€‚å®ƒä¼šéœ€è¦3ä¸ªå‚æ•°ï¼š<code>address _from</code>ã€<code>address _to</code>å’Œ<code>uint256 _tokenId</code>ã€‚å®ƒåº”è¯¥æ˜¯ä¸€ä¸ª <code>ç§æœ‰</code> å‡½æ•°ã€‚</p></li><li><p>æˆ‘ä»¬æœ‰2ä¸ªæ˜ å°„ä¼šåœ¨æ‰€æœ‰æƒæ”¹å˜çš„æ—¶å€™æ”¹å˜ï¼š <code>ownerZombieCount</code> ï¼ˆè®°å½•ä¸€ä¸ªæ‰€æœ‰è€…æœ‰å¤šå°‘åªåƒµå°¸ï¼‰å’Œ <code>zombieToOwner</code> ï¼ˆè®°å½•ä»€ä¹ˆäººæ‹¥æœ‰ä»€ä¹ˆï¼‰ã€‚</p><p>æˆ‘ä»¬çš„å‡½æ•°éœ€è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯ä¸º <strong>æ¥æ”¶</strong> åƒµå°¸çš„äººï¼ˆ<code>address _to</code>ï¼‰å¢ åŠ <code>ownerZombieCount</code>ã€‚ä½¿ç”¨ <code>++</code> æ¥å¢åŠ ã€‚</p></li><li><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†éœ€è¦ä¸º <strong>å‘é€</strong> åƒµå°¸çš„äººï¼ˆ<code>address _from</code>ï¼‰<strong>å‡å°‘</strong><code>ownerZombieCount</code>ã€‚ä½¿ç”¨ <code>--</code> æ¥æ‰£å‡ã€‚</p></li><li><p>æœ€åï¼Œæˆ‘ä»¬å°†æ”¹å˜è¿™ä¸ª <code>_tokenId</code> çš„ <code>zombieToOwner</code> æ˜ å°„ï¼Œè¿™æ ·å®ƒç°åœ¨å°±ä¼šæŒ‡å‘ <code>_to</code>ã€‚</p></li><li><p>éª—ä½ çš„ï¼Œé‚£ä¸æ˜¯æœ€åä¸€æ­¥ã€‚æˆ‘ä»¬è¿˜éœ€è¦å†åšä¸€ä»¶äº‹æƒ…ã€‚</p><p>ERC721è§„èŒƒåŒ…å«äº†ä¸€ä¸ª <code>Transfer</code> äº‹ä»¶ã€‚è¿™ä¸ªå‡½æ•°çš„æœ€åä¸€è¡Œåº”è¯¥ç”¨æ­£ç¡®çš„å‚æ•°è§¦å‘<code>Transfer</code> â€”â€”æŸ¥çœ‹ <code>erc721.sol</code> çœ‹å®ƒæœŸæœ›ä¼ å…¥çš„å‚æ•°å¹¶åœ¨è¿™é‡Œå®ç°ã€‚</p></li></ol><h2 id="åˆçº¦å®Œå–„-2"><a href="#åˆçº¦å®Œå–„-2" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>ZombieOwnership.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombieattack.sol"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">"./erc721.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieOwnership is ZombieAttack, ERC721 &#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">balanceOf</span>(<span class="params">address _owner</span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint256 _balance</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ownerZombieCount[_owner];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">ownerOf</span>(<span class="params">uint256 _tokenId</span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">address _owner</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> zombieToOwner[_tokenId];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åœ¨è¿™é‡Œå®šä¹‰ _transfer()</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">_transfer</span>(<span class="params">address _from, address _to, uint256 _tokenId</span>) <span class="title">private</span> </span>&#123;</span><br><span class="line">      ownerZombieCount[_to]++;</span><br><span class="line">      ownerZombieCount[_from]--;</span><br><span class="line">      zombieToOwner[_tokenId] = _to;</span><br><span class="line">      Transfer(_from, _to, _tokenId);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">transfer</span>(<span class="params">address _to, uint256 _tokenId</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">approve</span>(<span class="params">address _to, uint256 _tokenId</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">takeOwnership</span>(<span class="params">uint256 _tokenId</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ERC721-è½¬ç§»-ç»­"><a href="#ERC721-è½¬ç§»-ç»­" class="headerlink" title="ERC721: è½¬ç§»-ç»­"></a>ERC721: è½¬ç§»-ç»­</h1><p>å¤ªå¥½äº†ï¼åˆšæ‰é‚£æ˜¯æœ€éš¾çš„éƒ¨åˆ†â€”â€”ç°åœ¨å®ç°å…¬å…±çš„ <code>transfer</code> å‡½æ•°åº”è¯¥ååˆ†å®¹æ˜“ï¼Œå› ä¸ºæˆ‘ä»¬çš„ <code>_transfer</code> å‡½æ•°å‡ ä¹å·²ç»æŠŠæ‰€æœ‰çš„é‡æ´»éƒ½å¹²å®Œäº†ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -5"><a href="#å®æˆ˜æ¼”ä¹ -5" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><ol><li><p>æˆ‘ä»¬æƒ³ç¡®ä¿åªæœ‰ä»£å¸æˆ–åƒµå°¸çš„æ‰€æœ‰è€…å¯ä»¥è½¬ç§»å®ƒã€‚è¿˜è®°å¾—æˆ‘ä»¬å¦‚ä½•é™åˆ¶åªæœ‰æ‰€æœ‰è€…æ‰èƒ½è®¿é—®æŸä¸ªåŠŸèƒ½å—ï¼Ÿ</p><p>æ²¡é”™ï¼Œæˆ‘ä»¬å·²ç»æœ‰ä¸€ä¸ªä¿®é¥°ç¬¦èƒ½å¤Ÿå®Œæˆè¿™ä¸ªä»»åŠ¡äº†ã€‚æ‰€ä»¥å°†ä¿®é¥°ç¬¦ <code>onlyOwnerOf</code> æ·»åŠ åˆ°è¿™ä¸ªå‡½æ•°ä¸­ã€‚</p></li><li><p>ç°åœ¨è¯¥å‡½æ•°çš„æ­£æ–‡åªéœ€è¦ä¸€è¡Œä»£ç ã€‚å®ƒåªéœ€è¦è°ƒç”¨ <code>_transfer</code>ã€‚</p><p>è®°å¾—æŠŠ <code>msg.sender</code> ä½œä¸ºå‚æ•°ä¼ é€’è¿› <code>address _from</code>ã€‚</p></li></ol><h2 id="åˆçº¦å®Œå–„-3"><a href="#åˆçº¦å®Œå–„-3" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>ZombieOwnership.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombieattack.sol"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">"./erc721.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieOwnership is ZombieAttack, ERC721 &#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">balanceOf</span>(<span class="params">address _owner</span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint256 _balance</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ownerZombieCount[_owner];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">ownerOf</span>(<span class="params">uint256 _tokenId</span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">address _owner</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> zombieToOwner[_tokenId];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">_transfer</span>(<span class="params">address _from, address _to, uint256 _tokenId</span>) <span class="title">private</span> </span>&#123;</span><br><span class="line">    ownerZombieCount[_to]++;</span><br><span class="line">    ownerZombieCount[_from]--;</span><br><span class="line">    zombieToOwner[_tokenId] = _to;</span><br><span class="line">    Transfer(_from, _to, _tokenId);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1. åœ¨è¿™é‡Œæ·»åŠ ä¿®é¥°ç¬¦</span></span><br><span class="line">  <span class="comment">//function transfer(address _to, uint256 _tokenId) public &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">transfer</span>(<span class="params">address _to, uint256 _tokenId</span>) <span class="title">public</span> <span class="title">onlyOwnerOf</span>(<span class="params">_tokenId</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 2. åœ¨è¿™é‡Œå®šä¹‰æ–¹æ³•</span></span><br><span class="line">    _transfer(msg.sender, _to, _tokenId);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">approve</span>(<span class="params">address _to, uint256 _tokenId</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">takeOwnership</span>(<span class="params">uint256 _tokenId</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ERC721-æ‰¹å‡†"><a href="#ERC721-æ‰¹å‡†" class="headerlink" title="ERC721: æ‰¹å‡†"></a>ERC721: æ‰¹å‡†</h1><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ¥å®ç° <code>approve</code>ã€‚</p><p>è®°ä½ï¼Œä½¿ç”¨ <code>approve</code> æˆ–è€… <code>takeOwnership</code> çš„æ—¶å€™ï¼Œè½¬ç§»æœ‰2ä¸ªæ­¥éª¤ï¼š</p><ol><li>ä½ ï¼Œä½œä¸ºæ‰€æœ‰è€…ï¼Œç”¨æ–°ä¸»äººçš„ <code>address</code> å’Œä½ å¸Œæœ›ä»–è·å–çš„ <code>_tokenId</code> æ¥è°ƒç”¨ <code>approve</code></li><li>æ–°ä¸»äººç”¨ <code>_tokenId</code> æ¥è°ƒç”¨ <code>takeOwnership</code>ï¼Œåˆçº¦ä¼šæ£€æŸ¥ç¡®ä¿ä»–è·å¾—äº†æ‰¹å‡†ï¼Œç„¶åæŠŠä»£å¸è½¬ç§»ç»™ä»–ã€‚</li></ol><p>å› ä¸ºè¿™å‘ç”Ÿåœ¨2ä¸ªå‡½æ•°çš„è°ƒç”¨ä¸­ï¼Œæ‰€ä»¥åœ¨å‡½æ•°è°ƒç”¨ä¹‹é—´ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ•°æ®ç»“æ„æ¥å­˜å‚¨ä»€ä¹ˆäººè¢«æ‰¹å‡†è·å–ä»€ä¹ˆã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -6"><a href="#å®æˆ˜æ¼”ä¹ -6" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><ol><li><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ªæ˜ å°„ <code>zombieApprovals</code>ã€‚å®ƒåº”è¯¥å°†ä¸€ä¸ª <code>uint</code> æ˜ å°„åˆ°ä¸€ä¸ª <code>address</code>ã€‚</p><p>è¿™æ ·ä¸€æ¥ï¼Œå½“æœ‰äººç”¨ä¸€ä¸ª <code>_tokenId</code> è°ƒç”¨ <code>takeOwnership</code> æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªæ˜ å°„æ¥å¿«é€ŸæŸ¥æ‰¾è°è¢«æ‰¹å‡†è·å–é‚£ä¸ªä»£å¸ã€‚</p></li><li><p>åœ¨å‡½æ•° <code>approve</code> ä¸Šï¼Œ æˆ‘ä»¬æƒ³è¦ç¡®ä¿åªæœ‰ä»£å¸æ‰€æœ‰è€…å¯ä»¥æ‰¹å‡†æŸäººæ¥è·å–ä»£å¸ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æ·»åŠ ä¿®é¥°ç¬¦ <code>onlyOwnerOf</code> åˆ° <code>approve</code>ã€‚</p></li><li><p>å‡½æ•°çš„æ­£æ–‡éƒ¨åˆ†ï¼Œå°† <code>_tokenId</code> çš„ <code>zombieApprovals</code> è®¾ç½®ä¸ºå’Œ <code>_to</code> ç›¸ç­‰ã€‚</p></li><li><p>æœ€åï¼Œåœ¨ ERC721 è§„èŒƒé‡Œæœ‰ä¸€ä¸ª <code>Approval</code> äº‹ä»¶ã€‚æ‰€ä»¥æˆ‘ä»¬åº”è¯¥åœ¨è¿™ä¸ªå‡½æ•°çš„æœ€åè§¦å‘è¿™ä¸ªäº‹ä»¶ã€‚ï¼ˆå‚è€ƒ <code>erc721.sol</code> æ¥ç¡®è®¤ä¼ å…¥çš„å‚æ•°ï¼Œå¹¶ç¡®ä¿ <code>_owner</code> æ˜¯ <code>msg.sender</code>ï¼‰</p></li></ol><h2 id="åˆçº¦å®Œå–„-4"><a href="#åˆçº¦å®Œå–„-4" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>ZombieOwnership.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombieattack.sol"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">"./erc721.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieOwnership is ZombieAttack, ERC721 &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1. åœ¨è¿™é‡Œå®šä¹‰æ˜ å°„</span></span><br><span class="line">  mapping (<span class="function"><span class="params">uint</span> =&gt;</span> address) zombieApprovals;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">balanceOf</span>(<span class="params">address _owner</span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint256 _balance</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ownerZombieCount[_owner];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">ownerOf</span>(<span class="params">uint256 _tokenId</span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">address _owner</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> zombieToOwner[_tokenId];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">_transfer</span>(<span class="params">address _from, address _to, uint256 _tokenId</span>) <span class="title">private</span> </span>&#123;</span><br><span class="line">    ownerZombieCount[_to]++;</span><br><span class="line">    ownerZombieCount[_from]--;</span><br><span class="line">    zombieToOwner[_tokenId] = _to;</span><br><span class="line">    Transfer(_from, _to, _tokenId);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">transfer</span>(<span class="params">address _to, uint256 _tokenId</span>) <span class="title">public</span> <span class="title">onlyOwnerOf</span>(<span class="params">_tokenId</span>) </span>&#123;</span><br><span class="line">    _transfer(msg.sender, _to, _tokenId);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. åœ¨è¿™é‡Œæ·»åŠ æ–¹æ³•ä¿®é¥°ç¬¦</span></span><br><span class="line">  <span class="comment">//function approve(address _to, uint256 _tokenId) public &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">approve</span>(<span class="params">address _to, uint256 _tokenId</span>) <span class="title">public</span> <span class="title">onlyOwnerOf</span>(<span class="params">_tokenId</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 3. åœ¨è¿™é‡Œå®šä¹‰æ–¹æ³•</span></span><br><span class="line">    zombieApprovals[_tokenId] = _to;</span><br><span class="line">    Approval(msg.sender, _to, _tokenId);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">takeOwnership</span>(<span class="params">uint256 _tokenId</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ERC721-takeOwnership"><a href="#ERC721-takeOwnership" class="headerlink" title="ERC721: takeOwnership"></a>ERC721: takeOwnership</h1><p>å¤ªæ£’äº†ï¼Œç°åœ¨è®©æˆ‘ä»¬å®Œæˆæœ€åä¸€ä¸ªå‡½æ•°æ¥ç»“æŸ ERC721 çš„å®ç°ã€‚ï¼ˆåˆ«æ‹…å¿ƒï¼Œè¿™åé¢æˆ‘ä»¬è¿˜ä¼šè®²æ›´å¤šå†…å®¹ğŸ˜‰ï¼‰</p><p>æœ€åä¸€ä¸ªå‡½æ•° <code>takeOwnership</code>ï¼Œ åº”è¯¥åªæ˜¯ç®€å•åœ°æ£€æŸ¥ä»¥ç¡®ä¿ <code>msg.sender</code> å·²ç»è¢«æ‰¹å‡†æ¥æå–è¿™ä¸ªä»£å¸æˆ–è€…åƒµå°¸ã€‚è‹¥ç¡®è®¤ï¼Œå°±è°ƒç”¨ <code>_transfer</code>ï¼›</p><h2 id="å®æˆ˜æ¼”ä¹ -7"><a href="#å®æˆ˜æ¼”ä¹ -7" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><ol><li><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦ç”¨ä¸€ä¸ª <code>require</code> å¥å¼æ¥æ£€æŸ¥ <code>_tokenId</code> çš„ <code>zombieApprovals</code> å’Œ <code>msg.sender</code> ç›¸ç­‰ã€‚</p><p>è¿™æ ·å¦‚æœ <code>msg.sender</code> æœªè¢«æˆæƒæ¥æå–è¿™ä¸ªä»£å¸ï¼Œå°†æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p></li><li><p>ä¸ºäº†è°ƒç”¨ <code>_transfer</code>ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ä»£å¸æ‰€æœ‰è€…çš„åœ°å€ï¼ˆå®ƒéœ€è¦ä¸€ä¸ª <code>_from</code> æ¥ä½œä¸ºå‚æ•°ï¼‰ã€‚å¹¸è¿çš„æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨æˆ‘ä»¬çš„ <code>ownerOf</code> å‡½æ•°ä¸­æ¥æ‰¾åˆ°è¿™ä¸ªå‚æ•°ã€‚</p><p>æ‰€ä»¥ï¼Œå®šä¹‰ä¸€ä¸ªåä¸º <code>owner</code> çš„ <code>address</code> å˜é‡ï¼Œå¹¶ä½¿å…¶ç­‰äº <code>ownerOf(_tokenId)</code>ã€‚</p></li><li><p>æœ€åï¼Œè°ƒç”¨ <code>_transfer</code>, å¹¶ä¼ å…¥æ‰€æœ‰å¿…é¡»çš„å‚æ•°ã€‚ï¼ˆåœ¨è¿™é‡Œä½ å¯ä»¥ç”¨ <code>msg.sender</code> ä½œä¸º <code>_to</code>ï¼Œ å› ä¸ºä»£å¸æ­£æ˜¯è¦å‘é€ç»™è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„äººï¼‰ã€‚</p><blockquote><p>æ³¨æ„ï¼š æˆ‘ä»¬å®Œå…¨å¯ä»¥ç”¨ä¸€è¡Œä»£ç æ¥å®ç°ç¬¬2ã€3ä¸¤æ­¥ã€‚ä½†æ˜¯åˆ†å¼€å†™ä¼šè®©ä»£ç æ›´æ˜“è¯»ã€‚ä¸€ç‚¹ä¸ªäººå»ºè®® :)</p></blockquote></li></ol><h2 id="åˆçº¦å®Œå–„-5"><a href="#åˆçº¦å®Œå–„-5" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>ZombieOwnership.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombieattack.sol"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">"./erc721.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieOwnership is ZombieAttack, ERC721 &#123;</span><br><span class="line"></span><br><span class="line">  mapping (<span class="function"><span class="params">uint</span> =&gt;</span> address) zombieApprovals;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">balanceOf</span>(<span class="params">address _owner</span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint256 _balance</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ownerZombieCount[_owner];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">ownerOf</span>(<span class="params">uint256 _tokenId</span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">address _owner</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> zombieToOwner[_tokenId];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">_transfer</span>(<span class="params">address _from, address _to, uint256 _tokenId</span>) <span class="title">private</span> </span>&#123;</span><br><span class="line">    ownerZombieCount[_to]++;</span><br><span class="line">    ownerZombieCount[_from]--;</span><br><span class="line">    zombieToOwner[_tokenId] = _to;</span><br><span class="line">    Transfer(_from, _to, _tokenId);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">transfer</span>(<span class="params">address _to, uint256 _tokenId</span>) <span class="title">public</span> <span class="title">onlyOwnerOf</span>(<span class="params">_tokenId</span>) </span>&#123;</span><br><span class="line">    _transfer(msg.sender, _to, _tokenId);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">approve</span>(<span class="params">address _to, uint256 _tokenId</span>) <span class="title">public</span> <span class="title">onlyOwnerOf</span>(<span class="params">_tokenId</span>) </span>&#123;</span><br><span class="line">    zombieApprovals[_tokenId] = _to;</span><br><span class="line">    Approval(msg.sender, _to, _tokenId);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">takeOwnership</span>(<span class="params">uint256 _tokenId</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä»è¿™é‡Œå¼€å§‹</span></span><br><span class="line">    <span class="built_in">require</span>(zombieApprovals[_tokenId] == msg.sender);</span><br><span class="line">    address owner = ownerOf(_tokenId);</span><br><span class="line">    _transfer(owner, msg.sender, _tokenId);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="é¢„é˜²æº¢å‡º"><a href="#é¢„é˜²æº¢å‡º" class="headerlink" title="é¢„é˜²æº¢å‡º"></a>é¢„é˜²æº¢å‡º</h1><p>æ­å–œä½ ï¼Œæˆ‘ä»¬å®Œæˆäº† ERC721 çš„å®ç°ã€‚</p><p>å¹¶ä¸æ˜¯å¾ˆå¤æ‚ï¼Œå¯¹å§ï¼Ÿå¾ˆå¤šç±»ä¼¼çš„ä»¥å¤ªåŠæ¦‚å¿µï¼Œå½“ä½ åªå¬äººä»¬è°ˆè®ºå®ƒä»¬çš„æ—¶å€™ï¼Œä¼šè§‰å¾—å¾ˆå¤æ‚ã€‚æ‰€ä»¥æœ€ç®€å•çš„ç†è§£æ–¹å¼å°±æ˜¯ä½ è‡ªå·±æ¥å®ç°å®ƒã€‚</p><p>ä¸è¿‡è¦è®°ä½é‚£åªæ˜¯æœ€ç®€å•çš„å®ç°ã€‚è¿˜æœ‰å¾ˆå¤šçš„ç‰¹æ€§æˆ‘ä»¬ä¹Ÿè®¸æƒ³åŠ å…¥åˆ°æˆ‘ä»¬çš„å®ç°ä¸­æ¥ï¼Œæ¯”å¦‚ä¸€äº›é¢å¤–çš„æ£€æŸ¥ï¼Œæ¥ç¡®ä¿ç”¨æˆ·ä¸ä¼šä¸å°å¿ƒæŠŠä»–ä»¬çš„åƒµå°¸è½¬ç§»ç»™<code>0</code> åœ°å€ï¼ˆè¿™è¢«ç§°ä½œ â€œçƒ§å¸â€, åŸºæœ¬ä¸Šå°±æ˜¯æŠŠä»£å¸è½¬ç§»åˆ°ä¸€ä¸ªè°ä¹Ÿæ²¡æœ‰ç§é’¥çš„åœ°å€ï¼Œè®©è¿™ä¸ªä»£å¸æ°¸è¿œä¹Ÿæ— æ³•æ¢å¤ï¼‰ã€‚ æˆ–è€…åœ¨ DApp ä¸­åŠ å…¥ä¸€äº›åŸºæœ¬çš„æ‹å–é€»è¾‘ã€‚ï¼ˆä½ èƒ½æƒ³å‡ºä¸€äº›å®ç°çš„æ–¹æ³•ä¹ˆï¼Ÿï¼‰</p><p>ä½†æ˜¯ä¸ºäº†è®©æˆ‘ä»¬çš„è¯¾ç¨‹ä¸è‡³äºç¦»é¢˜å¤ªè¿œï¼Œæ‰€ä»¥æˆ‘ä»¬åªä¸“æ³¨äºä¸€äº›åŸºç¡€å®ç°ã€‚å¦‚æœä½ æƒ³å­¦ä¹ ä¸€äº›æ›´æ·±å±‚æ¬¡çš„å®ç°ï¼Œå¯ä»¥åœ¨è¿™ä¸ªæ•™ç¨‹ç»“æŸåï¼Œå»çœ‹çœ‹ OpenZeppelin çš„ ERC721 åˆçº¦ã€‚</p><h2 id="åˆçº¦å®‰å…¨å¢å¼º-æº¢å‡ºå’Œä¸‹æº¢"><a href="#åˆçº¦å®‰å…¨å¢å¼º-æº¢å‡ºå’Œä¸‹æº¢" class="headerlink" title="åˆçº¦å®‰å…¨å¢å¼º: æº¢å‡ºå’Œä¸‹æº¢"></a>åˆçº¦å®‰å…¨å¢å¼º: æº¢å‡ºå’Œä¸‹æº¢</h2><p>æˆ‘ä»¬å°†æ¥å­¦ä¹ ä½ åœ¨ç¼–å†™æ™ºèƒ½åˆçº¦çš„æ—¶å€™éœ€è¦æ³¨æ„çš„ä¸€ä¸ªä¸»è¦çš„å®‰å…¨ç‰¹æ€§ï¼šé˜²æ­¢æº¢å‡ºå’Œä¸‹æº¢ã€‚</p><p>ä»€ä¹ˆæ˜¯ <strong><em>æº¢å‡º</em></strong> (<strong><em>overflow\</em></strong>)?</p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª <code>uint8</code>, åªèƒ½å­˜å‚¨8 bitæ•°æ®ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬èƒ½å­˜å‚¨çš„æœ€å¤§æ•°å­—å°±æ˜¯äºŒè¿›åˆ¶ <code>11111111</code> (æˆ–è€…è¯´åè¿›åˆ¶çš„ 2^8 - 1 = 255).</p><p>æ¥çœ‹çœ‹ä¸‹é¢çš„ä»£ç ã€‚æœ€å <code>number</code> å°†ä¼šæ˜¯ä»€ä¹ˆå€¼ï¼Ÿ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">uint8 number = 255;</span><br><span class="line">number++;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯¼è‡´äº†æº¢å‡º â€” è™½ç„¶æˆ‘ä»¬åŠ äº†1ï¼Œ ä½†æ˜¯ <code>number</code> å‡ºä¹æ„æ–™åœ°ç­‰äº <code>0</code>äº†ã€‚ (å¦‚æœä½ ç»™äºŒè¿›åˆ¶ <code>11111111</code> åŠ 1, å®ƒå°†è¢«é‡ç½®ä¸º <code>00000000</code>ï¼Œå°±åƒé’Ÿè¡¨ä» <code>23:59</code> èµ°å‘ <code>00:00</code>)ã€‚</p><p>ä¸‹æº¢(<code>underflow</code>)ä¹Ÿç±»ä¼¼ï¼Œå¦‚æœä½ ä»ä¸€ä¸ªç­‰äº <code>0</code> çš„ <code>uint8</code> å‡å» <code>1</code>, å®ƒå°†å˜æˆ <code>255</code> (å› ä¸º <code>uint</code> æ˜¯æ— ç¬¦å·çš„ï¼Œå…¶ä¸èƒ½ç­‰äºè´Ÿæ•°)ã€‚</p><p>è™½ç„¶æˆ‘ä»¬åœ¨è¿™é‡Œä¸ä½¿ç”¨ <code>uint8</code>ï¼Œè€Œä¸”æ¯æ¬¡ç»™ä¸€ä¸ª <code>uint256</code> åŠ  <code>1</code> ä¹Ÿä¸å¤ªå¯èƒ½æº¢å‡º (2^256 çœŸçš„æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ•°äº†)ï¼Œåœ¨æˆ‘ä»¬çš„åˆçº¦ä¸­æ·»åŠ ä¸€äº›ä¿æŠ¤æœºåˆ¶ä¾ç„¶æ˜¯éå¸¸æœ‰å¿…è¦çš„ï¼Œä»¥é˜²æˆ‘ä»¬çš„ DApp ä»¥åå‡ºç°ä»€ä¹ˆå¼‚å¸¸æƒ…å†µã€‚</p><h2 id="ä½¿ç”¨-SafeMath"><a href="#ä½¿ç”¨-SafeMath" class="headerlink" title="ä½¿ç”¨ SafeMath"></a>ä½¿ç”¨ SafeMath</h2><p>ä¸ºäº†é˜²æ­¢è¿™äº›æƒ…å†µï¼ŒOpenZeppelin å»ºç«‹äº†ä¸€ä¸ªå«åš SafeMath çš„ <strong><em>åº“</em></strong>(<strong><em>library\</em></strong>)ï¼Œé»˜è®¤æƒ…å†µä¸‹å¯ä»¥é˜²æ­¢è¿™äº›é—®é¢˜ã€‚</p><p>ä¸è¿‡åœ¨æˆ‘ä»¬ä½¿ç”¨ä¹‹å‰â€¦â€¦ ä»€ä¹ˆå«åšåº“?</p><p>ä¸€ä¸ª<strong><em>åº“</em></strong> æ˜¯ Solidity ä¸­ä¸€ç§ç‰¹æ®Šçš„åˆçº¦ã€‚å…¶ä¸­ä¸€ä¸ªæœ‰ç”¨çš„åŠŸèƒ½æ˜¯ç»™åŸå§‹æ•°æ®ç±»å‹å¢åŠ ä¸€äº›æ–¹æ³•ã€‚</p><p>æ¯”å¦‚ï¼Œä½¿ç”¨ SafeMath åº“çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ <code>using SafeMath for uint256</code> è¿™æ ·çš„è¯­æ³•ã€‚ SafeMath åº“æœ‰å››ä¸ªæ–¹æ³• â€” <code>add</code>ï¼Œ <code>sub</code>ï¼Œ <code>mul</code>ï¼Œ ä»¥åŠ <code>div</code>ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥è®© <code>uint256</code> è°ƒç”¨è¿™äº›æ–¹æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">using SafeMath for uint256;</span><br><span class="line"></span><br><span class="line">uint256 a = 5;</span><br><span class="line">uint256 b = a.add(3); // 5 + 3 = 8</span><br><span class="line">uint256 c = a.mul(2); // 5 * 2 = 10</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€ç« æ¥å­¦ä¹ è¿™äº›æ–¹æ³•ï¼Œä¸è¿‡ç°åœ¨æˆ‘ä»¬å…ˆå°† SafeMath åº“æ·»åŠ è¿›æˆ‘ä»¬çš„åˆçº¦ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -8"><a href="#å®æˆ˜æ¼”ä¹ -8" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æˆ‘ä»¬å·²ç»å¸®ä½ æŠŠ OpenZeppelin çš„ <code>SafeMath</code> åº“åŒ…å«è¿› <code>safemath.sol</code>äº†ï¼Œå¦‚æœä½ æƒ³çœ‹ä¸€ä¸‹ä»£ç çš„è¯ï¼Œç°åœ¨å¯ä»¥çœ‹çœ‹ï¼Œä¸è¿‡æˆ‘ä»¬ä¸‹ä¸€ç« å°†æ·±å…¥è¿›å»ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬æ¥å‘Šè¯‰æˆ‘ä»¬çš„åˆçº¦è¦ä½¿ç”¨ SafeMathã€‚æˆ‘ä»¬å°†åœ¨æˆ‘ä»¬çš„ <code>ZombieFactory</code> é‡Œè°ƒç”¨ï¼Œè¿™æ˜¯æˆ‘ä»¬çš„åŸºç¡€åˆçº¦ â€” è¿™æ ·å…¶ä»–æ‰€æœ‰ç»§æ‰¿å‡ºå»çš„å­åˆçº¦éƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªåº“äº†ã€‚</p><ol><li>å°† <code>safemath.sol</code> å¼•å…¥åˆ° <code>zombiefactory.sol</code>.</li><li>æ·»åŠ å®šä¹‰ï¼š <code>using SafeMath for uint256;</code>.</li></ol><h2 id="åˆçº¦ä¿®æ”¹-1"><a href="#åˆçº¦ä¿®æ”¹-1" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><p>ZombieFactory.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./ownable.sol"</span>;</span><br><span class="line"><span class="comment">// 1. åœ¨è¿™é‡Œå¼•å…¥</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./safemath.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory is Ownable &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. åœ¨è¿™é‡Œå®šä¹‰ using safemath </span></span><br><span class="line">  using SafeMath <span class="keyword">for</span> uint256;</span><br><span class="line">  event NewZombie(uint zombieId, string name, uint dna);</span><br><span class="line"></span><br><span class="line">  uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">  uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line">  uint cooldownTime = <span class="number">1</span> days;</span><br><span class="line"></span><br><span class="line">  struct Zombie &#123;</span><br><span class="line">    string name;</span><br><span class="line">    uint dna;</span><br><span class="line">    uint32 level;</span><br><span class="line">    uint32 readyTime;</span><br><span class="line">    uint16 winCount;</span><br><span class="line">    uint16 lossCount;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Zombie[] public zombies;</span><br><span class="line"></span><br><span class="line">  mapping (<span class="function"><span class="params">uint</span> =&gt;</span> address) public zombieToOwner;</span><br><span class="line">  mapping (<span class="function"><span class="params">address</span> =&gt;</span> uint) ownerZombieCount;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">_createZombie</span>(<span class="params">string _name, uint _dna</span>) <span class="title">internal</span> </span>&#123;</span><br><span class="line">    uint id = zombies.push(Zombie(_name, _dna, <span class="number">1</span>, uint32(now + cooldownTime), <span class="number">0</span>, <span class="number">0</span>)) - <span class="number">1</span>;</span><br><span class="line">    zombieToOwner[id] = msg.sender;</span><br><span class="line">    ownerZombieCount[msg.sender]++;</span><br><span class="line">    NewZombie(id, _name, _dna);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">_generateRandomDna</span>(<span class="params">string _str</span>) <span class="title">private</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>) </span>&#123;</span><br><span class="line">    uint rand = uint(keccak256(_str));</span><br><span class="line">    <span class="keyword">return</span> rand % dnaModulus;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">createRandomZombie</span>(<span class="params">string _name</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(ownerZombieCount[msg.sender] == <span class="number">0</span>);</span><br><span class="line">    uint randDna = _generateRandomDna(_name);</span><br><span class="line">    randDna = randDna - randDna % <span class="number">100</span>;</span><br><span class="line">    _createZombie(_name, randDna);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="SafeMath-ç¬¬äºŒéƒ¨åˆ†"><a href="#SafeMath-ç¬¬äºŒéƒ¨åˆ†" class="headerlink" title="SafeMath ç¬¬äºŒéƒ¨åˆ†"></a>SafeMath ç¬¬äºŒéƒ¨åˆ†</h1><p>æ¥çœ‹çœ‹ SafeMath çš„éƒ¨åˆ†ä»£ç :</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">library SafeMath &#123;</span><br><span class="line"></span><br><span class="line">  function mul(uint256 a, uint256 b) internal pure returns (uint256) &#123;</span><br><span class="line">    if (a == 0) &#123;</span><br><span class="line">      return 0;</span><br><span class="line">    &#125;</span><br><span class="line">    uint256 c = a * b;</span><br><span class="line">    assert(c / a == b);</span><br><span class="line">    return c;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function div(uint256 a, uint256 b) internal pure returns (uint256) &#123;</span><br><span class="line">    // assert(b &gt; 0); // Solidity automatically throws when dividing by 0</span><br><span class="line">    uint256 c = a / b;</span><br><span class="line">    // assert(a == b * c + a % b); // There is no case in which this doesn&apos;t hold</span><br><span class="line">    return c;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function sub(uint256 a, uint256 b) internal pure returns (uint256) &#123;</span><br><span class="line">    assert(b &lt;= a);</span><br><span class="line">    return a - b;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function add(uint256 a, uint256 b) internal pure returns (uint256) &#123;</span><br><span class="line">    uint256 c = a + b;</span><br><span class="line">    assert(c &gt;= a);</span><br><span class="line">    return c;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¦–å…ˆæˆ‘ä»¬æœ‰äº† <code>library</code> å…³é”®å­— â€” åº“å’Œ <code>åˆçº¦</code>å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯åˆæœ‰ä¸€äº›ä¸åŒã€‚ å°±æˆ‘ä»¬çš„ç›®çš„è€Œè¨€ï¼Œåº“å…è®¸æˆ‘ä»¬ä½¿ç”¨ <code>using</code> å…³é”®å­—ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨æŠŠåº“çš„æ‰€æœ‰æ–¹æ³•æ·»åŠ ç»™ä¸€ä¸ªæ•°æ®ç±»å‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">using SafeMath for uint;</span><br><span class="line">// è¿™ä¸‹æˆ‘ä»¬å¯ä»¥ä¸ºä»»ä½• uint è°ƒç”¨è¿™äº›æ–¹æ³•äº†</span><br><span class="line">uint test = 2;</span><br><span class="line">test = test.mul(3); // test ç­‰äº 6 äº†</span><br><span class="line">test = test.add(5); // test ç­‰äº 11 äº†</span><br></pre></td></tr></table></figure><p>æ³¨æ„ <code>mul</code> å’Œ <code>add</code> å…¶å®éƒ½éœ€è¦ä¸¤ä¸ªå‚æ•°ã€‚ åœ¨æˆ‘ä»¬å£°æ˜äº† <code>using SafeMath for uint</code> åï¼Œæˆ‘ä»¬ç”¨æ¥è°ƒç”¨è¿™äº›æ–¹æ³•çš„ <code>uint</code> å°±è‡ªåŠ¨è¢«ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’è¿›å»äº†(åœ¨æ­¤ä¾‹ä¸­å°±æ˜¯ <code>test</code>)</p><p>æˆ‘ä»¬æ¥çœ‹çœ‹ <code>add</code> çš„æºä»£ç çœ‹ SafeMath åšäº†ä»€ä¹ˆ:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function add(uint256 a, uint256 b) internal pure returns (uint256) &#123;</span><br><span class="line">  uint256 c = a + b;</span><br><span class="line">  assert(c &gt;= a);</span><br><span class="line">  return c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŸºæœ¬ä¸Š <code>add</code> åªæ˜¯åƒ <code>+</code> ä¸€æ ·å¯¹ä¸¤ä¸ª <code>uint</code> ç›¸åŠ ï¼Œ ä½†æ˜¯å®ƒç”¨ä¸€ä¸ª <code>assert</code> è¯­å¥æ¥ç¡®ä¿ç»“æœå¤§äº <code>a</code>ã€‚è¿™æ ·å°±é˜²æ­¢äº†æº¢å‡ºã€‚</p><p><code>assert</code> å’Œ <code>require</code> ç›¸ä¼¼ï¼Œè‹¥ç»“æœä¸ºå¦å®ƒå°±ä¼šæŠ›å‡ºé”™è¯¯ã€‚ <code>assert</code> å’Œ <code>require</code> åŒºåˆ«åœ¨äºï¼Œ<code>require</code> è‹¥å¤±è´¥åˆ™ä¼šè¿”è¿˜ç»™ç”¨æˆ·å‰©ä¸‹çš„ gasï¼Œ <code>assert</code> åˆ™ä¸ä¼šã€‚æ‰€ä»¥å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä½ å†™ä»£ç çš„æ—¶å€™ä¼šæ¯”è¾ƒå–œæ¬¢ <code>require</code>ï¼Œ<code>assert</code> åªåœ¨ä»£ç å¯èƒ½å‡ºç°ä¸¥é‡é”™è¯¯çš„æ—¶å€™ä½¿ç”¨ï¼Œæ¯”å¦‚ <code>uint</code> æº¢å‡ºã€‚</p><p>æ‰€ä»¥ç®€è€Œè¨€ä¹‹ï¼Œ SafeMath çš„ <code>add</code>ï¼Œ <code>sub</code>ï¼Œ <code>mul</code>ï¼Œ å’Œ <code>div</code> æ–¹æ³•åªåšç®€å•çš„å››åˆ™è¿ç®—ï¼Œç„¶ååœ¨å‘ç”Ÿæº¢å‡ºæˆ–ä¸‹æº¢çš„æ—¶å€™æŠ›å‡ºé”™è¯¯ã€‚</p><h2 id="åœ¨æˆ‘ä»¬çš„ä»£ç é‡Œä½¿ç”¨-SafeMathã€‚"><a href="#åœ¨æˆ‘ä»¬çš„ä»£ç é‡Œä½¿ç”¨-SafeMathã€‚" class="headerlink" title="åœ¨æˆ‘ä»¬çš„ä»£ç é‡Œä½¿ç”¨ SafeMathã€‚"></a>åœ¨æˆ‘ä»¬çš„ä»£ç é‡Œä½¿ç”¨ SafeMathã€‚</h2><p>ä¸ºäº†é˜²æ­¢æº¢å‡ºå’Œä¸‹æº¢ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æˆ‘ä»¬çš„ä»£ç é‡Œæ‰¾ <code>+</code>ï¼Œ <code>-</code>ï¼Œ <code>*</code>ï¼Œ æˆ– <code>/</code>ï¼Œç„¶åæ›¿æ¢ä¸º <code>add</code>, <code>sub</code>, <code>mul</code>, <code>div</code>.</p><p>æ¯”å¦‚ï¼Œä¸å…¶è¿™æ ·åš:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myUint++;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬è¿™æ ·åšï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myUint = myUint.add(1);</span><br></pre></td></tr></table></figure><h2 id="å®æˆ˜æ¼”ä¹ -9"><a href="#å®æˆ˜æ¼”ä¹ -9" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>åœ¨ <code>ZombieOwnership</code> ä¸­æœ‰ä¸¤ä¸ªåœ°æ–¹ç”¨åˆ°äº†æ•°å­¦è¿ç®—ï¼Œæ¥æ›¿æ¢æˆ SafeMath æ–¹æ³•æŠŠã€‚</p><ol><li>å°† <code>++</code> æ›¿æ¢æˆ SafeMath æ–¹æ³•ã€‚</li><li>å°† <code>--</code> æ›¿æ¢æˆ SafeMath æ–¹æ³•ã€‚</li></ol><h2 id="åˆçº¦ä¿®æ”¹-2"><a href="#åˆçº¦ä¿®æ”¹-2" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><p>zombieownership.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombieattack.sol"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">"./erc721.sol"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">"./safemath.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieOwnership is ZombieAttack, ERC721 &#123;</span><br><span class="line"></span><br><span class="line">  using SafeMath <span class="keyword">for</span> uint256;</span><br><span class="line"></span><br><span class="line">  mapping (<span class="function"><span class="params">uint</span> =&gt;</span> address) zombieApprovals;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">balanceOf</span>(<span class="params">address _owner</span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint256 _balance</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ownerZombieCount[_owner];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">ownerOf</span>(<span class="params">uint256 _tokenId</span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">address _owner</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> zombieToOwner[_tokenId];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">_transfer</span>(<span class="params">address _from, address _to, uint256 _tokenId</span>) <span class="title">private</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1. æ›¿æ¢æˆ SafeMath çš„ `add`</span></span><br><span class="line">    <span class="comment">//ownerZombieCount[_to]++;</span></span><br><span class="line">    ownerZombieCount[_to] = ownerZombieCount[_to].add(<span class="number">1</span>);</span><br><span class="line">    <span class="comment">// 2. æ›¿æ¢æˆ SafeMath çš„ `sub`</span></span><br><span class="line">    <span class="comment">//ownerZombieCount[_from]--;</span></span><br><span class="line">    ownerZombieCount[_from] = ownerZombieCount[_from].sub(<span class="number">1</span>);</span><br><span class="line">    zombieToOwner[_tokenId] = _to;</span><br><span class="line">    Transfer(_from, _to, _tokenId);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">transfer</span>(<span class="params">address _to, uint256 _tokenId</span>) <span class="title">public</span> <span class="title">onlyOwnerOf</span>(<span class="params">_tokenId</span>) </span>&#123;</span><br><span class="line">    _transfer(msg.sender, _to, _tokenId);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">approve</span>(<span class="params">address _to, uint256 _tokenId</span>) <span class="title">public</span> <span class="title">onlyOwnerOf</span>(<span class="params">_tokenId</span>) </span>&#123;</span><br><span class="line">    zombieApprovals[_tokenId] = _to;</span><br><span class="line">    Approval(msg.sender, _to, _tokenId);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">takeOwnership</span>(<span class="params">uint256 _tokenId</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(zombieApprovals[_tokenId] == msg.sender);</span><br><span class="line">    address owner = ownerOf(_tokenId);</span><br><span class="line">    _transfer(owner, msg.sender, _tokenId);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="SafeMath-ç¬¬ä¸‰éƒ¨åˆ†"><a href="#SafeMath-ç¬¬ä¸‰éƒ¨åˆ†" class="headerlink" title="SafeMath ç¬¬ä¸‰éƒ¨åˆ†"></a>SafeMath ç¬¬ä¸‰éƒ¨åˆ†</h1><p>å¤ªå¥½äº†ï¼Œè¿™ä¸‹æˆ‘ä»¬çš„ ERC721 å®ç°ä¸ä¼šæœ‰æº¢å‡ºæˆ–è€…ä¸‹æº¢äº†ã€‚</p><p>å›å¤´çœ‹çœ‹æˆ‘ä»¬åœ¨ä¹‹å‰è¯¾ç¨‹å†™çš„ä»£ç ï¼Œè¿˜æœ‰å…¶ä»–å‡ ä¸ªåœ°æ–¹ä¹Ÿæœ‰å¯èƒ½å¯¼è‡´æº¢å‡ºæˆ–ä¸‹æº¢ã€‚</p><p>æ¯”å¦‚ï¼Œ åœ¨ ZombieAttack é‡Œé¢æˆ‘ä»¬æœ‰ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">myZombie.winCount++;</span><br><span class="line">myZombie.level++;</span><br><span class="line">enemyZombie.lossCount++;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åŒæ ·åº”è¯¥åœ¨è¿™äº›åœ°æ–¹é˜²æ­¢æº¢å‡ºã€‚ï¼ˆé€šå¸¸æƒ…å†µä¸‹ï¼Œæ€»æ˜¯ä½¿ç”¨ SafeMath è€Œä¸æ˜¯æ™®é€šæ•°å­¦è¿ç®—æ˜¯ä¸ªå¥½ä¸»æ„ï¼Œä¹Ÿè®¸åœ¨ä»¥å Solidity çš„æ–°ç‰ˆæœ¬é‡Œè¿™ç‚¹ä¼šè¢«é»˜è®¤å®ç°ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬å¾—è‡ªå·±åœ¨ä»£ç é‡Œå®ç°è¿™äº›é¢å¤–çš„å®‰å…¨æªæ–½ï¼‰ã€‚</p><p>ä¸è¿‡æˆ‘ä»¬é‡åˆ°ä¸ªå°é—®é¢˜ â€” <code>winCount</code> å’Œ <code>lossCount</code> æ˜¯ <code>uint16</code>ï¼Œ è€Œ <code>level</code> æ˜¯ <code>uint32</code>ã€‚ æ‰€ä»¥å¦‚æœæˆ‘ä»¬ç”¨è¿™äº›ä½œä¸ºå‚æ•°ä¼ å…¥ SafeMath çš„ <code>add</code> æ–¹æ³•ã€‚ å®ƒå®é™…ä¸Šå¹¶ä¸ä¼šé˜²æ­¢æº¢å‡ºï¼Œå› ä¸ºå®ƒä¼šæŠŠè¿™äº›å˜é‡éƒ½è½¬æ¢æˆ <code>uint256</code>:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">uint256 a, uint256 b</span>) <span class="title">internal</span> <span class="title">pure</span> <span class="title">returns</span> (<span class="params">uint256</span>) </span>&#123;</span><br><span class="line">  uint256 c = a + b;</span><br><span class="line">  assert(c &gt;= a);</span><br><span class="line">  <span class="keyword">return</span> c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœæˆ‘ä»¬åœ¨`uint8` ä¸Šè°ƒç”¨ `.add`ã€‚å®ƒå°†ä¼šè¢«è½¬æ¢æˆ `uint256`.</span></span><br><span class="line"><span class="comment">// æ‰€ä»¥å®ƒä¸ä¼šåœ¨ 2^8 æ—¶æº¢å‡ºï¼Œå› ä¸º 256 æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ `uint256`.</span></span><br></pre></td></tr></table></figure><p>è¿™å°±æ„å‘³ç€ï¼Œæˆ‘ä»¬éœ€è¦å†å®ç°ä¸¤ä¸ªåº“æ¥é˜²æ­¢ <code>uint16</code> å’Œ <code>uint32</code> æº¢å‡ºæˆ–ä¸‹æº¢ã€‚æˆ‘ä»¬å¯ä»¥å°†å…¶å‘½åä¸º <code>SafeMath16</code> å’Œ <code>SafeMath32</code>ã€‚</p><p>ä»£ç å°†å’Œ SafeMath å®Œå…¨ç›¸åŒï¼Œé™¤äº†æ‰€æœ‰çš„ <code>uint256</code> å®ä¾‹éƒ½å°†è¢«æ›¿æ¢æˆ <code>uint32</code> æˆ– <code>uint16</code>ã€‚</p><p>æˆ‘ä»¬å·²ç»å°†è¿™äº›ä»£ç å¸®ä½ å†™å¥½äº†ï¼Œæ‰“å¼€ <code>safemath.sol</code> åˆçº¦çœ‹çœ‹ä»£ç å§ã€‚</p><p>ç°åœ¨æˆ‘ä»¬éœ€è¦åœ¨ ZombieFactory é‡Œä½¿ç”¨å®ƒä»¬ã€‚</p><h2 id="Putting-it-to-the-Test"><a href="#Putting-it-to-the-Test" class="headerlink" title="Putting it to the Test"></a>Putting it to the Test</h2><p>åˆ†é…ï¼š</p><ol><li>å£°æ˜æˆ‘ä»¬å°†ä¸º <code>uint32</code> ä½¿ç”¨<code>SafeMath32</code>ã€‚</li><li>å£°æ˜æˆ‘ä»¬å°†ä¸º <code>uint16</code> ä½¿ç”¨<code>SafeMath16</code>ã€‚</li><li>åœ¨ ZombieFactory é‡Œè¿˜æœ‰ä¸€å¤„æˆ‘ä»¬ä¹Ÿåº”è¯¥ä½¿ç”¨ SafeMath çš„æ–¹æ³•ï¼Œ æˆ‘ä»¬å·²ç»åœ¨é‚£é‡Œç•™äº†æ³¨é‡Šæé†’ä½ ã€‚</li></ol><h2 id="åˆçº¦ä¿®æ”¹-3"><a href="#åˆçº¦ä¿®æ”¹-3" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><p>zombiefactory.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./ownable.sol"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">"./safemath.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory is Ownable &#123;</span><br><span class="line"></span><br><span class="line">  using SafeMath <span class="keyword">for</span> uint256;</span><br><span class="line">  <span class="comment">// 1. ä¸º uint32 å£°æ˜ ä½¿ç”¨ SafeMath32</span></span><br><span class="line">  using SafeMath32 <span class="keyword">for</span> uint32;</span><br><span class="line">  <span class="comment">// 2. ä¸º uint16 å£°æ˜ ä½¿ç”¨ SafeMath16</span></span><br><span class="line">  using SafeMath16 <span class="keyword">for</span> uint16;</span><br><span class="line"></span><br><span class="line">  event NewZombie(uint zombieId, string name, uint dna);</span><br><span class="line"></span><br><span class="line">  uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">  uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line">  uint cooldownTime = <span class="number">1</span> days;</span><br><span class="line"></span><br><span class="line">  struct Zombie &#123;</span><br><span class="line">    string name;</span><br><span class="line">    uint dna;</span><br><span class="line">    uint32 level;</span><br><span class="line">    uint32 readyTime;</span><br><span class="line">    uint16 winCount;</span><br><span class="line">    uint16 lossCount;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Zombie[] public zombies;</span><br><span class="line"></span><br><span class="line">  mapping (<span class="function"><span class="params">uint</span> =&gt;</span> address) public zombieToOwner;</span><br><span class="line">  mapping (<span class="function"><span class="params">address</span> =&gt;</span> uint) ownerZombieCount;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">_createZombie</span>(<span class="params">string _name, uint _dna</span>) <span class="title">internal</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ³¨æ„: æˆ‘ä»¬é€‰æ‹©ä¸å¤„ç†2038å¹´é—®é¢˜ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒ readyTime çš„æº¢å‡º</span></span><br><span class="line">    <span class="comment">// åæ­£åœ¨2038å¹´æˆ‘ä»¬çš„APPæ—©å®Œè›‹äº†</span></span><br><span class="line">    uint id = zombies.push(Zombie(_name, _dna, <span class="number">1</span>, uint32(now + cooldownTime), <span class="number">0</span>, <span class="number">0</span>)) - <span class="number">1</span>;</span><br><span class="line">    zombieToOwner[id] = msg.sender;</span><br><span class="line">    <span class="comment">// 3. åœ¨è¿™é‡Œä½¿ç”¨ SafeMath çš„ `add` æ–¹æ³•:</span></span><br><span class="line">    <span class="comment">//ownerZombieCount[msg.sender]++;</span></span><br><span class="line">    ownerZombieCount[msg.sender] = ownerZombieCount[msg.sender].add(<span class="number">1</span>);</span><br><span class="line">    NewZombie(id, _name, _dna);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">_generateRandomDna</span>(<span class="params">string _str</span>) <span class="title">private</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>) </span>&#123;</span><br><span class="line">    uint rand = uint(keccak256(_str));</span><br><span class="line">    <span class="keyword">return</span> rand % dnaModulus;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">createRandomZombie</span>(<span class="params">string _name</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(ownerZombieCount[msg.sender] == <span class="number">0</span>);</span><br><span class="line">    uint randDna = _generateRandomDna(_name);</span><br><span class="line">    randDna = randDna - randDna % <span class="number">100</span>;</span><br><span class="line">    _createZombie(_name, randDna);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="SafeMath-ç¬¬4éƒ¨åˆ†"><a href="#SafeMath-ç¬¬4éƒ¨åˆ†" class="headerlink" title="SafeMath ç¬¬4éƒ¨åˆ†"></a>SafeMath ç¬¬4éƒ¨åˆ†</h1><p>çœŸæ£’ï¼Œç°åœ¨æˆ‘ä»¬å·²ç»ä¸ºæˆ‘ä»¬çš„ DApp é‡Œé¢ç”¨åˆ°çš„ <code>uint</code> æ•°æ®ç±»å‹éƒ½å®ç°äº† SafeMath äº†ã€‚</p><p>è®©æˆ‘ä»¬æŠŠ <code>ZombieAttack</code> é‡Œæ‰€æœ‰æ½œåœ¨çš„é—®é¢˜éƒ½ä¿®å¤äº†å§ã€‚ ï¼ˆå…¶å®åœ¨ <code>ZombieHelper</code> é‡Œä¹Ÿæœ‰ä¸€å¤„ <code>zombies[_zombieId].level++;</code> éœ€è¦ä¿®å¤ï¼Œä¸è¿‡æˆ‘ä»¬å·²ç»å¸®ä½ åšå¥½äº†ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨å†æ¥ä¸€ç« äº† ğŸ˜‰ï¼‰ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -10"><a href="#å®æˆ˜æ¼”ä¹ -10" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æ”¾å¿ƒå¤§èƒ†å»å¯¹ <code>ZombieAttack</code> é‡Œæ‰€æœ‰çš„ <code>++</code> æ“ä½œéƒ½ä½¿ç”¨ SafeMath æ–¹æ³•å§ã€‚ä¸ºäº†æ–¹ä¾¿ä½ æ‰¾ï¼Œæˆ‘ä»¬å·²ç»åœ¨ç›¸åº”çš„åœ°æ–¹ç•™äº†æ³¨é‡Šç»™ä½ ã€‚</p><h2 id="åˆçº¦ä¿®æ”¹-4"><a href="#åˆçº¦ä¿®æ”¹-4" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><p>ZombieAttack .sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiehelper.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieBattle is ZombieHelper &#123;</span><br><span class="line">  uint randNonce = <span class="number">0</span>;</span><br><span class="line">  uint attackVictoryProbability = <span class="number">70</span>;</span><br><span class="line">  <span class="comment">//using SafeMath for uint256;</span></span><br><span class="line">  <span class="comment">//using SafeMath32 for uint32;</span></span><br><span class="line">  <span class="comment">//using SafeMath16 for uint16;</span></span><br><span class="line">  <span class="comment">//ZombieBattleçš„çˆ¶ç±»æ˜¯ZombieHelperï¼ŒZombieHelperçš„çˆ¶ç±»æ˜¯ZombieFeedingï¼ŒZombieFeedingçš„çˆ¶ç±»æ˜¯ZombieFactoryã€‚åœ¨ZombieFactoryä¸­å¼•ç”¨è¿‡SafeMarhã€SafeMarh32ã€SafeMarh16ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œä¸éœ€è¦é‡å¤å¼•ç”¨ã€‚</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">randMod</span>(<span class="params">uint _modulus</span>) <span class="title">internal</span> <span class="title">returns</span>(<span class="params">uint</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// è¿™å„¿æœ‰ä¸€ä¸ª</span></span><br><span class="line">    <span class="comment">//randNonce++;</span></span><br><span class="line">    randNonce = randNonce.add(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> uint(keccak256(now, msg.sender, randNonce)) % _modulus;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">attack</span>(<span class="params">uint _zombieId, uint _targetId</span>) <span class="title">external</span> <span class="title">onlyOwnerOf</span>(<span class="params">_zombieId</span>) </span>&#123;</span><br><span class="line">    Zombie storage myZombie = zombies[_zombieId];</span><br><span class="line">    Zombie storage enemyZombie = zombies[_targetId];</span><br><span class="line">    uint rand = randMod(<span class="number">100</span>);</span><br><span class="line">    <span class="keyword">if</span> (rand &lt;= attackVictoryProbability) &#123;</span><br><span class="line">      <span class="comment">// è¿™é‡Œæœ‰ä¸‰ä¸ª</span></span><br><span class="line">      <span class="comment">//myZombie.winCount++;</span></span><br><span class="line">      myZombie.winCount = myZombie.winCount.add(<span class="number">1</span>);</span><br><span class="line">      <span class="comment">//myZombie.level++;</span></span><br><span class="line">      myZombie.level = myZombie.level.add(<span class="number">1</span>);</span><br><span class="line">      <span class="comment">//enemyZombie.lossCount++;</span></span><br><span class="line">      enemyZombie.lossCount = enemyZombie.lossCount.add(<span class="number">1</span>);</span><br><span class="line">      feedAndMultiply(_zombieId, enemyZombie.dna, <span class="string">"zombie"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// è¿™å„¿è¿˜æœ‰ä¿©å“¦</span></span><br><span class="line">      <span class="comment">//myZombie.lossCount++;</span></span><br><span class="line">      myZombie.lossCount = myZombie.lossCount.add(<span class="number">1</span>);</span><br><span class="line">      <span class="comment">//enemyZombie.winCount++;</span></span><br><span class="line">      enemyZombie.winCount = enemyZombie.winCount.add(<span class="number">1</span>);</span><br><span class="line">      _triggerCooldown(myZombie);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h1><p>åƒµå°¸æ¸¸æˆçš„ Solidity ä»£ç ç»ˆäºå®Œæˆå•¦ã€‚</p><p>åœ¨ä»¥åçš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•å°†æ¸¸æˆéƒ¨ç½²åˆ°ä»¥å¤ªåŠï¼Œä»¥åŠå¦‚ä½•å’Œ Web3.js äº¤äº’ã€‚</p><p>ä¸è¿‡åœ¨ä½ ç¦»å¼€ç¬¬äº”è¯¾ä¹‹å‰ï¼Œæˆ‘ä»¬æ¥è°ˆè°ˆå¦‚ä½• <strong>ç»™ä½ çš„ä»£ç æ·»åŠ æ³¨é‡Š</strong>.</p><h2 id="æ³¨é‡Šè¯­æ³•"><a href="#æ³¨é‡Šè¯­æ³•" class="headerlink" title="æ³¨é‡Šè¯­æ³•"></a>æ³¨é‡Šè¯­æ³•</h2><p>Solidity é‡Œçš„æ³¨é‡Šå’Œ JavaScript ç›¸åŒã€‚åœ¨æˆ‘ä»¬çš„è¯¾ç¨‹ä¸­ä½ å·²ç»çœ‹åˆ°äº†ä¸å°‘å•è¡Œæ³¨é‡Šäº†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// è¿™æ˜¯ä¸€ä¸ªå•è¡Œæ³¨é‡Šï¼Œå¯ä»¥ç†è§£ä¸ºç»™è‡ªå·±æˆ–è€…åˆ«äººçœ‹çš„ç¬”è®°</span><br></pre></td></tr></table></figure><p>åªè¦åœ¨ä»»ä½•åœ°æ–¹æ·»åŠ ä¸€ä¸ª <code>//</code> å°±æ„å‘³ç€ä½ åœ¨æ³¨é‡Šã€‚å¦‚æ­¤ç®€å•æ‰€ä»¥ä½ åº”è¯¥ç»å¸¸è¿™ä¹ˆåšã€‚</p><p>ä¸è¿‡æˆ‘ä»¬ä¹ŸçŸ¥é“ä½ çš„æƒ³æ³•ï¼šæœ‰æ—¶å€™å•è¡Œæ³¨é‡Šæ˜¯ä¸å¤Ÿçš„ã€‚æ¯•ç«Ÿä½ ç”Ÿæ¥è¯ç—¨ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬æœ‰äº†å¤šè¡Œæ³¨é‡Šï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">contract CryptoZombies &#123; </span><br><span class="line">  /* è¿™æ˜¯ä¸€ä¸ªå¤šè¡Œæ³¨é‡Šã€‚æˆ‘æƒ³å¯¹æ‰€æœ‰èŠ±æ—¶é—´æ¥å°è¯•è¿™ä¸ªç¼–ç¨‹è¯¾ç¨‹çš„äººè¯´å£°è°¢è°¢ã€‚</span><br><span class="line">  å®ƒæ˜¯å…è´¹çš„ï¼Œå¹¶å°†æ°¸è¿œå…è´¹ã€‚ä½†æ˜¯æˆ‘ä»¬ä¾ç„¶å€¾æ³¨äº†æˆ‘ä»¬çš„å¿ƒè¡€æ¥è®©å®ƒå˜å¾—æ›´å¥½ã€‚</span><br><span class="line"></span><br><span class="line">   è¦çŸ¥é“è¿™ä¾ç„¶åªæ˜¯åŒºå—é“¾å¼€å‘çš„å¼€å§‹è€Œå·²ï¼Œè™½ç„¶æˆ‘ä»¬å·²ç»èµ°äº†å¾ˆè¿œï¼Œ</span><br><span class="line">   ä»ç„¶æœ‰å¾ˆå¤šç§æ–¹å¼æ¥è®©æˆ‘ä»¬çš„ç¤¾åŒºå˜å¾—æ›´å¥½ã€‚</span><br><span class="line">   å¦‚æœæˆ‘ä»¬åœ¨å“ªä¸ªåœ°æ–¹å‡ºäº†é”™ï¼Œæ¬¢è¿åœ¨æˆ‘ä»¬çš„ github æäº¤ PR æˆ–è€… issue æ¥å¸®åŠ©æˆ‘ä»¬æ”¹è¿›ï¼š</span><br><span class="line">    https://github.com/loomnetwork/cryptozombie-lessons</span><br><span class="line"></span><br><span class="line">    æˆ–è€…ï¼Œå¦‚æœä½ æœ‰ä»»ä½•çš„æƒ³æ³•ã€å»ºè®®ç”šè‡³ä»…ä»…æƒ³å’Œæˆ‘ä»¬æ‰“å£°æ‹›å‘¼ï¼Œæ¬¢è¿æ¥æˆ‘ä»¬çš„ç”µæŠ¥ç¾¤ï¼š</span><br><span class="line">     https://t.me/loomnetworkcn</span><br><span class="line">  */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç‰¹åˆ«æ˜¯ï¼Œæœ€å¥½ä¸ºä½ åˆçº¦ä¸­æ¯ä¸ªæ–¹æ³•æ·»åŠ æ³¨é‡Šæ¥è§£é‡Šå®ƒçš„é¢„æœŸè¡Œä¸ºã€‚è¿™æ ·å…¶ä»–å¼€å‘è€…ï¼ˆæˆ–è€…ä½ è‡ªå·±ï¼Œåœ¨6ä¸ªæœˆä»¥åå†å›åˆ°è¿™ä¸ªé¡¹ç›®ä¸­ï¼‰å¯ä»¥å¾ˆå¿«åœ°ç†è§£ä½ çš„ä»£ç è€Œä¸éœ€è¦é€è¡Œé˜…è¯»æ‰€æœ‰ä»£ç ã€‚</p><p>Solidity ç¤¾åŒºæ‰€ä½¿ç”¨çš„ä¸€ä¸ªæ ‡å‡†æ˜¯ä½¿ç”¨ä¸€ç§è¢«ç§°ä½œ <strong><em>natspec\</em></strong> çš„æ ¼å¼ï¼Œçœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/// @title ä¸€ä¸ªç®€å•çš„åŸºç¡€è¿ç®—åˆçº¦</span><br><span class="line">/// @author H4XF13LD MORRIS ğŸ’¯ğŸ’¯ğŸ˜ğŸ’¯ğŸ’¯</span><br><span class="line">/// @notice ç°åœ¨ï¼Œè¿™ä¸ªåˆçº¦åªæ·»åŠ ä¸€ä¸ªä¹˜æ³•</span><br><span class="line">contract Math &#123;</span><br><span class="line">  /// @notice ä¸¤ä¸ªæ•°ç›¸ä¹˜</span><br><span class="line">  /// @param x ç¬¬ä¸€ä¸ª uint</span><br><span class="line">  /// @param y  ç¬¬äºŒä¸ª uint</span><br><span class="line">  /// @return z  (x * y) çš„ç»“æœ</span><br><span class="line">  /// @dev ç°åœ¨è¿™ä¸ªæ–¹æ³•ä¸æ£€æŸ¥æº¢å‡º</span><br><span class="line">  function multiply(uint x, uint y) returns (uint z) &#123;</span><br><span class="line">    // è¿™åªæ˜¯ä¸ªæ™®é€šçš„æ³¨é‡Šï¼Œä¸ä¼šè¢« natspec è§£é‡Š</span><br><span class="line">    z = x * y;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>@title</code>ï¼ˆæ ‡é¢˜ï¼‰ å’Œ <code>@author</code> ï¼ˆä½œè€…ï¼‰å¾ˆç›´æ¥äº†.</p><p><code>@notice</code> ï¼ˆé¡»çŸ¥ï¼‰å‘ <strong>ç”¨æˆ·</strong> è§£é‡Šè¿™ä¸ªæ–¹æ³•æˆ–è€…åˆçº¦æ˜¯åšä»€ä¹ˆçš„ã€‚ <code>@dev</code> ï¼ˆå¼€å‘è€…ï¼‰ æ˜¯å‘å¼€å‘è€…è§£é‡Šæ›´å¤šçš„ç»†èŠ‚ã€‚</p><p><code>@param</code> ï¼ˆå‚æ•°ï¼‰å’Œ <code>@return</code> ï¼ˆè¿”å›ï¼‰ ç”¨æ¥æè¿°è¿™ä¸ªæ–¹æ³•éœ€è¦ä¼ å…¥ä»€ä¹ˆå‚æ•°ä»¥åŠè¿”å›ä»€ä¹ˆå€¼ã€‚</p><p>æ³¨æ„ä½ å¹¶ä¸éœ€è¦æ¯æ¬¡éƒ½ç”¨ä¸Šæ‰€æœ‰çš„æ ‡ç­¾ï¼Œå®ƒä»¬éƒ½æ˜¯å¯é€‰çš„ã€‚ä¸è¿‡æœ€å°‘ï¼Œå†™ä¸‹ä¸€ä¸ª <code>@dev</code> æ³¨é‡Šæ¥è§£é‡Šæ¯ä¸ªæ–¹æ³•æ˜¯åšä»€ä¹ˆçš„ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -11"><a href="#å®æˆ˜æ¼”ä¹ -11" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>å¦‚æœä½ è¿˜æ²¡æ³¨æ„åˆ°ï¼šCryptoZombies çš„ç­”æ¡ˆæ£€æŸ¥å™¨åœ¨å·¥ä½œçš„æ—¶å€™å°†å¿½ç•¥æ‰€æœ‰çš„æ³¨é‡Šã€‚æ‰€ä»¥è¿™ä¸€ç« æˆ‘ä»¬å…¶å®æ— æ³•æ£€æŸ¥ä½ çš„ natspec æ³¨é‡Šäº†ã€‚å…¨é ä½ è‡ªå·±å’¯ã€‚</p><p>è¯è¯´å›æ¥ï¼Œåˆ°ç°åœ¨ä½ åº”è¯¥å·²ç»æ˜¯ä¸€ä¸ª Solidity å°èƒ½æ‰‹äº†ã€‚æˆ‘ä»¬å°±å‡å®šä½ å·²ç»å­¦ä¼šè¿™äº›äº†ã€‚</p><p>å¤§èƒ†å»åšäº›å°è¯•æŠŠï¼Œç»™ <code>ZombieOwnership</code> åŠ ä¸Šä¸€äº› natspec æ ‡ç­¾:</p><ol><li><code>@title</code> â€” ä¾‹å¦‚ï¼šä¸€ä¸ªç®¡ç†è½¬ç§»åƒµå°¸æ‰€æœ‰æƒçš„åˆçº¦</li><li><code>@author</code> â€” ä½ çš„åå­—</li><li><code>@dev</code> â€” ä¾‹å¦‚ï¼šç¬¦åˆ OpenZeppelin å¯¹ ERC721 æ ‡å‡†è‰æ¡ˆçš„å®ç°</li></ol><h1 id="æ”¾åœ¨ä¸€èµ·"><a href="#æ”¾åœ¨ä¸€èµ·" class="headerlink" title="æ”¾åœ¨ä¸€èµ·"></a>æ”¾åœ¨ä¸€èµ·</h1><p>æ­å–œä½ ï¼è¿™äº›å°±æ˜¯ç¬¬äº”è¯¾çš„å…¨éƒ¨å•¦ã€‚</p><p>ä½œä¸ºå¥–èµï¼Œæˆ‘ä»¬é€ç»™ä½ äº†ä¸€ä¸ª10çº§åƒµå°¸ï¼š<strong>H4XF13LD MORRIS ğŸ’¯ğŸ’¯ğŸ˜ğŸ’¯ğŸ’¯</strong> ï¼</p><p>ï¼ˆå¤©å•Šï¼Œä¼ å¥‡çš„<strong>H4XF13LD MORRIS ğŸ’¯ğŸ’¯ğŸ˜ğŸ’¯ğŸ’¯</strong> åƒµå°¸ï¼ï¼‰</p><p>è¿™ä¸‹ä½ çš„åƒµå°¸å¤§å†›æœ‰4ä¸ªåƒµå°¸å•¦ã€‚</p><p>åœ¨ä½ ç»§ç»­å‰ï¼Œä½ å¯ä»¥ç‚¹å‡»æ¯ä¸ªåƒµå°¸æ¥ç»™å®ƒä»¬èµ·ä¸€ä¸ªæ–°åå­—ï¼Œ ï¼ˆæ³¨ï¼š <strong>H4XF13LD MORRIS ğŸ’¯ğŸ’¯ğŸ˜ğŸ’¯ğŸ’¯</strong> è¿™ä¸ªæ¢—æ¥è‡ªäºä¸€ä¸ªåœ¨2000å¹´å·¦å³æµè¡Œçš„å¤è€æ¸¸æˆï¼Œæˆ‘ä»¬çš„å¼€å‘è€…è§‰å¾—å®ƒå¾ˆé…·ï¼Œä½ ä¹Ÿå¯ä»¥ç»™å®ƒèµ·ä¸€ä¸ªä½ è§‰å¾—å¾ˆé…·çš„åå­—ï¼Œæ¯”å¦‚â€œéš”å£è€ç‹â€æˆ–è€…â€œç»¿å¸½åƒµå°¸â€ğŸ˜ï¼‰ã€‚</p><h2 id="æ€»ç»“ä¸€ä¸‹"><a href="#æ€»ç»“ä¸€ä¸‹" class="headerlink" title="æ€»ç»“ä¸€ä¸‹"></a>æ€»ç»“ä¸€ä¸‹</h2><p>è¿™èŠ‚è¯¾é‡Œé¢æˆ‘ä»¬å­¦åˆ°äº†</p><ul><li>ä»£å¸, ERC721 æ ‡å‡†ï¼Œä»¥åŠå¯äº¤æ˜“çš„ç‰©ä»¶/åƒµå°¸</li><li>åº“ä»¥åŠå¦‚ä½•ä½¿ç”¨åº“</li><li>å¦‚ä½•åˆ©ç”¨ SafeMath æ¥é˜²æ­¢æº¢å‡ºå’Œä¸‹æº¢</li><li>ä»£ç æ³¨é‡Šå’Œ natspec æ ‡å‡†</li></ul><p>è¿™èŠ‚æ•™ç¨‹å®Œæˆäº†æˆ‘ä»¬æ¸¸æˆçš„ Solidity ä»£ç ï¼ˆä»…é’ˆå¯¹å½“ä¸‹æ¥è¯´ï¼Œæœªæ¥çš„è¯¾ç¨‹æˆ‘ä»¬ä¹Ÿè®¸ä¼šåŠ å…¥æ›´å¤šè¿›å»ï¼‰ã€‚</p><p>åœ¨æ¥ä¸‹æ¥çš„ä¸¤èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•å°†æ¸¸æˆéƒ¨ç½²åˆ°ä»¥å¤ªåŠä»¥åŠå’Œ <strong><em>web3.js\</em></strong> äº¤äº’ ï¼ˆè¿™æ ·ä½ å°±èƒ½ä¸ºä½ çš„ DApp æ‰“é€ ä¸€ä¸ªç•Œé¢äº† ï¼‰ã€‚</p><p>ç»§ç»­ç©å„¿æˆ–è€…é‡å‘½åä½ çš„åƒµå°¸ï¼Œç„¶åå°±å¯ä»¥ç‚¹å‡»ä¸‹ä¸€ç« æ¥ç»“æŸæœ¬èŠ‚æ•™ç¨‹äº†ã€‚</p><p><img src="https://i.loli.net/2020/06/29/OwCBJ4kfo8W9RpM.png" alt="image-20200629232202703"></p><h1 id="ç¬¬äº”è¯¾æ‰“å¡"><a href="#ç¬¬äº”è¯¾æ‰“å¡" class="headerlink" title="ç¬¬äº”è¯¾æ‰“å¡"></a>ç¬¬äº”è¯¾æ‰“å¡</h1><p><img src="https://i.loli.net/2020/06/29/Rt1SieE7unND4zc.png" alt="image-20200629233354077"></p><p><a href="https://share.cryptozombies.io/zh/lesson/5/share/H4XF13LD_MORRIS_%F0%9F%92%AF%F0%9F%92%AF%F0%9F%98%8E%F0%9F%92%AF%F0%9F%92%AF" target="_blank" rel="noopener">æˆ‘çš„åƒµå°¸å¤§å†›5</a></p>]]></content>
      
      
      <categories>
          
          <category> loom network </category>
          
      </categories>
      
      
        <tags>
            
            <tag> solidity </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åƒµå°¸ä½œæˆ˜ç³»ç»Ÿ</title>
      <link href="/2020/06/27/%E5%83%B5%E5%B0%B8%E4%BD%9C%E6%88%98%E7%B3%BB%E7%BB%9F/"/>
      <url>/2020/06/27/%E5%83%B5%E5%B0%B8%E4%BD%9C%E6%88%98%E7%B3%BB%E7%BB%9F/</url>
      
        <content type="html"><![CDATA[<h1 id="å¯æ”¯ä»˜"><a href="#å¯æ”¯ä»˜" class="headerlink" title="å¯æ”¯ä»˜"></a>å¯æ”¯ä»˜</h1><p>æˆªè‡³ç›®å‰ï¼Œæˆ‘ä»¬åªæ¥è§¦åˆ°å¾ˆå°‘çš„ <strong><em>å‡½æ•°ä¿®é¥°ç¬¦\</em></strong>ã€‚ è¦è®°ä½æ‰€æœ‰çš„ä¸œè¥¿å¾ˆéš¾ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥ä¸ªæ¦‚è§ˆï¼š</p><ol><li>æˆ‘ä»¬æœ‰å†³å®šå‡½æ•°ä½•æ—¶å’Œè¢«è°è°ƒç”¨çš„å¯è§æ€§ä¿®é¥°ç¬¦: <code>private</code> æ„å‘³ç€å®ƒåªèƒ½è¢«åˆçº¦å†…éƒ¨è°ƒç”¨ï¼› <code>internal</code> å°±åƒ <code>private</code> ä½†æ˜¯ä¹Ÿèƒ½è¢«ç»§æ‰¿çš„åˆçº¦è°ƒç”¨ï¼› <code>external</code> åªèƒ½ä»åˆçº¦å¤–éƒ¨è°ƒç”¨ï¼›æœ€å <code>public</code> å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è°ƒç”¨ï¼Œä¸ç®¡æ˜¯å†…éƒ¨è¿˜æ˜¯å¤–éƒ¨ã€‚</li><li>æˆ‘ä»¬ä¹Ÿæœ‰çŠ¶æ€ä¿®é¥°ç¬¦ï¼Œ å‘Šè¯‰æˆ‘ä»¬å‡½æ•°å¦‚ä½•å’ŒåŒºå—é“¾äº¤äº’: <code>view</code> å‘Šè¯‰æˆ‘ä»¬è¿è¡Œè¿™ä¸ªå‡½æ•°ä¸ä¼šæ›´æ”¹å’Œä¿å­˜ä»»ä½•æ•°æ®ï¼› <code>pure</code> å‘Šè¯‰æˆ‘ä»¬è¿™ä¸ªå‡½æ•°ä¸ä½†ä¸ä¼šå¾€åŒºå—é“¾å†™æ•°æ®ï¼Œå®ƒç”šè‡³ä¸ä»åŒºå—é“¾è¯»å–æ•°æ®ã€‚è¿™ä¸¤ç§åœ¨è¢«ä»åˆçº¦å¤–éƒ¨è°ƒç”¨çš„æ—¶å€™éƒ½ä¸èŠ±è´¹ä»»ä½•gasï¼ˆä½†æ˜¯å®ƒä»¬åœ¨è¢«å†…éƒ¨å…¶ä»–å‡½æ•°è°ƒç”¨çš„æ—¶å€™å°†ä¼šè€—è´¹gasï¼‰ã€‚</li><li>ç„¶åæˆ‘ä»¬æœ‰äº†è‡ªå®šä¹‰çš„ <code>modifiers</code>ï¼Œä¾‹å¦‚åœ¨ç¬¬ä¸‰è¯¾å­¦ä¹ çš„: <code>onlyOwner</code> å’Œ <code>aboveLevel</code>ã€‚ å¯¹äºè¿™äº›ä¿®é¥°ç¬¦æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰å…¶å¯¹å‡½æ•°çš„çº¦æŸé€»è¾‘ã€‚</li></ol><a id="more"></a><p>è¿™äº›ä¿®é¥°ç¬¦å¯ä»¥åŒæ—¶ä½œç”¨äºä¸€ä¸ªå‡½æ•°å®šä¹‰ä¸Šï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function test() external view onlyOwner anotherModifier &#123; /* ... */ &#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸€ç« ï¼Œæˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸ªæ–°çš„ä¿®é¥°ç¬¦ <code>payable</code>.</p><h2 id="payable-ä¿®é¥°ç¬¦"><a href="#payable-ä¿®é¥°ç¬¦" class="headerlink" title="payable ä¿®é¥°ç¬¦"></a><code>payable</code> ä¿®é¥°ç¬¦</h2><p><code>payable</code> æ–¹æ³•æ˜¯è®© Solidity å’Œä»¥å¤ªåŠå˜å¾—å¦‚æ­¤é…·çš„ä¸€éƒ¨åˆ† â€”â€” å®ƒä»¬æ˜¯ä¸€ç§å¯ä»¥æ¥æ”¶ä»¥å¤ªçš„ç‰¹æ®Šå‡½æ•°ã€‚</p><p>å…ˆæ”¾ä¸€ä¸‹ã€‚å½“ä½ åœ¨è°ƒç”¨ä¸€ä¸ªæ™®é€šç½‘ç«™æœåŠ¡å™¨ä¸Šçš„APIå‡½æ•°çš„æ—¶å€™ï¼Œä½ æ— æ³•ç”¨ä½ çš„å‡½æ•°ä¼ é€ç¾å…ƒâ€”â€”ä½ ä¹Ÿä¸èƒ½ä¼ é€æ¯”ç‰¹å¸ã€‚</p><p>ä½†æ˜¯åœ¨ä»¥å¤ªåŠä¸­ï¼Œ å› ä¸ºé’± (<em>ä»¥å¤ª</em>), æ•°æ® (<em>äº‹åŠ¡è´Ÿè½½</em>)ï¼Œ ä»¥åŠåˆçº¦ä»£ç æœ¬èº«éƒ½å­˜åœ¨äºä»¥å¤ªåŠã€‚ä½ å¯ä»¥åœ¨åŒæ—¶è°ƒç”¨å‡½æ•° <strong>å¹¶</strong>ä»˜é’±ç»™å¦å¤–ä¸€ä¸ªåˆçº¦ã€‚</p><p>è¿™å°±å…è®¸å‡ºç°å¾ˆå¤šæœ‰è¶£çš„é€»è¾‘ï¼Œ æ¯”å¦‚å‘ä¸€ä¸ªåˆçº¦è¦æ±‚æ”¯ä»˜ä¸€å®šçš„é’±æ¥è¿è¡Œä¸€ä¸ªå‡½æ•°ã€‚</p><h2 id="æ¥çœ‹ä¸ªä¾‹å­"><a href="#æ¥çœ‹ä¸ªä¾‹å­" class="headerlink" title="æ¥çœ‹ä¸ªä¾‹å­"></a>æ¥çœ‹ä¸ªä¾‹å­</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">contract OnlineStore &#123;</span><br><span class="line">  function buySomething() external payable &#123;</span><br><span class="line">    // æ£€æŸ¥ä»¥ç¡®å®š0.001ä»¥å¤ªå‘é€å‡ºå»æ¥è¿è¡Œå‡½æ•°:</span><br><span class="line">    require(msg.value == 0.001 ether);</span><br><span class="line">    // å¦‚æœä¸ºçœŸï¼Œä¸€äº›ç”¨æ¥å‘å‡½æ•°è°ƒç”¨è€…å‘é€æ•°å­—å†…å®¹çš„é€»è¾‘</span><br><span class="line">    transferThing(msg.sender);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œï¼Œ<code>msg.value</code> æ˜¯ä¸€ç§å¯ä»¥æŸ¥çœ‹å‘åˆçº¦å‘é€äº†å¤šå°‘ä»¥å¤ªçš„æ–¹æ³•ï¼Œå¦å¤– <code>ether</code> æ˜¯ä¸€ä¸ªå…§å»ºå•å…ƒã€‚</p><p>è¿™é‡Œå‘ç”Ÿçš„äº‹æ˜¯ï¼Œä¸€äº›äººä¼šä» web3.js è°ƒç”¨è¿™ä¸ªå‡½æ•° (ä»DAppçš„å‰ç«¯)ï¼Œ åƒè¿™æ · :</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// å‡è®¾ `OnlineStore` åœ¨ä»¥å¤ªåŠä¸ŠæŒ‡å‘ä½ çš„åˆçº¦:</span><br><span class="line">OnlineStore.buySomething().send(from: web3.eth.defaultAccount, value: web3.utils.toWei(0.001))</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™ä¸ª <code>value</code> å­—æ®µï¼Œ JavaScript è°ƒç”¨æ¥æŒ‡å®šå‘é€å¤šå°‘(0.001)<code>ä»¥å¤ª</code>ã€‚å¦‚æœæŠŠäº‹åŠ¡æƒ³è±¡æˆä¸€ä¸ªä¿¡å°ï¼Œä½ å‘é€åˆ°å‡½æ•°çš„å‚æ•°å°±æ˜¯ä¿¡çš„å†…å®¹ã€‚ æ·»åŠ ä¸€ä¸ª <code>value</code> å¾ˆåƒåœ¨ä¿¡å°é‡Œé¢æ”¾é’± â€”â€” ä¿¡ä»¶å†…å®¹å’Œé’±åŒæ—¶å‘é€ç»™äº†æ¥æ”¶è€…ã€‚</p><blockquote><p>æ³¨æ„ï¼š å¦‚æœä¸€ä¸ªå‡½æ•°æ²¡æ ‡è®°ä¸º<code>payable</code>ï¼Œ è€Œä½ å°è¯•åˆ©ç”¨ä¸Šé¢çš„æ–¹æ³•å‘é€ä»¥å¤ªï¼Œå‡½æ•°å°†æ‹’ç»ä½ çš„äº‹åŠ¡ã€‚</p></blockquote><h2 id="å®æˆ˜æ¼”ä¹ "><a href="#å®æˆ˜æ¼”ä¹ " class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æˆ‘ä»¬æ¥åœ¨åƒµå°¸æ¸¸æˆé‡Œé¢åˆ›å»ºä¸€ä¸ª<code>payable</code> å‡½æ•°ã€‚</p><p>å‡å®šåœ¨æˆ‘ä»¬çš„æ¸¸æˆä¸­ï¼Œç©å®¶å¯ä»¥é€šè¿‡æ”¯ä»˜ETHæ¥å‡çº§ä»–ä»¬çš„åƒµå°¸ã€‚ETHå°†å­˜å‚¨åœ¨ä½ æ‹¥æœ‰çš„åˆçº¦ä¸­ â€”â€” ä¸€ä¸ªç®€å•æ˜äº†çš„ä¾‹å­ï¼Œå‘ä½ å±•ç¤ºä½ å¯ä»¥é€šè¿‡è‡ªå·±çš„æ¸¸æˆèµšé’±ã€‚</p><ol><li>å®šä¹‰ä¸€ä¸ª <code>uint</code> ï¼Œå‘½åä¸º <code>levelUpFee</code>, å°†å€¼è®¾å®šä¸º <code>0.001 ether</code>ã€‚</li><li>å®šä¹‰ä¸€ä¸ªåä¸º <code>levelUp</code> çš„å‡½æ•°ã€‚ å®ƒå°†æ¥æ”¶ä¸€ä¸ª <code>uint</code> å‚æ•° <code>_zombieId</code>ã€‚ å‡½æ•°åº”è¯¥ä¿®é¥°ä¸º <code>external</code> ä»¥åŠ <code>payable</code>ã€‚</li><li>è¿™ä¸ªå‡½æ•°é¦–å…ˆåº”è¯¥ <code>require</code> ç¡®ä¿ <code>msg.value</code> ç­‰äº <code>levelUpFee</code>ã€‚</li><li>ç„¶åå®ƒåº”è¯¥å¢åŠ åƒµå°¸çš„ <code>level</code>: <code>zombies[_zombieId].level++</code>ã€‚</li></ol><h2 id="åˆçº¦ä¿®æ”¹"><a href="#åˆçº¦ä¿®æ”¹" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><p>zombiehelper.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefeeding.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieHelper is ZombieFeeding &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1. åœ¨è¿™é‡Œå®šä¹‰ levelUpFee</span></span><br><span class="line">  uint levelUpFee = <span class="number">0.001</span> ether;</span><br><span class="line"></span><br><span class="line">  modifier aboveLevel(uint _level, uint _zombieId) &#123;</span><br><span class="line">    <span class="built_in">require</span>(zombies[_zombieId].level &gt;= _level);</span><br><span class="line">    _;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. åœ¨è¿™é‡Œæ’å…¥ levelUp å‡½æ•° </span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">levelUp</span>(<span class="params">uint _zombieId</span>) <span class="title">external</span> <span class="title">payable</span> </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.value == levelUpFee);</span><br><span class="line">    zombies[_zombieId].level++;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">changeName</span>(<span class="params">uint _zombieId, string _newName</span>) <span class="title">external</span> <span class="title">aboveLevel</span>(<span class="params"><span class="number">2</span>, _zombieId</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    zombies[_zombieId].name = _newName;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">changeDna</span>(<span class="params">uint _zombieId, uint _newDna</span>) <span class="title">external</span> <span class="title">aboveLevel</span>(<span class="params"><span class="number">20</span>, _zombieId</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    zombies[_zombieId].dna = _newDna;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getZombiesByOwner</span>(<span class="params">address _owner</span>) <span class="title">external</span> <span class="title">view</span> <span class="title">returns</span>(<span class="params">uint[]</span>) </span>&#123;</span><br><span class="line">    uint[] memory result = <span class="keyword">new</span> uint[](ownerZombieCount[_owner]);</span><br><span class="line">    uint counter = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (uint i = <span class="number">0</span>; i &lt; zombies.length; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (zombieToOwner[i] == _owner) &#123;</span><br><span class="line">        result[counter] = i;</span><br><span class="line">        counter++;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æç°"><a href="#æç°" class="headerlink" title="æç°"></a>æç°</h1><p>åœ¨ä¸Šä¸€ç« ï¼Œæˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•å‘åˆçº¦å‘é€ä»¥å¤ªï¼Œé‚£ä¹ˆåœ¨å‘é€ä¹‹åä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ</p><p>åœ¨ä½ å‘é€ä»¥å¤ªä¹‹åï¼Œå®ƒå°†è¢«å­˜å‚¨è¿›ä»¥åˆçº¦çš„ä»¥å¤ªåŠè´¦æˆ·ä¸­ï¼Œ å¹¶å†»ç»“åœ¨å“ªé‡Œ â€”â€” é™¤éä½ æ·»åŠ ä¸€ä¸ªå‡½æ•°æ¥ä»åˆçº¦ä¸­æŠŠä»¥å¤ªæç°ã€‚</p><p>ä½ å¯ä»¥å†™ä¸€ä¸ªå‡½æ•°æ¥ä»åˆçº¦ä¸­æç°ä»¥å¤ªï¼Œç±»ä¼¼è¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">contract GetPaid is Ownable &#123;</span><br><span class="line">  function withdraw() external onlyOwner &#123;</span><br><span class="line">    owner.transfer(this.balance);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„æˆ‘ä»¬ä½¿ç”¨ <code>Ownable</code> åˆçº¦ä¸­çš„ <code>owner</code> å’Œ <code>onlyOwner</code>ï¼Œå‡å®šå®ƒå·²ç»è¢«å¼•å…¥äº†ã€‚</p><p>ä½ å¯ä»¥é€šè¿‡ <code>transfer</code> å‡½æ•°å‘ä¸€ä¸ªåœ°å€å‘é€ä»¥å¤ªï¼Œ ç„¶å <code>this.balance</code> å°†è¿”å›å½“å‰åˆçº¦å­˜å‚¨äº†å¤šå°‘ä»¥å¤ªã€‚ æ‰€ä»¥å¦‚æœ100ä¸ªç”¨æˆ·æ¯äººå‘æˆ‘ä»¬æ”¯ä»˜1ä»¥å¤ªï¼Œ <code>this.balance</code> å°†æ˜¯100ä»¥å¤ªã€‚</p><p>ä½ å¯ä»¥é€šè¿‡ <code>transfer</code> å‘ä»»ä½•ä»¥å¤ªåŠåœ°å€ä»˜é’±ã€‚ æ¯”å¦‚ï¼Œä½ å¯ä»¥æœ‰ä¸€ä¸ªå‡½æ•°åœ¨ <code>msg.sender</code> è¶…é¢ä»˜æ¬¾çš„æ—¶å€™ç»™ä»–ä»¬é€€é’±ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">uint itemFee = 0.001 ether;</span><br><span class="line">msg.sender.transfer(msg.value - itemFee);</span><br></pre></td></tr></table></figure><p>æˆ–è€…åœ¨ä¸€ä¸ªæœ‰å–å®¶å’Œå–å®¶çš„åˆçº¦ä¸­ï¼Œ ä½ å¯ä»¥æŠŠå–å®¶çš„åœ°å€å­˜å‚¨èµ·æ¥ï¼Œ å½“æœ‰äººä¹°äº†å®ƒçš„ä¸œè¥¿çš„æ—¶å€™ï¼ŒæŠŠä¹°å®¶æ”¯ä»˜çš„é’±å‘é€ç»™å®ƒ <code>seller.transfer(msg.value)</code>ã€‚</p><p>æœ‰å¾ˆå¤šä¾‹å­æ¥å±•ç¤ºä»€ä¹ˆè®©ä»¥å¤ªåŠç¼–ç¨‹å¦‚æ­¤ä¹‹é…· â€”â€” ä½ å¯ä»¥æ‹¥æœ‰ä¸€ä¸ªä¸è¢«ä»»ä½•äººæ§åˆ¶çš„å»ä¸­å¿ƒåŒ–å¸‚åœºã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -1"><a href="#å®æˆ˜æ¼”ä¹ -1" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><ol><li><p>åœ¨æˆ‘ä»¬çš„åˆçº¦é‡Œåˆ›å»ºä¸€ä¸ª <code>withdraw</code> å‡½æ•°ï¼Œå®ƒåº”è¯¥å‡ ä¹å’Œä¸Šé¢çš„<code>GetPaid</code>ä¸€æ ·ã€‚</p></li><li><p>ä»¥å¤ªçš„ä»·æ ¼åœ¨è¿‡å»å‡ å¹´å†…ç¿»äº†åå‡ å€ï¼Œåœ¨æˆ‘ä»¬å†™è¿™ä¸ªæ•™ç¨‹çš„æ—¶å€™ 0.01 ä»¥å¤ªç›¸å½“äº1ç¾å…ƒï¼Œå¦‚æœå®ƒå†ç¿»åå€ 0.001 ä»¥å¤ªå°†æ˜¯10ç¾å…ƒï¼Œé‚£æˆ‘ä»¬çš„æ¸¸æˆå°±å¤ªè´µäº†ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬åº”è¯¥å†åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œå…è®¸æˆ‘ä»¬ä»¥åˆçº¦æ‹¥æœ‰è€…çš„èº«ä»½æ¥è®¾ç½® <code>levelUpFee</code>ã€‚</p><p>a. åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œåä¸º <code>setLevelUpFee</code>ï¼Œ å…¶æ¥æ”¶ä¸€ä¸ªå‚æ•° <code>uint _fee</code>ï¼Œæ˜¯ <code>external</code> å¹¶ä½¿ç”¨ä¿®é¥°ç¬¦ <code>onlyOwner</code>ã€‚</p><p>b. è¿™ä¸ªå‡½æ•°åº”è¯¥è®¾ç½® <code>levelUpFee</code> ç­‰äº <code>_fee</code>ã€‚</p></li></ol><h2 id="åˆçº¦å®Œå–„"><a href="#åˆçº¦å®Œå–„" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>zombiehelper.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefeeding.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieHelper is ZombieFeeding &#123;</span><br><span class="line"></span><br><span class="line">  uint levelUpFee = <span class="number">0.001</span> ether;</span><br><span class="line"></span><br><span class="line">  modifier aboveLevel(uint _level, uint _zombieId) &#123;</span><br><span class="line">    <span class="built_in">require</span>(zombies[_zombieId].level &gt;= _level);</span><br><span class="line">    _;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1. åœ¨è¿™é‡Œåˆ›å»º withdraw å‡½æ•°</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">withdraw</span>(<span class="params"></span>) <span class="title">external</span> <span class="title">onlyOwner</span> </span>&#123;</span><br><span class="line">    owner.transfer(<span class="keyword">this</span>.balance);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. åœ¨è¿™é‡Œåˆ›å»º setLevelUpFee å‡½æ•° </span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">setLevelUpFee</span>(<span class="params">uint _fee</span>) <span class="title">external</span> <span class="title">onlyOwner</span></span>&#123;</span><br><span class="line">    levelUpFee = _fee;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">levelUp</span>(<span class="params">uint _zombieId</span>) <span class="title">external</span> <span class="title">payable</span> </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.value == levelUpFee);</span><br><span class="line">    zombies[_zombieId].level++;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">changeName</span>(<span class="params">uint _zombieId, string _newName</span>) <span class="title">external</span> <span class="title">aboveLevel</span>(<span class="params"><span class="number">2</span>, _zombieId</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    zombies[_zombieId].name = _newName;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">changeDna</span>(<span class="params">uint _zombieId, uint _newDna</span>) <span class="title">external</span> <span class="title">aboveLevel</span>(<span class="params"><span class="number">20</span>, _zombieId</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    zombies[_zombieId].dna = _newDna;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getZombiesByOwner</span>(<span class="params">address _owner</span>) <span class="title">external</span> <span class="title">view</span> <span class="title">returns</span>(<span class="params">uint[]</span>) </span>&#123;</span><br><span class="line">    uint[] memory result = <span class="keyword">new</span> uint[](ownerZombieCount[_owner]);</span><br><span class="line">    uint counter = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (uint i = <span class="number">0</span>; i &lt; zombies.length; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (zombieToOwner[i] == _owner) &#123;</span><br><span class="line">        result[counter] = i;</span><br><span class="line">        counter++;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åƒµå°¸æˆ˜æ–—"><a href="#åƒµå°¸æˆ˜æ–—" class="headerlink" title="åƒµå°¸æˆ˜æ–—"></a>åƒµå°¸æˆ˜æ–—</h1><p>åœ¨æˆ‘ä»¬å­¦ä¹ äº†å¯æ”¯ä»˜å‡½æ•°å’Œåˆçº¦ä½™é¢ä¹‹åï¼Œæ˜¯æ—¶å€™ä¸ºåƒµå°¸æˆ˜æ–—æ·»åŠ åŠŸèƒ½äº†ã€‚</p><p>éµå¾ªä¸Šä¸€ç« çš„æ ¼å¼ï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ”»å‡»åŠŸèƒ½åˆçº¦ï¼Œå¹¶å°†ä»£ç æ”¾è¿›æ–°çš„æ–‡ä»¶ä¸­ï¼Œå¼•å…¥ä¸Šä¸€ä¸ªåˆçº¦ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -2"><a href="#å®æˆ˜æ¼”ä¹ -2" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>å†æ¥æ–°å»ºä¸€ä¸ªåˆçº¦å§ã€‚ç†Ÿèƒ½ç”Ÿå·§ã€‚</p><p>å¦‚æœä½ ä¸è®°å¾—æ€ä¹ˆåšäº†, æŸ¥çœ‹ä¸€ä¸‹ <code>zombiehelper.sol</code> â€” ä¸è¿‡æœ€å¥½å…ˆè¯•ç€åšä¸€ä¸‹ï¼Œæ£€æŸ¥ä¸€ä¸‹ä½ æŒæ¡çš„æƒ…å†µã€‚</p><ol><li>åœ¨æ–‡ä»¶å¼€å¤´å®šä¹‰ Solidity çš„ç‰ˆæœ¬ <code>^0.4.19</code>.</li><li><code>import</code> è‡ª <code>zombiehelper.sol</code> .</li><li>å£°æ˜ä¸€ä¸ªæ–°çš„ <code>contract</code>ï¼Œå‘½åä¸º <code>ZombieBattle</code>ï¼Œ ç»§æ‰¿è‡ª<code>ZombieHelper</code>ã€‚å‡½æ•°ä½“å°±å…ˆç©ºç€å§ã€‚</li></ol><h2 id="åˆçº¦åˆ›å»º"><a href="#åˆçº¦åˆ›å»º" class="headerlink" title="åˆçº¦åˆ›å»º"></a>åˆçº¦åˆ›å»º</h2><p>Zombieattack.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiehelper.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieBattle is ZombieHelper &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="éšæœºæ•°"><a href="#éšæœºæ•°" class="headerlink" title="éšæœºæ•°"></a>éšæœºæ•°</h1><p>ä½ å¤ªæ£’äº†ï¼æ¥ä¸‹æ¥æˆ‘ä»¬æ¢³ç†ä¸€ä¸‹æˆ˜æ–—é€»è¾‘ã€‚</p><p>ä¼˜ç§€çš„æ¸¸æˆéƒ½éœ€è¦ä¸€äº›éšæœºå…ƒç´ ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨ Solidity é‡Œå¦‚ä½•ç”Ÿæˆéšæœºæ•°å‘¢ï¼Ÿ</p><p>çœŸæ­£çš„ç­”æ¡ˆæ˜¯ä½ ä¸èƒ½ï¼Œæˆ–è€…æœ€èµ·ç ï¼Œä½ æ— æ³•å®‰å…¨åœ°åšåˆ°è¿™ä¸€ç‚¹ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹çœ‹ä¸ºä»€ä¹ˆ</p><h2 id="ç”¨-keccak256-æ¥åˆ¶é€ éšæœºæ•°ã€‚"><a href="#ç”¨-keccak256-æ¥åˆ¶é€ éšæœºæ•°ã€‚" class="headerlink" title="ç”¨ keccak256 æ¥åˆ¶é€ éšæœºæ•°ã€‚"></a>ç”¨ <code>keccak256</code> æ¥åˆ¶é€ éšæœºæ•°ã€‚</h2><p>Solidity ä¸­æœ€å¥½çš„éšæœºæ•°ç”Ÿæˆå™¨æ˜¯ <code>keccak256</code> å“ˆå¸Œå‡½æ•°.</p><p>æˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥ç”Ÿæˆä¸€äº›éšæœºæ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// ç”Ÿæˆä¸€ä¸ª0åˆ°100çš„éšæœºæ•°:</span><br><span class="line">uint randNonce = 0;</span><br><span class="line">uint random = uint(keccak256(now, msg.sender, randNonce)) % 100;</span><br><span class="line">randNonce++;</span><br><span class="line">uint random2 = uint(keccak256(now, msg.sender, randNonce)) % 100;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•é¦–å…ˆæ‹¿åˆ° <code>now</code> çš„æ—¶é—´æˆ³ã€ <code>msg.sender</code>ã€ ä»¥åŠä¸€ä¸ªè‡ªå¢æ•° <code>nonce</code> ï¼ˆä¸€ä¸ªä»…ä¼šè¢«ä½¿ç”¨ä¸€æ¬¡çš„æ•°ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ä¼šå¯¹ç›¸åŒçš„è¾“å…¥å€¼è°ƒç”¨ä¸€æ¬¡ä»¥ä¸Šå“ˆå¸Œå‡½æ•°äº†ï¼‰ã€‚</p><p>ç„¶ååˆ©ç”¨ <code>keccak</code> æŠŠè¾“å…¥çš„å€¼è½¬å˜ä¸ºä¸€ä¸ªå“ˆå¸Œå€¼, å†å°†å“ˆå¸Œå€¼è½¬æ¢ä¸º <code>uint</code>, ç„¶ååˆ©ç”¨ <code>% 100</code> æ¥å–æœ€åä¸¤ä½, å°±ç”Ÿæˆäº†ä¸€ä¸ª0åˆ°100ä¹‹é—´éšæœºæ•°äº†ã€‚</p><h3 id="è¿™ä¸ªæ–¹æ³•å¾ˆå®¹æ˜“è¢«ä¸è¯šå®çš„èŠ‚ç‚¹æ”»å‡»"><a href="#è¿™ä¸ªæ–¹æ³•å¾ˆå®¹æ˜“è¢«ä¸è¯šå®çš„èŠ‚ç‚¹æ”»å‡»" class="headerlink" title="è¿™ä¸ªæ–¹æ³•å¾ˆå®¹æ˜“è¢«ä¸è¯šå®çš„èŠ‚ç‚¹æ”»å‡»"></a>è¿™ä¸ªæ–¹æ³•å¾ˆå®¹æ˜“è¢«ä¸è¯šå®çš„èŠ‚ç‚¹æ”»å‡»</h3><p>åœ¨ä»¥å¤ªåŠä¸Š, å½“ä½ åœ¨å’Œä¸€ä¸ªåˆçº¦ä¸Šè°ƒç”¨å‡½æ•°çš„æ—¶å€™, ä½ ä¼šæŠŠå®ƒå¹¿æ’­ç»™ä¸€ä¸ªèŠ‚ç‚¹æˆ–è€…åœ¨ç½‘ç»œä¸Šçš„ <strong><em>transaction\</em></strong> èŠ‚ç‚¹ä»¬ã€‚ ç½‘ç»œä¸Šçš„èŠ‚ç‚¹å°†æ”¶é›†å¾ˆå¤šäº‹åŠ¡, è¯•ç€æˆä¸ºç¬¬ä¸€ä¸ªè§£å†³è®¡ç®—å¯†é›†å‹æ•°å­¦é—®é¢˜çš„äººï¼Œä½œä¸ºâ€œå·¥ä½œè¯æ˜â€ï¼Œç„¶åå°†â€œå·¥ä½œè¯æ˜â€(Proof of Work, PoW)å’Œäº‹åŠ¡ä¸€èµ·ä½œä¸ºä¸€ä¸ª <strong><em>block\</em></strong> å‘å¸ƒåœ¨ç½‘ç»œä¸Šã€‚</p><p>ä¸€æ—¦ä¸€ä¸ªèŠ‚ç‚¹è§£å†³äº†ä¸€ä¸ªPoW, å…¶ä»–èŠ‚ç‚¹å°±ä¼šåœæ­¢å°è¯•è§£å†³è¿™ä¸ª PoW, å¹¶éªŒè¯å…¶ä»–èŠ‚ç‚¹çš„äº‹åŠ¡åˆ—è¡¨æ˜¯æœ‰æ•ˆçš„ï¼Œç„¶åæ¥å—è¿™ä¸ªèŠ‚ç‚¹è½¬è€Œå°è¯•è§£å†³ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p><p><strong>è¿™å°±è®©æˆ‘ä»¬çš„éšæœºæ•°å‡½æ•°å˜å¾—å¯åˆ©ç”¨äº†</strong></p><p>æˆ‘ä»¬å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç¡¬å¸ç¿»è½¬åˆçº¦â€”â€”æ­£é¢ä½ èµ¢åŒå€é’±ï¼Œåé¢ä½ è¾“æ‰æ‰€æœ‰çš„é’±ã€‚å‡å¦‚å®ƒä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•æ¥å†³å®šæ˜¯æ­£é¢è¿˜æ˜¯åé¢ (<code>random &gt;= 50</code> ç®—æ­£é¢, <code>random &lt; 50</code> ç®—åé¢)ã€‚</p><p>å¦‚æœæˆ‘æ­£è¿è¡Œä¸€ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘å¯ä»¥ <strong>åªå¯¹æˆ‘è‡ªå·±çš„èŠ‚ç‚¹</strong> å‘å¸ƒä¸€ä¸ªäº‹åŠ¡ï¼Œä¸”ä¸åˆ†äº«å®ƒã€‚ æˆ‘å¯ä»¥è¿è¡Œç¡¬å¸ç¿»è½¬æ–¹æ³•æ¥å·çª¥æˆ‘çš„è¾“èµ¢ â€” å¦‚æœæˆ‘è¾“äº†ï¼Œæˆ‘å°±ä¸æŠŠè¿™ä¸ªäº‹åŠ¡åŒ…å«è¿›æˆ‘è¦è§£å†³çš„ä¸‹ä¸€ä¸ªåŒºå—ä¸­å»ã€‚æˆ‘å¯ä»¥ä¸€ç›´è¿è¡Œè¿™ä¸ªæ–¹æ³•ï¼Œç›´åˆ°æˆ‘èµ¢å¾—äº†ç¡¬å¸ç¿»è½¬å¹¶è§£å†³äº†ä¸‹ä¸€ä¸ªåŒºå—ï¼Œç„¶åè·åˆ©ã€‚</p><h2 id="æ‰€ä»¥æˆ‘ä»¬è¯¥å¦‚ä½•åœ¨ä»¥å¤ªåŠä¸Šå®‰å…¨åœ°ç”Ÿæˆéšæœºæ•°å‘¢"><a href="#æ‰€ä»¥æˆ‘ä»¬è¯¥å¦‚ä½•åœ¨ä»¥å¤ªåŠä¸Šå®‰å…¨åœ°ç”Ÿæˆéšæœºæ•°å‘¢" class="headerlink" title="æ‰€ä»¥æˆ‘ä»¬è¯¥å¦‚ä½•åœ¨ä»¥å¤ªåŠä¸Šå®‰å…¨åœ°ç”Ÿæˆéšæœºæ•°å‘¢"></a>æ‰€ä»¥æˆ‘ä»¬è¯¥å¦‚ä½•åœ¨ä»¥å¤ªåŠä¸Šå®‰å…¨åœ°ç”Ÿæˆéšæœºæ•°å‘¢</h2><p>å› ä¸ºåŒºå—é“¾çš„å…¨éƒ¨å†…å®¹å¯¹æ‰€æœ‰å‚ä¸è€…æ¥è¯´æ˜¯é€æ˜çš„ï¼Œ è¿™å°±è®©è¿™ä¸ªé—®é¢˜å˜å¾—å¾ˆéš¾ï¼Œå®ƒçš„è§£å†³æ–¹æ³•ä¸åœ¨æœ¬è¯¾ç¨‹è®¨è®ºèŒƒå›´ï¼Œä½ å¯ä»¥é˜…è¯» <a href="https://ethereum.stackexchange.com/questions/191/how-can-i-securely-generate-a-random-number-in-my-smart-contract" target="_blank" rel="noopener">è¿™ä¸ª StackOverflow ä¸Šçš„è®¨è®º</a> æ¥è·å¾—ä¸€äº›ä¸»æ„ã€‚ ä¸€ä¸ªæ–¹æ³•æ˜¯åˆ©ç”¨ <strong><em>oracle\</em></strong> æ¥è®¿é—®ä»¥å¤ªåŠåŒºå—é“¾ä¹‹å¤–çš„éšæœºæ•°å‡½æ•°ã€‚</p><p>å½“ç„¶ï¼Œ å› ä¸ºç½‘ç»œä¸Šæˆåƒä¸Šä¸‡çš„ä»¥å¤ªåŠèŠ‚ç‚¹éƒ½åœ¨ç«äº‰è§£å†³ä¸‹ä¸€ä¸ªåŒºå—ï¼Œæˆ‘èƒ½æˆåŠŸè§£å†³ä¸‹ä¸€ä¸ªåŒºå—çš„å‡ ç‡éå¸¸ä¹‹ä½ã€‚ è¿™å°†èŠ±è´¹æˆ‘ä»¬å·¨å¤§çš„è®¡ç®—èµ„æºæ¥å¼€å‘è¿™ä¸ªè·åˆ©æ–¹æ³• â€” ä½†æ˜¯å¦‚æœå¥–åŠ±å¼‚å¸¸åœ°é«˜(æ¯”å¦‚æˆ‘å¯ä»¥åœ¨ç¡¬å¸ç¿»è½¬å‡½æ•°ä¸­èµ¢å¾— 1ä¸ªäº¿)ï¼Œ é‚£å°±å¾ˆå€¼å¾—å»æ”»å‡»äº†ã€‚</p><p>æ‰€ä»¥å°½ç®¡è¿™ä¸ªæ–¹æ³•åœ¨ä»¥å¤ªåŠä¸Šä¸å®‰å…¨ï¼Œåœ¨å®é™…ä¸­ï¼Œé™¤éæˆ‘ä»¬çš„éšæœºå‡½æ•°æœ‰ä¸€å¤§ç¬”é’±åœ¨ä¸Šé¢ï¼Œä½ æ¸¸æˆçš„ç”¨æˆ·ä¸€èˆ¬æ˜¯æ²¡æœ‰è¶³å¤Ÿçš„èµ„æºå»æ”»å‡»çš„ã€‚</p><p>å› ä¸ºåœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬åªæ˜¯åœ¨ç¼–å†™ä¸€ä¸ªç®€å•çš„æ¸¸æˆæ¥åšæ¼”ç¤ºï¼Œä¹Ÿæ²¡æœ‰çœŸæ­£çš„é’±åœ¨é‡Œé¢ï¼Œæ‰€ä»¥æˆ‘ä»¬å†³å®šæ¥å—è¿™ä¸ªä¸è¶³ä¹‹å¤„ï¼Œä½¿ç”¨è¿™ä¸ªç®€å•çš„éšæœºæ•°ç”Ÿæˆå‡½æ•°ã€‚ä½†æ˜¯è¦è°¨è®°å®ƒæ˜¯ä¸å®‰å…¨çš„ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -3"><a href="#å®æˆ˜æ¼”ä¹ -3" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªéšæœºæ•°ç”Ÿæˆå‡½æ•°ï¼Œå¥½æ¥è®¡ç®—æˆ˜æ–—çš„ç»“æœã€‚è™½ç„¶è¿™ä¸ªå‡½æ•°ä¸€ç‚¹å„¿ä¹Ÿä¸å®‰å…¨ã€‚</p><ol><li>ç»™æˆ‘ä»¬åˆçº¦ä¸€ä¸ªåä¸º <code>randNonce</code> çš„ <code>uint</code>ï¼Œå°†å…¶å€¼è®¾ç½®ä¸º <code>0</code>ã€‚</li><li>å»ºç«‹ä¸€ä¸ªå‡½æ•°ï¼Œå‘½åä¸º <code>randMod</code> (random-modulus)ã€‚å®ƒå°†ä½œä¸º<code>internal</code> å‡½æ•°ï¼Œä¼ å…¥ä¸€ä¸ªåä¸º <code>_modulus</code>çš„ <code>uint</code>ï¼Œå¹¶ <code>returns</code> ä¸€ä¸ª <code>uint</code>ã€‚</li><li>è¿™ä¸ªå‡½æ•°é¦–å…ˆå°†ä¸º <code>randNonce</code>åŠ ä¸€ï¼Œ (ä½¿ç”¨ <code>randNonce++</code> è¯­å¥)ã€‚</li><li>æœ€åï¼Œå®ƒåº”è¯¥ (åœ¨ä¸€è¡Œä»£ç ä¸­) è®¡ç®— <code>now</code>, <code>msg.sender</code>, ä»¥åŠ <code>randNonce</code> çš„ <code>keccak256</code> å“ˆå¸Œå€¼å¹¶è½¬æ¢ä¸º <code>uint</code>â€”â€” æœ€å <code>return</code> <code>% _modulus</code> çš„å€¼ã€‚ ï¼ˆå¤©! å¬èµ·æ¥å¤ªæ‹—å£äº†ã€‚å¦‚æœä½ æœ‰ç‚¹ç†è§£ä¸è¿‡æ¥ï¼Œçœ‹ä¸€ä¸‹æˆ‘ä»¬ä¸Šé¢è®¡ç®—éšæœºæ•°çš„ä¾‹å­ï¼Œå®ƒä»¬çš„é€»è¾‘éå¸¸ç›¸ä¼¼ï¼‰</li></ol><h2 id="åˆçº¦ä¿®æ”¹-1"><a href="#åˆçº¦ä¿®æ”¹-1" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><p>Zombieattack.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiehelper.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieBattle is ZombieHelper &#123;</span><br><span class="line">  <span class="comment">// åœ¨è¿™é‡Œå¼€å§‹</span></span><br><span class="line">  uint randNonce = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">randMod</span>(<span class="params">uint _modulus</span>) <span class="title">internal</span> <span class="title">returns</span>(<span class="params">uint</span>) </span>&#123;</span><br><span class="line">    randNonce++;</span><br><span class="line">    <span class="keyword">return</span> uint(keccak256(now, msg.sender, randNonce)) % _modulus;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åƒµå°¸å¯¹æˆ˜"><a href="#åƒµå°¸å¯¹æˆ˜" class="headerlink" title="åƒµå°¸å¯¹æˆ˜"></a>åƒµå°¸å¯¹æˆ˜</h1><p>æˆ‘ä»¬çš„åˆçº¦å·²ç»æœ‰äº†ä¸€äº›éšæœºæ€§çš„æ¥æºï¼Œå¯ä»¥ç”¨è¿›æˆ‘ä»¬çš„åƒµå°¸æˆ˜æ–—ä¸­å»è®¡ç®—ç»“æœã€‚</p><p>æˆ‘ä»¬çš„åƒµå°¸æˆ˜æ–—çœ‹èµ·æ¥å°†æ˜¯è¿™ä¸ªæµç¨‹ï¼š</p><ul><li>ä½ é€‰æ‹©ä¸€ä¸ªè‡ªå·±çš„åƒµå°¸ï¼Œç„¶åé€‰æ‹©ä¸€ä¸ªå¯¹æ‰‹çš„åƒµå°¸å»æ”»å‡»ã€‚</li><li>å¦‚æœä½ æ˜¯æ”»å‡»æ–¹ï¼Œä½ å°†æœ‰70%çš„å‡ ç‡è·èƒœï¼Œé˜²å®ˆæ–¹å°†æœ‰30%çš„å‡ ç‡è·èƒœã€‚</li><li>æ‰€æœ‰çš„åƒµå°¸ï¼ˆæ”»å®ˆåŒæ–¹ï¼‰éƒ½å°†æœ‰ä¸€ä¸ª <code>winCount</code> å’Œä¸€ä¸ª <code>lossCount</code>ï¼Œè¿™ä¸¤ä¸ªå€¼éƒ½å°†æ ¹æ®æˆ˜æ–—ç»“æœå¢é•¿ã€‚</li><li>è‹¥æ”»å‡»æ–¹è·èƒœï¼Œè¿™ä¸ªåƒµå°¸å°†å‡çº§å¹¶äº§ç”Ÿä¸€ä¸ªæ–°åƒµå°¸ã€‚</li><li>å¦‚æœæ”»å‡»æ–¹å¤±è´¥ï¼Œé™¤äº†å¤±è´¥æ¬¡æ•°å°†åŠ ä¸€å¤–ï¼Œä»€ä¹ˆéƒ½ä¸ä¼šå‘ç”Ÿã€‚</li><li>æ— è®ºè¾“èµ¢ï¼Œå½“å‰åƒµå°¸çš„å†·å´æ—¶é—´éƒ½å°†è¢«æ¿€æ´»ã€‚</li></ul><p>è¿™æœ‰ä¸€å¤§å †çš„é€»è¾‘éœ€è¦å¤„ç†ï¼Œæˆ‘ä»¬å°†æŠŠè¿™äº›æ­¥éª¤åˆ†è§£åˆ°æ¥ä¸‹æ¥çš„è¯¾ç¨‹ä¸­å»ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -4"><a href="#å®æˆ˜æ¼”ä¹ -4" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><ol><li>ç»™æˆ‘ä»¬åˆçº¦ä¸€ä¸ª <code>uint</code> ç±»å‹çš„å˜é‡ï¼Œå‘½åä¸º <code>attackVictoryProbability</code>, å°†å…¶å€¼è®¾å®šä¸º <code>70</code>ã€‚</li><li>åˆ›å»ºä¸€ä¸ªåä¸º <code>attack</code>çš„å‡½æ•°ã€‚å®ƒå°†ä¼ å…¥ä¸¤ä¸ªå‚æ•°: <code>_zombieId</code> (<code>uint</code> ç±»å‹) ä»¥åŠ <code>_targetId</code> (ä¹Ÿæ˜¯ <code>uint</code>)ã€‚å®ƒå°†æ˜¯ä¸€ä¸ª <code>external</code> å‡½æ•°ã€‚</li></ol><p>å‡½æ•°ä½“å…ˆç•™ç©ºå§ã€‚</p><h2 id="åˆçº¦ä¿®æ”¹-2"><a href="#åˆçº¦ä¿®æ”¹-2" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><p>Zombieattack.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiehelper.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieBattle is ZombieHelper &#123;</span><br><span class="line">  uint randNonce = <span class="number">0</span>;</span><br><span class="line">  <span class="comment">// åœ¨è¿™é‡Œåˆ›å»º attackVictoryProbability</span></span><br><span class="line">  uint attackVictoryProbability = <span class="number">70</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">randMod</span>(<span class="params">uint _modulus</span>) <span class="title">internal</span> <span class="title">returns</span>(<span class="params">uint</span>) </span>&#123;</span><br><span class="line">    randNonce++;</span><br><span class="line">    <span class="keyword">return</span> uint(keccak256(now, msg.sender, randNonce)) % _modulus;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åœ¨è¿™é‡Œåˆ›å»ºæ–°å‡½æ•°</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">attack</span>(<span class="params">uint _zombieId, uint _targetId</span>) <span class="title">external</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="é‡æ„é€šç”¨é€»è¾‘"><a href="#é‡æ„é€šç”¨é€»è¾‘" class="headerlink" title="é‡æ„é€šç”¨é€»è¾‘"></a>é‡æ„é€šç”¨é€»è¾‘</h1><p>ä¸ç®¡è°è°ƒç”¨æˆ‘ä»¬çš„ <code>attack</code> å‡½æ•° â€”â€” æˆ‘ä»¬æƒ³ç¡®ä¿ç”¨æˆ·çš„ç¡®æ‹¥æœ‰ä»–ä»¬ç”¨æ¥æ”»å‡»çš„åƒµå°¸ã€‚å¦‚æœä½ èƒ½ç”¨å…¶ä»–äººçš„åƒµå°¸æ¥æ”»å‡»å°†æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„å®‰å…¨é—®é¢˜ã€‚</p><p>ä½ èƒ½æƒ³ä¸€ä¸‹æˆ‘ä»¬å¦‚ä½•æ·»åŠ ä¸€ä¸ªæ£€æŸ¥æ­¥éª¤æ¥çœ‹çœ‹è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„äººå°±æ˜¯ä»–ä»¬ä¼ å…¥çš„ <code>_zombieId</code> çš„æ‹¥æœ‰è€…ä¹ˆï¼Ÿ</p><p>æƒ³ä¸€æƒ³ï¼Œçœ‹çœ‹ä½ èƒ½ä¸èƒ½è‡ªå·±æ‰¾åˆ°ä¸€äº›ç­”æ¡ˆã€‚</p><p>èŠ±ç‚¹æ—¶é—´â€¦â€¦ å‚è€ƒæˆ‘ä»¬å‰é¢è¯¾ç¨‹çš„ä»£ç æ¥è·å¾—çµæ„Ÿã€‚</p><p>ç­”æ¡ˆåœ¨ä¸‹é¢ï¼Œåœ¨ä½ æœ‰ä¸€äº›æƒ³æ³•ä¹‹å‰ä¸è¦ç»§ç»­é˜…è¯»ã€‚</p><h2 id="ç­”æ¡ˆ"><a href="#ç­”æ¡ˆ" class="headerlink" title="ç­”æ¡ˆ"></a>ç­”æ¡ˆ</h2><p>æˆ‘ä»¬åœ¨å‰é¢çš„è¯¾ç¨‹é‡Œé¢å·²ç»åšè¿‡å¾ˆå¤šæ¬¡è¿™æ ·çš„æ£€æŸ¥äº†ã€‚ åœ¨ <code>changeName()</code>, <code>changeDna()</code>, å’Œ <code>feedAndMultiply()</code>é‡Œï¼Œæˆ‘ä»¬åšè¿‡è¿™æ ·çš„æ£€æŸ¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">require(msg.sender == zombieToOwner[_zombieId]);</span><br></pre></td></tr></table></figure><p>è¿™å’Œæˆ‘ä»¬ <code>attack</code> å‡½æ•°å°†è¦ç”¨åˆ°çš„æ£€æŸ¥é€»è¾‘æ˜¯ç›¸åŒçš„ã€‚ æ­£å› æˆ‘ä»¬è¦å¤šæ¬¡è°ƒç”¨è¿™ä¸ªæ£€æŸ¥é€»è¾‘ï¼Œè®©æˆ‘ä»¬æŠŠå®ƒç§»åˆ°å®ƒè‡ªå·±çš„ <code>modifier</code> ä¸­æ¥æ¸…ç†ä»£ç å¹¶é¿å…é‡å¤ç¼–ç ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -5"><a href="#å®æˆ˜æ¼”ä¹ -5" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æˆ‘ä»¬å›åˆ°äº† <code>zombiefeeding.sol</code>ï¼Œ å› ä¸ºè¿™æ˜¯æˆ‘ä»¬ç¬¬ä¸€æ¬¡è°ƒç”¨æ£€æŸ¥é€»è¾‘çš„åœ°æ–¹ã€‚è®©æˆ‘ä»¬æŠŠå®ƒé‡æ„è¿›å®ƒè‡ªå·±çš„ <code>modifier</code>ã€‚</p><ol><li><p>åˆ›å»ºä¸€ä¸ª <code>modifier</code>ï¼Œ å‘½åä¸º <code>ownerOf</code>ã€‚å®ƒå°†ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œ <code>_zombieId</code> (ä¸€ä¸ª <code>uint</code>)ã€‚</p><p>å®ƒçš„å‡½æ•°ä½“åº”è¯¥ <code>require</code> <code>msg.sender</code> ç­‰äº <code>zombieToOwner[_zombieId]</code>ï¼Œ ç„¶åç»§ç»­è¿™ä¸ªå‡½æ•°å‰©ä¸‹çš„å†…å®¹ã€‚ å¦‚æœä½ å¿˜è®°äº†ä¿®é¥°ç¬¦çš„å†™æ³•ï¼Œå¯ä»¥å‚è€ƒ <code>zombiehelper.sol</code>ã€‚</p></li><li><p>å°†è¿™ä¸ªå‡½æ•°çš„ <code>feedAndMultiply</code> å®šä¹‰ä¿®æ”¹ä¸ºå…¶ä½¿ç”¨ä¿®é¥°ç¬¦ <code>ownerOf</code>ã€‚</p></li><li><p>ç°åœ¨æˆ‘ä»¬ä½¿ç”¨ <code>modifier</code>äº†ï¼Œä½ å¯ä»¥åˆ é™¤è¿™è¡Œäº†ï¼š <code>require(msg.sender == zombieToOwner[_zombieId]);</code></p></li></ol><h2 id="åˆçº¦ä¿®æ”¹-3"><a href="#åˆçº¦ä¿®æ”¹-3" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><p>zombiefeeding.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefactory.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract KittyInterface &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getKitty</span>(<span class="params">uint256 _id</span>) <span class="title">external</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    bool isGestating,</span></span></span><br><span class="line"><span class="function"><span class="params">    bool isReady,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 cooldownIndex,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 nextActionAt,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 siringWithId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 birthTime,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 matronId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 sireId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 generation,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 genes</span></span></span><br><span class="line"><span class="function"><span class="params">  </span>);</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">contract</span> <span class="title">ZombieFeeding</span> <span class="title">is</span> <span class="title">ZombieFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  KittyInterface kittyContract;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1. åœ¨è¿™é‡Œåˆ›å»º modifier</span></span><br><span class="line">  modifier ownerOf(uint _zombieId) &#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    _;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">setKittyContractAddress</span>(<span class="params">address _address</span>) <span class="title">external</span> <span class="title">onlyOwner</span> </span>&#123;</span><br><span class="line">    kittyContract = KittyInterface(_address);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">_triggerCooldown</span>(<span class="params">Zombie storage _zombie</span>) <span class="title">internal</span> </span>&#123;</span><br><span class="line">    _zombie.readyTime = uint32(now + cooldownTime);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">_isReady</span>(<span class="params">Zombie storage _zombie</span>) <span class="title">internal</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">bool</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> (_zombie.readyTime &lt;= now);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. åœ¨å‡½æ•°å®šä¹‰æ—¶å¢åŠ  modifier :</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedAndMultiply</span>(<span class="params">uint _zombieId, uint _targetDna, string _species</span>) <span class="title">internal</span> <span class="title">ownerOf</span>(<span class="params">_zombieId</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 3. ç§»é™¤è¿™ä¸€è¡Œ</span></span><br><span class="line">    <span class="comment">//require(msg.sender == zombieToOwner[_zombieId]);</span></span><br><span class="line">    Zombie storage myZombie = zombies[_zombieId];</span><br><span class="line">    <span class="built_in">require</span>(_isReady(myZombie));</span><br><span class="line">    _targetDna = _targetDna % dnaModulus;</span><br><span class="line">    uint newDna = (myZombie.dna + _targetDna) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (keccak256(_species) == keccak256(<span class="string">"kitty"</span>)) &#123;</span><br><span class="line">      newDna = newDna - newDna % <span class="number">100</span> + <span class="number">99</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    _createZombie(<span class="string">"NoName"</span>, newDna);</span><br><span class="line">    _triggerCooldown(myZombie);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedOnKitty</span>(<span class="params">uint _zombieId, uint _kittyId</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    uint kittyDna;</span><br><span class="line">    (,,,,,,,,,kittyDna) = kittyContract.getKitty(_kittyId);</span><br><span class="line">    feedAndMultiply(_zombieId, kittyDna, <span class="string">"kitty"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ›´å¤šé‡æ„"><a href="#æ›´å¤šé‡æ„" class="headerlink" title="æ›´å¤šé‡æ„"></a>æ›´å¤šé‡æ„</h1><p>åœ¨ <code>zombiehelper.sol</code>é‡Œæœ‰å‡ å¤„åœ°æ–¹ï¼Œéœ€è¦æˆ‘ä»¬å®ç°æˆ‘ä»¬æ–°çš„ <code>modifier</code>â€”â€” <code>ownerOf</code>ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -6"><a href="#å®æˆ˜æ¼”ä¹ -6" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><ol><li>ä¿®æ”¹ <code>changeName()</code> ä½¿å…¶ä½¿ç”¨ <code>ownerOf</code></li><li>ä¿®æ”¹ <code>changeDna()</code> ä½¿å…¶ä½¿ç”¨ <code>ownerOf</code></li></ol><h2 id="åˆçº¦ä¿®æ”¹-4"><a href="#åˆçº¦ä¿®æ”¹-4" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefeeding.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieHelper is ZombieFeeding &#123;</span><br><span class="line"></span><br><span class="line">  uint levelUpFee = <span class="number">0.001</span> ether;</span><br><span class="line"></span><br><span class="line">  modifier aboveLevel(uint _level, uint _zombieId) &#123;</span><br><span class="line">    <span class="built_in">require</span>(zombies[_zombieId].level &gt;= _level);</span><br><span class="line">    _;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">withdraw</span>(<span class="params"></span>) <span class="title">external</span> <span class="title">onlyOwner</span> </span>&#123;</span><br><span class="line">    owner.transfer(<span class="keyword">this</span>.balance);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">setLevelUpFee</span>(<span class="params">uint _fee</span>) <span class="title">external</span> <span class="title">onlyOwner</span> </span>&#123;</span><br><span class="line">    levelUpFee = _fee;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">levelUp</span>(<span class="params">uint _zombieId</span>) <span class="title">external</span> <span class="title">payable</span> </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.value == levelUpFee);</span><br><span class="line">    zombies[_zombieId].level++;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1. ä½¿ç”¨ `ownerOf` ä¿®æ”¹è¿™ä¸ªå‡½æ•°:</span></span><br><span class="line">  <span class="comment">//function changeName(uint _zombieId, string _newName) external aboveLevel(2, _zombieId) &#123;</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">changeName</span>(<span class="params">uint _zombieId, string _newName</span>) <span class="title">external</span> <span class="title">aboveLevel</span>(<span class="params"><span class="number">2</span>, _zombieId</span>) <span class="title">ownerOf</span>(<span class="params">_zombieId</span>) </span>&#123;  </span><br><span class="line">    <span class="comment">//require(msg.sender == zombieToOwner[_zombieId]);</span></span><br><span class="line">    zombies[_zombieId].name = _newName;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. å¯¹è¿™ä¸ªå‡½æ•°åšåŒæ ·çš„äº‹:</span></span><br><span class="line">  <span class="comment">//function changeDna(uint _zombieId, uint _newDna) external aboveLevel(20, _zombieId) &#123;</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">changeDna</span>(<span class="params">uint _zombieId, uint _newDna</span>) <span class="title">external</span> <span class="title">aboveLevel</span>(<span class="params"><span class="number">20</span>, _zombieId</span>) <span class="title">ownerOf</span>(<span class="params">_zombieId</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//require(msg.sender == zombieToOwner[_zombieId]);</span></span><br><span class="line">    zombies[_zombieId].dna = _newDna;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getZombiesByOwner</span>(<span class="params">address _owner</span>) <span class="title">external</span> <span class="title">view</span> <span class="title">returns</span>(<span class="params">uint[]</span>) </span>&#123;</span><br><span class="line">    uint[] memory result = <span class="keyword">new</span> uint[](ownerZombieCount[_owner]);</span><br><span class="line">    uint counter = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (uint i = <span class="number">0</span>; i &lt; zombies.length; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (zombieToOwner[i] == _owner) &#123;</span><br><span class="line">        result[counter] = i;</span><br><span class="line">        counter++;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å›åˆ°æ”»å‡»ï¼"><a href="#å›åˆ°æ”»å‡»ï¼" class="headerlink" title="å›åˆ°æ”»å‡»ï¼"></a>å›åˆ°æ”»å‡»ï¼</h1><p>é‡æ„å®Œæˆäº†ï¼Œå›åˆ° <code>zombieattack.sol</code>ã€‚</p><p>ç»§ç»­æ¥å®Œå–„æˆ‘ä»¬çš„ <code>attack</code> å‡½æ•°ï¼Œ ç°åœ¨æˆ‘ä»¬æœ‰äº† <code>ownerOf</code> ä¿®é¥°ç¬¦æ¥ç”¨äº†ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -7"><a href="#å®æˆ˜æ¼”ä¹ -7" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><ol><li><p>å°† <code>ownerOf</code> ä¿®é¥°ç¬¦æ·»åŠ åˆ° <code>attack</code> æ¥ç¡®ä¿è°ƒç”¨è€…æ‹¥æœ‰<code>_zombieId</code>.</p></li><li><p>æˆ‘ä»¬çš„å‡½æ•°æ‰€éœ€è¦åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯è·å¾—ä¸€ä¸ªåŒæ–¹åƒµå°¸çš„ <code>storage</code> æŒ‡é’ˆï¼Œ è¿™æ ·æˆ‘ä»¬æ‰èƒ½å¾ˆæ–¹ä¾¿å’Œå®ƒä»¬äº¤äº’ï¼š</p><p>a. å®šä¹‰ä¸€ä¸ª <code>Zombie storage</code> å‘½åä¸º <code>myZombie</code>ï¼Œä½¿å…¶å€¼ç­‰äº <code>zombies[_zombieId]</code>ã€‚</p><p>b. å®šä¹‰ä¸€ä¸ª <code>Zombie storage</code> å‘½åä¸º <code>enemyZombie</code>ï¼Œ ä½¿å…¶å€¼ç­‰äº <code>zombies[_targetId]</code>ã€‚</p></li><li><p>æˆ‘ä»¬å°†ç”¨ä¸€ä¸ª0åˆ°100çš„éšæœºæ•°æ¥ç¡®å®šæˆ‘ä»¬çš„æˆ˜æ–—ç»“æœã€‚ å®šä¹‰ä¸€ä¸ª <code>uint</code>ï¼Œå‘½åä¸º <code>rand</code>ï¼Œ è®¾å®šå…¶å€¼ç­‰äº <code>randMod</code> å‡½æ•°çš„è¿”å›å€¼ï¼Œæ­¤å‡½æ•°ä¼ å…¥ <code>100</code>ä½œä¸ºå‚æ•°ã€‚</p></li></ol><h2 id="åˆçº¦ä¿®æ”¹-5"><a href="#åˆçº¦ä¿®æ”¹-5" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiehelper.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieBattle is ZombieHelper &#123;</span><br><span class="line">  uint randNonce = <span class="number">0</span>;</span><br><span class="line">  uint attackVictoryProbability = <span class="number">70</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">randMod</span>(<span class="params">uint _modulus</span>) <span class="title">internal</span> <span class="title">returns</span>(<span class="params">uint</span>) </span>&#123;</span><br><span class="line">    randNonce++;</span><br><span class="line">    <span class="keyword">return</span> uint(keccak256(now, msg.sender, randNonce)) % _modulus;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1. åœ¨è¿™é‡Œå¢åŠ  modifier</span></span><br><span class="line">  <span class="comment">//function attack(uint _zombieId, uint _targetId) external &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">attack</span>(<span class="params">uint _zombieId, uint _targetId</span>) <span class="title">external</span> <span class="title">ownerOf</span>(<span class="params">_zombieId</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 2. åœ¨è¿™é‡Œå¼€å§‹å®šä¹‰å‡½æ•°</span></span><br><span class="line">    Zombie storage myZombie = zombies[_zombieId];</span><br><span class="line">    Zombie storage enemyZombie = zombies[_targetId];</span><br><span class="line">    uint rand = randMod(<span class="number">100</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åƒµå°¸çš„è¾“èµ¢"><a href="#åƒµå°¸çš„è¾“èµ¢" class="headerlink" title="åƒµå°¸çš„è¾“èµ¢"></a>åƒµå°¸çš„è¾“èµ¢</h1><p>å¯¹æˆ‘ä»¬çš„åƒµå°¸æ¸¸æˆæ¥è¯´ï¼Œæˆ‘ä»¬å°†è¦è¿½è¸ªæˆ‘ä»¬çš„åƒµå°¸è¾“èµ¢äº†å¤šå°‘åœºã€‚æœ‰äº†è¿™ä¸ªæˆ‘ä»¬å¯ä»¥åœ¨æ¸¸æˆé‡Œç»´æŠ¤ä¸€ä¸ª â€œåƒµå°¸æ’è¡Œæ¦œâ€ã€‚</p><p>æœ‰å¤šç§æ–¹æ³•åœ¨æˆ‘ä»¬çš„DAppé‡Œé¢ä¿å­˜ä¸€ä¸ªæ•°å€¼ â€” ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„æ˜ å°„ï¼Œä½œä¸ºä¸€ä¸ªâ€œæ’è¡Œæ¦œâ€ç»“æ„ä½“ï¼Œæˆ–è€…ä¿å­˜åœ¨ <code>Zombie</code> ç»“æ„ä½“å†…ã€‚</p><p>æ¯ä¸ªæ–¹æ³•éƒ½æœ‰å…¶ä¼˜ç¼ºç‚¹ï¼Œå–å†³äºæˆ‘ä»¬æ‰“ç®—å¦‚ä½•å’Œè¿™äº›æ•°æ®æ‰“äº¤é“ã€‚åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ï¼Œç®€å•èµ·è§æˆ‘ä»¬å°†è¿™ä¸ªçŠ¶æ€ä¿å­˜åœ¨ <code>Zombie</code> ç»“æ„ä½“ä¸­ï¼Œå°†å…¶å‘½åä¸º <code>winCount</code> å’Œ <code>lossCount</code>ã€‚</p><p>æˆ‘ä»¬è·³å› <code>zombiefactory.sol</code>, å°†è¿™äº›å±æ€§æ·»åŠ è¿› <code>Zombie</code> ç»“æ„ä½“.</p><h2 id="å®æˆ˜æ¼”ä¹ -8"><a href="#å®æˆ˜æ¼”ä¹ -8" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><ol><li><p>ä¿®æ”¹ <code>Zombie</code> ç»“æ„ä½“ï¼Œæ·»åŠ ä¸¤ä¸ªå±æ€§:</p><p>a. <code>winCount</code>, ä¸€ä¸ª <code>uint16</code></p><p>b. <code>lossCount</code>, ä¹Ÿæ˜¯ä¸€ä¸ª <code>uint16</code></p><blockquote><p>æ³¨æ„ï¼š è®°ä½, å› ä¸ºæˆ‘ä»¬èƒ½åœ¨ç»“æ„ä½“ä¸­åŒ…è£…<code>uint</code>, æˆ‘ä»¬æ‰“ç®—ç”¨é€‚åˆæˆ‘ä»¬çš„æœ€å°çš„ <code>uint</code>ã€‚ ä¸€ä¸ª <code>uint8</code> å¤ªå°äº†ï¼Œ å› ä¸º 2^8 = 256 â€”â€” å¦‚æœæˆ‘ä»¬çš„åƒµå°¸æ¯å¤©éƒ½ä½œæˆ˜ï¼Œä¸åˆ°ä¸€å¹´å°±æº¢å‡ºäº†ã€‚ä½†æ˜¯ 2^16 = 65536 ï¼ˆ<code>uint16</code>ï¼‰â€”â€” é™¤éä¸€ä¸ªåƒµå°¸è¿ç»­179å¹´æ¯å¤©ä½œæˆ˜ï¼Œå¦åˆ™æˆ‘ä»¬å°±æ˜¯å®‰å…¨çš„ã€‚</p></blockquote></li><li><p>ç°åœ¨æˆ‘ä»¬çš„ <code>Zombie</code> ç»“æ„ä½“æœ‰äº†æ–°çš„å±æ€§ï¼Œ æˆ‘ä»¬éœ€è¦ä¿®æ”¹ <code>_createZombie()</code> ä¸­çš„å‡½æ•°å®šä¹‰ã€‚</p><p>ä¿®æ”¹åƒµå°¸ç”Ÿæˆå®šä¹‰ï¼Œè®©æ¯ä¸ªæ–°åƒµå°¸éƒ½æœ‰ <code>0</code> èµ¢å’Œ <code>0</code> è¾“ã€‚</p></li></ol><h2 id="åˆçº¦ä¿®æ”¹-6"><a href="#åˆçº¦ä¿®æ”¹-6" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./ownable.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory is Ownable &#123;</span><br><span class="line"></span><br><span class="line">    event NewZombie(uint zombieId, string name, uint dna);</span><br><span class="line"></span><br><span class="line">    uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">    uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line">    uint cooldownTime = <span class="number">1</span> days;</span><br><span class="line"></span><br><span class="line">    struct Zombie &#123;</span><br><span class="line">      string name;</span><br><span class="line">      uint dna;</span><br><span class="line">      uint32 level;</span><br><span class="line">      uint32 readyTime;</span><br><span class="line">      <span class="comment">// 1. åœ¨è¿™é‡Œæ·»åŠ æ–°çš„å±æ€§</span></span><br><span class="line">      uint16 winCount;</span><br><span class="line">      uint16 lossCount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Zombie[] public zombies;</span><br><span class="line"></span><br><span class="line">    mapping (<span class="function"><span class="params">uint</span> =&gt;</span> address) public zombieToOwner;</span><br><span class="line">    mapping (<span class="function"><span class="params">address</span> =&gt;</span> uint) ownerZombieCount;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_createZombie</span>(<span class="params">string _name, uint _dna</span>) <span class="title">internal</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 2. åœ¨è¿™é‡Œä¿®æ”¹ä¿®æ”¹æ–°åƒµå°¸çš„åˆ›å»º:</span></span><br><span class="line">        uint id = zombies.push(Zombie(_name, _dna, <span class="number">1</span>, uint32(now + cooldownTime), <span class="number">0</span> ,<span class="number">0</span>)) - <span class="number">1</span>;</span><br><span class="line">        zombieToOwner[id] = msg.sender;</span><br><span class="line">        ownerZombieCount[msg.sender]++;</span><br><span class="line">        NewZombie(id, _name, _dna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_generateRandomDna</span>(<span class="params">string _str</span>) <span class="title">private</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>) </span>&#123;</span><br><span class="line">        uint rand = uint(keccak256(_str));</span><br><span class="line">        <span class="keyword">return</span> rand % dnaModulus;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">createRandomZombie</span>(<span class="params">string _name</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        <span class="built_in">require</span>(ownerZombieCount[msg.sender] == <span class="number">0</span>);</span><br><span class="line">        uint randDna = _generateRandomDna(_name);</span><br><span class="line">        randDna = randDna - randDna % <span class="number">100</span>;</span><br><span class="line">        _createZombie(_name, randDna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åƒµå°¸èƒœåˆ©äº†-ğŸ˜„"><a href="#åƒµå°¸èƒœåˆ©äº†-ğŸ˜„" class="headerlink" title="åƒµå°¸èƒœåˆ©äº† ğŸ˜„"></a>åƒµå°¸èƒœåˆ©äº† ğŸ˜„</h1><p>æœ‰äº† <code>winCount</code> å’Œ <code>lossCount</code>ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®åƒµå°¸å“ªä¸ªåƒµå°¸èµ¢äº†æˆ˜æ–—æ¥æ›´æ–°å®ƒä»¬äº†ã€‚</p><p>åœ¨ç¬¬å…­ç« æˆ‘ä»¬è®¡ç®—å‡ºæ¥ä¸€ä¸ª0åˆ°100çš„éšæœºæ•°ã€‚ç°åœ¨è®©æˆ‘ä»¬ç”¨é‚£ä¸ªæ•°æ¥å†³å®šé‚£è°èµ¢äº†æˆ˜æ–—ï¼Œå¹¶ä»¥æ­¤æ›´æ–°æˆ‘ä»¬çš„çŠ¶æ€ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -9"><a href="#å®æˆ˜æ¼”ä¹ -9" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><ol><li><p>åˆ›å»ºä¸€ä¸ª <code>if</code> è¯­å¥æ¥æ£€æŸ¥ <code>rand</code> æ˜¯ä¸æ˜¯ <strong><em>å°äºæˆ–è€…ç­‰äº\</em></strong> <code>attackVictoryProbability</code>ã€‚</p></li><li><p>å¦‚æœä»¥ä¸Šæ¡ä»¶ä¸º <code>true</code>ï¼Œ æˆ‘ä»¬çš„åƒµå°¸å°±èµ¢äº†ï¼æ‰€ä»¥ï¼š</p><p>a. å¢åŠ  <code>myZombie</code> çš„ <code>winCount</code>ã€‚</p><p>b. å¢åŠ  <code>myZombie</code> çš„ <code>level</code>ã€‚ (å‡çº§äº†å•¦!!!!!!!)</p><p>c. å¢åŠ  <code>enemyZombie</code> çš„ <code>lossCount</code>. (è¾“å®¶!!!!!! ğŸ˜« ğŸ˜« ğŸ˜«)</p><p>d. è¿è¡Œ <code>feedAndMultiply</code> å‡½æ•°ã€‚ åœ¨ <code>zombiefeeding.sol</code> é‡ŒæŸ¥çœ‹è°ƒç”¨å®ƒçš„è¯­å¥ã€‚ å¯¹äºç¬¬ä¸‰ä¸ªå‚æ•° (<code>_species</code>)ï¼Œä¼ å…¥å­—ç¬¦ä¸² â€œzombieâ€. ï¼ˆç°åœ¨å®ƒå®é™…ä¸Šä»€ä¹ˆéƒ½ä¸åšï¼Œä¸è¿‡åœ¨ç¨åï¼Œ å¦‚æœæˆ‘ä»¬æ„¿æ„ï¼Œå¯ä»¥æ·»åŠ é¢å¤–çš„æ–¹æ³•ï¼Œç”¨æ¥åˆ¶é€ åƒµå°¸å˜çš„åƒµå°¸ï¼‰ã€‚</p></li></ol><h2 id="åˆçº¦ä¿®æ”¹-7"><a href="#åˆçº¦ä¿®æ”¹-7" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiehelper.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieBattle is ZombieHelper &#123;</span><br><span class="line">  uint randNonce = <span class="number">0</span>;</span><br><span class="line">  uint attackVictoryProbability = <span class="number">70</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">randMod</span>(<span class="params">uint _modulus</span>) <span class="title">internal</span> <span class="title">returns</span>(<span class="params">uint</span>) </span>&#123;</span><br><span class="line">    randNonce++;</span><br><span class="line">    <span class="keyword">return</span> uint(keccak256(now, msg.sender, randNonce)) % _modulus;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">attack</span>(<span class="params">uint _zombieId, uint _targetId</span>) <span class="title">external</span> <span class="title">ownerOf</span>(<span class="params">_zombieId</span>) </span>&#123;</span><br><span class="line">    Zombie storage myZombie = zombies[_zombieId];</span><br><span class="line">    Zombie storage enemyZombie = zombies[_targetId];</span><br><span class="line">    uint rand = randMod(<span class="number">100</span>);</span><br><span class="line">    <span class="comment">//åœ¨è¿™é‡Œå¼€å§‹</span></span><br><span class="line">    <span class="keyword">if</span> (rand &lt;= attackVictoryProbability) &#123;</span><br><span class="line">      myZombie.winCount++;</span><br><span class="line">      myZombie.level++;</span><br><span class="line">      enemyZombie.lossCount++;</span><br><span class="line">      feedAndMultiply(_zombieId, enemyZombie.dna, <span class="string">"zombie"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åƒµå°¸å¤±è´¥-ğŸ˜"><a href="#åƒµå°¸å¤±è´¥-ğŸ˜" class="headerlink" title="åƒµå°¸å¤±è´¥ ğŸ˜"></a>åƒµå°¸å¤±è´¥ ğŸ˜</h1><p>æˆ‘ä»¬å·²ç»ç¼–å†™äº†ä½ çš„åƒµå°¸èµ¢äº†ä¹‹åä¼šå‘ç”Ÿä»€ä¹ˆï¼Œ è¯¥çœ‹çœ‹ <strong>è¾“äº†</strong> çš„æ—¶å€™è¦æ€ä¹ˆåšäº†ã€‚</p><p>åœ¨æˆ‘ä»¬çš„æ¸¸æˆä¸­ï¼Œåƒµå°¸è¾“äº†åå¹¶ä¸ä¼šé™çº§ â€”â€” åªæ˜¯ç®€å•åœ°ç»™ <code>lossCount</code> åŠ ä¸€ï¼Œå¹¶è§¦å‘å†·å´ï¼Œç­‰å¾…ä¸€å¤©åæ‰èƒ½å†æ¬¡å‚æˆ˜ã€‚</p><p>è¦å®ç°è¿™ä¸ªé€»è¾‘ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª <code>else</code> è¯­å¥ã€‚</p><p><code>else</code> è¯­å¥å’Œ JavaScript ä»¥åŠå¾ˆå¤šå…¶ä»–è¯­è¨€çš„ else è¯­å¥ä¸€æ ·ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if (zombieCoins[msg.sender] &gt; 100000000) &#123;</span><br><span class="line">  // ä½ å¥½æœ‰é’±!!!</span><br><span class="line">&#125; else &#123;</span><br><span class="line">  // æˆ‘ä»¬éœ€è¦æ›´å¤šçš„åƒµå°¸å¸...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®æˆ˜æ¼”ä¹ -10"><a href="#å®æˆ˜æ¼”ä¹ -10" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><ol><li><p>æ·»åŠ ä¸€ä¸ª <code>else</code> è¯­å¥ã€‚ è‹¥æˆ‘ä»¬çš„åƒµå°¸è¾“äº†ï¼š</p><p>a. å¢åŠ  <code>myZombie</code> çš„ <code>lossCount</code>ã€‚</p><p>b. å¢åŠ  <code>enemyZombie</code> çš„ <code>winCount</code>ã€‚</p></li><li><p>åœ¨ <code>else</code> æœ€åï¼Œ å¯¹ <code>myZombie</code> è¿è¡Œ <code>_triggerCooldown</code> æ–¹æ³•ã€‚è¿™è®©æ¯ä¸ªåƒµå°¸æ¯å¤©åªèƒ½å‚æˆ˜ä¸€æ¬¡ã€‚</p></li></ol><h2 id="åˆçº¦ä¿®æ”¹-8"><a href="#åˆçº¦ä¿®æ”¹-8" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiehelper.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieBattle is ZombieHelper &#123;</span><br><span class="line">  uint randNonce = <span class="number">0</span>;</span><br><span class="line">  uint attackVictoryProbability = <span class="number">70</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">randMod</span>(<span class="params">uint _modulus</span>) <span class="title">internal</span> <span class="title">returns</span>(<span class="params">uint</span>) </span>&#123;</span><br><span class="line">    randNonce++;</span><br><span class="line">    <span class="keyword">return</span> uint(keccak256(now, msg.sender, randNonce)) % _modulus;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">attack</span>(<span class="params">uint _zombieId, uint _targetId</span>) <span class="title">external</span> <span class="title">ownerOf</span>(<span class="params">_zombieId</span>) </span>&#123;</span><br><span class="line">    Zombie storage myZombie = zombies[_zombieId];</span><br><span class="line">    Zombie storage enemyZombie = zombies[_targetId];</span><br><span class="line">    uint rand = randMod(<span class="number">100</span>);</span><br><span class="line">    <span class="keyword">if</span> (rand &lt;= attackVictoryProbability) &#123;</span><br><span class="line">      myZombie.winCount++;</span><br><span class="line">      myZombie.level++;</span><br><span class="line">      enemyZombie.lossCount++;</span><br><span class="line">      feedAndMultiply(_zombieId, enemyZombie.dna, <span class="string">"zombie"</span>);</span><br><span class="line">    &#125; <span class="comment">// åœ¨è¿™é‡Œå¼€å§‹</span></span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">      myZombie.lossCount++;</span><br><span class="line">      enemyZombie.winCount++;</span><br><span class="line">      _triggerCooldown(myZombie);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ”¾åœ¨ä¸€èµ·"><a href="#æ”¾åœ¨ä¸€èµ·" class="headerlink" title="æ”¾åœ¨ä¸€èµ·"></a>æ”¾åœ¨ä¸€èµ·</h1><p>æ­å–œä½ å•Šï¼Œåˆå®Œæˆäº†ç¬¬å››è¯¾ã€‚</p><p>åœ¨å³è¾¹æµ‹è¯•ä½ çš„æˆ˜æ–—å‡½æ•°æŠŠã€‚</p><h2 id="è®¤é¢†ä½ çš„æˆ˜åˆ©å“"><a href="#è®¤é¢†ä½ çš„æˆ˜åˆ©å“" class="headerlink" title="è®¤é¢†ä½ çš„æˆ˜åˆ©å“"></a>è®¤é¢†ä½ çš„æˆ˜åˆ©å“</h2><p>åœ¨èµ¢äº†æˆ˜æ–—ä¹‹åï¼š</p><ol><li>ä½ çš„åƒµå°¸å°†ä¼šå‡çº§</li><li>ä½ åƒµå°¸çš„ <code>winCount</code> å°†ä¼šå¢åŠ </li><li>ä½ å°†ä¸ºä½ çš„åƒµå°¸å¤§å†›è·å¾—ä¸€ä¸ªæ–°çš„åƒµå°¸</li></ol><p>ç»§ç»­æµ‹è¯•æˆ˜æ–—ï¼Œç©å¤Ÿäº†ä»¥åç‚¹å‡»ä¸‹ä¸€ç« æ¥å®Œæˆæœ¬è¯¾ã€‚</p><p><img src="https://i.loli.net/2020/06/29/zGLUjP6cl83DWnb.png" alt="image-20200629183952262"></p><p><img src="https://i.loli.net/2020/06/29/KnkTaeBd7Axcjo4.png" alt="image-20200629184010049"></p><h1 id="ç¬¬å››è¯¾æ‰“å¡"><a href="#ç¬¬å››è¯¾æ‰“å¡" class="headerlink" title="ç¬¬å››è¯¾æ‰“å¡"></a>ç¬¬å››è¯¾æ‰“å¡</h1><p><img src="https://i.loli.net/2020/06/29/x7Bh6KUI2ceaD1L.png" alt="image-20200629184139044"></p><p><a href="https://share.cryptozombies.io/zh/lesson/4/share/%E9%99%88%E5%A5%95%E8%BF%85?id=W251bGwsMSwxNF0=" target="_blank" rel="noopener">æˆ‘çš„åƒµå°¸å¤§å†›4</a></p>]]></content>
      
      
      <categories>
          
          <category> loom network </category>
          
      </categories>
      
      
        <tags>
            
            <tag> solidity </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åƒµå°¸æ”»å‡»äººç±»</title>
      <link href="/2020/06/27/%E5%83%B5%E5%B0%B8%E6%94%BB%E5%87%BB%E4%BA%BA%E7%B1%BB/"/>
      <url>/2020/06/27/%E5%83%B5%E5%B0%B8%E6%94%BB%E5%87%BB%E4%BA%BA%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¬¬äºŒè¯¾æ¦‚è§ˆ"><a href="#ç¬¬äºŒè¯¾æ¦‚è§ˆ" class="headerlink" title="ç¬¬äºŒè¯¾æ¦‚è§ˆ"></a>ç¬¬äºŒè¯¾æ¦‚è§ˆ</h1><p>åœ¨ç¬¬ä¸€è¯¾ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå‡½æ•°ç”¨æ¥ç”Ÿæˆåƒµå°¸ï¼Œå¹¶ä¸”å°†å®ƒæ”¾å…¥åŒºå—é“¾ä¸Šçš„åƒµå°¸æ•°æ®åº“ä¸­ã€‚ åœ¨ç¬¬äºŒè¯¾é‡Œï¼Œæˆ‘ä»¬ä¼šè®©æˆ‘ä»¬çš„ app çœ‹èµ·æ¥æ›´åƒä¸€ä¸ªæ¸¸æˆï¼š å®ƒå¾—æ”¯æŒå¤šç”¨æˆ·ï¼Œå¹¶ä¸”é‡‡ç”¨æ›´åŠ æœ‰è¶£,è€Œä¸ä»…ä»…ä½¿ç”¨éšæœºçš„æ–¹å¼ï¼Œæ¥ç”Ÿæˆæ–°çš„åƒµå°¸ã€‚</p><p>å¦‚ä½•ç”Ÿæˆæ–°çš„åƒµå°¸å‘¢ï¼Ÿé€šè¿‡è®©ç°æœ‰çš„åƒµå°¸çŒé£Ÿå…¶ä»–ç”Ÿç‰©ï¼</p><h2 id="åƒµå°¸çŒé£Ÿ"><a href="#åƒµå°¸çŒé£Ÿ" class="headerlink" title="åƒµå°¸çŒé£Ÿ"></a>åƒµå°¸çŒé£Ÿ</h2><p>åƒµå°¸çŒé£Ÿçš„æ—¶å€™ï¼Œåƒµå°¸ç—…æ¯’ä¾µå…¥çŒç‰©ï¼Œè¿™äº›ç—…æ¯’ä¼šå°†çŒç‰©å˜ä¸ºæ–°çš„åƒµå°¸ï¼ŒåŠ å…¥ä½ çš„åƒµå°¸å¤§å†›ã€‚ç³»ç»Ÿä¼šé€šè¿‡çŒç‰©å’ŒçŒé£Ÿè€…åƒµå°¸çš„DNAè®¡ç®—å‡ºæ–°åƒµå°¸çš„DNAã€‚</p><a id="more"></a><p>åƒµå°¸æœ€å–œæ¬¢çŒé£Ÿä»€ä¹ˆç‰©ç§å‘¢ï¼Ÿ ç­‰ä½ å­¦å®Œç¬¬äºŒè¯¾å°±çŸ¥é“äº†ï¼</p><h2 id="å®æˆ˜æ¼”ä¹ "><a href="#å®æˆ˜æ¼”ä¹ " class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>å³è¾¹æ˜¯ä¸€ä¸ªç®€å•çš„çŒé£Ÿæ¼”ç¤ºã€‚ç‚¹å‡»ä¸€ä¸ªâ€œäººâ€ï¼Œçœ‹çœ‹åƒµå°¸çŒé£Ÿçš„æ—¶å€™ä¼šå‘ç”Ÿä»€ä¹ˆ? å¯è§ï¼Œæ–°åƒµå°¸çš„DNAæ˜¯é€šè¿‡ä»åŸæ¥çš„åƒµå°¸çš„DNA, åŠ ä¸ŠçŒç‰©çš„DNAè®¡ç®—å¾—æ¥çš„ã€‚</p><p>å­¦å®Œè¿™ä¸€ç« ï¼Œè¯·ç‚¹å‡»â€œä¸‹ä¸€ç« â€ï¼Œ æˆ‘ä»¬è¯¥è®©æ¸¸æˆæ”¯æŒå¤šç©å®¶æ¨¡å¼äº†ã€‚</p><p><img src="https://i.loli.net/2020/06/27/SMihkOofrwEHxTF.png" alt="image-20200627095657273"></p><h1 id="æ˜ å°„ï¼ˆMappingï¼‰å’Œåœ°å€ï¼ˆAddressï¼‰"><a href="#æ˜ å°„ï¼ˆMappingï¼‰å’Œåœ°å€ï¼ˆAddressï¼‰" class="headerlink" title="æ˜ å°„ï¼ˆMappingï¼‰å’Œåœ°å€ï¼ˆAddressï¼‰"></a>æ˜ å°„ï¼ˆMappingï¼‰å’Œåœ°å€ï¼ˆAddressï¼‰</h1><p>æˆ‘ä»¬é€šè¿‡ç»™æ•°æ®åº“ä¸­çš„åƒµå°¸æŒ‡å®šâ€œä¸»äººâ€ï¼Œ æ¥æ”¯æŒâ€œå¤šç©å®¶â€æ¨¡å¼ã€‚</p><p>å¦‚æ­¤ä¸€æ¥ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥2ä¸ªæ–°çš„æ•°æ®ç±»å‹ï¼š<code>mapping</code>ï¼ˆæ˜ å°„ï¼‰ å’Œ <code>address</code>ï¼ˆåœ°å€ï¼‰ã€‚</p><h2 id="Addresses-ï¼ˆåœ°å€ï¼‰"><a href="#Addresses-ï¼ˆåœ°å€ï¼‰" class="headerlink" title="Addresses ï¼ˆåœ°å€ï¼‰"></a>Addresses ï¼ˆåœ°å€ï¼‰</h2><p>ä»¥å¤ªåŠåŒºå—é“¾ç”± <strong>_ account _</strong> (è´¦æˆ·)ç»„æˆï¼Œä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆé“¶è¡Œè´¦æˆ·ã€‚ä¸€ä¸ªå¸æˆ·çš„ä½™é¢æ˜¯ <strong><em>ä»¥å¤ª</em></strong> ï¼ˆåœ¨ä»¥å¤ªåŠåŒºå—é“¾ä¸Šä½¿ç”¨çš„å¸ç§ï¼‰ï¼Œä½ å¯ä»¥å’Œå…¶ä»–å¸æˆ·ä¹‹é—´æ”¯ä»˜å’Œæ¥å—ä»¥å¤ªå¸ï¼Œå°±åƒä½ çš„é“¶è¡Œå¸æˆ·å¯ä»¥ç”µæ±‡èµ„é‡‘åˆ°å…¶ä»–é“¶è¡Œå¸æˆ·ä¸€æ ·ã€‚</p><p>æ¯ä¸ªå¸æˆ·éƒ½æœ‰ä¸€ä¸ªâ€œåœ°å€â€ï¼Œä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆé“¶è¡Œè´¦å·ã€‚è¿™æ˜¯è´¦æˆ·å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œå®ƒçœ‹èµ·æ¥é•¿è¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0x0cE446255506E92DF41614C46F1d6df9Cc969183</span><br></pre></td></tr></table></figure><p>ï¼ˆè¿™æ˜¯ CryptoZombies å›¢é˜Ÿçš„åœ°å€ï¼Œå¦‚æœä½ å–œæ¬¢ CryptoZombies çš„è¯ï¼Œè¯·æ‰“èµæˆ‘ä»¬ä¸€äº›ä»¥å¤ªå¸ï¼ğŸ˜‰ï¼‰</p><p>æˆ‘ä»¬å°†åœ¨åé¢çš„è¯¾ç¨‹ä¸­ä»‹ç»åœ°å€çš„ç»†èŠ‚ï¼Œç°åœ¨ä½ åªéœ€è¦äº†è§£<strong>åœ°å€å±äºç‰¹å®šç”¨æˆ·ï¼ˆæˆ–æ™ºèƒ½åˆçº¦ï¼‰çš„</strong>ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŒ‡å®šâ€œåœ°å€â€ä½œä¸ºåƒµå°¸ä¸»äººçš„ IDã€‚å½“ç”¨æˆ·é€šè¿‡ä¸æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºäº¤äº’æ¥åˆ›å»ºæ–°çš„åƒµå°¸æ—¶ï¼Œæ–°åƒµå°¸çš„æ‰€æœ‰æƒè¢«è®¾ç½®åˆ°è°ƒç”¨è€…çš„ä»¥å¤ªåŠåœ°å€ä¸‹ã€‚</p><h2 id="Mappingï¼ˆæ˜ å°„ï¼‰"><a href="#Mappingï¼ˆæ˜ å°„ï¼‰" class="headerlink" title="Mappingï¼ˆæ˜ å°„ï¼‰"></a>Mappingï¼ˆæ˜ å°„ï¼‰</h2><p>åœ¨ç¬¬1è¯¾ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº† <strong>_ ç»“æ„ä½“ _</strong> å’Œ <strong>_ æ•°ç»„ _</strong> ã€‚ <strong><em>æ˜ å°„</em></strong> æ˜¯å¦ä¸€ç§åœ¨ Solidity ä¸­å­˜å‚¨æœ‰ç»„ç»‡æ•°æ®çš„æ–¹æ³•ã€‚</p><p>æ˜ å°„æ˜¯è¿™æ ·å®šä¹‰çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//å¯¹äºé‡‘èåº”ç”¨ç¨‹åºï¼Œå°†ç”¨æˆ·çš„ä½™é¢ä¿å­˜åœ¨ä¸€ä¸ª uintç±»å‹çš„å˜é‡ä¸­ï¼š</span><br><span class="line">mapping (address =&gt; uint) public accountBalance;</span><br><span class="line">//æˆ–è€…å¯ä»¥ç”¨æ¥é€šè¿‡userId å­˜å‚¨/æŸ¥æ‰¾çš„ç”¨æˆ·å</span><br><span class="line">mapping (uint =&gt; string) userIdToName;</span><br></pre></td></tr></table></figure><p>æ˜ å°„æœ¬è´¨ä¸Šæ˜¯å­˜å‚¨å’ŒæŸ¥æ‰¾æ•°æ®æ‰€ç”¨çš„é”®-å€¼å¯¹ã€‚åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œé”®æ˜¯ä¸€ä¸ª <code>address</code>ï¼Œå€¼æ˜¯ä¸€ä¸ª <code>uint</code>ï¼Œåœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­ï¼Œé”®æ˜¯ä¸€ä¸ª<code>uint</code>ï¼Œå€¼æ˜¯ä¸€ä¸ª <code>string</code>ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -1"><a href="#å®æˆ˜æ¼”ä¹ -1" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>ä¸ºäº†å­˜å‚¨åƒµå°¸çš„æ‰€æœ‰æƒï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨åˆ°ä¸¤ä¸ªæ˜ å°„ï¼šä¸€ä¸ªè®°å½•åƒµå°¸æ‹¥æœ‰è€…çš„åœ°å€ï¼Œå¦ä¸€ä¸ªè®°å½•æŸåœ°å€æ‰€æ‹¥æœ‰åƒµå°¸çš„æ•°é‡ã€‚</p><p>1.åˆ›å»ºä¸€ä¸ªå«åš <code>zombieToOwner</code> çš„æ˜ å°„ã€‚å…¶é”®æ˜¯ä¸€ä¸ª<code>uint</code>ï¼ˆæˆ‘ä»¬å°†æ ¹æ®å®ƒçš„ id å­˜å‚¨å’ŒæŸ¥æ‰¾åƒµå°¸ï¼‰ï¼Œå€¼ä¸º <code>address</code>ã€‚æ˜ å°„å±æ€§ä¸º<code>public</code>ã€‚</p><p>2.åˆ›å»ºä¸€ä¸ªåä¸º <code>ownerZombieCount</code> çš„æ˜ å°„ï¼Œå…¶ä¸­é”®æ˜¯ <code>address</code>ï¼Œå€¼æ˜¯ <code>uint</code>ã€‚</p><h2 id="åˆçº¦å®Œå–„"><a href="#åˆçº¦å®Œå–„" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>ZombieFactory.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">    event NewZombie(uint zombieId, string name, uint dna);</span><br><span class="line"></span><br><span class="line">    uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">    uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line"></span><br><span class="line">    struct Zombie &#123;</span><br><span class="line">        string name;</span><br><span class="line">        uint dna;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Zombie[] public zombies;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨è¿™é‡Œå®šä¹‰æ˜ å°„</span></span><br><span class="line">    mapping (<span class="function"><span class="params">uint</span> =&gt;</span> address) public zombieToOwner;</span><br><span class="line">    mapping (<span class="function"><span class="params">address</span> =&gt;</span> uint) ownerZombieCount;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_createZombie</span>(<span class="params">string _name, uint _dna</span>) <span class="title">private</span> </span>&#123;</span><br><span class="line">        uint id = zombies.push(Zombie(_name, _dna)) - <span class="number">1</span>;</span><br><span class="line">        NewZombie(id, _name, _dna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_generateRandomDna</span>(<span class="params">string _str</span>) <span class="title">private</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>) </span>&#123;</span><br><span class="line">        uint rand = uint(keccak256(_str));</span><br><span class="line">        <span class="keyword">return</span> rand % dnaModulus;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">createRandomZombie</span>(<span class="params">string _name</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        uint randDna = _generateRandomDna(_name);</span><br><span class="line">        _createZombie(_name, randDna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Msg-sender"><a href="#Msg-sender" class="headerlink" title="Msg.sender"></a>Msg.sender</h1><p>ç°åœ¨æœ‰äº†ä¸€å¥—æ˜ å°„æ¥è®°å½•åƒµå°¸çš„æ‰€æœ‰æƒäº†ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ <code>_createZombie</code> æ–¹æ³•æ¥è¿ç”¨å®ƒä»¬ã€‚</p><p>ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬è¦ç”¨åˆ° <code>msg.sender</code>ã€‚</p><h2 id="msg-sender"><a href="#msg-sender" class="headerlink" title="msg.sender"></a>msg.sender</h2><p>åœ¨ Solidity ä¸­ï¼Œæœ‰ä¸€äº›å…¨å±€å˜é‡å¯ä»¥è¢«æ‰€æœ‰å‡½æ•°è°ƒç”¨ã€‚ å…¶ä¸­ä¸€ä¸ªå°±æ˜¯ <code>msg.sender</code>ï¼Œå®ƒæŒ‡çš„æ˜¯å½“å‰è°ƒç”¨è€…ï¼ˆæˆ–æ™ºèƒ½åˆçº¦ï¼‰çš„ <code>address</code>ã€‚</p><blockquote><p>æ³¨æ„ï¼šåœ¨ Solidity ä¸­ï¼ŒåŠŸèƒ½æ‰§è¡Œå§‹ç»ˆéœ€è¦ä»å¤–éƒ¨è°ƒç”¨è€…å¼€å§‹ã€‚ ä¸€ä¸ªåˆçº¦åªä¼šåœ¨åŒºå—é“¾ä¸Šä»€ä¹ˆä¹Ÿä¸åšï¼Œé™¤éæœ‰äººè°ƒç”¨å…¶ä¸­çš„å‡½æ•°ã€‚æ‰€ä»¥ <code>msg.sender</code>æ€»æ˜¯å­˜åœ¨çš„ã€‚</p></blockquote><p>ä»¥ä¸‹æ˜¯ä½¿ç”¨ <code>msg.sender</code> æ¥æ›´æ–° <code>mapping</code> çš„ä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mapping (<span class="function"><span class="params">address</span> =&gt;</span> uint) favoriteNumber;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setMyNumber</span>(<span class="params">uint _myNumber</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">  <span class="comment">// æ›´æ–°æˆ‘ä»¬çš„ `favoriteNumber` æ˜ å°„æ¥å°† `_myNumber`å­˜å‚¨åœ¨ `msg.sender`åä¸‹</span></span><br><span class="line">  favoriteNumber[msg.sender] = _myNumber;</span><br><span class="line">  <span class="comment">// å­˜å‚¨æ•°æ®è‡³æ˜ å°„çš„æ–¹æ³•å’Œå°†æ•°æ®å­˜å‚¨åœ¨æ•°ç»„ç›¸ä¼¼</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">whatIsMyNumber</span>(<span class="params"></span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ‹¿åˆ°å­˜å‚¨åœ¨è°ƒç”¨è€…åœ°å€åä¸‹çš„å€¼</span></span><br><span class="line">  <span class="comment">// è‹¥è°ƒç”¨è€…è¿˜æ²¡è°ƒç”¨ setMyNumberï¼Œ åˆ™å€¼ä¸º `0`</span></span><br><span class="line">  <span class="keyword">return</span> favoriteNumber[msg.sender];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªå°å°çš„ä¾‹å­ä¸­ï¼Œä»»ä½•äººéƒ½å¯ä»¥è°ƒç”¨ <code>setMyNumber</code> åœ¨æˆ‘ä»¬çš„åˆçº¦ä¸­å­˜ä¸‹ä¸€ä¸ª <code>uint</code> å¹¶ä¸”ä¸ä»–ä»¬çš„åœ°å€ç›¸ç»‘å®šã€‚ ç„¶åï¼Œä»–ä»¬è°ƒç”¨ <code>whatIsMyNumber</code> å°±ä¼šè¿”å›ä»–ä»¬å­˜å‚¨çš„ <code>uint</code>ã€‚</p><p>ä½¿ç”¨ <code>msg.sender</code> å¾ˆå®‰å…¨ï¼Œå› ä¸ºå®ƒå…·æœ‰ä»¥å¤ªåŠåŒºå—é“¾çš„å®‰å…¨ä¿éšœ â€”â€” é™¤éçªƒå–ä¸ä»¥å¤ªåŠåœ°å€ç›¸å…³è”çš„ç§é’¥ï¼Œå¦åˆ™æ˜¯æ²¡æœ‰åŠæ³•ä¿®æ”¹å…¶ä»–äººçš„æ•°æ®çš„ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -2"><a href="#å®æˆ˜æ¼”ä¹ -2" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æˆ‘ä»¬æ¥ä¿®æ”¹ç¬¬1è¯¾çš„ <code>_createZombie</code> æ–¹æ³•ï¼Œå°†åƒµå°¸åˆ†é…ç»™å‡½æ•°è°ƒç”¨è€…å§ã€‚</p><ol><li>é¦–å…ˆï¼Œåœ¨å¾—åˆ°æ–°çš„åƒµå°¸ <code>id</code> åï¼Œæ›´æ–° <code>zombieToOwner</code> æ˜ å°„ï¼Œåœ¨ <code>id</code> ä¸‹é¢å­˜å…¥ <code>msg.sender</code>ã€‚</li><li>ç„¶åï¼Œæˆ‘ä»¬ä¸ºè¿™ä¸ª <code>msg.sender</code> åä¸‹çš„ <code>ownerZombieCount</code> åŠ  1ã€‚</li></ol><p>è·Ÿåœ¨ JavaScript ä¸­ä¸€æ ·ï¼Œ åœ¨ Solidity ä¸­ä½ ä¹Ÿå¯ä»¥ç”¨ <code>++</code> ä½¿ <code>uint</code> é€’å¢ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">uint number = <span class="number">0</span>;</span><br><span class="line">number++;</span><br><span class="line"><span class="comment">// `number` ç°åœ¨æ˜¯ `1`äº†</span></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ä¸¤è¡Œä»£ç å³å¯ã€‚</p><h2 id="åˆçº¦å®Œå–„-1"><a href="#åˆçº¦å®Œå–„-1" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>ZombieFactory.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">    event NewZombie(uint zombieId, string name, uint dna);</span><br><span class="line"></span><br><span class="line">    uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">    uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line"></span><br><span class="line">    struct Zombie &#123;</span><br><span class="line">        string name;</span><br><span class="line">        uint dna;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Zombie[] public zombies;</span><br><span class="line"></span><br><span class="line">    mapping (<span class="function"><span class="params">uint</span> =&gt;</span> address) public zombieToOwner;</span><br><span class="line">    mapping (<span class="function"><span class="params">address</span> =&gt;</span> uint) ownerZombieCount;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_createZombie</span>(<span class="params">string _name, uint _dna</span>) <span class="title">private</span> </span>&#123;</span><br><span class="line">        uint id = zombies.push(Zombie(_name, _dna)) - <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// ä»è¿™é‡Œå¼€å§‹</span></span><br><span class="line">        zombieToOwner[id] = msg.sender;</span><br><span class="line">        ownerZombieCount[msg.sender]++;</span><br><span class="line">        NewZombie(id, _name, _dna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_generateRandomDna</span>(<span class="params">string _str</span>) <span class="title">private</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>) </span>&#123;</span><br><span class="line">        uint rand = uint(keccak256(_str));</span><br><span class="line">        <span class="keyword">return</span> rand % dnaModulus;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">createRandomZombie</span>(<span class="params">string _name</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        uint randDna = _generateRandomDna(_name);</span><br><span class="line">        _createZombie(_name, randDna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Require"><a href="#Require" class="headerlink" title="Require"></a>Require</h1><p>åœ¨ç¬¬ä¸€è¯¾ä¸­ï¼Œæˆ‘ä»¬æˆåŠŸè®©ç”¨æˆ·é€šè¿‡è°ƒç”¨ <code>createRandomZombie</code>å‡½æ•° å¹¶è¾“å…¥ä¸€ä¸ªåå­—æ¥åˆ›å»ºæ–°çš„åƒµå°¸ã€‚ ä½†æ˜¯ï¼Œå¦‚æœç”¨æˆ·èƒ½æŒç»­è°ƒç”¨è¿™ä¸ªå‡½æ•°æ¥åˆ›å»ºå‡ºæ— é™å¤šä¸ªåƒµå°¸åŠ å…¥ä»–ä»¬çš„å†›å›¢ï¼Œè¿™æ¸¸æˆå°±å¤ªæ²¡æ„æ€äº†ï¼</p><p>äºæ˜¯ï¼Œæˆ‘ä»¬ä½œå‡ºé™å®šï¼šæ¯ä¸ªç©å®¶åªèƒ½è°ƒç”¨ä¸€æ¬¡è¿™ä¸ªå‡½æ•°ã€‚ è¿™æ ·ä¸€æ¥ï¼Œæ–°ç©å®¶å¯ä»¥åœ¨åˆšå¼€å§‹ç©æ¸¸æˆæ—¶é€šè¿‡è°ƒç”¨å®ƒï¼Œä¸ºå…¶å†›å›¢åˆ›å»ºåˆå§‹åƒµå°¸ã€‚</p><p>æˆ‘ä»¬æ€æ ·æ‰èƒ½é™å®šæ¯ä¸ªç©å®¶åªè°ƒç”¨ä¸€æ¬¡è¿™ä¸ªå‡½æ•°å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯ä½¿ç”¨<code>require</code>ã€‚ <code>require</code>ä½¿å¾—å‡½æ•°åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå½“ä¸æ»¡è¶³æŸäº›æ¡ä»¶æ—¶æŠ›å‡ºé”™è¯¯ï¼Œå¹¶åœæ­¢æ‰§è¡Œï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHiToVitalik</span>(<span class="params">string _name</span>) <span class="title">public</span> <span class="title">returns</span> (<span class="params">string</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ¯”è¾ƒ _name æ˜¯å¦ç­‰äº "Vitalik". å¦‚æœä¸æˆç«‹ï¼ŒæŠ›å‡ºå¼‚å¸¸å¹¶ç»ˆæ­¢ç¨‹åº</span></span><br><span class="line">  <span class="comment">// (æ•²é»‘æ¿: Solidity å¹¶ä¸æ”¯æŒåŸç”Ÿçš„å­—ç¬¦ä¸²æ¯”è¾ƒ, æˆ‘ä»¬åªèƒ½é€šè¿‡æ¯”è¾ƒ</span></span><br><span class="line">  <span class="comment">// ä¸¤å­—ç¬¦ä¸²çš„ keccak256 å“ˆå¸Œå€¼æ¥è¿›è¡Œåˆ¤æ–­)</span></span><br><span class="line">  <span class="built_in">require</span>(keccak256(_name) == keccak256(<span class="string">"Vitalik"</span>));</span><br><span class="line">  <span class="comment">// å¦‚æœè¿”å› true, è¿è¡Œå¦‚ä¸‹è¯­å¥</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">"Hi!"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ è¿™æ ·è°ƒç”¨å‡½æ•° <code>sayHiToVitalikï¼ˆâ€œVitalikâ€ï¼‰</code> ,å®ƒä¼šè¿”å›â€œHiï¼â€ã€‚è€Œå¦‚æœè°ƒç”¨çš„æ—¶å€™ä½¿ç”¨äº†å…¶ä»–å‚æ•°ï¼Œå®ƒåˆ™ä¼šæŠ›å‡ºé”™è¯¯å¹¶åœæ­¢æ‰§è¡Œã€‚</p><p>å› æ­¤ï¼Œåœ¨è°ƒç”¨ä¸€ä¸ªå‡½æ•°ä¹‹å‰ï¼Œç”¨ <code>require</code> éªŒè¯å‰ç½®æ¡ä»¶æ˜¯éå¸¸æœ‰å¿…è¦çš„ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -3"><a href="#å®æˆ˜æ¼”ä¹ -3" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>åœ¨æˆ‘ä»¬çš„åƒµå°¸æ¸¸æˆä¸­ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›ç”¨æˆ·é€šè¿‡åå¤è°ƒç”¨ <code>createRandomZombie</code> æ¥çµ¦ä»–ä»¬çš„å†›é˜Ÿåˆ›å»ºæ— é™å¤šä¸ªåƒµå°¸ â€”â€” è¿™å°†ä½¿å¾—æ¸¸æˆéå¸¸æ— èŠã€‚</p><p>æˆ‘ä»¬ä½¿ç”¨äº† <code>require</code> æ¥ç¡®ä¿è¿™ä¸ªå‡½æ•°åªæœ‰åœ¨æ¯ä¸ªç”¨æˆ·ç¬¬ä¸€æ¬¡è°ƒç”¨å®ƒçš„æ—¶å€™æ‰§è¡Œï¼Œç”¨ä»¥åˆ›å»ºåˆå§‹åƒµå°¸ã€‚</p><ol><li>åœ¨ <code>createRandomZombie</code> çš„å‰é¢æ”¾ç½® <code>require</code> è¯­å¥ã€‚ ä½¿å¾—å‡½æ•°å…ˆæ£€æŸ¥ <code>ownerZombieCount [msg.sender]</code> çš„å€¼ä¸º <code>0</code> ï¼Œä¸ç„¶å°±æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</li></ol><blockquote><p>æ³¨æ„ï¼šåœ¨ Solidity ä¸­ï¼Œå…³é”®è¯æ”¾ç½®çš„é¡ºåºå¹¶ä¸é‡è¦</p><ul><li>è™½ç„¶å‚æ•°çš„ä¸¤ä¸ªä½ç½®æ˜¯ç­‰æ•ˆçš„ã€‚ ä½†æ˜¯ï¼Œç”±äºæˆ‘ä»¬çš„ç­”æ¡ˆæ£€æŸ¥å™¨æ¯”è¾ƒå‘†æ¿ï¼Œå®ƒåªèƒ½è®¤å®šå…¶ä¸­ä¸€ä¸ªä¸ºæ­£ç¡®ç­”æ¡ˆ</li><li>äºæ˜¯åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°±çº¦å®šæŠŠ<code>ownerZombieCount [msg.sender]</code>æ”¾å‰é¢å§</li></ul></blockquote><h2 id="åˆçº¦å®Œå–„-2"><a href="#åˆçº¦å®Œå–„-2" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>ZombieFactory.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">    event NewZombie(uint zombieId, string name, uint dna);</span><br><span class="line"></span><br><span class="line">    uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">    uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line"></span><br><span class="line">    struct Zombie &#123;</span><br><span class="line">        string name;</span><br><span class="line">        uint dna;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Zombie[] public zombies;</span><br><span class="line"></span><br><span class="line">    mapping (<span class="function"><span class="params">uint</span> =&gt;</span> address) public zombieToOwner;</span><br><span class="line">    mapping (<span class="function"><span class="params">address</span> =&gt;</span> uint) ownerZombieCount;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_createZombie</span>(<span class="params">string _name, uint _dna</span>) <span class="title">private</span> </span>&#123;</span><br><span class="line">        uint id = zombies.push(Zombie(_name, _dna)) - <span class="number">1</span>;</span><br><span class="line">        zombieToOwner[id] = msg.sender;</span><br><span class="line">        ownerZombieCount[msg.sender]++;</span><br><span class="line">        NewZombie(id, _name, _dna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_generateRandomDna</span>(<span class="params">string _str</span>) <span class="title">private</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>) </span>&#123;</span><br><span class="line">        uint rand = uint(keccak256(_str));</span><br><span class="line">        <span class="keyword">return</span> rand % dnaModulus;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">createRandomZombie</span>(<span class="params">string _name</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        <span class="comment">// start here</span></span><br><span class="line">        <span class="built_in">require</span>(ownerZombieCount[msg.sender] == <span class="number">0</span>);</span><br><span class="line">        uint randDna = _generateRandomDna(_name);</span><br><span class="line">        _createZombie(_name, randDna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ç»§æ‰¿ï¼ˆInheritanceï¼‰"><a href="#ç»§æ‰¿ï¼ˆInheritanceï¼‰" class="headerlink" title="ç»§æ‰¿ï¼ˆInheritanceï¼‰"></a>ç»§æ‰¿ï¼ˆInheritanceï¼‰</h1><p>æˆ‘ä»¬çš„æ¸¸æˆä»£ç è¶Šæ¥è¶Šé•¿ã€‚ å½“ä»£ç è¿‡äºå†—é•¿çš„æ—¶å€™ï¼Œæœ€å¥½å°†ä»£ç å’Œé€»è¾‘åˆ†æ‹†åˆ°å¤šä¸ªä¸åŒçš„åˆçº¦ä¸­ï¼Œä»¥ä¾¿äºç®¡ç†ã€‚</p><p>æœ‰ä¸ªè®© Solidity çš„ä»£ç æ˜“äºç®¡ç†çš„åŠŸèƒ½ï¼Œå°±æ˜¯åˆçº¦ <strong>inheritance</strong> (ç»§æ‰¿)ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">contract Doge &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">catchphrase</span>(<span class="params"></span>) <span class="title">public</span> <span class="title">returns</span> (<span class="params">string</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"So Wow CryptoDoge"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract BabyDoge is Doge &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">anotherCatchphrase</span>(<span class="params"></span>) <span class="title">public</span> <span class="title">returns</span> (<span class="params">string</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Such Moon BabyDoge"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äº <code>BabyDoge</code> æ˜¯ä» <code>Doge</code> é‚£é‡Œ <strong>inherits</strong> ï¼ˆç»§æ‰¿)è¿‡æ¥çš„ã€‚ è¿™æ„å‘³ç€å½“ä½ ç¼–è¯‘å’Œéƒ¨ç½²äº† <code>BabyDoge</code>ï¼Œå®ƒå°†å¯ä»¥è®¿é—® <code>catchphrase()</code> å’Œ <code>anotherCatchphrase()</code>å’Œå…¶ä»–æˆ‘ä»¬åœ¨ <code>Doge</code> ä¸­å®šä¹‰çš„å…¶ä»–å…¬å…±å‡½æ•°ã€‚</p><p>è¿™å¯ä»¥ç”¨äºé€»è¾‘ç»§æ‰¿ï¼ˆæ¯”å¦‚è¡¨è¾¾å­ç±»çš„æ—¶å€™ï¼Œ<code>Cat</code> æ˜¯ä¸€ç§ <code>Animal</code>ï¼‰ã€‚ ä½†ä¹Ÿå¯ä»¥ç®€å•åœ°å°†ç±»ä¼¼çš„é€»è¾‘ç»„åˆåˆ°ä¸åŒçš„åˆçº¦ä¸­ä»¥ç»„ç»‡ä»£ç ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -4"><a href="#å®æˆ˜æ¼”ä¹ -4" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>åœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è¦ä¸ºåƒµå°¸å®ç°å„ç§åŠŸèƒ½ï¼Œè®©å®ƒå¯ä»¥â€œçŒé£Ÿâ€å’Œâ€œç¹æ®–â€ã€‚ é€šè¿‡å°†è¿™äº›è¿ç®—æ”¾åˆ°çˆ¶ç±» <code>ZombieFactory</code> ä¸­ï¼Œä½¿å¾—æ‰€æœ‰ <code>ZombieFactory</code> çš„ç»§æ‰¿è€…åˆçº¦éƒ½å¯ä»¥ä½¿ç”¨è¿™äº›æ–¹æ³•ã€‚</p><ol><li>åœ¨ <code>ZombieFactory</code> ä¸‹åˆ›å»ºä¸€ä¸ªå« <code>ZombieFeeding</code> çš„åˆçº¦ï¼Œå®ƒæ˜¯ç»§æ‰¿è‡ª `ZombieFactory åˆçº¦çš„ã€‚</li></ol><h2 id="åˆçº¦å®Œå–„-3"><a href="#åˆçº¦å®Œå–„-3" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>ZombieFactory.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">    event NewZombie(uint zombieId, string name, uint dna);</span><br><span class="line"></span><br><span class="line">    uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">    uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line"></span><br><span class="line">    struct Zombie &#123;</span><br><span class="line">        string name;</span><br><span class="line">        uint dna;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Zombie[] public zombies;</span><br><span class="line"></span><br><span class="line">    mapping (<span class="function"><span class="params">uint</span> =&gt;</span> address) public zombieToOwner;</span><br><span class="line">    mapping (<span class="function"><span class="params">address</span> =&gt;</span> uint) ownerZombieCount;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_createZombie</span>(<span class="params">string _name, uint _dna</span>) <span class="title">private</span> </span>&#123;</span><br><span class="line">        uint id = zombies.push(Zombie(_name, _dna)) - <span class="number">1</span>;</span><br><span class="line">        zombieToOwner[id] = msg.sender;</span><br><span class="line">        ownerZombieCount[msg.sender]++;</span><br><span class="line">        NewZombie(id, _name, _dna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_generateRandomDna</span>(<span class="params">string _str</span>) <span class="title">private</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>) </span>&#123;</span><br><span class="line">        uint rand = uint(keccak256(_str));</span><br><span class="line">        <span class="keyword">return</span> rand % dnaModulus;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">createRandomZombie</span>(<span class="params">string _name</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        <span class="built_in">require</span>(ownerZombieCount[msg.sender] == <span class="number">0</span>);</span><br><span class="line">        uint randDna = _generateRandomDna(_name);</span><br><span class="line">        _createZombie(_name, randDna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Start here</span></span><br><span class="line">contract ZombieFeeding is ZombieFactory &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å¼•å…¥ï¼ˆImportï¼‰"><a href="#å¼•å…¥ï¼ˆImportï¼‰" class="headerlink" title="å¼•å…¥ï¼ˆImportï¼‰"></a>å¼•å…¥ï¼ˆImportï¼‰</h1><p>å“‡ï¼ä½ æœ‰æ²¡æœ‰æ³¨æ„åˆ°ï¼Œæˆ‘ä»¬åªæ˜¯æ¸…ç†äº†ä¸‹å³è¾¹çš„ä»£ç ï¼Œç°åœ¨ä½ çš„ç¼–è¾‘å™¨çš„é¡¶éƒ¨å°±å¤šäº†ä¸ªé€‰é¡¹å¡ã€‚ å°è¯•ç‚¹å‡»å®ƒçš„æ ‡ç­¾ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆå§ï¼</p><p>ä»£ç å·²ç»å¤Ÿé•¿äº†ï¼Œæˆ‘ä»¬æŠŠå®ƒåˆ†æˆå¤šä¸ªæ–‡ä»¶ä»¥ä¾¿äºç®¡ç†ã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼Œå½“ Solidity é¡¹ç›®ä¸­çš„ä»£ç å¤ªé•¿çš„æ—¶å€™æˆ‘ä»¬å°±æ˜¯è¿™ä¹ˆåšçš„ã€‚</p><p>åœ¨ Solidity ä¸­ï¼Œå½“ä½ æœ‰å¤šä¸ªæ–‡ä»¶å¹¶ä¸”æƒ³æŠŠä¸€ä¸ªæ–‡ä»¶å¯¼å…¥å¦ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>import</code> è¯­å¥ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"./someothercontract.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract newContract is SomeOtherContract &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å½“æˆ‘ä»¬åœ¨åˆçº¦ï¼ˆcontractï¼‰ç›®å½•ä¸‹æœ‰ä¸€ä¸ªåä¸º <code>someothercontract.sol</code> çš„æ–‡ä»¶ï¼ˆ <code>./</code> å°±æ˜¯åŒä¸€ç›®å½•çš„æ„æ€ï¼‰ï¼Œå®ƒå°±ä¼šè¢«ç¼–è¯‘å™¨å¯¼å…¥ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -5"><a href="#å®æˆ˜æ¼”ä¹ -5" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>ç°åœ¨æˆ‘ä»¬å·²ç»å»ºç«‹äº†ä¸€ä¸ªå¤šæ–‡ä»¶æ¶æ„ï¼Œå¹¶ç”¨ <code>import</code> æ¥è¯»å–æ¥è‡ªå¦ä¸€ä¸ªæ–‡ä»¶ä¸­åˆçº¦çš„å†…å®¹ï¼š</p><p>1.å°† <code>zombiefactory.sol</code> å¯¼å…¥åˆ°æˆ‘ä»¬çš„æ–°æ–‡ä»¶ <code>zombiefeeding.sol</code> ä¸­ã€‚</p><h2 id="åˆçº¦å®Œå–„-4"><a href="#åˆçº¦å®Œå–„-4" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>zombiefeeding.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// put import statement here</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefactory.sol"</span>;</span><br><span class="line">contract ZombieFeeding is ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Storageä¸Memory"><a href="#Storageä¸Memory" class="headerlink" title="Storageä¸Memory"></a>Storageä¸Memory</h1><p>åœ¨ Solidity ä¸­ï¼Œæœ‰ä¸¤ä¸ªåœ°æ–¹å¯ä»¥å­˜å‚¨å˜é‡ â€”â€” <code>storage</code> æˆ– <code>memory</code>ã€‚</p><p><strong><em>Storage\</em></strong> å˜é‡æ˜¯æŒ‡æ°¸ä¹…å­˜å‚¨åœ¨åŒºå—é“¾ä¸­çš„å˜é‡ã€‚ <strong><em>Memory\</em></strong> å˜é‡åˆ™æ˜¯ä¸´æ—¶çš„ï¼Œå½“å¤–éƒ¨å‡½æ•°å¯¹æŸåˆçº¦è°ƒç”¨å®Œæˆæ—¶ï¼Œå†…å­˜å‹å˜é‡å³è¢«ç§»é™¤ã€‚ ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆå­˜å‚¨åœ¨ä½ ç”µè„‘çš„ç¡¬ç›˜æˆ–æ˜¯RAMä¸­æ•°æ®çš„å…³ç³»ã€‚</p><p>å¤§å¤šæ•°æ—¶å€™ä½ éƒ½ç”¨ä¸åˆ°è¿™äº›å…³é”®å­—ï¼Œé»˜è®¤æƒ…å†µä¸‹ Solidity ä¼šè‡ªåŠ¨å¤„ç†å®ƒä»¬ã€‚ çŠ¶æ€å˜é‡ï¼ˆåœ¨å‡½æ•°ä¹‹å¤–å£°æ˜çš„å˜é‡ï¼‰é»˜è®¤ä¸ºâ€œå­˜å‚¨â€å½¢å¼ï¼Œå¹¶æ°¸ä¹…å†™å…¥åŒºå—é“¾ï¼›è€Œåœ¨å‡½æ•°å†…éƒ¨å£°æ˜çš„å˜é‡æ˜¯â€œå†…å­˜â€å‹çš„ï¼Œå®ƒä»¬å‡½æ•°è°ƒç”¨ç»“æŸåæ¶ˆå¤±ã€‚</p><p>ç„¶è€Œä¹Ÿæœ‰ä¸€äº›æƒ…å†µä¸‹ï¼Œä½ éœ€è¦æ‰‹åŠ¨å£°æ˜å­˜å‚¨ç±»å‹ï¼Œä¸»è¦ç”¨äºå¤„ç†å‡½æ•°å†…çš„ <strong>_ ç»“æ„ä½“ _</strong> å’Œ <strong>_ æ•°ç»„ _</strong> æ—¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">contract SandwichFactory &#123;</span><br><span class="line">  struct Sandwich &#123;</span><br><span class="line">    string name;</span><br><span class="line">    string status;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Sandwich[] sandwiches;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">eatSandwich</span>(<span class="params">uint _index</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Sandwich mySandwich = sandwiches[_index];</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ^ çœ‹ä¸Šå»å¾ˆç›´æ¥ï¼Œä¸è¿‡ Solidity å°†ä¼šç»™å‡ºè­¦å‘Š</span></span><br><span class="line">    <span class="comment">// å‘Šè¯‰ä½ åº”è¯¥æ˜ç¡®åœ¨è¿™é‡Œå®šä¹‰ `storage` æˆ–è€… `memory`ã€‚</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰€ä»¥ä½ åº”è¯¥æ˜ç¡®å®šä¹‰ `storage`:</span></span><br><span class="line">    Sandwich storage mySandwich = sandwiches[_index];</span><br><span class="line">    <span class="comment">// ...è¿™æ · `mySandwich` æ˜¯æŒ‡å‘ `sandwiches[_index]`çš„æŒ‡é’ˆ</span></span><br><span class="line">    <span class="comment">// åœ¨å­˜å‚¨é‡Œï¼Œå¦å¤–...</span></span><br><span class="line">    mySandwich.status = <span class="string">"Eaten!"</span>;</span><br><span class="line">    <span class="comment">// ...è¿™å°†æ°¸ä¹…æŠŠ `sandwiches[_index]` å˜ä¸ºåŒºå—é“¾ä¸Šçš„å­˜å‚¨</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœä½ åªæƒ³è¦ä¸€ä¸ªå‰¯æœ¬ï¼Œå¯ä»¥ä½¿ç”¨`memory`:</span></span><br><span class="line">    Sandwich memory anotherSandwich = sandwiches[_index + <span class="number">1</span>];</span><br><span class="line">    <span class="comment">// ...è¿™æ · `anotherSandwich` å°±ä»…ä»…æ˜¯ä¸€ä¸ªå†…å­˜é‡Œçš„å‰¯æœ¬äº†</span></span><br><span class="line">    <span class="comment">// å¦å¤–</span></span><br><span class="line">    anotherSandwich.status = <span class="string">"Eaten!"</span>;</span><br><span class="line">    <span class="comment">// ...å°†ä»…ä»…ä¿®æ”¹ä¸´æ—¶å˜é‡ï¼Œå¯¹ `sandwiches[_index + 1]` æ²¡æœ‰ä»»ä½•å½±å“</span></span><br><span class="line">    <span class="comment">// ä¸è¿‡ä½ å¯ä»¥è¿™æ ·åš:</span></span><br><span class="line">    sandwiches[_index + <span class="number">1</span>] = anotherSandwich;</span><br><span class="line">    <span class="comment">// ...å¦‚æœä½ æƒ³æŠŠå‰¯æœ¬çš„æ”¹åŠ¨ä¿å­˜å›åŒºå—é“¾å­˜å‚¨</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ è¿˜æ²¡æœ‰å®Œå…¨ç†è§£ç©¶ç«Ÿåº”è¯¥ä½¿ç”¨å“ªä¸€ä¸ªï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒ â€”â€” åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†å‘Šè¯‰ä½ ä½•æ—¶ä½¿ç”¨ <code>storage</code> æˆ–æ˜¯ <code>memory</code>ï¼Œå¹¶ä¸”å½“ä½ ä¸å¾—ä¸ä½¿ç”¨åˆ°è¿™äº›å…³é”®å­—çš„æ—¶å€™ï¼ŒSolidity ç¼–è¯‘å™¨ä¹Ÿå‘è­¦ç¤ºæé†’ä½ çš„ã€‚</p><p>ç°åœ¨ï¼Œåªè¦çŸ¥é“åœ¨æŸäº›åœºåˆä¸‹ä¹Ÿéœ€è¦ä½ æ˜¾å¼åœ°å£°æ˜ <code>storage</code> æˆ– <code>memory</code>å°±å¤Ÿäº†ï¼</p><h2 id="å®æˆ˜æ¼”ä¹ -6"><a href="#å®æˆ˜æ¼”ä¹ -6" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æ˜¯æ—¶å€™ç»™æˆ‘ä»¬çš„åƒµå°¸å¢åŠ â€œçŒé£Ÿâ€å’Œâ€œç¹æ®–â€åŠŸèƒ½äº†ï¼</p><p>å½“ä¸€ä¸ªåƒµå°¸çŒé£Ÿå…¶ä»–ç”Ÿç‰©ä½“æ—¶ï¼Œå®ƒè‡ªèº«çš„DNAå°†ä¸çŒç‰©ç”Ÿç‰©çš„DNAç»“åˆåœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„åƒµå°¸DNAã€‚</p><ol><li>åˆ›å»ºä¸€ä¸ªåä¸º <code>feedAndMultiply</code> çš„å‡½æ•°ã€‚ ä½¿ç”¨ä¸¤ä¸ªå‚æ•°ï¼š<code>_zombieId</code>ï¼ˆ <code>uint</code>ç±»å‹ ï¼‰å’Œ<code>_targetDna</code> ï¼ˆä¹Ÿæ˜¯ <code>uint</code> ç±»å‹ï¼‰ã€‚ è®¾ç½®å±æ€§ä¸º <code>public</code> çš„ã€‚</li><li>æˆ‘ä»¬ä¸å¸Œæœ›åˆ«äººç”¨æˆ‘ä»¬çš„åƒµå°¸å»æ•çŒã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬ç¡®ä¿å¯¹è‡ªå·±åƒµå°¸çš„æ‰€æœ‰æƒã€‚ é€šè¿‡æ·»åŠ ä¸€ä¸ª<code>require</code> è¯­å¥æ¥ç¡®ä¿ <code>msg.sender</code> åªèƒ½æ˜¯è¿™ä¸ªåƒµå°¸çš„ä¸»äººï¼ˆç±»ä¼¼äºæˆ‘ä»¬åœ¨ <code>createRandomZombie</code> å‡½æ•°ä¸­åšè¿‡çš„é‚£æ ·ï¼‰ã€‚</li></ol><blockquote><p>æ³¨æ„ï¼šåŒæ ·ï¼Œå› ä¸ºæˆ‘ä»¬çš„ç­”æ¡ˆæ£€æŸ¥å™¨æ¯”è¾ƒå‘†èŒï¼Œåªè®¤è¯†æŠŠ <code>msg.sender</code> æ”¾åœ¨å‰é¢çš„ç­”æ¡ˆï¼Œå¦‚æœä½ åˆ‡æ¢äº†å‚æ•°çš„é¡ºåºï¼Œå®ƒå°±ä¸è®¤å¾—äº†ã€‚ ä½†ä½ æ­£å¸¸ç¼–ç æ—¶ï¼Œå¦‚ä½•å®‰æ’å‚æ•°é¡ºåºéƒ½æ˜¯æ­£ç¡®çš„ã€‚</p></blockquote><ol><li>ä¸ºäº†è·å–è¿™ä¸ªåƒµå°¸çš„DNAï¼Œæˆ‘ä»¬çš„å‡½æ•°éœ€è¦å£°æ˜ä¸€ä¸ªåä¸º <code>myZombie</code> æ•°æ®ç±»å‹ä¸º<code>Zombie</code>çš„æœ¬åœ°å˜é‡ï¼ˆè¿™æ˜¯ä¸€ä¸ª <code>storage</code> å‹çš„æŒ‡é’ˆï¼‰ã€‚ å°†å…¶å€¼è®¾å®šä¸ºåœ¨ <code>zombies</code> æ•°ç»„ä¸­ç´¢å¼•ä¸º<code>_zombieId</code>æ‰€æŒ‡å‘çš„å€¼ã€‚</li></ol><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒåŒ…æ‹¬å‡½æ•°ç»“æŸç¬¦ <code>}</code> çš„é‚£ä¸€è¡Œï¼Œ æ€»å…±4è¡Œä»£ç ã€‚</p><p>ä¸‹ä¸€ç« é‡Œï¼Œæˆ‘ä»¬ä¼šç»§ç»­ä¸°å¯Œè¿™ä¸ªåŠŸèƒ½ã€‚</p><h2 id="åˆçº¦å®Œå–„-5"><a href="#åˆçº¦å®Œå–„-5" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>zombiefeeding.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefactory.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFeeding is ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Start here</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedAndMultiply</span>(<span class="params">uint _zombieId, uint _targetDna</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    Zombie storage myZombie = zombies[_zombieId];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åƒµå°¸çš„DNA"><a href="#åƒµå°¸çš„DNA" class="headerlink" title="åƒµå°¸çš„DNA"></a>åƒµå°¸çš„DNA</h1><p>æˆ‘ä»¬æ¥æŠŠ <code>feedAndMultiply</code> å‡½æ•°å†™å®Œå§ã€‚</p><p>è·å–æ–°çš„åƒµå°¸DNAçš„å…¬å¼å¾ˆç®€å•ï¼šè®¡ç®—çŒé£Ÿåƒµå°¸DNAå’Œè¢«çŒåƒµå°¸DNAä¹‹é—´çš„å¹³å‡å€¼ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testDnaSplicing</span>(<span class="params"></span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">  uint zombieDna = <span class="number">2222222222222222</span>;</span><br><span class="line">  uint targetDna = <span class="number">4444444444444444</span>;</span><br><span class="line">  uint newZombieDna = (zombieDna + targetDna) / <span class="number">2</span>;</span><br><span class="line">  <span class="comment">// newZombieDna å°†ç­‰äº 3333333333333333</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥åï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®©å‡½æ•°å˜å¾—æ›´å¤æ‚äº›ï¼Œæ¯”æ–¹ç»™æ–°çš„åƒµå°¸çš„ DNA å¢åŠ ä¸€äº›éšæœºæ€§ä¹‹ç±»çš„ã€‚ä½†ç°åœ¨å…ˆä»æœ€ç®€å•çš„å¼€å§‹ â€”â€” ä»¥åè¿˜å¯ä»¥å›æ¥å®Œå–„å®ƒå˜›ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -7"><a href="#å®æˆ˜æ¼”ä¹ -7" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><ol><li>é¦–å…ˆæˆ‘ä»¬ç¡®ä¿ <code>_targetDna</code> ä¸é•¿äº16ä½ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½® <code>_targetDna</code> ä¸º <code>_targetDna ï¼… dnaModulus</code> ï¼Œå¹¶ä¸”åªå–å…¶æœ€å16ä½æ•°å­—ã€‚</li><li>æ¥ä¸‹æ¥ä¸ºæˆ‘ä»¬çš„å‡½æ•°å£°æ˜ä¸€ä¸ªåå« <code>newDna</code> çš„ <code>uint</code>ç±»å‹çš„å˜é‡ï¼Œå¹¶å°†å…¶å€¼è®¾ç½®ä¸º <code>myZombie</code>çš„ DNA å’Œ <code>_targetDna</code> çš„å¹³å‡å€¼ï¼ˆå¦‚ä¸Šä¾‹æ‰€ç¤ºï¼‰ã€‚</li></ol><blockquote><p>æ³¨æ„ï¼šæ‚¨å¯ä»¥ç”¨ <code>myZombie.name</code> æˆ– <code>myZombie.dna</code> è®¿é—® <code>myZombie</code> çš„å±æ€§ã€‚</p></blockquote><ol><li>ä¸€æ—¦æˆ‘ä»¬è®¡ç®—å‡ºæ–°çš„DNAï¼Œå†è°ƒç”¨ <code>_createZombie</code> å°±å¯ä»¥ç”Ÿæˆæ–°çš„åƒµå°¸äº†ã€‚å¦‚æœä½ å¿˜äº†è°ƒç”¨è¿™ä¸ªå‡½æ•°æ‰€éœ€è¦çš„å‚æ•°ï¼Œå¯ä»¥æŸ¥çœ‹ <code>zombiefactory.sol</code> é€‰é¡¹å¡ã€‚è¯·æ³¨æ„ï¼Œéœ€è¦å…ˆç»™å®ƒå‘½åï¼Œæ‰€ä»¥ç°åœ¨æˆ‘ä»¬æŠŠæ–°çš„åƒµå°¸çš„åå­—è®¾ä¸º<code>NoName</code> - æˆ‘ä»¬å›å¤´å¯ä»¥ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥æ›´æ”¹åƒµå°¸çš„åå­—ã€‚</li></ol><blockquote><p>æ³¨æ„ï¼šå¯¹äº Solidity é«˜æ‰‹ï¼Œä½ å¯èƒ½ä¼šæ³¨æ„åˆ°æˆ‘ä»¬çš„ä»£ç å­˜åœ¨ä¸€ä¸ªé—®é¢˜ã€‚åˆ«æ‹…å¿ƒï¼Œä¸‹ä¸€ç« ä¼šè§£å†³è¿™ä¸ªé—®é¢˜çš„ ;ï¼‰</p></blockquote><h2 id="åˆçº¦å®Œå–„-6"><a href="#åˆçº¦å®Œå–„-6" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>zombiefeeding.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefactory.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFeeding is ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedAndMultiply</span>(<span class="params">uint _zombieId, uint _targetDna</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    Zombie storage myZombie = zombies[_zombieId];</span><br><span class="line">    <span class="comment">// start here</span></span><br><span class="line">    _targetDna = _targetDna % dnaModulus;</span><br><span class="line">    uint newDna = (myZombie.dna + _targetDna) / <span class="number">2</span>;</span><br><span class="line">    _createZombie(<span class="string">"NoName"</span>, newDna);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ›´å¤šå…³äºå‡½æ•°å¯è§æ€§"><a href="#æ›´å¤šå…³äºå‡½æ•°å¯è§æ€§" class="headerlink" title="æ›´å¤šå…³äºå‡½æ•°å¯è§æ€§"></a>æ›´å¤šå…³äºå‡½æ•°å¯è§æ€§</h1><p><strong>æˆ‘ä»¬ä¸Šä¸€è¯¾çš„ä»£ç æœ‰é—®é¢˜ï¼</strong></p><p>ç¼–è¯‘çš„æ—¶å€™ç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ã€‚</p><p>é”™è¯¯åœ¨äºï¼Œæˆ‘ä»¬å°è¯•ä» <code>ZombieFeeding</code> ä¸­è°ƒç”¨ <code>_createZombie</code> å‡½æ•°ï¼Œä½† <code>_createZombie</code> å´æ˜¯ <code>ZombieFactory</code> çš„ <code>private</code> ï¼ˆç§æœ‰ï¼‰å‡½æ•°ã€‚è¿™æ„å‘³ç€ä»»ä½•ç»§æ‰¿è‡ª <code>ZombieFactory</code> çš„å­åˆçº¦éƒ½ä¸èƒ½è®¿é—®å®ƒã€‚</p><h2 id="internal-å’Œ-external"><a href="#internal-å’Œ-external" class="headerlink" title="internal å’Œ external"></a>internal å’Œ external</h2><p>é™¤ <code>public</code> å’Œ <code>private</code> å±æ€§ä¹‹å¤–ï¼ŒSolidity è¿˜ä½¿ç”¨äº†å¦å¤–ä¸¤ä¸ªæè¿°å‡½æ•°å¯è§æ€§çš„ä¿®é¥°è¯ï¼š<code>internal</code>ï¼ˆå†…éƒ¨ï¼‰ å’Œ <code>external</code>ï¼ˆå¤–éƒ¨ï¼‰ã€‚</p><p><code>internal</code> å’Œ <code>private</code> ç±»ä¼¼ï¼Œä¸è¿‡ï¼Œ å¦‚æœæŸä¸ªåˆçº¦ç»§æ‰¿è‡ªå…¶çˆ¶åˆçº¦ï¼Œè¿™ä¸ªåˆçº¦å³å¯ä»¥è®¿é—®çˆ¶åˆçº¦ä¸­å®šä¹‰çš„â€œå†…éƒ¨â€å‡½æ•°ã€‚ï¼ˆå˜¿ï¼Œè¿™å¬èµ·æ¥æ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„é‚£æ ·ï¼ï¼‰ã€‚</p><p><code>external</code> ä¸<code>public</code> ç±»ä¼¼ï¼Œåªä¸è¿‡è¿™äº›å‡½æ•°åªèƒ½åœ¨åˆçº¦ä¹‹å¤–è°ƒç”¨ - å®ƒä»¬ä¸èƒ½è¢«åˆçº¦å†…çš„å…¶ä»–å‡½æ•°è°ƒç”¨ã€‚ç¨åæˆ‘ä»¬å°†è®¨è®ºä»€ä¹ˆæ—¶å€™ä½¿ç”¨ <code>external</code> å’Œ <code>public</code>ã€‚</p><p>å£°æ˜å‡½æ•° <code>internal</code> æˆ– <code>external</code> ç±»å‹çš„è¯­æ³•ï¼Œä¸å£°æ˜ <code>private</code> å’Œ <code>public</code>ç±» å‹ç›¸åŒï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">contract Sandwich &#123;</span><br><span class="line">  uint private sandwichesEaten = 0;</span><br><span class="line"></span><br><span class="line">  function eat() internal &#123;</span><br><span class="line">    sandwichesEaten++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract BLT is Sandwich &#123;</span><br><span class="line">  uint private baconSandwichesEaten = 0;</span><br><span class="line"></span><br><span class="line">  function eatWithBacon() public returns (string) &#123;</span><br><span class="line">    baconSandwichesEaten++;</span><br><span class="line">    // å› ä¸ºeat() æ˜¯internal çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬èƒ½åœ¨è¿™é‡Œè°ƒç”¨</span><br><span class="line">    eat();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®æˆ˜æ¼”ä¹ -8"><a href="#å®æˆ˜æ¼”ä¹ -8" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><ol><li><p>å°† <code>_createZombie()</code> å‡½æ•°çš„å±æ€§ä» <code>private</code> æ”¹ä¸º <code>internal</code> ï¼Œ ä½¿å¾—å…¶ä»–çš„åˆçº¦ä¹Ÿèƒ½è®¿é—®åˆ°å®ƒã€‚</p><p>æˆ‘ä»¬å·²ç»æˆåŠŸæŠŠä½ çš„æ³¨æ„åŠ›é›†ä¸­åœ¨åˆ°<code>zombiefactory.sol</code>è¿™ä¸ªé€‰é¡¹å¡ä¸Šå•¦ã€‚</p></li></ol><h2 id="åˆçº¦å®Œå–„-7"><a href="#åˆçº¦å®Œå–„-7" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>ZombieFactory.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">    event NewZombie(uint zombieId, string name, uint dna);</span><br><span class="line"></span><br><span class="line">    uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">    uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line"></span><br><span class="line">    struct Zombie &#123;</span><br><span class="line">        string name;</span><br><span class="line">        uint dna;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Zombie[] public zombies;</span><br><span class="line"></span><br><span class="line">    mapping (<span class="function"><span class="params">uint</span> =&gt;</span> address) public zombieToOwner;</span><br><span class="line">    mapping (<span class="function"><span class="params">address</span> =&gt;</span> uint) ownerZombieCount;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨è¿™é‡Œä¿®æ”¹å‡½æ•°çš„åŠŸèƒ½</span></span><br><span class="line">    <span class="comment">//function _createZombie(string _name, uint _dna) private &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_createZombie</span>(<span class="params">string _name, uint _dna</span>) <span class="title">internal</span> </span>&#123;</span><br><span class="line">        uint id = zombies.push(Zombie(_name, _dna)) - <span class="number">1</span>;</span><br><span class="line">        zombieToOwner[id] = msg.sender;</span><br><span class="line">        ownerZombieCount[msg.sender]++;</span><br><span class="line">        NewZombie(id, _name, _dna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_generateRandomDna</span>(<span class="params">string _str</span>) <span class="title">private</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>) </span>&#123;</span><br><span class="line">        uint rand = uint(keccak256(_str));</span><br><span class="line">        <span class="keyword">return</span> rand % dnaModulus;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">createRandomZombie</span>(<span class="params">string _name</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        <span class="built_in">require</span>(ownerZombieCount[msg.sender] == <span class="number">0</span>);</span><br><span class="line">        uint randDna = _generateRandomDna(_name);</span><br><span class="line">        _createZombie(_name, randDna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åƒµå°¸åƒä»€ä¹ˆ"><a href="#åƒµå°¸åƒä»€ä¹ˆ" class="headerlink" title="åƒµå°¸åƒä»€ä¹ˆ?"></a>åƒµå°¸åƒä»€ä¹ˆ?</h1><p>æ˜¯æ—¶å€™è®©æˆ‘ä»¬çš„åƒµå°¸å»æ•çŒï¼ é‚£åƒµå°¸æœ€å–œæ¬¢çš„é£Ÿç‰©æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>Crypto åƒµå°¸å–œæ¬¢åƒçš„æ˜¯â€¦</p><p><strong>CryptoKittiesï¼</strong> ğŸ˜±ğŸ˜±ğŸ˜±</p><p>ï¼ˆæ­£ç»ç‚¹ï¼Œæˆ‘å¯ä¸æ˜¯å¼€ç©ç¬‘ğŸ˜†ï¼‰</p><p>ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬è¦è¯»å‡º CryptoKitties æ™ºèƒ½åˆçº¦ä¸­çš„ kittyDnaã€‚è¿™äº›æ•°æ®æ˜¯å…¬å¼€å­˜å‚¨åœ¨åŒºå—é“¾ä¸Šçš„ã€‚åŒºå—é“¾æ˜¯ä¸æ˜¯å¾ˆé…·ï¼Ÿ</p><p>åˆ«æ‹…å¿ƒ â€”â€” æˆ‘ä»¬çš„æ¸¸æˆå¹¶ä¸ä¼šä¼¤å®³åˆ°ä»»ä½•çœŸæ­£çš„CryptoKittyã€‚ æˆ‘ä»¬åª <em>è¯»å–</em> CryptoKitties æ•°æ®ï¼Œä½†å´æ— æ³•åœ¨ç‰©ç†ä¸Šåˆ é™¤å®ƒã€‚</p><h2 id="ä¸å…¶ä»–åˆçº¦çš„äº¤äº’"><a href="#ä¸å…¶ä»–åˆçº¦çš„äº¤äº’" class="headerlink" title="ä¸å…¶ä»–åˆçº¦çš„äº¤äº’"></a>ä¸å…¶ä»–åˆçº¦çš„äº¤äº’</h2><p>å¦‚æœæˆ‘ä»¬çš„åˆçº¦éœ€è¦å’ŒåŒºå—é“¾ä¸Šçš„å…¶ä»–çš„åˆçº¦ä¼šè¯ï¼Œåˆ™éœ€å…ˆå®šä¹‰ä¸€ä¸ª <strong><em>interface\</em></strong> (æ¥å£)ã€‚</p><p>å…ˆä¸¾ä¸€ä¸ªç®€å•çš„æ —å­ã€‚ å‡è®¾åœ¨åŒºå—é“¾ä¸Šæœ‰è¿™ä¹ˆä¸€ä¸ªåˆçº¦ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">contract LuckyNumber &#123;</span><br><span class="line">  mapping(<span class="function"><span class="params">address</span> =&gt;</span> uint) numbers;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">setNum</span>(<span class="params">uint _num</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    numbers[msg.sender] = _num;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getNum</span>(<span class="params">address _myAddress</span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> numbers[_myAddress];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸ªå¾ˆç®€å•çš„åˆçº¦ï¼Œæ‚¨å¯ä»¥ç”¨å®ƒå­˜å‚¨è‡ªå·±çš„å¹¸è¿å·ç ï¼Œå¹¶å°†å…¶ä¸æ‚¨çš„ä»¥å¤ªåŠåœ°å€å…³è”ã€‚ è¿™æ ·å…¶ä»–äººå°±å¯ä»¥é€šè¿‡æ‚¨çš„åœ°å€æŸ¥æ‰¾æ‚¨çš„å¹¸è¿å·ç äº†ã€‚</p><p>ç°åœ¨å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå¤–éƒ¨åˆçº¦ï¼Œä½¿ç”¨ <code>getNum</code> å‡½æ•°å¯è¯»å–å…¶ä¸­çš„æ•°æ®ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰ <code>LuckyNumber</code> åˆçº¦çš„ <strong><em>interface\</em></strong> ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">contract NumberInterface &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getNum</span>(<span class="params">address _myAddress</span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>);</span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œè¿™ä¸ªè¿‡ç¨‹è™½ç„¶çœ‹èµ·æ¥åƒåœ¨å®šä¹‰ä¸€ä¸ªåˆçº¦ï¼Œä½†å…¶å®å†…é‡Œä¸åŒï¼š</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬åªå£°æ˜äº†è¦ä¸ä¹‹äº¤äº’çš„å‡½æ•° â€”â€” åœ¨æœ¬ä¾‹ä¸­ä¸º <code>getNum</code> â€”â€” åœ¨å…¶ä¸­æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨åˆ°ä»»ä½•å…¶ä»–çš„å‡½æ•°æˆ–çŠ¶æ€å˜é‡ã€‚</p><p>å…¶æ¬¡ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰ä½¿ç”¨å¤§æ‹¬å·ï¼ˆ<code>{</code> å’Œ <code>}</code>ï¼‰å®šä¹‰å‡½æ•°ä½“ï¼Œæˆ‘ä»¬å•å•ç”¨åˆ†å·ï¼ˆ<code>;</code>ï¼‰ç»“æŸäº†å‡½æ•°å£°æ˜ã€‚è¿™ä½¿å®ƒçœ‹èµ·æ¥åƒä¸€ä¸ªåˆçº¦æ¡†æ¶ã€‚</p><p>ç¼–è¯‘å™¨å°±æ˜¯é è¿™äº›ç‰¹å¾è®¤å‡ºå®ƒæ˜¯ä¸€ä¸ªæ¥å£çš„ã€‚</p><p>åœ¨æˆ‘ä»¬çš„ app ä»£ç ä¸­ä½¿ç”¨è¿™ä¸ªæ¥å£ï¼Œåˆçº¦å°±çŸ¥é“å…¶ä»–åˆçº¦çš„å‡½æ•°æ˜¯æ€æ ·çš„ï¼Œåº”è¯¥å¦‚ä½•è°ƒç”¨ï¼Œä»¥åŠå¯æœŸå¾…ä»€ä¹ˆç±»å‹çš„è¿”å›å€¼ã€‚</p><p>åœ¨ä¸‹ä¸€è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†çœŸæ­£è°ƒç”¨å…¶ä»–åˆçº¦çš„å‡½æ•°ã€‚ç›®å‰æˆ‘ä»¬åªè¦å£°æ˜ä¸€ä¸ªæ¥å£ï¼Œç”¨äºè°ƒç”¨ CryptoKitties åˆçº¦å°±è¡Œäº†ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -9"><a href="#å®æˆ˜æ¼”ä¹ -9" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æˆ‘ä»¬å·²ç»ä¸ºä½ æŸ¥çœ‹è¿‡äº† CryptoKitties çš„æºä»£ç ï¼Œå¹¶ä¸”æ‰¾åˆ°äº†ä¸€ä¸ªåä¸º <code>getKitty</code>çš„å‡½æ•°ï¼Œå®ƒè¿”å›æ‰€æœ‰çš„åŠ å¯†çŒ«çš„æ•°æ®ï¼ŒåŒ…æ‹¬å®ƒçš„â€œåŸºå› â€ï¼ˆæˆ‘ä»¬çš„åƒµå°¸æ¸¸æˆè¦ç”¨å®ƒç”Ÿæˆæ–°çš„åƒµå°¸ï¼‰ã€‚</p><p>è¯¥å‡½æ•°å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getKitty</span>(<span class="params">uint256 _id</span>) <span class="title">external</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    bool isGestating,</span></span></span><br><span class="line"><span class="function"><span class="params">    bool isReady,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 cooldownIndex,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 nextActionAt,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 siringWithId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 birthTime,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 matronId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 sireId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 generation,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 genes</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">    Kitty storage kit = kitties[_id];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// if this variable is 0 then it's not gestating</span></span><br><span class="line">    isGestating = (kit.siringWithId != <span class="number">0</span>);</span><br><span class="line">    isReady = (kit.cooldownEndBlock &lt;= block.number);</span><br><span class="line">    cooldownIndex = uint256(kit.cooldownIndex);</span><br><span class="line">    nextActionAt = uint256(kit.cooldownEndBlock);</span><br><span class="line">    siringWithId = uint256(kit.siringWithId);</span><br><span class="line">    birthTime = uint256(kit.birthTime);</span><br><span class="line">    matronId = uint256(kit.matronId);</span><br><span class="line">    sireId = uint256(kit.sireId);</span><br><span class="line">    generation = uint256(kit.generation);</span><br><span class="line">    genes = kit.genes;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‡½æ•°çœ‹èµ·æ¥è·Ÿæˆ‘ä»¬ä¹ æƒ¯çš„å‡½æ•°ä¸å¤ªä¸€æ ·ã€‚ å®ƒç«Ÿç„¶è¿”å›äº†â€¦ä¸€å †ä¸åŒçš„å€¼ï¼ å¦‚æœæ‚¨ç”¨è¿‡ JavaScript ä¹‹ç±»çš„ç¼–ç¨‹è¯­è¨€ï¼Œä¸€å®šä¼šæ„Ÿåˆ°å¥‡æ€ª â€”â€” åœ¨ Solidityä¸­ï¼Œæ‚¨å¯ä»¥è®©ä¸€ä¸ªå‡½æ•°è¿”å›å¤šä¸ªå€¼ã€‚</p><p>ç°åœ¨æˆ‘ä»¬çŸ¥é“è¿™ä¸ªå‡½æ•°é•¿ä»€ä¹ˆæ ·çš„äº†ï¼Œå°±å¯ä»¥ç”¨å®ƒæ¥åˆ›å»ºä¸€ä¸ªæ¥å£ï¼š</p><p>1.å®šä¹‰ä¸€ä¸ªåä¸º <code>KittyInterface</code> çš„æ¥å£ã€‚ è¯·æ³¨æ„ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº† <code>contract</code> å…³é”®å­—ï¼Œ è¿™è¿‡ç¨‹çœ‹èµ·æ¥å°±åƒåˆ›å»ºä¸€ä¸ªæ–°çš„åˆçº¦ä¸€æ ·ã€‚</p><p>2.åœ¨interfaceé‡Œå®šä¹‰äº† <code>getKitty</code> å‡½æ•°ï¼ˆä¸è¿‡æ˜¯å¤åˆ¶/ç²˜è´´ä¸Šé¢çš„å‡½æ•°ï¼Œä½†åœ¨ <code>returns</code> è¯­å¥ä¹‹åç”¨åˆ†å·ï¼Œè€Œä¸æ˜¯å¤§æ‹¬å·å†…çš„æ‰€æœ‰å†…å®¹ã€‚</p><h2 id="åˆçº¦å®Œå–„-8"><a href="#åˆçº¦å®Œå–„-8" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>zombiefeeding.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefactory.sol"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Create KittyInterface here</span></span><br><span class="line">contract KittyInterface &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getKitty</span>(<span class="params">uint256 _id</span>) <span class="title">external</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    bool isGestating,</span></span></span><br><span class="line"><span class="function"><span class="params">    bool isReady,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 cooldownIndex,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 nextActionAt,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 siringWithId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 birthTime,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 matronId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 sireId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 generation,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 genes</span></span></span><br><span class="line"><span class="function"><span class="params">  </span>);</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">contract</span> <span class="title">ZombieFeeding</span> <span class="title">is</span> <span class="title">ZombieFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedAndMultiply</span>(<span class="params">uint _zombieId, uint _targetDna</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    Zombie storage myZombie = zombies[_zombieId];</span><br><span class="line">    _targetDna = _targetDna % dnaModulus;</span><br><span class="line">    uint newDna = (myZombie.dna + _targetDna) / <span class="number">2</span>;</span><br><span class="line">    _createZombie(<span class="string">"NoName"</span>, newDna);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨æ¥å£"><a href="#ä½¿ç”¨æ¥å£" class="headerlink" title="ä½¿ç”¨æ¥å£"></a>ä½¿ç”¨æ¥å£</h1><p>ç»§ç»­å‰é¢ <code>NumberInterface</code> çš„ä¾‹å­ï¼Œæˆ‘ä»¬æ—¢ç„¶å°†æ¥å£å®šä¹‰ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">contract NumberInterface &#123;</span><br><span class="line">  function getNum(address _myAddress) public view returns (uint);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥åœ¨åˆçº¦ä¸­è¿™æ ·ä½¿ç”¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">contract MyContract &#123;</span><br><span class="line">  address NumberInterfaceAddress = 0xab38...;</span><br><span class="line">  // ^ è¿™æ˜¯FavoriteNumberåˆçº¦åœ¨ä»¥å¤ªåŠä¸Šçš„åœ°å€</span><br><span class="line">  NumberInterface numberContract = NumberInterface(NumberInterfaceAddress);</span><br><span class="line">  // ç°åœ¨å˜é‡ `numberContract` æŒ‡å‘å¦ä¸€ä¸ªåˆçº¦å¯¹è±¡</span><br><span class="line"></span><br><span class="line">  function someFunction() public &#123;</span><br><span class="line">    // ç°åœ¨æˆ‘ä»¬å¯ä»¥è°ƒç”¨åœ¨é‚£ä¸ªåˆçº¦ä¸­å£°æ˜çš„ `getNum`å‡½æ•°:</span><br><span class="line">    uint num = numberContract.getNum(msg.sender);</span><br><span class="line">    // ...åœ¨è¿™å„¿ä½¿ç”¨ `num`å˜é‡åšäº›ä»€ä¹ˆ</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œåªè¦å°†æ‚¨åˆçº¦çš„å¯è§æ€§è®¾ç½®ä¸º<code>public</code>(å…¬å…±)æˆ–<code>external</code>(å¤–éƒ¨)ï¼Œå®ƒä»¬å°±å¯ä»¥ä¸ä»¥å¤ªåŠåŒºå—é“¾ä¸Šçš„ä»»ä½•å…¶ä»–åˆçº¦è¿›è¡Œäº¤äº’ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -10"><a href="#å®æˆ˜æ¼”ä¹ -10" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æˆ‘ä»¬æ¥å»ºä¸ªè‡ªå·±çš„åˆçº¦å»è¯»å–å¦ä¸€ä¸ªæ™ºèƒ½åˆçº¦â€“ CryptoKitties çš„å†…å®¹å§ï¼</p><ol><li>æˆ‘å·²ç»å°†ä»£ç ä¸­ CryptoKitties åˆçº¦çš„åœ°å€ä¿å­˜åœ¨ä¸€ä¸ªåä¸º <code>ckAddress</code> çš„å˜é‡ä¸­ã€‚åœ¨ä¸‹ä¸€è¡Œä¸­ï¼Œè¯·åˆ›å»ºä¸€ä¸ªåä¸º <code>kittyContract</code> çš„ KittyInterfaceï¼Œå¹¶ç”¨ <code>ckAddress</code> ä¸ºå®ƒåˆå§‹åŒ– â€”â€” å°±åƒæˆ‘ä»¬ä¸º <code>numberContract</code>æ‰€åšçš„ä¸€æ ·ã€‚</li></ol><h2 id="åˆçº¦å®Œå–„-9"><a href="#åˆçº¦å®Œå–„-9" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>zombiefeeding.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefactory.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract KittyInterface &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getKitty</span>(<span class="params">uint256 _id</span>) <span class="title">external</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    bool isGestating,</span></span></span><br><span class="line"><span class="function"><span class="params">    bool isReady,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 cooldownIndex,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 nextActionAt,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 siringWithId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 birthTime,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 matronId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 sireId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 generation,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 genes</span></span></span><br><span class="line"><span class="function"><span class="params">  </span>);</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">contract</span> <span class="title">ZombieFeeding</span> <span class="title">is</span> <span class="title">ZombieFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  address ckAddress = <span class="number">0x06012c8cf97BEaD5deAe237070F9587f8E7A266d</span>;</span><br><span class="line">  <span class="comment">// Initialize kittyContract here using `ckAddress` from above</span></span><br><span class="line">  KittyInterface kittyContract = KittyInterface(ckAddress);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedAndMultiply</span>(<span class="params">uint _zombieId, uint _targetDna</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    Zombie storage myZombie = zombies[_zombieId];</span><br><span class="line">    _targetDna = _targetDna % dnaModulus;</span><br><span class="line">    uint newDna = (myZombie.dna + _targetDna) / <span class="number">2</span>;</span><br><span class="line">    _createZombie(<span class="string">"NoName"</span>, newDna);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å¤„ç†å¤šè¿”å›å€¼"><a href="#å¤„ç†å¤šè¿”å›å€¼" class="headerlink" title="å¤„ç†å¤šè¿”å›å€¼"></a>å¤„ç†å¤šè¿”å›å€¼</h1><p><code>getKitty</code> æ˜¯æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ç¬¬ä¸€ä¸ªè¿”å›å¤šä¸ªå€¼çš„å‡½æ•°ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹æ˜¯å¦‚ä½•å¤„ç†çš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">multipleReturns</span>(<span class="params"></span>) <span class="title">internal</span> <span class="title">returns</span>(<span class="params">uint a, uint b, uint c</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">processMultipleReturns</span>(<span class="params"></span>) <span class="title">external</span> </span>&#123;</span><br><span class="line">  uint a;</span><br><span class="line">  uint b;</span><br><span class="line">  uint c;</span><br><span class="line">  <span class="comment">// è¿™æ ·æ¥åšæ‰¹é‡èµ‹å€¼:</span></span><br><span class="line">  (a, b, c) = multipleReturns();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–è€…å¦‚æœæˆ‘ä»¬åªæƒ³è¿”å›å…¶ä¸­ä¸€ä¸ªå˜é‡:</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getLastReturnValue</span>(<span class="params"></span>) <span class="title">external</span> </span>&#123;</span><br><span class="line">  uint c;</span><br><span class="line">  <span class="comment">// å¯ä»¥å¯¹å…¶ä»–å­—æ®µç•™ç©º:</span></span><br><span class="line">  (,,c) = multipleReturns();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®æˆ˜æ¼”ä¹ -11"><a href="#å®æˆ˜æ¼”ä¹ -11" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æ˜¯æ—¶å€™ä¸ CryptoKitties åˆçº¦äº¤äº’èµ·æ¥äº†ï¼</p><p>æˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œä» kitty åˆçº¦ä¸­è·å–å®ƒçš„åŸºå› ï¼š</p><ol><li><p>åˆ›å»ºä¸€ä¸ªåä¸º <code>feedOnKitty</code> çš„å‡½æ•°ã€‚å®ƒéœ€è¦2ä¸ª <code>uint</code> ç±»å‹çš„å‚æ•°ï¼Œ<code>_zombieId</code> å’Œ<code>_kittyId</code> ï¼Œè¿™æ˜¯ä¸€ä¸ª <code>public</code> ç±»å‹çš„å‡½æ•°ã€‚</p></li><li><p>å‡½æ•°é¦–å…ˆè¦å£°æ˜ä¸€ä¸ªåä¸º <code>kittyDna</code> çš„ <code>uint</code>ã€‚</p><blockquote><p>æ³¨æ„ï¼šåœ¨æˆ‘ä»¬çš„ <code>KittyInterface</code> ä¸­ï¼Œ<code>genes</code> æ˜¯ä¸€ä¸ª <code>uint256</code> ç±»å‹çš„å˜é‡ï¼Œä½†æ˜¯å¦‚æœä½ è®°å¾—ï¼Œæˆ‘ä»¬åœ¨ç¬¬ä¸€è¯¾ä¸­æåˆ°è¿‡ï¼Œ<code>uint</code> æ˜¯ <code>uint256</code> çš„åˆ«åï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä»¬æ˜¯ä¸€å›äº‹ã€‚</p></blockquote></li><li><p>è¿™ä¸ªå‡½æ•°æ¥ä¸‹æ¥è°ƒç”¨ <code>kittyContract.getKitty</code>å‡½æ•°, ä¼ å…¥ <code>_kittyId</code> ï¼Œå°†è¿”å›çš„ <code>genes</code> å­˜å‚¨åœ¨ <code>kittyDna</code> ä¸­ã€‚è®°ä½ â€”â€” <code>getKitty</code> ä¼šè¿”å›ä¸€å¤§å †å˜é‡ã€‚ ï¼ˆç¡®åˆ‡åœ°è¯´10ä¸ª - æˆ‘å·²ç»ä¸ºä½ æ•°è¿‡äº†ï¼Œä¸é”™å§ï¼ï¼‰ã€‚ä½†æ˜¯æˆ‘ä»¬åªå…³å¿ƒæœ€åä¸€ä¸ªâ€“ <code>genes</code>ã€‚æ•°é€—å·çš„æ—¶å€™å°å¿ƒç‚¹å“¦ï¼</p></li><li><p>æœ€åï¼Œå‡½æ•°è°ƒç”¨äº† <code>feedAndMultiply</code> ï¼Œå¹¶ä¼ å…¥äº† <code>_zombieId</code> å’Œ <code>kittyDna</code> ä¸¤ä¸ªå‚æ•°ã€‚</p></li></ol><h2 id="åˆçº¦å®Œå–„-10"><a href="#åˆçº¦å®Œå–„-10" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>zombiefeeding.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefactory.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract KittyInterface &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getKitty</span>(<span class="params">uint256 _id</span>) <span class="title">external</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    bool isGestating,</span></span></span><br><span class="line"><span class="function"><span class="params">    bool isReady,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 cooldownIndex,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 nextActionAt,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 siringWithId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 birthTime,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 matronId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 sireId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 generation,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 genes</span></span></span><br><span class="line"><span class="function"><span class="params">  </span>);</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">contract</span> <span class="title">ZombieFeeding</span> <span class="title">is</span> <span class="title">ZombieFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  address ckAddress = <span class="number">0x06012c8cf97BEaD5deAe237070F9587f8E7A266d</span>;</span><br><span class="line">  KittyInterface kittyContract = KittyInterface(ckAddress);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedAndMultiply</span>(<span class="params">uint _zombieId, uint _targetDna</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    Zombie storage myZombie = zombies[_zombieId];</span><br><span class="line">    _targetDna = _targetDna % dnaModulus;</span><br><span class="line">    uint newDna = (myZombie.dna + _targetDna) / <span class="number">2</span>;</span><br><span class="line">    _createZombie(<span class="string">"NoName"</span>, newDna);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// define function here</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedOnKitty</span>(<span class="params">uint _zombieId, uint _kittyId</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    uint kittyDna;</span><br><span class="line">    (,,,,,,,,,kittyDna) = kittyContract.getKitty(_kittyId);</span><br><span class="line">    feedAndMultiply(_zombieId, kittyDna);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å¥–åŠ±-Kitty-åŸºå› "><a href="#å¥–åŠ±-Kitty-åŸºå› " class="headerlink" title="å¥–åŠ±: Kitty åŸºå› "></a>å¥–åŠ±: Kitty åŸºå› </h1><p>æˆ‘ä»¬çš„åŠŸèƒ½é€»è¾‘ä¸»ä½“å·²ç»å®Œæˆäº†â€¦ç°åœ¨è®©æˆ‘ä»¬æ¥æ·»ä¸€ä¸ªå¥–åŠ±åŠŸèƒ½å§ã€‚</p><p>è¿™æ ·å§ï¼Œç»™ä»å°çŒ«åˆ¶é€ å‡ºçš„åƒµå°¸æ·»åŠ äº›ç‰¹å¾ï¼Œä»¥æ˜¾ç¤ºä»–ä»¬æ˜¯çŒ«åƒµå°¸ã€‚</p><p>è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œå’±ä»¬åœ¨æ–°åƒµå°¸çš„DNAä¸­æ·»åŠ ä¸€äº›ç‰¹æ®Šçš„å°çŒ«ä»£ç ã€‚</p><p>è¿˜è®°å¾—å—ï¼Œç¬¬ä¸€è¯¾ä¸­æˆ‘ä»¬æåˆ°ï¼Œæˆ‘ä»¬ç›®å‰åªä½¿ç”¨16ä½DNAçš„å‰12ä½æ•°æ¥æŒ‡å®šåƒµå°¸çš„å¤–è§‚ã€‚æ‰€ä»¥ç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æœ€å2ä¸ªæ•°å­—æ¥å¤„ç†â€œç‰¹æ®Šâ€çš„ç‰¹å¾ã€‚</p><p>è¿™æ ·å§ï¼ŒæŠŠçŒ«åƒµå°¸DNAçš„æœ€åä¸¤ä¸ªæ•°å­—è®¾å®šä¸º<code>99</code>ï¼ˆå› ä¸ºçŒ«æœ‰9æ¡å‘½ï¼‰ã€‚æ‰€ä»¥åœ¨æˆ‘ä»¬è¿™ä¹ˆæ¥å†™ä»£ç ï¼š<code>å¦‚æœ</code>è¿™ä¸ªåƒµå°¸æ˜¯ä¸€åªçŒ«å˜æ¥çš„ï¼Œå°±å°†å®ƒDNAçš„æœ€åä¸¤ä½æ•°å­—è®¾ç½®ä¸º<code>99</code>ã€‚</p><h2 id="if-è¯­å¥"><a href="#if-è¯­å¥" class="headerlink" title="if è¯­å¥"></a>if è¯­å¥</h2><p>ifè¯­å¥çš„è¯­æ³•åœ¨ Solidity ä¸­ï¼Œä¸åœ¨ JavaScript ä¸­å·®ä¸å¤šï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function eatBLT(string sandwich) public &#123;</span><br><span class="line">  // çœ‹æ¸…æ¥šäº†ï¼Œå½“æˆ‘ä»¬æ¯”è¾ƒå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œéœ€è¦æ¯”è¾ƒä»–ä»¬çš„ keccak256 å“ˆå¸Œç </span><br><span class="line">  if (keccak256(sandwich) == keccak256(&quot;BLT&quot;)) &#123;</span><br><span class="line">    eat();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®æˆ˜æ¼”ä¹ -12"><a href="#å®æˆ˜æ¼”ä¹ -12" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>è®©æˆ‘ä»¬åœ¨æˆ‘ä»¬çš„åƒµå°¸ä»£ç ä¸­å®ç°å°çŒ«çš„åŸºå› ã€‚</p><ol><li><p>é¦–å…ˆï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸‹ <code>feedAndMultiply</code> å‡½æ•°çš„å®šä¹‰ï¼Œç»™å®ƒä¼ å…¥ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šä¸€æ¡åä¸º <code>_species</code> çš„å­—ç¬¦ä¸²ã€‚</p></li><li><p>æ¥ä¸‹æ¥ï¼Œåœ¨æˆ‘ä»¬è®¡ç®—å‡ºæ–°çš„åƒµå°¸çš„DNAä¹‹åï¼Œæ·»åŠ ä¸€ä¸ª <code>if</code> è¯­å¥æ¥æ¯”è¾ƒ <code>_species</code> å’Œå­—ç¬¦ä¸² <code>&quot;kitty&quot;</code> çš„ <code>keccak256</code> å“ˆå¸Œå€¼ã€‚</p></li><li><p>åœ¨ <code>if</code> è¯­å¥ä¸­ï¼Œæˆ‘ä»¬ç”¨ <code>99</code> æ›¿æ¢äº†æ–°åƒµå°¸DNAçš„æœ€åä¸¤ä½æ•°å­—ã€‚å¯ä»¥è¿™ä¹ˆåšï¼š<code>newDna = newDna - newDna % 100 + 99;</code>ã€‚</p><blockquote><p>è§£é‡Šï¼šå‡è®¾ <code>newDna</code> æ˜¯ <code>334455</code>ã€‚é‚£ä¹ˆ <code>newDna % 100</code> æ˜¯ <code>55</code>ï¼Œæ‰€ä»¥ <code>newDna - newDna % 100</code> å¾—åˆ° <code>334400</code>ã€‚æœ€ååŠ ä¸Š <code>99</code> å¯å¾—åˆ° <code>334499</code>ã€‚</p></blockquote></li><li><p>æœ€åï¼Œæˆ‘ä»¬ä¿®æ”¹äº† <code>feedOnKitty</code> ä¸­çš„å‡½æ•°è°ƒç”¨ã€‚å½“å®ƒè°ƒç”¨ <code>feedAndMultiply</code> æ—¶ï¼Œå¢åŠ  <code>â€œkittyâ€</code> ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°ã€‚</p></li></ol><h2 id="åˆçº¦å®Œå–„-11"><a href="#åˆçº¦å®Œå–„-11" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>zombiefeeding.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefactory.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract KittyInterface &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getKitty</span>(<span class="params">uint256 _id</span>) <span class="title">external</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    bool isGestating,</span></span></span><br><span class="line"><span class="function"><span class="params">    bool isReady,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 cooldownIndex,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 nextActionAt,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 siringWithId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 birthTime,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 matronId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 sireId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 generation,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 genes</span></span></span><br><span class="line"><span class="function"><span class="params">  </span>);</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">contract</span> <span class="title">ZombieFeeding</span> <span class="title">is</span> <span class="title">ZombieFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  address ckAddress = <span class="number">0x06012c8cf97BEaD5deAe237070F9587f8E7A266d</span>;</span><br><span class="line">  KittyInterface kittyContract = KittyInterface(ckAddress);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿™é‡Œä¿®æ”¹å‡½æ•°å®šä¹‰</span></span><br><span class="line">  <span class="comment">//function feedAndMultiply(uint _zombieId, uint _targetDna) public &#123;</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedAndMultiply</span>(<span class="params">uint _zombieId, uint _targetDna, string _species</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    Zombie storage myZombie = zombies[_zombieId];</span><br><span class="line">    _targetDna = _targetDna % dnaModulus;</span><br><span class="line">    uint newDna = (myZombie.dna + _targetDna) / <span class="number">2</span>;</span><br><span class="line">    <span class="comment">// è¿™é‡Œå¢åŠ ä¸€ä¸ª if è¯­å¥</span></span><br><span class="line">    <span class="keyword">if</span> (keccak256(_species) == keccak256(<span class="string">"kitty"</span>)) &#123;</span><br><span class="line">      newDna = newDna - newDna % <span class="number">100</span> + <span class="number">99</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    _createZombie(<span class="string">"NoName"</span>, newDna);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedOnKitty</span>(<span class="params">uint _zombieId, uint _kittyId</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    uint kittyDna;</span><br><span class="line">    (,,,,,,,,,kittyDna) = kittyContract.getKitty(_kittyId);</span><br><span class="line">    <span class="comment">// å¹¶ä¿®æ”¹å‡½æ•°è°ƒç”¨</span></span><br><span class="line">    <span class="comment">//feedAndMultiply(_zombieId, kittyDna);</span></span><br><span class="line">    feedAndMultiply(_zombieId, kittyDna, <span class="string">"kitty"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ”¾åœ¨ä¸€èµ·"><a href="#æ”¾åœ¨ä¸€èµ·" class="headerlink" title="æ”¾åœ¨ä¸€èµ·"></a>æ”¾åœ¨ä¸€èµ·</h1><p>è‡³æ­¤ï¼Œä½ å·²ç»å­¦å®Œç¬¬äºŒè¯¾äº†ï¼</p><p>æŸ¥çœ‹ä¸‹â†’_â†’çš„æ¼”ç¤ºï¼Œçœ‹çœ‹ä»–ä»¬æ€ä¹ˆè¿è¡Œèµ·æ¥å¾—å§ã€‚ç»§ç»­ï¼Œä½ è‚¯å®šç­‰ä¸åŠçœ‹å®Œè¿™ä¸€é¡µğŸ˜‰ã€‚ç‚¹å‡»å°çŒ«ï¼Œæ”»å‡»ï¼çœ‹åˆ°ä½ æ–©è·ä¸€ä¸ªæ–°çš„å°çŒ«åƒµå°¸äº†å§ï¼</p><h2 id="JavaScript-å®ç°"><a href="#JavaScript-å®ç°" class="headerlink" title="JavaScript å®ç°"></a>JavaScript å®ç°</h2><p>æˆ‘ä»¬åªç”¨ç¼–è¯‘å’Œéƒ¨ç½² <code>ZombieFeeding</code>ï¼Œå°±å¯ä»¥å°†è¿™ä¸ªåˆçº¦éƒ¨ç½²åˆ°ä»¥å¤ªåŠäº†ã€‚æˆ‘ä»¬æœ€ç»ˆå®Œæˆçš„è¿™ä¸ªåˆçº¦ç»§æ‰¿è‡ª <code>ZombieFactory</code>ï¼Œå› æ­¤å®ƒå¯ä»¥è®¿é—®è‡ªå·±å’Œçˆ¶è¾ˆåˆçº¦ä¸­çš„æ‰€æœ‰ public æ–¹æ³•ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¸æˆ‘ä»¬çš„åˆšéƒ¨ç½²çš„åˆçº¦è¿›è¡Œäº¤äº’çš„ä¾‹å­ï¼Œ è¿™ä¸ªä¾‹å­ä½¿ç”¨äº† JavaScript å’Œ web3.jsï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> abi = <span class="comment">/* abi generated by the compiler */</span></span><br><span class="line"><span class="keyword">var</span> ZombieFeedingContract = web3.eth.contract(abi)</span><br><span class="line"><span class="keyword">var</span> contractAddress = <span class="comment">/* our contract address on Ethereum after deploying */</span></span><br><span class="line"><span class="keyword">var</span> ZombieFeeding = ZombieFeedingContract.at(contractAddress)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡è®¾æˆ‘ä»¬æœ‰æˆ‘ä»¬çš„åƒµå°¸IDå’Œè¦æ”»å‡»çš„çŒ«å’ªID</span></span><br><span class="line"><span class="keyword">let</span> zombieId = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> kittyId = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¦æ‹¿åˆ°çŒ«å’ªçš„DNAï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨å®ƒçš„APIã€‚è¿™äº›æ•°æ®ä¿å­˜åœ¨å®ƒä»¬çš„æœåŠ¡å™¨ä¸Šè€Œä¸æ˜¯åŒºå—é“¾ä¸Šã€‚</span></span><br><span class="line"><span class="comment">// å¦‚æœä¸€åˆ‡éƒ½åœ¨åŒºå—é“¾ä¸Šï¼Œæˆ‘ä»¬å°±ä¸ç”¨æ‹…å¿ƒå®ƒä»¬çš„æœåŠ¡å™¨æŒ‚äº†ï¼Œæˆ–è€…å®ƒä»¬ä¿®æ”¹äº†APIï¼Œ</span></span><br><span class="line"><span class="comment">// æˆ–è€…å› ä¸ºä¸å–œæ¬¢æˆ‘ä»¬çš„åƒµå°¸æ¸¸æˆè€Œå°æ€äº†æˆ‘ä»¬</span></span><br><span class="line"><span class="keyword">let</span> apiUrl = <span class="string">"https://api.cryptokitties.co/kitties/"</span> + kittyId</span><br><span class="line">$.<span class="keyword">get</span>(apiUrl, function(data) &#123;</span><br><span class="line">  <span class="keyword">let</span> imgUrl = data.image_url</span><br><span class="line">  <span class="comment">// ä¸€äº›æ˜¾ç¤ºå›¾ç‰‡çš„ä»£ç </span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“ç”¨æˆ·ç‚¹å‡»ä¸€åªçŒ«å’ªçš„æ—¶å€™:</span></span><br><span class="line">$(<span class="string">".kittyImage"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// è°ƒç”¨æˆ‘ä»¬åˆçº¦çš„ `feedOnKitty` å‡½æ•°</span></span><br><span class="line">  ZombieFeeding.feedOnKitty(zombieId, kittyId)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¾¦å¬æ¥è‡ªæˆ‘ä»¬åˆçº¦çš„æ–°åƒµå°¸äº‹ä»¶å¥½æ¥å¤„ç†</span></span><br><span class="line">ZombieFactory.NewZombie(<span class="function"><span class="keyword">function</span>(<span class="params">error, result</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (error) <span class="keyword">return</span></span><br><span class="line">  <span class="comment">// è¿™ä¸ªå‡½æ•°ç”¨æ¥æ˜¾ç¤ºåƒµå°¸:</span></span><br><span class="line">  generateZombie(result.zombieId, result.name, result.dna)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="å®æˆ˜æ¼”ä¹ -13"><a href="#å®æˆ˜æ¼”ä¹ -13" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>é€‰æ‹©ä¸€åªä½ æƒ³çŒé£Ÿçš„å°çŒ«ã€‚ä½ è‡ªå®¶åƒµå°¸çš„ DNA ä¼šå’Œå°çŒ«çš„ DNA ç»“åˆï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„å°çŒ«åƒµå°¸ï¼ŒåŠ å…¥ä½ çš„å†›å›¢ï¼</p><p>çœ‹åˆ°æ–°åƒµå°¸ä¸Šé‚£å¯çˆ±çš„çŒ«å’ªè…¿äº†ä¹ˆï¼Ÿè¿™æ˜¯æ–°åƒµå°¸æœ€åDNAä¸­æœ€åä¸¤ä½æ•°å­— <code>99</code> çš„åŠŸåŠ³ï¼</p><p>ä½ æƒ³è¦çš„è¯éšæ—¶å¯ä»¥é‡æ–°å¼€å§‹ã€‚æ•è·äº†ä¸€åªçŒ«å’ªåƒµå°¸ï¼Œä½ ä¸€å®šå¾ˆé«˜å…´å§ï¼ï¼ˆä¸è¿‡ä½ åªèƒ½æŒæœ‰ä¸€åªï¼‰ï¼Œç»§ç»­å‰è¿›åˆ°ä¸‹ä¸€ç« ï¼Œå®Œæˆç¬¬äºŒè¯¾å§ï¼</p><p><img src="https://i.loli.net/2020/06/27/vQ8uDOcFknPNsmy.png" alt="image-20200627105007659"></p><h2 id="èåˆ"><a href="#èåˆ" class="headerlink" title="èåˆ"></a>èåˆ</h2><p><img src="https://i.loli.net/2020/06/27/I9YxPTeVDuKcfmr.png" alt="image-20200627105033754"></p><h1 id="ç¬¬äºŒè¯¾æ‰“å¡"><a href="#ç¬¬äºŒè¯¾æ‰“å¡" class="headerlink" title="ç¬¬äºŒè¯¾æ‰“å¡"></a>ç¬¬äºŒè¯¾æ‰“å¡</h1><p><img src="https://i.loli.net/2020/06/27/9w4d6EMHsi2Sgo3.png" alt="image-20200627105401927"></p><p><a href="https://share.cryptozombies.io/zh/lesson/2/share/truffle_solidity_web3.js_javaScript" target="_blank" rel="noopener">æˆ‘çš„åƒµå°¸å¤§å†›2</a></p>]]></content>
      
      
      <categories>
          
          <category> loom network </category>
          
      </categories>
      
      
        <tags>
            
            <tag> solidity </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­å»ºåƒµå°¸å·¥å‚</title>
      <link href="/2020/06/27/%E6%90%AD%E5%BB%BA%E5%83%B5%E5%B0%B8%E5%B7%A5%E5%8E%82/"/>
      <url>/2020/06/27/%E6%90%AD%E5%BB%BA%E5%83%B5%E5%B0%B8%E5%B7%A5%E5%8E%82/</url>
      
        <content type="html"><![CDATA[<p>åœ¨å­¦ä¹ solidityçš„è¿‡ç¨‹ä¸­å‘ç°ä¸€ä¸ªåœ¨çº¿å­¦ä¹ å¹³å°ï¼Œè¿™æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„åœ¨çº¿æ™ºèƒ½åˆçº¦å­¦ä¹ ç¯å¢ƒï¼Œç›®æ ‡æ˜¯æ•™ä¼šå¤§å®¶å®ç° DApp æ¸¸æˆã€‚è¿™ä¸ªç½‘ç«™çš„ç‰¹ç‚¹æ˜¯è‡ªä½œéå¸¸ç²¾è‰¯ï¼Œå„ç§è¾…åŠ©å­¦ä¹ ææ–™ä¸°å¯Œï¼Œå¹¶ä¸”æ˜¯å¯¹ Solidity å°ç™½å‹å¥½çš„ã€‚</p><p><a href="https://cryptozombies.io/" target="_blank" rel="noopener">ç‚¹å‡»è¿™é‡Œè¿›å…¥å­¦ä¹ å¹³å°</a></p><h1 id="ä¸€ã€è¯¾ç¨‹æ¦‚è¿°"><a href="#ä¸€ã€è¯¾ç¨‹æ¦‚è¿°" class="headerlink" title="ä¸€ã€è¯¾ç¨‹æ¦‚è¿°"></a>ä¸€ã€è¯¾ç¨‹æ¦‚è¿°</h1><p>ç¬¬ä¸€è¯¾ä½ å°†åˆ›é€ ä¸€ä¸ªâ€åƒµå°¸å·¥å‚â€ï¼Œ ç”¨å®ƒå»ºç«‹ä¸€æ”¯åƒµå°¸éƒ¨é˜Ÿã€‚</p><a id="more"></a><ul><li>æˆ‘ä»¬çš„å·¥å‚ä¼šæŠŠæˆ‘ä»¬éƒ¨é˜Ÿä¸­æ‰€æœ‰çš„åƒµå°¸ä¿å­˜åˆ°æ•°æ®åº“ä¸­</li><li>å·¥å‚ä¼šæœ‰ä¸€ä¸ªå‡½æ•°èƒ½äº§ç”Ÿæ–°çš„åƒµå°¸</li><li>æ¯ä¸ªåƒµå°¸ä¼šæœ‰ä¸€ä¸ªéšæœºçš„ç‹¬ä¸€æ— äºŒçš„é¢å­”</li></ul><p>åœ¨åé¢çš„è¯¾ç¨‹é‡Œï¼Œæˆ‘ä»¬ä¼šå¢åŠ åŠŸèƒ½ã€‚æ¯”å¦‚ï¼Œè®©åƒµå°¸èƒ½æ”»å‡»äººç±»æˆ–å…¶å®ƒåƒµå°¸! ä½†æ˜¯åœ¨å®ç°è¿™äº›å¥½ç©çš„åŠŸèƒ½ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¦å®ç°åˆ›å»ºåƒµå°¸è¿™æ ·çš„åŸºæœ¬åŠŸèƒ½ã€‚</p><h2 id="åƒµå°¸DNAå¦‚ä½•è¿ä½œ"><a href="#åƒµå°¸DNAå¦‚ä½•è¿ä½œ" class="headerlink" title="åƒµå°¸DNAå¦‚ä½•è¿ä½œ"></a>åƒµå°¸DNAå¦‚ä½•è¿ä½œ</h2><p>åƒµå°¸çš„é¢å­”å–å†³äºå®ƒçš„DNAã€‚å®ƒçš„DNAå¾ˆç®€å•ï¼Œç”±ä¸€ä¸ª16ä½çš„æ•´æ•°ç»„æˆï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">8356281049284737</span><br></pre></td></tr></table></figure><p>å¦‚åŒçœŸæ­£çš„DNA, è¿™ä¸ªæ•°å­—çš„ä¸åŒéƒ¨åˆ†ä¼šå¯¹åº”ä¸åŒçš„ç‰¹ç‚¹ã€‚ å‰2ä½ä»£è¡¨å¤´å‹ï¼Œç´§æ¥ç€çš„2ä½ä»£è¡¨çœ¼ç›ï¼Œç­‰ç­‰ã€‚</p><blockquote><p>æ³¨: æœ¬æ•™ç¨‹æˆ‘ä»¬å°½é‡ç®€åŒ–ã€‚æˆ‘ä»¬çš„åƒµå°¸åªæœ‰7ç§å¤´å‹(è™½ç„¶2ä½æ•°å­—å…è®¸100ç§å¯èƒ½æ€§)ã€‚ä»¥åæˆ‘ä»¬ä¼šåŠ å…¥æ›´å¤šçš„å¤´å‹, å¦‚æœæˆ‘ä»¬æƒ³è®©åƒµå°¸æœ‰æ›´å¤šé€ å‹ã€‚</p></blockquote><p>ä¾‹å¦‚ï¼Œå‰ä¸¤ä½æ•°å­—æ˜¯ <code>83</code>ï¼Œ è®¡ç®—åƒµå°¸çš„å¤´å‹ï¼Œæˆ‘ä»¬åš<code>83 % 7 + 1</code> = 7 è¿ç®—ï¼Œ æ­¤åƒµå°¸å°†è¢«èµ‹äºˆç¬¬ä¸ƒç±»å¤´å‹ã€‚</p><p>åœ¨å³è¾¹é¡µé¢ï¼Œç§»åŠ¨å¤´åŸºå› <code>head gene</code> æ»‘å—åˆ°ç¬¬ä¸ƒä½ç½®(åœ£è¯å¸½)å¯è§<code>83</code>æ‰€å¯¹åº”çš„ç‰¹ç‚¹ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ "><a href="#å®æˆ˜æ¼”ä¹ " class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><ol><li>ç©ä¸€ä¸‹é¡µé¢å³ä¾§çš„æ»‘å—ã€‚æ£€éªŒä¸€ä¸‹ä¸åŒçš„æ•°å­—å¯¹åº”ä¸åŒçš„åƒµå°¸çš„é•¿ç›¸ã€‚</li></ol><p>å¥½äº†ï¼Œè¿™å·²ç»è¶³å¤Ÿä½ ç©ä¸€ä¼šå„¿äº†ã€‚ å½“ä½ æƒ³ç»§ç»­çš„æ—¶å€™ï¼Œç‚¹å‡»ä¸‹é¢çš„â€ä¸‹ä¸€ç« â€ï¼Œè®©æˆ‘ä»¬æ¥é’»ç ” Solidity ï¼</p><p><img src="https://i.loli.net/2020/06/27/u3XFU5HpdvCiTOE.png" alt="image-20200627010605297"></p><h1 id="äºŒã€åˆçº¦"><a href="#äºŒã€åˆçº¦" class="headerlink" title="äºŒã€åˆçº¦"></a>äºŒã€åˆçº¦</h1><p>ä»æœ€åŸºæœ¬çš„å¼€å§‹å…¥æ‰‹:</p><p>Solidity çš„ä»£ç éƒ½åŒ…è£¹åœ¨<strong>åˆçº¦</strong>é‡Œé¢. ä¸€ä»½<code>åˆçº¦</code>å°±æ˜¯ä»¥å¤ªåº”å¸åº”ç”¨çš„åŸºæœ¬æ¨¡å—ï¼Œ æ‰€æœ‰çš„å˜é‡å’Œå‡½æ•°éƒ½å±äºä¸€ä»½åˆçº¦, å®ƒæ˜¯ä½ æ‰€æœ‰åº”ç”¨çš„èµ·ç‚¹.</p><p>ä¸€ä»½åä¸º <code>HelloWorld</code> çš„ç©ºåˆçº¦å¦‚ä¸‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">contract HelloWorld &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç‰ˆæœ¬æŒ‡ä»¤"><a href="#ç‰ˆæœ¬æŒ‡ä»¤" class="headerlink" title="ç‰ˆæœ¬æŒ‡ä»¤"></a>ç‰ˆæœ¬æŒ‡ä»¤</h2><p>æ‰€æœ‰çš„ Solidity æºç éƒ½å¿…é¡»å† ä»¥ â€œversion pragmaâ€ â€” æ ‡æ˜ Solidity ç¼–è¯‘å™¨çš„ç‰ˆæœ¬. ä»¥é¿å…å°†æ¥æ–°çš„ç¼–è¯‘å™¨å¯èƒ½ç ´åä½ çš„ä»£ç ã€‚</p><p>ä¾‹å¦‚: <code>pragma solidity ^0.4.19;</code> (å½“å‰ Solidity çš„æœ€æ–°ç‰ˆæœ¬æ˜¯ 0.4.19).</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œ ä¸‹é¢å°±æ˜¯ä¸€ä¸ªæœ€åŸºæœ¬çš„åˆçº¦ â€” æ¯æ¬¡å»ºç«‹ä¸€ä¸ªæ–°çš„é¡¹ç›®æ—¶çš„ç¬¬ä¸€æ®µä»£ç :</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.19;</span><br><span class="line"></span><br><span class="line">contract HelloWorld &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®æˆ˜æ¼”ä¹ -1"><a href="#å®æˆ˜æ¼”ä¹ -1" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>ä¸ºäº†å»ºç«‹æˆ‘ä»¬çš„åƒµå°¸éƒ¨é˜Ÿï¼Œ è®©æˆ‘ä»¬å…ˆå»ºç«‹ä¸€ä¸ªåŸºç¡€åˆçº¦ï¼Œç§°ä¸º <code>ZombieFactory</code>ã€‚</p><ol><li>åœ¨å³è¾¹çš„è¾“å…¥æ¡†é‡Œè¾“å…¥ <code>0.4.19</code>ï¼Œæˆ‘ä»¬çš„åˆçº¦åŸºäºè¿™ä¸ªç‰ˆæœ¬çš„ç¼–è¯‘å™¨ã€‚</li><li>å»ºç«‹ä¸€ä¸ªç©ºåˆçº¦ <code>ZombieFactory</code>ã€‚</li></ol><p>ä¸€åˆ‡å®Œæ¯•ï¼Œç‚¹å‡»ä¸‹é¢ â€œç­”æ¡ˆâ€ . å¦‚æœæ²¡æ•ˆæœï¼Œç‚¹å‡» â€œæç¤ºâ€ã€‚</p><h2 id="åˆçº¦çš„åˆ›å»º"><a href="#åˆçº¦çš„åˆ›å»º" class="headerlink" title="åˆçº¦çš„åˆ›å»º"></a>åˆçº¦çš„åˆ›å»º</h2><p>Contract.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"><span class="comment">//pragma solidity //1. è¿™é‡Œå†™ç‰ˆæœ¬æŒ‡ä»¤</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2. è¿™é‡Œå»ºç«‹æ™ºèƒ½åˆçº¦</span></span><br><span class="line">contract ZombieFactory &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong>æŒ‡å®šç‰ˆæœ¬å¿…é¡»æ”¾åœ¨ç¬¬ä¸€è¡Œï¼Œç¬¬ä¸€è¡Œå‰åŠ æ³¨é‡Šä¹Ÿä¸å¯ä»¥ã€‚</p><h1 id="ä¸‰ã€çŠ¶æ€å˜é‡å’Œæ•´æ•°"><a href="#ä¸‰ã€çŠ¶æ€å˜é‡å’Œæ•´æ•°" class="headerlink" title="ä¸‰ã€çŠ¶æ€å˜é‡å’Œæ•´æ•°"></a>ä¸‰ã€çŠ¶æ€å˜é‡å’Œæ•´æ•°</h1><p>çœŸæ£’ï¼æˆ‘ä»¬å·²ç»ä¸ºæˆ‘ä»¬çš„åˆçº¦åšäº†ä¸€ä¸ªå¤–å£³ï¼Œ ä¸‹é¢å­¦ä¹  Solidity ä¸­å¦‚ä½•ä½¿ç”¨å˜é‡ã€‚</p><p><strong><em>çŠ¶æ€å˜é‡\</em></strong>æ˜¯è¢«æ°¸ä¹…åœ°ä¿å­˜åœ¨åˆçº¦ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´å®ƒä»¬è¢«å†™å…¥ä»¥å¤ªå¸åŒºå—é“¾ä¸­. æƒ³è±¡æˆå†™å…¥ä¸€ä¸ªæ•°æ®åº“ã€‚</p><h5 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­:"></a>ä¾‹å­:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">contract Example &#123;</span><br><span class="line">  // è¿™ä¸ªæ— ç¬¦å·æ•´æ•°å°†ä¼šæ°¸ä¹…çš„è¢«ä¿å­˜åœ¨åŒºå—é“¾ä¸­</span><br><span class="line">  uint myUnsignedInteger = 100;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå®šä¹‰ <code>myUnsignedInteger</code> ä¸º <code>uint</code> ç±»å‹ï¼Œå¹¶èµ‹å€¼100ã€‚</p><h2 id="æ— ç¬¦å·æ•´æ•°-uint"><a href="#æ— ç¬¦å·æ•´æ•°-uint" class="headerlink" title="æ— ç¬¦å·æ•´æ•°: uint"></a>æ— ç¬¦å·æ•´æ•°: <code>uint</code></h2><p><code>uint</code> æ— ç¬¦å·æ•°æ®ç±»å‹ï¼Œ æŒ‡<strong>å…¶å€¼ä¸èƒ½æ˜¯è´Ÿæ•°</strong>ï¼Œå¯¹äºæœ‰ç¬¦å·çš„æ•´æ•°å­˜åœ¨åä¸º <code>int</code> çš„æ•°æ®ç±»å‹ã€‚</p><blockquote><p>æ³¨: Solidityä¸­ï¼Œ <code>uint</code> å®é™…ä¸Šæ˜¯ <code>uint256</code>ä»£åè¯ï¼Œ ä¸€ä¸ª256ä½çš„æ— ç¬¦å·æ•´æ•°ã€‚ä½ ä¹Ÿå¯ä»¥å®šä¹‰ä½æ•°å°‘çš„uints â€” <code>uint8</code>ï¼Œ <code>uint16</code>ï¼Œ <code>uint32</code>ï¼Œ ç­‰â€¦â€¦ ä½†ä¸€èˆ¬æ¥è®²ä½ æ„¿æ„ä½¿ç”¨ç®€å•çš„ <code>uint</code>ï¼Œ é™¤éåœ¨æŸäº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œè¿™æˆ‘ä»¬åé¢ä¼šè®²ã€‚</p></blockquote><h2 id="å®æˆ˜æ¼”ä¹ -2"><a href="#å®æˆ˜æ¼”ä¹ -2" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æˆ‘ä»¬çš„åƒµå°¸DNAå°†ç”±ä¸€ä¸ªåå…­ä½æ•°å­—ç»„æˆã€‚</p><p>å®šä¹‰ <code>dnaDigits</code> ä¸º <code>uint</code> æ•°æ®ç±»å‹, å¹¶èµ‹å€¼ <code>16</code>ã€‚</p><h2 id="åˆçº¦å®Œå–„"><a href="#åˆçº¦å®Œå–„" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>Contract.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory &#123;</span><br><span class="line">    <span class="comment">//è¿™é‡Œå¼€å§‹</span></span><br><span class="line">    uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å››ã€æ•°å­¦è¿ç®—"><a href="#å››ã€æ•°å­¦è¿ç®—" class="headerlink" title="å››ã€æ•°å­¦è¿ç®—"></a>å››ã€æ•°å­¦è¿ç®—</h1><p>åœ¨ Solidity ä¸­ï¼Œæ•°å­¦è¿ç®—å¾ˆç›´è§‚æ˜äº†ï¼Œä¸å…¶å®ƒç¨‹åºè®¾è®¡è¯­è¨€ç›¸åŒ:</p><ul><li>åŠ æ³•: <code>x + y</code></li><li>å‡æ³•: <code>x - y</code>,</li><li>ä¹˜æ³•: <code>x * y</code></li><li>é™¤æ³•: <code>x / y</code></li><li>å–æ¨¡ / æ±‚ä½™: <code>x % y</code> <em>(ä¾‹å¦‚, <code>13 % 5</code> ä½™ <code>3</code>, å› ä¸º13é™¤ä»¥5ï¼Œä½™3)</em></li></ul><p>Solidity è¿˜æ”¯æŒ <strong><em>ä¹˜æ–¹æ“ä½œ\</em></strong> (å¦‚ï¼šx çš„ yæ¬¡æ–¹ï¼‰ // ä¾‹å¦‚ï¼š 5 ** 2 = 25</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uint x = 5 ** 2; // equal to 5^2 = 25</span><br></pre></td></tr></table></figure><h2 id="å®æˆ˜æ¼”ä¹ -3"><a href="#å®æˆ˜æ¼”ä¹ -3" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>ä¸ºäº†ä¿è¯æˆ‘ä»¬çš„åƒµå°¸çš„DNAåªå«æœ‰16ä¸ªå­—ç¬¦ï¼Œæˆ‘ä»¬å…ˆé€ ä¸€ä¸ª<code>uint</code>æ•°æ®ï¼Œè®©å®ƒç­‰äº10^16ã€‚è¿™æ ·ä¸€æ¥ä»¥åæˆ‘ä»¬å¯ä»¥ç”¨æ¨¡è¿ç®—ç¬¦ <code>%</code> æŠŠä¸€ä¸ªæ•´æ•°å˜æˆ16ä½ã€‚</p><ol><li>å»ºç«‹ä¸€ä¸ª<code>uint</code>ç±»å‹çš„å˜é‡ï¼Œåå­—å«<code>dnaModulus</code>, ä»¤å…¶ç­‰äº <strong>10 çš„ <code>dnaDigits</code> æ¬¡æ–¹</strong>.</li></ol><h2 id="åˆçº¦å®Œå–„-1"><a href="#åˆçº¦å®Œå–„-1" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>Contract.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">    uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">    <span class="comment">//è¿™é‡Œå¼€å§‹</span></span><br><span class="line">    uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="äº”ã€ç»“æ„ä½“"><a href="#äº”ã€ç»“æ„ä½“" class="headerlink" title="äº”ã€ç»“æ„ä½“"></a>äº”ã€ç»“æ„ä½“</h1><p>æœ‰æ—¶ä½ éœ€è¦æ›´å¤æ‚çš„æ•°æ®ç±»å‹ï¼ŒSolidity æä¾›äº† <strong>ç»“æ„ä½“</strong>:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">struct Person &#123;</span><br><span class="line">  uint age;</span><br><span class="line">  string name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æ„ä½“å…è®¸ä½ ç”Ÿæˆä¸€ä¸ªæ›´å¤æ‚çš„æ•°æ®ç±»å‹ï¼Œå®ƒæœ‰å¤šä¸ªå±æ€§ã€‚</p><blockquote><p>æ³¨ï¼šæˆ‘ä»¬åˆšåˆšå¼•è¿›äº†ä¸€ä¸ªæ–°ç±»å‹, <code>string</code>ã€‚ å­—ç¬¦ä¸²ç”¨äºä¿å­˜ä»»æ„é•¿åº¦çš„ UTF-8 ç¼–ç æ•°æ®ã€‚ å¦‚ï¼š <code>string greeting = &quot;Hello world!&quot;</code>ã€‚</p></blockquote><h2 id="å®æˆ˜æ¼”ä¹ -4"><a href="#å®æˆ˜æ¼”ä¹ -4" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>åœ¨æˆ‘ä»¬çš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€äº›åƒµå°¸ï¼æ¯ä¸ªåƒµå°¸å°†æ‹¥æœ‰å¤šä¸ªå±æ€§ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªå±•ç¤ºç»“æ„ä½“çš„å®Œç¾ä¾‹å­ã€‚</p><ol><li>å»ºç«‹ä¸€ä¸ª<code>struct</code> å‘½åä¸º <code>Zombie</code>.</li><li>æˆ‘ä»¬çš„ <code>Zombie</code> ç»“æ„ä½“æœ‰ä¸¤ä¸ªå±æ€§ï¼š <code>name</code> (ç±»å‹ä¸º <code>string</code>), å’Œ <code>dna</code> (ç±»å‹ä¸º <code>uint</code>)ã€‚</li></ol><h2 id="åˆçº¦å®Œå–„-2"><a href="#åˆçº¦å®Œå–„-2" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>Contract.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">    uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">    uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿™é‡Œå¼€å§‹</span></span><br><span class="line">    struct Zombie &#123;</span><br><span class="line">        string name;</span><br><span class="line">        uint dna;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å…­ã€æ•°ç»„"><a href="#å…­ã€æ•°ç»„" class="headerlink" title="å…­ã€æ•°ç»„"></a>å…­ã€æ•°ç»„</h1><p>å¦‚æœä½ æƒ³å»ºç«‹ä¸€ä¸ªé›†åˆï¼Œå¯ä»¥ç”¨ <strong><em>æ•°ç»„</em></strong>è¿™æ ·çš„æ•°æ®ç±»å‹. Solidity æ”¯æŒä¸¤ç§æ•°ç»„: <strong><em>é™æ€</em></strong> æ•°ç»„å’Œ<strong><em>åŠ¨æ€</em></strong> æ•°ç»„:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// å›ºå®šé•¿åº¦ä¸º2çš„é™æ€æ•°ç»„:</span><br><span class="line">uint[2] fixedArray;</span><br><span class="line">// å›ºå®šé•¿åº¦ä¸º5çš„stringç±»å‹çš„é™æ€æ•°ç»„:</span><br><span class="line">string[5] stringArray;</span><br><span class="line">// åŠ¨æ€æ•°ç»„ï¼Œé•¿åº¦ä¸å›ºå®šï¼Œå¯ä»¥åŠ¨æ€æ·»åŠ å…ƒç´ :</span><br><span class="line">uint[] dynamicArray;</span><br></pre></td></tr></table></figure><p>ä½ ä¹Ÿå¯ä»¥å»ºç«‹ä¸€ä¸ª <strong><em>ç»“æ„ä½“\</em></strong>ç±»å‹çš„æ•°ç»„ ä¾‹å¦‚ï¼Œä¸Šä¸€ç« æåˆ°çš„ <code>Person</code>:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Person[] people; // è¿™æ˜¯åŠ¨æ€æ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥ä¸æ–­æ·»åŠ å…ƒç´ </span><br></pre></td></tr></table></figure><p>è®°ä½ï¼šçŠ¶æ€å˜é‡è¢«æ°¸ä¹…ä¿å­˜åœ¨åŒºå—é“¾ä¸­ã€‚æ‰€ä»¥åœ¨ä½ çš„åˆçº¦ä¸­åˆ›å»ºåŠ¨æ€æ•°ç»„æ¥ä¿å­˜æˆç»“æ„çš„æ•°æ®æ˜¯éå¸¸æœ‰æ„ä¹‰çš„ã€‚</p><h2 id="å…¬å…±æ•°ç»„"><a href="#å…¬å…±æ•°ç»„" class="headerlink" title="å…¬å…±æ•°ç»„"></a>å…¬å…±æ•°ç»„</h2><p>ä½ å¯ä»¥å®šä¹‰ <code>public</code> æ•°ç»„, Solidity ä¼šè‡ªåŠ¨åˆ›å»º <strong><em>getter\</em></strong> æ–¹æ³•. è¯­æ³•å¦‚ä¸‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Person[] public people;</span><br></pre></td></tr></table></figure><p>å…¶å®ƒçš„åˆçº¦å¯ä»¥ä»è¿™ä¸ªæ•°ç»„è¯»å–æ•°æ®ï¼ˆä½†ä¸èƒ½å†™å…¥æ•°æ®ï¼‰ï¼Œæ‰€ä»¥è¿™åœ¨åˆçº¦ä¸­æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„ä¿å­˜å…¬å…±æ•°æ®çš„æ¨¡å¼ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -5"><a href="#å®æˆ˜æ¼”ä¹ -5" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>ä¸ºäº†æŠŠä¸€ä¸ªåƒµå°¸éƒ¨é˜Ÿä¿å­˜åœ¨æˆ‘ä»¬çš„APPé‡Œï¼Œå¹¶ä¸”èƒ½å¤Ÿè®©å…¶å®ƒAPPçœ‹åˆ°è¿™äº›åƒµå°¸ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå…¬å…±æ•°ç»„ã€‚</p><ol><li>åˆ›å»ºä¸€ä¸ªæ•°æ®ç±»å‹ä¸º <code>Zombie</code> çš„ç»“æ„ä½“æ•°ç»„ï¼Œç”¨ <code>public</code> ä¿®é¥°ï¼Œå‘½åä¸ºï¼š<code>zombies</code>.</li></ol><h2 id="åˆçº¦å®Œå–„-3"><a href="#åˆçº¦å®Œå–„-3" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>Contract.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">    uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">    uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line"></span><br><span class="line">    struct Zombie &#123;</span><br><span class="line">        string name;</span><br><span class="line">        uint dna;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿™é‡Œå¼€å§‹</span></span><br><span class="line">    Zombie[] public zombies;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ä¸ƒã€å®šä¹‰å‡½æ•°"><a href="#ä¸ƒã€å®šä¹‰å‡½æ•°" class="headerlink" title="ä¸ƒã€å®šä¹‰å‡½æ•°"></a>ä¸ƒã€å®šä¹‰å‡½æ•°</h1><p>åœ¨ Solidity ä¸­å‡½æ•°å®šä¹‰çš„å¥æ³•å¦‚ä¸‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function eatHamburgers(string _name, uint _amount) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªåä¸º <code>eatHamburgers</code> çš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ª <code>string</code>ç±»å‹çš„ å’Œ ä¸€ä¸ª <code>uint</code>ç±»å‹çš„ã€‚ç°åœ¨å‡½æ•°å†…éƒ¨è¿˜æ˜¯ç©ºçš„ã€‚</p><blockquote><p>æ³¨ï¼š: ä¹ æƒ¯ä¸Šå‡½æ•°é‡Œçš„å˜é‡éƒ½æ˜¯ä»¥(<code>_</code>)å¼€å¤´ (ä½†ä¸æ˜¯ç¡¬æ€§è§„å®š) ä»¥åŒºåˆ«å…¨å±€å˜é‡ã€‚æˆ‘ä»¬æ•´ä¸ªæ•™ç¨‹éƒ½ä¼šæ²¿ç”¨è¿™ä¸ªä¹ æƒ¯ã€‚</p></blockquote><p>æˆ‘ä»¬çš„å‡½æ•°å®šä¹‰å¦‚ä¸‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eatHamburgers(&quot;vitalik&quot;, 100);</span><br></pre></td></tr></table></figure><h2 id="å®æˆ˜æ¼”ä¹ -6"><a href="#å®æˆ˜æ¼”ä¹ -6" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>åœ¨æˆ‘ä»¬çš„åº”ç”¨é‡Œï¼Œæˆ‘ä»¬è¦èƒ½åˆ›å»ºä¸€äº›åƒµå°¸ï¼Œè®©æˆ‘ä»¬å†™ä¸€ä¸ªå‡½æ•°åšè¿™ä»¶äº‹å§ï¼</p><ol><li>å»ºç«‹ä¸€ä¸ªå‡½æ•° <code>createZombie</code>ã€‚ å®ƒæœ‰ä¸¤ä¸ªå‚æ•°: <strong>_name</strong> (ç±»å‹ä¸º<code>string</code>), å’Œ <strong>_dna</strong> (ç±»å‹ä¸º<code>uint</code>)ã€‚</li></ol><p>æš‚æ—¶è®©å‡½æ•°ç©ºç€â€”â€”æˆ‘ä»¬åœ¨åé¢ä¼šå¢åŠ å†…å®¹ã€‚</p><h2 id="åˆçº¦å®Œå–„-4"><a href="#åˆçº¦å®Œå–„-4" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>Contract.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">    uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">    uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line"></span><br><span class="line">    struct Zombie &#123;</span><br><span class="line">        string name;</span><br><span class="line">        uint dna;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Zombie[] public zombies;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿™é‡Œå¼€å§‹</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">createZombie</span>(<span class="params">string _name, uint _dna</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å…«ã€ä½¿ç”¨ç»“æ„ä½“å’Œæ•°ç»„"><a href="#å…«ã€ä½¿ç”¨ç»“æ„ä½“å’Œæ•°ç»„" class="headerlink" title="å…«ã€ä½¿ç”¨ç»“æ„ä½“å’Œæ•°ç»„"></a>å…«ã€ä½¿ç”¨ç»“æ„ä½“å’Œæ•°ç»„</h1><h2 id="åˆ›å»ºæ–°çš„ç»“æ„ä½“"><a href="#åˆ›å»ºæ–°çš„ç»“æ„ä½“" class="headerlink" title="åˆ›å»ºæ–°çš„ç»“æ„ä½“"></a>åˆ›å»ºæ–°çš„ç»“æ„ä½“</h2><p>è¿˜è®°å¾—ä¸Šä¸ªä¾‹å­ä¸­çš„ <code>Person</code> ç»“æ„å—ï¼Ÿ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">struct Person &#123;</span><br><span class="line">  uint age;</span><br><span class="line">  string name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person[] public people;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬å­¦ä¹ åˆ›å»ºæ–°çš„ <code>Person</code> ç»“æ„ï¼Œç„¶åæŠŠå®ƒåŠ å…¥åˆ°åä¸º <code>people</code> çš„æ•°ç»„ä¸­.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// åˆ›å»ºä¸€ä¸ªæ–°çš„Person:</span><br><span class="line">Person satoshi = Person(172, &quot;Satoshi&quot;);</span><br><span class="line"></span><br><span class="line">// å°†æ–°åˆ›å»ºçš„satoshiæ·»åŠ è¿›peopleæ•°ç»„:</span><br><span class="line">people.push(satoshi);</span><br></pre></td></tr></table></figure><p>ä½ ä¹Ÿå¯ä»¥ä¸¤æ­¥å¹¶ä¸€æ­¥ï¼Œç”¨ä¸€è¡Œä»£ç æ›´ç®€æ´:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">people.push(Person(16, &quot;Vitalik&quot;));</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š<code>array.push()</code> åœ¨æ•°ç»„çš„ <strong>å°¾éƒ¨</strong> åŠ å…¥æ–°å…ƒç´  ï¼Œæ‰€ä»¥å…ƒç´ åœ¨æ•°ç»„ä¸­çš„é¡ºåºå°±æ˜¯æˆ‘ä»¬æ·»åŠ çš„é¡ºåºï¼Œ å¦‚:</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">uint[] numbers;</span><br><span class="line">numbers.push(5);</span><br><span class="line">numbers.push(10);</span><br><span class="line">numbers.push(15);</span><br><span class="line">// numbers is now equal to [5, 10, 15]</span><br></pre></td></tr></table></figure><h2 id="å®æˆ˜æ¼”ä¹ -7"><a href="#å®æˆ˜æ¼”ä¹ -7" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>è®©æˆ‘ä»¬åˆ›å»ºåä¸ºcreateZombieçš„å‡½æ•°æ¥åšç‚¹å„¿ä»€ä¹ˆå§ã€‚</p><ol><li>åœ¨å‡½æ•°ä½“é‡Œæ–°åˆ›å»ºä¸€ä¸ª <code>Zombie</code>ï¼Œ ç„¶åæŠŠå®ƒåŠ å…¥ <code>zombies</code> æ•°ç»„ä¸­ã€‚ æ–°åˆ›å»ºçš„åƒµå°¸çš„ <code>name</code> å’Œ <code>dna</code>ï¼Œæ¥è‡ªäºå‡½æ•°çš„å‚æ•°ã€‚</li><li>è®©æˆ‘ä»¬ç”¨ä¸€è¡Œä»£ç ç®€æ´åœ°å®Œæˆå®ƒã€‚</li></ol><h2 id="åˆçº¦å®Œå–„-5"><a href="#åˆçº¦å®Œå–„-5" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>Contract.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">    uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">    uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line"></span><br><span class="line">    struct Zombie &#123;</span><br><span class="line">        string name;</span><br><span class="line">        uint dna;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Zombie[] public zombies;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">createZombie</span>(<span class="params">string _name, uint _dna</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œå¼€å§‹</span></span><br><span class="line">        zombies.push(Zombie(_name, _dna));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ä¹ã€ç§æœ‰-å…¬å…±å‡½æ•°"><a href="#ä¹ã€ç§æœ‰-å…¬å…±å‡½æ•°" class="headerlink" title="ä¹ã€ç§æœ‰ / å…¬å…±å‡½æ•°"></a>ä¹ã€ç§æœ‰ / å…¬å…±å‡½æ•°</h1><p>Solidity å®šä¹‰çš„å‡½æ•°çš„å±æ€§é»˜è®¤ä¸º<code>å…¬å…±</code>ã€‚ è¿™å°±æ„å‘³ç€ä»»ä½•ä¸€æ–¹ (æˆ–å…¶å®ƒåˆçº¦) éƒ½å¯ä»¥è°ƒç”¨ä½ åˆçº¦é‡Œçš„å‡½æ•°ã€‚</p><p>æ˜¾ç„¶ï¼Œä¸æ˜¯ä»€ä¹ˆæ—¶å€™éƒ½éœ€è¦è¿™æ ·ï¼Œè€Œä¸”è¿™æ ·çš„åˆçº¦æ˜“äºå—åˆ°æ”»å‡»ã€‚ æ‰€ä»¥å°†è‡ªå·±çš„å‡½æ•°å®šä¹‰ä¸º<code>ç§æœ‰</code>æ˜¯ä¸€ä¸ªå¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œåªæœ‰å½“ä½ éœ€è¦å¤–éƒ¨ä¸–ç•Œè°ƒç”¨å®ƒæ—¶æ‰å°†å®ƒè®¾ç½®ä¸º<code>å…¬å…±</code>ã€‚</p><p>å¦‚ä½•å®šä¹‰ä¸€ä¸ªç§æœ‰çš„å‡½æ•°å‘¢ï¼Ÿ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">uint[] numbers;</span><br><span class="line"></span><br><span class="line">function _addToArray(uint _number) private &#123;</span><br><span class="line">  numbers.push(_number);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ„å‘³ç€åªæœ‰æˆ‘ä»¬åˆçº¦ä¸­çš„å…¶å®ƒå‡½æ•°æ‰èƒ½å¤Ÿè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œç»™ <code>numbers</code> æ•°ç»„æ·»åŠ æ–°æˆå‘˜ã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å‡½æ•°åå­—åé¢ä½¿ç”¨å…³é”®å­— <code>private</code> å³å¯ã€‚å’Œå‡½æ•°çš„å‚æ•°ç±»ä¼¼ï¼Œç§æœ‰å‡½æ•°çš„åå­—ç”¨(<code>_</code>)èµ·å§‹ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -8"><a href="#å®æˆ˜æ¼”ä¹ -8" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æˆ‘ä»¬åˆçº¦çš„å‡½æ•° <code>createZombie</code> çš„é»˜è®¤å±æ€§æ˜¯å…¬å…±çš„ï¼Œè¿™æ„å‘³ç€ä»»ä½•ä¸€æ–¹éƒ½å¯ä»¥è°ƒç”¨å®ƒå»åˆ›å»ºä¸€ä¸ªåƒµå°¸ã€‚ å’±ä»¬æ¥æŠŠå®ƒå˜æˆç§æœ‰å§ï¼</p><ol><li>å˜ <code>createZombie</code> ä¸ºç§æœ‰å‡½æ•°ï¼Œä¸è¦å¿˜è®°éµå®ˆå‘½åçš„è§„çŸ©å“¦ï¼</li></ol><h2 id="åˆçº¦ä¿®æ”¹"><a href="#åˆçº¦ä¿®æ”¹" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><p>Contract.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">    uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">    uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line"></span><br><span class="line">    struct Zombie &#123;</span><br><span class="line">        string name;</span><br><span class="line">        uint dna;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Zombie[] public zombies;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//function createZombie(string _name, uint _dna) &#123;</span></span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">_createZombie</span>(<span class="params">string _name, uint _dna</span>) <span class="title">private</span> </span>&#123;</span><br><span class="line">        zombies.push(Zombie(_name, _dna));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åã€å‡½æ•°çš„æ›´å¤šå±æ€§"><a href="#åã€å‡½æ•°çš„æ›´å¤šå±æ€§" class="headerlink" title="åã€å‡½æ•°çš„æ›´å¤šå±æ€§"></a>åã€å‡½æ•°çš„æ›´å¤šå±æ€§</h1><p>æœ¬ç« ä¸­æˆ‘ä»¬å°†å­¦ä¹ å‡½æ•°çš„è¿”å›å€¼å’Œä¿®é¥°ç¬¦ã€‚</p><h2 id="è¿”å›å€¼"><a href="#è¿”å›å€¼" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h2><p>è¦æƒ³å‡½æ•°è¿”å›ä¸€ä¸ªæ•°å€¼ï¼ŒæŒ‰å¦‚ä¸‹å®šä¹‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">string greeting = &quot;What&apos;s up dog&quot;;</span><br><span class="line"></span><br><span class="line">function sayHello() public returns (string) &#123;</span><br><span class="line">  return greeting;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Solidity é‡Œï¼Œå‡½æ•°çš„å®šä¹‰é‡Œå¯åŒ…å«è¿”å›å€¼çš„æ•°æ®ç±»å‹(å¦‚æœ¬ä¾‹ä¸­ <code>string</code>)ã€‚</p><h2 id="å‡½æ•°çš„ä¿®é¥°ç¬¦"><a href="#å‡½æ•°çš„ä¿®é¥°ç¬¦" class="headerlink" title="å‡½æ•°çš„ä¿®é¥°ç¬¦"></a>å‡½æ•°çš„ä¿®é¥°ç¬¦</h2><p>ä¸Šé¢çš„å‡½æ•°å®é™…ä¸Šæ²¡æœ‰æ”¹å˜ Solidity é‡Œçš„çŠ¶æ€ï¼Œå³ï¼Œå®ƒæ²¡æœ‰æ”¹å˜ä»»ä½•å€¼æˆ–è€…å†™ä»»ä½•ä¸œè¥¿ã€‚</p><p>è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥æŠŠå‡½æ•°å®šä¹‰ä¸º <strong><em>view\</em></strong>, æ„å‘³ç€å®ƒåªèƒ½è¯»å–æ•°æ®ä¸èƒ½æ›´æ”¹æ•°æ®:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function sayHello() public view returns (string) &#123;</span><br></pre></td></tr></table></figure><p>Solidity è¿˜æ”¯æŒ <strong><em>pure\</em></strong> å‡½æ•°, è¡¨æ˜è¿™ä¸ªå‡½æ•°ç”šè‡³éƒ½ä¸è®¿é—®åº”ç”¨é‡Œçš„æ•°æ®ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function _multiply(uint a, uint b) private pure returns (uint) &#123;</span><br><span class="line">  return a * b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‡½æ•°ç”šè‡³éƒ½ä¸è¯»å–åº”ç”¨é‡Œçš„çŠ¶æ€ â€” å®ƒçš„è¿”å›å€¼å®Œå…¨å–å†³äºå®ƒçš„è¾“å…¥å‚æ•°ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬æŠŠå‡½æ•°å®šä¹‰ä¸º <strong><em>pure\</em></strong>.</p><blockquote><p>æ³¨ï¼šå¯èƒ½å¾ˆéš¾è®°ä½ä½•æ—¶æŠŠå‡½æ•°æ ‡è®°ä¸º pure/viewã€‚ å¹¸è¿çš„æ˜¯ï¼Œ Solidity ç¼–è¾‘å™¨ä¼šç»™å‡ºæç¤ºï¼Œæé†’ä½ ä½¿ç”¨è¿™äº›ä¿®é¥°ç¬¦ã€‚</p></blockquote><h2 id="å®æˆ˜æ¼”ä¹ -9"><a href="#å®æˆ˜æ¼”ä¹ -9" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æˆ‘ä»¬æƒ³å»ºç«‹ä¸€ä¸ªå¸®åŠ©å‡½æ•°ï¼Œå®ƒæ ¹æ®ä¸€ä¸ªå­—ç¬¦ä¸²éšæœºç”Ÿæˆä¸€ä¸ªDNAæ•°æ®ã€‚</p><ol><li>åˆ›å»ºä¸€ä¸ª <code>private</code> å‡½æ•°ï¼Œå‘½åä¸º <code>_generateRandomDna</code>ã€‚å®ƒåªæ¥æ”¶ä¸€ä¸ªè¾“å…¥å˜é‡ <code>_str</code> (ç±»å‹ <code>string</code>), è¿”å›ä¸€ä¸ª <code>uint</code> ç±»å‹çš„æ•°å€¼ã€‚</li><li>æ­¤å‡½æ•°åªè¯»å–æˆ‘ä»¬åˆçº¦ä¸­çš„ä¸€äº›å˜é‡ï¼Œæ‰€ä»¥æ ‡è®°ä¸º<code>view</code>ã€‚</li><li>å‡½æ•°å†…éƒ¨æš‚æ—¶ç•™ç©ºï¼Œä»¥åæˆ‘ä»¬å†æ·»åŠ ä»£ç ã€‚</li></ol><h2 id="åˆçº¦å®Œå–„-6"><a href="#åˆçº¦å®Œå–„-6" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>Contract.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">    uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">    uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line"></span><br><span class="line">    struct Zombie &#123;</span><br><span class="line">        string name;</span><br><span class="line">        uint dna;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Zombie[] public zombies;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_createZombie</span>(<span class="params">string _name, uint _dna</span>) <span class="title">private</span> </span>&#123;</span><br><span class="line">        zombies.push(Zombie(_name, _dna));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿™é‡Œå¼€å§‹</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_generateRandomDna</span>(<span class="params">string _str</span>) <span class="title">private</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åä¸€ã€Keccak256-å’Œ-ç±»å‹è½¬æ¢"><a href="#åä¸€ã€Keccak256-å’Œ-ç±»å‹è½¬æ¢" class="headerlink" title="åä¸€ã€Keccak256 å’Œ ç±»å‹è½¬æ¢"></a>åä¸€ã€Keccak256 å’Œ ç±»å‹è½¬æ¢</h1><p>å¦‚ä½•è®© <code>_generateRandomDna</code> å‡½æ•°è¿”å›ä¸€ä¸ªå…¨(åŠ) éšæœºçš„ <code>uint</code>?</p><p>Ethereum å†…éƒ¨æœ‰ä¸€ä¸ªæ•£åˆ—å‡½æ•°<code>keccak256</code>ï¼Œå®ƒç”¨äº†SHA3ç‰ˆæœ¬ã€‚ä¸€ä¸ªæ•£åˆ—å‡½æ•°åŸºæœ¬ä¸Šå°±æ˜¯æŠŠä¸€ä¸ªå­—ç¬¦ä¸²è½¬æ¢ä¸ºä¸€ä¸ª256ä½çš„16è¿›åˆ¶æ•°å­—ã€‚å­—ç¬¦ä¸²çš„ä¸€ä¸ªå¾®å°å˜åŒ–ä¼šå¼•èµ·æ•£åˆ—æ•°æ®æå¤§å˜åŒ–ã€‚</p><p>è¿™åœ¨ Ethereum ä¸­æœ‰å¾ˆå¤šåº”ç”¨ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬åªæ˜¯ç”¨å®ƒé€ ä¸€ä¸ªä¼ªéšæœºæ•°ã€‚</p><p>ä¾‹å­:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//6e91ec6b618bb462a4a6ee5aa2cb0e9cf30f7a052bb467b0ba58b8748c00d2e5</span><br><span class="line">keccak256(&quot;aaaab&quot;);</span><br><span class="line">//b1f078126895a1424524de5321b339ab00408010b7cf0e6ed451514981e58aa9</span><br><span class="line">keccak256(&quot;aaaac&quot;);</span><br></pre></td></tr></table></figure><p>æ˜¾è€Œæ˜“è§ï¼Œè¾“å…¥å­—ç¬¦ä¸²åªæ”¹å˜äº†ä¸€ä¸ªå­—æ¯ï¼Œè¾“å‡ºå°±å·²ç»å¤©å£¤ä¹‹åˆ«äº†ã€‚</p><blockquote><p>æ³¨: åœ¨åŒºå—é“¾ä¸­<strong>å®‰å…¨åœ°</strong>äº§ç”Ÿä¸€ä¸ªéšæœºæ•°æ˜¯ä¸€ä¸ªå¾ˆéš¾çš„é—®é¢˜ï¼Œ æœ¬ä¾‹çš„æ–¹æ³•ä¸å®‰å…¨ï¼Œä½†æ˜¯åœ¨æˆ‘ä»¬çš„Zombie DNAç®—æ³•é‡Œä¸æ˜¯é‚£ä¹ˆé‡è¦ï¼Œå·²ç»å¾ˆå¥½åœ°æ»¡è¶³æˆ‘ä»¬çš„éœ€è¦äº†ã€‚</p></blockquote><h2 id="ç±»å‹è½¬æ¢"><a href="#ç±»å‹è½¬æ¢" class="headerlink" title="ç±»å‹è½¬æ¢"></a>ç±»å‹è½¬æ¢</h2><p>æœ‰æ—¶ä½ éœ€è¦å˜æ¢æ•°æ®ç±»å‹ã€‚ä¾‹å¦‚:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">uint8 a = 5;</span><br><span class="line">uint b = 6;</span><br><span class="line">// å°†ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå› ä¸º a * b è¿”å› uint, è€Œä¸æ˜¯ uint8:</span><br><span class="line">uint8 c = a * b;</span><br><span class="line">// æˆ‘ä»¬éœ€è¦å°† b è½¬æ¢ä¸º uint8:</span><br><span class="line">uint8 c = a * uint8(b);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢, <code>a * b</code> è¿”å›ç±»å‹æ˜¯ <code>uint</code>, ä½†æ˜¯å½“æˆ‘ä»¬å°è¯•ç”¨ <code>uint8</code> ç±»å‹æ¥æ”¶æ—¶, å°±ä¼šé€ æˆæ½œåœ¨çš„é”™è¯¯ã€‚å¦‚æœæŠŠå®ƒçš„æ•°æ®ç±»å‹è½¬æ¢ä¸º <code>uint8</code>, å°±å¯ä»¥äº†ï¼Œç¼–è¯‘å™¨ä¹Ÿä¸ä¼šå‡ºé”™ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -10"><a href="#å®æˆ˜æ¼”ä¹ -10" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>ç»™ <code>_generateRandomDna</code> å‡½æ•°æ·»åŠ ä»£ç ! å®ƒåº”è¯¥å®Œæˆå¦‚ä¸‹åŠŸèƒ½:</p><ol><li>ç¬¬ä¸€è¡Œä»£ç å– <code>_str</code> çš„ <code>keccak256</code> æ•£åˆ—å€¼ç”Ÿæˆä¸€ä¸ªä¼ªéšæœºåå…­è¿›åˆ¶æ•°ï¼Œç±»å‹è½¬æ¢ä¸º <code>uint</code>, æœ€åä¿å­˜åœ¨ç±»å‹ä¸º <code>uint</code> åä¸º <code>rand</code> çš„å˜é‡ä¸­ã€‚</li><li>æˆ‘ä»¬åªæƒ³è®©æˆ‘ä»¬çš„DNAçš„é•¿åº¦ä¸º16ä½ (è¿˜è®°å¾— <code>dnaModulus</code>?)ã€‚æ‰€ä»¥ç¬¬äºŒè¡Œä»£ç åº”è¯¥ <code>return</code> ä¸Šé¢è®¡ç®—çš„æ•°å€¼å¯¹ <code>dnaModulus</code> æ±‚ä½™æ•°(<code>%</code>)ã€‚</li></ol><h2 id="åˆçº¦å®Œå–„-7"><a href="#åˆçº¦å®Œå–„-7" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>Contract.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">    uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">    uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line"></span><br><span class="line">    struct Zombie &#123;</span><br><span class="line">        string name;</span><br><span class="line">        uint dna;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Zombie[] public zombies;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_createZombie</span>(<span class="params">string _name, uint _dna</span>) <span class="title">private</span> </span>&#123;</span><br><span class="line">        zombies.push(Zombie(_name, _dna));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_generateRandomDna</span>(<span class="params">string _str</span>) <span class="title">private</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œå¼€å§‹</span></span><br><span class="line">        uint rand = uint(keccak256(_str));</span><br><span class="line">        <span class="keyword">return</span> rand % dnaModulus;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åäºŒã€æ”¾åœ¨ä¸€èµ·"><a href="#åäºŒã€æ”¾åœ¨ä¸€èµ·" class="headerlink" title="åäºŒã€æ”¾åœ¨ä¸€èµ·"></a>åäºŒã€æ”¾åœ¨ä¸€èµ·</h1><p>æˆ‘ä»¬å°±å¿«å®Œæˆæˆ‘ä»¬çš„éšæœºåƒµå°¸åˆ¶é€ å™¨äº†ï¼Œæ¥å†™ä¸€ä¸ªå…¬å…±çš„å‡½æ•°æŠŠæ‰€æœ‰çš„éƒ¨ä»¶è¿æ¥èµ·æ¥ã€‚</p><p>å†™ä¸€ä¸ªå…¬å…±å‡½æ•°ï¼Œå®ƒæœ‰ä¸€ä¸ªå‚æ•°ï¼Œç”¨æ¥æ¥æ”¶åƒµå°¸çš„åå­—ï¼Œä¹‹åç”¨å®ƒç”Ÿæˆåƒµå°¸çš„DNAã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -11"><a href="#å®æˆ˜æ¼”ä¹ -11" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><ol><li>åˆ›å»ºä¸€ä¸ª <code>public</code> å‡½æ•°ï¼Œå‘½åä¸º<code>createRandomZombie</code>. å®ƒå°†è¢«ä¼ å…¥ä¸€ä¸ªå˜é‡ <code>_name</code> (æ•°æ®ç±»å‹æ˜¯ <code>string</code>)ã€‚ <em>(æ³¨: å®šä¹‰å…¬å…±å‡½æ•° <code>public</code> å’Œå®šä¹‰ä¸€ä¸ªç§æœ‰ <code>private</code> å‡½æ•°çš„åšæ³•ä¸€æ ·)</em>ã€‚</li><li>å‡½æ•°çš„ç¬¬ä¸€è¡Œåº”è¯¥è°ƒç”¨ <code>_generateRandomDna</code> å‡½æ•°ï¼Œä¼ å…¥ <code>_name</code> å‚æ•°, ç»“æœä¿å­˜åœ¨ä¸€ä¸ªç±»å‹ä¸º <code>uint</code> çš„å˜é‡é‡Œï¼Œå‘½åä¸º <code>randDna</code>ã€‚</li><li>ç¬¬äºŒè¡Œè°ƒç”¨ <code>_createZombie</code> å‡½æ•°ï¼Œ ä¼ å…¥å‚æ•°ï¼š <code>_name</code> å’Œ <code>randDna</code>ã€‚</li><li>æ•´ä¸ªå‡½æ•°åº”è¯¥æ˜¯4è¡Œä»£ç  (åŒ…æ‹¬å‡½æ•°çš„ç»“æŸç¬¦å· <code>}</code> )ã€‚</li></ol><h2 id="åˆçº¦å®Œå–„-8"><a href="#åˆçº¦å®Œå–„-8" class="headerlink" title="åˆçº¦å®Œå–„"></a>åˆçº¦å®Œå–„</h2><p>Contract.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">    uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">    uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line"></span><br><span class="line">    struct Zombie &#123;</span><br><span class="line">        string name;</span><br><span class="line">        uint dna;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Zombie[] public zombies;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_createZombie</span>(<span class="params">string _name, uint _dna</span>) <span class="title">private</span> </span>&#123;</span><br><span class="line">        zombies.push(Zombie(_name, _dna));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_generateRandomDna</span>(<span class="params">string _str</span>) <span class="title">private</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>) </span>&#123;</span><br><span class="line">        uint rand = uint(keccak256(_str));</span><br><span class="line">        <span class="keyword">return</span> rand % dnaModulus;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»è¿™é‡Œå¼€å§‹</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">createRandomZombie</span>(<span class="params">string _name</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        uint randDna = _generateRandomDna(_name);</span><br><span class="line">        _createZombie(_name, randDna);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åä¸‰ã€äº‹ä»¶"><a href="#åä¸‰ã€äº‹ä»¶" class="headerlink" title="åä¸‰ã€äº‹ä»¶"></a>åä¸‰ã€äº‹ä»¶</h1><p>æˆ‘ä»¬çš„åˆçº¦å‡ ä¹å°±è¦å®Œæˆäº†ï¼è®©æˆ‘ä»¬åŠ ä¸Šä¸€ä¸ª<strong>äº‹ä»¶</strong>.</p><p><strong>äº‹ä»¶</strong> æ˜¯åˆçº¦å’ŒåŒºå—é“¾é€šè®¯çš„ä¸€ç§æœºåˆ¶ã€‚ä½ çš„å‰ç«¯åº”ç”¨â€œç›‘å¬â€æŸäº›äº‹ä»¶ï¼Œå¹¶åšå‡ºååº”ã€‚</p><p>ä¾‹å­:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// è¿™é‡Œå»ºç«‹äº‹ä»¶</span><br><span class="line">event IntegersAdded(uint x, uint y, uint result);</span><br><span class="line"></span><br><span class="line">function add(uint _x, uint _y) public &#123;</span><br><span class="line">  uint result = _x + _y;</span><br><span class="line">  //è§¦å‘äº‹ä»¶ï¼Œé€šçŸ¥app</span><br><span class="line">  IntegersAdded(_x, _y, result);</span><br><span class="line">  return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½ çš„ app å‰ç«¯å¯ä»¥ç›‘å¬è¿™ä¸ªäº‹ä»¶ã€‚JavaScript å®ç°å¦‚ä¸‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">YourContract.IntegersAdded(function(error, result) &#123; </span><br><span class="line">  // å¹²äº›äº‹</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®æˆ˜æ¼”ä¹ -12"><a href="#å®æˆ˜æ¼”ä¹ -12" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æˆ‘ä»¬æƒ³æ¯å½“ä¸€ä¸ªåƒµå°¸åˆ›é€ å‡ºæ¥æ—¶ï¼Œæˆ‘ä»¬çš„å‰ç«¯éƒ½èƒ½ç›‘å¬åˆ°è¿™ä¸ªäº‹ä»¶ï¼Œå¹¶å°†å®ƒæ˜¾ç¤ºå‡ºæ¥ã€‚</p><p>1ã€‚ å®šä¹‰ä¸€ä¸ª <code>äº‹ä»¶</code> å«åš <code>NewZombie</code>ã€‚ å®ƒæœ‰3ä¸ªå‚æ•°: <code>zombieId</code> (<code>uint</code>)ï¼Œ <code>name</code> (<code>string</code>)ï¼Œ å’Œ <code>dna</code> (<code>uint</code>)ã€‚</p><p>2ã€‚ ä¿®æ”¹ <code>_createZombie</code> å‡½æ•°ä½¿å¾—å½“æ–°åƒµå°¸é€ å‡ºæ¥å¹¶åŠ å…¥<code>zombies</code>æ•°ç»„åï¼Œç”Ÿæˆäº‹ä»¶<code>NewZombie</code>ã€‚</p><p>3ã€‚ éœ€è¦å®šä¹‰åƒµå°¸<code>id</code>ã€‚ <code>array.push()</code> è¿”å›æ•°ç»„çš„é•¿åº¦ç±»å‹æ˜¯<code>uint</code> - å› ä¸ºæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•æ˜¯ 0ï¼Œ <code>array.push() - 1</code> å°†æ˜¯æˆ‘ä»¬åŠ å…¥çš„åƒµå°¸çš„ç´¢å¼•ã€‚ <code>zombies.push() - 1</code> å°±æ˜¯ <code>id</code>ï¼Œæ•°æ®ç±»å‹æ˜¯ <code>uint</code>ã€‚åœ¨ä¸‹ä¸€è¡Œä¸­ä½ å¯ä»¥æŠŠå®ƒç”¨åˆ° <code>NewZombie</code> äº‹ä»¶ä¸­ã€‚</p><h2 id="åˆçº¦ä¿®æ”¹-1"><a href="#åˆçº¦ä¿®æ”¹-1" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><p>Contract.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿™é‡Œå»ºç«‹äº‹ä»¶</span></span><br><span class="line">    event NewZombie(uint zombieId, string name, uint dna);</span><br><span class="line"></span><br><span class="line">    uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">    uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line"></span><br><span class="line">    struct Zombie &#123;</span><br><span class="line">        string name;</span><br><span class="line">        uint dna;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Zombie[] public zombies;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_createZombie</span>(<span class="params">string _name, uint _dna</span>) <span class="title">private</span> </span>&#123;</span><br><span class="line">        <span class="comment">//zombies.push(Zombie(_name, _dna));</span></span><br><span class="line">        uint id = zombies.push(Zombie(_name, _dna)) - <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// è¿™é‡Œè§¦å‘äº‹ä»¶</span></span><br><span class="line">        NewZombie(id, _name, _dna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_generateRandomDna</span>(<span class="params">string _str</span>) <span class="title">private</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>) </span>&#123;</span><br><span class="line">        uint rand = uint(keccak256(_str));</span><br><span class="line">        <span class="keyword">return</span> rand % dnaModulus;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">createRandomZombie</span>(<span class="params">string _name</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        uint randDna = _generateRandomDna(_name);</span><br><span class="line">        _createZombie(_name, randDna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åå››ã€Web3-js"><a href="#åå››ã€Web3-js" class="headerlink" title="åå››ã€Web3.js"></a>åå››ã€Web3.js</h1><p>æˆ‘ä»¬çš„ Solidity åˆçº¦å®Œå·¥äº†ï¼ ç°åœ¨æˆ‘ä»¬è¦å†™ä¸€æ®µ JavaScript å‰ç«¯ä»£ç æ¥è°ƒç”¨è¿™ä¸ªåˆçº¦ã€‚</p><p>ä»¥å¤ªåŠæœ‰ä¸€ä¸ª JavaScript åº“ï¼Œåä¸º<strong><em>Web3.js\</em></strong>ã€‚</p><p>åœ¨åé¢çš„è¯¾ç¨‹é‡Œï¼Œæˆ‘ä»¬ä¼šè¿›ä¸€æ­¥åœ°æ•™ä½ å¦‚ä½•å®‰è£…ä¸€ä¸ªåˆçº¦ï¼Œå¦‚ä½•è®¾ç½®Web3.jsã€‚ ä½†æ˜¯ç°åœ¨æˆ‘ä»¬é€šè¿‡ä¸€æ®µä»£ç æ¥äº†è§£ Web3.js æ˜¯å¦‚ä½•å’Œæˆ‘ä»¬å‘å¸ƒçš„åˆçº¦äº¤äº’çš„å§ã€‚</p><p>å¦‚æœä¸‹é¢çš„ä»£ç ä½ ä¸èƒ½å…¨éƒ½ç†è§£ï¼Œä¸ç”¨æ‹…å¿ƒã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸‹é¢æ˜¯è°ƒç”¨åˆçº¦çš„æ–¹å¼:</span></span><br><span class="line"><span class="keyword">var</span> abi = <span class="comment">/* abiæ˜¯ç”±ç¼–è¯‘å™¨ç”Ÿæˆçš„ */</span></span><br><span class="line"><span class="keyword">var</span> ZombieFactoryContract = web3.eth.contract(abi)</span><br><span class="line"><span class="keyword">var</span> contractAddress = <span class="comment">/* å‘å¸ƒä¹‹ååœ¨ä»¥å¤ªåŠä¸Šç”Ÿæˆçš„åˆçº¦åœ°å€ */</span></span><br><span class="line"><span class="keyword">var</span> ZombieFactory = ZombieFactoryContract.at(contractAddress)</span><br><span class="line"><span class="comment">// `ZombieFactory` èƒ½è®¿é—®å…¬å…±çš„å‡½æ•°ä»¥åŠäº‹ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸä¸ªç›‘å¬æ–‡æœ¬è¾“å…¥çš„ç›‘å¬å™¨:</span></span><br><span class="line">$(<span class="string">"#ourButton"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name = $(<span class="string">"#nameInput"</span>).val()</span><br><span class="line">  <span class="comment">//è°ƒç”¨åˆçº¦çš„ `createRandomZombie` å‡½æ•°:</span></span><br><span class="line">  ZombieFactory.createRandomZombie(name)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬ `NewZombie` äº‹ä»¶, å¹¶ä¸”æ›´æ–°UI</span></span><br><span class="line"><span class="keyword">var</span> event = ZombieFactory.NewZombie(<span class="function"><span class="keyword">function</span>(<span class="params">error, result</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (error) <span class="keyword">return</span></span><br><span class="line">  generateZombie(result.zombieId, result.name, result.dna)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å– Zombie çš„ dna, æ›´æ–°å›¾åƒ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">generateZombie</span>(<span class="params">id, name, dna</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> dnaStr = <span class="built_in">String</span>(dna)</span><br><span class="line">  <span class="comment">// å¦‚æœdnaå°‘äº16ä½,åœ¨å®ƒå‰é¢ç”¨0è¡¥ä¸Š</span></span><br><span class="line">  <span class="keyword">while</span> (dnaStr.length &lt; <span class="number">16</span>)</span><br><span class="line">    dnaStr = <span class="string">"0"</span> + dnaStr</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> zombieDetails = &#123;</span><br><span class="line">    <span class="comment">// å‰ä¸¤ä½æ•°æ„æˆå¤´éƒ¨.æˆ‘ä»¬å¯èƒ½æœ‰7ç§å¤´éƒ¨, æ‰€ä»¥ % 7</span></span><br><span class="line">    <span class="comment">// å¾—åˆ°çš„æ•°åœ¨0-6,å†åŠ ä¸Š1,æ•°çš„èŒƒå›´å˜æˆ1-7</span></span><br><span class="line">    <span class="comment">// é€šè¿‡è¿™æ ·è®¡ç®—ï¼š</span></span><br><span class="line">    headChoice: dnaStr.substring(<span class="number">0</span>, <span class="number">2</span>) % <span class="number">7</span> + <span class="number">1</span>ï¼Œ</span><br><span class="line">    <span class="comment">// æˆ‘ä»¬å¾—åˆ°çš„å›¾ç‰‡åç§°ä»head1.png åˆ° head7.png</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¥ä¸‹æ¥çš„ä¸¤ä½æ•°æ„æˆçœ¼ç›, çœ¼ç›å˜åŒ–å°±å¯¹11å–æ¨¡:</span></span><br><span class="line">    eyeChoice: dnaStr.substring(<span class="number">2</span>, <span class="number">4</span>) % <span class="number">11</span> + <span class="number">1</span>,</span><br><span class="line">    <span class="comment">// å†æ¥ä¸‹æ¥çš„ä¸¤ä½æ•°æ„æˆè¡£æœï¼Œè¡£æœå˜åŒ–å°±å¯¹6å–æ¨¡:</span></span><br><span class="line">    shirtChoice: dnaStr.substring(<span class="number">4</span>, <span class="number">6</span>) % <span class="number">6</span> + <span class="number">1</span>,</span><br><span class="line">    <span class="comment">//æœ€å6ä½æ§åˆ¶é¢œè‰². ç”¨cssé€‰æ‹©å™¨: hue-rotateæ¥æ›´æ–°</span></span><br><span class="line">    <span class="comment">// 360åº¦:</span></span><br><span class="line">    skinColorChoice: <span class="built_in">parseInt</span>(dnaStr.substring(<span class="number">6</span>, <span class="number">8</span>) / <span class="number">100</span> * <span class="number">360</span>),</span><br><span class="line">    eyeColorChoice: <span class="built_in">parseInt</span>(dnaStr.substring(<span class="number">8</span>, <span class="number">10</span>) / <span class="number">100</span> * <span class="number">360</span>),</span><br><span class="line">    clothesColorChoice: <span class="built_in">parseInt</span>(dnaStr.substring(<span class="number">10</span>, <span class="number">12</span>) / <span class="number">100</span> * <span class="number">360</span>),</span><br><span class="line">    zombieName: name,</span><br><span class="line">    zombieDescription: <span class="string">"A Level 1 CryptoZombie"</span>,</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> zombieDetails</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬çš„ JavaScript æ‰€åšçš„å°±æ˜¯è·å–ç”±<code>zombieDetails</code> äº§ç”Ÿçš„æ•°æ®, å¹¶ä¸”åˆ©ç”¨æµè§ˆå™¨é‡Œçš„ JavaScript ç¥å¥‡åŠŸèƒ½ (æˆ‘ä»¬ç”¨ Vue.js)ï¼Œç½®æ¢å‡ºå›¾åƒä»¥åŠä½¿ç”¨CSSè¿‡æ»¤å™¨ã€‚åœ¨åé¢çš„è¯¾ç¨‹ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°å…¨éƒ¨çš„ä»£ç ã€‚</p><h2 id="è¯•ä¸€ä¸‹å§"><a href="#è¯•ä¸€ä¸‹å§" class="headerlink" title="è¯•ä¸€ä¸‹å§!"></a>è¯•ä¸€ä¸‹å§!</h2><p>åœ¨å³é¢çš„è¾“å…¥æ¡†é‡Œè¾“å…¥ä½ çš„åå­—ï¼Œçœ‹çœ‹ä½ èƒ½å¾—åˆ°å“ªç§åƒµå°¸ï¼</p><p><strong>ä¸€æ—¦ä½ å¾—åˆ°ä¸€ä¸ªæ»¡æ„çš„åƒµå°¸, ç‚¹å‡»ä¸‹é¢çš„ â€œä¸‹ä¸€ç« â€ æŒ‰é’®ä¿å­˜ä½ çš„åƒµå°¸ï¼Œç»“æŸç¬¬ä¸€è¯¾!</strong></p><p><img src="https://i.loli.net/2020/06/27/M7xR5BkscQhlyf2.png" alt="image-20200627013408075"></p><h1 id="åäº”ã€ç¬¬ä¸€è¯¾æ‰“å¡"><a href="#åäº”ã€ç¬¬ä¸€è¯¾æ‰“å¡" class="headerlink" title="åäº”ã€ç¬¬ä¸€è¯¾æ‰“å¡"></a>åäº”ã€ç¬¬ä¸€è¯¾æ‰“å¡</h1><p><img src="https://i.loli.net/2020/06/27/J8bZ17ehKlOtckY.png" alt="image-20200627013444060"></p><p><a href="https://share.cryptozombies.io/zh/lesson/1/share/truffle_solidity_web3.js_javaScript" target="_blank" rel="noopener">æˆ‘çš„åƒµå°¸å¤§å†›1</a></p>]]></content>
      
      
      <categories>
          
          <category> loom network </category>
          
      </categories>
      
      
        <tags>
            
            <tag> solidity </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é«˜çº§ Solidity ç†è®º</title>
      <link href="/2020/06/26/%E9%AB%98%E7%BA%A7%20Solidity%20%E7%90%86%E8%AE%BA/"/>
      <url>/2020/06/26/%E9%AB%98%E7%BA%A7%20Solidity%20%E7%90%86%E8%AE%BA/</url>
      
        <content type="html"><![CDATA[<p>åœ¨å­¦ä¹ solidityçš„è¿‡ç¨‹ä¸­å‘ç°ä¸€ä¸ªåœ¨çº¿å­¦ä¹ å¹³å°ï¼Œè¿™æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„åœ¨çº¿æ™ºèƒ½åˆçº¦å­¦ä¹ ç¯å¢ƒï¼Œç›®æ ‡æ˜¯æ•™ä¼šå¤§å®¶å®ç° DApp æ¸¸æˆã€‚è¿™ä¸ªç½‘ç«™çš„ç‰¹ç‚¹æ˜¯è‡ªä½œéå¸¸ç²¾è‰¯ï¼Œå„ç§è¾…åŠ©å­¦ä¹ ææ–™ä¸°å¯Œï¼Œå¹¶ä¸”æ˜¯å¯¹ Solidity å°ç™½å‹å¥½çš„ã€‚</p><p><a href="https://cryptozombies.io/" target="_blank" rel="noopener">ç‚¹å‡»è¿™é‡Œè¿›å…¥å­¦ä¹ å¹³å°</a></p><h1 id="ä¸€ã€æ™ºèƒ½åè®®çš„æ°¸å›ºæ€§"><a href="#ä¸€ã€æ™ºèƒ½åè®®çš„æ°¸å›ºæ€§" class="headerlink" title="ä¸€ã€æ™ºèƒ½åè®®çš„æ°¸å›ºæ€§"></a>ä¸€ã€æ™ºèƒ½åè®®çš„æ°¸å›ºæ€§</h1><p>åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬è®²çš„ Solidity å’Œå…¶ä»–è¯­è¨€æ²¡æœ‰è´¨çš„åŒºåˆ«ï¼Œå®ƒé•¿å¾—ä¹Ÿå¾ˆåƒ JavaScriptã€‚</p><a id="more"></a><p>ä½†æ˜¯ï¼Œåœ¨æœ‰å‡ ç‚¹ä»¥å¤ªåŠä¸Šçš„ DApp è·Ÿæ™®é€šçš„åº”ç”¨ç¨‹åºæœ‰ç€å¤©å£¤ä¹‹åˆ«ã€‚</p><p>ç¬¬ä¸€ä¸ªä¾‹å­ï¼Œåœ¨ä½ æŠŠæ™ºèƒ½åè®®ä¼ ä¸Šä»¥å¤ªåŠä¹‹åï¼Œå®ƒå°±å˜å¾—<strong>ä¸å¯æ›´æ”¹</strong>, è¿™ç§æ°¸å›ºæ€§æ„å‘³ç€ä½ çš„ä»£ç æ°¸è¿œä¸èƒ½è¢«è°ƒæ•´æˆ–æ›´æ–°ã€‚</p><p>ä½ ç¼–è¯‘çš„ç¨‹åºä¼šä¸€ç›´ï¼Œæ°¸ä¹…çš„ï¼Œä¸å¯æ›´æ”¹çš„ï¼Œå­˜åœ¨ä»¥å¤ªåŠä¸Šã€‚è¿™å°±æ˜¯ Solidity ä»£ç çš„å®‰å…¨æ€§å¦‚æ­¤é‡è¦çš„ä¸€ä¸ªåŸå› ã€‚å¦‚æœä½ çš„æ™ºèƒ½åè®®æœ‰ä»»ä½•æ¼æ´ï¼Œå³ä½¿ä½ å‘ç°äº†ä¹Ÿæ— æ³•è¡¥æ•‘ã€‚ä½ åªèƒ½è®©ä½ çš„ç”¨æˆ·ä»¬æ”¾å¼ƒè¿™ä¸ªæ™ºèƒ½åè®®ï¼Œç„¶åè½¬ç§»åˆ°ä¸€ä¸ªæ–°çš„ä¿®å¤åçš„åˆçº¦ä¸Šã€‚</p><p>ä½†è¿™æ°å¥½ä¹Ÿæ˜¯æ™ºèƒ½åˆçº¦çš„ä¸€å¤§ä¼˜åŠ¿ã€‚ä»£ç è¯´æ˜ä¸€åˆ‡ã€‚å¦‚æœä½ å»è¯»æ™ºèƒ½åˆçº¦çš„ä»£ç ï¼Œå¹¶éªŒè¯å®ƒï¼Œä½ ä¼šå‘ç°ï¼Œä¸€æ—¦å‡½æ•°è¢«å®šä¹‰ä¸‹æ¥ï¼Œæ¯ä¸€æ¬¡çš„è¿è¡Œï¼Œç¨‹åºéƒ½ä¼šä¸¥æ ¼éµç…§å‡½æ•°ä¸­åŸæœ‰çš„ä»£ç é€»è¾‘ä¸€ä¸ä¸è‹Ÿåœ°æ‰§è¡Œï¼Œå®Œå…¨ä¸ç”¨æ‹…å¿ƒå‡½æ•°è¢«äººç¯¡æ”¹è€Œå¾—åˆ°æ„å¤–çš„ç»“æœã€‚</p><h2 id="å¤–éƒ¨ä¾èµ–å…³ç³»"><a href="#å¤–éƒ¨ä¾èµ–å…³ç³»" class="headerlink" title="å¤–éƒ¨ä¾èµ–å…³ç³»"></a>å¤–éƒ¨ä¾èµ–å…³ç³»</h2><p>åœ¨ç¬¬2è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†åŠ å¯†å°çŒ«ï¼ˆCryptoKittiesï¼‰åˆçº¦çš„åœ°å€ç¡¬ç¼–ç åˆ° DApp ä¸­å»äº†ã€‚æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œå¦‚æœåŠ å¯†å°çŒ«å‡ºäº†ç‚¹é—®é¢˜ï¼Œæ¯”æ–¹è¯´ï¼Œé›†ä½“æ¶ˆå¤±äº†ä¼šæ€ä¹ˆæ ·ï¼Ÿ è™½ç„¶è¿™ç§äº‹æƒ…å‡ ä¹ä¸å¯èƒ½å‘ç”Ÿï¼Œä½†æ˜¯ï¼Œå¦‚æœå°çŒ«æ²¡äº†ï¼Œæˆ‘ä»¬çš„ DApp ä¹Ÿä¼šéšä¹‹å¤±æ•ˆ â€“ å› ä¸ºæˆ‘ä»¬åœ¨ DApp çš„ä»£ç ä¸­ç”¨â€œç¡¬ç¼–ç â€çš„æ–¹å¼æŒ‡å®šäº†åŠ å¯†å°çŒ«çš„åœ°å€ï¼Œå¦‚æœè¿™ä¸ªæ ¹æ®åœ°å€æ‰¾ä¸åˆ°å°çŒ«ï¼Œæˆ‘ä»¬çš„åƒµå°¸ä¹Ÿå°±åƒä¸åˆ°å°çŒ«äº†ï¼Œè€ŒæŒ‰ç…§å‰é¢çš„æè¿°ï¼Œæˆ‘ä»¬å´æ²¡æ³•ä¿®æ”¹åˆçº¦å»åº”ä»˜è¿™ä¸ªå˜åŒ–ï¼</p><p>å› æ­¤ï¼Œæˆ‘ä»¬ä¸èƒ½ç¡¬ç¼–ç ï¼Œè€Œè¦é‡‡ç”¨â€œå‡½æ•°â€ï¼Œä»¥ä¾¿äº DApp çš„å…³é”®éƒ¨åˆ†å¯ä»¥ä»¥å‚æ•°å½¢å¼ä¿®æ”¹ã€‚</p><p>æ¯”æ–¹è¯´ï¼Œæˆ‘ä»¬ä¸å†ä¸€å¼€å§‹å°±æŠŠçŒç‰©åœ°å€ç»™å†™å…¥ä»£ç ï¼Œè€Œæ˜¯å†™ä¸ªå‡½æ•° <code>setKittyContractAddress</code>, è¿è¡Œæ—¶å†è®¾å®šçŒç‰©çš„åœ°å€ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥éšæ—¶å»é”å®šæ–°çš„çŒç‰©ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒåŠ å¯†å°çŒ«é›†ä½“æ¶ˆå¤±äº†ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ "><a href="#å®æˆ˜æ¼”ä¹ " class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>è¯·ä¿®æ”¹ç¬¬2è¯¾çš„ä»£ç ï¼Œä½¿å¾—å¯ä»¥é€šè¿‡ç¨‹åºæ›´æ”¹ CryptoKitties åˆçº¦åœ°å€ã€‚</p><ol><li>åˆ é™¤é‡‡ç”¨ç¡¬ç¼–ç  æ–¹å¼çš„ <code>ckAddress</code> ä»£ç è¡Œã€‚</li><li>ä¹‹å‰åˆ›å»º <code>kittyContract</code> å˜é‡çš„é‚£è¡Œä»£ç ï¼Œä¿®æ”¹ä¸ºå¯¹ <code>kittyContract</code> å˜é‡çš„å£°æ˜ â€“ æš‚æ—¶ä¸ç»™å®ƒæŒ‡å®šå…·ä½“çš„å®ä¾‹ã€‚</li><li>åˆ›å»ºåä¸º <code>setKittyContractAddress</code> çš„å‡½æ•°ï¼Œ å®ƒå¸¦ä¸€ä¸ªå‚æ•° <code>_address</code>ï¼ˆ<code>address</code>ç±»å‹ï¼‰ï¼Œ å¯è§æ€§è®¾ä¸º<code>external</code>ã€‚</li><li>åœ¨å‡½æ•°å†…éƒ¨ï¼Œæ·»åŠ ä¸€è¡Œä»£ç ï¼Œå°† <code>kittyContract</code> å˜é‡è®¾ç½®ä¸ºè¿”å›å€¼ï¼š<code>KittyInterfaceï¼ˆ_addressï¼‰</code>ã€‚</li></ol><blockquote><p>æ³¨æ„ï¼šä½ å¯èƒ½ä¼šæ³¨æ„åˆ°è¿™ä¸ªåŠŸèƒ½æœ‰ä¸ªå®‰å…¨æ¼æ´ï¼Œåˆ«æ‹…å¿ƒ - å’±ä»¬åˆ°ä¸‹ä¸€ç« é‡Œè§£å†³å®ƒ;ï¼‰</p></blockquote><h2 id="åˆçº¦ä¿®æ”¹"><a href="#åˆçº¦ä¿®æ”¹" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><p>zombiefeeding.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefactory.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract KittyInterface &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getKitty</span>(<span class="params">uint256 _id</span>) <span class="title">external</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    bool isGestating,</span></span></span><br><span class="line"><span class="function"><span class="params">    bool isReady,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 cooldownIndex,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 nextActionAt,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 siringWithId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 birthTime,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 matronId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 sireId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 generation,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 genes</span></span></span><br><span class="line"><span class="function"><span class="params">  </span>);</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">contract</span> <span class="title">ZombieFeeding</span> <span class="title">is</span> <span class="title">ZombieFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1. ç§»é™¤è¿™ä¸€è¡Œ:</span></span><br><span class="line">  <span class="comment">//address ckAddress = 0x06012c8cf97BEaD5deAe237070F9587f8E7A266d;</span></span><br><span class="line">  <span class="comment">// 2. åªå£°æ˜å˜é‡:</span></span><br><span class="line">  <span class="comment">//KittyInterface kittyContract = KittyInterface(ckAddress);</span></span><br><span class="line">  KittyInterface kittyContract;</span><br><span class="line">  <span class="comment">// 3. å¢åŠ  setKittyContractAddress æ–¹æ³•</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">setKittyContractAddress</span>(<span class="params">address _address</span>) <span class="title">external</span> </span>&#123;</span><br><span class="line">    kittyContract = KittyInterface(_address);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedAndMultiply</span>(<span class="params">uint _zombieId, uint _targetDna, string species</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    Zombie storage myZombie = zombies[_zombieId];</span><br><span class="line">    _targetDna = _targetDna % dnaModulus;</span><br><span class="line">    uint newDna = (myZombie.dna + _targetDna) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (keccak256(species) == keccak256(<span class="string">"kitty"</span>)) &#123;</span><br><span class="line">      newDna = newDna - newDna % <span class="number">100</span> + <span class="number">99</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    _createZombie(<span class="string">"NoName"</span>, newDna);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedOnKitty</span>(<span class="params">uint _zombieId, uint _kittyId</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    uint kittyDna;</span><br><span class="line">    (,,,,,,,,,kittyDna) = kittyContract.getKitty(_kittyId);</span><br><span class="line">    feedAndMultiply(_zombieId, kittyDna, <span class="string">"kitty"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="äºŒã€Ownable-Contracts"><a href="#äºŒã€Ownable-Contracts" class="headerlink" title="äºŒã€Ownable Contracts"></a>äºŒã€Ownable Contracts</h1><p>ä¸Šä¸€ç« ä¸­ï¼Œæ‚¨æœ‰æ²¡æœ‰å‘ç°ä»»ä½•å®‰å…¨æ¼æ´å‘¢ï¼Ÿ</p><p>å‘€ï¼<code>setKittyContractAddress</code> å¯è§æ€§å±…ç„¶ç”³æ˜ä¸ºâ€œå¤–éƒ¨çš„â€ï¼ˆ<code>external</code>ï¼‰ï¼Œå²‚ä¸æ˜¯ä»»ä½•äººéƒ½å¯ä»¥è°ƒç”¨å®ƒï¼ ä¹Ÿå°±æ˜¯è¯´ï¼Œä»»ä½•è°ƒç”¨è¯¥å‡½æ•°çš„äººéƒ½å¯ä»¥æ›´æ”¹ CryptoKitties åˆçº¦çš„åœ°å€ï¼Œä½¿å¾—å…¶ä»–äººéƒ½æ²¡æ³•å†è¿è¡Œæˆ‘ä»¬çš„ç¨‹åºäº†ã€‚</p><p>æˆ‘ä»¬ç¡®å®æ˜¯å¸Œæœ›è¿™ä¸ªåœ°å€èƒ½å¤Ÿåœ¨åˆçº¦ä¸­ä¿®æ”¹ï¼Œä½†æˆ‘å¯æ²¡è¯´è®©æ¯ä¸ªäººå»æ”¹å®ƒå‘€ã€‚</p><p>è¦å¯¹ä»˜è¿™æ ·çš„æƒ…å†µï¼Œé€šå¸¸çš„åšæ³•æ˜¯æŒ‡å®šåˆçº¦çš„â€œæ‰€æœ‰æƒâ€ - å°±æ˜¯è¯´ï¼Œç»™å®ƒæŒ‡å®šä¸€ä¸ªä¸»äººï¼ˆæ²¡é”™ï¼Œå°±æ˜¯æ‚¨ï¼‰ï¼Œåªæœ‰ä¸»äººå¯¹å®ƒäº«æœ‰ç‰¹æƒã€‚</p><h2 id="OpenZeppelinåº“çš„Ownable-åˆçº¦"><a href="#OpenZeppelinåº“çš„Ownable-åˆçº¦" class="headerlink" title="OpenZeppelinåº“çš„Ownable åˆçº¦"></a>OpenZeppelinåº“çš„<code>Ownable</code> åˆçº¦</h2><p>ä¸‹é¢æ˜¯ä¸€ä¸ª <code>Ownable</code> åˆçº¦çš„ä¾‹å­ï¼š æ¥è‡ª <strong>_ OpenZeppelin _</strong> Solidity åº“çš„ <code>Ownable</code> åˆçº¦ã€‚ OpenZeppelin æ˜¯ä¸»æ‰“å®‰ä¿å’Œç¤¾åŒºå®¡æŸ¥çš„æ™ºèƒ½åˆçº¦åº“ï¼Œæ‚¨å¯ä»¥åœ¨è‡ªå·±çš„ DAppsä¸­å¼•ç”¨ã€‚ç­‰æŠŠè¿™ä¸€è¯¾å­¦å®Œï¼Œæ‚¨ä¸è¦å‚¬æˆ‘ä»¬å‘å¸ƒä¸‹ä¸€è¯¾ï¼Œæœ€å¥½åˆ©ç”¨è¿™ä¸ªæ—¶é—´æŠŠ OpenZeppelin çš„ç½‘ç«™çœ‹çœ‹ï¼Œä¿ç®¡æ‚¨ä¼šå­¦åˆ°å¾ˆå¤šä¸œè¥¿ï¼</p><p>æŠŠæ¥¼ä¸‹è¿™ä¸ªåˆçº¦è¯»è¯»é€šï¼Œæ˜¯ä¸æ˜¯è¿˜æœ‰äº›æ²¡è§è¿‡ä»£ç ï¼Ÿåˆ«æ‹…å¿ƒï¼Œæˆ‘ä»¬éšåä¼šè§£é‡Šã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @title Ownable</span></span><br><span class="line"><span class="comment"> * @dev The Ownable contract has an owner address, and provides basic authorization control</span></span><br><span class="line"><span class="comment"> * functions, this simplifies the implementation of "user permissions".</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">contract Ownable &#123;</span><br><span class="line">  address public owner;</span><br><span class="line">  event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * @dev The Ownable constructor sets the original `owner` of the contract to the sender</span></span><br><span class="line"><span class="comment">   * account.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">Ownable</span>(<span class="params"></span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    owner = msg.sender;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * @dev Throws if called by any account other than the owner.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  modifier onlyOwner() &#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == owner);</span><br><span class="line">    _;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * @dev Allows the current owner to transfer control of the contract to a newOwner.</span></span><br><span class="line"><span class="comment">   * @param newOwner The address to transfer ownership to.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">transferOwnership</span>(<span class="params">address newOwner</span>) <span class="title">public</span> <span class="title">onlyOwner</span> </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(newOwner != address(<span class="number">0</span>));</span><br><span class="line">    OwnershipTransferred(owner, newOwner);</span><br><span class="line">    owner = newOwner;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æœ‰æ²¡æœ‰æ‚¨æ²¡å­¦è¿‡çš„ä¸œä¸œï¼Ÿ</p><ul><li>æ„é€ å‡½æ•°ï¼š<code>function Ownable()</code>æ˜¯ä¸€ä¸ª <strong>_ constructor_</strong> (æ„é€ å‡½æ•°)ï¼Œæ„é€ å‡½æ•°ä¸æ˜¯å¿…é¡»çš„ï¼Œå®ƒä¸åˆçº¦åŒåï¼Œæ„é€ å‡½æ•°ä¸€ç”Ÿä¸­å”¯ä¸€çš„ä¸€æ¬¡æ‰§è¡Œï¼Œå°±æ˜¯åœ¨åˆçº¦æœ€åˆè¢«åˆ›å»ºçš„æ—¶å€™ã€‚</li><li>å‡½æ•°ä¿®é¥°ç¬¦ï¼š<code>modifier onlyOwner()</code>ã€‚ ä¿®é¥°ç¬¦è·Ÿå‡½æ•°å¾ˆç±»ä¼¼ï¼Œä¸è¿‡æ˜¯ç”¨æ¥ä¿®é¥°å…¶ä»–å·²æœ‰å‡½æ•°ç”¨çš„ï¼Œ åœ¨å…¶ä»–è¯­å¥æ‰§è¡Œå‰ï¼Œä¸ºå®ƒæ£€æŸ¥ä¸‹å…ˆéªŒæ¡ä»¶ã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥å†™ä¸ªä¿®é¥°ç¬¦ <code>onlyOwner</code> æ£€æŸ¥ä¸‹è°ƒç”¨è€…ï¼Œç¡®ä¿åªæœ‰åˆçº¦çš„ä¸»äººæ‰èƒ½è¿è¡Œæœ¬å‡½æ•°ã€‚æˆ‘ä»¬ä¸‹ä¸€ç« ä¸­ä¼šè¯¦ç»†è®²è¿°ä¿®é¥°ç¬¦ï¼Œä»¥åŠé‚£ä¸ªå¥‡æ€ªçš„<code>_;</code>ã€‚</li><li><code>indexed</code> å…³é”®å­—ï¼šåˆ«æ‹…å¿ƒï¼Œæˆ‘ä»¬è¿˜ç”¨ä¸åˆ°å®ƒã€‚</li></ul><p>æ‰€ä»¥<code>Ownable</code> åˆçº¦åŸºæœ¬éƒ½ä¼šè¿™ä¹ˆå¹²ï¼š</p><ol><li>åˆçº¦åˆ›å»ºï¼Œæ„é€ å‡½æ•°å…ˆè¡Œï¼Œå°†å…¶ <code>owner</code> è®¾ç½®ä¸º<code>msg.sender</code>ï¼ˆå…¶éƒ¨ç½²è€…ï¼‰</li><li>ä¸ºå®ƒåŠ ä¸Šä¸€ä¸ªä¿®é¥°ç¬¦ <code>onlyOwner</code>ï¼Œå®ƒä¼šé™åˆ¶é™Œç”Ÿäººçš„è®¿é—®ï¼Œå°†è®¿é—®æŸäº›å‡½æ•°çš„æƒé™é”å®šåœ¨ <code>owner</code> ä¸Šã€‚</li><li>å…è®¸å°†åˆçº¦æ‰€æœ‰æƒè½¬è®©ç»™ä»–äººã€‚</li></ol><p><code>onlyOwner</code> ç®€ç›´äººè§äººçˆ±ï¼Œå¤§å¤šæ•°äººå¼€å‘è‡ªå·±çš„ Solidity DAppsï¼Œéƒ½æ˜¯ä»å¤åˆ¶/ç²˜è´´ <code>Ownable</code> å¼€å§‹çš„ï¼Œä»å®ƒå†ç»§æ‰¿å‡ºçš„å­ç±»ï¼Œå¹¶åœ¨ä¹‹ä¸Šè¿›è¡ŒåŠŸèƒ½å¼€å‘ã€‚</p><p>æ—¢ç„¶æˆ‘ä»¬æƒ³æŠŠ <code>setKittyContractAddress</code> é™åˆ¶ä¸º <code>onlyOwner</code> ï¼Œæˆ‘ä»¬ä¹Ÿè¦åšåŒæ ·çš„äº‹æƒ…ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -1"><a href="#å®æˆ˜æ¼”ä¹ -1" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>é¦–å…ˆï¼Œå°† <code>Ownable</code> åˆçº¦çš„ä»£ç å¤åˆ¶ä¸€ä»½åˆ°æ–°æ–‡ä»¶ <code>ownable.sol</code> ä¸­ã€‚ æ¥ä¸‹æ¥ï¼Œåˆ›å»ºä¸€ä¸ª <code>ZombieFactory</code>ï¼Œç»§æ‰¿ <code>Ownable</code>ã€‚</p><p>1.åœ¨ç¨‹åºä¸­å¯¼å…¥ <code>ownable.sol</code> çš„å†…å®¹ã€‚ å¦‚æœæ‚¨ä¸è®°å¾—æ€ä¹ˆåšäº†ï¼Œå‚è€ƒä¸‹ <code>zombiefeeding.sol</code>ã€‚</p><p>2.ä¿®æ”¹ <code>ZombieFactory</code> åˆçº¦ï¼Œ è®©å®ƒç»§æ‰¿è‡ª <code>Ownable</code>ã€‚ å¦‚æœæ‚¨ä¸è®°å¾—æ€ä¹ˆåšäº†ï¼Œçœ‹çœ‹ <code>zombiefeeding.sol</code>ã€‚</p><h2 id="åˆçº¦ä¿®æ”¹-1"><a href="#åˆçº¦ä¿®æ”¹-1" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><p>zombiefactory.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. åœ¨è¿™é‡Œå¯¼å…¥</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./ownable.sol"</span>;</span><br><span class="line"><span class="comment">// 2. åœ¨è¿™é‡Œç»§æ‰¿:</span></span><br><span class="line"><span class="comment">//contract ZombieFactory &#123;</span></span><br><span class="line">contract ZombieFactory is Ownable &#123;  </span><br><span class="line"></span><br><span class="line">    event NewZombie(uint zombieId, string name, uint dna);</span><br><span class="line"></span><br><span class="line">    uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">    uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line"></span><br><span class="line">    struct Zombie &#123;</span><br><span class="line">        string name;</span><br><span class="line">        uint dna;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Zombie[] public zombies;</span><br><span class="line"></span><br><span class="line">    mapping (<span class="function"><span class="params">uint</span> =&gt;</span> address) public zombieToOwner;</span><br><span class="line">    mapping (<span class="function"><span class="params">address</span> =&gt;</span> uint) ownerZombieCount;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_createZombie</span>(<span class="params">string _name, uint _dna</span>) <span class="title">internal</span> </span>&#123;</span><br><span class="line">        uint id = zombies.push(Zombie(_name, _dna)) - <span class="number">1</span>;</span><br><span class="line">        zombieToOwner[id] = msg.sender;</span><br><span class="line">        ownerZombieCount[msg.sender]++;</span><br><span class="line">        NewZombie(id, _name, _dna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_generateRandomDna</span>(<span class="params">string _str</span>) <span class="title">private</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>) </span>&#123;</span><br><span class="line">        uint rand = uint(keccak256(_str));</span><br><span class="line">        <span class="keyword">return</span> rand % dnaModulus;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">createRandomZombie</span>(<span class="params">string _name</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        <span class="built_in">require</span>(ownerZombieCount[msg.sender] == <span class="number">0</span>);</span><br><span class="line">        uint randDna = _generateRandomDna(_name);</span><br><span class="line">        randDna = randDna - randDna % <span class="number">100</span>;</span><br><span class="line">        _createZombie(_name, randDna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ä¸‰ã€onlyOwner-å‡½æ•°ä¿®é¥°ç¬¦"><a href="#ä¸‰ã€onlyOwner-å‡½æ•°ä¿®é¥°ç¬¦" class="headerlink" title="ä¸‰ã€onlyOwner å‡½æ•°ä¿®é¥°ç¬¦"></a>ä¸‰ã€onlyOwner å‡½æ•°ä¿®é¥°ç¬¦</h1><p>ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸ªåŸºæœ¬ç‰ˆçš„åˆçº¦ <code>ZombieFactory</code> äº†ï¼Œå®ƒç»§æ‰¿è‡ª <code>Ownable</code> æ¥å£ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç»™ <code>ZombieFeeding</code> åŠ ä¸Š <code>onlyOwner</code> å‡½æ•°ä¿®é¥°ç¬¦ã€‚</p><p>è¿™å°±æ˜¯åˆçº¦ç»§æ‰¿çš„å·¥ä½œåŸç†ã€‚è®°å¾—ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ZombieFeeding æ˜¯ä¸ª ZombieFactory</span><br><span class="line">ZombieFactory æ˜¯ä¸ª Ownable</span><br></pre></td></tr></table></figure><p>å› æ­¤ <code>ZombieFeeding</code> ä¹Ÿæ˜¯ä¸ª <code>Ownable</code>, å¹¶å¯ä»¥é€šè¿‡ <code>Ownable</code> æ¥å£è®¿é—®çˆ¶ç±»ä¸­çš„å‡½æ•°/äº‹ä»¶/ä¿®é¥°ç¬¦ã€‚å¾€åï¼Œ<code>ZombieFeeding</code> çš„ç»§æ‰¿è€…åˆçº¦ä»¬åŒæ ·ä¹Ÿå¯ä»¥è¿™ä¹ˆå»¶ç»­ä¸‹å»ã€‚</p><h2 id="å‡½æ•°ä¿®é¥°ç¬¦"><a href="#å‡½æ•°ä¿®é¥°ç¬¦" class="headerlink" title="å‡½æ•°ä¿®é¥°ç¬¦"></a>å‡½æ•°ä¿®é¥°ç¬¦</h2><p>å‡½æ•°ä¿®é¥°ç¬¦çœ‹èµ·æ¥è·Ÿå‡½æ•°æ²¡ä»€ä¹ˆä¸åŒï¼Œä¸è¿‡å…³é”®å­—<code>modifier</code> å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œè¿™æ˜¯ä¸ª<code>modifier(ä¿®é¥°ç¬¦)</code>ï¼Œè€Œä¸æ˜¯ä¸ª<code>function(å‡½æ•°)</code>ã€‚å®ƒä¸èƒ½åƒå‡½æ•°é‚£æ ·è¢«ç›´æ¥è°ƒç”¨ï¼Œåªèƒ½è¢«æ·»åŠ åˆ°å‡½æ•°å®šä¹‰çš„æœ«å°¾ï¼Œç”¨ä»¥æ”¹å˜å‡½æ•°çš„è¡Œä¸ºã€‚</p><p>å’±ä»¬ä»”ç»†è¯»è¯» <code>onlyOwner</code>:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @dev è°ƒç”¨è€…ä¸æ˜¯â€˜ä¸»äººâ€™ï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">modifier onlyOwner() &#123;</span><br><span class="line">  <span class="built_in">require</span>(msg.sender == owner);</span><br><span class="line">  _;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>onlyOwner</code> å‡½æ•°ä¿®é¥°ç¬¦æ˜¯è¿™ä¹ˆç”¨çš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">contract MyContract is Ownable &#123;</span><br><span class="line">  event LaughManiacally(string laughter);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//æ³¨æ„ï¼ `onlyOwner`ä¸Šåœº :</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">likeABoss</span>(<span class="params"></span>) <span class="title">external</span> <span class="title">onlyOwner</span> </span>&#123;</span><br><span class="line">    LaughManiacally(<span class="string">"Muahahahaha"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ <code>likeABoss</code> å‡½æ•°ä¸Šçš„ <code>onlyOwner</code> ä¿®é¥°ç¬¦ã€‚ å½“ä½ è°ƒç”¨ <code>likeABoss</code> æ—¶ï¼Œ<strong>é¦–å…ˆæ‰§è¡Œ</strong> <code>onlyOwner</code> ä¸­çš„ä»£ç ï¼Œ æ‰§è¡Œåˆ° <code>onlyOwner</code> ä¸­çš„ <code>_;</code> è¯­å¥æ—¶ï¼Œç¨‹åºå†è¿”å›å¹¶æ‰§è¡Œ <code>likeABoss</code> ä¸­çš„ä»£ç ã€‚</p><p>å¯è§ï¼Œå°½ç®¡å‡½æ•°ä¿®é¥°ç¬¦ä¹Ÿå¯ä»¥åº”ç”¨åˆ°å„ç§åœºåˆï¼Œä½†æœ€å¸¸è§çš„è¿˜æ˜¯æ”¾åœ¨å‡½æ•°æ‰§è¡Œä¹‹å‰æ·»åŠ å¿«é€Ÿçš„ <code>require</code>æ£€æŸ¥ã€‚</p><p>å› ä¸ºç»™å‡½æ•°æ·»åŠ äº†ä¿®é¥°ç¬¦ <code>onlyOwner</code>ï¼Œä½¿å¾—<strong>å”¯æœ‰åˆçº¦çš„ä¸»äºº</strong>ï¼ˆä¹Ÿå°±æ˜¯éƒ¨ç½²è€…ï¼‰æ‰èƒ½è°ƒç”¨å®ƒã€‚</p><blockquote><p>æ³¨æ„ï¼šä¸»äººå¯¹åˆçº¦äº«æœ‰çš„ç‰¹æƒå½“ç„¶æ˜¯æ­£å½“çš„ï¼Œä¸è¿‡ä¹Ÿå¯èƒ½è¢«æ¶æ„ä½¿ç”¨ã€‚æ¯”å¦‚ï¼Œä¸‡ä¸€ï¼Œä¸»äººæ·»åŠ äº†ä¸ªåé—¨ï¼Œå…è®¸ä»–å·èµ°åˆ«äººçš„åƒµå°¸å‘¢ï¼Ÿ</p></blockquote><blockquote><p>æ‰€ä»¥éå¸¸é‡è¦çš„æ˜¯ï¼Œéƒ¨ç½²åœ¨ä»¥å¤ªåŠä¸Šçš„ DAppï¼Œå¹¶ä¸èƒ½ä¿è¯å®ƒçœŸæ­£åšåˆ°å»ä¸­å¿ƒï¼Œä½ éœ€è¦é˜…è¯»å¹¶ç†è§£å®ƒçš„æºä»£ç ï¼Œæ‰èƒ½é˜²æ­¢å…¶ä¸­æ²¡æœ‰è¢«éƒ¨ç½²è€…æ¶æ„æ¤å…¥åé—¨ï¼›ä½œä¸ºå¼€å‘äººå‘˜ï¼Œå¦‚ä½•åšåˆ°æ—¢è¦ç»™è‡ªå·±ç•™ä¸‹ä¿®å¤ bug çš„ä½™åœ°ï¼Œåˆè¦å°½é‡åœ°æ”¾æƒç»™ä½¿ç”¨è€…ï¼Œä»¥ä¾¿è®©ä»–ä»¬æ”¾å¿ƒä½ ï¼Œä»è€Œæ„¿æ„æŠŠæ•°æ®æ”¾åœ¨ä½ çš„ DApp ä¸­ï¼Œè¿™ç¡®å®éœ€è¦ä¸ªå¾®å¦™çš„å¹³è¡¡ã€‚</p></blockquote><h2 id="å®æˆ˜æ¼”ä¹ -2"><a href="#å®æˆ˜æ¼”ä¹ -2" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥é™åˆ¶ç¬¬ä¸‰æ–¹å¯¹ <code>setKittyContractAddress</code>çš„è®¿é—®ï¼Œé™¤äº†æˆ‘ä»¬è‡ªå·±ï¼Œè°éƒ½æ— æ³•å»ä¿®æ”¹å®ƒã€‚</p><ol><li>å°† <code>onlyOwner</code> å‡½æ•°ä¿®é¥°ç¬¦æ·»åŠ åˆ° <code>setKittyContractAddress</code> ä¸­ã€‚</li></ol><h2 id="åˆçº¦ä¿®æ”¹-2"><a href="#åˆçº¦ä¿®æ”¹-2" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><p>zombiefeeding.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefactory.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract KittyInterface &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getKitty</span>(<span class="params">uint256 _id</span>) <span class="title">external</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    bool isGestating,</span></span></span><br><span class="line"><span class="function"><span class="params">    bool isReady,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 cooldownIndex,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 nextActionAt,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 siringWithId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 birthTime,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 matronId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 sireId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 generation,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 genes</span></span></span><br><span class="line"><span class="function"><span class="params">  </span>);</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">contract</span> <span class="title">ZombieFeeding</span> <span class="title">is</span> <span class="title">ZombieFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  KittyInterface kittyContract;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¿®æ”¹è¿™ä¸ªå‡½æ•°:</span></span><br><span class="line">  <span class="comment">//function setKittyContractAddress(address _address) external &#123;</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">setKittyContractAddress</span>(<span class="params">address _address</span>) <span class="title">external</span> <span class="title">onlyOwner</span> </span>&#123;</span><br><span class="line">    kittyContract = KittyInterface(_address);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedAndMultiply</span>(<span class="params">uint _zombieId, uint _targetDna, string species</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    Zombie storage myZombie = zombies[_zombieId];</span><br><span class="line">    _targetDna = _targetDna % dnaModulus;</span><br><span class="line">    uint newDna = (myZombie.dna + _targetDna) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (keccak256(species) == keccak256(<span class="string">"kitty"</span>)) &#123;</span><br><span class="line">      newDna = newDna - newDna % <span class="number">100</span> + <span class="number">99</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    _createZombie(<span class="string">"NoName"</span>, newDna);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedOnKitty</span>(<span class="params">uint _zombieId, uint _kittyId</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    uint kittyDna;</span><br><span class="line">    (,,,,,,,,,kittyDna) = kittyContract.getKitty(_kittyId);</span><br><span class="line">    feedAndMultiply(_zombieId, kittyDna, <span class="string">"kitty"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å››ã€Gas"><a href="#å››ã€Gas" class="headerlink" title="å››ã€Gas"></a>å››ã€Gas</h1><p>å‰å®³ï¼ç°åœ¨æˆ‘ä»¬æ‡‚äº†å¦‚ä½•åœ¨ç¦æ­¢ç¬¬ä¸‰æ–¹ä¿®æ”¹æˆ‘ä»¬çš„åˆçº¦çš„åŒæ—¶ï¼Œç•™ä¸ªåé—¨ç»™å’±ä»¬è‡ªå·±å»ä¿®æ”¹ã€‚</p><p>è®©æˆ‘ä»¬æ¥çœ‹å¦ä¸€ç§ä½¿å¾— Solidity ç¼–ç¨‹è¯­è¨€ä¸ä¼—ä¸åŒçš„ç‰¹å¾ï¼š</p><h2 id="Gas-é©±åŠ¨ä»¥å¤ªåŠDAppsçš„èƒ½æº"><a href="#Gas-é©±åŠ¨ä»¥å¤ªåŠDAppsçš„èƒ½æº" class="headerlink" title="Gas - é©±åŠ¨ä»¥å¤ªåŠDAppsçš„èƒ½æº"></a>Gas - é©±åŠ¨ä»¥å¤ªåŠDAppsçš„èƒ½æº</h2><p>åœ¨ Solidity ä¸­ï¼Œä½ çš„ç”¨æˆ·æƒ³è¦æ¯æ¬¡æ‰§è¡Œä½ çš„ DApp éƒ½éœ€è¦æ”¯ä»˜ä¸€å®šçš„ <strong><em>gas\</em></strong>ï¼Œgas å¯ä»¥ç”¨ä»¥å¤ªå¸è´­ä¹°ï¼Œå› æ­¤ï¼Œç”¨æˆ·æ¯æ¬¡è·‘ DApp éƒ½å¾—èŠ±è´¹ä»¥å¤ªå¸ã€‚</p><p>ä¸€ä¸ª DApp æ”¶å–å¤šå°‘ gas å–å†³äºåŠŸèƒ½é€»è¾‘çš„å¤æ‚ç¨‹åº¦ã€‚æ¯ä¸ªæ“ä½œèƒŒåï¼Œéƒ½åœ¨è®¡ç®—å®Œæˆè¿™ä¸ªæ“ä½œæ‰€éœ€è¦çš„è®¡ç®—èµ„æºï¼Œï¼ˆæ¯”å¦‚ï¼Œå­˜å‚¨æ•°æ®å°±æ¯”åšä¸ªåŠ æ³•è¿ç®—è´µå¾—å¤šï¼‰ï¼Œ ä¸€æ¬¡æ“ä½œæ‰€éœ€è¦èŠ±è´¹çš„ <strong><em>gas\</em></strong> ç­‰äºè¿™ä¸ªæ“ä½œèƒŒåçš„æ‰€æœ‰è¿ç®—èŠ±é”€çš„æ€»å’Œã€‚</p><p>ç”±äºè¿è¡Œä½ çš„ç¨‹åºéœ€è¦èŠ±è´¹ç”¨æˆ·çš„çœŸé‡‘ç™½é“¶ï¼Œåœ¨ä»¥å¤ªåŠä¸­ä»£ç çš„ç¼–ç¨‹è¯­è¨€ï¼Œæ¯”å…¶ä»–ä»»ä½•ç¼–ç¨‹è¯­è¨€éƒ½æ›´å¼ºè°ƒä¼˜åŒ–ã€‚åŒæ ·çš„åŠŸèƒ½ï¼Œä½¿ç”¨ç¬¨æ‹™çš„ä»£ç å¼€å‘çš„ç¨‹åºï¼Œæ¯”èµ·ç»è¿‡ç²¾å·§ä¼˜åŒ–çš„ä»£ç æ¥ï¼Œè¿è¡ŒèŠ±è´¹æ›´é«˜ï¼Œè¿™æ˜¾ç„¶ä¼šç»™æˆåƒä¸Šä¸‡çš„ç”¨æˆ·å¸¦æ¥å¤§é‡ä¸å¿…è¦çš„å¼€é”€ã€‚</p><h2 id="ä¸ºä»€ä¹ˆè¦ç”¨-gas-æ¥é©±åŠ¨ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨-gas-æ¥é©±åŠ¨ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨ gas\ æ¥é©±åŠ¨ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ç”¨ <strong><em>gas\</em></strong> æ¥é©±åŠ¨ï¼Ÿ</h2><p>ä»¥å¤ªåŠå°±åƒä¸€ä¸ªå·¨å¤§ã€ç¼“æ…¢ã€ä½†éå¸¸å®‰å…¨çš„ç”µè„‘ã€‚å½“ä½ è¿è¡Œä¸€ä¸ªç¨‹åºçš„æ—¶å€™ï¼Œç½‘ç»œä¸Šçš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½åœ¨è¿›è¡Œç›¸åŒçš„è¿ç®—ï¼Œä»¥éªŒè¯å®ƒçš„è¾“å‡º â€”â€” è¿™å°±æ˜¯æ‰€è°“çš„â€œå»ä¸­å¿ƒåŒ–â€ ç”±äºæ•°ä»¥åƒè®¡çš„èŠ‚ç‚¹åŒæ—¶åœ¨éªŒè¯ç€æ¯ä¸ªåŠŸèƒ½çš„è¿è¡Œï¼Œè¿™å¯ä»¥ç¡®ä¿å®ƒçš„æ•°æ®ä¸ä¼šè¢«è¢«ç›‘æ§ï¼Œæˆ–è€…è¢«åˆ»æ„ä¿®æ”¹ã€‚</p><p>å¯èƒ½ä¼šæœ‰ç”¨æˆ·ç”¨æ— é™å¾ªç¯å µå¡ç½‘ç»œï¼ŒæŠ‘æˆ–ç”¨å¯†é›†è¿ç®—æ¥å ç”¨å¤§é‡çš„ç½‘ç»œèµ„æºï¼Œä¸ºäº†é˜²æ­¢è¿™ç§äº‹æƒ…çš„å‘ç”Ÿï¼Œä»¥å¤ªåŠçš„åˆ›å»ºè€…ä¸ºä»¥å¤ªåŠä¸Šçš„èµ„æºåˆ¶å®šäº†ä»·æ ¼ï¼Œæƒ³è¦åœ¨ä»¥å¤ªåŠä¸Šè¿ç®—æˆ–è€…å­˜å‚¨ï¼Œä½ éœ€è¦å…ˆä»˜è´¹ã€‚</p><blockquote><p>æ³¨æ„ï¼šå¦‚æœä½ ä½¿ç”¨ä¾§é“¾ï¼Œå€’æ˜¯ä¸ä¸€å®šéœ€è¦ä»˜è´¹ï¼Œæ¯”å¦‚å’±ä»¬åœ¨ Loom Network ä¸Šæ„å»ºçš„ CryptoZombies å°±å…è´¹ã€‚ä½ ä¸ä¼šæƒ³è¦åœ¨ä»¥å¤ªåŠä¸»ç½‘ä¸Šç©å„¿â€œé­”å…½ä¸–ç•Œâ€å§ï¼Ÿ - æ‰€éœ€è¦çš„ gas å¯èƒ½ä¼šä¹°åˆ°ä½ ç ´äº§ã€‚ä½†æ˜¯ä½ å¯ä»¥æ‰¾ä¸ªç®—æ³•ç†å¿µä¸åŒçš„ä¾§é“¾æ¥ç©å®ƒã€‚æˆ‘ä»¬å°†åœ¨ä»¥åçš„è¯¾ç¨‹ä¸­å’±ä»¬ä¼šè®¨è®ºåˆ°ï¼Œä»€ä¹ˆæ ·çš„ DApp åº”è¯¥éƒ¨ç½²åœ¨å¤ªåŠä¸»é“¾ä¸Šï¼Œä»€ä¹ˆåˆæœ€å¥½æ”¾åœ¨ä¾§é“¾ã€‚</p></blockquote><h2 id="çœ-gas-çš„æ‹›æ•°ï¼šç»“æ„å°è£…-ï¼ˆStruct-packingï¼‰"><a href="#çœ-gas-çš„æ‹›æ•°ï¼šç»“æ„å°è£…-ï¼ˆStruct-packingï¼‰" class="headerlink" title="çœ gas çš„æ‹›æ•°ï¼šç»“æ„å°è£… ï¼ˆStruct packingï¼‰"></a>çœ gas çš„æ‹›æ•°ï¼šç»“æ„å°è£… ï¼ˆStruct packingï¼‰</h2><p>åœ¨ç¬¬1è¯¾ä¸­ï¼Œæˆ‘ä»¬æåˆ°é™¤äº†åŸºæœ¬ç‰ˆçš„ <code>uint</code> å¤–ï¼Œè¿˜æœ‰å…¶ä»–å˜ç§ <code>uint</code>ï¼š<code>uint8</code>ï¼Œ<code>uint16</code>ï¼Œ<code>uint32</code>ç­‰ã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬ä¸ä¼šè€ƒè™‘ä½¿ç”¨ <code>uint</code> å˜ç§ï¼Œå› ä¸ºæ— è®ºå¦‚ä½•å®šä¹‰ <code>uint</code>çš„å¤§å°ï¼ŒSolidity ä¸ºå®ƒä¿ç•™256ä½çš„å­˜å‚¨ç©ºé—´ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ <code>uint8</code> è€Œä¸æ˜¯<code>uint</code>ï¼ˆ<code>uint256</code>ï¼‰ä¸ä¼šä¸ºä½ èŠ‚çœä»»ä½• gasã€‚</p><p>é™¤éï¼ŒæŠŠ <code>uint</code> ç»‘å®šåˆ° <code>struct</code> é‡Œé¢ã€‚</p><p>å¦‚æœä¸€ä¸ª <code>struct</code> ä¸­æœ‰å¤šä¸ª <code>uint</code>ï¼Œåˆ™å°½å¯èƒ½ä½¿ç”¨è¾ƒå°çš„ <code>uint</code>, Solidity ä¼šå°†è¿™äº› <code>uint</code> æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œä»è€Œå ç”¨è¾ƒå°‘çš„å­˜å‚¨ç©ºé—´ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">struct NormalStruct &#123;</span><br><span class="line">  uint a;</span><br><span class="line">  uint b;</span><br><span class="line">  uint c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">struct MiniMe &#123;</span><br><span class="line">  uint32 a;</span><br><span class="line">  uint32 b;</span><br><span class="line">  uint c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å› ä¸ºä½¿ç”¨äº†ç»“æ„æ‰“åŒ…ï¼Œ`mini` æ¯” `normal` å ç”¨çš„ç©ºé—´æ›´å°‘</span></span><br><span class="line">NormalStruct normal = NormalStruct(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>);</span><br><span class="line">MiniMe mini = MiniMe(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>);</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼Œå½“ <code>uint</code> å®šä¹‰åœ¨ä¸€ä¸ª <code>struct</code> ä¸­çš„æ—¶å€™ï¼Œå°½é‡ä½¿ç”¨æœ€å°çš„æ•´æ•°å­ç±»å‹ä»¥èŠ‚çº¦ç©ºé—´ã€‚ å¹¶ä¸”æŠŠåŒæ ·ç±»å‹çš„å˜é‡æ”¾ä¸€èµ·ï¼ˆå³åœ¨ struct ä¸­å°†æŠŠå˜é‡æŒ‰ç…§ç±»å‹ä¾æ¬¡æ”¾ç½®ï¼‰ï¼Œè¿™æ · Solidity å¯ä»¥å°†å­˜å‚¨ç©ºé—´æœ€å°åŒ–ã€‚ä¾‹å¦‚ï¼Œæœ‰ä¸¤ä¸ª <code>struct</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uint c; uint32 a; uint32 b;` å’Œ `uint32 a; uint c; uint32 b;</span><br></pre></td></tr></table></figure><p>å‰è€…æ¯”åè€…éœ€è¦çš„gasæ›´å°‘ï¼Œå› ä¸ºå‰è€…æŠŠ<code>uint32</code>æ”¾ä¸€èµ·äº†ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -3"><a href="#å®æˆ˜æ¼”ä¹ -3" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>åœ¨æœ¬è¯¾ä¸­ï¼Œå’±ä»¬ç»™åƒµå°¸æ·»2ä¸ªæ–°åŠŸèƒ½ï¼š<code>level</code> å’Œ <code>readyTime</code> - åè€…æ˜¯ç”¨æ¥å®ç°ä¸€ä¸ªâ€œå†·å´å®šæ—¶å™¨â€ï¼Œä»¥é™åˆ¶åƒµå°¸çŒé£Ÿçš„é¢‘ç‡ã€‚</p><p>è®©æˆ‘ä»¬å›åˆ° <code>zombiefactory.sol</code>ã€‚</p><ol><li>ä¸º <code>Zombie</code> ç»“æ„ä½“ æ·»åŠ ä¸¤ä¸ªå±æ€§ï¼š<code>level</code>ï¼ˆ<code>uint32</code>ï¼‰å’Œ<code>readyTime</code>ï¼ˆ<code>uint32</code>ï¼‰ã€‚å› ä¸ºå¸Œæœ›åŒç±»å‹æ•°æ®æ‰“æˆä¸€ä¸ªåŒ…ï¼Œæ‰€ä»¥æŠŠå®ƒä»¬æ”¾åœ¨ç»“æ„ä½“çš„æœ«å°¾ã€‚</li></ol><p>32ä½è¶³ä»¥ä¿å­˜åƒµå°¸çš„çº§åˆ«å’Œæ—¶é—´æˆ³äº†ï¼Œè¿™æ ·æ¯”èµ·ä½¿ç”¨æ™®é€šçš„<code>uint</code>ï¼ˆ256ä½ï¼‰ï¼Œå¯ä»¥æ›´ç´§å¯†åœ°å°è£…æ•°æ®ï¼Œä»è€Œä¸ºæˆ‘ä»¬çœç‚¹ gasã€‚</p><h2 id="åˆçº¦ä¿®æ”¹-3"><a href="#åˆçº¦ä¿®æ”¹-3" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><p>zombiefactory.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./ownable.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory is Ownable &#123;</span><br><span class="line"></span><br><span class="line">    event NewZombie(uint zombieId, string name, uint dna);</span><br><span class="line"></span><br><span class="line">    uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">    uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line"></span><br><span class="line">    struct Zombie &#123;</span><br><span class="line">        string name;</span><br><span class="line">        uint dna;</span><br><span class="line">        <span class="comment">//åœ¨è¿™é‡Œæ·»åŠ æ•°æ®</span></span><br><span class="line">        uint32 level;</span><br><span class="line">        uint32 readyTime;    </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Zombie[] public zombies;</span><br><span class="line"></span><br><span class="line">    mapping (<span class="function"><span class="params">uint</span> =&gt;</span> address) public zombieToOwner;</span><br><span class="line">    mapping (<span class="function"><span class="params">address</span> =&gt;</span> uint) ownerZombieCount;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_createZombie</span>(<span class="params">string _name, uint _dna</span>) <span class="title">internal</span> </span>&#123;</span><br><span class="line">        uint id = zombies.push(Zombie(_name, _dna)) - <span class="number">1</span>;</span><br><span class="line">        zombieToOwner[id] = msg.sender;</span><br><span class="line">        ownerZombieCount[msg.sender]++;</span><br><span class="line">        NewZombie(id, _name, _dna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_generateRandomDna</span>(<span class="params">string _str</span>) <span class="title">private</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>) </span>&#123;</span><br><span class="line">        uint rand = uint(keccak256(_str));</span><br><span class="line">        <span class="keyword">return</span> rand % dnaModulus;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">createRandomZombie</span>(<span class="params">string _name</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        <span class="built_in">require</span>(ownerZombieCount[msg.sender] == <span class="number">0</span>);</span><br><span class="line">        uint randDna = _generateRandomDna(_name);</span><br><span class="line">        randDna = randDna - randDna % <span class="number">100</span>;</span><br><span class="line">        _createZombie(_name, randDna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="äº”ã€æ—¶é—´å•ä½"><a href="#äº”ã€æ—¶é—´å•ä½" class="headerlink" title="äº”ã€æ—¶é—´å•ä½"></a>äº”ã€æ—¶é—´å•ä½</h1><p><code>level</code> å±æ€§è¡¨ç¤ºåƒµå°¸çš„çº§åˆ«ã€‚ä»¥åï¼Œåœ¨æˆ‘ä»¬åˆ›å»ºçš„æˆ˜æ–—ç³»ç»Ÿä¸­ï¼Œæ‰“èƒœä»—çš„åƒµå°¸ä¼šé€æ¸å‡çº§å¹¶è·å¾—æ›´å¤šçš„èƒ½åŠ›ã€‚</p><p><code>readyTime</code> ç¨å¾®å¤æ‚ç‚¹ã€‚æˆ‘ä»¬å¸Œæœ›å¢åŠ ä¸€ä¸ªâ€œå†·å´å‘¨æœŸâ€ï¼Œè¡¨ç¤ºåƒµå°¸åœ¨ä¸¤æ¬¡çŒé£Ÿæˆ–æ”»å‡»ä¹‹ä¹‹é—´å¿…é¡»ç­‰å¾…çš„æ—¶é—´ã€‚å¦‚æœæ²¡æœ‰å®ƒï¼Œåƒµå°¸æ¯å¤©å¯èƒ½ä¼šæ”»å‡»å’Œç¹æ®–1,000æ¬¡ï¼Œè¿™æ ·æ¸¸æˆå°±å¤ªç®€å•äº†ã€‚</p><p>ä¸ºäº†è®°å½•åƒµå°¸åœ¨ä¸‹ä¸€æ¬¡è¿›å‡»å‰éœ€è¦ç­‰å¾…çš„æ—¶é—´ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† Solidity çš„æ—¶é—´å•ä½ã€‚</p><h2 id="æ—¶é—´å•ä½"><a href="#æ—¶é—´å•ä½" class="headerlink" title="æ—¶é—´å•ä½"></a>æ—¶é—´å•ä½</h2><p>Solidity ä½¿ç”¨è‡ªå·±çš„æœ¬åœ°æ—¶é—´å•ä½ã€‚</p><p>å˜é‡ <code>now</code> å°†è¿”å›å½“å‰çš„unixæ—¶é—´æˆ³ï¼ˆè‡ª1970å¹´1æœˆ1æ—¥ä»¥æ¥ç»è¿‡çš„ç§’æ•°ï¼‰ã€‚æˆ‘å†™è¿™å¥è¯æ—¶ unix æ—¶é—´æ˜¯ <code>1515527488</code>ã€‚</p><blockquote><p>æ³¨æ„ï¼šUnixæ—¶é—´ä¼ ç»Ÿç”¨ä¸€ä¸ª32ä½çš„æ•´æ•°è¿›è¡Œå­˜å‚¨ã€‚è¿™ä¼šå¯¼è‡´â€œ2038å¹´â€é—®é¢˜ï¼Œå½“è¿™ä¸ª32ä½çš„unixæ—¶é—´æˆ³ä¸å¤Ÿç”¨ï¼Œäº§ç”Ÿæº¢å‡ºï¼Œä½¿ç”¨è¿™ä¸ªæ—¶é—´çš„é—ç•™ç³»ç»Ÿå°±éº»çƒ¦äº†ã€‚æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è®©æˆ‘ä»¬çš„ DApp è·‘å¤Ÿ20å¹´ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨64ä½æ•´æ•°è¡¨ç¤ºæ—¶é—´ï¼Œä½†ä¸ºæ­¤æˆ‘ä»¬çš„ç”¨æˆ·åˆå¾—æ”¯ä»˜æ›´å¤šçš„ gasã€‚çœŸæ˜¯ä¸ªä¸¤éš¾çš„è®¾è®¡å•Šï¼</p></blockquote><p>Solidity è¿˜åŒ…å«<code>ç§’(seconds)</code>ï¼Œ<code>åˆ†é’Ÿ(minutes)</code>ï¼Œ<code>å°æ—¶(hours)</code>ï¼Œ<code>å¤©(days)</code>ï¼Œ<code>å‘¨(weeks)</code> å’Œ <code>å¹´(years)</code> ç­‰æ—¶é—´å•ä½ã€‚å®ƒä»¬éƒ½ä¼šè½¬æ¢æˆå¯¹åº”çš„ç§’æ•°æ”¾å…¥ <code>uint</code> ä¸­ã€‚æ‰€ä»¥ <code>1åˆ†é’Ÿ</code> å°±æ˜¯ <code>60</code>ï¼Œ<code>1å°æ—¶</code>æ˜¯ <code>3600</code>ï¼ˆ60ç§’Ã—60åˆ†é’Ÿï¼‰ï¼Œ<code>1å¤©</code>æ˜¯<code>86400</code>ï¼ˆ24å°æ—¶Ã—60åˆ†é’ŸÃ—60ç§’ï¼‰ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€äº›ä½¿ç”¨æ—¶é—´å•ä½çš„å®ç”¨æ¡ˆä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">uint lastUpdated;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†â€˜ä¸Šæ¬¡æ›´æ–°æ—¶é—´â€™ è®¾ç½®ä¸º â€˜ç°åœ¨â€™</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateTimestamp</span>(<span class="params"></span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">  lastUpdated = now;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœåˆ°ä¸Šæ¬¡`updateTimestamp` è¶…è¿‡5åˆ†é’Ÿï¼Œè¿”å› 'true'</span></span><br><span class="line"><span class="comment">// ä¸åˆ°5åˆ†é’Ÿè¿”å› 'false'</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fiveMinutesHavePassed</span>(<span class="params"></span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">bool</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (now &gt;= (lastUpdated + <span class="number">5</span> minutes));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ‰äº†è¿™äº›å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºåƒµå°¸è®¾å®šâ€œå†·é™æ—¶é—´â€åŠŸèƒ½ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -4"><a href="#å®æˆ˜æ¼”ä¹ -4" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>ç°åœ¨å’±ä»¬ç»™DAppæ·»åŠ ä¸€ä¸ªâ€œå†·å´å‘¨æœŸâ€çš„è®¾å®šï¼Œè®©åƒµå°¸ä¸¤æ¬¡æ”»å‡»æˆ–æ•çŒä¹‹é—´å¿…é¡»ç­‰å¾… <strong>1å¤©</strong>ã€‚</p><ol><li><p>å£°æ˜ä¸€ä¸ªåä¸º <code>cooldownTime</code> çš„<code>uint</code>ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸º <code>1 days</code>ã€‚ï¼ˆæ²¡é”™ï¼Œâ€1 daysâ€œä½¿ç”¨äº†å¤æ•°ï¼Œ å¦åˆ™é€šä¸è¿‡ç¼–è¯‘å™¨ï¼‰</p></li><li><p>å› ä¸ºåœ¨ä¸Šä¸€ç« ä¸­æˆ‘ä»¬ç»™ <code>Zombie</code> ç»“æ„ä½“ä¸­æ·»åŠ  <code>level</code> å’Œ <code>readyTime</code> ä¸¤ä¸ªå‚æ•°ï¼Œæ‰€ä»¥ç°åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>Zombie</code> ç»“æ„ä½“æ—¶ï¼Œéœ€è¦ä¿®æ”¹ <code>_createZombie()</code>ï¼Œåœ¨å…¶ä¸­æŠŠæ–°æ—§å‚æ•°éƒ½åˆå§‹åŒ–ä¸€ä¸‹ã€‚</p><p>ä¿®æ”¹ <code>zombies.push</code> é‚£ä¸€è¡Œï¼Œ æ·»åŠ åŠ 2ä¸ªå‚æ•°ï¼š<code>1</code>ï¼ˆè¡¨ç¤ºå½“å‰çš„ <code>level</code> ï¼‰å’Œ<code>uint32ï¼ˆnow + cooldownTimeï¼‰</code>ï¼ˆç°åœ¨+å†·å´æ—¶é—´ï¼Œè¡¨ç¤ºä¸‹æ¬¡å…è®¸æ”»å‡»çš„æ—¶é—´ <code>readyTime</code>ï¼‰ã€‚</p></li></ol><blockquote><p>æ³¨æ„ï¼šå¿…é¡»ä½¿ç”¨ <code>uint32ï¼ˆ...ï¼‰</code> è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œå› ä¸º <code>now</code> è¿”å›ç±»å‹ <code>uint256</code>ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æ˜ç¡®å°†å®ƒè½¬æ¢æˆä¸€ä¸ª <code>uint32</code> ç±»å‹çš„å˜é‡ã€‚</p></blockquote><p><code>now + cooldownTime</code> å°†ç­‰äºå½“å‰çš„unixæ—¶é—´æˆ³ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰åŠ ä¸Šâ€1å¤©â€œé‡Œçš„ç§’æ•° - è¿™å°†ç­‰äºä»ç°åœ¨èµ·1å¤©åçš„unixæ—¶é—´æˆ³ã€‚ç„¶åæˆ‘ä»¬å°±æ¯”è¾ƒï¼Œçœ‹çœ‹è¿™ä¸ªåƒµå°¸çš„ <code>readyTime</code>æ˜¯å¦å¤§äº <code>now</code>ï¼Œä»¥å†³å®šå†æ¬¡å¯ç”¨åƒµå°¸çš„æ—¶æœºæœ‰æ²¡æœ‰åˆ°æ¥ã€‚</p><p>ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºå¦‚ä½•é€šè¿‡ <code>readyTime</code> æ¥è§„èŒƒåƒµå°¸çš„è¡Œä¸ºã€‚</p><h2 id="åˆçº¦ä¿®æ”¹-4"><a href="#åˆçº¦ä¿®æ”¹-4" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><p>zombiefactory.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./ownable.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieFactory is Ownable &#123;</span><br><span class="line"></span><br><span class="line">    event NewZombie(uint zombieId, string name, uint dna);</span><br><span class="line"></span><br><span class="line">    uint dnaDigits = <span class="number">16</span>;</span><br><span class="line">    uint dnaModulus = <span class="number">10</span> ** dnaDigits;</span><br><span class="line">    <span class="comment">// 1. åœ¨è¿™é‡Œå®šä¹‰ `cooldownTime`</span></span><br><span class="line">    uint cooldownTime = <span class="number">1</span> days;</span><br><span class="line">    struct Zombie &#123;</span><br><span class="line">        string name;</span><br><span class="line">        uint dna;</span><br><span class="line">        uint32 level;</span><br><span class="line">        uint32 readyTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Zombie[] public zombies;</span><br><span class="line"></span><br><span class="line">    mapping (<span class="function"><span class="params">uint</span> =&gt;</span> address) public zombieToOwner;</span><br><span class="line">    mapping (<span class="function"><span class="params">address</span> =&gt;</span> uint) ownerZombieCount;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_createZombie</span>(<span class="params">string _name, uint _dna</span>) <span class="title">internal</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 2. ä¿®æ”¹ä¸‹é¢è¿™è¡Œ:</span></span><br><span class="line">        <span class="comment">//uint id = zombies.push(Zombie(_name, _dna)) - 1;</span></span><br><span class="line">        uint id = zombies.push(Zombie(_name, _dna, <span class="number">1</span>, uint32(now + cooldownTime))) - <span class="number">1</span>;</span><br><span class="line">        zombieToOwner[id] = msg.sender;</span><br><span class="line">        ownerZombieCount[msg.sender]++;</span><br><span class="line">        NewZombie(id, _name, _dna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_generateRandomDna</span>(<span class="params">string _str</span>) <span class="title">private</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">uint</span>) </span>&#123;</span><br><span class="line">        uint rand = uint(keccak256(_str));</span><br><span class="line">        <span class="keyword">return</span> rand % dnaModulus;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">createRandomZombie</span>(<span class="params">string _name</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        <span class="built_in">require</span>(ownerZombieCount[msg.sender] == <span class="number">0</span>);</span><br><span class="line">        uint randDna = _generateRandomDna(_name);</span><br><span class="line">        randDna = randDna - randDna % <span class="number">100</span>;</span><br><span class="line">        _createZombie(_name, randDna);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å…­ã€åƒµå°¸å†·å´"><a href="#å…­ã€åƒµå°¸å†·å´" class="headerlink" title="å…­ã€åƒµå°¸å†·å´"></a>å…­ã€åƒµå°¸å†·å´</h1><p>ç°åœ¨ï¼Œ<code>Zombie</code> ç»“æ„ä½“ä¸­å®šä¹‰å¥½äº†ä¸€ä¸ª <code>readyTime</code> å±æ€§ï¼Œè®©æˆ‘ä»¬è·³åˆ° <code>zombiefeeding.sol</code>ï¼Œ å»å®ç°ä¸€ä¸ªâ€å†·å´å‘¨æœŸå®šæ—¶å™¨â€œã€‚</p><p>æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ä¿®æ”¹ <code>feedAndMultiply</code>ï¼š</p><ol><li>â€æ•çŒâ€œè¡Œä¸ºä¼šè§¦å‘åƒµå°¸çš„â€å†·å´å‘¨æœŸâ€œ</li><li>åƒµå°¸åœ¨è¿™æ®µâ€å†·å´å‘¨æœŸâ€œç»“æŸå‰ä¸å¯å†æ•çŒå°çŒ«</li></ol><p>è¿™å°†é™åˆ¶åƒµå°¸ï¼Œé˜²æ­¢å…¶æ— é™åˆ¶åœ°æ•çŒå°çŒ«æˆ–è€…æ•´å¤©ä¸åœåœ°ç¹æ®–ã€‚å°†æ¥ï¼Œå½“æˆ‘ä»¬å¢åŠ æˆ˜æ–—åŠŸèƒ½æ—¶ï¼Œæˆ‘ä»¬åŒæ ·ç”¨â€å†·å´å‘¨æœŸâ€œé™åˆ¶åƒµå°¸ä¹‹é—´æ‰“æ–—çš„é¢‘ç‡ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦å®šä¹‰ä¸€äº›è¾…åŠ©å‡½æ•°ï¼Œè®¾ç½®å¹¶æ£€æŸ¥åƒµå°¸çš„ <code>readyTime</code>ã€‚</p><h2 id="å°†ç»“æ„ä½“ä½œä¸ºå‚æ•°ä¼ å…¥"><a href="#å°†ç»“æ„ä½“ä½œä¸ºå‚æ•°ä¼ å…¥" class="headerlink" title="å°†ç»“æ„ä½“ä½œä¸ºå‚æ•°ä¼ å…¥"></a>å°†ç»“æ„ä½“ä½œä¸ºå‚æ•°ä¼ å…¥</h2><p>ç”±äºç»“æ„ä½“çš„å­˜å‚¨æŒ‡é’ˆå¯ä»¥ä»¥å‚æ•°çš„æ–¹å¼ä¼ é€’ç»™ä¸€ä¸ª <code>private</code> æˆ– <code>internal</code> çš„å‡½æ•°ï¼Œå› æ­¤ç»“æ„ä½“å¯ä»¥åœ¨å¤šä¸ªå‡½æ•°ä¹‹é—´ç›¸äº’ä¼ é€’ã€‚</p><p>éµå¾ªè¿™æ ·çš„è¯­æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_doStuff</span>(<span class="params">Zombie storage _zombie</span>) <span class="title">internal</span> </span>&#123;</span><br><span class="line">  <span class="comment">// do stuff with _zombie</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·æˆ‘ä»¬å¯ä»¥å°†æŸåƒµå°¸çš„å¼•ç”¨ç›´æ¥ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸ç”¨æ˜¯é€šè¿‡å‚æ•°ä¼ å…¥åƒµå°¸IDåï¼Œå‡½æ•°å†ä¾æ®IDå»æŸ¥æ‰¾ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -5"><a href="#å®æˆ˜æ¼”ä¹ -5" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><ol><li>å…ˆå®šä¹‰ä¸€ä¸ª <code>_triggerCooldown</code> å‡½æ•°ã€‚å®ƒè¦æ±‚ä¸€ä¸ªå‚æ•°ï¼Œ<code>_zombie</code>ï¼Œè¡¨ç¤ºä¸€æŸä¸ªåƒµå°¸çš„å­˜å‚¨æŒ‡é’ˆã€‚è¿™ä¸ªå‡½æ•°å¯è§æ€§è®¾ç½®ä¸º <code>internal</code>ã€‚</li><li>åœ¨å‡½æ•°ä¸­ï¼ŒæŠŠ <code>_zombie.readyTime</code> è®¾ç½®ä¸º <code>uint32ï¼ˆnow + cooldownTimeï¼‰</code>ã€‚</li><li>æ¥ä¸‹æ¥ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º <code>_isReady</code> çš„å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°çš„å‚æ•°ä¹Ÿæ˜¯åä¸º <code>_zombie</code> çš„ <code>Zombie storage</code>ã€‚è¿™ä¸ªåŠŸèƒ½åªå…·æœ‰ <code>internal</code> å¯è§æ€§ï¼Œå¹¶è¿”å›ä¸€ä¸ª <code>bool</code> å€¼ã€‚</li><li>å‡½æ•°è®¡ç®—è¿”å›<code>(_zombie.readyTime &lt;= now)</code>ï¼Œå€¼ä¸º <code>true</code> æˆ– <code>false</code>ã€‚è¿™ä¸ªåŠŸèƒ½çš„ç›®çš„æ˜¯åˆ¤æ–­ä¸‹æ¬¡å…è®¸çŒé£Ÿçš„æ—¶é—´æ˜¯å¦å·²ç»åˆ°äº†ã€‚</li></ol><h2 id="åˆçº¦ä¿®æ”¹-5"><a href="#åˆçº¦ä¿®æ”¹-5" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><p>zombiefeeding.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefactory.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract KittyInterface &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getKitty</span>(<span class="params">uint256 _id</span>) <span class="title">external</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    bool isGestating,</span></span></span><br><span class="line"><span class="function"><span class="params">    bool isReady,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 cooldownIndex,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 nextActionAt,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 siringWithId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 birthTime,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 matronId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 sireId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 generation,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 genes</span></span></span><br><span class="line"><span class="function"><span class="params">  </span>);</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">contract</span> <span class="title">ZombieFeeding</span> <span class="title">is</span> <span class="title">ZombieFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  KittyInterface kittyContract;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">setKittyContractAddress</span>(<span class="params">address _address</span>) <span class="title">external</span> <span class="title">onlyOwner</span> </span>&#123;</span><br><span class="line">    kittyContract = KittyInterface(_address);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1. åœ¨è¿™é‡Œå®šä¹‰ `_triggerCooldown` å‡½æ•°</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">_triggerCooldown</span>(<span class="params">Zombie storage _zombie</span>) <span class="title">internal</span> </span>&#123;</span><br><span class="line">    _zombie.readyTime = uint32(now + cooldownTime);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 2. åœ¨è¿™é‡Œå®šä¹‰ `_isReady` å‡½æ•°</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">_isReady</span>(<span class="params">Zombie storage _zombie</span>) <span class="title">internal</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">bool</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> (_zombie.readyTime &lt;= now);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedAndMultiply</span>(<span class="params">uint _zombieId, uint _targetDna, string species</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    Zombie storage myZombie = zombies[_zombieId];</span><br><span class="line">    _targetDna = _targetDna % dnaModulus;</span><br><span class="line">    uint newDna = (myZombie.dna + _targetDna) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (keccak256(species) == keccak256(<span class="string">"kitty"</span>)) &#123;</span><br><span class="line">      newDna = newDna - newDna % <span class="number">100</span> + <span class="number">99</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    _createZombie(<span class="string">"NoName"</span>, newDna);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedOnKitty</span>(<span class="params">uint _zombieId, uint _kittyId</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    uint kittyDna;</span><br><span class="line">    (,,,,,,,,,kittyDna) = kittyContract.getKitty(_kittyId);</span><br><span class="line">    feedAndMultiply(_zombieId, kittyDna, <span class="string">"kitty"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ä¸ƒã€å…¬æœ‰å‡½æ•°å’Œå®‰å…¨æ€§"><a href="#ä¸ƒã€å…¬æœ‰å‡½æ•°å’Œå®‰å…¨æ€§" class="headerlink" title="ä¸ƒã€å…¬æœ‰å‡½æ•°å’Œå®‰å…¨æ€§"></a>ä¸ƒã€å…¬æœ‰å‡½æ•°å’Œå®‰å…¨æ€§</h1><p>ç°åœ¨æ¥ä¿®æ”¹ <code>feedAndMultiply</code> ï¼Œå®ç°å†·å´å‘¨æœŸã€‚</p><p>å›é¡¾ä¸€ä¸‹è¿™ä¸ªå‡½æ•°ï¼Œå‰ä¸€è¯¾ä¸Šæˆ‘ä»¬å°†å…¶å¯è§æ€§è®¾ç½®ä¸º<code>public</code>ã€‚ä½ å¿…é¡»ä»”ç»†åœ°æ£€æŸ¥æ‰€æœ‰å£°æ˜ä¸º <code>public</code> å’Œ <code>external</code>çš„å‡½æ•°ï¼Œä¸€ä¸ªä¸ªæ’é™¤ç”¨æˆ·æ»¥ç”¨å®ƒä»¬çš„å¯èƒ½ï¼Œè°¨é˜²å®‰å…¨æ¼æ´ã€‚è¯·è®°ä½ï¼Œå¦‚æœè¿™äº›å‡½æ•°æ²¡æœ‰ç±»ä¼¼ <code>onlyOwner</code> è¿™æ ·çš„å‡½æ•°ä¿®é¥°ç¬¦ï¼Œç”¨æˆ·èƒ½åˆ©ç”¨å„ç§å¯èƒ½çš„å‚æ•°å»è°ƒç”¨å®ƒä»¬ã€‚</p><p>æ£€æŸ¥å®Œè¿™ä¸ªå‡½æ•°ï¼Œç”¨æˆ·å°±å¯ä»¥ç›´æ¥è°ƒç”¨è¿™ä¸ªå®ƒï¼Œå¹¶ä¼ å…¥ä»–ä»¬æ‰€å¸Œæœ›çš„ <code>_targetDna</code> æˆ– <code>species</code> ã€‚æ‰“ä¸ªæ¸¸æˆè¿˜å¾—éµå¾ªè¿™ä¹ˆå¤šçš„è§„åˆ™ï¼Œè¿˜èƒ½ä¸èƒ½æ„‰å¿«åœ°ç©è€å•Šï¼</p><p>ä»”ç»†è§‚å¯Ÿï¼Œè¿™ä¸ªå‡½æ•°åªéœ€è¢« <code>feedOnKitty()</code> è°ƒç”¨ï¼Œå› æ­¤ï¼Œæƒ³è¦é˜²æ­¢æ¼æ´ï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯è®¾å…¶å¯è§æ€§ä¸º <code>internal</code>ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -6"><a href="#å®æˆ˜æ¼”ä¹ -6" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><ol><li>ç›®å‰å‡½æ•° <code>feedAndMultiply</code> å¯è§æ€§ä¸º <code>public</code>ã€‚æˆ‘ä»¬å°†å…¶æ”¹ä¸º <code>internal</code> ä»¥ä¿éšœåˆçº¦å®‰å…¨ã€‚å› ä¸ºæˆ‘ä»¬ä¸å¸Œæœ›ç”¨æˆ·è°ƒç”¨å®ƒçš„æ—¶å€™å¡è¿›ä¸€å †ä¹±ä¸ƒå…«ç³Ÿçš„ DNAã€‚</li><li><code>feedAndMultiply</code> è¿‡ç¨‹éœ€è¦å‚è€ƒ <code>cooldownTime</code>ã€‚é¦–å…ˆï¼Œåœ¨æ‰¾åˆ° <code>myZombie</code> ä¹‹åï¼Œæ·»åŠ ä¸€ä¸ª <code>require</code> è¯­å¥æ¥æ£€æŸ¥ <code>_isReady()</code> å¹¶å°† <code>myZombie</code> ä¼ é€’ç»™å®ƒã€‚è¿™æ ·ç”¨æˆ·å¿…é¡»ç­‰åˆ°åƒµå°¸çš„ <code>å†·å´å‘¨æœŸ</code> ç»“æŸåæ‰èƒ½æ‰§è¡Œ <code>feedAndMultiply</code> åŠŸèƒ½ã€‚</li><li>åœ¨å‡½æ•°ç»“æŸæ—¶ï¼Œè°ƒç”¨ <code>_triggerCooldown(myZombie)</code>ï¼Œæ ‡æ˜æ•çŒè¡Œä¸ºè§¦å‘äº†åƒµå°¸æ–°çš„å†·å´å‘¨æœŸã€‚</li></ol><h2 id="åˆçº¦ä¿®æ”¹-6"><a href="#åˆçº¦ä¿®æ”¹-6" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><p>zombiefeeding.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefactory.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract KittyInterface &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getKitty</span>(<span class="params">uint256 _id</span>) <span class="title">external</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    bool isGestating,</span></span></span><br><span class="line"><span class="function"><span class="params">    bool isReady,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 cooldownIndex,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 nextActionAt,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 siringWithId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 birthTime,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 matronId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 sireId,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 generation,</span></span></span><br><span class="line"><span class="function"><span class="params">    uint256 genes</span></span></span><br><span class="line"><span class="function"><span class="params">  </span>);</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">contract</span> <span class="title">ZombieFeeding</span> <span class="title">is</span> <span class="title">ZombieFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  KittyInterface kittyContract;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">setKittyContractAddress</span>(<span class="params">address _address</span>) <span class="title">external</span> <span class="title">onlyOwner</span> </span>&#123;</span><br><span class="line">    kittyContract = KittyInterface(_address);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">_triggerCooldown</span>(<span class="params">Zombie storage _zombie</span>) <span class="title">internal</span> </span>&#123;</span><br><span class="line">    _zombie.readyTime = uint32(now + cooldownTime);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">_isReady</span>(<span class="params">Zombie storage _zombie</span>) <span class="title">internal</span> <span class="title">view</span> <span class="title">returns</span> (<span class="params">bool</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> (_zombie.readyTime &lt;= now);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1. ä½¿è¿™ä¸ªå‡½æ•°çš„å¯è§æ€§ä¸º internal</span></span><br><span class="line">  <span class="comment">//function feedAndMultiply(uint _zombieId, uint _targetDna, string species) public &#123;</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedAndMultiply</span>(<span class="params">uint _zombieId, uint _targetDna, string species</span>) <span class="title">internal</span> </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    Zombie storage myZombie = zombies[_zombieId];</span><br><span class="line">    <span class="comment">// 2. åœ¨è¿™é‡Œä¸º `_isReady` å¢åŠ ä¸€ä¸ªæ£€æŸ¥</span></span><br><span class="line">    <span class="built_in">require</span>(_isReady(myZombie));</span><br><span class="line">    _targetDna = _targetDna % dnaModulus;</span><br><span class="line">    uint newDna = (myZombie.dna + _targetDna) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (keccak256(species) == keccak256(<span class="string">"kitty"</span>)) &#123;</span><br><span class="line">      newDna = newDna - newDna % <span class="number">100</span> + <span class="number">99</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    _createZombie(<span class="string">"NoName"</span>, newDna);</span><br><span class="line">    <span class="comment">// 3. è°ƒç”¨ `triggerCooldown`</span></span><br><span class="line">    _triggerCooldown(myZombie);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">feedOnKitty</span>(<span class="params">uint _zombieId, uint _kittyId</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">    uint kittyDna;</span><br><span class="line">    (,,,,,,,,,kittyDna) = kittyContract.getKitty(_kittyId);</span><br><span class="line">    feedAndMultiply(_zombieId, kittyDna, <span class="string">"kitty"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å…«ã€è¿›ä¸€æ­¥äº†è§£å‡½æ•°ä¿®é¥°ç¬¦"><a href="#å…«ã€è¿›ä¸€æ­¥äº†è§£å‡½æ•°ä¿®é¥°ç¬¦" class="headerlink" title="å…«ã€è¿›ä¸€æ­¥äº†è§£å‡½æ•°ä¿®é¥°ç¬¦"></a>å…«ã€è¿›ä¸€æ­¥äº†è§£å‡½æ•°ä¿®é¥°ç¬¦</h1><p>ç›¸å½“ä¸é”™ï¼æˆ‘ä»¬çš„åƒµå°¸ç°åœ¨æœ‰äº†â€œå†·å´å®šæ—¶å™¨â€åŠŸèƒ½ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ·»åŠ ä¸€äº›è¾…åŠ©æ–¹æ³•ã€‚æˆ‘ä»¬ä¸ºæ‚¨åˆ›å»ºäº†ä¸€ä¸ªåä¸º <code>zombiehelper.sol</code> çš„æ–°æ–‡ä»¶ï¼Œå¹¶ä¸”å°† <code>zombiefeeding.sol</code> å¯¼å…¥å…¶ä¸­ï¼Œè¿™è®©æˆ‘ä»¬çš„ä»£ç æ›´æ•´æ´ã€‚</p><p>æˆ‘ä»¬æ‰“ç®—è®©åƒµå°¸åœ¨è¾¾åˆ°ä¸€å®šæ°´å¹³åï¼Œè·å¾—ç‰¹æ®Šèƒ½åŠ›ã€‚ä½†æ˜¯è¾¾åˆ°è¿™ä¸ªå°ç›®æ ‡ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å­¦ä¸€å­¦ä»€ä¹ˆæ˜¯â€œå‡½æ•°ä¿®é¥°ç¬¦â€ã€‚</p><h2 id="å¸¦å‚æ•°çš„å‡½æ•°ä¿®é¥°ç¬¦"><a href="#å¸¦å‚æ•°çš„å‡½æ•°ä¿®é¥°ç¬¦" class="headerlink" title="å¸¦å‚æ•°çš„å‡½æ•°ä¿®é¥°ç¬¦"></a>å¸¦å‚æ•°çš„å‡½æ•°ä¿®é¥°ç¬¦</h2><p>ä¹‹å‰æˆ‘ä»¬å·²ç»è¯»è¿‡ä¸€ä¸ªç®€å•çš„å‡½æ•°ä¿®é¥°ç¬¦äº†ï¼š<code>onlyOwner</code>ã€‚å‡½æ•°ä¿®é¥°ç¬¦ä¹Ÿå¯ä»¥å¸¦å‚æ•°ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­˜å‚¨ç”¨æˆ·å¹´é¾„çš„æ˜ å°„</span></span><br><span class="line">mapping (<span class="function"><span class="params">uint</span> =&gt;</span> uint) public age;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é™å®šç”¨æˆ·å¹´é¾„çš„ä¿®é¥°ç¬¦</span></span><br><span class="line">modifier olderThan(uint _age, uint _userId) &#123;</span><br><span class="line">  <span class="built_in">require</span>(age[_userId] &gt;= _age);</span><br><span class="line">  _;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¿…é¡»å¹´æ»¡16å‘¨å²æ‰å…è®¸å¼€è½¦ (è‡³å°‘åœ¨ç¾å›½æ˜¯è¿™æ ·çš„).</span></span><br><span class="line"><span class="comment">// æˆ‘ä»¬å¯ä»¥ç”¨å¦‚ä¸‹å‚æ•°è°ƒç”¨`olderThan` ä¿®é¥°ç¬¦:</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">driveCar</span>(<span class="params">uint _userId</span>) <span class="title">public</span> <span class="title">olderThan</span>(<span class="params"><span class="number">16</span>, _userId</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å…¶ä½™çš„ç¨‹åºé€»è¾‘</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°äº†å§ï¼Œ <code>olderThan</code> ä¿®é¥°ç¬¦å¯ä»¥åƒå‡½æ•°ä¸€æ ·æ¥æ”¶å‚æ•°ï¼Œæ˜¯â€œå®¿ä¸»â€å‡½æ•° <code>driveCar</code> æŠŠå‚æ•°ä¼ é€’ç»™å®ƒçš„ä¿®é¥°ç¬¦çš„ã€‚</p><p>æ¥ï¼Œæˆ‘ä»¬è‡ªå·±ç”Ÿäº§ä¸€ä¸ªä¿®é¥°ç¬¦ï¼Œé€šè¿‡ä¼ å…¥çš„<code>level</code>å‚æ•°æ¥é™åˆ¶åƒµå°¸ä½¿ç”¨æŸäº›ç‰¹æ®ŠåŠŸèƒ½ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -7"><a href="#å®æˆ˜æ¼”ä¹ -7" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><ol><li>åœ¨<code>ZombieHelper</code> ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º <code>aboveLevel</code> çš„<code>modifier</code>ï¼Œå®ƒæ¥æ”¶2ä¸ªå‚æ•°ï¼Œ <code>_level</code> (<code>uint</code>ç±»å‹) ä»¥åŠ <code>_zombieId</code> (<code>uint</code>ç±»å‹)ã€‚</li><li>è¿ç”¨å‡½æ•°é€»è¾‘ç¡®ä¿åƒµå°¸ <code>zombies[_zombieId].level</code> å¤§äºæˆ–ç­‰äº <code>_level</code>ã€‚</li><li>è®°ä½ï¼Œä¿®é¥°ç¬¦çš„æœ€åä¸€è¡Œä¸º <code>_;</code>ï¼Œè¡¨ç¤ºä¿®é¥°ç¬¦è°ƒç”¨ç»“æŸåè¿”å›ï¼Œå¹¶æ‰§è¡Œè°ƒç”¨å‡½æ•°ä½™ä¸‹çš„éƒ¨åˆ†ã€‚</li></ol><h2 id="åˆçº¦ä¿®æ”¹-7"><a href="#åˆçº¦ä¿®æ”¹-7" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><p>zombiehelper.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefeeding.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieHelper is ZombieFeeding &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åœ¨è¿™é‡Œå¼€å§‹</span></span><br><span class="line">  modifier aboveLevel(uint _level, uint _zombieId) &#123;</span><br><span class="line">    <span class="built_in">require</span>(zombies[_zombieId].level &gt;= _level);</span><br><span class="line">    _;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ä¹ã€åƒµå°¸ä¿®é¥°ç¬¦"><a href="#ä¹ã€åƒµå°¸ä¿®é¥°ç¬¦" class="headerlink" title="ä¹ã€åƒµå°¸ä¿®é¥°ç¬¦"></a>ä¹ã€åƒµå°¸ä¿®é¥°ç¬¦</h1><p>ç°åœ¨è®©æˆ‘ä»¬è®¾è®¡ä¸€äº›ä½¿ç”¨ <code>aboveLevel</code> ä¿®é¥°ç¬¦çš„å‡½æ•°ã€‚</p><p>ä½œä¸ºæ¸¸æˆï¼Œæ‚¨å¾—æœ‰ä¸€äº›æªæ–½æ¿€åŠ±ç©å®¶ä»¬å»å‡çº§ä»–ä»¬çš„åƒµå°¸ï¼š</p><ul><li>2çº§ä»¥ä¸Šçš„åƒµå°¸ï¼Œç©å®¶å¯ç»™ä»–ä»¬æ”¹åã€‚</li><li>20çº§ä»¥ä¸Šçš„åƒµå°¸ï¼Œç©å®¶èƒ½ç»™ä»–ä»¬å®šåˆ¶çš„ DNAã€‚</li></ul><p>æ˜¯å®ç°è¿™äº›åŠŸèƒ½çš„æ—¶å€™äº†ã€‚ä»¥ä¸‹æ˜¯ä¸Šä¸€è¯¾çš„ç¤ºä¾‹ä»£ç ï¼Œä¾›å‚è€ƒï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// å­˜å‚¨ç”¨æˆ·å¹´é¾„çš„æ˜ å°„</span><br><span class="line">mapping (uint =&gt; uint) public age;</span><br><span class="line"></span><br><span class="line">// é™å®šç”¨æˆ·å¹´é¾„çš„ä¿®é¥°ç¬¦</span><br><span class="line">modifier olderThan(uint _age, uint _userId) &#123;</span><br><span class="line">  require (age[_userId] &gt;= _age);</span><br><span class="line">  _;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å¿…é¡»å¹´æ»¡16å‘¨å²æ‰å…è®¸å¼€è½¦ (è‡³å°‘åœ¨ç¾å›½æ˜¯è¿™æ ·çš„).</span><br><span class="line">// æˆ‘ä»¬å¯ä»¥ç”¨å¦‚ä¸‹å‚æ•°è°ƒç”¨`olderThan` ä¿®é¥°ç¬¦:</span><br><span class="line">function driveCar(uint _userId) public olderThan(16, _userId) &#123;</span><br><span class="line">  // å…¶ä½™çš„ç¨‹åºé€»è¾‘</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆçº¦æ¼”ä¹ "><a href="#åˆçº¦æ¼”ä¹ " class="headerlink" title="åˆçº¦æ¼”ä¹ "></a>åˆçº¦æ¼”ä¹ </h2><ol><li>åˆ›å»ºä¸€ä¸ªåä¸º <code>changeName</code> çš„å‡½æ•°ã€‚å®ƒæ¥æ”¶2ä¸ªå‚æ•°ï¼š<code>_zombieId</code>ï¼ˆ<code>uint</code>ç±»å‹ï¼‰ä»¥åŠ <code>_newName</code>ï¼ˆ<code>string</code>ç±»å‹ï¼‰ï¼Œå¯è§æ€§ä¸º <code>external</code>ã€‚å®ƒå¸¦æœ‰ä¸€ä¸ª <code>aboveLevel</code> ä¿®é¥°ç¬¦ï¼Œè°ƒç”¨çš„æ—¶å€™é€šè¿‡ <code>_level</code> å‚æ•°ä¼ å…¥<code>2</code>ï¼Œ å½“ç„¶ï¼Œåˆ«å¿˜äº†åŒæ—¶ä¼  <code>_zombieId</code> å‚æ•°ã€‚</li><li>åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œé¦–å…ˆæˆ‘ä»¬ç”¨ <code>require</code> è¯­å¥ï¼ŒéªŒè¯ <code>msg.sender</code> æ˜¯å¦å°±æ˜¯ <code>zombieToOwner [_zombieId]</code>ã€‚</li><li>ç„¶åå‡½æ•°å°† <code>zombies[_zombieId] .name</code> è®¾ç½®ä¸º <code>_newName</code>ã€‚</li><li>åœ¨ <code>changeName</code> ä¸‹åˆ›å»ºå¦ä¸€ä¸ªåä¸º <code>changeDna</code> çš„å‡½æ•°ã€‚å®ƒçš„å®šä¹‰å’Œå†…å®¹å‡ ä¹å’Œ <code>changeName</code> ç›¸åŒï¼Œä¸è¿‡å®ƒç¬¬äºŒä¸ªå‚æ•°æ˜¯ <code>_newDna</code>ï¼ˆ<code>uint</code>ç±»å‹ï¼‰ï¼Œåœ¨ä¿®é¥°ç¬¦ <code>aboveLevel</code> çš„ <code>_level</code> å‚æ•°ä¸­ä¼ é€’ <code>20</code> ã€‚ç°åœ¨ï¼Œä»–å¯ä»¥æŠŠåƒµå°¸çš„ <code>dna</code> è®¾ç½®ä¸º <code>_newDna</code> äº†ã€‚</li></ol><h2 id="åˆçº¦ä¿®æ”¹-8"><a href="#åˆçº¦ä¿®æ”¹-8" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><p>zombiehelper.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefeeding.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieHelper is ZombieFeeding &#123;</span><br><span class="line"></span><br><span class="line">  modifier aboveLevel(uint _level, uint _zombieId) &#123;</span><br><span class="line">    <span class="built_in">require</span>(zombies[_zombieId].level &gt;= _level);</span><br><span class="line">    _;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åœ¨è¿™é‡Œå¼€å§‹</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">changeName</span>(<span class="params">uint _zombieId, string _newName</span>) <span class="title">external</span> <span class="title">aboveLevel</span>(<span class="params"><span class="number">2</span>, _zombieId</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    zombies[_zombieId].name = _newName;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">changeDna</span>(<span class="params">uint _zombieId, uint _newDna</span>) <span class="title">external</span> <span class="title">aboveLevel</span>(<span class="params"><span class="number">20</span>, _zombieId</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    zombies[_zombieId].dna = _newDna;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åã€åˆ©ç”¨-â€˜Viewâ€™-å‡½æ•°èŠ‚çœ-Gas"><a href="#åã€åˆ©ç”¨-â€˜Viewâ€™-å‡½æ•°èŠ‚çœ-Gas" class="headerlink" title="åã€åˆ©ç”¨ â€˜Viewâ€™ å‡½æ•°èŠ‚çœ Gas"></a>åã€åˆ©ç”¨ â€˜Viewâ€™ å‡½æ•°èŠ‚çœ Gas</h1><p>é…·ç‚«ï¼ç°åœ¨é«˜çº§åˆ«åƒµå°¸å¯ä»¥æ‹¥æœ‰ç‰¹æ®ŠæŠ€èƒ½äº†ï¼Œè¿™ä¸€å®šä¼šé¼“åŠ¨æˆ‘ä»¬çš„ç©å®¶å»æ‰“æ€ªå‡çº§çš„ã€‚ä½ å–œæ¬¢çš„è¯ï¼Œå›å¤´æˆ‘ä»¬è¿˜èƒ½æ·»åŠ æ›´å¤šçš„ç‰¹æ®ŠæŠ€èƒ½ã€‚</p><p>ç°åœ¨éœ€è¦æ·»åŠ çš„ä¸€ä¸ªåŠŸèƒ½æ˜¯ï¼šæˆ‘ä»¬çš„ DApp éœ€è¦ä¸€ä¸ªæ–¹æ³•æ¥æŸ¥çœ‹æŸç©å®¶çš„æ•´ä¸ªåƒµå°¸å†›å›¢ - æˆ‘ä»¬ç§°ä¹‹ä¸º <code>getZombiesByOwner</code>ã€‚</p><p>å®ç°è¿™ä¸ªåŠŸèƒ½åªéœ€ä»åŒºå—é“¾ä¸­è¯»å–æ•°æ®ï¼Œæ‰€ä»¥å®ƒå¯ä»¥æ˜¯ä¸€ä¸ª <code>view</code> å‡½æ•°ã€‚è¿™è®©æˆ‘ä»¬ä¸å¾—ä¸å›é¡¾ä¸€ä¸‹â€œgasä¼˜åŒ–â€è¿™ä¸ªé‡è¦è¯é¢˜ã€‚</p><h2 id="â€œviewâ€-å‡½æ•°ä¸èŠ±-â€œgasâ€"><a href="#â€œviewâ€-å‡½æ•°ä¸èŠ±-â€œgasâ€" class="headerlink" title="â€œviewâ€ å‡½æ•°ä¸èŠ± â€œgasâ€"></a>â€œviewâ€ å‡½æ•°ä¸èŠ± â€œgasâ€</h2><p>å½“ç©å®¶ä»å¤–éƒ¨è°ƒç”¨ä¸€ä¸ª<code>view</code>å‡½æ•°ï¼Œæ˜¯ä¸éœ€è¦æ”¯ä»˜ä¸€åˆ† gas çš„ã€‚</p><p>è¿™æ˜¯å› ä¸º <code>view</code> å‡½æ•°ä¸ä¼šçœŸæ­£æ”¹å˜åŒºå—é“¾ä¸Šçš„ä»»ä½•æ•°æ® - å®ƒä»¬åªæ˜¯è¯»å–ã€‚å› æ­¤ç”¨ <code>view</code> æ ‡è®°ä¸€ä¸ªå‡½æ•°ï¼Œæ„å‘³ç€å‘Šè¯‰ <code>web3.js</code>ï¼Œè¿è¡Œè¿™ä¸ªå‡½æ•°åªéœ€è¦æŸ¥è¯¢ä½ çš„æœ¬åœ°ä»¥å¤ªåŠèŠ‚ç‚¹ï¼Œè€Œä¸éœ€è¦åœ¨åŒºå—é“¾ä¸Šåˆ›å»ºä¸€ä¸ªäº‹åŠ¡ï¼ˆäº‹åŠ¡éœ€è¦è¿è¡Œåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šï¼Œå› æ­¤èŠ±è´¹ gasï¼‰ã€‚</p><p>ç¨åæˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•åœ¨è‡ªå·±çš„èŠ‚ç‚¹ä¸Šè®¾ç½® web3.jsã€‚ä½†ç°åœ¨ï¼Œä½ å…³é”®æ˜¯è¦è®°ä½ï¼Œåœ¨æ‰€èƒ½åªè¯»çš„å‡½æ•°ä¸Šæ ‡è®°ä¸Šè¡¨ç¤ºâ€œåªè¯»â€çš„â€œ<code>external view</code> å£°æ˜ï¼Œå°±èƒ½ä¸ºä½ çš„ç©å®¶å‡å°‘åœ¨ DApp ä¸­ gas ç”¨é‡ã€‚</p><blockquote><p>æ³¨æ„ï¼šå¦‚æœä¸€ä¸ª <code>view</code> å‡½æ•°åœ¨å¦ä¸€ä¸ªå‡½æ•°çš„å†…éƒ¨è¢«è°ƒç”¨ï¼Œè€Œè°ƒç”¨å‡½æ•°ä¸ <code>view</code> å‡½æ•°çš„ä¸å±äºåŒä¸€ä¸ªåˆçº¦ï¼Œä¹Ÿä¼šäº§ç”Ÿè°ƒç”¨æˆæœ¬ã€‚è¿™æ˜¯å› ä¸ºå¦‚æœä¸»è°ƒå‡½æ•°åœ¨ä»¥å¤ªåŠåˆ›å»ºäº†ä¸€ä¸ªäº‹åŠ¡ï¼Œå®ƒä»ç„¶éœ€è¦é€ä¸ªèŠ‚ç‚¹å»éªŒè¯ã€‚æ‰€ä»¥æ ‡è®°ä¸º <code>view</code> çš„å‡½æ•°åªæœ‰åœ¨å¤–éƒ¨è°ƒç”¨æ—¶æ‰æ˜¯å…è´¹çš„ã€‚</p></blockquote><h2 id="å®æˆ˜æ¼”ä¹ -8"><a href="#å®æˆ˜æ¼”ä¹ -8" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æˆ‘ä»¬æ¥å†™ä¸€ä¸ªâ€è¿”å›æŸç©å®¶çš„æ•´ä¸ªåƒµå°¸å†›å›¢â€œçš„å‡½æ•°ã€‚å½“æˆ‘ä»¬ä» <code>web3.js</code> ä¸­è°ƒç”¨å®ƒï¼Œå³å¯æ˜¾ç¤ºæŸä¸€ç©å®¶çš„ä¸ªäººèµ„æ–™é¡µã€‚</p><p>è¿™ä¸ªå‡½æ•°çš„é€»è¾‘æœ‰ç‚¹å¤æ‚ï¼Œæˆ‘ä»¬éœ€è¦å¥½å‡ ä¸ªç« èŠ‚æ¥æè¿°å®ƒçš„å®ç°ã€‚</p><ol><li>åˆ›å»ºä¸€ä¸ªåä¸º <code>getZombiesByOwner</code> çš„æ–°å‡½æ•°ã€‚å®ƒæœ‰ä¸€ä¸ªåä¸º <code>_owner</code> çš„ <code>address</code> ç±»å‹çš„å‚æ•°ã€‚</li><li>å°†å…¶ç”³æ˜ä¸º <code>external view</code> å‡½æ•°ï¼Œè¿™æ ·å½“ç©å®¶ä» <code>web3.js</code> ä¸­è°ƒç”¨å®ƒæ—¶ï¼Œä¸éœ€è¦èŠ±è´¹ä»»ä½• gasã€‚</li><li>å‡½æ•°éœ€è¦è¿”å›ä¸€ä¸ª<code>uint []</code>ï¼ˆ<code>uint</code>æ•°ç»„ï¼‰ã€‚</li></ol><p>å…ˆè¿™ä¹ˆå£°æ˜ç€ï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹ä¸€ç« ä¸­å¡«å……å‡½æ•°ä½“ã€‚</p><h2 id="åˆçº¦ä¿®æ”¹-9"><a href="#åˆçº¦ä¿®æ”¹-9" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><p>zombiehelper.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefeeding.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieHelper is ZombieFeeding &#123;</span><br><span class="line"></span><br><span class="line">  modifier aboveLevel(uint _level, uint _zombieId) &#123;</span><br><span class="line">    <span class="built_in">require</span>(zombies[_zombieId].level &gt;= _level);</span><br><span class="line">    _;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">changeName</span>(<span class="params">uint _zombieId, string _newName</span>) <span class="title">external</span> <span class="title">aboveLevel</span>(<span class="params"><span class="number">2</span>, _zombieId</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    zombies[_zombieId].name = _newName;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">changeDna</span>(<span class="params">uint _zombieId, uint _newDna</span>) <span class="title">external</span> <span class="title">aboveLevel</span>(<span class="params"><span class="number">20</span>, _zombieId</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    zombies[_zombieId].dna = _newDna;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åœ¨è¿™é‡Œåˆ›å»ºä½ çš„å‡½æ•°</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getZombiesByOwner</span>(<span class="params">address _owner</span>) <span class="title">external</span> <span class="title">view</span> <span class="title">returns</span>(<span class="params">uint[]</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h1 id="åä¸€ã€å­˜å‚¨éå¸¸æ˜‚è´µ"><a href="#åä¸€ã€å­˜å‚¨éå¸¸æ˜‚è´µ" class="headerlink" title="åä¸€ã€å­˜å‚¨éå¸¸æ˜‚è´µ"></a>åä¸€ã€å­˜å‚¨éå¸¸æ˜‚è´µ</h1><p>Solidity ä½¿ç”¨<code>storage</code>(å­˜å‚¨)æ˜¯ç›¸å½“æ˜‚è´µçš„ï¼Œâ€å†™å…¥â€œæ“ä½œå°¤å…¶è´µã€‚</p><p>è¿™æ˜¯å› ä¸ºï¼Œæ— è®ºæ˜¯å†™å…¥è¿˜æ˜¯æ›´æ”¹ä¸€æ®µæ•°æ®ï¼Œ è¿™éƒ½å°†æ°¸ä¹…æ€§åœ°å†™å…¥åŒºå—é“¾ã€‚â€æ°¸ä¹…æ€§â€œå•Šï¼éœ€è¦åœ¨å…¨çƒæ•°åƒä¸ªèŠ‚ç‚¹çš„ç¡¬ç›˜ä¸Šå­˜å…¥è¿™äº›æ•°æ®ï¼Œéšç€åŒºå—é“¾çš„å¢é•¿ï¼Œæ‹·è´ä»½æ•°æ›´å¤šï¼Œå­˜å‚¨é‡ä¹Ÿå°±è¶Šå¤§ã€‚è¿™æ˜¯éœ€è¦æˆæœ¬çš„ï¼</p><p>ä¸ºäº†é™ä½æˆæœ¬ï¼Œä¸åˆ°ä¸‡ä¸å¾—å·²ï¼Œé¿å…å°†æ•°æ®å†™å…¥å­˜å‚¨ã€‚è¿™ä¹Ÿä¼šå¯¼è‡´æ•ˆç‡ä½ä¸‹çš„ç¼–ç¨‹é€»è¾‘ - æ¯”å¦‚æ¯æ¬¡è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œéƒ½éœ€è¦åœ¨ <code>memory</code>(å†…å­˜) ä¸­é‡å»ºä¸€ä¸ªæ•°ç»„ï¼Œè€Œä¸æ˜¯ç®€å•åœ°å°†ä¸Šæ¬¡è®¡ç®—çš„æ•°ç»„ç»™å­˜å‚¨ä¸‹æ¥ä»¥ä¾¿å¿«é€ŸæŸ¥æ‰¾ã€‚</p><p>åœ¨å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œéå†å¤§æ•°æ®é›†åˆéƒ½æ˜¯æ˜‚è´µçš„ã€‚ä½†æ˜¯åœ¨ Solidity ä¸­ï¼Œä½¿ç”¨ä¸€ä¸ªæ ‡è®°äº†<code>external view</code>çš„å‡½æ•°ï¼Œéå†æ¯” <code>storage</code> è¦ä¾¿å®œå¤ªå¤šï¼Œå› ä¸º <code>view</code> å‡½æ•°ä¸ä¼šäº§ç”Ÿä»»ä½•èŠ±é”€ã€‚ ï¼ˆgaså¯æ˜¯çœŸé‡‘ç™½é“¶å•Šï¼ï¼‰ã€‚</p><p>æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€ç« è®¨è®º<code>for</code>å¾ªç¯ï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹çœ‹å¦‚ä½•å¦‚ä½•åœ¨å†…å­˜ä¸­å£°æ˜æ•°ç»„ã€‚</p><h2 id="åœ¨å†…å­˜ä¸­å£°æ˜æ•°ç»„"><a href="#åœ¨å†…å­˜ä¸­å£°æ˜æ•°ç»„" class="headerlink" title="åœ¨å†…å­˜ä¸­å£°æ˜æ•°ç»„"></a>åœ¨å†…å­˜ä¸­å£°æ˜æ•°ç»„</h2><p>åœ¨æ•°ç»„åé¢åŠ ä¸Š <code>memory</code>å…³é”®å­—ï¼Œ è¡¨æ˜è¿™ä¸ªæ•°ç»„æ˜¯ä»…ä»…åœ¨å†…å­˜ä¸­åˆ›å»ºï¼Œä¸éœ€è¦å†™å…¥å¤–éƒ¨å­˜å‚¨ï¼Œå¹¶ä¸”åœ¨å‡½æ•°è°ƒç”¨ç»“æŸæ—¶å®ƒå°±è§£æ•£äº†ã€‚ä¸åœ¨ç¨‹åºç»“æŸæ—¶æŠŠæ•°æ®ä¿å­˜è¿› <code>storage</code> çš„åšæ³•ç›¸æ¯”ï¼Œå†…å­˜è¿ç®—å¯ä»¥å¤§å¤§èŠ‚çœgaså¼€é”€ â€“ æŠŠè¿™æ•°ç»„æ”¾åœ¨<code>view</code>é‡Œç”¨ï¼Œå®Œå…¨ä¸ç”¨èŠ±é’±ã€‚</p><p>ä»¥ä¸‹æ˜¯ç”³æ˜ä¸€ä¸ªå†…å­˜æ•°ç»„çš„ä¾‹å­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function getArray() external pure returns(uint[]) &#123;</span><br><span class="line">  // åˆå§‹åŒ–ä¸€ä¸ªé•¿åº¦ä¸º3çš„å†…å­˜æ•°ç»„</span><br><span class="line">  uint[] memory values = new uint[](3);</span><br><span class="line">  // èµ‹å€¼</span><br><span class="line">  values.push(1);</span><br><span class="line">  values.push(2);</span><br><span class="line">  values.push(3);</span><br><span class="line">  // è¿”å›æ•°ç»„</span><br><span class="line">  return values;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå°ä¾‹å­å±•ç¤ºäº†ä¸€äº›è¯­æ³•è§„åˆ™ï¼Œä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªå®é™…ç”¨ä¾‹ï¼Œå±•ç¤ºå®ƒå’Œ <code>for</code> å¾ªç¯ç»“åˆçš„åšæ³•ã€‚</p><blockquote><p>æ³¨æ„ï¼šå†…å­˜æ•°ç»„ <strong>å¿…é¡»</strong> ç”¨é•¿åº¦å‚æ•°ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º<code>3</code>ï¼‰åˆ›å»ºã€‚ç›®å‰ä¸æ”¯æŒ <code>array.push()</code>ä¹‹ç±»çš„æ–¹æ³•è°ƒæ•´æ•°ç»„å¤§å°ï¼Œåœ¨æœªæ¥çš„ç‰ˆæœ¬å¯èƒ½ä¼šæ”¯æŒé•¿åº¦ä¿®æ”¹ã€‚</p></blockquote><h2 id="å®æˆ˜æ¼”ä¹ -9"><a href="#å®æˆ˜æ¼”ä¹ -9" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æˆ‘ä»¬è¦è¦åˆ›å»ºä¸€ä¸ªåä¸º <code>getZombiesByOwner</code> çš„å‡½æ•°ï¼Œå®ƒä»¥<code>uint []</code>æ•°ç»„çš„å½¢å¼è¿”å›æŸä¸€ç”¨æˆ·æ‰€æ‹¥æœ‰çš„æ‰€æœ‰åƒµå°¸ã€‚</p><ol><li>å£°æ˜ä¸€ä¸ªåä¸º<code>result</code>çš„<code>uint [] memory&#39;</code> ï¼ˆå†…å­˜å˜é‡æ•°ç»„ï¼‰</li><li>å°†å…¶è®¾ç½®ä¸ºä¸€ä¸ªæ–°çš„ <code>uint</code> ç±»å‹æ•°ç»„ã€‚æ•°ç»„çš„é•¿åº¦ä¸ºè¯¥ <code>_owner</code> æ‰€æ‹¥æœ‰çš„åƒµå°¸æ•°é‡ï¼Œè¿™å¯é€šè¿‡è°ƒç”¨ <code>ownerZombieCount [_ owner]</code> æ¥è·å–ã€‚</li><li>å‡½æ•°ç»“æŸï¼Œè¿”å› <code>result</code> ã€‚ç›®å‰å®ƒåªæ˜¯ä¸ªç©ºæ•°åˆ—ï¼Œæˆ‘ä»¬åˆ°ä¸‹ä¸€ç« å»å®ç°å®ƒã€‚</li></ol><h2 id="åˆçº¦ä¿®æ”¹-10"><a href="#åˆçº¦ä¿®æ”¹-10" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><p>zombiehelper.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefeeding.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieHelper is ZombieFeeding &#123;</span><br><span class="line"></span><br><span class="line">  modifier aboveLevel(uint _level, uint _zombieId) &#123;</span><br><span class="line">    <span class="built_in">require</span>(zombies[_zombieId].level &gt;= _level);</span><br><span class="line">    _;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">changeName</span>(<span class="params">uint _zombieId, string _newName</span>) <span class="title">external</span> <span class="title">aboveLevel</span>(<span class="params"><span class="number">2</span>, _zombieId</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    zombies[_zombieId].name = _newName;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">changeDna</span>(<span class="params">uint _zombieId, uint _newDna</span>) <span class="title">external</span> <span class="title">aboveLevel</span>(<span class="params"><span class="number">20</span>, _zombieId</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    zombies[_zombieId].dna = _newDna;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getZombiesByOwner</span>(<span class="params">address _owner</span>) <span class="title">external</span> <span class="title">view</span> <span class="title">returns</span>(<span class="params">uint[]</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// åœ¨è¿™é‡Œå¼€å§‹</span></span><br><span class="line">    uint[] memory result = <span class="keyword">new</span> uint[](ownerZombieCount[_owner]);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åäºŒã€For-å¾ªç¯"><a href="#åäºŒã€For-å¾ªç¯" class="headerlink" title="åäºŒã€For å¾ªç¯"></a>åäºŒã€For å¾ªç¯</h1><p>åœ¨ä¹‹å‰çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬æåˆ°è¿‡ï¼Œå‡½æ•°ä¸­ä½¿ç”¨çš„æ•°ç»„æ˜¯è¿è¡Œæ—¶åœ¨å†…å­˜ä¸­é€šè¿‡ <code>for</code> å¾ªç¯å®æ—¶æ„å»ºï¼Œè€Œä¸æ˜¯é¢„å…ˆå»ºç«‹åœ¨å­˜å‚¨ä¸­çš„ã€‚</p><p>ä¸ºä»€ä¹ˆè¦è¿™æ ·åšå‘¢ï¼Ÿ</p><p>ä¸ºäº†å®ç° <code>getZombiesByOwner</code> å‡½æ•°ï¼Œä¸€ç§â€œæ— è„‘å¼â€çš„è§£å†³æ–¹æ¡ˆæ˜¯åœ¨ <code>ZombieFactory</code> ä¸­å­˜å…¥â€ä¸»äººâ€œå’Œâ€åƒµå°¸å†›å›¢â€œçš„æ˜ å°„ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mapping (address =&gt; uint[]) public ownerToZombies</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬æ¯æ¬¡åˆ›å»ºæ–°åƒµå°¸æ—¶ï¼Œæ‰§è¡Œ <code>ownerToZombies [owner] .pushï¼ˆzombieIdï¼‰</code> å°†å…¶æ·»åŠ åˆ°ä¸»äººçš„åƒµå°¸æ•°ç»„ä¸­ã€‚è€Œ <code>getZombiesByOwner</code> å‡½æ•°ä¹Ÿéå¸¸ç®€å•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function getZombiesByOwner(address _owner) external view returns (uint[]) &#123;</span><br><span class="line">  return ownerToZombies[_owner];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¿™ä¸ªåšæ³•æœ‰é—®é¢˜"><a href="#è¿™ä¸ªåšæ³•æœ‰é—®é¢˜" class="headerlink" title="è¿™ä¸ªåšæ³•æœ‰é—®é¢˜"></a>è¿™ä¸ªåšæ³•æœ‰é—®é¢˜</h3><p>åšæ³•å€’æ˜¯ç®€å•ã€‚å¯æ˜¯å¦‚æœæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå‡½æ•°æ¥æŠŠä¸€å¤´åƒµå°¸è½¬ç§»åˆ°å¦ä¸€ä¸ªä¸»äººåä¸‹ï¼ˆæˆ‘ä»¬ä¸€å®šä¼šåœ¨åé¢çš„è¯¾ç¨‹ä¸­å®ç°çš„ï¼‰ï¼Œåˆä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p><p>è¿™ä¸ªâ€œæ¢ä¸»â€å‡½æ•°è¦åšåˆ°ï¼š</p><p>1.å°†åƒµå°¸pushåˆ°æ–°ä¸»äººçš„ <code>ownerToZombies</code> æ•°ç»„ä¸­ï¼Œ 2.ä»æ—§ä¸»çš„ <code>ownerToZombies</code> æ•°ç»„ä¸­ç§»é™¤åƒµå°¸ï¼Œ 3.å°†æ—§ä¸»åƒµå°¸æ•°ç»„ä¸­â€œæ¢ä¸»åƒµå°¸â€ä¹‹åçš„çš„æ¯å¤´åƒµå°¸éƒ½å¾€å‰æŒªä¸€ä½ï¼ŒæŠŠæŒªèµ°â€œæ¢ä¸»åƒµå°¸â€åç•™ä¸‹çš„â€œç©ºæ§½â€å¡«ä¸Šï¼Œ 4.å°†æ•°ç»„é•¿åº¦å‡1ã€‚</p><p>ä½†æ˜¯ç¬¬ä¸‰æ­¥å®åœ¨æ˜¯å¤ªè´µäº†ï¼å› ä¸ºæ¯æŒªåŠ¨ä¸€å¤´åƒµå°¸ï¼Œæˆ‘ä»¬éƒ½è¦æ‰§è¡Œä¸€æ¬¡å†™æ“ä½œã€‚å¦‚æœä¸€ä¸ªä¸»äººæœ‰20å¤´åƒµå°¸ï¼Œè€Œç¬¬ä¸€å¤´è¢«æŒªèµ°äº†ï¼Œé‚£ä¸ºäº†ä¿æŒæ•°ç»„çš„é¡ºåºï¼Œæˆ‘ä»¬å¾—åš19ä¸ªå†™æ“ä½œã€‚</p><p>ç”±äºå†™å…¥å­˜å‚¨æ˜¯ Solidity ä¸­æœ€è´¹ gas çš„æ“ä½œä¹‹ä¸€ï¼Œä½¿å¾—æ¢ä¸»å‡½æ•°çš„æ¯æ¬¡è°ƒç”¨éƒ½éå¸¸æ˜‚è´µã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œæ¯æ¬¡è°ƒç”¨çš„æ—¶å€™èŠ±è´¹çš„ gas éƒ½ä¸åŒï¼å…·ä½“è¿˜å–å†³äºç”¨æˆ·åœ¨åŸä¸»å†›å›¢ä¸­çš„åƒµå°¸å¤´æ•°ï¼Œä»¥åŠç§»èµ°çš„åƒµå°¸æ‰€åœ¨çš„ä½ç½®ã€‚ä»¥è‡³äºç”¨æˆ·éƒ½ä¸çŸ¥é“åº”è¯¥æ”¯ä»˜å¤šå°‘ gasã€‚</p><blockquote><p>æ³¨æ„ï¼šå½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠæ•°ç»„ä¸­æœ€åä¸€ä¸ªåƒµå°¸å¾€å‰æŒªæ¥å¡«è¡¥ç©ºæ§½ï¼Œå¹¶å°†æ•°ç»„é•¿åº¦å‡å°‘ä¸€ã€‚ä½†è¿™æ ·æ¯åšä¸€ç¬”äº¤æ˜“ï¼Œéƒ½ä¼šæ”¹å˜åƒµå°¸å†›å›¢çš„ç§©åºã€‚</p></blockquote><p>ç”±äºä»å¤–éƒ¨è°ƒç”¨ä¸€ä¸ª <code>view</code> å‡½æ•°æ˜¯å…è´¹çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ <code>getZombiesByOwner</code> å‡½æ•°ä¸­ç”¨ä¸€ä¸ªforå¾ªç¯éå†æ•´ä¸ªåƒµå°¸æ•°ç»„ï¼ŒæŠŠå±äºæŸä¸ªä¸»äººçš„åƒµå°¸æŒ‘å‡ºæ¥æ„å»ºå‡ºåƒµå°¸æ•°ç»„ã€‚é‚£ä¹ˆæˆ‘ä»¬çš„ <code>transfer</code> å‡½æ•°å°†ä¼šä¾¿å®œå¾—å¤šï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦æŒªåŠ¨å­˜å‚¨é‡Œçš„åƒµå°¸æ•°ç»„é‡æ–°æ’åºï¼Œæ€»ä½“ä¸Šè¿™ä¸ªæ–¹æ³•ä¼šæ›´ä¾¿å®œï¼Œè™½ç„¶æœ‰ç‚¹åç›´è§‰ã€‚</p><h2 id="ä½¿ç”¨-for-å¾ªç¯"><a href="#ä½¿ç”¨-for-å¾ªç¯" class="headerlink" title="ä½¿ç”¨ for å¾ªç¯"></a>ä½¿ç”¨ <code>for</code> å¾ªç¯</h2><p><code>for</code>å¾ªç¯çš„è¯­æ³•åœ¨ Solidity å’Œ JavaScript ä¸­ç±»ä¼¼ã€‚</p><p>æ¥çœ‹ä¸€ä¸ªåˆ›å»ºå¶æ•°æ•°ç»„çš„ä¾‹å­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function getEvens() pure external returns(uint[]) &#123;</span><br><span class="line">  uint[] memory evens = new uint[](5);</span><br><span class="line">  // åœ¨æ–°æ•°ç»„ä¸­è®°å½•åºåˆ—å·</span><br><span class="line">  uint counter = 0;</span><br><span class="line">  // åœ¨å¾ªç¯ä»1è¿­ä»£åˆ°10ï¼š</span><br><span class="line">  for (uint i = 1; i &lt;= 10; i++) &#123;</span><br><span class="line">    // å¦‚æœ `i` æ˜¯å¶æ•°...</span><br><span class="line">    if (i % 2 == 0) &#123;</span><br><span class="line">      // æŠŠå®ƒåŠ å…¥å¶æ•°æ•°ç»„</span><br><span class="line">      evens[counter] = i;</span><br><span class="line">      //ç´¢å¼•åŠ ä¸€ï¼Œ æŒ‡å‘ä¸‹ä¸€ä¸ªç©ºçš„â€˜evenâ€™</span><br><span class="line">      counter++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return evens;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‡½æ•°å°†è¿”å›ä¸€ä¸ªå½¢ä¸º <code>[2,4,6,8,10]</code> çš„æ•°ç»„ã€‚</p><h2 id="å®æˆ˜æ¼”ä¹ -10"><a href="#å®æˆ˜æ¼”ä¹ -10" class="headerlink" title="å®æˆ˜æ¼”ä¹ "></a>å®æˆ˜æ¼”ä¹ </h2><p>æˆ‘ä»¬å›åˆ° <code>getZombiesByOwner</code> å‡½æ•°ï¼Œ é€šè¿‡ä¸€æ¡ <code>for</code> å¾ªç¯æ¥éå† DApp ä¸­æ‰€æœ‰çš„åƒµå°¸ï¼Œ å°†ç»™å®šçš„â€˜ç”¨æˆ·idâ€™ä¸æ¯å¤´åƒµå°¸çš„â€˜ä¸»äººâ€™è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶åœ¨å‡½æ•°è¿”å›ä¹‹å‰å°†å®ƒä»¬æ¨é€åˆ°æˆ‘ä»¬çš„<code>result</code> æ•°ç»„ä¸­ã€‚</p><p>1.å£°æ˜ä¸€ä¸ªå˜é‡ <code>counter</code>ï¼Œå±æ€§ä¸º <code>uint</code>ï¼Œè®¾å…¶å€¼ä¸º <code>0</code> ã€‚æˆ‘ä»¬ç”¨è¿™ä¸ªå˜é‡ä½œä¸º <code>result</code> æ•°ç»„çš„ç´¢å¼•ã€‚</p><p>2.å£°æ˜ä¸€ä¸ª <code>for</code> å¾ªç¯ï¼Œ ä» <code>uint i = 0</code> åˆ° <code>i &lt;zombies.length</code>ã€‚å®ƒå°†éå†æ•°ç»„ä¸­çš„æ¯ä¸€å¤´åƒµå°¸ã€‚</p><p>3.åœ¨æ¯ä¸€è½® <code>for</code> å¾ªç¯ä¸­ï¼Œç”¨ä¸€ä¸ª <code>if</code> è¯­å¥æ¥æ£€æŸ¥ <code>zombieToOwner [i]</code> æ˜¯å¦ç­‰äº <code>_owner</code>ã€‚è¿™ä¼šæ¯”è¾ƒä¸¤ä¸ªåœ°å€æ˜¯å¦åŒ¹é…ã€‚</p><p>4.åœ¨ <code>if</code> è¯­å¥ä¸­ï¼š</p><ol><li>é€šè¿‡å°† <code>result [counter]</code> è®¾ç½®ä¸º <code>i</code>ï¼Œå°†åƒµå°¸IDæ·»åŠ åˆ° <code>result</code> æ•°ç»„ä¸­ã€‚</li><li>å°†counteråŠ 1ï¼ˆå‚è§ä¸Šé¢çš„forå¾ªç¯ç¤ºä¾‹ï¼‰ã€‚</li></ol><p>å°±æ˜¯è¿™æ · - è¿™ä¸ªå‡½æ•°èƒ½è¿”å› <code>_owner</code> æ‰€æ‹¥æœ‰çš„åƒµå°¸æ•°ç»„ï¼Œä¸èŠ±ä¸€åˆ†é’± gasã€‚</p><h2 id="åˆçº¦ä¿®æ”¹-11"><a href="#åˆçº¦ä¿®æ”¹-11" class="headerlink" title="åˆçº¦ä¿®æ”¹"></a>åˆçº¦ä¿®æ”¹</h2><p>zombiehelper.sol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./zombiefeeding.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract ZombieHelper is ZombieFeeding &#123;</span><br><span class="line"></span><br><span class="line">  modifier aboveLevel(uint _level, uint _zombieId) &#123;</span><br><span class="line">    <span class="built_in">require</span>(zombies[_zombieId].level &gt;= _level);</span><br><span class="line">    _;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">changeName</span>(<span class="params">uint _zombieId, string _newName</span>) <span class="title">external</span> <span class="title">aboveLevel</span>(<span class="params"><span class="number">2</span>, _zombieId</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    zombies[_zombieId].name = _newName;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">changeDna</span>(<span class="params">uint _zombieId, uint _newDna</span>) <span class="title">external</span> <span class="title">aboveLevel</span>(<span class="params"><span class="number">20</span>, _zombieId</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>(msg.sender == zombieToOwner[_zombieId]);</span><br><span class="line">    zombies[_zombieId].dna = _newDna;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getZombiesByOwner</span>(<span class="params">address _owner</span>) <span class="title">external</span> <span class="title">view</span> <span class="title">returns</span>(<span class="params">uint[]</span>) </span>&#123;</span><br><span class="line">    uint[] memory result = <span class="keyword">new</span> uint[](ownerZombieCount[_owner]);</span><br><span class="line">    <span class="comment">// åœ¨è¿™é‡Œå¼€å§‹</span></span><br><span class="line">    uint counter = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(uint i = <span class="number">0</span>; i &lt; zombies.length; i++)&#123;</span><br><span class="line">      <span class="keyword">if</span>(zombieToOwner[i] == _owner)&#123;</span><br><span class="line">        result[counter] = i;</span><br><span class="line">        counter++;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åä¸‰ã€æ”¾åœ¨ä¸€èµ·"><a href="#åä¸‰ã€æ”¾åœ¨ä¸€èµ·" class="headerlink" title="åä¸‰ã€æ”¾åœ¨ä¸€èµ·"></a>åä¸‰ã€æ”¾åœ¨ä¸€èµ·</h1><p><img src="https://i.loli.net/2020/06/27/sLj1ZB97XJ3RxTK.png" alt="image-20200627004954082"></p><h1 id="åå››ã€ç¬¬ä¸‰è¯¾æ‰“å¡"><a href="#åå››ã€ç¬¬ä¸‰è¯¾æ‰“å¡" class="headerlink" title="åå››ã€ç¬¬ä¸‰è¯¾æ‰“å¡"></a>åå››ã€ç¬¬ä¸‰è¯¾æ‰“å¡</h1><p><img src="https://i.loli.net/2020/06/27/xCM5qpkjuXtagod.png" alt="image-20200627005139917"></p><p><a href="https://share.cryptozombies.io/zh/lesson/3/share/truffle_solidity_web3.js_javaScript" target="_blank" rel="noopener">æˆ‘çš„åƒµå°¸å¤§å†›3</a></p>]]></content>
      
      
      <categories>
          
          <category> loom network </category>
          
      </categories>
      
      
        <tags>
            
            <tag> solidity </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç‰›å®¢åˆ·é¢˜ä¹‹å…”å­ç¹æ®–</title>
      <link href="/2020/06/25/%E7%89%9B%E5%AE%A2%E5%88%B7%E9%A2%98%E4%B9%8B%E5%85%94%E5%AD%90%E7%B9%81%E6%AE%96/"/>
      <url>/2020/06/25/%E7%89%9B%E5%AE%A2%E5%88%B7%E9%A2%98%E4%B9%8B%E5%85%94%E5%AD%90%E7%B9%81%E6%AE%96/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€å…”å­ç¹æ®–"><a href="#ä¸€ã€å…”å­ç¹æ®–" class="headerlink" title="ä¸€ã€å…”å­ç¹æ®–"></a>ä¸€ã€å…”å­ç¹æ®–</h1><p><a href="https://www.nowcoder.com/questionTerminal/1221ec77125d4370833fd3ad5ba72395" target="_blank" rel="noopener">é¢˜ç›®é“¾æ¥</a></p><p>æœ‰ä¸€åªå…”å­ï¼Œä»å‡ºç”Ÿåç¬¬3ä¸ªæœˆèµ·æ¯ä¸ªæœˆéƒ½ç”Ÿä¸€åªå…”å­ï¼Œå°å…”å­é•¿åˆ°ç¬¬ä¸‰ä¸ªæœˆåæ¯ä¸ªæœˆåˆç”Ÿä¸€åªå…”å­ï¼Œå‡å¦‚å…”å­éƒ½ä¸æ­»ï¼Œé—®æ¯ä¸ªæœˆçš„å…”å­æ€»æ•°ä¸ºå¤šå°‘ï¼Ÿ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç»Ÿè®¡å‡ºå…”å­æ€»æ•°ã€‚</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> monthCount ç¬¬å‡ ä¸ªæœˆ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å…”å­æ€»æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getTotalCount</span><span class="params">(<span class="keyword">int</span> monthCount)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><a id="more"></a><h1 id="äºŒã€è¾“å…¥æè¿°"><a href="#äºŒã€è¾“å…¥æè¿°" class="headerlink" title="äºŒã€è¾“å…¥æè¿°"></a>äºŒã€è¾“å…¥æè¿°</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥intå‹è¡¨ç¤ºmonth</span><br></pre></td></tr></table></figure><h1 id="ä¸‰ã€è¾“å‡ºæè¿°"><a href="#ä¸‰ã€è¾“å‡ºæè¿°" class="headerlink" title="ä¸‰ã€è¾“å‡ºæè¿°"></a>ä¸‰ã€è¾“å‡ºæè¿°</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¾“å‡ºå…”å­æ€»æ•°intå‹</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ï¼š</strong></p><p>è¾“å…¥ï¼š12</p><p>è¾“å‡ºï¼š144</p><h1 id="å››ã€ä»£ç å®ç°"><a href="#å››ã€ä»£ç å®ç°" class="headerlink" title="å››ã€ä»£ç å®ç°"></a>å››ã€ä»£ç å®ç°</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lcx.niuke;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Rabbit</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getTotalCount</span><span class="params">(<span class="keyword">int</span> monthCount)</span> </span>&#123;</span><br><span class="line">        Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> f1=<span class="number">1</span>,f2=<span class="number">1</span>;</span><br><span class="line">            map.put(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">            map.put(<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">3</span>; i &lt;= monthCount; i++) &#123;</span><br><span class="line">            map.put(i,map.get(i-<span class="number">1</span>)+map.get(i-<span class="number">2</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> map.get(monthCount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">while</span> (scanner.hasNextInt()) &#123;</span><br><span class="line">            <span class="keyword">int</span> mountCount = scanner.nextInt();</span><br><span class="line">            System.out.println(getTotalCount(mountCount));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="äº”ã€æ€è·¯"><a href="#äº”ã€æ€è·¯" class="headerlink" title="äº”ã€æ€è·¯"></a>äº”ã€æ€è·¯</h1><p>ç»è¿‡åˆ—è¡¨åˆ†æï¼Œå¾—åˆ°è§„å¾‹ï¼Œæ˜¯æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œé‡‡ç”¨mapé›†åˆå°†æœˆä»½ä¸å…”å­æ€»æ•°ä¸€ä¸€å¯¹åº”ã€‚</p><p>é‡‡ç”¨æ¶ˆè€—ç©ºé—´çš„åŠæ³•ï¼Œæ¥å‡å°‘ç¨‹åºè¿è¡Œæ—¶é—´ã€‚</p><p><a href="https://github.com/yym08090809/my-java-demo/blob/master/src/main/java/com/lcx/niuke/Rabbit.java" target="_blank" rel="noopener">ä»£ç å·²ä¸Šä¼ è‡³github</a></p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç‰›å®¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç‰›å®¢åˆ·é¢˜ä¹‹æ´—ç‰Œ</title>
      <link href="/2020/06/21/%E7%89%9B%E5%AE%A2%E5%88%B7%E9%A2%98%E4%B9%8B%E6%B4%97%E7%89%8C/"/>
      <url>/2020/06/21/%E7%89%9B%E5%AE%A2%E5%88%B7%E9%A2%98%E4%B9%8B%E6%B4%97%E7%89%8C/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€æ´—ç‰Œ"><a href="#ä¸€ã€æ´—ç‰Œ" class="headerlink" title="ä¸€ã€æ´—ç‰Œ"></a>ä¸€ã€æ´—ç‰Œ</h1><p><a href="https://www.nowcoder.com/questionTerminal/5a0a2c7e431e4fbbbb1ff32ac6e8dfa0" target="_blank" rel="noopener">é¢˜ç›®é“¾æ¥</a></p><p>æ´—ç‰Œåœ¨ç”Ÿæ´»ä¸­ååˆ†å¸¸è§ï¼Œç°åœ¨éœ€è¦å†™ä¸€ä¸ªç¨‹åºæ¨¡æ‹Ÿæ´—ç‰Œçš„è¿‡ç¨‹ã€‚ ç°åœ¨éœ€è¦æ´—2nå¼ ç‰Œï¼Œä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ˜¯ç¬¬1å¼ ï¼Œç¬¬2å¼ ï¼Œç¬¬3å¼ ä¸€ç›´åˆ°ç¬¬2nå¼ ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æŠŠè¿™2nå¼ ç‰Œåˆ†æˆä¸¤å †ï¼Œå·¦æ‰‹æ‹¿ç€ç¬¬1å¼ åˆ°ç¬¬nå¼ ï¼ˆä¸ŠåŠå †ï¼‰ï¼Œå³æ‰‹æ‹¿ç€ç¬¬n+1å¼ åˆ°ç¬¬2nå¼ ï¼ˆä¸‹åŠå †ï¼‰ã€‚æ¥ç€å°±å¼€å§‹æ´—ç‰Œçš„è¿‡ç¨‹ï¼Œå…ˆæ”¾ä¸‹å³æ‰‹çš„æœ€åä¸€å¼ ç‰Œï¼Œå†æ”¾ä¸‹å·¦æ‰‹çš„æœ€åä¸€å¼ ç‰Œï¼Œæ¥ç€æ”¾ä¸‹å³æ‰‹çš„å€’æ•°ç¬¬äºŒå¼ ç‰Œï¼Œå†æ”¾ä¸‹å·¦æ‰‹çš„å€’æ•°ç¬¬äºŒå¼ ç‰Œï¼Œç›´åˆ°æœ€åæ”¾ä¸‹å·¦æ‰‹çš„ç¬¬ä¸€å¼ ç‰Œã€‚æ¥ç€æŠŠç‰Œåˆå¹¶èµ·æ¥å°±å¯ä»¥äº†ã€‚ ä¾‹å¦‚æœ‰6å¼ ç‰Œï¼Œæœ€å¼€å§‹ç‰Œçš„åºåˆ—æ˜¯1,2,3,4,5,6ã€‚é¦–å…ˆåˆ†æˆä¸¤ç»„ï¼Œå·¦æ‰‹æ‹¿ç€1,2,3ï¼›å³æ‰‹æ‹¿ç€4,5,6ã€‚åœ¨æ´—ç‰Œè¿‡ç¨‹ä¸­æŒ‰é¡ºåºæ”¾ä¸‹äº†6,3,5,2,4,1ã€‚æŠŠè¿™å…­å¼ ç‰Œå†æ¬¡åˆæˆä¸€ç»„ç‰Œä¹‹åï¼Œæˆ‘ä»¬æŒ‰ç…§ä»ä¸Šå¾€ä¸‹çš„é¡ºåºçœ‹è¿™ç»„ç‰Œï¼Œå°±å˜æˆäº†åºåˆ—1,4,2,5,3,6ã€‚ ç°åœ¨ç»™å‡ºä¸€ä¸ªåŸå§‹ç‰Œç»„ï¼Œè¯·è¾“å‡ºè¿™å‰¯ç‰Œæ´—ç‰Œkæ¬¡ä¹‹åä»ä¸Šå¾€ä¸‹çš„åºåˆ—ã€‚</p><a id="more"></a><h1 id="äºŒã€è¾“å…¥æè¿°"><a href="#äºŒã€è¾“å…¥æè¿°" class="headerlink" title="äºŒã€è¾“å…¥æè¿°"></a>äºŒã€è¾“å…¥æè¿°</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç¬¬ä¸€è¡Œä¸€ä¸ªæ•°T(T â‰¤ 100)ï¼Œè¡¨ç¤ºæ•°æ®ç»„æ•°ã€‚å¯¹äºæ¯ç»„æ•°æ®ï¼Œç¬¬ä¸€è¡Œä¸¤ä¸ªæ•°n,k(1 â‰¤ n,k â‰¤ 100)ï¼Œæ¥ä¸‹æ¥ä¸€è¡Œæœ‰2nä¸ªæ•°a1,a2,...,a2n(1 â‰¤ ai â‰¤ 1000000000)ã€‚è¡¨ç¤ºåŸå§‹ç‰Œç»„ä»ä¸Šåˆ°ä¸‹çš„åºåˆ—ã€‚</span><br></pre></td></tr></table></figure><h1 id="ä¸‰ã€è¾“å‡ºæè¿°"><a href="#ä¸‰ã€è¾“å‡ºæè¿°" class="headerlink" title="ä¸‰ã€è¾“å‡ºæè¿°"></a>ä¸‰ã€è¾“å‡ºæè¿°</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¯¹äºæ¯ç»„æ•°æ®ï¼Œè¾“å‡ºä¸€è¡Œï¼Œæœ€ç»ˆçš„åºåˆ—ã€‚æ•°å­—ä¹‹é—´ç”¨ç©ºæ ¼éš”å¼€ï¼Œä¸è¦åœ¨è¡Œæœ«è¾“å‡ºå¤šä½™çš„ç©ºæ ¼ã€‚</span><br></pre></td></tr></table></figure><h1 id="å››ã€ä»£ç å®ç°"><a href="#å››ã€ä»£ç å®ç°" class="headerlink" title="å››ã€ä»£ç å®ç°"></a>å››ã€ä»£ç å®ç°</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lcx.niuke;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ´—ç‰Œ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Shuffle</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//input</span></span><br><span class="line">        Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">while</span> (sc.hasNextInt())&#123;</span><br><span class="line">            <span class="keyword">int</span> T = sc.nextInt();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; T; i++) &#123;</span><br><span class="line">                <span class="keyword">int</span> n = sc.nextInt();</span><br><span class="line">                <span class="keyword">int</span> k = sc.nextInt();</span><br><span class="line">                ArrayList&lt;Integer&gt; card = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">2</span> * n; j++) &#123;</span><br><span class="line">                    card.add(sc.nextInt());</span><br><span class="line">                &#125;</span><br><span class="line">                ShuffleCord(card, k, n);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ShuffleCord</span><span class="params">(ArrayList&lt;Integer&gt; card, <span class="keyword">int</span> k, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;Integer&gt; LeftCard = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        ArrayList&lt;Integer&gt; RightCard = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">while</span> (k &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">//åˆå§‹åŒ–å·¦è¾¹æ‰‹ç‰Œ</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">                LeftCard.add(card.get(i));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å³è¾¹</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = n; i &lt; <span class="number">2</span> * n; i++) &#123;</span><br><span class="line">                RightCard.add(card.get(i));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//æ´—ç‰Œ   æ´—ç‰Œå‰å°†cordæ¸…ç©º å¦åˆ™æ´—ç‰Œåçš„é¡ºåºå°†åœ¨index=7çš„ä½ç½®æ·»åŠ </span></span><br><span class="line">            card.clear();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">                card.add(LeftCard.get(i));</span><br><span class="line">                card.add(RightCard.get(i));</span><br><span class="line">            &#125;</span><br><span class="line">            k--;</span><br><span class="line">            <span class="comment">//åŒç† å®Œæˆä¸€æ³¢æ´—ç‰Œå å°†å·¦å³æ‰‹ç‰Œæ¸…ç©º</span></span><br><span class="line">            LeftCard.clear();</span><br><span class="line">            RightCard.clear();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> r:card) &#123;</span><br><span class="line">            System.out.print(r+<span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç‰›å®¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ›æ‰£æ¯æ—¥ä¸€é¢˜ä¹‹åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨</title>
      <link href="/2020/06/21/%E5%8A%9B%E6%89%A3%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%E4%B9%8B%E5%90%88%E5%B9%B6%E4%B8%A4%E4%B8%AA%E6%9C%89%E5%BA%8F%E9%93%BE%E8%A1%A8/"/>
      <url>/2020/06/21/%E5%8A%9B%E6%89%A3%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%E4%B9%8B%E5%90%88%E5%B9%B6%E4%B8%A4%E4%B8%AA%E6%9C%89%E5%BA%8F%E9%93%BE%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="1ã€é¢˜ç›®æè¿°"><a href="#1ã€é¢˜ç›®æè¿°" class="headerlink" title="1ã€é¢˜ç›®æè¿°"></a>1ã€é¢˜ç›®æè¿°</h1><p>å°†ä¸¤ä¸ªå‡åºé“¾è¡¨åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„ <strong>å‡åº</strong> é“¾è¡¨å¹¶è¿”å›ã€‚æ–°é“¾è¡¨æ˜¯é€šè¿‡æ‹¼æ¥ç»™å®šçš„ä¸¤ä¸ªé“¾è¡¨çš„æ‰€æœ‰èŠ‚ç‚¹ç»„æˆçš„ã€‚ </p><h1 id="2ã€ç¤ºä¾‹"><a href="#2ã€ç¤ºä¾‹" class="headerlink" title="2ã€ç¤ºä¾‹"></a>2ã€ç¤ºä¾‹</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼š1-&gt;2-&gt;4, 1-&gt;3-&gt;4</span><br><span class="line">è¾“å‡ºï¼š1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4</span><br></pre></td></tr></table></figure><h1 id="3ã€æ€è·¯"><a href="#3ã€æ€è·¯" class="headerlink" title="3ã€æ€è·¯"></a>3ã€æ€è·¯</h1><p>åœ¨å¾ªç¯ä¸­æ¯”è¾ƒä¸¤ä¸ªå‡åºé“¾è¡¨çš„èŠ‚ç‚¹å…ƒç´ å¤§å°ï¼Œå°†å€¼è¾ƒå°çš„èŠ‚ç‚¹ï¼ˆå¿…å®šæ˜¯è¡¨å¤´ï¼‰ç§»é™¤ï¼Œæ·»åŠ è‡³newçš„èŠ‚ç‚¹åé¢ã€‚å½“å…¶ä¸­ä¸€æ¡é“¾è¡¨ä¸ºnullæ—¶ï¼Œå°†å¦ä¸€æ¡é“¾è¡¨æ¥åœ¨é‡æ’åºçš„é“¾è¡¨åé¢ï¼Œæ’åºå®Œæˆï¼Œä½†æ˜¯å¤šå‡ºä¸€ä¸ªæ–°åˆ›å»ºçš„å¤´èŠ‚ç‚¹ï¼Œæ•…è¾“å‡ºlistNode4.nextã€‚</p><a id="more"></a><h1 id="4ã€ä»£ç åŠæµ‹è¯•"><a href="#4ã€ä»£ç åŠæµ‹è¯•" class="headerlink" title="4ã€ä»£ç åŠæµ‹è¯•"></a>4ã€ä»£ç åŠæµ‹è¯•</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lcx.leetCode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.xml.soap.Node;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo21</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ListNode4 <span class="title">mergeTwoLists</span><span class="params">(ListNode4 l1, ListNode4 l2)</span> </span>&#123;</span><br><span class="line">        ListNode4 listNode4 = <span class="keyword">new</span> ListNode4(-<span class="number">1</span>);</span><br><span class="line">        ListNode4 re = listNode4;</span><br><span class="line">        <span class="keyword">while</span> (l1 != <span class="keyword">null</span> &amp;&amp; l2 != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (l1.val &lt;= l2.val) &#123;</span><br><span class="line">                re.next = l1;</span><br><span class="line">                l1 = l1.next;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                re.next = l2;</span><br><span class="line">                l2 = l2.next;</span><br><span class="line">            &#125;</span><br><span class="line">            re = re.next;</span><br><span class="line">        &#125;</span><br><span class="line">        re.next = l1 == <span class="keyword">null</span> ? l2 : l1;</span><br><span class="line">        <span class="keyword">return</span> listNode4.next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ListNode4 node = <span class="keyword">new</span> ListNode4(<span class="number">1</span>);</span><br><span class="line">        ListNode4  node1= <span class="keyword">new</span> ListNode4(<span class="number">2</span>);</span><br><span class="line">        ListNode4 node2 = <span class="keyword">new</span> ListNode4(<span class="number">4</span>);</span><br><span class="line">        node.next = node1;</span><br><span class="line">        node1.next = node2;</span><br><span class="line"></span><br><span class="line">        ListNode4 nod = <span class="keyword">new</span> ListNode4(<span class="number">1</span>);</span><br><span class="line">        ListNode4  nod1= <span class="keyword">new</span> ListNode4(<span class="number">3</span>);</span><br><span class="line">        ListNode4 nod2 = <span class="keyword">new</span> ListNode4(<span class="number">4</span>);</span><br><span class="line">        nod.next = nod1;</span><br><span class="line">        nod1.next = nod2;</span><br><span class="line"></span><br><span class="line">        ListNode4 node4 = mergeTwoLists(node, nod);</span><br><span class="line">        <span class="keyword">while</span> (node4.next != <span class="keyword">null</span>)&#123;</span><br><span class="line">            System.out.println(node4.val);</span><br><span class="line">            node4 = node4.next;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(node4.val);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æµ‹è¯•ç»“æœï¼š</strong></p><p><img src="https://i.loli.net/2020/06/21/lLq1CgPZNBHpJD2.png" alt="image-20200621160908070"></p><p><a href="https://github.com/yym08090809/my-java-demo/blob/master/src/main/java/com/lcx/leetCode/Demo21.java" target="_blank" rel="noopener">ä»£ç å·²ä¸Šä¼ è‡³github</a></p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ›æ‰£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>solidityå­¦ä¹ ç¬”è®°</title>
      <link href="/2020/06/21/solidity%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2020/06/21/solidity%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€Solidity-è¯­è¨€"><a href="#ä¸€ã€Solidity-è¯­è¨€" class="headerlink" title="ä¸€ã€Solidity è¯­è¨€"></a>ä¸€ã€Solidity è¯­è¨€</h2><p><a href="https://solidity.readthedocs.io/en/develop/" target="_blank" rel="noopener">Solidity</a> æ˜¯ä¸€ç§æ™ºèƒ½åˆçº¦é«˜çº§è¯­è¨€ï¼Œè¿è¡Œåœ¨ Ethereum è™šæ‹Ÿæœºï¼ˆEVMï¼šEthereum Virtual Machineï¼‰ä¹‹ä¸Šã€‚<br> Solidity çš„è¯­æ³•æ¥è¿‘äº Javascriptï¼Œæ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œè€Œä¸”å›´ç»•ç€ Solidity çš„å„ç§å¼€å‘å·¥å…·é“¾ï¼Œéƒ½æ˜¯ä½¿ç”¨å±äº Javascript ç”Ÿæ€ç³»çš„ <a href="https://www.npmjs.com/get-npm" target="_blank" rel="noopener">npm</a> æ¥æä¾›çš„ã€‚</p><a id="more"></a><blockquote><p>Solidityè¯­è¨€ï¼š<a href="http://www.tryblockchain.org" target="_blank" rel="noopener">http://www.tryblockchain.org</a><br> Solidity documentationï¼š<a href="https://solidity.readthedocs.org" target="_blank" rel="noopener">https://solidity.readthedocs.org</a><br> GitHubï¼š<a href="https://github.com/ethereum/solidity" target="_blank" rel="noopener">https://github.com/ethereum/solidity</a></p></blockquote><h2 id="äºŒã€ç¼–è¾‘å™¨"><a href="#äºŒã€ç¼–è¾‘å™¨" class="headerlink" title="äºŒã€ç¼–è¾‘å™¨"></a>äºŒã€ç¼–è¾‘å™¨</h2><p>æˆ‘ç›®å‰æ˜¯ä½¿ç”¨ <a href="https://atom.io" target="_blank" rel="noopener">Atom</a> æ­é… solidityï¼ˆlinter-soliumå’Œautocomplete-solidityï¼‰ æ’ä»¶æ¥å¼€å‘ã€‚</p><h2 id="ä¸‰ã€Truffle-æ¡†æ¶"><a href="#ä¸‰ã€Truffle-æ¡†æ¶" class="headerlink" title="ä¸‰ã€Truffle æ¡†æ¶"></a>ä¸‰ã€Truffle æ¡†æ¶</h2><p><a href="http://truffleframework.com" target="_blank" rel="noopener">Truffle</a> æ˜¯é’ˆå¯¹åŸºäºä»¥å¤ªåŠçš„ Solidity è¯­è¨€çš„ä¸€å¥—å¼€å‘æ¡†æ¶ï¼Œæœ¬èº«åŸºäº Javascriptã€‚</p><h2 id="å››ã€å·¥å…·å®‰è£…"><a href="#å››ã€å·¥å…·å®‰è£…" class="headerlink" title="å››ã€å·¥å…·å®‰è£…"></a>å››ã€å·¥å…·å®‰è£…</h2><p>è§å¦ä¸€ç¯‡åšå®¢<a href="https://lisongbai.top/2020/02/23/windows10%E6%90%AD%E5%BB%BAtruffle%E5%8F%8A%E5%87%BA%E7%8E%B0%E9%97%AE%E9%A2%98%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/">win10æ­å»ºä»¥å¤ªåŠå¼€å‘ç¯å¢ƒåŠtruffleæ¡†æ¶</a></p><h2 id="äº”ã€å¯åŠ¨-Ganacheå®¢æˆ·ç«¯"><a href="#äº”ã€å¯åŠ¨-Ganacheå®¢æˆ·ç«¯" class="headerlink" title="äº”ã€å¯åŠ¨ Ganacheå®¢æˆ·ç«¯"></a>äº”ã€å¯åŠ¨ Ganacheå®¢æˆ·ç«¯</h2><p><img src="https://i.loli.net/2020/06/21/5AYqy1VvoKt2DG6.png" alt="image-20200621100049242"></p><p>å¯ä»¥çœ‹åˆ°å¯åŠ¨åè‡ªåŠ¨å»ºç«‹äº†10ä¸ªå¸å·ï¼ˆAccountsï¼‰ï¼Œä¸æ¯ä¸ªå¸å·å¯¹åº”çš„ç§é’¥ï¼ˆPrivate Keyï¼‰ã€‚æ¯ä¸ªå¸å·ä¸­éƒ½æœ‰100ä¸ªæµ‹è¯•ç”¨çš„ä»¥å¤ªå¸ï¼ˆEtherï¼‰ã€‚</p><h2 id="å…­ã€åˆ›å»ºåˆå§‹åŒ–é¡¹ç›®"><a href="#å…­ã€åˆ›å»ºåˆå§‹åŒ–é¡¹ç›®" class="headerlink" title="å…­ã€åˆ›å»ºåˆå§‹åŒ–é¡¹ç›®"></a>å…­ã€åˆ›å»ºåˆå§‹åŒ–é¡¹ç›®</h2><p>åœ¨ç©ºç›®å½•ä¸‹æ‰“å¼€cmdè¾“å…¥ truffle init æ„å»ºåˆå§‹åŒ–é¡¹ç›®ã€‚</p><p>ç›®å½•ç»“æ„ï¼š</p><ul><li><code>contracts/</code>ï¼šTruffleé»˜è®¤çš„åˆçº¦æ–‡ä»¶å­˜æ”¾åœ°å€ï¼›</li><li><code>migrations/</code>ï¼šå­˜æ”¾å‘å¸ƒçš„è„šæœ¬æ–‡ä»¶ï¼›</li><li><code>test/</code>ï¼šå­˜æ”¾æµ‹è¯•åº”ç”¨å’Œåˆçº¦çš„æµ‹è¯•æ–‡ä»¶ï¼›</li><li><code>truffle.js å’Œ truffle-config.js</code>ï¼šTruffleçš„é…ç½®æ–‡ä»¶ã€‚</li></ul><h2 id="ä¸ƒã€æ–°å»º-HelloWorld-åˆçº¦"><a href="#ä¸ƒã€æ–°å»º-HelloWorld-åˆçº¦" class="headerlink" title="ä¸ƒã€æ–°å»º HelloWorld åˆçº¦"></a>ä¸ƒã€æ–°å»º HelloWorld åˆçº¦</h2><p>åœ¨ <code>contracts</code> æ–‡ä»¶å¤¹ä¸‹æ–°å»º Demo.sol æ–‡ä»¶ï¼Œåˆçº¦å†…å®¹å¦‚ä¸‹ï¼š</p><p><img src="https://i.loli.net/2020/06/21/faMwgiQSCtKsP8e.png" alt="image-20200621100413979"></p><p>è®²è§£ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">pragma</span> <span class="selector-tag">solidity</span> 0<span class="selector-class">.5</span><span class="selector-class">.16</span>;</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€è¡ŒæŒ‡åç›®å‰ä½¿ç”¨çš„ solidity ç‰ˆæœ¬ï¼Œä¸åŒç‰ˆæœ¬çš„ solidity å¯èƒ½ä¼šç¼–è¯‘å‡ºä¸åŒçš„ bytecodeã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">contract Demo&#123;</span><br><span class="line">  //æ„é€ æ–¹æ³•</span><br><span class="line">  constructor() public &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  //sayHello  å†™æ­»</span><br><span class="line">  function sayHello() public pure returns (string memory)&#123;</span><br><span class="line">    return (&quot;hello world!&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  //echo æ¥å—ä¸€ä¸ªå‚æ•° ç„¶åè¿”å›</span><br><span class="line">  function echo(string memory _name) public pure returns (string memory)&#123;</span><br><span class="line">    return _name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>contract</code> å…³é”®å­—ç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­è¾ƒå¸¸è§çš„ <code>class</code>ã€‚å› ä¸ºsolidity æ˜¯ä¸“ä¸ºæ™ºèƒ½åˆçº¦ï¼ˆContactï¼‰è®¾è®¡çš„è¯­è¨€ï¼Œå£°æ˜ <code>contract</code> åå³å†…ç½®äº†å¼€å‘æ™ºèƒ½åˆçº¦æ‰€éœ€çš„åŠŸèƒ½ã€‚ä¹Ÿå¯ä»¥æŠŠè¿™å¥ç†è§£ä¸º <code>class Demo extends Contract</code>ã€‚</p><p>å‡½æ•°çš„ç»“æ„ä¸å…¶ä»–ç¨‹åºç±»ä¼¼ï¼Œä½†å¦‚æœæœ‰ä¼ å…¥çš„å‚æ•°æˆ–å›ä¼ å€¼ï¼Œéœ€è¦æŒ‡å®šå‚æ•°æˆ–å›ä¼ å€¼çš„ç±»å‹ï¼ˆ<code>type</code>ï¼‰ã€‚</p><h2 id="å…«ã€ç¼–è¯‘åˆçº¦"><a href="#å…«ã€ç¼–è¯‘åˆçº¦" class="headerlink" title="å…«ã€ç¼–è¯‘åˆçº¦"></a>å…«ã€ç¼–è¯‘åˆçº¦</h2><p>ç°åœ¨æ‰§è¡Œ <code>truffle compile</code> å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥å°† <code>HelloWorld.sol</code> åŸå§‹ç ç¼–è¯‘æˆ <code>Ethereum bytecode</code>ï¼š</p><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd ..`</span><br><span class="line"> `$ truffle compile</span><br></pre></td></tr></table></figure></blockquote><p>å‘½ä»¤è¿è¡ŒæˆåŠŸåä¼šå¤šå‡ºä¸€ä¸ª <code>build</code> çš„ç›®å½•ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="https://i.loli.net/2020/06/21/PLz7U8byR25ajeQ.png" alt="image-20200621101128429"></p><p>build ç›®å½•</p><p>åœ¨ <code>HelloWorld</code> æ–‡ä»¶å¤¹ä¸‹é¢çš„ <code>build/contracts</code> æ–‡ä»¶å¤¹ä¸‹é¢ä¼šçœ‹è§ <code>HelloWorld.json</code> æ–‡ä»¶ï¼š</p><p><img src="https://i.loli.net/2020/06/21/6wnRoSe9gETpisV.png" alt="image-20200621101435329"></p><p>Demo.json</p><h2 id="åã€ä¿®æ”¹-truffle-js-æ–‡ä»¶å†…å®¹ï¼š"><a href="#åã€ä¿®æ”¹-truffle-js-æ–‡ä»¶å†…å®¹ï¼š" class="headerlink" title="åã€ä¿®æ”¹ truffle.js æ–‡ä»¶å†…å®¹ï¼š"></a>åã€ä¿®æ”¹ truffle.js æ–‡ä»¶å†…å®¹ï¼š</h2><p>æ·»åŠ ä»¥ä¸‹å†…å®¹åˆ° truffle.js æ–‡ä»¶å¹¶ä¿å­˜ :</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">networks</span>: &#123;</span><br><span class="line">        <span class="attribute">development</span>: &#123;</span><br><span class="line">            host:<span class="string">"localhost"</span>,</span><br><span class="line">            port:<span class="number">7545</span>,</span><br><span class="line">            network_id:<span class="string">"*"</span>  // åŒ¹é…ä»»ä½•network id</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ truffle.js æ–‡ä»¶</p><h2 id="åä¸€ã€éƒ¨ç½²åˆçº¦"><a href="#åä¸€ã€éƒ¨ç½²åˆçº¦" class="headerlink" title="åä¸€ã€éƒ¨ç½²åˆçº¦"></a>åä¸€ã€éƒ¨ç½²åˆçº¦</h2><p>åœ¨ <code>migrations</code> ç›®å½•ä¸‹åˆ›å»ºç§»æ¤æ–‡ä»¶ï¼š</p><p><img src="https://i.loli.net/2020/06/21/r9jhM3WgIS6UQpw.png" alt="image-20200621101633945"></p><p>åˆ›å»ºç§»æ¤æ–‡ä»¶</p><p>ä¿®æ”¹æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Demo = artifacts.require(<span class="string">"Demo"</span>);</span><br><span class="line"><span class="comment">//ä½¿ç”¨ artifacts.require è¯­å¥æ¥å–å¾—å‡†å¤‡éƒ¨ç½²çš„åˆçº¦</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">deployer</span>)</span>&#123;</span><br><span class="line">  deployer.deploy(Demo);</span><br><span class="line">  <span class="comment">//ä½¿ç”¨deployer.deploy è¯­å¥å°†åˆçº¦éƒ¨ç½²åˆ°åŒºå—é“¾ä¸Šã€‚</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ç§»æ¤æ–‡ä»¶å†…å®¹</p><p>ä½¿ç”¨ <code>artifacts.require</code> è¯­å¥æ¥å–å¾—å‡†å¤‡éƒ¨ç½²çš„åˆçº¦ã€‚<br> ä½¿ç”¨<code>deployer.deploy</code> è¯­å¥å°†åˆçº¦éƒ¨ç½²åˆ°åŒºå—é“¾ä¸Šã€‚<br> è¿™è¾¹<code>Demo</code> æ˜¯ <code>contract</code> çš„åç§°è€Œä¸æ˜¯æ–‡ä»¶åã€‚<br> å› æ­¤å¯ä»¥ç”¨æ­¤è¯­æ³•è¯»å…¥ä»»ä¸€ <code>.sol</code> æ–‡ä»¶ä¸­çš„ä»»ä¸€åˆçº¦ã€‚</p><p>ç°åœ¨æ‰§è¡Œ <code>truffle migrate</code> å‘½ä»¤ï¼š</p><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ truffle migrate</span><br></pre></td></tr></table></figure></blockquote><p>éƒ¨ç½²åˆçº¦</p><p>éƒ¨ç½²æˆåŠŸä½ ä¼šçœ‹åˆ° Ganacheä¸­ç”Ÿæˆäº†æ–°çš„åŒºå—ï¼Œè¡¨ç¤ºå·²ç»å°†åˆçº¦éƒ¨ç½²åˆ°åŒºå—é“¾ä¸Šäº†ã€‚</p><p><img src="https://i.loli.net/2020/06/21/roODI2PEgwJkXp4.png" alt="image-20200621101919044"></p><h2 id="åäºŒã€ä¸åˆçº¦äº’åŠ¨"><a href="#åäºŒã€ä¸åˆçº¦äº’åŠ¨" class="headerlink" title="åäºŒã€ä¸åˆçº¦äº’åŠ¨"></a>åäºŒã€ä¸åˆçº¦äº’åŠ¨</h2><p>Truffle æä¾›å‘½ä»¤è¡Œå·¥å…·ï¼Œæ‰§è¡Œ <code>truffle console</code> å‘½ä»¤åï¼Œå¯ç”¨Javascript æ¥å’Œåˆšåˆšéƒ¨ç½²çš„åˆçº¦äº’åŠ¨ï¼š</p><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cd ..`</span><br><span class="line"> `$ truffle console`</span><br><span class="line"> `$ Demo.deployed().then(instance =&gt; c = instance)</span><br></pre></td></tr></table></figure></blockquote><p>ä¸åˆçº¦äº’åŠ¨</p><p><img src="https://i.loli.net/2020/06/21/DZ1wM32A8rOTIGN.png" alt="image-20200621102333408"></p><p>è®²è§£ï¼š</p><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Demo.deployed().then(instance =&gt; c = instance)</span><br></pre></td></tr></table></figure></blockquote><p><code>truffle console</code> ä¸­é¢„è½½äº† <code>truffle-contract</code> å‡½æ•°åº“ï¼Œä»¥æ–¹ä¾¿æ“ä½œéƒ¨ç½²åˆ°åŒºå—é“¾ä¸Šçš„åˆçº¦ã€‚<br> è¿™è¾¹ä½¿ç”¨ <code>Demo.deployed().then</code> è¯­å¥æ¥å–å¾— <code>Demo</code>åˆçº¦çš„ <code>Instance</code>ï¼ˆå®ä¾‹ï¼‰ï¼Œå¹¶å­˜åˆ° <code>contract</code> å˜é‡ä¸­ï¼Œä»¥æ–¹ä¾¿åç»­çš„è°ƒç”¨ã€‚</p><p>è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">c.echo(&quot;hello solidity&quot;)</span><br><span class="line">c.sayHello()</span><br></pre></td></tr></table></figure></blockquote><p><img src="https://i.loli.net/2020/06/21/aJOfp2vjVIUlDS5.png" alt="image-20200621102546448"></p><p>è¿™é‡Œç›´æ¥å‘¼å« <code>contract.sayHello.call()</code> ä¹Ÿä¼šå¾—åˆ°ä¸€æ ·çš„ç»“æœã€‚<code>truffle-contract</code> æä¾›ä½¿ç”¨ <code>call()</code> æ¥è¯»å–åªè¯» <code>ï¼ˆread onlyï¼‰</code> çš„æ•°æ®ï¼Œè¿™æ ·å°±ä¸éœ€æä¾› <code>gas</code>ã€‚å› æ­¤å¦‚æœé‡åˆ°çš„æ“ä½œéœ€è¦å‘åŒºå—é“¾å†™å…¥æ•°æ®ï¼Œæˆ‘ä»¬å°±ä¸èƒ½ç”¨ <code>call</code> è¯­å¥äº†ã€‚</p><p>å¦‚æ­¤ä¸€æ¥ï¼Œæˆ‘ä»¬å·²å†™å¥½å¹¶éƒ¨ç½²å®Œæˆäº†ç¬¬ä¸€ä¸ªæ™ºèƒ½åˆçº¦ï¼Œä¹ŸéªŒè¯äº†åˆçº¦ç¡®å®å¯ä»¥è¿ä½œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> solidity </category>
          
      </categories>
      
      
        <tags>
            
            <tag> solidity </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ›æ‰£æ¯æ—¥ä¸€é¢˜ä¹‹æœ‰æ•ˆçš„æ‹¬å·</title>
      <link href="/2020/06/18/%E5%8A%9B%E6%89%A3%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%E4%B9%8B%E6%9C%89%E6%95%88%E6%8B%AC%E5%8F%B7/"/>
      <url>/2020/06/18/%E5%8A%9B%E6%89%A3%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%E4%B9%8B%E6%9C%89%E6%95%88%E6%8B%AC%E5%8F%B7/</url>
      
        <content type="html"><![CDATA[<h1 id="1ã€é¢˜ç›®æè¿°"><a href="#1ã€é¢˜ç›®æè¿°" class="headerlink" title="1ã€é¢˜ç›®æè¿°"></a>1ã€é¢˜ç›®æè¿°</h1><p>ç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ â€˜(â€˜ï¼Œâ€™)â€™ï¼Œâ€™{â€˜ï¼Œâ€™}â€™ï¼Œâ€™[â€˜ï¼Œâ€™]â€™ çš„å­—ç¬¦ä¸²ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚</p><p>æœ‰æ•ˆå­—ç¬¦ä¸²éœ€æ»¡è¶³ï¼š</p><p>å·¦æ‹¬å·å¿…é¡»ç”¨ç›¸åŒç±»å‹çš„å³æ‹¬å·é—­åˆã€‚<br>å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆã€‚<br>æ³¨æ„ç©ºå­—ç¬¦ä¸²å¯è¢«è®¤ä¸ºæ˜¯æœ‰æ•ˆå­—ç¬¦ä¸²ã€‚</p><h1 id="2ã€ç¤ºä¾‹"><a href="#2ã€ç¤ºä¾‹" class="headerlink" title="2ã€ç¤ºä¾‹"></a>2ã€ç¤ºä¾‹</h1><p><strong>ç¤ºä¾‹ 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: &quot;()&quot;</span><br><span class="line">è¾“å‡º: true</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2:</strong></p><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: &quot;()[]&#123;&#125;&quot;</span><br><span class="line">è¾“å‡º: true</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 3:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: &quot;(]&quot;</span><br><span class="line">è¾“å‡º: false</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 4:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: &quot;([)]&quot;</span><br><span class="line">è¾“å‡º: false</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 5:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: &quot;&#123;[]&#125;&quot;</span><br><span class="line">è¾“å‡º: true</span><br></pre></td></tr></table></figure><h1 id="3-ç®—æ³•åˆ†æ"><a href="#3-ç®—æ³•åˆ†æ" class="headerlink" title="3.ç®—æ³•åˆ†æ"></a>3.ç®—æ³•åˆ†æ</h1><p>é‡‡ç”¨æ ˆçš„ç‰¹æ€§ï¼Œå¯¹æ‹¬å·è¿›è¡ŒåŒ¹é…ï¼Œå·¦æ‹¬å·å…¥æ ˆï¼Œå°†å³å°†æ’å…¥çš„å…ƒç´ ä¸æ ˆé¡¶å…ƒç´ è¿›è¡ŒåŒ¹é…ï¼Œå¦‚æœæœª</p><p>æ ˆé¡¶å…ƒç´ çš„å¦ä¸€åŠåˆ™ï¼Œå¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œæœ€åè‹¥æ ˆä¸ºç©ºåˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚</p><ol><li><p>åˆå§‹åŒ–æ ˆ Sã€‚</p></li><li><p>ä¸€æ¬¡å¤„ç†è¡¨è¾¾å¼çš„æ¯ä¸ªæ‹¬å·ã€‚</p></li><li><p>å¦‚æœé‡åˆ°å¼€æ‹¬å·ï¼Œæˆ‘ä»¬åªéœ€å°†å…¶æ¨åˆ°æ ˆä¸Šå³å¯ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å°†ç¨åå¤„ç†å®ƒï¼Œè®©æˆ‘ä»¬ç®€å•åœ°</p><p>è½¬åˆ°å‰é¢çš„ å­è¡¨è¾¾å¼ã€‚</p></li><li><p>å¦‚æœæˆ‘ä»¬é‡åˆ°ä¸€ä¸ªé—­æ‹¬å·ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ£€æŸ¥æ ˆé¡¶çš„å…ƒç´ ã€‚å¦‚æœæ ˆé¡¶çš„å…ƒç´ æ˜¯ä¸€ä¸ª ç›¸åŒç±»å‹çš„ å·¦</p><p>æ‹¬å·ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†å®ƒä»æ ˆä¸­å¼¹å‡ºå¹¶ç»§ç»­å¤„ç†ã€‚å¦åˆ™ï¼Œè¿™æ„å‘³ç€è¡¨è¾¾å¼æ— æ•ˆã€‚</p></li><li><p>å¦‚æœåˆ°æœ€åæˆ‘ä»¬å‰©ä¸‹çš„æ ˆä¸­ä»ç„¶æœ‰å…ƒç´ ï¼Œé‚£ä¹ˆè¿™æ„å‘³ç€è¡¨è¾¾å¼æ— æ•ˆã€‚</p></li></ol><h1 id="4ã€ä»£ç å®ç°åŠæµ‹è¯•ç»“æœ"><a href="#4ã€ä»£ç å®ç°åŠæµ‹è¯•ç»“æœ" class="headerlink" title="4ã€ä»£ç å®ç°åŠæµ‹è¯•ç»“æœ"></a>4ã€ä»£ç å®ç°åŠæµ‹è¯•ç»“æœ</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lcx.leetCode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo20</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> HashMap&lt;Character, Character&gt; map;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Demo20</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.map = <span class="keyword">new</span> HashMap&lt;Character, Character&gt;();</span><br><span class="line">        map.put(<span class="string">')'</span>, <span class="string">'('</span>);</span><br><span class="line">        map.put(<span class="string">'&#125;'</span>, <span class="string">'&#123;'</span>);</span><br><span class="line">        map.put(<span class="string">']'</span>, <span class="string">'['</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        Stack&lt;Character&gt; stack = <span class="keyword">new</span> Stack&lt;Character&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length(); i++) &#123;</span><br><span class="line">            <span class="keyword">char</span> c = s.charAt(i);</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.map.containsKey(c)) &#123;</span><br><span class="line">                <span class="comment">//è·å–æ ˆä¸­çš„æ ˆé¡¶å…ƒç´ ï¼Œè‹¥æ ˆé¡¶å…ƒç´ ä¸ºç©ºåˆ™è®¾ç½®ä¸ºâ€˜#â€™</span></span><br><span class="line">                <span class="keyword">char</span> topElement = stack.empty() ? <span class="string">'#'</span> : stack.pop();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (topElement != <span class="keyword">this</span>.map.get(c)) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                stack.push(c);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stack.isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String s = <span class="string">"()[]&#123;&#125;"</span>;</span><br><span class="line">        System.out.println(<span class="keyword">new</span> Demo20().isValid(s));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">è¿è¡Œç»“æœ</span><br><span class="line"><span class="string">"E:\Program Files\Java\jdk1.8.0_201\bin\java.exe"</span></span><br></pre></td></tr></table></figure><p>true<br>```</p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ›æ‰£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitä¸Šä¼ </title>
      <link href="/2020/06/18/git%E4%B8%8A%E4%BC%A0/"/>
      <url>/2020/06/18/git%E4%B8%8A%E4%BC%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€Gitæ‰‹åŠ¨ä¸Šä¼ æ–‡ä»¶"><a href="#ä¸€ã€Gitæ‰‹åŠ¨ä¸Šä¼ æ–‡ä»¶" class="headerlink" title="ä¸€ã€Gitæ‰‹åŠ¨ä¸Šä¼ æ–‡ä»¶"></a>ä¸€ã€Gitæ‰‹åŠ¨ä¸Šä¼ æ–‡ä»¶</h1><h2 id="1-åˆ›å»ºè¿œç¨‹ä»“åº“"><a href="#1-åˆ›å»ºè¿œç¨‹ä»“åº“" class="headerlink" title="1.åˆ›å»ºè¿œç¨‹ä»“åº“"></a>1.åˆ›å»ºè¿œç¨‹ä»“åº“</h2><p>åœ¨è‡ªå·±çš„Githubä¸Šåˆ›å»ºä¸€ä¸ªä»“åº“</p><p><img src="https://i.loli.net/2020/06/18/XAeHZzOkblIqTif.png" alt="image-20200618215633512"></p><p><img src="https://i.loli.net/2020/06/18/HirE1N9pxGq4MLd.png" alt="image-20200618215739080"></p><p>å¡«å†™ä»“åº“åã€ä»“åº“æè¿°ã€å‹¾é€‰<strong>Initialize this repostitory with a README</strong>é€‰é¡¹ï¼Œåœ¨åˆ›å»ºä»“åº“æ—¶ä¼šåˆå§‹åŒ–ä¸€ä¸ªREADME.mdæ–‡ä»¶ï¼Œç‚¹å‡»<strong>Create repository</strong>æŒ‰é’®è¿›è¡Œåˆ›å»ºã€‚</p><h2 id="2-åˆ›å»ºæœ¬åœ°ä»“åº“"><a href="#2-åˆ›å»ºæœ¬åœ°ä»“åº“" class="headerlink" title="2.åˆ›å»ºæœ¬åœ°ä»“åº“"></a>2.åˆ›å»ºæœ¬åœ°ä»“åº“</h2><a id="more"></a><p>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ä½œä¸ºæœ¬åœ°ä»“åº“ã€‚å³é”®<strong>git bash here</strong>ï¼Œåœ¨ç»ˆç«¯ä¸­è¾“å…¥git init å‘½ä»¤åˆå§‹åŒ–ä»“åº“ã€‚</p><p><img src="https://i.loli.net/2020/06/18/BNyTRdruF18z6H7.png" alt="image-20200618220624964"></p><h2 id="3-åŒæ­¥è¿œç¨‹ä»“åº“"><a href="#3-åŒæ­¥è¿œç¨‹ä»“åº“" class="headerlink" title="3.åŒæ­¥è¿œç¨‹ä»“åº“"></a>3.åŒæ­¥è¿œç¨‹ä»“åº“</h2><p>ç„¶åæ·»åŠ è¦ä¸Šä¼ çš„æ–‡ä»¶æˆ–ä»£ç è‡³æœ¬åœ°ä»“åº“ä¸­ï¼Œåœ¨ç»ˆç«¯è¾“å…¥git add . </p><p>ç”¨å®˜æ–¹çš„è¯å°±æ˜¯ï¼šè·Ÿè¸ªæ–°æ–‡ä»¶ï¼Œæˆ–è€…è¯´å°†å†…å®¹ä»å·¥ä½œç›®å½•æ·»åŠ åˆ°æš‚å­˜åŒºã€‚</p><p><img src="https://i.loli.net/2020/06/18/DhiKUbZFxtQWjgP.png" alt="image-20200618220902092"></p><p>æäº¤stagedçš„æ–‡ä»¶git commit -m â€œinitial commitâ€ã€‚</p><p><strong>git commit -mç”¨äºæäº¤æš‚å­˜åŒºçš„æ–‡ä»¶</strong></p><p>ä»GitHubä¸Šæ‹·è´ä¹‹å‰æ–°å»ºçš„ä»“åº“åœ°å€ï¼Œä½¿ç”¨git remote add origin + ä»“åº“åœ°å€ã€‚</p><p>å†ä½¿ç”¨Pushå‘½ä»¤ ï¼Œå°†æœ¬åœ°ä»“åº“åŒæ­¥è‡³è¿œç¨‹ä»“åº“ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure><p>å¦‚æœæç¤ºå†²çªå¯ä»¥å¼ºåˆ¶pushï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push -u origin master -f</span><br></pre></td></tr></table></figure><p>==åˆ‡è®°ï¼Œgitä¸èƒ½ä¸Šä¼ å¤§äº100MBçš„å•ä¸ªæ–‡ä»¶ï¼ï¼ï¼==</p>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œå·¥ç¨‹è¯¾ç¨‹è®¾è®¡</title>
      <link href="/2020/06/17/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1/"/>
      <url>/2020/06/17/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€è¯¾ç¨‹è®¾è®¡çš„ç›®çš„åŠä»»åŠ¡"><a href="#ä¸€ã€è¯¾ç¨‹è®¾è®¡çš„ç›®çš„åŠä»»åŠ¡" class="headerlink" title="ä¸€ã€è¯¾ç¨‹è®¾è®¡çš„ç›®çš„åŠä»»åŠ¡"></a>ä¸€ã€è¯¾ç¨‹è®¾è®¡çš„ç›®çš„åŠä»»åŠ¡</h1><p>ç½‘ç»œå·¥ç¨‹è¯¾ç¨‹è®¾è®¡æ˜¯ä¸€é—¨ç»¼åˆæ€§å®è·µè¯¾ç¨‹ï¼Œå…¶åŒ…æ‹¬ç½‘ç»œå·¥ç¨‹è®¾è®¡å’Œç½‘ç»œç®¡ç†ä¸ç»´æŠ¤çš„å®è·µå†…å®¹ï¼Œå…¶ç›®çš„æ˜¯ï¼šä½¿å­¦ç”Ÿåœ¨å­¦ä¹ ç½‘ç»œå·¥ç¨‹å’Œç½‘ç»œç®¡ç†çš„åŸºç¡€ä¸Šï¼Œå­¦ä¹ å¹¶æŒæ¡ä¼ä¸šç½‘åŠäº’è”ç½‘å·¥ç¨‹è®¾è®¡ã€å®æ–½ã€ç®¡ç†å’Œç»´æŠ¤çš„åŸºæœ¬çŸ¥è¯†å’Œæ–¹æ³•ï¼ŒåŸ¹å…»å­¦ç”Ÿç»¼åˆè¿ç”¨æ‰€å­¦çš„ä¸“ä¸šåŸºç¡€ç†è®ºã€åŸºæœ¬æŠ€èƒ½å’Œä¸“ä¸šçŸ¥è¯†åˆ†æé—®é¢˜å’Œè§£å†³å·¥ç¨‹è®¾è®¡é—®é¢˜çš„èƒ½åŠ›ï¼ŒåŸ¹å…»å­¦ç”Ÿè°ƒæŸ¥ç ”ç©¶ï¼ŒæŸ¥é˜…æŠ€æœ¯æ–‡çŒ®ã€èµ„æ–™ã€æ‰‹å†Œï¼Œè¿›è¡Œç¨‹åºè®¾è®¡åŠç¼–å†™æŠ€æœ¯æ–‡ä»¶çš„åŸºæœ¬èƒ½åŠ›ã€‚</p><a id="more"></a><h1 id="äºŒã€è¯¾ç¨‹è®¾è®¡çš„åŸºæœ¬è¦æ±‚"><a href="#äºŒã€è¯¾ç¨‹è®¾è®¡çš„åŸºæœ¬è¦æ±‚" class="headerlink" title="äºŒã€è¯¾ç¨‹è®¾è®¡çš„åŸºæœ¬è¦æ±‚"></a>äºŒã€è¯¾ç¨‹è®¾è®¡çš„åŸºæœ¬è¦æ±‚</h1><p>è¦æ±‚å­¦ç”Ÿåœ¨æ•™å¸ˆæŒ‡å¯¼ä¸‹å­¦ç”Ÿç‹¬ç«‹å®Œæˆè®¾è®¡ä»»åŠ¡ï¼Œé€šè¿‡è¯¾ç¨‹è®¾è®¡èƒ½å¤ŸæŒæ¡ç½‘ç»œå·¥ç¨‹å’Œç½‘ç»œç®¡ç†åŠç»´æŠ¤çš„åŸºæœ¬æ–¹æ³•ï¼›ç†Ÿæ‚‰äºŒå±‚äº¤æ¢æœºã€ä¸‰å±‚äº¤æ¢æœºã€è·¯ç”±å™¨ã€é˜²ç«å¢™çš„ä½¿ç”¨ï¼›ç†Ÿæ‚‰STPï¼ˆSpanning Tree Protocolï¼‰çš„é…ç½®ã€äº¤æ¢æœºç«¯å£èšåˆã€VLANè®¾ç½®ã€è·¨äº¤æ¢æœºVLANçš„å»ºç«‹ä¸ç®¡ç†ã€äºŒå±‚äº¤æ¢æœºç®¡ç†åœ°å€è®¾ç½®ã€ä¸‰å±‚äº¤æ¢æœºè™šæ¥å£è®¾ç½®ã€é…ç½®é™æ€è·¯ç”±ã€é…ç½®é»˜è®¤è·¯ç”±ã€ç‰¹å®šä¸»æœºè·¯ç”±ã€RIPè·¯ç”±åè®®é…ç½®ã€OSPFè·¯ç”±åè®®é…ç½®ï¼›å·©å›ºå’ŒåŠ æ·±å¯¹ç†è®ºè¯¾ä¸­çŸ¥è¯†çš„ç†è§£ï¼Œç»¼åˆè¿ç”¨æ‰€å­¦çŸ¥è¯†å®Œæˆä¸€ä¸ªå°å‹ä¼ä¸šç½‘ç³»ç»Ÿçš„è®¾è®¡ã€‚æ­¤å¤–ï¼Œåœ¨Windowsæˆ–Linuxå®‰è£…åŸºæœ¬ç½‘ç»œæœåŠ¡ï¼Œè¯¸å¦‚Webã€FTPã€E-mailã€DNSã€DHCPã€Telnetã€AAAæœåŠ¡ã€‚èƒ½å¤Ÿé€šè¿‡SNMPåè®®å¯¹å»ºç«‹çš„ç½‘ç»œè¿›è¡Œç®¡ç†ã€‚ç†Ÿæ‚‰ASN.1ç¼–ç è§„åˆ™ï¼›æŒæ¡åœ¨ç½‘ç®¡è®¾å¤‡ä¸Šé…ç½®SNMP Agentï¼›SNMPåè®®å·¥ä½œåŸç†éªŒè¯ä¸åˆ†æï¼›RMONåŸç†ä¸é…ç½®ï¼›é€šè¿‡ç½‘ç®¡è½¯ä»¶æŸ¥è¯¢ã€è®¾ç½®MIBå¯¹è±¡ï¼›é…ç½®Windows SNMPæœåŠ¡ï¼Œé€šè¿‡Windows SNMPæœåŠ¡æŸ¥è¯¢ã€è®¾ç½®Windowsä¸­MIBå¯¹è±¡ï¼Œç”¨ç½‘ç»œç®¡ç†è½¯ä»¶ç®¡ç†ç½‘ç»œã€‚</p><p><strong>å®éªŒéƒ¨åˆ†è¦æ±‚ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">VLANè®¾ç½®</span><br><span class="line">è·¨äº¤æ¢æœºVLANè®¾ç½®</span><br><span class="line">äº¤æ¢æœºç«¯å£èšåˆ</span><br><span class="line">STPï¼ˆSpanning Tree Protocolï¼‰çš„é…ç½®</span><br><span class="line">äº¤æ¢æœºç«¯å£èšåˆ</span><br><span class="line">ä¸‰å±‚äº¤æ¢æœºè™šæ¥å£è®¾ç½®</span><br><span class="line">é…ç½®é™æ€è·¯ç”±ã€é»˜è®¤è·¯ç”±ã€ç‰¹å®šä¸»æœºè·¯ç”±</span><br><span class="line">é…ç½®åŠ¨æ€RIP</span><br><span class="line">é…ç½®åŠ¨æ€OSPF</span><br><span class="line">é…ç½®DHCPä¸­ç»§ä»£ç†</span><br><span class="line">é…ç½®ACLã€NAT</span><br><span class="line">é…ç½®WiFiç½‘ç»œ</span><br><span class="line">é…ç½®é˜²ç«å¢™</span><br><span class="line">é…ç½®Webã€FTPã€E-mailã€DNSã€Telnetã€DHCPæœåŠ¡å™¨</span><br><span class="line">é…ç½®AAAæœåŠ¡å™¨</span><br><span class="line">é…ç½®SNMP Agent</span><br><span class="line">æŸ¥è¯¢ã€è®¾ç½®MIBå¯¹è±¡</span><br><span class="line">SNMPåè®®å·¥ä½œåŸç†éªŒè¯ä¸åˆ†æ</span><br><span class="line">RMONåŸç†ä¸é…ç½®</span><br><span class="line">é…ç½®Windows SNMPæœåŠ¡</span><br><span class="line">æŸ¥è¯¢ã€è®¾ç½®Windowsä¸­MIBå¯¹è±¡</span><br><span class="line">ç”¨ç½‘ç»œç®¡ç†è½¯ä»¶ç®¡ç†ç½‘ç»œ</span><br></pre></td></tr></table></figure><h1 id="ä¸‰ã€å®éªŒæ‹“æ‰‘è®¾è®¡"><a href="#ä¸‰ã€å®éªŒæ‹“æ‰‘è®¾è®¡" class="headerlink" title="ä¸‰ã€å®éªŒæ‹“æ‰‘è®¾è®¡"></a>ä¸‰ã€å®éªŒæ‹“æ‰‘è®¾è®¡</h1><h2 id="3-1è®¾è®¡æ€è·¯"><a href="#3-1è®¾è®¡æ€è·¯" class="headerlink" title="3.1è®¾è®¡æ€è·¯"></a>3.1è®¾è®¡æ€è·¯</h2><p>å¯¹äºå°å‹ä¼ä¸šç³»ç»Ÿè®¾è®¡ï¼Œä»¥é˜²ç«å¢™ä¸ºåˆ‡å…¥ç‚¹ï¼Œé˜²ç«å¢™å°†ç½‘ç»œåˆ’åˆ†ä¸ºä¸‰ä¸ªåŒºåŸŸï¼šUntrustã€DMZã€</p><p>Trustã€‚</p><p><strong>untrust(ä¸ä¿¡ä»»åŸŸ):</strong>ä½çº§å®‰å…¨åŒºåŸŸï¼Œå®‰å…¨ä¼˜å…ˆçº§ä¸º5é€šå¸¸ç”¨æ¥å®šä¹‰Internetç­‰ä¸å®‰å…¨çš„ç½‘</p><p>ç»œï¼Œç”¨äºç½‘ç»œå…¥å£çº¿çš„æ¥å…¥ã€‚</p><p><strong>dmz(éš”ç¦»åŒº):</strong>ä¸­çº§å®‰å…¨åŒºåŸŸï¼Œå®‰å…¨ä¼˜å…ˆçº§ä¸º50é€šå¸¸ç”¨æ¥å®šä¹‰å†…éƒ¨æœåŠ¡å™¨æ‰€åœ¨ç½‘ç»œä½œç”¨æ˜¯æŠŠWEB,E-</p><p>mail,ç­‰å…è®¸å¤–éƒ¨è®¿é—®çš„æœåŠ¡å™¨å•ç‹¬æ¥åœ¨è¯¥åŒºç«¯å£ï¼Œä½¿æ•´ä¸ªéœ€è¦ä¿æŠ¤çš„å†…éƒ¨ç½‘ç»œæ¥åœ¨ä¿¡ä»»åŒºç«¯å£</p><p>åï¼Œä¸å…è®¸ä»»ä½•è®¿é—®ï¼Œå®ç°å†…å¤–ç½‘åˆ†ç¦»ï¼Œè¾¾åˆ°ç”¨æˆ·éœ€æ±‚ã€‚DMZå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªä¸åŒäºå¤–ç½‘æˆ–å†…ç½‘</p><p>çš„ç‰¹æ®Šç½‘ç»œåŒºåŸŸï¼ŒDMZå†…é€šå¸¸æ”¾ç½®ä¸€äº›ä¸å«æœºå¯†ä¿¡æ¯çš„å…¬ç”¨æœåŠ¡å™¨ï¼Œæ¯”å¦‚Webã€Mailã€FTPç­‰ã€‚</p><p>è¿™æ ·æ¥è‡ªå¤–ç½‘çš„è®¿é—®è€…å¯ä»¥è®¿é—®DMZä¸­çš„æœåŠ¡ï¼Œä½†ä¸å¯èƒ½æ¥è§¦åˆ°å­˜æ”¾åœ¨å†…ç½‘ä¸­çš„å…¬å¸æœºå¯†æˆ–ç§äºº</p><p>ä¿¡æ¯ç­‰ï¼Œå³ä½¿DMZä¸­æœåŠ¡å™¨å—åˆ°ç ´åï¼Œä¹Ÿä¸ä¼šå¯¹å†…ç½‘ä¸­çš„æœºå¯†ä¿¡æ¯é€ æˆå½±å“ã€‚</p><p><strong>trust(ä¿¡ä»»åŸŸ):</strong>é«˜çº§çº§å®‰å…¨åŒºåŸŸï¼Œå®‰å…¨ä¼˜å…ˆçº§ä¸º85é€šå¸¸ç”¨æ¥å®šä¹‰å†…éƒ¨ç”¨æˆ·æ‰€åœ¨çš„ç½‘ç»œï¼Œä¹Ÿå¯ä»¥ç†</p><p>è§£ä¸ºåº”è¯¥æ˜¯é˜²æŠ¤æœ€ä¸¥å¯†çš„åœ°åŒºã€‚</p><p>å°†ä¼ä¸šçš„å…¥å£è·¯ç”±å™¨æ”¾ç½®é˜²æŠ¤å¢™çš„UntruståŒºåŸŸä¸­ï¼Œå¹¶åœ¨è·¯ç”±å™¨ä¸Šè¿›è¡ŒSNMPé…ç½®ï¼Œæ–¹ä¾¿è¿›è¡Œç®¡</p><p>ç†ã€‚åœ¨DMZåŒºåŸŸï¼Œæ”¾ç½®ä¼ä¸šå†…ç½‘æœåŠ¡å™¨ï¼Œå­˜æ”¾çš„æœåŠ¡å™¨æœ‰FTPæœåŠ¡å™¨ã€WEBæœåŠ¡å™¨ã€VPNæœåŠ¡</p><p>å™¨ã€‚å…¶ä¸­é™¤äº†FTPæœåŠ¡å™¨æ˜¯åœ¨enspä¸­å®ç°çš„å¤–ï¼Œå…¶ä»–æœåŠ¡å‡åœ¨linuxè™šæ‹Ÿæœºä¸­å®ç°ï¼Œé€šè¿‡äº‘è¿æ¥è‡³</p><p>linuxæœåŠ¡å™¨ã€‚linuxæœåŠ¡å™¨ä¸­åˆé…ç½®äº†SSHï¼ˆå®‰å…¨å¤–å£³åè®®ï¼‰æœåŠ¡ï¼Œå¯ä¾›ç®¡ç†å‘˜é€šè¿‡SSHè¿œç¨‹ç™»é™†</p><p>æœåŠ¡å™¨è¿›è¡Œä¿®æ”¹ã€é…ç½®ç­‰æ“ä½œã€‚åœ¨TruståŒºåŸŸä¸­ï¼Œé’ˆå¯¹ä¼ä¸šå†…éƒ¨ä¸åŒçš„éƒ¨é—¨ åˆ’åˆ†å‡ºå¤šä¸ªæ¨¡å— é¦–å…ˆ</p><p>æ˜¯IPåœ°å€çš„ä½¿ç”¨ï¼Œé’ˆå¯¹å†…ç½‘å¤šä¸ªè®¾å¤‡çš„æƒ…å†µä¸‹ä½¿ç”¨ä¼ä¸šç§ç½‘åœ°å€ï¼Œä¸€æ˜¯å¯ä»¥æœ‰æ•ˆå‡å°‘å¯¹IPåœ°å€çš„</p><p>èµ„é‡‘æŠ•å…¥ï¼ŒäºŒæ˜¯é’ˆå¯¹éƒ¨é—¨èƒ½å¤Ÿæœ‰è¾ƒä¸ºåˆç†çš„åˆ†é…æ¨¡å¼å’Œè§„åˆ’æ–¹æ¡ˆã€‚å…¶æ¬¡ï¼Œå¯¹äºä¼ä¸šæ•´ä½“è€Œè¨€ï¼Œå†…</p><p>éƒ¨ç½‘ç»œçš„ç›¸äº’é€šä¿¡æ˜¯ä¿è¯ä¼ä¸šå·¥ä½œæ•ˆç‡çš„é¦–è¦æ¡ä»¶å’Œè¦æ±‚ï¼Œé’ˆå¯¹å„ç±»éƒ¨é—¨å·¥ä½œæ€§è´¨çš„ä¸åŒï¼Œä¼ä¸š</p><p>ä¸­ä¸åŒå­ç½‘çš„é€šä¿¡èƒ½åŠ›ä¹Ÿæœ‰æ‰€åŒºåˆ«ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨ä¸­é—´æ ¸å¿ƒéƒ¨é—¨ä¸­é…ç½®äº†DHCPæœåŠ¡æ¥ä¿è¯å‘˜å·¥</p><p>ä½¿ç”¨æ¯ä¸€å°è®¾å¤‡æ‹¥æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç§ç½‘IPï¼Œå¹¶é‡‡ç”¨OSPFåè®®ä½¿å¾—è¿™äº›è®¾å¤‡èƒ½å¤Ÿè¿›è¡Œç›¸äº’é€šä¿¡ï¼Œç¡®ä¿</p><p>å‘˜å·¥å³ä½¿è·¨éƒ¨é—¨å·¥ä½œä¹Ÿä¸ä¼šæœ‰å¤ªå¤šçš„éº»çƒ¦ã€‚å¯¹äºä¼ä¸šå†…éƒ¨çš„æœºå¯†éƒ¨é—¨ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†æ›´åŠ å¯é çš„æ–¹</p><p>å¼æ¥è®©å…¶ä¸­çš„å‘˜å·¥å’Œè®¾å¤‡è¿›è¡Œå·¥ä½œï¼Œä¸ºä¿è¯ç½‘ç»œä¾›åº”ç¨³å®šæ€§ï¼Œåœ¨æ‹“æ‰‘ä¸­è®¾è®¡äº†å†—ä½™é“¾è·¯ï¼Œä»è€Œå‡º</p><p>ç°äº†ç¯è·¯çŠ¶å†µï¼Œä¸ºè§£ç¯è·¯æ‰€äº§ç”Ÿçš„å¹¿æ’­é£æš´é—®é¢˜ï¼Œåœ¨ç›¸åº”å¾—åˆ°äº¤æ¢æœºä¸Šé…ç½®STPï¼ˆbaiSpanning </p><p>Tree Protocol ç”Ÿæˆæ ‘åè®®ï¼‰ï¼Œå› æ­¤ï¼Œè¿™ä¸€éƒ¨åˆ†æ˜¯æ— æ³•å’Œä¼ä¸šå†…éƒ¨çš„å…¶ä»–éƒ¨é—¨è¿›è¡Œç›´æ¥é€šä¿¡çš„ã€‚æœ€</p><p>åè€ƒè™‘åˆ°ä¼ä¸šæ–‡åŒ–ï¼Œé’ˆå¯¹ä½¿ç”¨ç§»åŠ¨ç«¯å·¥ä½œçš„å‘˜å·¥ï¼Œå†…éƒ¨ç½‘ç»œä¸­åŒæ ·é…ç½®äº†WLANï¼Œä½¿å¾—ä¼ä¸šçš„å·¥</p><p>ä½œå½¢å¼ä¸å®Œå…¨å±€é™äºä¼ ç»Ÿçš„è®¾å¤‡ã€‚</p><h2 id="3-2æ‹“æ‰‘å›¾"><a href="#3-2æ‹“æ‰‘å›¾" class="headerlink" title="3.2æ‹“æ‰‘å›¾"></a>3.2æ‹“æ‰‘å›¾</h2><p><img src="https://i.loli.net/2020/06/17/MJadei3sjVrgFvu.png" alt="image-20200617220633273"></p><h1 id="å››ã€å®éªŒæ­¥éª¤ã€é…ç½®åŠæµ‹è¯•"><a href="#å››ã€å®éªŒæ­¥éª¤ã€é…ç½®åŠæµ‹è¯•" class="headerlink" title="å››ã€å®éªŒæ­¥éª¤ã€é…ç½®åŠæµ‹è¯•"></a>å››ã€å®éªŒæ­¥éª¤ã€é…ç½®åŠæµ‹è¯•</h1><h2 id="4-1TruståŒºåŸŸ"><a href="#4-1TruståŒºåŸŸ" class="headerlink" title="4.1TruståŒºåŸŸ"></a>4.1TruståŒºåŸŸ</h2><h3 id="4-1-1-WLAN"><a href="#4-1-1-WLAN" class="headerlink" title="4.1.1 WLAN"></a>4.1.1 WLAN</h3><p>WLANéƒ¨åˆ†ç”±ä¸€ä¸ªACï¼Œä¸€ä¸ªæ ¸å¿ƒäº¤æ¢æœºåŠæ•°ä¸ªAPæ„æˆã€‚å…¶ä¸­ï¼Œåœ¨æ ¸å¿ƒäº¤æ¢æœºä¸Šè¿˜é¢å¤–é…ç½®äº†åŠ¨æ€</p><p>dhcpï¼Œospf,natç­‰é…ç½®ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">AC:</span><br><span class="line">[AC6005]int Vlanif 1</span><br><span class="line">[AC6005-Vlanif1]ip ad 10.1.15.1 24</span><br><span class="line">[AC6005]capwap source interface Vlanif 1</span><br><span class="line">[AC6005]wlan</span><br><span class="line">[AC6005-wlan-view]ap auth-mode no-auth</span><br><span class="line">[AC6005-wlan-view]ssid-profile name ssid</span><br><span class="line">[AC6005-wlan-prof-ssid]ssid huawei </span><br><span class="line">[AC6005-wlan-view]vap-profile name vap</span><br><span class="line">[AC6005-wlan-prof-vap]service-vlan vlan 100</span><br><span class="line">[AC6005-wlan-prof-vap]ssid-profile ssid</span><br><span class="line">[AC6005-wlan-view]rrm-profile name default</span><br><span class="line">[AC6005-wlan-prof-default]calibrate auto-txpower-select disable</span><br><span class="line">[AC6005-wlan-view]ap-group name default</span><br><span class="line">[AC6005-wlan-ap-group-default]radio 0</span><br><span class="line">[AC6005-wlan-group-default]vap-profile vap wlan 1</span><br><span class="line"></span><br><span class="line">LSW9:</span><br><span class="line">[S1]vlan 30</span><br><span class="line">[S1]vlan 300</span><br><span class="line">[S1]DHCP enable</span><br><span class="line">[S1]int g0/0/1</span><br><span class="line">[S1-GigabitEthernet0/0/1]port link-type trunk</span><br><span class="line">[S1-GigabitEthernet0/0/1]port trunk allow-pass vlan 300 30</span><br><span class="line">[S1]int g0/0/2</span><br><span class="line">[S1-GigabitEthernet0/0/2]port link-type trunk</span><br><span class="line">[S1-GigabitEthernet0/0/2]port trunk allow-pass vlan 300</span><br><span class="line">[S1]int g0/0/3</span><br><span class="line">[S1-GigabitEthernet0/0/3]port link-type trunk</span><br><span class="line">[S1-GigabitEthernet0/0/3]port trunk allow-pass vlan 300</span><br><span class="line">[S1]int g0/0/4</span><br><span class="line">[S1-GigabitEthernet0/0/4]port link-type trunk</span><br><span class="line">[S1-GigabitEthernet0/0/4]port trunk allow-pass vlan 300</span><br><span class="line">[S1]int Vlanif 300</span><br><span class="line">[S1-Vlanif300]ip ad 10.1.30.254 24</span><br><span class="line">[S1-Vlanif300]dhcp select interface</span><br><span class="line">[S1]int Vlanif 30</span><br><span class="line">[S1-Vlanif30]ip ad 10.1.3.10 24</span><br><span class="line">[S1-Vlanif30]dhcp select interface</span><br><span class="line">[S1]int Vlanif 1</span><br><span class="line">[S1-Vlanif1]ip ad 10.1.15.254 24</span><br><span class="line">[S1-Vlanif1]dhcp select interface</span><br><span class="line">[S1]ospf 1</span><br><span class="line">[S1-ospf-1]area 0</span><br><span class="line">[S1-ospf-1-area-0.0.0.0]net 10.1.3.0 0.0.0.255</span><br><span class="line">[S1-ospf-1-area-0.0.0.0]net 10.1.30.0 0.0.0.255</span><br></pre></td></tr></table></figure><h3 id="4-1-2-VLAN-åŠ¨æ€DHCP-OSPFç»¼åˆé…ç½®"><a href="#4-1-2-VLAN-åŠ¨æ€DHCP-OSPFç»¼åˆé…ç½®" class="headerlink" title="4.1.2 VLAN+åŠ¨æ€DHCP+OSPFç»¼åˆé…ç½®"></a>4.1.2 VLAN+åŠ¨æ€DHCP+OSPFç»¼åˆé…ç½®</h3><p>ä»¥LSW1è®¾å¤‡æ‰€åœ¨åŒºåŸŸä¸ºä¾‹ï¼Œå…¶ä½™ç›¸åŒé…ç½®åŒºåŸŸå‡ä¸è¯¥åŒºåŸŸç±»ä¼¼ï¼Œæ•…åç»­ä¸å†èµ˜è¿°ï¼š</p><p>é¦–å…ˆé…ç½®VLANï¼Œé…ç½®å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]Vlan batch 40 401 402</span><br><span class="line">[Huawei]int vlanif 40</span><br><span class="line">[Huawei-Vlanif40]ip address 10.1.4.10 24</span><br><span class="line">[Huawei]int vlan 401</span><br><span class="line">[Huawei-Vlanif401]ip address 10.1.41.1 24</span><br><span class="line">[Huawei]int vlan 402</span><br><span class="line">[Huawei-Vlanif402]ip address 10.1.42.1 24</span><br><span class="line">[Huawei]int GigabitEthernet 0/0/1</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]port link-type trunk</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]port trunk allow-pass vlan 40 401 402</span><br><span class="line">[Huawei]int GigabitEthernet 0/0/2</span><br><span class="line">[Huawei-GigabitEthernet0/0/2]port link-type trunk</span><br><span class="line">[Huawei-GigabitEthernet0/0/2]port trunk allow-pass vlan 40 401 402</span><br><span class="line">[Huawei]int GigabitEthernet 0/0/3</span><br><span class="line">[Huawei-GigabitEthernet0/0/3]port link-type hybrid</span><br><span class="line">[Huawei-GigabitEthernet0/0/3]port hybrid pvid vlan 40</span><br><span class="line">[Huawei-GigabitEthernet0/0/3]port hybrid untagged vlan 40 401 402</span><br></pre></td></tr></table></figure><p>åˆ’åˆ†åœ°å€æ± ï¼Œé…ç½®DHCPï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]ip pool 401</span><br><span class="line">[Huawei-ip-pool-401]net 10.1.41.0 mask 255.255.255.0</span><br><span class="line">[Huawei-ip-pool-401]gateway-list 10.1.41.1</span><br><span class="line">[Huawei-ip-pool-401]dns-list 8.8.8.8</span><br><span class="line">[Huawei]ip pool 402</span><br><span class="line">[Huawei-ip-pool-402]net 10.1.42.0 mask 255.255.255.0</span><br><span class="line">[Huawei-ip-pool-402]gateway-list 10.1.42.1</span><br><span class="line">[Huawei-ip-pool-402]dns-list 8.8.8.8</span><br><span class="line">[Huawei-Vlanif401]Dhcp select interface</span><br><span class="line">[Huawei-Vlanif402]Dhcp select interface</span><br></pre></td></tr></table></figure><p>æœ€åé…ç½®ospf,é…ç½®å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]ospf 1</span><br><span class="line">[Huawei-ospf-1]area 0</span><br><span class="line">[Huawei-ospf-1-area-0.0.0.0]Net 10.1.41.0 0.0.0.255</span><br><span class="line">[Huawei-ospf-1-area-0.0.0.0]Net 10.1.42.0 0.0.0.255</span><br><span class="line">[Huawei-ospf-1-area-0.0.0.0]Net 10.1.0.0 0.0.0.255</span><br></pre></td></tr></table></figure><h3 id="4-1-3-STP"><a href="#4-1-3-STP" class="headerlink" title="4.1.3 STP"></a>4.1.3 STP</h3><p>Stpé…ç½®å‘½ä»¤ä»¥LSW11ä¸ºä¾‹ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]stp enable</span><br><span class="line">[Huawei]stp mode stp</span><br><span class="line">Info: This operation may take a few seconds. Please wait for a moment...done.</span><br></pre></td></tr></table></figure><p>è®¾ç½®LSW11ä¸ºä¸»rootç»“ç‚¹ï¼Œå‘½ä»¤ä¸º</p><p> <code>[Huawei]stp root primary</code> </p><p>è®¾ç½®LSW7 ä¸ºå¤‡ä»½rootè®¾å¤‡ï¼Œå‘½ä»¤ä¸º</p><p><code>[Huawei]stp root secondary</code> </p><p>æŸ¥çœ‹å„è®¾å¤‡çš„stpç”Ÿæˆæ ‘æƒ…å†µï¼Œå‘½ä»¤ä¸ºï¼š<code>display stp brief</code></p><p>å„è®¾å¤‡çš„stpåè®®æ ‘æƒ…å†µå¦‚ä¸‹ï¼š</p><ol><li>LSW11ï¼š</li></ol><p><img src="https://i.loli.net/2020/06/18/TypJ2Edg5oMZkKe.png" alt="image-20200617164302532"></p><p>LSW7ï¼š</p><p><img src="https://i.loli.net/2020/06/18/djis7S6U52A4k3V.png" alt="image-20200617164446769"></p><p>LSW12:</p><p><img src="https://i.loli.net/2020/06/18/1k5tzXWjI2ohqdU.png" alt="image-20200617164708417"></p><p>LSW14:</p><p><img src="https://i.loli.net/2020/06/18/g3SCahTpGufi1UE.png" alt="image-20200617164721376"></p><p>ä»ä¸Šé¢çš„å„äº¤æ¢æœºçš„ç«¯å£çŠ¶æ€å¯ä»¥çœ‹å‡ºstpè®¾ç½®æˆåŠŸã€‚</p><h3 id="4-1-4-é“¾è·¯èšåˆ"><a href="#4-1-4-é“¾è·¯èšåˆ" class="headerlink" title="4.1.4 é“¾è·¯èšåˆ"></a>4.1.4 é“¾è·¯èšåˆ</h3><p>é“¾è·¯èšåˆé…ç½®å‘½ä»¤ï¼Œä»¥LSW21ä¸ºä¾‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]int Eth-Trunk 1</span><br><span class="line">[Huawei-Eth-Trunk1]bpdu enable </span><br><span class="line">[Huawei-Eth-Trunk1]mode lacp-static </span><br><span class="line">[Huawei-Eth-Trunk1]q</span><br><span class="line">[Huawei-Eth-Trunk1]port link-type trunk</span><br><span class="line">[Huawei-Eth-Trunk1]port trunk al</span><br><span class="line">[Huawei-Eth-Trunk1]port trunk allow-pass vlan 70</span><br><span class="line">[Huawei-Eth-Trunk1]quit</span><br><span class="line">[Huawei]int GigabitEthernet 0/0/1</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]eth-trunk 1</span><br><span class="line">Info: This operation may take a few seconds. Please wait for a moment...done.</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]q</span><br><span class="line">[Huawei]int GigabitEthernet 0/0/2</span><br><span class="line">[Huawei-GigabitEthernet0/0/2]eth-trunk 1</span><br><span class="line">Info: This operation may take a few seconds. Please wait for a moment...done.</span><br><span class="line">[Huawei-GigabitEthernet0/0/2]q</span><br><span class="line">[Huawei]int vlanif 70</span><br><span class="line">[Huawei-Vlanif70]ip address 10.1.7.2 24</span><br></pre></td></tr></table></figure><p>é…ç½®ç»“æœå±•ç¤ºï¼ˆLSW22ipä¸º10.1.7.3/24ï¼‰</p><p><img src="https://i.loli.net/2020/06/18/fuhrz5aXW6l4UkK.png" alt="image-20200617163215700"></p><p><img src="https://i.loli.net/2020/06/18/UaGgh6zsLrFdBZ7.png" alt="image-20200617163240930"></p><p>pingæµ‹è¯•ï¼š</p><p><img src="https://i.loli.net/2020/06/18/BIDbj7vF2mtXOkr.png" alt="image-20200617163321995"></p><h3 id="4-1-5-æ ¸å¿ƒè·¯ç”±å™¨é…ç½®ï¼ˆAR2ï¼‰"><a href="#4-1-5-æ ¸å¿ƒè·¯ç”±å™¨é…ç½®ï¼ˆAR2ï¼‰" class="headerlink" title="4.1.5 æ ¸å¿ƒè·¯ç”±å™¨é…ç½®ï¼ˆAR2ï¼‰"></a>4.1.5 æ ¸å¿ƒè·¯ç”±å™¨é…ç½®ï¼ˆAR2ï¼‰</h3><p>é¦–å…ˆç»™è¯¥è·¯ç”±å™¨ä¸­å¢åŠ äº†é¢å¤–æ¥å£ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<img src="https://i.loli.net/2020/06/18/TypJ2Edg5oMZkKe.png" alt="image-20200618082032153"></p><p>å¯¹äºAR2çš„é…ç½®å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]int GigabitEthernet 1/0/0</span><br><span class="line">[Huawei-GigabitEthernet1/0/0]ip address 10.1.3.1 24</span><br><span class="line">[Huawei]int GigabitEthernet 0/0/1</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]ip address 10.1.4.1 24</span><br><span class="line">[Huawei]int GigabitEthernet 0/0/2</span><br><span class="line">[Huawei-GigabitEthernet0/0/2]ip address 10.1.5.1 24</span><br><span class="line">[Huawei]int GigabitEthernet 0/0/0</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]ip address 192.168.10.1 24</span><br><span class="line">[Huawei]int GigabitEthernet 2/0/0</span><br><span class="line">[Huawei-GigabitEthernet2/0/0]ip address 192.168.15.1 24</span><br><span class="line">[Huawei]int GigabitEthernet 4/0/0</span><br><span class="line">[Huawei-GigabitEthernet4/0/0]ip address 192.168.100.1 24</span><br><span class="line">[Huawei]ospf 1</span><br><span class="line">[Huawei-ospf-1]area 0</span><br><span class="line">[Huawei-ospf-1-area-0.0.0.0]Net 10.1.5.0 0.0.0.255</span><br><span class="line">[Huawei-ospf-1-area-0.0.0.0]Net 10.1.4.0 0.0.0.255</span><br><span class="line">[Huawei-ospf-1-area-0.0.0.0]Net 10.1.3.0 0.0.0.255</span><br><span class="line">[Huawei-ospf-1-area-0.0.0.0]Net 192.168.10.0 0.0.0.255</span><br><span class="line">[Huawei-ospf-1-area-0.0.0.0]Net 192.168.100.0 0.0.0.255</span><br><span class="line"></span><br><span class="line">[Huawei]nat address-group 1 192.168.10.10 192.168.10.30</span><br><span class="line">[Huawei]acl 2001</span><br><span class="line">[Huawei-acl-basic-2001]rule 5 permit <span class="built_in">source</span> 10.1.0.0 0.0.255.255</span><br><span class="line">[Huawei]int GigabitEthernet 0/0/0</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]nat outbound 2001 address-group 1 no-pat</span><br><span class="line">[Huawei]telnet server <span class="built_in">enable</span> </span><br><span class="line">[Huawei]user-interface vty 0 4</span><br><span class="line">[Huawei-ui-vty0-4]authentication-mode password</span><br><span class="line">Please configure the login password (maximum length 16):huawei123</span><br><span class="line">[Huawei-ui-vty0-4]user privilege level 3</span><br></pre></td></tr></table></figure><h3 id="4-1-6-telnet"><a href="#4-1-6-telnet" class="headerlink" title="4.1.6 telnet"></a>4.1.6 telnet</h3><p>é¦–å…ˆé…ç½®AR1ï¼Œé…ç½®å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]int GigabitEthernet 0/0/0</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]ip address 192.168.15.2 24</span><br></pre></td></tr></table></figure><p>ç”±äºåœ¨æ ¸å¿ƒäº¤æ¢æœºAR2å·²ç»é…ç½®äº†telnetï¼Œè¿™é‡Œç›´æ¥å±•ç¤ºæ“ä½œã€‚</p><p><img src="https://i.loli.net/2020/06/18/neIwyORTNHx5p4Y.png" alt></p><h3 id="4-1-7-é˜²ç«å¢™é…ç½®"><a href="#4-1-7-é˜²ç«å¢™é…ç½®" class="headerlink" title="4.1.7 é˜²ç«å¢™é…ç½®"></a>4.1.7 é˜²ç«å¢™é…ç½®</h3><p>é…ç½®å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[SRG]firewall zone trust</span><br><span class="line">[SRG-zone-trust]add int g0/0/1 (g0/0/0ç«¯å£é»˜è®¤ä¸ºTruståŒºåŸŸ)</span><br><span class="line">[SRG]firewall zone untrust</span><br><span class="line">[SRG-zone-untrust]add int g0/0/2</span><br><span class="line">[SRG]firewall zone dmz</span><br><span class="line">[SRG-zone-dmz]add int g0/0/3</span><br><span class="line">[SRG-zone-dmz]add int g0/0/4</span><br><span class="line"></span><br><span class="line">[SRG]int GigabitEthernet0/0/1</span><br><span class="line">[SRG-GigabitEthernet0/0/1]ip address 192.168.10.100 24</span><br><span class="line">[SRG]int GigabitEthernet0/0/2</span><br><span class="line">[SRG-GigabitEthernet0/0/2]ip address 192.168.40.1 24</span><br><span class="line">[SRG]int GigabitEthernet0/0/3</span><br><span class="line">[SRG-GigabitEthernet0/0/3]ip address 192.168.30.1 24</span><br><span class="line">[SRG]int GigabitEthernet0/0/4</span><br><span class="line">[SRG-GigabitEthernet0/0/3]ip address 192.168.20.1 24</span><br><span class="line"></span><br><span class="line">[SRG]firewall packet-filter default permit interzone trust dmz direction outbound</span><br><span class="line">[SRG]policy interzone trust dmz outbound</span><br><span class="line">[SRG-policy-interzone-trust-dmz-outbound]policy 1</span><br><span class="line">[SRG-policy-interzone-trust-dmz-outbound-1]policy source 192.168.10.0 mask 255.255.255.0</span><br><span class="line">[SRG-policy-interzone-trust-dmz-outbound-1]action permit</span><br><span class="line"></span><br><span class="line">[SRG]ospf 1</span><br><span class="line">[SRG-ospf-1]area 0</span><br><span class="line">[SRG-ospf-1-area-0.0.0.0]Net 192.168.10.0 0.0.0.255</span><br><span class="line">[SRG-ospf-1-area-0.0.0.0]Net 192.168.20.0 0.0.0.255</span><br><span class="line">[SRG-ospf-1-area-0.0.0.0]Net 192.168.30.0 0.0.0.255</span><br><span class="line">[SRG-ospf-1-area-0.0.0.0]Net 192.168.40.0 0.0.0.255</span><br></pre></td></tr></table></figure><h2 id="4-2DMZåŒºåŸŸ"><a href="#4-2DMZåŒºåŸŸ" class="headerlink" title="4.2DMZåŒºåŸŸ"></a>4.2DMZåŒºåŸŸ</h2><h3 id="4-2-1FTPæœåŠ¡å™¨"><a href="#4-2-1FTPæœåŠ¡å™¨" class="headerlink" title="4.2.1FTPæœåŠ¡å™¨"></a>4.2.1FTPæœåŠ¡å™¨</h3><p>ç”±äºåœ¨æœ¬æœºä¸Šä½¿ç”¨ftp+å†…ç½‘ç©¿é€æŠ€æœ¯å®ç°çš„ç½‘ç»œç¡¬ç›˜å…±äº«æœåŠ¡ï¼Œåœ¨æ­¤ç›´æ¥å°†ftpæœåŠ¡æä¾›ç»™enspã€‚</p><p>æœåŠ¡ä¸ºwin10æä¾›ï¼ŒæœåŠ¡ç«¯é…ç½®ï¼š</p><p><img src="https://i.loli.net/2020/06/16/eYyRwafv29LzCFJ.png" alt="image-20200616155309043"></p><p>enspä¸­è¿æ¥å¦‚ä¸‹ï¼š</p><p><img src="https://i.loli.net/2020/06/16/7bMz1ApBlfdSEHc.png" alt="image-20200616155420223"></p><h3 id="4-2-2linuxæœåŠ¡å™¨"><a href="#4-2-2linuxæœåŠ¡å™¨" class="headerlink" title="4.2.2linuxæœåŠ¡å™¨"></a>4.2.2linuxæœåŠ¡å™¨</h3><h4 id="4-2-2-1å‡†å¤‡å·¥ä½œ"><a href="#4-2-2-1å‡†å¤‡å·¥ä½œ" class="headerlink" title="4.2.2.1å‡†å¤‡å·¥ä½œ"></a>4.2.2.1å‡†å¤‡å·¥ä½œ</h4><h5 id="1-åœ¨è™šæ‹Ÿæœºä¸­å®‰è£…è€å¸ˆæä¾›çš„ubuntu-20-04-mateç³»ç»Ÿå½“ä½œDMZå»çš„æœåŠ¡å™¨ã€‚"><a href="#1-åœ¨è™šæ‹Ÿæœºä¸­å®‰è£…è€å¸ˆæä¾›çš„ubuntu-20-04-mateç³»ç»Ÿå½“ä½œDMZå»çš„æœåŠ¡å™¨ã€‚" class="headerlink" title="1. åœ¨è™šæ‹Ÿæœºä¸­å®‰è£…è€å¸ˆæä¾›çš„ubuntu-20.04-mateç³»ç»Ÿå½“ä½œDMZå»çš„æœåŠ¡å™¨ã€‚"></a>1. åœ¨è™šæ‹Ÿæœºä¸­å®‰è£…è€å¸ˆæä¾›çš„ubuntu-20.04-mateç³»ç»Ÿå½“ä½œDMZå»çš„æœåŠ¡å™¨ã€‚</h5><h5 id="2-æ¢æº"><a href="#2-æ¢æº" class="headerlink" title="2.æ¢æº"></a>2.æ¢æº</h5><p>åœ¨è®¾ç½®ä¸­é€‰æ‹©ç³»ç»Ÿè®¾ç½®ï¼Œæ‰¾åˆ°Software Updaterï¼Œç‚¹å‡»è¿›å…¥ï¼Œå†ç‚¹å‡»SettingsæŒ‰é’®ï¼Œ</p><p><img src="https://i.loli.net/2020/06/16/T2oMNG86Xr5wILW.png" alt="image-20200616092916772"></p><p><img src="https://i.loli.net/2020/06/16/8OU6e1VxjuyDHm7.png" alt="image-20200616093031282"></p><p><img src="https://i.loli.net/2020/06/16/qAn1YptUaRHFrLP.png" alt="image-20200616093227130"></p><p><img src="https://i.loli.net/2020/06/16/Y4IUR98sBaWo5Su.png" alt="image-20200616093307249"></p><p>é€‰æ‹©Reloadé‡æ–°åŠ è½½æºã€‚</p><p>åœ¨ç»ˆç«¯è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get upgrade</span><br></pre></td></tr></table></figure><p>æ›´æ–°æºå’Œè½¯ä»¶ã€‚</p><h5 id="3-è¿é€šæ€§"><a href="#3-è¿é€šæ€§" class="headerlink" title="3.è¿é€šæ€§"></a>3.è¿é€šæ€§</h5><p><strong>å…³é—­é˜²ç«å¢™ï¼Œæµ‹è¯•ç½‘è·¯è¿é€šæ€§ã€‚</strong></p><p>å…³é—­å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw <span class="built_in">disable</span> //å…³é—­é˜²ç«å¢™</span><br><span class="line">sudo ufw status  //æŸ¥çœ‹é˜²æŠ¤å¢™çŠ¶æ€</span><br></pre></td></tr></table></figure><p>win7ä¹Ÿéœ€è¦å…³é—­é˜²æŠ¤å¢™ã€‚</p><p>æµ‹è¯•è¿é€šæ€§ï¼š</p><p><img src="https://i.loli.net/2020/06/16/DbQxdyCL5vPEltU.png" alt="image-20200616094011730"></p><h5 id="4-æ­å»ºwebæœåŠ¡å™¨"><a href="#4-æ­å»ºwebæœåŠ¡å™¨" class="headerlink" title="4.æ­å»ºwebæœåŠ¡å™¨"></a>4.æ­å»ºwebæœåŠ¡å™¨</h5><p><strong>å®‰è£…nginxæœåŠ¡å™¨</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nginx</span><br></pre></td></tr></table></figure><p><strong>è°ƒæ•´é˜²ç«å¢™ï¼ˆä¹Ÿå¯ä»¥å°†é˜²ç«å¢™ç›´æ¥å…³é—­ï¼Œåœ¨è¿™é‡Œæ¨èå°†é˜²ç«å¢™å¼€å¯ï¼Œå¯¹ç›¸åº”æœåŠ¡è¿›è¡Œæ”¾è¡Œï¼Œé…ç½®å¦‚ä¸‹ï¼‰</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw app list</span><br><span class="line">  CUPS</span><br><span class="line">  Nginx Full</span><br><span class="line">  Nginx HTTP</span><br><span class="line">  Nginx HTTPS</span><br></pre></td></tr></table></figure><p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼ŒNginxæœ‰ä¸‰ä¸ªé…ç½®æ–‡ä»¶å¯ç”¨ï¼šNginx Fullã€Nginx HTTPã€Nginx HTTPS</p><p>Nginx Full ï¼šæ­¤é…ç½®æ–‡ä»¶æ‰“å¼€ç«¯å£80ï¼ˆæ­£å¸¸ï¼ŒæœªåŠ å¯†çš„ç½‘ç»œæµé‡ï¼‰å’Œç«¯å£443ï¼ˆTLS / SSLåŠ å¯†æµé‡ï¼‰</p><p>Nginx HTTP ï¼šæ­¤é…ç½®æ–‡ä»¶ä»…æ‰“å¼€ç«¯å£80ï¼ˆæ­£å¸¸ï¼ŒæœªåŠ å¯†çš„ç½‘ç»œæµé‡ï¼‰</p><p>Nginx HTTPS ï¼šæ­¤é…ç½®æ–‡ä»¶ä»…æ‰“å¼€ç«¯å£443ï¼ˆTLS / SSLåŠ å¯†æµé‡ï¼‰</p><p>è¾“å…¥ä»¥ä¸‹å‘½ä»¤ä»¥æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw status</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°å…è®¸é€šè¿‡çš„æœåŠ¡æœ‰å“ªäº›ï¼š</p><p><img src="https://i.loli.net/2020/06/16/NhQq761kTlcia8e.png" alt="image-20200616154638847"></p><p>Ubuntu 20.04ä¸Šçš„Nginxé»˜è®¤å¯ç”¨äº†ä¸€ä¸ªæœåŠ¡å™¨æ¨¡å—ï¼Œè¯¥æ¨¡å—è¢«é…ç½®ä¸ºåœ¨<code>/var/www/html</code>ç›®å½•ä¸‹æä¾›æ–‡æ¡£ã€‚å°†å†™å¥½çš„é¡¹ç›®å¤åˆ¶è‡³/var/www/htmlç›®å½•ä¸‹ã€‚</p><p><strong>æµ‹è¯•ï¼šåœ¨æµè§ˆå™¨ä¸­è¾“å…¥<a href="http://192.168.10.121" target="_blank" rel="noopener">http://192.168.10.121</a></strong></p><p><img src="https://i.loli.net/2020/06/16/3Ice8vWAhPpoCO2.png" alt="image-20200616154344810"></p><h5 id="5-æ­å»ºVPNæœåŠ¡å™¨ï¼ˆPPTPï¼‰"><a href="#5-æ­å»ºVPNæœåŠ¡å™¨ï¼ˆPPTPï¼‰" class="headerlink" title="5.æ­å»ºVPNæœåŠ¡å™¨ï¼ˆPPTPï¼‰"></a>5.æ­å»ºVPNæœåŠ¡å™¨ï¼ˆPPTPï¼‰</h5><h6 id="5-1å®‰è£…PPTPD"><a href="#5-1å®‰è£…PPTPD" class="headerlink" title="5.1å®‰è£…PPTPD"></a>5.1å®‰è£…PPTPD</h6><p>ç¬¬ä¸€æ­¥å½“ç„¶æ˜¯å®‰è£…è¿™ä¸ªè½¯ä»¶åŒ…äº†ã€‚ï¼ˆä¸‹é¢æ‰€æœ‰çš„ä»£ç ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹çš„ï¼Œæˆ‘ä¼šç‰¹åˆ«æ ‡è®°å‡ºæ¥çš„ï¼Œå…¶ä»–éƒ½è¡¨ç¤ºå¯ä»¥ç›´æ¥å¤åˆ¶ï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install pptpd</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/06/17/igebY2qfOFyJ81I.png" alt="image-20200617100516932"></p><h6 id="5-2ç¼–è¾‘PPTPD-CONFæ–‡ä»¶"><a href="#5-2ç¼–è¾‘PPTPD-CONFæ–‡ä»¶" class="headerlink" title="5.2ç¼–è¾‘PPTPD.CONFæ–‡ä»¶"></a>5.2ç¼–è¾‘PPTPD.CONFæ–‡ä»¶</h6><p>æ‰“å¼€è¿™ä¸ªæ–‡ä»¶å¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/pptpd.conf</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/06/17/IXBjQ6aAMZSmh9t.png" alt="image-20200617102931169"></p><p>localip:è¡¨ç¤ºPPTPæœåŠ¡åœ°å€åŠæœ¬æœºIPã€‚</p><p>remoteipï¼šå½“å®¢æˆ·æœºé€šè¿‡pptpè¿æ¥åˆ°vpnåæ‰€èƒ½æ‹¿åˆ°çš„ipåœ°å€èŒƒå›´ï¼Œé»˜è®¤ä»ç¬¬ä¸€ä¸ªå¼€å§‹åˆ†é…ç»™å®¢æˆ·</p><h6 id="5-3ä¿®æ”¹CHAP-SECRETSæ–‡ä»¶ï¼Œæ·»åŠ å¯ä»¥ç™»å½•çš„ç”¨æˆ·"><a href="#5-3ä¿®æ”¹CHAP-SECRETSæ–‡ä»¶ï¼Œæ·»åŠ å¯ä»¥ç™»å½•çš„ç”¨æˆ·" class="headerlink" title="5.3ä¿®æ”¹CHAP-SECRETSæ–‡ä»¶ï¼Œæ·»åŠ å¯ä»¥ç™»å½•çš„ç”¨æˆ·"></a>5.3ä¿®æ”¹CHAP-SECRETSæ–‡ä»¶ï¼Œæ·»åŠ å¯ä»¥ç™»å½•çš„ç”¨æˆ·</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/ppp/chap-secrets</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/06/17/Noq3EBz6cGMklhQ.png" alt="image-20200617101228399"></p><p>clientï¼šè¿æ¥ç”¨æˆ·å<br>serverï¼šè¿æ¥çš„æœåŠ¡<br>secretï¼šè¿æ¥å¯†ç <br>IP addressesï¼šå¯è¿æ¥çš„IPï¼Œ*è¡¨ç¤ºæ‰€æœ‰</p><h6 id="5-4ä¿®æ”¹è¿œç¨‹è¿æ¥ç”¨æˆ·çš„DNS"><a href="#5-4ä¿®æ”¹è¿œç¨‹è¿æ¥ç”¨æˆ·çš„DNS" class="headerlink" title="5.4ä¿®æ”¹è¿œç¨‹è¿æ¥ç”¨æˆ·çš„DNS"></a>5.4ä¿®æ”¹è¿œç¨‹è¿æ¥ç”¨æˆ·çš„DNS</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/ppp/pptpd-options</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/06/17/Gsk7SRaUxf6dnJX.png" alt="image-20200617101414509"></p><h6 id="5-5å¼€å¯ç½‘ç»œè½¬å‘åŠŸèƒ½"><a href="#5-5å¼€å¯ç½‘ç»œè½¬å‘åŠŸèƒ½" class="headerlink" title="5.5å¼€å¯ç½‘ç»œè½¬å‘åŠŸèƒ½"></a>5.5å¼€å¯ç½‘ç»œè½¬å‘åŠŸèƒ½</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/sysctil.conf</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/06/17/SEI5OkULVhHiyjJ.png" alt="image-20200617101751708"></p><p>å»æ‰ä¸¤è¡Œå¯¹åº”çš„æ³¨é‡Šï¼Œæä¾›ipv4å’Œipv6çš„è½¬å‘åŠŸèƒ½ã€‚</p><p>æ›´æ–°é…ç½®å‘½ä»¤å¦‚ä¸‹ï¼š</p><p><img src="https://i.loli.net/2020/06/17/MLXForGbRWD2CgK.png" alt="image-20200617102036260"></p><h6 id="5-6é…ç½®iptables"><a href="#5-6é…ç½®iptables" class="headerlink" title="5.6é…ç½®iptables"></a>5.6é…ç½®iptables</h6><p><strong>å¼€å¯greåè®®</strong></p><p>è¾“å…¥ä¸‹é¢çš„æŒ‡ä»¤ï¼Œå¼€å¯greåè®®ï¼Œå¹¶æ‰“å¼€æœåŠ¡å™¨47,1723å·ç«¯å£ã€‚</p><p>ä½¿ç”¨VPNéœ€è¦å¼€å¯greåè®®ï¼Œè€Œgreåè®®éœ€è¦ä½¿ç”¨æœåŠ¡å™¨çš„47å’Œ1723å·ç«¯å£ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo iptables -A INPUT -p gre -j ACCEPT </span><br><span class="line">sudo iptables -A INPUT -p tcp --dport 1723 -j ACCEPT   </span><br><span class="line">sudo iptables -A INPUT -p tcp --dport 47 -j ACCEPT</span><br></pre></td></tr></table></figure><p><strong>å¼€å¯NATè½¬å‘</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo iptables -t nat -A POSTROUTING -s 192.168.10.121/24 -o ens33 -j MASQUERADE</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong></p><p>ä¸Šé¢æŒ‡ä»¤ä¸­ipè¦å¡«å†™éƒ¨ç½²pptpæ­¥éª¤ä¸­ç¬¬1.2æ­¥ä¸­è®¾ç½®çš„localipï¼Œä¹Ÿå°±æ˜¯è™šæ‹Ÿvpnçš„ä¸»æœºçš„ipã€‚</p><p>ens33è¡¨ç¤ºå½“å‰æœåŠ¡å™¨çš„ç½‘å¡ï¼Œè¿™é‡Œä¸åŒæœºå™¨å¯èƒ½ä¸ä¸€æ ·ï¼Œå¯ä»¥é€šè¿‡ifconfigæŒ‡ä»¤è¿›è¡ŒæŸ¥è¯¢ï¼Œä¹‹å</p><p>ä¿®æ”¹æˆå¯¹åº”çš„è®¾å¤‡åç§°å³å¯ã€‚</p><p>POSTROUTINGå‚æ•°è¡¨ç¤ºï¼ŒæŒ‡å®šå½“æ•°æ®åŒ…ç¦»å¼€æœåŠ¡å™¨çš„æ—¶å€™ï¼Œå¯¹æ•°æ®åŒ…è¿›è¡Œå¤„ç†ã€‚</p><p>MASQUERADEè¿™ä¸ªå‚æ•°çš„æ„æ€å°±æ˜¯å³å°†ä»æœåŠ¡å™¨å°åŒ…å‡ºå»(-o)çš„é‚£å—ç½‘å¡ä¸Šçš„IPï¼Œç”±äºå®éªŒå®¤çš„</p><p>æœåŠ¡å™¨æ˜¯å›ºå®šipï¼Œæ‰€ä»¥è¿™é‡Œä¿®æ”¹æˆæœåŠ¡å™¨çš„è™šæ‹Ÿipä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p><p>é€šè¿‡ä¸Šé¢çš„æŒ‡ä»¤ï¼Œiptablesåšäº†è¿™æ ·ä¸€ä»¶äº‹æƒ…ï¼šå°†æ‰€æœ‰ä»æœåŠ¡å™¨ä¸Šä¼ å‡ºçš„æºåœ°å€ä¸º10.1.1.1-255ä¹‹</p><p>ä¸­çš„ipæ•°æ®åŒ…çš„æºipæ”¹æˆæœåŠ¡å™¨çš„ipã€‚å¦‚æœä¸åšè¿™ä¸ªæ“ä½œï¼ŒæœåŠ¡å™¨é€šè¿‡VPNä¼ å›çš„æ•°æ®åŒ…å°†ä¸åŒ…</p><p>å«æœåŠ¡å™¨è‡ªå·±çš„æºipï¼Œæ‰€ä»¥è¿œç¨‹è®¿é—®ä¸»æœºçš„å›å¤ipåŒ…ä¼šä¸¢å¤±ã€‚</p><h6 id="5-7é‡å¯PPTPæœåŠ¡å¹¶æŸ¥çœ‹çŠ¶æ€"><a href="#5-7é‡å¯PPTPæœåŠ¡å¹¶æŸ¥çœ‹çŠ¶æ€" class="headerlink" title="5.7é‡å¯PPTPæœåŠ¡å¹¶æŸ¥çœ‹çŠ¶æ€"></a>5.7é‡å¯PPTPæœåŠ¡å¹¶æŸ¥çœ‹çŠ¶æ€</h6><p><img src="https://i.loli.net/2020/06/17/2b8jyBToNMIUscR.png" alt="image-20200617103114973"></p><h6 id="5-8é…ç½®å®¢æˆ·ç«¯ï¼Œè¿æ¥"><a href="#5-8é…ç½®å®¢æˆ·ç«¯ï¼Œè¿æ¥" class="headerlink" title="5.8é…ç½®å®¢æˆ·ç«¯ï¼Œè¿æ¥"></a>5.8é…ç½®å®¢æˆ·ç«¯ï¼Œè¿æ¥</h6><p><img src="https://i.loli.net/2020/06/17/oij7bdWNUpSvr6g.png" alt="image-20200617110012250"></p><h6 id="5-9è¿›è¡Œè¿æ¥æµ‹è¯•"><a href="#5-9è¿›è¡Œè¿æ¥æµ‹è¯•" class="headerlink" title="5.9è¿›è¡Œè¿æ¥æµ‹è¯•"></a>5.9è¿›è¡Œè¿æ¥æµ‹è¯•</h6><p><img src="https://i.loli.net/2020/06/17/2l78AzI6rQqgkSM.jpg" alt="img"></p><p>è¿æ¥æˆåŠŸä¹‹åæŸ¥çœ‹ä¸€ä¸‹è·å–åˆ°çš„IPåœ°å€</p><p><img src="https://i.loli.net/2020/06/17/Ka4FzQTliIydRk1.png" alt="image-20200617235356285"></p><h5 id="6-SSHï¼ˆå®‰å…¨å¤–å£³åè®®ï¼‰æœåŠ¡å™¨"><a href="#6-SSHï¼ˆå®‰å…¨å¤–å£³åè®®ï¼‰æœåŠ¡å™¨" class="headerlink" title="6.SSHï¼ˆå®‰å…¨å¤–å£³åè®®ï¼‰æœåŠ¡å™¨"></a>6.SSHï¼ˆå®‰å…¨å¤–å£³åè®®ï¼‰æœåŠ¡å™¨</h5><p> <strong>ä½¿ç”¨aptå·¥å…·ä¸‹è½½å¹¶å®‰è£…openssh-server</strong></p><p>è¾“å…¥å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install openssh-server</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/06/16/RCn267brXeU4lEv.png" alt="image-20200616161058823"></p><p>ç­‰å¾…å®‰è£…ç»“æŸå³å¯ã€‚ç„¶åå†æ¬¡æŸ¥çœ‹æœåŠ¡æœ‰æ²¡æœ‰å¯åŠ¨ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ps -e | grep ssh</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://i.loli.net/2020/06/16/io7a8QJWSdN2kOj.png" alt="image-20200616161259612"></p><p>å†æ¬¡ç¡®è®¤æˆ–è€…æ²¡æœ‰å›¾ä¸­çš„ç»“æœï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥å¯åŠ¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/ssh status</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/06/16/LwJMf76dZ4t8DyC.png" alt="image-20200616161426284"></p><p>sshæœåŠ¡ç«¯å·²ç»å¼€å¯ï¼Œåœ¨xshellä¸­è¿›è¡Œè¿œç¨‹ç™»é™†æµ‹è¯•ã€‚</p><p><img src="https://i.loli.net/2020/06/16/8BZLinq6XrVH7QY.png" alt="image-20200616161545290"></p><p>åœ¨ä¸»æœºæ å¡«å…¥å¼€å¯sshæœåŠ¡ç«¯çš„ä¸»æœºipï¼Œç‚¹å‡»ç¡®å®šè¿›å…¥å¦‚ä¸‹ç•Œé¢ï¼š</p><p><img src="https://i.loli.net/2020/06/16/kxpV1fbLr6HdZcm.png" alt="image-20200616161709692"></p><p>è¿™æ˜¯å¯†é’¥å’Œç®—æ³•åå•†é˜¶æ®µï¼š</p><p>å®¢æˆ·è¯·æ±‚è¿æ¥-æœåŠ¡å™¨å°†å¯¹åº”å…¬é’¥ã€ç”Ÿæˆä¼šè¯IDå‘ç»™å®¢æˆ·ç«¯ã€å®¢æˆ·ç«¯ç”Ÿæˆä¼šè¯å¯†é’¥ï¼Œå¹¶å°†ä¼šè¯å¯†é’¥</p><p>ä¸ä¼šè¯IDè¿›è¡Œxoré€»è¾‘è¿ç®—åçš„å€¼ï¼Œä½¿ç”¨æœåŠ¡å™¨å…¬é’¥åŠ å¯†å‘é€ç»™æœåŠ¡å™¨ã€æœåŠ¡å™¨é‡‡ç”¨ç§é’¥è§£å¯†</p><p>åï¼Œé€šè¿‡xorè¿ç®—å¾—åˆ°ä¼šè¯å¯†é’¥-ä¹‹åæ‰€æœ‰ä¼ è¾“éƒ½ä¼šè¢«ä¼šè¯å¯†é’¥åŠ å¯†ä¸è§£å¯†ã€‚</p><p>ç‚¹å‡»æ¥å—å¹¶ä¿å­˜åï¼Œè¿›å…¥è®¤è¯é˜¶æ®µï¼š</p><p>passwordè®¤è¯-è¾“å…¥ç”¨æˆ·åä¸å¯†ç ï¼ŒæœåŠ¡å™¨éªŒè¯æ˜¯å¦åˆæ³•ã€‚</p><p>publickeyè®¤è¯-æ•°å­—ç­¾åè®¤è¯ï¼Œå®¢æˆ·ç«¯å‘é€ç”¨æˆ·åã€å…¬å…±å¯†é’¥ã€å…¬å…±å¯†é’¥ç®—æ³•çš„publickeyè®¤è¯è¯·</p><p>æ±‚ç»™æœåŠ¡å™¨ç«¯ï¼ŒæœåŠ¡å™¨éªŒè¯æ˜¯å¦åˆæ³•ã€‚ä½¿ç”¨ssh-keygenç¨‹åºç”Ÿæˆå…¬é’¥ id_dsa.pub å’Œç§é’¥ </p><p>id_dsaã€‚</p><p><img src="https://i.loli.net/2020/06/16/7YbxIvFL9Jg8psr.png" alt="image-20200616161924769"></p><p><img src="https://i.loli.net/2020/06/16/4PrdZ6DmenCAfg8.png" alt="image-20200616161949478"></p><p>è¾“å…¥æ­£ç¡®çš„ç”¨æˆ·åå¯†ç åï¼Œxshellç•Œé¢å¦‚ä¸‹ï¼š</p><p><img src="https://i.loli.net/2020/06/16/9rHSfgCceAbZLaT.png" alt="image-20200616162022133"></p><h2 id="4-3UntruståŒºåŸŸ"><a href="#4-3UntruståŒºåŸŸ" class="headerlink" title="4.3UntruståŒºåŸŸ"></a>4.3UntruståŒºåŸŸ</h2><h3 id="4-3-1-SNMP"><a href="#4-3-1-SNMP" class="headerlink" title="4.3.1 SNMP"></a>4.3.1 SNMP</h3><h4 id="4-3-1-1-enspç«¯"><a href="#4-3-1-1-enspç«¯" class="headerlink" title="4.3.1.1 enspç«¯"></a>4.3.1.1 enspç«¯</h4><p>åœ¨AR3å¤„é…ç½®<strong>snmp-agent,</strong>è®¾ç½®è¯»å›¢ä½“å­—ä¸º<strong>public</strong>ï¼Œå†™å›¢ä½“å­—ä¸º<strong>private</strong>ï¼Œé…ç½®å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]snmp  </span><br><span class="line">[Huawei]snmp-agent </span><br><span class="line">[Huawei]snmp-agent sys-info version v1 </span><br><span class="line">[Huawei]snmp-agent community <span class="built_in">read</span> public</span><br><span class="line">[Huawei]snmp-agent community write private</span><br><span class="line">[Huawei]snmp-agent sys-info contact this_is_a_test_string. </span><br><span class="line">[Huawei]int GigabitEthernet 0/0/2 </span><br><span class="line">[Huawei-GigabitEthernet0/0/2]ip address 192.168.56.10 24</span><br></pre></td></tr></table></figure><p>AR3é…ç½®å®Œæˆåï¼Œå°†AR3ä¸äº‘è¿æ¥ï¼Œè€Œäº‘é€šè¿‡ä¸Windowsä¸»æœºçš„Mib Browserè¿æ¥ä»è€Œå®ç°è®¾å¤‡</p><p>ç®¡ç†ï¼Œäº‘çš„ç›¸å…³é…ç½®å¦‚ä¸‹ï¼š</p><p><img src="https://i.loli.net/2020/06/18/WDyibS2oMpT7qBh.png" alt="äº‘è®¾ç½®"></p><h4 id="4-3-1-2-Windowsç«¯"><a href="#4-3-1-2-Windowsç«¯" class="headerlink" title="4.3.1.2 Windowsç«¯"></a>4.3.1.2 Windowsç«¯</h4><p>åœ¨Windowsç«¯æ‰“å¼€Mib Browserï¼Œè¿›è¡ŒIPï¼ŒSNMPv1ç›¸å…³é…ç½®ã€‚</p><p><img src="https://i.loli.net/2020/06/18/2bZDsCMcUwVlHdP.png" alt="é…ç½®"></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œé…ç½®è¯»å›¢ä½“å­—ä¸º<strong>public</strong>ï¼Œå†™å›¢ä½“å­—ä¸º<strong>private</strong>ï¼Œä¸enspä¸­ä¿æŒä¸€è‡´ï¼Œç„¶åè¿æ¥ï¼Œå‡º</p><p>ç°ä¸‹å›¾ç•Œé¢ï¼Œä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œè¿æ¥æˆåŠŸã€‚</p><p><img src="https://i.loli.net/2020/06/18/PdvjVaQBgJfDMyU.png" alt="è¿æ¥æˆåŠŸ"></p><p>ä¸ºäº†æµ‹è¯•è¿æ¥çš„æ­£ç¡®æ€§ï¼Œè¿™é‡Œè¿›è¡Œäº†setæµ‹è¯•ï¼Œæµ‹è¯•è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><p><img src="https://i.loli.net/2020/06/18/cvUWfiwxVKg7CJz.png" alt="Setæ“ä½œ"></p><p>åœ¨å‘é€setè¯·æ±‚åï¼Œå¯ä»¥å¾—åˆ°Mib Browserè¿”å›çš„Setå“åº”ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="https://i.loli.net/2020/06/18/syIhcSJEjL6nN4G.png" alt="Setå“åº”"></p><p>ç„¶åæˆ‘ä»¬æ‰“å¼€enspä¸­ï¼Œmibæ‰€ç®¡ç†çš„è®¾å¤‡å¯ä»¥çœ‹åˆ°ï¼Œsetè®¾ç½®æˆåŠŸã€‚</p><p><img src="https://i.loli.net/2020/06/18/MmzUascDEPCFv1W.png" alt="Setç»“æœ"></p><h4 id="4-3-1-3-SNMPv1æŠ¥æ–‡åˆ†æ"><a href="#4-3-1-3-SNMPv1æŠ¥æ–‡åˆ†æ" class="headerlink" title="4.3.1.3 SNMPv1æŠ¥æ–‡åˆ†æ"></a>4.3.1.3 SNMPv1æŠ¥æ–‡åˆ†æ</h4><ul><li><p>æŠ¥æ–‡äº¤äº’è¿‡ç¨‹</p><p>SNMP æŠ¥æ–‡åœ¨ç®¡ç†ç«™å’Œä»£ç†ä¹‹é—´ä¼ é€ã€‚ </p><p>ç®¡ç†ç«™ä¸»åŠ¨å‘å‡º GetRequestã€GetNextRequest å’Œ SetRequest ç±»å‹çš„æŠ¥æ–‡ï¼Œä»£ç†ä»¥ GetResponse æŠ¥æ–‡å“åº”ã€‚ </p><p>ä»£ç†åˆ™ä¸»åŠ¨å‘å‡º Trap æŠ¥æ–‡ç»™ç®¡ç†ç«™ï¼Œä¸éœ€è¦åº”ç­”ã€‚ </p><p>ä¸€èˆ¬æ¥è¯´ï¼Œç®¡ç†ç«™å¯è¿ç»­å‘å‡ºå¤šä¸ªè¯·æ±‚æŠ¥æ–‡ï¼Œç„¶åç­‰å¾…ä»£ç†è¿”å›åº”ç­”æŠ¥æ–‡ã€‚å¦‚æœåœ¨è§„å®šçš„æ—¶</p><p>é—´å†…æ”¶åˆ°åº”ç­”ï¼Œåˆ™æŒ‰ç…§è¯·æ±‚æ ‡è¯†è¿›è¡Œé…å¯¹ã€‚</p></li></ul><p><img src="https://i.loli.net/2020/06/18/KueRqPD7r3NIOyv.png" alt="image-20200617230804937"></p><p>æŠ¥æ–‡è§£ç åˆ†æ</p><p>ç”¨ASN.lè¡¨ç¤ºçš„å˜é‡å¿…é¡»è½¬æ¢ä¸ºä¸²è¡Œçš„å­—èŠ‚æµæ‰èƒ½åœ¨ç½‘ç»œä¸­ä¼ è¾“ï¼Œè½¬æ¢ç”¨ASN.læè¿°çš„æ•°æ®æœºè¯»ä»£</p><p>ç çš„ç®—æ³•æœ‰å¤šç§ï¼Œä¸€èˆ¬ä½¿ç”¨åŸºæœ¬ç¼–ç è§„åˆ™BERï¼ŒBERåœ¨ISO 8825/Xæ ‡å‡†ä¸­è¿›è¡Œäº†å®šä¹‰ã€‚</p><p>SNMP çš„æŠ¥æ–‡æ˜¯ç”¨ BER æ–¹å¼ç¼–ç çš„ BER ç¼–ç åç”Ÿæˆçš„ç»“æ„ä¸ºç±»å‹-é•¿åº¦-å€¼ä¸‰å…ƒç»„ï¼Œ ç®€ç§° </p><p>TLVï¼ˆType, Length, Valueï¼‰ï¼ŒTLV æ¯ä¸ªåŸŸéƒ½æ˜¯ä¸€ç³»åˆ—å…«ä½ç»„ï¼ŒT å­—æ®µè¡¨è¾¾æ•° æ®çš„ç±»å‹ä¿¡æ¯ï¼ŒL å­—</p><p>æ®µæ˜¯å€¼çš„é•¿åº¦ï¼ŒV å­—æ®µåŒ…å«å®é™…çš„æ•°æ®ï¼Œå€¼éƒ¨åˆ†è¿˜å¯ä»¥é€’å½’åœ°å†ç¼–ç ä¸º TLV ç»“æ„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://i.loli.net/2020/06/18/qRjzYCBQXe4a7fS.png" alt="image-20200617231028312"></p><p>ä¸åŒSNMPæŠ¥æ–‡å…·æœ‰ä¸åŒçš„PDUæ ¼å¼ï¼Œæ¥ä¸‹æ¥ç»™å‡ºå„PDUçš„æ ¼å¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://i.loli.net/2020/06/18/6aceNMUOxVp54Eb.png" alt="image-20200617231051639"></p><ul><li>set </li></ul><p><img src="https://i.loli.net/2020/06/18/638eWfmHNg1CcG7.png" alt="img"></p><p>åˆ†æå¦‚ä¸‹è¡¨ï¼š</p><table><thead><tr><th>åå…­è¿›åˆ¶æ•°æ®</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>30</td><td>T  è¡¨ç¤º SEQUENCEç±»å‹ï¼ˆå³SNMPæŠ¥æ–‡æ•´ä½“ä¸ºSEQUENCEç±»å‹ï¼‰</td></tr><tr><td>33</td><td>L  è¡¨ç¤º åé¢æ€»å…±æœ‰3*16+3= 51 ä¸ªå­—èŠ‚çš„å†…å®¹</td></tr><tr><td>02 01 00</td><td>T L V  intå‹é•¿åº¦ä¸º1 ï¼Œå€¼ä¸º0ã€‚å¯¹åº”åˆ°SNMPv1ä¸­å¯çŸ¥ï¼Œè¿™é‡Œæ˜¯ä»£è¡¨versionä¸º1</td></tr><tr><td>04 07 70 72 69 76 61 74 65</td><td>TLV : OCTETSTRING 7 priavteã€‚å¯¹åº”å†™å›¢ä½“å­—private</td></tr><tr><td>A3 25</td><td>T L : PDU Type â€“set (PDUçš„ typeä¸º Set(3), 38å­—èŠ‚)</td></tr><tr><td>02 01 04</td><td>T L Vï¼šintå‹é•¿åº¦ä¸º1 ï¼Œå€¼ä¸º4ï¼Œä»£è¡¨Request idä¸º 4</td></tr><tr><td>02 01 00</td><td>T L Vï¼šintå‹é•¿åº¦ä¸º1 ï¼Œå€¼ä¸º0ï¼Œä»£è¡¨Error ststus 0</td></tr><tr><td>02 01 00</td><td>T L Vï¼šintå‹é•¿åº¦ä¸º1 ï¼Œå€¼ä¸º0ï¼Œä»£è¡¨Error index 0</td></tr><tr><td>30 1A</td><td>T L SEQUENCE 26å­—èŠ‚ (ä»£è¡¨Variable bindings )</td></tr><tr><td>30 18</td><td>T L SEQUENCE 24å­—èŠ‚</td></tr><tr><td>06 08 2B 06 01 02 01 01 05 00</td><td>T L Vï¼šObjectID 1.3.4.1.2.1.1.5.0</td></tr><tr><td>04 0C 53 4E 4D 50 5F 43 6F 6E 74 6F 72 6C</td><td>T L V : OCTET STRING SNMP_Contorl</td></tr></tbody></table><ul><li><p>Setâ€”response</p><p><img src="https://i.loli.net/2020/06/18/PFB2OGcXAu79LQx.png" alt="image-20200618004937128"></p><table><thead><tr><th>åå…­è¿›åˆ¶æ•°æ®</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>30</td><td>T  è¡¨ç¤º SEQUENCEç±»å‹ï¼ˆå³SNMPæŠ¥æ–‡æ•´ä½“ä¸ºSEQUENCEç±»å‹ï¼‰</td></tr><tr><td>33</td><td>L  è¡¨ç¤º åé¢æ€»å…±æœ‰3*16+3= 51 ä¸ªå­—èŠ‚çš„å†…å®¹</td></tr><tr><td>02 01 00</td><td>T L V  intå‹é•¿åº¦ä¸º1 ï¼Œå€¼ä¸º0ã€‚å¯¹åº”åˆ°SNMPv1ä¸­å¯çŸ¥ï¼Œè¿™é‡Œæ˜¯ä»£è¡¨versionä¸º1</td></tr><tr><td>04 07 70 72 69 76 61 74 65</td><td>TLV : OCTETSTRING 7 priavteã€‚å¯¹åº”å†™å›¢ä½“å­—private</td></tr><tr><td>A2 25</td><td>T L : PDU Type â€“set-response (PDUçš„ typeä¸º Set(2), 38å­—èŠ‚)</td></tr><tr><td>02 01 04</td><td>T L Vï¼šintå‹é•¿åº¦ä¸º1 ï¼Œå€¼ä¸º4ï¼Œä»£è¡¨Request idä¸º 4</td></tr><tr><td>02 01 00</td><td>T L Vï¼šintå‹é•¿åº¦ä¸º1 ï¼Œå€¼ä¸º0ï¼Œä»£è¡¨Error ststus 0</td></tr><tr><td>02 01 00</td><td>T L Vï¼šintå‹é•¿åº¦ä¸º1 ï¼Œå€¼ä¸º0ï¼Œä»£è¡¨Error index 0</td></tr><tr><td>30 1A</td><td>T L SEQUENCE 26å­—èŠ‚ (ä»£è¡¨Variable bindings )</td></tr><tr><td>30 18</td><td>T L SEQUENCE 24å­—èŠ‚</td></tr><tr><td>06 08 2B 06 01 02 01 01 05 00</td><td>T L Vï¼šObjectID 1.3.4.1.2.1.1.5.0</td></tr><tr><td>04 0C 53 4E 4D 50 5F 43 6F 6E 74 6F 72 6C</td><td>T L V : OCTET STRING SNMP_Contorl</td></tr></tbody></table></li></ul><h1 id="äº”ã€æ€»ç»“"><a href="#äº”ã€æ€»ç»“" class="headerlink" title="äº”ã€æ€»ç»“"></a>äº”ã€æ€»ç»“</h1><p>é€šè¿‡è¿™æ¬¡è¯¾ç¨‹è®¾è®¡ä½¿æˆ‘å……åˆ†çš„ç†è§£å’Œè¿ç”¨äº†ç½‘ç»œè§„åˆ’ã€é…ç½®ä¸ç»´æŠ¤çš„ç›¸å…³çŸ¥è¯†ï¼Œç‰¹åˆ«æ˜¯å¯¹ç½‘ç»œå</p><p>è®®çš„é…ç½®æœ‰äº†ææ·±çš„äº†è§£ï¼Œå­¦ä¼šäº†ç»¼åˆæ€§çš„çœ‹å¾…é—®é¢˜ä¸è§£å†³ç½‘ç»œè§„åˆ’è®¾è®¡é—®é¢˜ã€‚</p><p>é€šè¿‡ä¸€å‘¨æ¥çš„å­¦ä¹ ï¼Œæˆ‘å­¦åˆ°äº†ä¸å°‘çš„çŸ¥è¯†ï¼å­¦åˆ°äº†å¦‚ä½•å°†è¯¾ç¨‹ä¸­å­¦åˆ°çš„é›¶é›¶æ•£æ•£çš„çŸ¥è¯†ã€åè®®æ±‡</p><p>æ€»èµ·æ¥ï¼Œä¹Ÿæ·±åˆ»ä½“ä¼šåˆ°ç½‘ç»œæ‹“æ‰‘è®¾è®¡å’Œåè®®çš„åˆç†é…ç½®å¯¹äºä¸€ä¸ªç½‘ç»œæ˜¯å¦å®Œå–„ã€å¥å£®èµ·ç€å†³å®šæ€§</p><p>ä½œç”¨ã€‚åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­æœ‰å¤±è´¥ï¼Œä¹Ÿæœ‰å›°æƒ‘ï¼Œæœ‰æˆåŠŸï¼Œä¹Ÿæœ‰å–œæ‚¦ã€‚è™½ç„¶åªæ˜¯è¯¾ç¨‹è®¾è®¡ï¼Œä½†æˆ‘æ‹¿å‡ºäº†</p><p>è‡ªå·±çš„å…¨éƒ¨ç²¾åŠ›å»å¯¹å¾…ï¼Œèƒ½å­¦åˆ°çŸ¥è¯†å›ºç„¶å€¼å¾—éª„å‚²ï¼Œèƒ½è®¤è¯†åˆ°è‡ªå·±çš„è¿‡é”™å’Œä¸è¶³ä¹Ÿæ˜¯ä¸€ä»¶å¹¸äº‹ï¼Œ</p><p>æˆ‘æƒ³è¿™å°±æ˜¯æˆ‘å­¦ä¹ è¿™é—¨è¯¾çš„æœ€å¤§æ„Ÿå—å§ã€‚</p><p>ç”±äºæœ¬äººç²¾åŠ›å’Œæ—¶é—´æœ‰é™ï¼Œæœ¬è¯¾ç¨‹è®¾è®¡ä¸­æˆ–å¤šæˆ–å°‘ä¼šå­˜åœ¨ä¸€äº›ç¼ºç‚¹ï¼Œæ‰€è®¾è®¡çš„ç½‘ç»œéš¾å…å­˜åœ¨ä¸€äº›</p><p>ä¸è¶³ï¼Œè¿˜æ³è¯·å„ä½è€å¸ˆå’ŒåŒå­¦ç»™ä¸æ‰¹è¯„å’ŒæŒ‡æ­£ã€‚</p><p>æœ€åï¼Œæ„Ÿè°¢æˆ‘é‚£åšå¼ºä¸”é¥±å—VMare Workstationã€enspæ‘§æ®‹çš„ç¬”è®°æœ¬ï¼Œæ„Ÿè°¢å…¨åŠ›ç‡ƒçƒ§çš„CPUå’Œè¿‘</p><p>ä¹æ‹‰æ»¡çš„å†…å­˜ã€‚æ„Ÿè°¢é«˜æŠ¬è´µæ‰‹ã€‚</p><hr><p><a href="https://www.bilibili.com/video/BV1Wa4y1Y7ET/" target="_blank" rel="noopener">é™„æ¼”ç¤ºè§†é¢‘</a></p><p>==æœ¬æ¬¡è¯¾è®¾ç”±å½­æ™¨å¸Œã€ä¸ç£Šã€ææ¾æŸå…±åŒå®Œæˆã€‚==</p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå·¥ç¨‹è®¾è®¡ </category>
          
          <category> è¯¾ç¨‹è®¾è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå·¥ç¨‹è®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ubuntu-20.04-mate-for-server</title>
      <link href="/2020/06/16/ubuntu-20-04-mate-for-server/"/>
      <url>/2020/06/16/ubuntu-20-04-mate-for-server/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€æ¢æº"><a href="#ä¸€ã€æ¢æº" class="headerlink" title="ä¸€ã€æ¢æº"></a>ä¸€ã€æ¢æº</h1><p>åœ¨è®¾ç½®ä¸­é€‰æ‹©ç³»ç»Ÿè®¾ç½®ï¼Œæ‰¾åˆ°Software Updaterï¼Œç‚¹å‡»è¿›å…¥ï¼Œå†ç‚¹å‡»SettingsæŒ‰é’®ï¼Œ</p><p><img src="https://i.loli.net/2020/06/16/T2oMNG86Xr5wILW.png" alt="image-20200616092916772"></p><p><img src="https://i.loli.net/2020/06/16/8OU6e1VxjuyDHm7.png" alt="image-20200616093031282"></p><p><img src="https://i.loli.net/2020/06/16/qAn1YptUaRHFrLP.png" alt="image-20200616093227130"></p><p><img src="https://i.loli.net/2020/06/16/Y4IUR98sBaWo5Su.png" alt="image-20200616093307249"></p><p>é€‰æ‹©Reloadé‡æ–°åŠ è½½æºã€‚</p><p>åœ¨ç»ˆç«¯è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get upgrade</span><br></pre></td></tr></table></figure><p>æ›´æ–°æºå’Œè½¯ä»¶ã€‚</p><h1 id="äºŒã€ä¸ºenspæ­å»ºå„ç§æœåŠ¡å™¨"><a href="#äºŒã€ä¸ºenspæ­å»ºå„ç§æœåŠ¡å™¨" class="headerlink" title="äºŒã€ä¸ºenspæ­å»ºå„ç§æœåŠ¡å™¨"></a>äºŒã€ä¸ºenspæ­å»ºå„ç§æœåŠ¡å™¨</h1><h2 id="2-1å‡†å¤‡å·¥ä½œ"><a href="#2-1å‡†å¤‡å·¥ä½œ" class="headerlink" title="2.1å‡†å¤‡å·¥ä½œ"></a>2.1å‡†å¤‡å·¥ä½œ</h2><p><strong>å…³é—­é˜²ç«å¢™ï¼Œæµ‹è¯•ç½‘è·¯è¿é€šæ€§ã€‚</strong></p><a id="more"></a><p>å…³é—­å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw <span class="built_in">disable</span> //å…³é—­é˜²ç«å¢™</span><br><span class="line">sudo ufw status  //æŸ¥çœ‹é˜²æŠ¤å¢™çŠ¶æ€</span><br></pre></td></tr></table></figure><p>winä¹Ÿéœ€è¦å…³é—­é˜²æŠ¤å¢™ã€‚</p><p>æµ‹è¯•è¿é€šæ€§ï¼š</p><p><img src="https://i.loli.net/2020/06/16/DbQxdyCL5vPEltU.png" alt="image-20200616094011730"></p><h2 id="2-2æ­å»ºwebæœåŠ¡å™¨"><a href="#2-2æ­å»ºwebæœåŠ¡å™¨" class="headerlink" title="2.2æ­å»ºwebæœåŠ¡å™¨"></a>2.2æ­å»ºwebæœåŠ¡å™¨</h2><p><strong>å®‰è£…nginxæœåŠ¡å™¨</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nginx</span><br></pre></td></tr></table></figure><p><strong>è°ƒæ•´é˜²ç«å¢™</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw app list</span><br><span class="line">  CUPS</span><br><span class="line">  Nginx Full</span><br><span class="line">  Nginx HTTP</span><br><span class="line">  Nginx HTTPS</span><br></pre></td></tr></table></figure><p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼ŒNginxæœ‰ä¸‰ä¸ªé…ç½®æ–‡ä»¶å¯ç”¨ï¼šNginx Fullã€Nginx HTTPã€Nginx HTTPS</p><p>Nginx Full ï¼šæ­¤é…ç½®æ–‡ä»¶æ‰“å¼€ç«¯å£80ï¼ˆæ­£å¸¸ï¼ŒæœªåŠ å¯†çš„ç½‘ç»œæµé‡ï¼‰å’Œç«¯å£443ï¼ˆTLS / SSLåŠ å¯†æµé‡ï¼‰</p><p>Nginx HTTP ï¼šæ­¤é…ç½®æ–‡ä»¶ä»…æ‰“å¼€ç«¯å£80ï¼ˆæ­£å¸¸ï¼ŒæœªåŠ å¯†çš„ç½‘ç»œæµé‡ï¼‰</p><p>Nginx HTTPS ï¼šæ­¤é…ç½®æ–‡ä»¶ä»…æ‰“å¼€ç«¯å£443ï¼ˆTLS / SSLåŠ å¯†æµé‡ï¼‰</p><p>è¾“å…¥ä»¥ä¸‹å‘½ä»¤ä»¥æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw status</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°å…è®¸é€šè¿‡çš„æœåŠ¡æœ‰å“ªäº›ï¼š</p><p><img src="https://i.loli.net/2020/06/16/NhQq761kTlcia8e.png" alt="image-20200616154638847"></p><p>Ubuntu 20.04ä¸Šçš„Nginxé»˜è®¤å¯ç”¨äº†ä¸€ä¸ªæœåŠ¡å™¨æ¨¡å—ï¼Œè¯¥æ¨¡å—è¢«é…ç½®ä¸ºåœ¨<code>/var/www/html</code>ç›®å½•ä¸‹æä¾›æ–‡æ¡£ã€‚å°†å†™å¥½çš„é¡¹ç›®å¤åˆ¶è‡³/var/www/htmlç›®å½•ä¸‹ã€‚</p><p>æµ‹è¯•ï¼šåœ¨æµè§ˆå™¨ä¸­è¾“å…¥<a href="http://192.168.10.121" target="_blank" rel="noopener">http://192.168.10.121</a></p><p><img src="https://i.loli.net/2020/06/16/3Ice8vWAhPpoCO2.png" alt="image-20200616154344810"></p><h2 id="2-3FTPæœåŠ¡å™¨"><a href="#2-3FTPæœåŠ¡å™¨" class="headerlink" title="2.3FTPæœåŠ¡å™¨"></a>2.3FTPæœåŠ¡å™¨</h2><p>æœåŠ¡ä¸ºwin10æä¾›ï¼ŒæœåŠ¡ç«¯é…ç½®ï¼š</p><p><img src="https://i.loli.net/2020/06/16/eYyRwafv29LzCFJ.png" alt="image-20200616155309043"></p><p>enspä¸­è¿æ¥å¦‚ä¸‹ï¼š</p><p><img src="https://i.loli.net/2020/06/16/7bMz1ApBlfdSEHc.png" alt="image-20200616155420223"></p><h2 id="2-4telnet"><a href="#2-4telnet" class="headerlink" title="2.4telnet"></a>2.4telnet</h2><p><img src="https://i.loli.net/2020/06/16/pVEIn3TKQflMb7J.png" alt="image-20200616160734107"></p><p>è²Œä¼¼å·²ç»ä¸æ”¯æŒäº†ï¼Œåœ¨enspä¸­æœ‰è®¾ç½®ã€‚</p><h2 id="2-5SSHå®‰è£…é…ç½®"><a href="#2-5SSHå®‰è£…é…ç½®" class="headerlink" title="2.5SSHå®‰è£…é…ç½®"></a>2.5SSHå®‰è£…é…ç½®</h2><p> <strong>ä½¿ç”¨aptå·¥å…·ä¸‹è½½å¹¶å®‰è£…openssh-server</strong></p><p>è¾“å…¥å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install openssh-server</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/06/16/RCn267brXeU4lEv.png" alt="image-20200616161058823"></p><p>ç­‰å¾…å®‰è£…ç»“æŸå³å¯ã€‚ç„¶åå†æ¬¡æŸ¥çœ‹æœåŠ¡æœ‰æ²¡æœ‰å¯åŠ¨ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ps -e | grep ssh</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://i.loli.net/2020/06/16/io7a8QJWSdN2kOj.png" alt="image-20200616161259612"></p><p>å†æ¬¡ç¡®è®¤æˆ–è€…æ²¡æœ‰å›¾ä¸­çš„ç»“æœï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥å¯åŠ¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/ssh status</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/06/16/LwJMf76dZ4t8DyC.png" alt="image-20200616161426284"></p><p>sshæœåŠ¡ç«¯å·²ç»å¼€å¯ï¼Œåœ¨xshellä¸­è¿›è¡Œè¿œç¨‹ç™»é™†æµ‹è¯•ã€‚</p><p><img src="https://i.loli.net/2020/06/16/8BZLinq6XrVH7QY.png" alt="image-20200616161545290"></p><p>åœ¨ä¸»æœºæ å¡«å…¥å¼€å¯sshæœåŠ¡ç«¯çš„ä¸»æœºipï¼Œç‚¹å‡»ç¡®å®šè¿›å…¥å¦‚ä¸‹ç•Œé¢ï¼š</p><p><img src="https://i.loli.net/2020/06/16/kxpV1fbLr6HdZcm.png" alt="image-20200616161709692"></p><p>è¿™æ˜¯å¯†é’¥å’Œç®—æ³•åå•†é˜¶æ®µï¼š</p><p>å®¢æˆ·è¯·æ±‚è¿æ¥-æœåŠ¡å™¨å°†å¯¹åº”å…¬é’¥ã€ç”Ÿæˆä¼šè¯IDå‘ç»™å®¢æˆ·ç«¯ã€å®¢æˆ·ç«¯ç”Ÿæˆä¼šè¯å¯†é’¥ï¼Œå¹¶å°†ä¼šè¯å¯†é’¥ä¸ä¼šè¯IDè¿›è¡Œxoré€»è¾‘è¿ç®—åçš„å€¼ï¼Œä½¿ç”¨æœåŠ¡å™¨å…¬é’¥åŠ å¯†å‘é€ç»™æœåŠ¡å™¨ã€æœåŠ¡å™¨é‡‡ç”¨ç§é’¥è§£å¯†åï¼Œé€šè¿‡xorè¿ç®—å¾—åˆ°ä¼šè¯å¯†é’¥-ä¹‹åæ‰€æœ‰ä¼ è¾“éƒ½ä¼šè¢«ä¼šè¯å¯†é’¥åŠ å¯†ä¸è§£å¯†ã€‚</p><p>ç‚¹å‡»æ¥å—å¹¶ä¿å­˜åï¼Œè¿›å…¥è®¤è¯é˜¶æ®µï¼š</p><p>passwordè®¤è¯-è¾“å…¥ç”¨æˆ·åä¸å¯†ç ï¼ŒæœåŠ¡å™¨éªŒè¯æ˜¯å¦åˆæ³•ã€‚</p><p>publickeyè®¤è¯-æ•°å­—ç­¾åè®¤è¯ï¼Œå®¢æˆ·ç«¯å‘é€ç”¨æˆ·åã€å…¬å…±å¯†é’¥ã€å…¬å…±å¯†é’¥ç®—æ³•çš„publickeyè®¤è¯è¯·æ±‚ç»™æœåŠ¡å™¨ç«¯ï¼ŒæœåŠ¡å™¨éªŒè¯æ˜¯å¦åˆæ³•ã€‚ä½¿ç”¨ssh-keygenç¨‹åºç”Ÿæˆå…¬é’¥ id_dsa.pub å’Œç§é’¥ id_dsaã€‚</p><p><img src="https://i.loli.net/2020/06/16/7YbxIvFL9Jg8psr.png" alt="image-20200616161924769"></p><p><img src="https://i.loli.net/2020/06/16/4PrdZ6DmenCAfg8.png" alt="image-20200616161949478"></p><p>è¾“å…¥æ­£ç¡®çš„ç”¨æˆ·åå¯†ç åï¼Œxshellç•Œé¢å¦‚ä¸‹ï¼š</p><p><img src="https://i.loli.net/2020/06/16/9rHSfgCceAbZLaT.png" alt="image-20200616162022133"></p><h2 id="2-6VPNæœåŠ¡å™¨ï¼ˆPPTPï¼‰"><a href="#2-6VPNæœåŠ¡å™¨ï¼ˆPPTPï¼‰" class="headerlink" title="2.6VPNæœåŠ¡å™¨ï¼ˆPPTPï¼‰"></a>2.6VPNæœåŠ¡å™¨ï¼ˆPPTPï¼‰</h2><h3 id="å®‰è£…PPTPD"><a href="#å®‰è£…PPTPD" class="headerlink" title="å®‰è£…PPTPD"></a>å®‰è£…PPTPD</h3><p>ç¬¬ä¸€æ­¥å½“ç„¶æ˜¯å®‰è£…è¿™ä¸ªè½¯ä»¶åŒ…äº†ã€‚ï¼ˆä¸‹é¢æ‰€æœ‰çš„ä»£ç ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹çš„ï¼Œæˆ‘ä¼šç‰¹åˆ«æ ‡è®°å‡ºæ¥çš„ï¼Œå…¶ä»–éƒ½è¡¨ç¤ºå¯ä»¥ç›´æ¥å¤åˆ¶ï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install pptpd</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/06/17/igebY2qfOFyJ81I.png" alt="image-20200617100516932"></p><h3 id="ç¼–è¾‘PPTPD-CONFæ–‡ä»¶"><a href="#ç¼–è¾‘PPTPD-CONFæ–‡ä»¶" class="headerlink" title="ç¼–è¾‘PPTPD.CONFæ–‡ä»¶"></a>ç¼–è¾‘PPTPD.CONFæ–‡ä»¶</h3><p>æ‰“å¼€è¿™ä¸ªæ–‡ä»¶å¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/pptpd.conf</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/06/17/IXBjQ6aAMZSmh9t.png" alt="image-20200617102931169"></p><p>localip:è¡¨ç¤ºPPTPæœåŠ¡åœ°å€åŠæœ¬æœºIPã€‚</p><p>remoteipï¼šå½“å®¢æˆ·æœºé€šè¿‡pptpè¿æ¥åˆ°vpnåæ‰€èƒ½æ‹¿åˆ°çš„ipåœ°å€èŒƒå›´ï¼Œé»˜è®¤ä»ç¬¬ä¸€ä¸ªå¼€å§‹åˆ†é…ç»™å®¢æˆ·</p><h3 id="ä¿®æ”¹CHAP-SECRETSæ–‡ä»¶ï¼Œæ·»åŠ å¯ä»¥ç™»å½•çš„ç”¨æˆ·"><a href="#ä¿®æ”¹CHAP-SECRETSæ–‡ä»¶ï¼Œæ·»åŠ å¯ä»¥ç™»å½•çš„ç”¨æˆ·" class="headerlink" title="ä¿®æ”¹CHAP-SECRETSæ–‡ä»¶ï¼Œæ·»åŠ å¯ä»¥ç™»å½•çš„ç”¨æˆ·"></a>ä¿®æ”¹CHAP-SECRETSæ–‡ä»¶ï¼Œæ·»åŠ å¯ä»¥ç™»å½•çš„ç”¨æˆ·</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/ppp/chap-secrets</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/06/17/Noq3EBz6cGMklhQ.png" alt="image-20200617101228399"></p><p>clientï¼šè¿æ¥ç”¨æˆ·å<br>serverï¼šè¿æ¥çš„æœåŠ¡<br>secretï¼šè¿æ¥å¯†ç <br>IP addressesï¼šå¯è¿æ¥çš„IPï¼Œ*è¡¨ç¤ºæ‰€æœ‰</p><h3 id="ä¿®æ”¹è¿œç¨‹è¿æ¥ç”¨æˆ·çš„DNS"><a href="#ä¿®æ”¹è¿œç¨‹è¿æ¥ç”¨æˆ·çš„DNS" class="headerlink" title="ä¿®æ”¹è¿œç¨‹è¿æ¥ç”¨æˆ·çš„DNS"></a>ä¿®æ”¹è¿œç¨‹è¿æ¥ç”¨æˆ·çš„DNS</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/ppp/pptpd-options</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/06/17/Gsk7SRaUxf6dnJX.png" alt="image-20200617101414509"></p><h3 id="å¼€å¯ç½‘ç»œè½¬å‘åŠŸèƒ½"><a href="#å¼€å¯ç½‘ç»œè½¬å‘åŠŸèƒ½" class="headerlink" title="å¼€å¯ç½‘ç»œè½¬å‘åŠŸèƒ½"></a>å¼€å¯ç½‘ç»œè½¬å‘åŠŸèƒ½</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/sysctil.conf</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/06/17/SEI5OkULVhHiyjJ.png" alt="image-20200617101751708"></p><p>å»æ‰ä¸¤è¡Œå¯¹åº”çš„æ³¨é‡Šï¼Œæä¾›ipv4å’Œipv6çš„è½¬å‘åŠŸèƒ½ã€‚</p><p>æ›´æ–°é…ç½®å‘½ä»¤å¦‚ä¸‹ï¼š</p><p><img src="https://i.loli.net/2020/06/17/MLXForGbRWD2CgK.png" alt="image-20200617102036260"></p><h3 id="é…ç½®iptables"><a href="#é…ç½®iptables" class="headerlink" title="é…ç½®iptables"></a>é…ç½®iptables</h3><p><strong>å¼€å¯greåè®®</strong></p><p>è¾“å…¥ä¸‹é¢çš„æŒ‡ä»¤ï¼Œå¼€å¯greåè®®ï¼Œå¹¶æ‰“å¼€æœåŠ¡å™¨47,1723å·ç«¯å£ã€‚</p><p>ä½¿ç”¨VPNéœ€è¦å¼€å¯greåè®®ï¼Œè€Œgreåè®®éœ€è¦ä½¿ç”¨æœåŠ¡å™¨çš„47å’Œ1723å·ç«¯å£ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo iptables -A INPUT -p gre -j ACCEPT </span><br><span class="line">sudo iptables -A INPUT -p tcp --dport 1723 -j ACCEPT   </span><br><span class="line">sudo iptables -A INPUT -p tcp --dport 47 -j ACCEPT</span><br></pre></td></tr></table></figure><p><strong>å¼€å¯NATè½¬å‘</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo iptables -t nat -A POSTROUTING -s 192.168.10.121/24 -o ens33 -j MASQUERADE</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong></p><p>ä¸Šé¢æŒ‡ä»¤ä¸­ipè¦å¡«å†™éƒ¨ç½²pptpæ­¥éª¤ä¸­ç¬¬1.2æ­¥ä¸­è®¾ç½®çš„localipï¼Œä¹Ÿå°±æ˜¯è™šæ‹Ÿvpnçš„ä¸»æœºçš„ipã€‚</p><p>ens33è¡¨ç¤ºå½“å‰æœåŠ¡å™¨çš„ç½‘å¡ï¼Œè¿™é‡Œä¸åŒæœºå™¨å¯èƒ½ä¸ä¸€æ ·ï¼Œå¯ä»¥é€šè¿‡ifconfigæŒ‡ä»¤è¿›è¡ŒæŸ¥è¯¢ï¼Œä¹‹åä¿®æ”¹æˆå¯¹åº”çš„è®¾å¤‡åç§°å³å¯ã€‚<br>POSTROUTINGå‚æ•°è¡¨ç¤ºï¼ŒæŒ‡å®šå½“æ•°æ®åŒ…ç¦»å¼€æœåŠ¡å™¨çš„æ—¶å€™ï¼Œå¯¹æ•°æ®åŒ…è¿›è¡Œå¤„ç†ã€‚<br>MASQUERADEè¿™ä¸ªå‚æ•°çš„æ„æ€å°±æ˜¯å³å°†ä»æœåŠ¡å™¨å°åŒ…å‡ºå»(-o)çš„é‚£å—ç½‘å¡ä¸Šçš„IPï¼Œç”±äºå®éªŒå®¤çš„æœåŠ¡å™¨æ˜¯å›ºå®šipï¼Œæ‰€ä»¥è¿™é‡Œä¿®æ”¹æˆæœåŠ¡å™¨çš„è™šæ‹Ÿipä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p><p>é€šè¿‡ä¸Šé¢çš„æŒ‡ä»¤ï¼Œiptablesåšäº†è¿™æ ·ä¸€ä»¶äº‹æƒ…ï¼šå°†æ‰€æœ‰ä»æœåŠ¡å™¨ä¸Šä¼ å‡ºçš„æºåœ°å€ä¸º10.1.1.1-255ä¹‹ä¸­çš„ipæ•°æ®åŒ…çš„æºipæ”¹æˆæœåŠ¡å™¨çš„ipã€‚å¦‚æœä¸åšè¿™ä¸ªæ“ä½œï¼ŒæœåŠ¡å™¨é€šè¿‡VPNä¼ å›çš„æ•°æ®åŒ…å°†ä¸åŒ…å«æœåŠ¡å™¨è‡ªå·±çš„æºipï¼Œæ‰€ä»¥è¿œç¨‹è®¿é—®ä¸»æœºçš„å›å¤ipåŒ…ä¼šä¸¢å¤±ã€‚</p><h3 id="é‡å¯PPTPæœåŠ¡å¹¶æŸ¥çœ‹çŠ¶æ€"><a href="#é‡å¯PPTPæœåŠ¡å¹¶æŸ¥çœ‹çŠ¶æ€" class="headerlink" title="é‡å¯PPTPæœåŠ¡å¹¶æŸ¥çœ‹çŠ¶æ€"></a>é‡å¯PPTPæœåŠ¡å¹¶æŸ¥çœ‹çŠ¶æ€</h3><p><img src="https://i.loli.net/2020/06/17/2b8jyBToNMIUscR.png" alt="image-20200617103114973"></p><h3 id="é…ç½®å®¢æˆ·ç«¯ï¼Œè¿æ¥VPN"><a href="#é…ç½®å®¢æˆ·ç«¯ï¼Œè¿æ¥VPN" class="headerlink" title="é…ç½®å®¢æˆ·ç«¯ï¼Œè¿æ¥VPN"></a>é…ç½®å®¢æˆ·ç«¯ï¼Œè¿æ¥VPN</h3><p><img src="https://i.loli.net/2020/06/17/oij7bdWNUpSvr6g.png" alt="image-20200617110012250"></p><p>è¿›è¡Œè¿æ¥æµ‹è¯•</p><p><img src="https://i.loli.net/2020/06/17/2l78AzI6rQqgkSM.jpg" alt="img"></p><p>è¿æ¥æˆåŠŸä¹‹åæŸ¥çœ‹ä¸€ä¸‹è·å–åˆ°çš„IPåœ°å€</p><p><img src="https://i.loli.net/2020/06/17/Ka4FzQTliIydRk1.png" alt="image-20200617235356285"></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> ubuntu-20.04-mate </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œç®¡ç†ä¸ç»´æŠ¤å¤§ä½œä¸š</title>
      <link href="/2020/06/13/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E4%B8%8E%E7%BB%B4%E6%8A%A4%E5%A4%A7%E4%BD%9C%E4%B8%9A/"/>
      <url>/2020/06/13/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E4%B8%8E%E7%BB%B4%E6%8A%A4%E5%A4%A7%E4%BD%9C%E4%B8%9A/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€SNMPv3å·¥ä½œåŸç†"><a href="#ä¸€ã€SNMPv3å·¥ä½œåŸç†" class="headerlink" title="ä¸€ã€SNMPv3å·¥ä½œåŸç†"></a>ä¸€ã€SNMPv3å·¥ä½œåŸç†</h1><h2 id="1-1-SNMPçš„ç»„æˆ"><a href="#1-1-SNMPçš„ç»„æˆ" class="headerlink" title="1.1 SNMPçš„ç»„æˆ"></a>1.1 SNMPçš„ç»„æˆ</h2><p>â€‹        SNMPè¢«è®¾è®¡ä¸ºå·¥ä½œåœ¨TCP/IPåè®®æ—ä¸Šï¼Œé‡‡ç”¨UDPè¿›è¡Œæ•°æ®ä¼ è¾“ã€‚SNMPé‡‡ç”¨äº†Client/Serveræ¨¡å‹çš„ç‰¹æ®Šå½¢å¼ï¼šä»£ç†/ç®¡ç†ç«™æ¨¡å‹ã€‚å¯¹ç½‘ç»œçš„ç®¡ç†ä¸ç»´æŠ¤æ˜¯é€šè¿‡ç®¡ç†å·¥ä½œç«™ä¸SNMPä»£ç†é—´çš„äº¤äº’å·¥ä½œå®Œæˆçš„ã€‚æ¯ä¸ªSNMPä»ä»£ç†è´Ÿè´£å›ç­”SNMPç®¡ç†å·¥ä½œç«™ï¼ˆä¸»ä»£ç†ï¼‰å…³äºMIBå®šä¹‰ä¿¡æ¯çš„å„ç§æŸ¥è¯¢ã€‚<br>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯éœ€è¦ä¸€ä¸ªæœåŠ¡å™¨ç¨‹åºï¼ˆä»£ç†ï¼Œagentï¼‰å’Œä¸€ä¸ªå®¢æˆ·æœºï¼ˆç®¡ç†å™¨ï¼Œmanagerï¼‰ã€‚è€Œä¸ç›´è§‚ä¸Šä¸åŒçš„æ˜¯ï¼ŒSNMPçš„æœåŠ¡å™¨ç«¯ä»£è¡¨è¢«ç®¡ç†çš„äº‹ç‰©ï¼Œè€Œå®¢æˆ·æœºç«¯æ‰æ˜¯ç®¡ç†è€…ã€‚å®¢æˆ·æœºä»ç®€å•çš„å‘½ä»¤è¡Œå®ç”¨ç¨‹åºï¼Œå¦‚net-snmpæä¾›çš„snmpwalkï¼Œåˆ°ä¸“é—¨çš„ç®¡ç†è½¯ä»¶ã€å·¥ä½œç«™éƒ½æœ‰ã€‚</p><a id="more"></a><h2 id="1-2-SNMPçš„ç»„ç»‡ç»“æ„"><a href="#1-2-SNMPçš„ç»„ç»‡ç»“æ„" class="headerlink" title="1.2 SNMPçš„ç»„ç»‡ç»“æ„"></a>1.2 SNMPçš„ç»„ç»‡ç»“æ„</h2><p>â€‹        SNMPæ•°æ®ä»¥ä¸€ç§æ ‡å‡†åŒ–çš„å±‚æ¬¡ç»“æ„è¿›è¡Œå¸ƒç½®ï¼Œè¿™ç§ç»“æ„çš„å¤§éƒ¨åˆ†éƒ½ç•™ç»™å°†æ¥æ‰©å……ï¼Œè€Œç‰¹å®šå‚å•†æ·»åŠ çš„éƒ¨åˆ†åˆ™è¢«æœ¬åœ°åŒ–ä»¥é¿å…å†²çªã€‚å‘½åçš„å±‚æ¬¡ç»“æ„ç”±MIBï¼ˆManagement Information Baseï¼Œç®¡ç†ä¿¡æ¯åº“ï¼‰ç»„æˆï¼Œå®ƒæ˜¯æè¿°é€šè¿‡SNMPåè®®å¯è®¿é—®çš„æ•°æ®çš„ç»“æ„åŒ–æ–‡æœ¬æ–‡ä»¶ã€‚MIB åŒ…æ‹¬äº†å¯¹ç‰¹å®šæ•°æ®å˜é‡çš„è¯´æ˜ï¼Œæ•°æ®å˜é‡è¢«ç§°ä¸ºOIDï¼ˆObject Identifierï¼Œå¯¹è±¡æ ‡è¯†ç¬¦ï¼‰ã€‚</p><p>â€‹        SNMP å±‚æ¬¡ç»“æ„éå¸¸åƒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿã€‚ä¸è¿‡ï¼Œå®ƒæ˜¯ç”¨ç‚¹å·ï¼ˆ.ï¼‰ä½œä¸ºåˆ†éš”ç¬¦ï¼Œæ¯ä¸ªèŠ‚ç‚¹è¢«èµ‹äºˆäº†ä¸€ä¸ªæ•°å­—è€Œä¸æ˜¯åå­—ã€‚ä¸ºäº†æ˜“äºå¼•ç”¨ï¼Œè¿˜å¯ä»¥ç»™èŠ‚ç‚¹èµ‹äºˆæ–‡å­—åç§°ï¼Œä½†è¿™ç§å‘½åå…¶å®åªæ˜¯ä¸ºäº†é«˜å±‚åº”ç”¨æ–¹é¢è€Œå·²ï¼Œè€Œä¸æ˜¯å±‚æ¬¡ç»“æ„çš„ä¸€é¡¹åŠŸèƒ½ã€‚</p><h2 id="1-3-SNMPåè®®çš„ä¸€äº›æ“ä½œ"><a href="#1-3-SNMPåè®®çš„ä¸€äº›æ“ä½œ" class="headerlink" title="1.3 SNMPåè®®çš„ä¸€äº›æ“ä½œ"></a>1.3 SNMPåè®®çš„ä¸€äº›æ“ä½œ</h2><p>â€‹        åŸºæœ¬çš„SNMPåè®®æ“ä½œåªæœ‰4ç§ï¼šgetï¼ˆè·å–ï¼‰ã€get_nextï¼ˆè·å–ä¸‹ä¸€ä¸ªï¼‰ã€setï¼ˆè®¾ç½®ï¼‰å’Œtrapï¼ˆé™·é˜±ï¼‰ã€‚<br>get å’Œ set æ˜¯ä»èŠ‚ç‚¹è¯»å–æ•°æ®å’ŒæŠŠæ•°æ®å†™å…¥èŠ‚ç‚¹çš„åŸºæœ¬æ“ä½œï¼ŒèŠ‚ç‚¹ä»¥OIDæ–¹å¼è¯´æ˜ã€‚<br>get-next ç”¨äºåœ¨MIB å±‚æ¬¡ç»“æ„ä¸Šæ­¥è¿›ã€‚<br>trap æ˜¯ä»æœåŠ¡å™¨ï¼ˆä»£ç†ç¨‹åºï¼‰åˆ°å®¢æˆ·æœºï¼ˆç®¡ç†å™¨ï¼‰çš„ä¸€ä¸ªä¸»åŠ¨æä¾›çš„å¼‚æ­¥é€šçŸ¥ï¼Œåœ¨å‡ºç°ç‰¹å®šçš„äº‹æƒ…æˆ–çŠ¶æ€æ—¶ï¼Œå®ƒä¼šæŠ¥å‘Šã€‚SNMPåè®®å·²ç»å®šä¹‰äº†è‹¥å¹²æ ‡å‡†çš„trapæ“ä½œï¼Œä¾‹å¦‚â€œI have just come upâ€ï¼ˆåˆšå¯åŠ¨ï¼‰ï¼Œè¿˜æœ‰æŠ¥å‘Šç½‘ç»œé“¾è·¯æ•…éšœæˆ–å·²ä¿®å¤ï¼Œè·¯ç”±æˆ–èº«ä»½è®¤è¯ç­‰çš„trapï¼Œè¿™å–å†³äºagentç¨‹åºçš„å®ç°ã€‚</p><h2 id="1-4-SNMPv3å’Œä¹‹å‰ç‰ˆæœ¬çš„åŒºåˆ«"><a href="#1-4-SNMPv3å’Œä¹‹å‰ç‰ˆæœ¬çš„åŒºåˆ«" class="headerlink" title="1.4 SNMPv3å’Œä¹‹å‰ç‰ˆæœ¬çš„åŒºåˆ«"></a>1.4 SNMPv3å’Œä¹‹å‰ç‰ˆæœ¬çš„åŒºåˆ«</h2><p>â€‹        SNMP v3 åœ¨å‰é¢çš„ç‰ˆæœ¬ä¸Šå¢åŠ äº†å®‰å…¨èƒ½åŠ›å’Œè¿œç¨‹é…ç½®èƒ½åŠ›ï¼ŒSNMPv3ç»“æ„ä¸ºæ¶ˆæ¯å®‰å…¨å’ŒVACMï¼ˆView-based Access Control Modelï¼‰å¼•å…¥äº†USMï¼ˆUser-based Security Modelï¼‰ã€‚è¿™ä¸ªç»“æ„æ”¯æŒåŒæ—¶ä½¿ç”¨ä¸åŒçš„å®‰å…¨æœºåˆ¶ï¼Œæ¥å…¥æ§åˆ¶ï¼Œæ¶ˆæ¯å¤„ç†æ¨¡å‹ã€‚SNMP v3 ä¹Ÿå¼•å…¥ä½¿ç”¨SNMP SETå‘½ä»¤åŠ¨æ€é…ç½® SNMP agentè€Œä¸å¤±MIBå¯¹è±¡ä»£è¡¨agenté…ç½®ã€‚</p><p><strong>USMï¼ˆåŸºäºç”¨æˆ·çš„å®‰å…¨æ¨¡å‹ï¼‰</strong></p><p>â€‹        USMå¼•å…¥äº†ç”¨æˆ·åå’Œç»„çš„æ¦‚å¿µï¼Œå¯ä»¥è®¾ç½®è®¤è¯å’ŒåŠ å¯†åŠŸèƒ½ã€‚è®¤è¯ç”¨äºéªŒè¯æŠ¥æ–‡å‘é€æ–¹çš„åˆæ³•æ€§ï¼Œé¿å…éæ³•ç”¨æˆ·çš„è®¿é—®ï¼›åŠ å¯†åˆ™æ˜¯å¯¹NMSå’ŒAgentä¹‹é—´ä¼ è¾“çš„æŠ¥æ–‡è¿›è¡ŒåŠ å¯†ï¼Œä»¥å…è¢«çªƒå¬ã€‚é€šè¿‡æœ‰æ— è®¤è¯å’Œæœ‰æ— åŠ å¯†ç­‰åŠŸèƒ½ç»„åˆï¼Œå¯ä»¥ä¸ºNMSå’ŒAgentä¹‹é—´çš„é€šä¿¡æä¾›æ›´é«˜çš„å®‰å…¨æ€§ã€‚</p><p><strong>VACMï¼ˆåŸºäºè§†å›¾çš„è®¿é—®æ§åˆ¶æ¨¡å‹ï¼‰</strong></p><p>â€‹        VACMæŠ€æœ¯å®šä¹‰äº†ç»„ã€å®‰å…¨ç­‰çº§ã€ä¸Šä¸‹æ–‡ã€MIBè§†å›¾ã€è®¿é—®ç­–ç•¥äº”ä¸ªå…ƒç´ ï¼Œè¿™äº›å…ƒç´ åŒæ—¶å†³å®šç”¨æˆ·æ˜¯å¦å…·æœ‰è®¿é—®çš„æƒé™ï¼Œåªæœ‰å…·æœ‰äº†è®¿é—®æƒé™çš„ç”¨æˆ·æ‰èƒ½ç®¡ç†æ“ä½œå¯¹è±¡ã€‚åœ¨åŒä¸€ä¸ªSNMPå®ä½“ä¸Šå¯ä»¥å®šä¹‰ä¸åŒçš„ç»„ï¼Œç»„ä¸MIBè§†å›¾ç»‘å®šï¼Œç»„å†…åˆå¯ä»¥å®šä¹‰å¤šä¸ªç”¨æˆ·ã€‚å½“ä½¿ç”¨æŸä¸ªç”¨æˆ·åè¿›è¡Œè®¿é—®çš„æ—¶å€™ï¼Œåªèƒ½è®¿é—®å¯¹åº”çš„MIBè§†å›¾å®šä¹‰çš„å¯¹è±¡ã€‚</p><p>æœ‰ä¸‰ä¸ªå¯èƒ½çš„å®‰å…¨çº§åˆ«: noAuthNoPriv, authNoPriv, å’Œ authPriv.</p><p>noAuthNoPriv çº§åˆ«æŒ‡æ˜äº†æ²¡æœ‰è®¤è¯æˆ–ç§å¯†æ€§è¢«æ‰§è¡Œ. </p><p>authNoPriv çº§åˆ«æŒ‡æ˜äº†è®¤è¯è¢«æ‰§è¡Œä½†æ²¡æœ‰ç§å¯†æ€§è¢«æ‰§è¡Œ. </p><p>authPriv çº§åˆ«æŒ‡æ˜äº†è®¤è¯å’Œç§å¯†æ€§éƒ½è¢«æ‰§è¡Œ.</p><p>==authâ€”è®¤è¯ æ”¯æŒMD5 or SHA;==</p><p>==privâ€”åŠ å¯† æ”¯æŒDES or RSA;==</p><h1 id="äºŒã€è®¾è®¡æ€è·¯"><a href="#äºŒã€è®¾è®¡æ€è·¯" class="headerlink" title="äºŒã€è®¾è®¡æ€è·¯"></a>äºŒã€è®¾è®¡æ€è·¯</h1><p>â€‹        ç”±äºWin10å¯¹MIB Browserå…¼å®¹æ€§ä¸å¤ªå¥½ï¼Œæ•…åœ¨VMwareä¸‹å»ºç«‹win7è™šæ‹Ÿæœºåœ¨win7ç¯å¢ƒä¸‹è¿è¡ŒMIB Browserï¼ˆå®¢æˆ·ç«¯ç¨‹åºï¼Œmanagerï¼‰ï¼Œå†åœ¨VMwareä¸‹å»ºç«‹centos7è™šæ‹Ÿæœºè¿è¡Œnet-snmpï¼ˆæœåŠ¡ç«¯ç¨‹åºï¼Œagentï¼‰ã€‚</p><p>â€‹        ä¸¤è™šæ‹Ÿæœºå‡é‡‡ç”¨æ¡¥æ¥çš„æ–¹å¼ï¼Œå¹¶å…³é—­é˜²ç«å¢™ï¼Œä½¿å¾—ä¸¤å°æœºå™¨åœ¨åŒä¸€å­ç½‘ä¸‹ä¸”å¯è¿›è¡Œäº’ç›¸é€šè®¯ã€‚ä¸¤æœºå™¨IPåœ°å€å¦‚ä¸‹ï¼š</p><ul><li><p>win7ï¼š</p><p><img src="https://i.loli.net/2020/06/12/xYv3mJilN7dSqZo.png" alt="image-20200612221922868"></p></li><li><p>centos7ï¼š</p><p>å…³é—­é˜²ç«å¢™å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> snmpd.service</span><br></pre></td></tr></table></figure></li></ul><p>  <img src="https://i.loli.net/2020/06/12/VjPTAF2kwQLhRHX.png" alt="image-20200612222021007"></p><ul><li><p>äº’é€šæµ‹è¯•ï¼š</p><p><img src="https://i.loli.net/2020/06/12/43TOLNb7sMaVXQ1.png" alt="image-20200612234549339"></p><p><img src="https://i.loli.net/2020/06/12/CzxNwh1sI4v2iOV.png" alt="image-20200612234637804"></p></li></ul><h1 id="ä¸‰ã€ç½‘ç»œæ‹“æ‰‘ç»“æ„"><a href="#ä¸‰ã€ç½‘ç»œæ‹“æ‰‘ç»“æ„" class="headerlink" title="ä¸‰ã€ç½‘ç»œæ‹“æ‰‘ç»“æ„"></a>ä¸‰ã€ç½‘ç»œæ‹“æ‰‘ç»“æ„</h1><p><img src="https://i.loli.net/2020/06/13/BhEaH3PyYUjMISX.png" alt="image-20200613002337094"></p><h1 id="å››ã€å®éªŒè¿‡ç¨‹"><a href="#å››ã€å®éªŒè¿‡ç¨‹" class="headerlink" title="å››ã€å®éªŒè¿‡ç¨‹"></a>å››ã€å®éªŒè¿‡ç¨‹</h1><h2 id="4-1Centos7-Agent-ï¼š"><a href="#4-1Centos7-Agent-ï¼š" class="headerlink" title="4.1Centos7(Agent)ï¼š"></a>4.1Centos7(Agent)ï¼š</h2><h3 id="4-1-1ä¸‹è½½å®‰è£…net-snmp"><a href="#4-1-1ä¸‹è½½å®‰è£…net-snmp" class="headerlink" title="4.1.1ä¸‹è½½å®‰è£…net-snmp"></a>4.1.1ä¸‹è½½å®‰è£…net-snmp</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lcx@localhost ~]$ sudo yum install -y net-snmp net-snmp-utils</span><br><span class="line">lcx@localhost ~]$ snmpd -v</span><br><span class="line">NET-SNMP version:  5.7.2</span><br><span class="line">Web:               http://www.net-snmp.org/</span><br><span class="line">Email:             net-snmp-coders@lists.sourceforge.net</span><br></pre></td></tr></table></figure><h3 id="4-1-2é…ç½®SNMPv3ç”¨æˆ·"><a href="#4-1-2é…ç½®SNMPv3ç”¨æˆ·" class="headerlink" title="4.1.2é…ç½®SNMPv3ç”¨æˆ·"></a>4.1.2é…ç½®SNMPv3ç”¨æˆ·</h3><p>åœ¨é…ç½®v3ç”¨æˆ·å‰ï¼Œéœ€è¦åœç”¨snmpçš„æœåŠ¡ï¼Œå…·ä½“é…ç½®å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æœªåœæ­¢snmpæœåŠ¡ï¼Œæ— æ³•åˆ›å»ºsnmpv3ç”¨æˆ·</span></span><br><span class="line">lcx@localhost ~]$ net-snmp-create-v3-user </span><br><span class="line">Apparently at least one snmpd demon is already running.</span><br><span class="line">You must stop them <span class="keyword">in</span> order to use this <span class="built_in">command</span>.</span><br><span class="line">[lcx@localhost ~]$ service snmpd stop </span><br><span class="line">Stopping snmpd (via systemctl):                            [  ç¡®å®š  ]</span><br><span class="line">[lcx@localhost ~]$ service snmpd status </span><br><span class="line">â— snmpd.service - Simple Network Management Protocol (SNMP) Daemon.</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/snmpd.service; disabled; vendor preset: disabled)</span><br><span class="line">   Active: inactive (dead)</span><br><span class="line"></span><br><span class="line">6æœˆ 12 17:09:38 localhost.localdomain systemd[1]: Started Simple Network Man...</span><br><span class="line">6æœˆ 13 08:57:25 localhost.localdomain systemd[1]: Stopped Simple Network Man...</span><br><span class="line">Hint: Some lines were ellipsized, use -l to show <span class="keyword">in</span> full.</span><br><span class="line"><span class="comment">#åˆ›å»ºåä¸ºlcxçš„snmpv3ç”¨æˆ·</span></span><br><span class="line">[lcx@localhost ~]$ sudo net-snmp-create-v3-user </span><br><span class="line">[sudo] lcx çš„å¯†ç ï¼š</span><br><span class="line">Enter a SNMPv3 user name to create: </span><br><span class="line">lcx </span><br><span class="line">Enter authentication pass-phrase: </span><br><span class="line">auth-password</span><br><span class="line">Enter encryption pass-phrase: </span><br><span class="line">  [press <span class="built_in">return</span> to reuse the authentication pass-phrase]</span><br><span class="line">encrypt-password</span><br><span class="line">adding the following line to /var/lib/net-snmp/snmpd.conf:</span><br><span class="line">   createUser lcx MD5 <span class="string">"auth-password"</span> DES encrypt-password</span><br><span class="line">adding the following line to /etc/snmp/snmpd.conf:</span><br><span class="line">   rwuser lcx</span><br><span class="line">[lcx@localhost ~]$</span><br></pre></td></tr></table></figure><p>â€‹        æˆ‘åˆ›å»ºäº†ä¸€ä¸ªåå«<strong>lcx</strong>çš„SNMPv3ç”¨æˆ·ï¼Œä½¿ç”¨<strong>MD5</strong>è¿›è¡Œè®¤è¯ä»¥åŠä½¿ç”¨<strong>DES</strong>è¿›è¡ŒåŠ å¯†ï¼Œ<strong>auth-password</strong>ä½œä¸ºè®¤è¯å¯†ç ï¼Œ<strong>encrypt-password</strong>ä½œä¸ºåŠ å¯†å¯†ç ã€‚</p><p>åœ¨é…ç½®æ–‡ä»¶ä¸­æŸ¥çœ‹SNMPv3ç”¨æˆ·æ˜¯å¦æ·»åŠ æˆåŠŸã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[lcx@localhost ~]$ sudo vim /etc/snmp/snmpd.conf </span><br><span class="line">[sudo] lcx çš„å¯†ç ï¼š</span><br><span class="line">[lcx@localhost ~]$</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/06/13/GMpf3VkDznSZo2E.png" alt="image-20200613150210380"></p><p>å¯åœ¨é…ç½®æ–‡ä»¶ä¸­æŸ¥çœ‹åˆ°æ·»åŠ çš„v3ç”¨æˆ·ã€‚</p><h3 id="4-1-3éªŒè¯æœåŠ¡"><a href="#4-1-3éªŒè¯æœåŠ¡" class="headerlink" title="4.1.3éªŒè¯æœåŠ¡"></a>4.1.3éªŒè¯æœåŠ¡</h3><p>snmpwalkå‘½ä»¤ç”¨æ³•ï¼š</p><table><thead><tr><th>-v 1|2c|3</th><th>specifies SNMP version to use</th></tr></thead><tbody><tr><td>-u USER-NAME</td><td>set security name (e.g. bert)</td></tr><tr><td>-l LEVEL</td><td>set security level (noAuthNoPriv|authNoPriv|authPriv)</td></tr><tr><td>-a PROTOCOL</td><td>set authentication protocol (MD5|SHA)</td></tr><tr><td>-A PASSPHRASE</td><td>set authentication protocol pass phrase</td></tr><tr><td>-x PROTOCOL</td><td>set privacy protocol (DES|AES)</td></tr><tr><td>-X PASSPHRASE</td><td>set privacy protocol pass phrase</td></tr><tr><td>-c COMMUNITY</td><td>set the community string (v1/v2cç‰ˆæœ¬)</td></tr></tbody></table><p>åœ¨éªŒè¯å‰ï¼Œéœ€å¼€å¯snmpæœåŠ¡ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[lcx@localhost ~]$  service snmpd start </span><br><span class="line">Starting snmpd (via systemctl):                            [  ç¡®å®š  ]</span><br><span class="line">[lcx@localhost ~]$ service snmpd status </span><br><span class="line">â— snmpd.service - Simple Network Management Protocol (SNMP) Daemon.</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/snmpd.service; disabled; vendor preset: disabled)</span><br><span class="line">   Active: active (running) since å…­ 2020-06-13 09:13:40 CST; 6s ago</span><br><span class="line"> Main PID: 66998 (snmpd)</span><br><span class="line">    Tasks: 1</span><br><span class="line">   Memory: 4.3M</span><br><span class="line">   CGroup: /system.slice/snmpd.service</span><br><span class="line">           â””â”€66998 /usr/sbin/snmpd -LS0-6d -f</span><br><span class="line"></span><br><span class="line">6æœˆ 13 09:13:40 localhost.localdomain systemd[1]: Starting Simple Network Ma...</span><br><span class="line">6æœˆ 13 09:13:40 localhost.localdomain snmpd[66998]: NET-SNMP version 5.7.2</span><br><span class="line">6æœˆ 13 09:13:40 localhost.localdomain systemd[1]: Started Simple Network Man...</span><br><span class="line">Hint: Some lines were ellipsized, use -l to show <span class="keyword">in</span> full.</span><br><span class="line">[lcx@localhost ~]$</span><br></pre></td></tr></table></figure><p>åœ¨æ­¤ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡ŒéªŒè¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br></pre></td><td class="code"><pre><span class="line">[lcx@localhost ~]$ snmpwalk -v 3 -u lcx -a MD5 -A auth-password -l authPriv -x DES -X encrypt-password localhost</span><br><span class="line">SNMPv2-MIB::sysDescr.0 = STRING: Linux localhost.localdomain 3.10.0-1062.12.1.el7.x86_64 <span class="comment">#1 SMP Tue Feb 4 23:02:59 UTC 2020 x86_64</span></span><br><span class="line">SNMPv2-MIB::sysObjectID.0 = OID: NET-SNMP-MIB::netSnmpAgentOIDs.10</span><br><span class="line">DISMAN-EVENT-MIB::sysUpTimeInstance = Timeticks: (15262) 0:02:32.62</span><br><span class="line">SNMPv2-MIB::sysContact.0 = STRING: Root &lt;root@localhost&gt; (configure /etc/snmp/snmp.local.conf)</span><br><span class="line">SNMPv2-MIB::sysName.0 = STRING: lcx-centos</span><br><span class="line">SNMPv2-MIB::sysLocation.0 = STRING: Unknown (edit /etc/snmp/snmpd.conf)</span><br><span class="line">SNMPv2-MIB::sysORLastChange.0 = Timeticks: (8) 0:00:00.08</span><br><span class="line">SNMPv2-MIB::sysORID.1 = OID: SNMP-MPD-MIB::snmpMPDCompliance</span><br><span class="line">SNMPv2-MIB::sysORID.2 = OID: SNMP-USER-BASED-SM-MIB::usmMIBCompliance</span><br><span class="line">SNMPv2-MIB::sysORID.3 = OID: SNMP-FRAMEWORK-MIB::snmpFrameworkMIBCompliance</span><br><span class="line">SNMPv2-MIB::sysORID.4 = OID: SNMPv2-MIB::snmpMIB</span><br><span class="line">SNMPv2-MIB::sysORID.5 = OID: TCP-MIB::tcpMIB</span><br><span class="line">SNMPv2-MIB::sysORID.6 = OID: IP-MIB::ip</span><br><span class="line">SNMPv2-MIB::sysORID.7 = OID: UDP-MIB::udpMIB</span><br><span class="line">SNMPv2-MIB::sysORID.8 = OID: SNMP-VIEW-BASED-ACM-MIB::vacmBasicGroup</span><br><span class="line">SNMPv2-MIB::sysORID.9 = OID: SNMP-NOTIFICATION-MIB::snmpNotifyFullCompliance</span><br><span class="line">SNMPv2-MIB::sysORID.10 = OID: NOTIFICATION-LOG-MIB::notificationLogMIB</span><br><span class="line">SNMPv2-MIB::sysORDescr.1 = STRING: The MIB <span class="keyword">for</span> Message Processing and Dispatching.</span><br><span class="line">SNMPv2-MIB::sysORDescr.2 = STRING: The management information definitions <span class="keyword">for</span> the SNMP User-based Security Model.</span><br><span class="line">SNMPv2-MIB::sysORDescr.3 = STRING: The SNMP Management Architecture MIB.</span><br><span class="line">SNMPv2-MIB::sysORDescr.4 = STRING: The MIB module <span class="keyword">for</span> SNMPv2 entities</span><br><span class="line">SNMPv2-MIB::sysORDescr.5 = STRING: The MIB module <span class="keyword">for</span> managing TCP implementations</span><br><span class="line">SNMPv2-MIB::sysORDescr.6 = STRING: The MIB module <span class="keyword">for</span> managing IP and ICMP implementations</span><br><span class="line">SNMPv2-MIB::sysORDescr.7 = STRING: The MIB module <span class="keyword">for</span> managing UDP implementations</span><br><span class="line">SNMPv2-MIB::sysORDescr.8 = STRING: View-based Access Control Model <span class="keyword">for</span> SNMP.</span><br><span class="line">SNMPv2-MIB::sysORDescr.9 = STRING: The MIB modules <span class="keyword">for</span> managing SNMP Notification, plus filtering.</span><br><span class="line">SNMPv2-MIB::sysORDescr.10 = STRING: The MIB module <span class="keyword">for</span> logging SNMP Notifications.</span><br><span class="line">SNMPv2-MIB::sysORUpTime.1 = Timeticks: (8) 0:00:00.08</span><br><span class="line">SNMPv2-MIB::sysORUpTime.2 = Timeticks: (8) 0:00:00.08</span><br><span class="line">SNMPv2-MIB::sysORUpTime.3 = Timeticks: (8) 0:00:00.08</span><br><span class="line">SNMPv2-MIB::sysORUpTime.4 = Timeticks: (8) 0:00:00.08</span><br><span class="line">SNMPv2-MIB::sysORUpTime.5 = Timeticks: (8) 0:00:00.08</span><br><span class="line">SNMPv2-MIB::sysORUpTime.6 = Timeticks: (8) 0:00:00.08</span><br><span class="line">SNMPv2-MIB::sysORUpTime.7 = Timeticks: (8) 0:00:00.08</span><br><span class="line">SNMPv2-MIB::sysORUpTime.8 = Timeticks: (8) 0:00:00.08</span><br><span class="line">SNMPv2-MIB::sysORUpTime.9 = Timeticks: (8) 0:00:00.08</span><br><span class="line">SNMPv2-MIB::sysORUpTime.10 = Timeticks: (8) 0:00:00.08</span><br><span class="line">IF-MIB::ifNumber.0 = INTEGER: 5</span><br><span class="line">IF-MIB::ifIndex.1 = INTEGER: 1</span><br><span class="line">IF-MIB::ifIndex.2 = INTEGER: 2</span><br><span class="line">IF-MIB::ifIndex.3 = INTEGER: 3</span><br><span class="line">IF-MIB::ifIndex.4 = INTEGER: 4</span><br><span class="line">IF-MIB::ifIndex.5 = INTEGER: 5</span><br><span class="line">IF-MIB::ifDescr.1 = STRING: lo</span><br><span class="line">IF-MIB::ifDescr.2 = STRING: ens33</span><br><span class="line">IF-MIB::ifDescr.3 = STRING: virbr0</span><br><span class="line">IF-MIB::ifDescr.4 = STRING: virbr0-nic</span><br><span class="line">IF-MIB::ifDescr.5 = STRING: docker0</span><br><span class="line">IF-MIB::ifType.1 = INTEGER: softwareLoopback(24)</span><br><span class="line">IF-MIB::ifType.2 = INTEGER: ethernetCsmacd(6)</span><br><span class="line">IF-MIB::ifType.3 = INTEGER: ethernetCsmacd(6)</span><br><span class="line">IF-MIB::ifType.4 = INTEGER: ethernetCsmacd(6)</span><br><span class="line">IF-MIB::ifType.5 = INTEGER: ethernetCsmacd(6)</span><br><span class="line">IF-MIB::ifMtu.1 = INTEGER: 65536</span><br><span class="line">IF-MIB::ifMtu.2 = INTEGER: 1500</span><br><span class="line">IF-MIB::ifMtu.3 = INTEGER: 1500</span><br><span class="line">IF-MIB::ifMtu.4 = INTEGER: 1500</span><br><span class="line">IF-MIB::ifMtu.5 = INTEGER: 1500</span><br><span class="line">IF-MIB::ifSpeed.1 = Gauge32: 10000000</span><br><span class="line">IF-MIB::ifSpeed.2 = Gauge32: 1000000000</span><br><span class="line">IF-MIB::ifSpeed.3 = Gauge32: 0</span><br><span class="line">IF-MIB::ifSpeed.4 = Gauge32: 10000000</span><br><span class="line">IF-MIB::ifSpeed.5 = Gauge32: 0</span><br><span class="line">IF-MIB::ifPhysAddress.1 = STRING: </span><br><span class="line">IF-MIB::ifPhysAddress.2 = STRING: 0:c:29:1b:7e:d</span><br><span class="line">IF-MIB::ifPhysAddress.3 = STRING: 52:54:0:25:dc:88</span><br><span class="line">IF-MIB::ifPhysAddress.4 = STRING: 52:54:0:25:dc:88</span><br><span class="line">IF-MIB::ifPhysAddress.5 = STRING: 2:42:b2:34:7a:93</span><br><span class="line">IF-MIB::ifAdminStatus.1 = INTEGER: up(1)</span><br><span class="line">IF-MIB::ifAdminStatus.2 = INTEGER: up(1)</span><br><span class="line">IF-MIB::ifAdminStatus.3 = INTEGER: down(2)</span><br><span class="line">IF-MIB::ifAdminStatus.4 = INTEGER: down(2)</span><br><span class="line">IF-MIB::ifAdminStatus.5 = INTEGER: up(1)</span><br><span class="line">IF-MIB::ifOperStatus.1 = INTEGER: up(1)</span><br><span class="line">IF-MIB::ifOperStatus.2 = INTEGER: up(1)</span><br><span class="line">IF-MIB::ifOperStatus.3 = INTEGER: down(2)</span><br><span class="line">IF-MIB::ifOperStatus.4 = INTEGER: down(2)</span><br><span class="line">IF-MIB::ifOperStatus.5 = INTEGER: down(2)</span><br><span class="line">IF-MIB::ifLastChange.1 = Timeticks: (0) 0:00:00.00</span><br><span class="line">IF-MIB::ifLastChange.2 = Timeticks: (0) 0:00:00.00</span><br><span class="line">IF-MIB::ifLastChange.3 = Timeticks: (0) 0:00:00.00</span><br><span class="line">IF-MIB::ifLastChange.4 = Timeticks: (0) 0:00:00.00</span><br><span class="line">IF-MIB::ifLastChange.5 = Timeticks: (0) 0:00:00.00</span><br><span class="line">IF-MIB::ifInOctets.1 = Counter32: 12538599</span><br><span class="line">IF-MIB::ifInOctets.2 = Counter32: 779843410</span><br><span class="line">IF-MIB::ifInOctets.3 = Counter32: 0</span><br><span class="line">IF-MIB::ifInOctets.4 = Counter32: 0</span><br><span class="line">IF-MIB::ifInOctets.5 = Counter32: 0</span><br><span class="line">IF-MIB::ifInUcastPkts.1 = Counter32: 69333</span><br><span class="line">IF-MIB::ifInUcastPkts.2 = Counter32: 533359</span><br><span class="line">IF-MIB::ifInUcastPkts.3 = Counter32: 0</span><br><span class="line">IF-MIB::ifInUcastPkts.4 = Counter32: 0</span><br><span class="line">IF-MIB::ifInUcastPkts.5 = Counter32: 0</span><br><span class="line">IF-MIB::ifInNUcastPkts.1 = Counter32: 0</span><br><span class="line">IF-MIB::ifInNUcastPkts.2 = Counter32: 0</span><br><span class="line">IF-MIB::ifInNUcastPkts.3 = Counter32: 0</span><br><span class="line">IF-MIB::ifInNUcastPkts.4 = Counter32: 0</span><br><span class="line">IF-MIB::ifInNUcastPkts.5 = Counter32: 0</span><br><span class="line">IF-MIB::ifInDiscards.1 = Counter32: 0</span><br><span class="line">IF-MIB::ifInDiscards.2 = Counter32: 0</span><br><span class="line">IF-MIB::ifInDiscards.3 = Counter32: 0</span><br><span class="line">IF-MIB::ifInDiscards.4 = Counter32: 0</span><br><span class="line">IF-MIB::ifInDiscards.5 = Counter32: 0</span><br><span class="line">IF-MIB::ifInErrors.1 = Counter32: 0</span><br><span class="line">IF-MIB::ifInErrors.2 = Counter32: 0</span><br><span class="line">IF-MIB::ifInErrors.3 = Counter32: 0</span><br><span class="line">IF-MIB::ifInErrors.4 = Counter32: 0</span><br><span class="line">IF-MIB::ifInErrors.5 = Counter32: 0</span><br><span class="line">IF-MIB::ifInUnknownProtos.1 = Counter32: 0</span><br><span class="line">IF-MIB::ifInUnknownProtos.2 = Counter32: 0</span><br><span class="line">IF-MIB::ifInUnknownProtos.3 = Counter32: 0</span><br><span class="line">IF-MIB::ifInUnknownProtos.4 = Counter32: 0</span><br><span class="line">IF-MIB::ifInUnknownProtos.5 = Counter32: 0</span><br><span class="line">IF-MIB::ifOutOctets.1 = Counter32: 12538599</span><br><span class="line">IF-MIB::ifOutOctets.2 = Counter32: 4493350</span><br><span class="line">IF-MIB::ifOutOctets.3 = Counter32: 0</span><br><span class="line">IF-MIB::ifOutOctets.4 = Counter32: 0</span><br><span class="line">IF-MIB::ifOutOctets.5 = Counter32: 0</span><br><span class="line">IF-MIB::ifOutUcastPkts.1 = Counter32: 69333</span><br><span class="line">IF-MIB::ifOutUcastPkts.2 = Counter32: 65738</span><br><span class="line">IF-MIB::ifOutUcastPkts.3 = Counter32: 0</span><br><span class="line">IF-MIB::ifOutUcastPkts.4 = Counter32: 0</span><br><span class="line">IF-MIB::ifOutUcastPkts.5 = Counter32: 0</span><br><span class="line">IF-MIB::ifOutNUcastPkts.1 = Counter32: 0</span><br><span class="line">IF-MIB::ifOutNUcastPkts.2 = Counter32: 0</span><br><span class="line">IF-MIB::ifOutNUcastPkts.3 = Counter32: 0</span><br><span class="line">IF-MIB::ifOutNUcastPkts.4 = Counter32: 0</span><br><span class="line">IF-MIB::ifOutNUcastPkts.5 = Counter32: 0</span><br><span class="line">IF-MIB::ifOutDiscards.1 = Counter32: 0</span><br><span class="line">IF-MIB::ifOutDiscards.2 = Counter32: 0</span><br><span class="line">IF-MIB::ifOutDiscards.3 = Counter32: 0</span><br><span class="line">IF-MIB::ifOutDiscards.4 = Counter32: 0</span><br><span class="line">IF-MIB::ifOutDiscards.5 = Counter32: 0</span><br><span class="line">IF-MIB::ifOutErrors.1 = Counter32: 0</span><br><span class="line">IF-MIB::ifOutErrors.2 = Counter32: 0</span><br><span class="line">IF-MIB::ifOutErrors.3 = Counter32: 0</span><br><span class="line">IF-MIB::ifOutErrors.4 = Counter32: 0</span><br><span class="line">IF-MIB::ifOutErrors.5 = Counter32: 0</span><br><span class="line">IF-MIB::ifOutQLen.1 = Gauge32: 0</span><br><span class="line">IF-MIB::ifOutQLen.2 = Gauge32: 0</span><br><span class="line">IF-MIB::ifOutQLen.3 = Gauge32: 0</span><br><span class="line">IF-MIB::ifOutQLen.4 = Gauge32: 0</span><br><span class="line">IF-MIB::ifOutQLen.5 = Gauge32: 0</span><br><span class="line">IF-MIB::ifSpecific.1 = OID: SNMPv2-SMI::zeroDotZero</span><br><span class="line">IF-MIB::ifSpecific.2 = OID: SNMPv2-SMI::zeroDotZero</span><br><span class="line">IF-MIB::ifSpecific.3 = OID: SNMPv2-SMI::zeroDotZero</span><br><span class="line">IF-MIB::ifSpecific.4 = OID: SNMPv2-SMI::zeroDotZero</span><br><span class="line">IF-MIB::ifSpecific.5 = OID: SNMPv2-SMI::zeroDotZero</span><br><span class="line">SNMPv2-SMI::mib-2.3.1.1.1.2.1.192.168.10.1 = INTEGER: 2</span><br><span class="line">SNMPv2-SMI::mib-2.3.1.1.2.2.1.192.168.10.1 = Hex-STRING: F4 EE 14 1D 58 DE </span><br><span class="line">SNMPv2-SMI::mib-2.3.1.1.3.2.1.192.168.10.1 = IpAddress: 192.168.10.1</span><br><span class="line">IP-MIB::ipForwarding.0 = INTEGER: forwarding(1)</span><br><span class="line">IP-MIB::ipDefaultTTL.0 = INTEGER: 64</span><br><span class="line">IP-MIB::ipInReceives.0 = Counter32: 140948</span><br><span class="line">IP-MIB::ipInHdrErrors.0 = Counter32: 0</span><br><span class="line">IP-MIB::ipInAddrErrors.0 = Counter32: 0</span><br><span class="line">IP-MIB::ipForwDatagrams.0 = Counter32: 0</span><br><span class="line">IP-MIB::ipInUnknownProtos.0 = Counter32: 0</span><br><span class="line">IP-MIB::ipInDiscards.0 = Counter32: 0</span><br><span class="line">IP-MIB::ipInDelivers.0 = Counter32: 140624</span><br><span class="line">IP-MIB::ipOutRequests.0 = Counter32: 135827</span><br><span class="line">IP-MIB::ipOutDiscards.0 = Counter32: 0</span><br><span class="line">IP-MIB::ipOutNoRoutes.0 = Counter32: 0</span><br><span class="line">IP-MIB::ipReasmTimeout.0 = INTEGER: 30 seconds</span><br><span class="line">IP-MIB::ipReasmReqds.0 = Counter32: 0</span><br><span class="line">IP-MIB::ipReasmOKs.0 = Counter32: 0</span><br><span class="line">IP-MIB::ipReasmFails.0 = Counter32: 0</span><br><span class="line">IP-MIB::ipFragOKs.0 = Counter32: 0</span><br><span class="line">IP-MIB::ipFragFails.0 = Counter32: 0</span><br><span class="line">IP-MIB::ipFragCreates.0 = Counter32: 0</span><br><span class="line">IP-MIB::ipAdEntAddr.127.0.0.1 = IpAddress: 127.0.0.1</span><br><span class="line">IP-MIB::ipAdEntAddr.172.17.0.1 = IpAddress: 172.17.0.1</span><br><span class="line">IP-MIB::ipAdEntAddr.192.168.10.113 = IpAddress: 192.168.10.113</span><br><span class="line">IP-MIB::ipAdEntIfIndex.127.0.0.1 = INTEGER: 1</span><br><span class="line">IP-MIB::ipAdEntIfIndex.172.17.0.1 = INTEGER: 5</span><br><span class="line">IP-MIB::ipAdEntIfIndex.192.168.10.113 = INTEGER: 2</span><br><span class="line">IP-MIB::ipAdEntNetMask.127.0.0.1 = IpAddress: 255.0.0.0</span><br><span class="line">IP-MIB::ipAdEntNetMask.172.17.0.1 = IpAddress: 255.255.0.0</span><br><span class="line">IP-MIB::ipAdEntNetMask.192.168.10.113 = IpAddress: 255.255.255.0</span><br><span class="line">IP-MIB::ipAdEntBcastAddr.127.0.0.1 = INTEGER: 0</span><br><span class="line">IP-MIB::ipAdEntBcastAddr.172.17.0.1 = INTEGER: 1</span><br><span class="line">IP-MIB::ipAdEntBcastAddr.192.168.10.113 = INTEGER: 1</span><br><span class="line">IP-MIB::ip.21.1.1.0.0.0.0 = IpAddress: 0.0.0.0</span><br><span class="line">IP-MIB::ip.21.1.1.172.17.0.0 = IpAddress: 172.17.0.0</span><br><span class="line">IP-MIB::ip.21.1.1.192.168.10.0 = IpAddress: 192.168.10.0</span><br><span class="line">IP-MIB::ip.21.1.2.0.0.0.0 = INTEGER: 2</span><br><span class="line">IP-MIB::ip.21.1.2.172.17.0.0 = INTEGER: 5</span><br><span class="line">IP-MIB::ip.21.1.2.192.168.10.0 = INTEGER: 2</span><br><span class="line">IP-MIB::ip.21.1.3.0.0.0.0 = INTEGER: 1</span><br><span class="line">IP-MIB::ip.21.1.3.172.17.0.0 = INTEGER: 0</span><br><span class="line">IP-MIB::ip.21.1.3.192.168.10.0 = INTEGER: 0</span><br><span class="line">IP-MIB::ip.21.1.7.0.0.0.0 = IpAddress: 192.168.10.1</span><br><span class="line">IP-MIB::ip.21.1.7.172.17.0.0 = IpAddress: 0.0.0.0</span><br><span class="line">IP-MIB::ip.21.1.7.192.168.10.0 = IpAddress: 0.0.0.0</span><br><span class="line">IP-MIB::ip.21.1.8.0.0.0.0 = INTEGER: 4</span><br><span class="line">IP-MIB::ip.21.1.8.172.17.0.0 = INTEGER: 3</span><br><span class="line">IP-MIB::ip.21.1.8.192.168.10.0 = INTEGER: 3</span><br><span class="line">IP-MIB::ip.21.1.9.0.0.0.0 = INTEGER: 2</span><br><span class="line">IP-MIB::ip.21.1.9.172.17.0.0 = INTEGER: 2</span><br><span class="line">IP-MIB::ip.21.1.9.192.168.10.0 = INTEGER: 2</span><br><span class="line">IP-MIB::ip.21.1.11.0.0.0.0 = IpAddress: 0.0.0.0</span><br><span class="line">IP-MIB::ip.21.1.11.172.17.0.0 = IpAddress: 255.255.0.0</span><br><span class="line">IP-MIB::ip.21.1.11.192.168.10.0 = IpAddress: 255.255.255.0</span><br><span class="line">IP-MIB::ip.21.1.13.0.0.0.0 = OID: SNMPv2-SMI::zeroDotZero</span><br><span class="line">IP-MIB::ip.21.1.13.172.17.0.0 = OID: SNMPv2-SMI::zeroDotZero</span><br><span class="line">IP-MIB::ip.21.1.13.192.168.10.0 = OID: SNMPv2-SMI::zeroDotZero</span><br><span class="line">IP-MIB::ipNetToMediaIfIndex.2.192.168.10.1 = INTEGER: 2</span><br><span class="line">IP-MIB::ipNetToMediaPhysAddress.2.192.168.10.1 = STRING: f4:ee:14:1d:58:de</span><br><span class="line">IP-MIB::ipNetToMediaNetAddress.2.192.168.10.1 = IpAddress: 192.168.10.1</span><br><span class="line">IP-MIB::ipNetToMediaType.2.192.168.10.1 = INTEGER: dynamic(3)</span><br><span class="line">IP-MIB::ipRoutingDiscards.0 = Counter32: 0</span><br><span class="line">IP-FORWARD-MIB::ipCidrRouteDest.0.0.0.0.0.0.0.0.0.192.168.10.1 = IpAddress: 0.0.0.0</span><br><span class="line">IP-FORWARD-MIB::ipCidrRouteDest.172.17.0.0.255.255.0.0.0.0.0.0.0 = IpAddress: 172.17.0.0</span><br><span class="line">IP-FORWARD-MIB::ipCidrRouteDest.192.168.10.0.255.255.255.0.0.0.0.0.0 = IpAddress: 192.168.10.0</span><br><span class="line">IP-FORWARD-MIB::ipCidrRouteMask.0.0.0.0.0.0.0.0.0.192.168.10.1 = IpAddress: 0.0.0.0</span><br><span class="line">IP-FORWARD-MIB::ipCidrRouteMask.172.17.0.0.255.255.0.0.0.0.0.0.0 = IpAddress: 255.255.0.0</span><br><span class="line">IP-FORWARD-MIB::ipCidrRouteMask.192.168.10.0.255.255.255.0.0.0.0.0.0 = IpAddress: 255.255.255.0</span><br><span class="line">IP-FORWARD-MIB::ipCidrRouteTos.0.0.0.0.0.0.0.0.0.192.168.10.1 = INTEGER: 0</span><br><span class="line">IP-FORWARD-MIB::ipCidrRouteTos.172.17.0.0.255.255.0.0.0.0.0.0.0 = INTEGER: 0</span><br><span class="line">IP-FORWARD-MIB::ipCidrRouteTos.192.168.10.0.255.255.255.0.0.0.0.0.0 = INTEGER: 0</span><br><span class="line">IP-FORWARD-MIB::ipCidrRouteNextHop.0.0.0.0.0.0.0.0.0.192.168.10.1 = IpAddress: 192.168.10.1</span><br><span class="line">IP-FORWARD-MIB::ipCidrRouteNextHop.172.17.0.0.255.255.0.0.0.0.0.0.0 = IpAddress: 0.0.0.0</span><br><span class="line">IP-FORWARD-MIB::ipCidrRouteNextHop.192.168.10.0.255.255.255.0.0.0.0.0.0 = IpAddress: 0.0.0.0</span><br><span class="line">IP-FORWARD-MIB::ipCidrRouteIfIndex.0.0.0.0.0.0.0.0.0.192.168.10.1 = INTEGER: 2</span><br><span class="line">IP-FORWARD-MIB::ipCidrRouteIfIndex.172.17.0.0.255.255.0.0.0.0.0.0.0 = INTEGER: 5</span><br><span class="line">IP-FORWARD-MIB::ipCidrRouteIfIndex.192.168.10.0.255.255.255.0.0.0.0.0.0 = INTEGER: 2</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬é¡ºåˆ©çš„å–åˆ°äº†æœåŠ¡å™¨çš„snmpæ•°æ®ã€‚</p><h2 id="4-2Win7-Manager"><a href="#4-2Win7-Manager" class="headerlink" title="4.2Win7(Manager):"></a>4.2Win7(Manager):</h2><h3 id="4-2-1MIB-Browseré…ç½®"><a href="#4-2-1MIB-Browseré…ç½®" class="headerlink" title="4.2.1MIB Browseré…ç½®"></a>4.2.1MIB Browseré…ç½®</h3><p><img src="https://i.loli.net/2020/06/13/3mjMEeig6dNZSht.png" alt="image-20200613093819436"></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼šåœ¨1ä¸­è¾“å…¥agent ipï¼Œåœ¨2ä¸­é€‰æ‹©v3å¹¶æ·»åŠ v3ç”¨æˆ·ï¼Œç‚¹å‡»3è¿›è¡Œè¿æ¥ã€‚</p><p>2ä¸­æ“ä½œå¦‚ä¸‹ï¼š</p><p><img src="https://i.loli.net/2020/06/13/rhpVedP8By5EQg9.png" alt="image-20200613094154210"></p><p>é€‰æ‹©SNMPç‰ˆæœ¬ä¸ºv3å ï¼Œç‚¹å‡»AddUserè¿›è¡Œæ·»åŠ v3ç”¨æˆ·ç•Œé¢ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><p><img src="https://i.loli.net/2020/06/13/2SieXxfhGp69WTF.png" alt="image-20200613094334060"></p><p>æ ¹æ®åœ¨Centos7ä¸­æ·»åŠ çš„ç”¨æˆ·ä¿¡æ¯è¿›è¡Œå¡«å†™ï¼ŒAuthentication Protocolä¸­é€‰æ‹©MD5ï¼Œ</p><p>Privacy Protocolé€‰æ‹©DESã€‚å†…å®¹åˆ†åˆ«ä¸ºauth-passwordã€encrypt-passwordã€‚</p><h1 id="äº”ã€ç»“æœå±•ç¤ºå’Œåˆ†æ"><a href="#äº”ã€ç»“æœå±•ç¤ºå’Œåˆ†æ" class="headerlink" title="äº”ã€ç»“æœå±•ç¤ºå’Œåˆ†æ"></a>äº”ã€ç»“æœå±•ç¤ºå’Œåˆ†æ</h1><p>â€‹        ==ç”±äºæŠ¥æ–‡æ•è·åˆ†ææ˜¯åœ¨å®éªŒå®Œæˆå‡ å¤©åè¿›è¡Œçš„ï¼Œwin7ipç§Ÿçº¦åˆ°æœŸï¼Œè·¯ç”±å™¨dhcpæœåŠ¡å™¨é‡æ–°å¯¹win7è¿›è¡Œipåˆ†é…ï¼Œåˆ†é…ç»“æœå¦‚ä¸‹ï¼š==</p><p><img src="https://i.loli.net/2020/06/13/jMUAVtpe4XbkLgn.png" alt="image-20200613123132547"></p><p>ä½¿ç”¨MIB  Browserè¿æ¥è¢«ç®¡ç†è®¾å¤‡ï¼ˆcentos7ï¼‰ï¼Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://i.loli.net/2020/06/13/bXRHWgf6uSticlK.png" alt="image-20200613101300359"></p><p>â€‹        å¯ä»¥çœ‹åˆ°ï¼Œç”±MIBå‘å‡º<strong>Request</strong>ï¼Œç”±Centos7è¿”å›<strong>Synchronize</strong>å’Œ<strong>Response</strong>æ¶ˆæ¯ã€‚æ¥å›çš„ä¿¡æ¯ä¸­å¯ä»¥çœ‹åˆ°Authentication Protocol, Privacy Protocolä»¥åŠSecurity Levelç­‰ç›¸å…³ä¿¡æ¯ã€‚</p><p>â€‹        è¿æ¥Centos7çš„åŒæ—¶ï¼Œåœ¨Win7ä¸Šè¿›è¡ŒæŠ¥æ–‡æ•è·ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://i.loli.net/2020/06/13/XlJqGraw2QEfPxH.png" alt="img"></p><ul><li><p>å¯¹Get-requestæŠ¥æ–‡è¿›è¡Œåˆ†æï¼š</p><img src="/2020/06/13/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E4%B8%8E%E7%BB%B4%E6%8A%A4%E5%A4%A7%E4%BD%9C%E4%B8%9A/Users\12173\Desktop\EarNmg38xSoO7nD.png" alt="image-20200613125115379"><table><thead><tr><th>åå…­è¿›åˆ¶æ•°æ®</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>30</td><td>è¡¨ç¤ºSNMPåè®®æŠ¥æ–‡(æ•´ä¸ªæŠ¥æ–‡æ˜¯ä¸€ä¸ªSEQUENCE)</td></tr><tr><td>38</td><td>æ¶ˆæ¯é•¿åº¦38å­—èŠ‚(è¡¨ç¤ºåé¢è¿˜æœ‰38ä¸ªå­—èŠ‚çš„å†…å®¹)</td></tr><tr><td>02 01 03</td><td>è¡¨ç¤ºè¿™ä¸ªæŠ¥æ–‡çš„åè®®ä¸ºSNMPv3(02è¡¨ç¤ºinteger 01è¡¨ç¤ºé•¿åº¦ä¸º1ä¸ªå­—èŠ‚)</td></tr><tr><td>30</td><td>è¡¨ç¤ºmsgGlobalDataä¸ºä¸€ä¸ªSequence</td></tr><tr><td>0e</td><td>è¡¨ç¤ºè¯¥å­æŠ¥æ–‡çš„é•¿åº¦ä¸º14å­—èŠ‚</td></tr><tr><td>02 01 59</td><td>è¡¨ç¤ºå¯¹åº”çš„msgIDï¼š32</td></tr><tr><td>02 03 00 ff f0</td><td>è¡¨ç¤ºå¯¹åº”msgMaxSizeï¼š65520</td></tr><tr><td>04 01 00</td><td>è¡¨ç¤ºå¯¹åº”çš„æ˜¯msgFlagsï¼š04</td></tr><tr><td>02 01 03</td><td>è¡¨ç¤ºå¯¹åº”çš„msgSecurityModelï¼šUSM(3)</td></tr><tr><td>04 10</td><td>å¼•æ“ID</td></tr><tr><td>30 0e</td><td>è¡¨ç¤ºæ¥ä¸‹æ¥ä»msgAuthoritativeEngineIDåˆ°msgPrivacyParametersä¸ºä¸€ä¸ªSequenceä¸”é•¿åº¦ä¸º14å­—èŠ‚</td></tr><tr><td>04 00</td><td>è¡¨ç¤ºmsgAuthoritativeEngineIDé•¿åº¦ä¸º0ï¼Œæ²¡æœ‰å†…å®¹</td></tr><tr><td>02 01 00</td><td>è¡¨ç¤ºmsgAuthoritativeEngineBootsï¼š0</td></tr><tr><td>02 01 00</td><td>è¡¨ç¤ºmsgAuthoritativeEngineTimeï¼š0</td></tr><tr><td>04 00</td><td>è¡¨ç¤ºmsgUserNameä¸ºOctect Stringç±»å‹ï¼Œé•¿åº¦ä¸º0ï¼Œæ²¡æœ‰å†…å®¹</td></tr><tr><td>04 00</td><td>è¡¨ç¤ºmsgAuthenticationParametersä¸ºOctect Stringç±»å‹ï¼Œé•¿åº¦ä¸º0ï¼Œæ²¡æœ‰å†…å®¹</td></tr><tr><td>04 00</td><td>è¡¨ç¤ºmsgPrivacyParametersä¸ºOctect Stringç±»å‹ï¼Œé•¿åº¦ä¸º0ï¼Œæ²¡æœ‰å†…å®¹</td></tr><tr><td>30 11</td><td>è¡¨ç¤ºæ¥ä¸‹æ¥çš„msgDataï¼šplaintextä¸ºä¸€ä¸ªSequenceï¼Œé•¿åº¦ä¸º17å­—èŠ‚</td></tr><tr><td>04 00</td><td>è¡¨ç¤ºcontextEngineIDä¸ºOctect Stringç±»å‹ï¼Œé•¿åº¦ä¸º0ï¼Œæ²¡æœ‰å†…å®¹</td></tr><tr><td>04 00</td><td>è¡¨ç¤ºcontextNameä¸ºOctect Stringç±»å‹ï¼Œé•¿åº¦ä¸º0ï¼Œæ²¡æœ‰å†…å®¹</td></tr><tr><td>a0</td><td>è¡¨ç¤ºè¿™ä¸ªPDUä¸ºGet-Requestç±»å‹</td></tr><tr><td>0b</td><td>è¡¨ç¤ºdataçš„é•¿åº¦ä¸º11å­—èŠ‚</td></tr><tr><td>02 01 58</td><td>è¡¨ç¤ºrequest-idï¼š88</td></tr><tr><td>02 01 00</td><td>è¡¨ç¤ºerror-statusä¸º0</td></tr><tr><td>02 01 00</td><td>è¡¨ç¤ºerror-indexä¸º0</td></tr><tr><td>30 00</td><td>è¡¨ç¤ºvariable-bindingsï¼š0 items</td></tr></tbody></table></li><li><p>reportæŠ¥æ–‡</p><p>å¯¹æ¯”ä¸Šè¿°å¯¹GetRequestæŠ¥æ–‡çš„åˆ†æï¼Œå¯ä»¥åœ¨è¯¥æŠ¥æ–‡ä¸­çœ‹åˆ°msgAuthoritativeEngineIDç­‰å€¼ä¸å†ä¸ºç©ºï¼Œæ˜¯å› ä¸ºCentos7è®¾å¤‡å°†ç›¸å…³ä¿¡æ¯å‘é€ç»™äº†ç®¡ç†è½¯ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://i.loli.net/2020/06/13/hk3zsDKZS4QRtTb.png" alt="image-20200613140623752"></p><p><img src="https://i.loli.net/2020/06/13/tFgS8UVIcqx4brJ.png" alt="image-20200613141147537"></p></li><li><p>encryptedPDUæŠ¥æ–‡å†…å®¹å¦‚ä¸‹ï¼š</p><p><img src="https://i.loli.net/2020/06/13/Qa9lHeAzsD8Oc3W.png" alt="image-20200613134901797"></p><p>è¡¨ç¤ºä¸ºå·²ç»åŠ å¯†çš„PDUã€‚</p></li><li><p>getæ“ä½œè·å–è®¾å¤‡åç§°</p><p><img src="https://i.loli.net/2020/06/13/AatzEOP43LJVksr.png" alt="image-20200613144611730"></p><p>ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°è®¾å¤‡åä¸º<strong>lcx-VM-centos7</strong>ã€‚</p></li><li><p>é€šè¿‡setæ“ä½œæ›´æ”¹è®¾å¤‡åç§°ä¸º<strong>lcx-centos7</strong></p><p><img src="https://i.loli.net/2020/06/13/TQYoxLc3SKlrRe5.png" alt="image-20200613144922792"></p><p>ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œè®¾å¤‡åå·²è¢«ä¿®æ”¹ä¸º<strong>lcx-centos7</strong></p></li><li><p>é€šè¿‡get bulkæ“ä½œæ£€ç´¢SMMPå˜é‡å€¼</p><p>æ­¤æ“ä½œé€šå¸¸è¢«ç”¨äºæ£€ç´¢å¤§æ•°æ®é‡ï¼Œå°¤å…¶å½“æ‚¨çš„SNMPç‰ˆæœ¬æ˜¯V2cæˆ–V3æ—¶ï¼Œæ£€ç´¢å¤§çš„è¡¨å°±è¦ç”¨åˆ°æ­¤æ“ä½œã€‚GETBULKæ“ä½œä¼šæ ¹æ®æœ€å¤§é‡è¯•å€¼æ‰§è¡Œä¸€ä¸ªè¿ç»­çš„GETNEXTæ“ä½œã€‚éä¸­ç»§å€¼å†³å®šè¦è¿›è¡ŒGETNEXTæ“ä½œçš„å˜é‡åˆ—è¡¨ä¸­çš„å˜é‡æ•°ï¼Œå¯¹äºå‰©ä¸‹çš„å˜é‡ï¼Œå°†æ ¹æ®æœ€å¤§é‡è¯•å€¼è¿›è¡Œè¿ç»­GETNEXTæ“ä½œã€‚</p><ul><li><p>è¯·æ±‚éƒ¨åˆ†ï¼š</p><p><img src="https://i.loli.net/2020/06/13/8S7WRcEehGujr2f.png" alt="image-20200613145414187"></p></li><li><p>å“åº”éƒ¨åˆ†ï¼š</p><p><img src="https://i.loli.net/2020/06/13/9stxUF74ZwmzqPM.png" alt="image-20200613145550590"></p><p>æŠ¥æ–‡å¯¹åº”æ“ä½œå¦‚ä¸‹ï¼š</p><p><img src="https://i.loli.net/2020/06/13/ZSoc6Mw5UAsa9jp.png" alt="img"></p><p>æ•è·æŠ¥æ–‡æ–‡ä»¶å¦‚ä¸‹ï¼š</p><p>æŠ¥æ–‡æ–‡ä»¶å·²ä¸Šä¼ è‡³gitä»“åº“<a href="https://github.com/yym08090809/Anything/blob/master/snmp%20all.pcapng" target="_blank" rel="noopener">ç‚¹å‡»å¯ä¸‹è½½</a></p></li></ul></li></ul><h1 id="å…­ã€é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"><a href="#å…­ã€é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ" class="headerlink" title="å…­ã€é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"></a>å…­ã€é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</h1><h2 id="é—®é¢˜ä¸€ã€ä¸¤å°è™šæ‹Ÿæœºè§æ— æ³•é€šè®¯"><a href="#é—®é¢˜ä¸€ã€ä¸¤å°è™šæ‹Ÿæœºè§æ— æ³•é€šè®¯" class="headerlink" title="é—®é¢˜ä¸€ã€ä¸¤å°è™šæ‹Ÿæœºè§æ— æ³•é€šè®¯"></a>é—®é¢˜ä¸€ã€ä¸¤å°è™šæ‹Ÿæœºè§æ— æ³•é€šè®¯</h2><p><strong>è§£å†³æ–¹æ¡ˆ:</strong>å°†è™šæ‹Ÿæœºç½‘ç»œè¿æ¥æ–¹å¼è®¾ç½®ä¸ºæ¡¥æ¥æ¨¡å¼ï¼Œå¹¶å…³é—­é˜²ç«å¢™ã€‚ä½¿å¾—ä¸¤å°æœºå™¨åœ¨åŒä¸€ä¸ªç½‘æ®µçš„åŒä¸€å­ç½‘ä¸‹ã€‚</p><h2 id="é—®é¢˜äºŒã€æ— æ³•æ·»åŠ SNMPv3ç”¨æˆ·"><a href="#é—®é¢˜äºŒã€æ— æ³•æ·»åŠ SNMPv3ç”¨æˆ·" class="headerlink" title="é—®é¢˜äºŒã€æ— æ³•æ·»åŠ SNMPv3ç”¨æˆ·"></a>é—®é¢˜äºŒã€æ— æ³•æ·»åŠ SNMPv3ç”¨æˆ·</h2><p><strong>è§£å†³æ–¹æ¡ˆ:</strong>æ ¹æ®æç¤ºsnmpdæœåŠ¡åœæ­¢åï¼Œå³å¯æ·»åŠ snmpv3ç”¨æˆ·ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œç®¡ç†ä¸ç»´æŠ¤ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œç®¡ç†ä¸ç»´æŠ¤ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œå®‰å…¨ç»¼åˆå®éªŒç¯‡</title>
      <link href="/2020/06/01/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E7%BB%BC%E5%90%88%E5%AE%9E%E9%AA%8C%E7%AF%87/"/>
      <url>/2020/06/01/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E7%BB%BC%E5%90%88%E5%AE%9E%E9%AA%8C%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<h1 id="ç½‘ç»œå®‰å…¨ç»¼åˆå®éªŒç¯‡"><a href="#ç½‘ç»œå®‰å…¨ç»¼åˆå®éªŒç¯‡" class="headerlink" title="ç½‘ç»œå®‰å…¨ç»¼åˆå®éªŒç¯‡"></a>ç½‘ç»œå®‰å…¨ç»¼åˆå®éªŒç¯‡</h1><h2 id="1ã€å®éªŒè¦æ±‚"><a href="#1ã€å®éªŒè¦æ±‚" class="headerlink" title="1ã€å®éªŒè¦æ±‚"></a>1ã€å®éªŒè¦æ±‚</h2><ol><li>é…ç½®ACLï¼Œè¿‡æ»¤å…·æœ‰æŸç§ç‰¹ç‚¹çš„åˆ†ç»„ã€‚</li><li>é…ç½®NATã€‚åœ¨ä¼ä¸šå†…éƒ¨ç»“æ„åŒ–åˆ†å±‚ä½¿ç”¨NATåœ°å€ã€‚</li><li>å®éªŒæµ‹è¯•ä¸€ç§ç½‘ç»œæ”»å‡»ï¼Œæ¯”å¦‚SYN_Floodã€MACæ³›æ´ªæ”»å‡»æˆ–ARPæ”»å‡»ã€‚</li><li>é…ç½®é˜²ç«å¢™ï¼Œç¦æ­¢æŸç§ç½‘ç»œæœåŠ¡ï¼ˆé˜²ç«å¢™åœ¨ä¼ä¸šå†…ç½‘ä¸å¤–ç½‘ä¹‹é—´ï¼‰ã€‚</li><li>é…ç½®VPNã€‚ä¼ä¸šå†…ç½‘ä¸å¤–ç½‘ä¹‹é—´å¯èƒ½æœ‰é˜²ç«å¢™ï¼Œä¹Ÿå¯èƒ½æœ‰NATã€‚ä»ä¼ä¸šå¤–éƒ¨ï¼Œç”¨æˆ·ä¸èƒ½ç›´æ¥è®¿é—®ä¼ä¸šå†…éƒ¨ã€‚ä¼ä¸šå‘˜å·¥å¤–å‡ºï¼Œæˆ–è·¨åœ°åŒºã€è·¨å›½å®¶ä¼ä¸šéƒ½æœ‰è·¨è¶Šå…¬ä¼—äº’è”ç½‘ï¼Œè®¿é—®ä¼ä¸šå†…éƒ¨ç½‘ç»œçš„éœ€æ±‚ã€‚é…ç½®NATæŸç§VPNï¼Œæ¯”å¦‚L2TP VPN æˆ–SSL VPNã€‚</li></ol><a id="more"></a><h2 id="2ã€é…ç½®ACLï¼Œè¿‡æ»¤å…·æœ‰æŸç§ç‰¹ç‚¹çš„åˆ†ç»„ã€‚"><a href="#2ã€é…ç½®ACLï¼Œè¿‡æ»¤å…·æœ‰æŸç§ç‰¹ç‚¹çš„åˆ†ç»„ã€‚" class="headerlink" title="2ã€é…ç½®ACLï¼Œè¿‡æ»¤å…·æœ‰æŸç§ç‰¹ç‚¹çš„åˆ†ç»„ã€‚"></a>2ã€é…ç½®ACLï¼Œè¿‡æ»¤å…·æœ‰æŸç§ç‰¹ç‚¹çš„åˆ†ç»„ã€‚</h2><h3 id="2-1å®éªŒæ‹“æ‰‘"><a href="#2-1å®éªŒæ‹“æ‰‘" class="headerlink" title="2.1å®éªŒæ‹“æ‰‘"></a>2.1å®éªŒæ‹“æ‰‘</h3><p><img src="https://s1.ax1x.com/2020/06/01/tJ1IHA.png" alt="tJ1IHA.png"></p><h3 id="2-2å®éªŒæ­¥éª¤"><a href="#2-2å®éªŒæ­¥éª¤" class="headerlink" title="2.2å®éªŒæ­¥éª¤"></a>2.2å®éªŒæ­¥éª¤</h3><h4 id="2-2-1æ ¹æ®æ‹“æ‰‘é…ç½®è·¯ç”±å™¨ã€PCçš„ipåŠæ©ç ï¼Œç„¶ååœ¨å„ä¸ªè·¯ç”±å™¨ä¸Šé…ç½®RIPåè®®å®ç°å…¨ç½‘äº’é€šã€‚"><a href="#2-2-1æ ¹æ®æ‹“æ‰‘é…ç½®è·¯ç”±å™¨ã€PCçš„ipåŠæ©ç ï¼Œç„¶ååœ¨å„ä¸ªè·¯ç”±å™¨ä¸Šé…ç½®RIPåè®®å®ç°å…¨ç½‘äº’é€šã€‚" class="headerlink" title="2.2.1æ ¹æ®æ‹“æ‰‘é…ç½®è·¯ç”±å™¨ã€PCçš„ipåŠæ©ç ï¼Œç„¶ååœ¨å„ä¸ªè·¯ç”±å™¨ä¸Šé…ç½®RIPåè®®å®ç°å…¨ç½‘äº’é€šã€‚"></a>2.2.1æ ¹æ®æ‹“æ‰‘é…ç½®è·¯ç”±å™¨ã€PCçš„ipåŠæ©ç ï¼Œç„¶ååœ¨å„ä¸ªè·¯ç”±å™¨ä¸Šé…ç½®RIPåè®®å®ç°å…¨ç½‘äº’é€šã€‚</h4><h4 id="2-2-2æµ‹è¯•å…¨ç½‘æ˜¯å¦äº’é€šï¼ŒPCé—´äº’Pingç»“æœå¦‚ä¸‹ï¼š"><a href="#2-2-2æµ‹è¯•å…¨ç½‘æ˜¯å¦äº’é€šï¼ŒPCé—´äº’Pingç»“æœå¦‚ä¸‹ï¼š" class="headerlink" title="2.2.2æµ‹è¯•å…¨ç½‘æ˜¯å¦äº’é€šï¼ŒPCé—´äº’Pingç»“æœå¦‚ä¸‹ï¼š"></a>2.2.2æµ‹è¯•å…¨ç½‘æ˜¯å¦äº’é€šï¼ŒPCé—´äº’Pingç»“æœå¦‚ä¸‹ï¼š</h4><p><img src="https://s1.ax1x.com/2020/06/01/tJ1q9f.png" alt="tJ1q9f.png"></p><h4 id="2-2-3é€šè¿‡ACLçš„é…ç½®ä½¿å¾—PC1å’ŒPC2å¯ä»¥æ­£å¸¸é€šä¿¡ï¼Œä½†PC1ä¸èƒ½å’ŒPC3é€šä¿¡"><a href="#2-2-3é€šè¿‡ACLçš„é…ç½®ä½¿å¾—PC1å’ŒPC2å¯ä»¥æ­£å¸¸é€šä¿¡ï¼Œä½†PC1ä¸èƒ½å’ŒPC3é€šä¿¡" class="headerlink" title="2.2.3é€šè¿‡ACLçš„é…ç½®ä½¿å¾—PC1å’ŒPC2å¯ä»¥æ­£å¸¸é€šä¿¡ï¼Œä½†PC1ä¸èƒ½å’ŒPC3é€šä¿¡"></a>2.2.3é€šè¿‡ACLçš„é…ç½®ä½¿å¾—PC1å’ŒPC2å¯ä»¥æ­£å¸¸é€šä¿¡ï¼Œä½†PC1ä¸èƒ½å’ŒPC3é€šä¿¡</h4><h4 id="æ–¹æ³•1"><a href="#æ–¹æ³•1" class="headerlink" title="æ–¹æ³•1"></a>æ–¹æ³•1</h4><p> <strong>åœ¨AR3çš„g0/0/1æ¥å£æ‹’ç»PC1çš„è®¿é—®</strong> ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[AR3]acl</span> <span class="string">2000</span></span><br><span class="line"><span class="meta">[AR3-acl-basic-2000]rule</span> <span class="string">deny source 192.168.10.2 0</span></span><br><span class="line"><span class="attr">[AR3-acl-basic-2000]quit</span></span><br><span class="line"><span class="meta">[AR3]interface</span> <span class="string">GigabitEthernet0/0/1</span></span><br><span class="line"><span class="comment"># åœ¨GigabitEthernet0/0/1æ¥å£è°ƒç”¨</span></span><br><span class="line"><span class="meta">[AR3-GigabitEthernet0/0/1]traffic-filter</span> <span class="string">outbound acl 2000</span></span><br><span class="line"><span class="attr">[AR3-GigabitEthernet0/0/1]quit</span></span><br></pre></td></tr></table></figure><p><strong>ç»“æœï¼š</strong></p><p><strong>PC1 Ping PC3ï¼š</strong></p><p><img src="https://s1.ax1x.com/2020/06/01/tJ39Nq.png" alt="tJ39Nq.png"></p><p><strong>PC2 Ping PC3ï¼š</strong></p><p><img src="https://s1.ax1x.com/2020/06/01/tJ3iCV.png" alt="tJ3iCV.png"></p><h4 id="æ–¹æ³•2"><a href="#æ–¹æ³•2" class="headerlink" title="æ–¹æ³•2"></a>æ–¹æ³•2</h4><p> <strong>åœ¨AR3ä¸Šåªå…è®¸PC2æ‹’ç»PC1</strong>ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ é™¤æ³•ä¸€é…ç½®</span></span><br><span class="line"><span class="meta">[AR3]undo</span> <span class="string">acl 200</span></span><br><span class="line"><span class="comment"># å…è®¸PC2è®¿é—® æ‹’ç»PC1</span></span><br><span class="line"><span class="meta">[AR3]acl</span> <span class="string">2000</span></span><br><span class="line"><span class="meta">[AR3-acl-basic-2000]rule</span> <span class="string">permit source 192.168.20.2 0</span></span><br><span class="line"><span class="meta">[AR3-acl-basic-2000]rule</span> <span class="string">deny source any</span></span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><p><strong>PC1 Ping PC3ï¼š</strong></p><p><img src="https://s1.ax1x.com/2020/06/01/tJ39Nq.png" alt="tJ39Nq.png"></p><p><strong>PC2 Ping PC3ï¼š</strong></p><p><img src="https://s1.ax1x.com/2020/06/01/tJ3iCV.png" alt="tJ3iCV.png"></p><h4 id="2-2-4-AR1è¿œç¨‹ç™»å½•åˆ°AR3ï¼Œä½†ä¸¤è€…ä¸èƒ½pingé€šï¼ŒPC1ï¼ŒPC2ä»èƒ½æ­£å¸¸é€šä¿¡"><a href="#2-2-4-AR1è¿œç¨‹ç™»å½•åˆ°AR3ï¼Œä½†ä¸¤è€…ä¸èƒ½pingé€šï¼ŒPC1ï¼ŒPC2ä»èƒ½æ­£å¸¸é€šä¿¡" class="headerlink" title="2.2.4 AR1è¿œç¨‹ç™»å½•åˆ°AR3ï¼Œä½†ä¸¤è€…ä¸èƒ½pingé€šï¼ŒPC1ï¼ŒPC2ä»èƒ½æ­£å¸¸é€šä¿¡"></a>2.2.4 AR1è¿œç¨‹ç™»å½•åˆ°AR3ï¼Œä½†ä¸¤è€…ä¸èƒ½pingé€šï¼ŒPC1ï¼ŒPC2ä»èƒ½æ­£å¸¸é€šä¿¡</h4><ol><li><p>é¦–å…ˆåœ¨AR3ä¸­è®¾ç½®telnetè¿œç¨‹ç™»é™†ï¼Œé…ç½®å¦‚ä¸‹:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ æ‰åŸæ¥çš„é…ç½®</span></span><br><span class="line"><span class="meta">[AR3]undo</span> <span class="string">acl 2000 </span></span><br><span class="line"><span class="comment"># è®¾ç½®è¿œç¨‹ç™»é™†</span></span><br><span class="line"><span class="meta">[AR3]user-interface</span> <span class="string">vty 0 4</span></span><br><span class="line"><span class="meta">[AR3-ui-vty0-4]authentication-mode</span> <span class="string">password</span></span><br><span class="line"><span class="attr">Please</span> <span class="string">configure the login password (maximum length 16):admin</span></span><br></pre></td></tr></table></figure></li><li><p>æµ‹è¯•è¿œç¨‹ç™»é™†é…ç½®æ˜¯å¦æ­£ç¡®ã€‚</p><p>AR1ä¸­è¿œç¨‹ç™»é™†AR3ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://s1.ax1x.com/2020/06/01/tJ3K4x.png" alt="tJ3K4x.png"></p><p>å¯è§ï¼Œèƒ½å¤Ÿç™»é™†ã€‚</p></li><li><p>é€šè¿‡ACLé…ç½®å®ç°AR1-&gt;AR3æ‹’ç»pingï¼Œä½†æ˜¯å¯ä»¥è¿œç¨‹ç™»é™†ã€‚</p><p>åœ¨AR2ä¸­åšå¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[AR2]acl</span> <span class="string">3000</span></span><br><span class="line"><span class="meta">[AR2-acl-adv-3000]rule</span> <span class="string">deny icmp source 12.1.1.1 0 destination 24.1.1.2 0</span></span><br><span class="line"><span class="attr">[AR2-acl-adv-3000]quit</span></span><br><span class="line"><span class="meta">[AR2]interface</span> <span class="string">GigabitEthernet0/0/0</span></span><br><span class="line"><span class="meta">[AR2-GigabitEthernet0/0/0]traffic-filter</span> <span class="string">inbound acl 3000</span></span><br><span class="line"><span class="attr">[AR2-GigabitEthernet0/0/0]quit</span></span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://s1.ax1x.com/2020/06/01/tJ33vD.png" alt="tJ33vD.png"></p><p><img src="https://s1.ax1x.com/2020/06/01/tJ3NVA.png" alt="tJ3NVA.png"></p></li></ol><h2 id="3ã€é…ç½®NATã€‚åœ¨ä¼ä¸šå†…éƒ¨ç»“æ„åŒ–åˆ†å±‚ä½¿ç”¨NATåœ°å€ã€‚é…ç½®é˜²ç«å¢™ï¼Œç¦æ­¢æŸç§ç½‘ç»œæœåŠ¡ï¼ˆé˜²ç«å¢™åœ¨ä¼ä¸šå†…ç½‘ä¸å¤–ç½‘ä¹‹é—´ï¼‰ã€‚"><a href="#3ã€é…ç½®NATã€‚åœ¨ä¼ä¸šå†…éƒ¨ç»“æ„åŒ–åˆ†å±‚ä½¿ç”¨NATåœ°å€ã€‚é…ç½®é˜²ç«å¢™ï¼Œç¦æ­¢æŸç§ç½‘ç»œæœåŠ¡ï¼ˆé˜²ç«å¢™åœ¨ä¼ä¸šå†…ç½‘ä¸å¤–ç½‘ä¹‹é—´ï¼‰ã€‚" class="headerlink" title="3ã€é…ç½®NATã€‚åœ¨ä¼ä¸šå†…éƒ¨ç»“æ„åŒ–åˆ†å±‚ä½¿ç”¨NATåœ°å€ã€‚é…ç½®é˜²ç«å¢™ï¼Œç¦æ­¢æŸç§ç½‘ç»œæœåŠ¡ï¼ˆé˜²ç«å¢™åœ¨ä¼ä¸šå†…ç½‘ä¸å¤–ç½‘ä¹‹é—´ï¼‰ã€‚"></a>3ã€é…ç½®NATã€‚åœ¨ä¼ä¸šå†…éƒ¨ç»“æ„åŒ–åˆ†å±‚ä½¿ç”¨NATåœ°å€ã€‚é…ç½®é˜²ç«å¢™ï¼Œç¦æ­¢æŸç§ç½‘ç»œæœåŠ¡ï¼ˆé˜²ç«å¢™åœ¨ä¼ä¸šå†…ç½‘ä¸å¤–ç½‘ä¹‹é—´ï¼‰ã€‚</h2><h2 id="é˜²ç«å¢™NATé…ç½®"><a href="#é˜²ç«å¢™NATé…ç½®" class="headerlink" title="é˜²ç«å¢™NATé…ç½®"></a>é˜²ç«å¢™NATé…ç½®</h2><h3 id="3-1å®éªŒæ‹“æ‰‘"><a href="#3-1å®éªŒæ‹“æ‰‘" class="headerlink" title="3.1å®éªŒæ‹“æ‰‘"></a>3.1å®éªŒæ‹“æ‰‘</h3><p><img src="https://s1.ax1x.com/2020/06/01/tJ3yrQ.png" alt="tJ3yrQ.png"></p><h3 id="3-2å®éªŒæ­¥éª¤"><a href="#3-2å®éªŒæ­¥éª¤" class="headerlink" title="3.2å®éªŒæ­¥éª¤"></a>3.2å®éªŒæ­¥éª¤</h3><h4 id="3-2-1æ ¹æ®æ‹“æ‰‘é…ç½®è·¯ç”±å™¨ã€é˜²ç«å¢™ã€PCçš„ipåŠæ©ç ã€‚"><a href="#3-2-1æ ¹æ®æ‹“æ‰‘é…ç½®è·¯ç”±å™¨ã€é˜²ç«å¢™ã€PCçš„ipåŠæ©ç ã€‚" class="headerlink" title="3.2.1æ ¹æ®æ‹“æ‰‘é…ç½®è·¯ç”±å™¨ã€é˜²ç«å¢™ã€PCçš„ipåŠæ©ç ã€‚"></a>3.2.1æ ¹æ®æ‹“æ‰‘é…ç½®è·¯ç”±å™¨ã€é˜²ç«å¢™ã€PCçš„ipåŠæ©ç ã€‚</h4><h4 id="3-2-2åœ¨AR1ä¸­é…ç½®ä¸€æ¡å»å¾€é˜²ç«å¢™GEç«¯å£çš„é»˜è®¤è·¯ç”±ã€‚"><a href="#3-2-2åœ¨AR1ä¸­é…ç½®ä¸€æ¡å»å¾€é˜²ç«å¢™GEç«¯å£çš„é»˜è®¤è·¯ç”±ã€‚" class="headerlink" title="3.2.2åœ¨AR1ä¸­é…ç½®ä¸€æ¡å»å¾€é˜²ç«å¢™GEç«¯å£çš„é»˜è®¤è·¯ç”±ã€‚"></a>3.2.2åœ¨AR1ä¸­é…ç½®ä¸€æ¡å»å¾€é˜²ç«å¢™GEç«¯å£çš„é»˜è®¤è·¯ç”±ã€‚</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[AR1]ip</span> <span class="string">route-static 0.0.0.0 0.0.0.0 11.0.0.1</span></span><br></pre></td></tr></table></figure><h4 id="3-2-3åœ¨é˜²ç«å¢™ä¸­å°†ç«¯å£åŠ å…¥å¯¹åº”çš„trustã€dmzã€untruståŸŸä¸­"><a href="#3-2-3åœ¨é˜²ç«å¢™ä¸­å°†ç«¯å£åŠ å…¥å¯¹åº”çš„trustã€dmzã€untruståŸŸä¸­" class="headerlink" title="3.2.3åœ¨é˜²ç«å¢™ä¸­å°†ç«¯å£åŠ å…¥å¯¹åº”çš„trustã€dmzã€untruståŸŸä¸­"></a>3.2.3åœ¨é˜²ç«å¢™ä¸­å°†ç«¯å£åŠ å…¥å¯¹åº”çš„trustã€dmzã€untruståŸŸä¸­</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[SRG]firewall</span> <span class="string">zone trust</span></span><br><span class="line"><span class="meta">[SRG-zone-trust]add</span> <span class="string">interface g0/0/1Â å°†æ¥å£åŠ å…¥truståŒºåŸŸï¼ˆé»˜è®¤å®‰å…¨çº§åˆ«85ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="meta">[SRG]firewall</span> <span class="string">zone trust</span></span><br><span class="line"><span class="meta">[SRG-zone-trust]add</span> <span class="string">interface g0/0/3å°†æ¥å£åŠ å…¥dmz</span></span><br><span class="line"></span><br><span class="line"><span class="meta">[SRG]firewall</span> <span class="string">zone untrust</span></span><br><span class="line"><span class="meta">[SRG-zone-untrust]add</span> <span class="string">interface g0/0/2å°†æ¥å£é”®å…¥untruståŒºåŸŸï¼ˆå®‰å…¨çº§åˆ«5ï¼‰</span></span><br><span class="line"><span class="meta">[SRG]ip</span> <span class="string">route-static 192.168.10.0 24 11.0.0.2</span></span><br></pre></td></tr></table></figure><h4 id="3-2-4é™æ€NATï¼šä¸€å¯¹ä¸€"><a href="#3-2-4é™æ€NATï¼šä¸€å¯¹ä¸€" class="headerlink" title="3.2.4é™æ€NATï¼šä¸€å¯¹ä¸€"></a>3.2.4é™æ€NATï¼šä¸€å¯¹ä¸€</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é…ç½®å°†å†…ç½‘åœ°å€192.168.10.10 æ˜ å°„åˆ°12.0.0.10åœ°å€</span></span><br><span class="line"><span class="meta">SRG]nat</span> <span class="string">server global 12.0.0.10 inside 192.168.10.10</span></span><br><span class="line"><span class="meta">[SRG]policy</span> <span class="string">interzone trust untrust outbound Â </span></span><br><span class="line"><span class="comment">#è¿›å…¥truståˆ°untrustå‡ºå£æ–¹å‘ç­–ç•¥</span></span><br><span class="line"><span class="meta">[SRG-policy-interzone-trust-untrust-outbound]policy</span> <span class="string">1 åˆ›å»ºä¸€ä¸ªç­–ç•¥</span></span><br><span class="line"><span class="meta">[SRG-policy-interzone-trust-untrust-outbound-1]policy</span> <span class="string">service service-set icmpÂ æœåŠ¡ä¸ºICMPåè®®</span></span><br><span class="line"><span class="meta">[SRG-policy-interzone-trust-untrust-outbound-1]action</span> <span class="string">Â permit</span></span><br></pre></td></tr></table></figure><p><strong>æµ‹è¯•ï¼š</strong></p><p>PC1 Ping AR2 GE0/0/0ç«¯å£</p><p><img src="https://s1.ax1x.com/2020/06/01/tJ35xU.png" alt="tJ35xU.png"></p><p>AR2 GE0/0/0ç«¯å£æ•è·æŠ¥æ–‡å¦‚ä¸‹ï¼š</p><p><img src="https://s1.ax1x.com/2020/06/01/tJ37qJ.png" alt="tJ37qJ.png"></p><p>å‘ç°PC1çš„ipåœ°å€ä¸º12.0.0.10ï¼Œå°†å†…ç½‘ip192.168.10.10æ˜ å°„ä¸ºå…¬ç½‘ip12.0.0.10ã€‚</p><h4 id="3-2-5åŠ¨æ€NATï¼šå¤šå¯¹å¤šï¼ˆæœåŠ¡å™¨ï¼‰"><a href="#3-2-5åŠ¨æ€NATï¼šå¤šå¯¹å¤šï¼ˆæœåŠ¡å™¨ï¼‰" class="headerlink" title="3.2.5åŠ¨æ€NATï¼šå¤šå¯¹å¤šï¼ˆæœåŠ¡å™¨ï¼‰"></a>3.2.5åŠ¨æ€NATï¼šå¤šå¯¹å¤šï¼ˆæœåŠ¡å™¨ï¼‰</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ é™¤é™æ€NAT</span></span><br><span class="line"><span class="meta">[SRG]undo</span> <span class="string">nat server gloabl 12.0.0.10 inside 192.168.10.10</span></span><br><span class="line"><span class="comment"># åˆ›å»ºnatåœ°å€æ± </span></span><br><span class="line"><span class="meta">[SRG]nat</span> <span class="string">address-group 1 12.0.0.20 12.0.0.50Â Â </span></span><br><span class="line"><span class="meta">[SRG]nat-policy</span> <span class="string">interzone trust untrust outbound</span></span><br><span class="line"><span class="meta">[SRG-nat-policy-interzone-trust-untrust-outbound]policy</span> <span class="string">1</span></span><br><span class="line"><span class="comment"># é…ç½®æºIPåœ°å€</span></span><br><span class="line"><span class="meta">[SRG-nat-policy-interzone-trust-untrust-outbound-1]policy</span> <span class="string">source 192.168.10.0 mask 24 </span></span><br><span class="line"><span class="comment"># é…ç½®åŠ¨ä½œä¸ºæºIPè¿›è¡Œnat</span></span><br><span class="line"><span class="meta">[SRG-nat-policy-interzone-trust-untrust-outbound-1]action</span> <span class="string">source-nat </span></span><br><span class="line"><span class="comment"># å…³è”natåœ°å€æ± </span></span><br><span class="line"><span class="meta">[SRG-nat-policy-interzone-trust-untrust-outbound-1]address-groupÂ 1</span> <span class="string">no-pat</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•ï¼šPC1 Ping AR2 GE0/0/0ç«¯å£ï¼Œå¹¶åœ¨AR2 GE0/0/0ç«¯å£æ•è·æŠ¥æ–‡ï¼š</p><p><img src="https://s1.ax1x.com/2020/06/01/tJ3XPx.png" alt="tJ3XPx.png"></p><p>å°†å†…ç½‘ip192.168.10.10æ˜ å°„ä¸ºå…¬ç½‘ip12.0.0.20ã€‚</p><p>ä¿®æ”¹PC1 ipåœ°å€ä¸º192.168.10.11ï¼Œåœ¨è¿›è¡Œæµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://s1.ax1x.com/2020/06/01/tJ8UL4.png" alt="tJ8UL4.png"></p><p>å°†å†…ç½‘ip192.168.10.11æ˜ å°„ä¸ºå…¬ç½‘ip12.0.0.21ã€‚</p><h4 id="3-2-6åŠ¨æ€NATï¼šä¸€å¯¹å¤šï¼ˆæœ€å¸¸ç”¨ï¼‰"><a href="#3-2-6åŠ¨æ€NATï¼šä¸€å¯¹å¤šï¼ˆæœ€å¸¸ç”¨ï¼‰" class="headerlink" title="3.2.6åŠ¨æ€NATï¼šä¸€å¯¹å¤šï¼ˆæœ€å¸¸ç”¨ï¼‰"></a>3.2.6åŠ¨æ€NATï¼šä¸€å¯¹å¤šï¼ˆæœ€å¸¸ç”¨ï¼‰</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[SRG]nat-policy</span> <span class="string">interzone trust untrust outbound</span></span><br><span class="line"><span class="comment"># åˆ é™¤natå¤šå¯¹å¤šé…ç½®</span></span><br><span class="line"><span class="meta">[SRG-nat-policy-interzone-trust-untrust-outbound]undo</span> <span class="string">policy 1</span></span><br><span class="line"><span class="comment"># é…ç½®ä¸€å¯¹å¤š</span></span><br><span class="line"><span class="meta">[SRG-nat-policy-interzone-trust-untrust-outbound]policy</span> <span class="string">2</span></span><br><span class="line"><span class="comment"># é…ç½®æºIPåœ°å€</span></span><br><span class="line"><span class="meta">[SRG-nat-policy-interzone-trust-untrust-outbound-2]policy</span> <span class="string">source 192.168.10.0 mask 24Â </span></span><br><span class="line"><span class="comment"># é…ç½®åŠ¨ä½œä¸ºæºIPè¿›è¡Œnat</span></span><br><span class="line"><span class="meta">[SRG-nat-policy-interzone-trust-untrust-outbound-2]action</span> <span class="string">source-nat Â </span></span><br><span class="line"><span class="comment"># é…ç½®è¦è½¬æ¢çš„åœ°å€ä¸ºg/0/1</span></span><br><span class="line"><span class="meta">[SRG-nat-policy-interzone-trust-untrust-outbound-2]easy-ipÂ GigabitEthernet</span> <span class="string">0/0/1</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p><p>PC1 Ping AR2 GE0/0/0ç«¯å£ï¼Œå¹¶åœ¨AR2 GE0/0/0ç«¯å£æ•è·æŠ¥æ–‡ï¼š</p><p><img src="https://s1.ax1x.com/2020/06/01/tJJkgf.png" alt="tJJkgf.png"></p><p>å°†å†…ç½‘ip192.168.10.11æ˜ å°„ä¸ºå…¬ç½‘ip12.0.0.1ã€‚</p><p>ä¿®æ”¹PC1 ipåœ°å€ä¸º192.168.10.13ï¼Œåœ¨è¿›è¡Œæµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://s1.ax1x.com/2020/06/01/tJJuUs.png" alt="tJJuUs.png"></p><p>å°†å†…ç½‘ip192.168.10.13æ˜ å°„ä¸ºå…¬ç½‘ip12.0.0.1ã€‚</p><p>å®ç°å°†å¤šä¸ªå†…ç½‘ipæ˜ å°„åˆ°åŒä¸€å…¬ç½‘ipä¸‹ã€‚</p><h2 id="4ã€å®éªŒæµ‹è¯•ä¸€ç§ç½‘ç»œæ”»å‡»ï¼Œæ¯”å¦‚SYN-Floodã€MACæ³›æ´ªæ”»å‡»æˆ–ARPæ”»å‡»ã€‚"><a href="#4ã€å®éªŒæµ‹è¯•ä¸€ç§ç½‘ç»œæ”»å‡»ï¼Œæ¯”å¦‚SYN-Floodã€MACæ³›æ´ªæ”»å‡»æˆ–ARPæ”»å‡»ã€‚" class="headerlink" title="4ã€å®éªŒæµ‹è¯•ä¸€ç§ç½‘ç»œæ”»å‡»ï¼Œæ¯”å¦‚SYN_Floodã€MACæ³›æ´ªæ”»å‡»æˆ–ARPæ”»å‡»ã€‚"></a>4ã€å®éªŒæµ‹è¯•ä¸€ç§ç½‘ç»œæ”»å‡»ï¼Œæ¯”å¦‚SYN_Floodã€MACæ³›æ´ªæ”»å‡»æˆ–ARPæ”»å‡»ã€‚</h2><h2 id="é€‰æ‹©ï¼šMACåœ°å€æ¬ºéª—ä¸MACåœ°å€æ³›æ´ªæ”»å‡»"><a href="#é€‰æ‹©ï¼šMACåœ°å€æ¬ºéª—ä¸MACåœ°å€æ³›æ´ªæ”»å‡»" class="headerlink" title="é€‰æ‹©ï¼šMACåœ°å€æ¬ºéª—ä¸MACåœ°å€æ³›æ´ªæ”»å‡»"></a>é€‰æ‹©ï¼šMACåœ°å€æ¬ºéª—ä¸MACåœ°å€æ³›æ´ªæ”»å‡»</h2><h3 id="4-1å®éªŒæ‹“æ‰‘"><a href="#4-1å®éªŒæ‹“æ‰‘" class="headerlink" title="4.1å®éªŒæ‹“æ‰‘"></a>4.1å®éªŒæ‹“æ‰‘</h3><p><img src="https://s1.ax1x.com/2020/06/01/tJJQCq.png" alt="tJJQCq.png"></p><p>å„ä¸ªè®¾å¤‡ipã€MACå‡ä¸ºçœŸå®å­˜åœ¨çš„ï¼Œæ²¡æœ‰é€ å‡å«Œç–‘ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><ul><li><strong>ç½‘å…³ï¼š</strong></li></ul><p><a href="https://imgchr.com/i/tJJGKU" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/01/tJJGKU.png" alt="tJJGKU.png"></a></p><ul><li><p><strong>Win10ï¼š</strong></p><p><img src="https://s1.ax1x.com/2020/06/01/tJJyrD.png" alt="tJJyrD.png"></p></li><li><p><strong>Win7ï¼š</strong></p><p><img src="https://s1.ax1x.com/2020/06/01/tJJfPI.png" alt="tJJfPI.png"></p></li></ul><h3 id="4-2å®éªŒæ­¥éª¤"><a href="#4-2å®éªŒæ­¥éª¤" class="headerlink" title="4.2å®éªŒæ­¥éª¤"></a>4.2å®éªŒæ­¥éª¤</h3><h4 id="4-2-1MACè¯ˆéª—"><a href="#4-2-1MACè¯ˆéª—" class="headerlink" title="4.2.1MACè¯ˆéª—"></a>4.2.1MACè¯ˆéª—</h4><ol><li><p>æ”»å‡»åŸç†ï¼š</p><p> MACåœ°å€æ¬ºéª—æ˜¯æ•°æ®é“¾è·¯å±‚æ”»å‡»ï¼Œå®ƒæ˜¯åˆ©ç”¨<strong>äº¤æ¢æœºç«¯å£å­¦ä¹ çš„æ¼æ´</strong>ï¼Œé€šè¿‡å®¢æˆ·ç«¯å‘äº¤æ¢æœºå‘é€æ¬ºéª—æŠ¥æ–‡ã€æ”»å‡»äº¤æ¢æœºçš„CAMè¡¨çš„æ–¹å¼ï¼Œä½¿äº¤æ¢æœºCAMè¡¨çš„è®°å½•ä¸çœŸå®çš„ä¸»æœºå¯¹åº”MACåœ°å€ä¸ä¸€è‡´ï¼Œä»è€Œä½¿äº¤æ¢æœºå°†æŠ¥æ–‡é”™è¯¯è½¬å‘ç»™æ”»å‡»è€…ã€‚ </p></li><li><p>æå‡ºä¸¤ä¸ªé—®é¢˜ï¼Œäº¤æ¢æœºçš„ç«¯å£å­¦ä¹ æ˜¯å¦‚ä½•è¿›è¡Œçš„ï¼Ÿæœ‰ä»€ä¹ˆæ¼æ´ï¼Ÿæ€è€ƒä¸€ä¸‹â€¦</p><ul><li><p>é¦–å…ˆï¼Œæ¸…ç©ºå¹¶æŸ¥çœ‹äº¤æ¢æœºLSW1çš„CAMè¡¨ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ¸…ç©º</span></span><br><span class="line"><span class="meta">[Huawei]undo</span> <span class="string">mac-address all</span></span><br><span class="line"><span class="comment">#æŸ¥çœ‹</span></span><br><span class="line"><span class="meta">ã€Huaweiã€‘display</span> <span class="string">mac-address</span></span><br><span class="line"><span class="attr">[Huawei]</span></span><br></pre></td></tr></table></figure><p>å¯è§CAMè¡¨å·²è¢«æ¸…ç©ºã€‚</p></li><li><p>æˆ‘ä»¬ä»PC1ä¸Šå‘PC2å‘ä¸€ä¸ªæ„é€ çš„udpåŒ…ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://s1.ax1x.com/2020/06/01/tJJvR0.png" alt="tJJvR0.png"></p></li><li><p>åœ¨äº¤æ¢æœºä¸ŠæŸ¥è¯¢CAMè¡¨ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://s1.ax1x.com/2020/06/01/tJYuLD.png" alt="tJYuLD.png"></p><p>å‘ç°å·²ç»å­¦ä¹ åˆ°ä¸€æ¡è®°å½•ï¼ŒMACåœ°å€ä»¥åŠå¯¹åº”çš„ç«¯å£å·ã€‚</p></li><li><p>å†æ„é€ ä¸€ä¸ªæ•°æ®åŒ…ï¼Œç”±PC1å‘ç»™PC2ï¼Œå°†æºMACåœ°å€æ”¹ä½Win10çš„MACåœ°å€ã€‚</p><p><img src="https://s1.ax1x.com/2020/06/01/tJY3FA.png" alt="tJY3FA.png"></p></li><li><p>å†æ¬¡æŸ¥çœ‹CAMè¡¨ã€‚</p><p><img src="https://s1.ax1x.com/2020/06/01/tJYUOS.png" alt="tJYUOS.png"></p><p>å‘ç°å¤šäº†ä¸¤å¤©è®°å½•åˆ†åˆ«æ˜¯Win10çš„MACåœ°å€å’Œç½‘å…³çš„MACåœ°å€åŠå¯¹åº”ç«¯å£å·ã€‚åœ¨æ­¤æœ¬åº”è¯¥åªæ˜¯å­¦åˆ°Win10çš„MACåœ°å€åŠå¯¹åº”ç«¯å£å·ï¼Œå…³äºå­¦åˆ°ç½‘ç®¡è®°å½•çš„çŒœæµ‹æ˜¯ï¼Œåœ¨æ­¤æœŸé—´äº¤æ¢æœºä¸ç½‘ç®¡è¿›è¡ŒæŸç§æ•°æ®äº¤æ¢ã€‚ä»è€Œäº¤æ¢æœºå­¦åˆ°äº†å…³äºç½‘å…³çš„è®°å½•ã€‚</p></li></ul></li><li><p>æ˜ç™½äº†äº¤æ¢æœºç«¯å£å­¦ä¹ çš„åŸç†ï¼Œç°åœ¨æ¥ä¼ªé€ æ•°æ®åŒ…ï¼Œé€ æˆMACåœ°å€æ¬ºéª—ï¼ŒåŒæ—¶å‡†å¤‡ä»¥ä¸‹ä¸‰ä¸ªæ¡ä»¶ï¼š</p><ol><li>åœ¨PC1ä¸Šä¼ªé€ æºMACä¸ºWin10çš„MACåœ°å€ï¼Œä¸åœçš„å‘UDPåŒ…ç»™PC2ã€‚</li><li>åœ¨LSW1çš„ Ehternet 0/0/1å’ŒEthenet 0/0/3ç«¯å£åŒæ—¶æŠ“åŒ… ã€‚</li><li>åœ¨PC2æ„é€ PC2åˆ°Win10çš„æ•°æ®åŒ…ã€‚</li></ol><p>æŠ“åŒ…ç»“æœå¦‚ä¸‹ï¼š</p><p><strong>Ehternet 0/0/1:</strong></p><p><img src="https://s1.ax1x.com/2020/06/01/tJY6S0.png" alt="tJY6S0.png"></p><p><strong>Ehternet 0/0/3:</strong></p><p><img src="https://s1.ax1x.com/2020/06/01/tJYHl6.png" alt="tJYHl6.png"></p><p>ç”±æ­¤å¯è§ï¼ŒåŸæœ¬ç”±PC2å‘ç»™Win10çš„æ•°æ®åŒ…ï¼Œè¢«PC1æ¬ºéª—äº¤æ¢æœºåï¼Œäº¤æ¢æœºå°†æŠ¥æ–‡è½¬å‘ç»™äº†PC1ï¼Œè¿™æ ·PC1æˆåŠŸå®Œæˆäº†MACåœ°å€æ¬ºéª—æ”»å‡»ã€‚ </p></li></ol><h4 id="4-2-2MACåœ°å€æ´ªæ³›æ”»å‡»"><a href="#4-2-2MACåœ°å€æ´ªæ³›æ”»å‡»" class="headerlink" title="4.2.2MACåœ°å€æ´ªæ³›æ”»å‡»"></a>4.2.2MACåœ°å€æ´ªæ³›æ”»å‡»</h4><ol><li><p>1ã€æ¼æ´åŸç†<br>æ¯å°äº¤æ¢æœºçš„CAMè¡¨éƒ½æœ‰æœ€å¤§è®°å½•æ¡æ•°ï¼Œå½“äº¤æ¢æœºç«¯å£å­¦ä¹ å¾—åˆ°çš„è®°å½•å¤§äºäº¤æ¢æœºCAMè¡¨æ¡æ•°ä¸Šé™æ—¶ï¼Œäº¤æ¢æœºæ”¶åˆ°ä¸€ä¸ªç½‘ç»œå¸§ï¼Œåªè¦å…¶ç›®çš„ç«™çš„MACåœ°å€ä¸å­˜åœ¨äºè¯¥äº¤æ¢æœºCAMè¡¨ä¸­ï¼Œé‚£ä¹ˆè¯¥å¸§ä¼šä»¥å¹¿æ’­çš„æ–¹å¼å‘å‘äº¤æ¢æœºçš„æ¯ä¸€ä¸ªç«¯å£ï¼Œæ­¤æ—¶çš„äº¤æ¢æœºå°±ç›¸å½“äºä¸€ä¸ªé›†çº¿å™¨HUBï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›‘å¬ç½‘ç»œä¸­çš„æ‰€æœ‰é€šè®¯æŠ¥æ–‡ã€‚</p></li><li><p>æ”»å‡»è¿‡ç¨‹<br>ä»¥kaliä¸ºæ”»å‡»æœºï¼Œä½¿ç”¨macofå‘½ä»¤å‘ç½‘ç»œä¸­å‘é€å¤§é‡ç½‘ç»œä¸å­˜åœ¨çš„æºmacåœ°å€ï¼Œå µå¡äº¤æ¢æœºçš„CAMè¡¨ã€‚ </p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">lcx@kali</span>:<span class="string">~$apt-get install dsniff#å®‰è£…macof</span></span><br><span class="line"><span class="meta">lcx@kali</span>:<span class="string">~$ macof</span></span><br><span class="line"><span class="attr">de</span>:<span class="string">f0:1b:1c:6f:8e ba:8d:41:6:3d:7a 0.0.0.0.25215 &gt; 0.0.0.0.49125: S 475078686:475078686(0) win 512</span></span><br><span class="line"><span class="attr">ea</span>:<span class="string">38:be:33:e5:aa 4d:ce:29:60:3c:2f 0.0.0.0.39934 &gt; 0.0.0.0.238: S 1559529363:1559529363(0) win 512</span></span><br><span class="line"><span class="attr">b5</span>:<span class="string">ea:9a:4:2d:1c 3:33:5f:73:fa:d2 0.0.0.0.58068 &gt; 0.0.0.0.18986: S 697518561:697518561(0) win 512</span></span><br><span class="line"><span class="attr">31</span>:<span class="string">1f:6c:72:6f:80 7c:a8:df:55:99:25 0.0.0.0.29320 &gt; 0.0.0.0.56619: S 444895901:444895901(0) win 512</span></span><br><span class="line"><span class="attr">2</span>:<span class="string">47:e7:37:ca:19 a9:73:33:66:61:2d 0.0.0.0.54528 &gt; 0.0.0.0.25861: S 993143653:993143653(0) win 512</span></span><br><span class="line"><span class="attr">3b</span>:<span class="string">75:bd:54:e7:55 4d:d1:68:4:5a:f0 0.0.0.0.28814 &gt; 0.0.0.0.35766: S 1430997091:1430997091(0) win 512</span></span><br><span class="line"><span class="attr">e7</span>:<span class="string">81:bb:79:4b:af df:ed:92:76:fe:79 0.0.0.0.59194 &gt; 0.0.0.0.18284: S 1586191808:1586191808(0) win 512</span></span><br><span class="line"><span class="attr">9b</span>:<span class="string">28:c8:4d:35:bb 4c:d2:d9:5b:3f:d0 0.0.0.0.46568 &gt; 0.0.0.0.15767: S 1249153469:1249153469(0) win 512</span></span><br><span class="line"><span class="attr">13</span>:<span class="string">6:d:71:2a:26 5f:82:7:70:d6:4c 0.0.0.0.41050 &gt; 0.0.0.0.34579: S 1375163656:1375163656(0) win 512</span></span><br><span class="line"><span class="attr">94</span>:<span class="string">cb:82:1f:a2:22 2e:4:26:69:88:cf 0.0.0.0.44712 &gt; 0.0.0.0.33754: S 1652107051:1652107051(0) win 512</span></span><br><span class="line"><span class="attr">3f</span>:<span class="string">7c:f7:1b:7:80 13:53:17:53:5c:c6 0.0.0.0.48520 &gt; 0.0.0.0.34351: S 585705839:585705839(0) win 512</span></span><br></pre></td></tr></table></figure></li><li><p>æ­¤æ—¶åœ¨äº¤æ¢æœºæŸ¥çœ‹CAMè¡¨ã€‚</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[Huawei]display</span> <span class="string">mac-address</span></span><br><span class="line"><span class="attr">MAC</span> <span class="string">address table of slot 0:</span></span><br><span class="line"><span class="attr">-----------------------------------------------------------------</span></span><br><span class="line"><span class="attr">MAC</span> <span class="string">Address    VLAN/       PEVLAN CEVLAN Port            Type      LSP/LSR-ID  </span></span><br><span class="line">               <span class="meta">VSI/SI</span>                                              <span class="string">MAC-Tunnel  </span></span><br><span class="line"><span class="attr">-----------------------------------------------------------------</span></span><br><span class="line"><span class="meta">000c-290f-5de0</span> <span class="string">1           -      -      Eth0/0/3        dynamic   0/-         </span></span><br><span class="line"><span class="meta">5489-984f-5035</span> <span class="string">1           -      -      Eth0/0/2        dynamic   0/-         </span></span><br><span class="line"><span class="meta">000c-2926-219e</span> <span class="string">1           -      -      Eth0/0/3        dynamic   0/-         </span></span><br><span class="line"><span class="meta">f4ee-141d-58de</span> <span class="string">1           -      -      Eth0/0/3        dynamic   0/-         </span></span><br><span class="line"><span class="meta">7c67-a298-eb12</span> <span class="string">1           -      -      Eth0/0/3        dynamic   0/-         </span></span><br><span class="line"><span class="meta">000c-291b-7e0d</span> <span class="string">1           -      -      Eth0/0/3        dynamic   0/-         </span></span><br><span class="line"><span class="meta">0050-56ef-dc6d</span> <span class="string">1           -      -      Eth0/0/3        dynamic   0/-         </span></span><br><span class="line"><span class="meta">000c-296c-fc6e</span> <span class="string">1           -      -      Eth0/0/3        dynamic   0/-         </span></span><br><span class="line"><span class="meta">feef-5464-ecad</span> <span class="string">1           -      -      Eth0/0/3        dynamic   0/-         </span></span><br><span class="line"><span class="meta">eaaa-9473-1926</span> <span class="string">1           -      -      Eth0/0/3        dynamic   0/-         </span></span><br><span class="line"><span class="meta">22a6-7027-c5f4</span> <span class="string">1           -      -      Eth0/0/3        dynamic   0/-         </span></span><br><span class="line"><span class="meta">7019-0f73-c876</span> <span class="string">1           -      -      Eth0/0/3        dynamic   0/-         </span></span><br><span class="line"><span class="meta">2eef-313b-f53f</span> <span class="string">1           -      -      Eth0/0/3        dynamic   0/-         </span></span><br><span class="line"><span class="meta">5682-5743-45c8</span> <span class="string">1           -      -      Eth0/0/3        dynamic   0/-         </span></span><br><span class="line"><span class="meta">7670-c168-505e</span> <span class="string">1           -      -      Eth0/0/3        dynamic   0/-         </span></span><br><span class="line"><span class="meta">8aaa-ba4f-489d</span> <span class="string">1           -      -      Eth0/0/3        dynamic   0/-         </span></span><br><span class="line"><span class="meta">a6a8-2d2a-73a7</span> <span class="string">1           -      -      Eth0/0/3        dynamic   0/-         </span></span><br><span class="line"><span class="meta">120c-2355-b4b5</span> <span class="string">1           -      -      Eth0/0/3        dynamic   0/-         </span></span><br><span class="line"><span class="meta">5833-be1f-0aa6</span> <span class="string">1           -      -      Eth0/0/3        dynamic   0/-         </span></span><br><span class="line"><span class="meta">f438-0117-c0dc</span> <span class="string">1           -      -      Eth0/0/3        dynamic   0/-         </span></span><br><span class="line"><span class="meta">dee0-7b40-1207</span> <span class="string">1           -      -      Eth0/0/3        dynamic   0/-         </span></span><br><span class="line"><span class="meta">4af0-244c-25d9</span> <span class="string">1           -      -      Eth0/0/3        dynamic   0/-         </span></span><br><span class="line"><span class="meta">f4d0-e92b-4fd5</span> <span class="string">1           -      -      Eth0/0/3        dynamic   0/-         </span></span><br><span class="line"><span class="meta">2859-7003-3924</span> <span class="string">1           -      -      Eth0/0/3        dynamic   0/-         </span></span><br><span class="line"><span class="meta">86ea-0825-52a2</span> <span class="string">1           -      -      Eth0/0/3        dynamic   0/-         </span></span><br><span class="line"><span class="meta">a4fd-c13a-8c3c</span> <span class="string">1           -      -      Eth0/0/3        dynamic   0/-         </span></span><br><span class="line">  <span class="meta">----</span> <span class="string">More ----</span></span><br></pre></td></tr></table></figure><p>å‘ç°è¡¨ä¸­å¤§é‡é™Œç”ŸMACåœ°å€è®°å½•ï¼ŒåŒæ—¶æ ¹æ®ç«¯å£ç»‘å®šå¯ä»¥çœ‹åˆ°ç»‘å®šæ¥è‡ªEthernet0/0/3ï¼Œè¯´æ˜è¿™ä¸ªæ”»å‡»æ¥è‡ªè¿™æ¥å£ã€‚ </p></li></ol><h2 id="5ã€é…ç½®VPNã€‚ä¼ä¸šå†…ç½‘ä¸å¤–ç½‘ä¹‹é—´å¯èƒ½æœ‰é˜²ç«å¢™ï¼Œä¹Ÿå¯èƒ½æœ‰NATã€‚ä»ä¼ä¸šå¤–éƒ¨ï¼Œç”¨æˆ·ä¸èƒ½ç›´æ¥è®¿é—®ä¼ä¸šå†…éƒ¨ã€‚ä¼ä¸šå‘˜å·¥å¤–å‡ºï¼Œæˆ–è·¨åœ°åŒºã€è·¨å›½å®¶ä¼ä¸šéƒ½æœ‰è·¨è¶Šå…¬ä¼—äº’è”ç½‘ï¼Œè®¿é—®ä¼ä¸šå†…éƒ¨ç½‘ç»œçš„éœ€æ±‚ã€‚é…ç½®NATæŸç§VPNï¼Œæ¯”å¦‚L2TP-VPN-æˆ–SSL-VPNã€‚"><a href="#5ã€é…ç½®VPNã€‚ä¼ä¸šå†…ç½‘ä¸å¤–ç½‘ä¹‹é—´å¯èƒ½æœ‰é˜²ç«å¢™ï¼Œä¹Ÿå¯èƒ½æœ‰NATã€‚ä»ä¼ä¸šå¤–éƒ¨ï¼Œç”¨æˆ·ä¸èƒ½ç›´æ¥è®¿é—®ä¼ä¸šå†…éƒ¨ã€‚ä¼ä¸šå‘˜å·¥å¤–å‡ºï¼Œæˆ–è·¨åœ°åŒºã€è·¨å›½å®¶ä¼ä¸šéƒ½æœ‰è·¨è¶Šå…¬ä¼—äº’è”ç½‘ï¼Œè®¿é—®ä¼ä¸šå†…éƒ¨ç½‘ç»œçš„éœ€æ±‚ã€‚é…ç½®NATæŸç§VPNï¼Œæ¯”å¦‚L2TP-VPN-æˆ–SSL-VPNã€‚" class="headerlink" title="5ã€é…ç½®VPNã€‚ä¼ä¸šå†…ç½‘ä¸å¤–ç½‘ä¹‹é—´å¯èƒ½æœ‰é˜²ç«å¢™ï¼Œä¹Ÿå¯èƒ½æœ‰NATã€‚ä»ä¼ä¸šå¤–éƒ¨ï¼Œç”¨æˆ·ä¸èƒ½ç›´æ¥è®¿é—®ä¼ä¸šå†…éƒ¨ã€‚ä¼ä¸šå‘˜å·¥å¤–å‡ºï¼Œæˆ–è·¨åœ°åŒºã€è·¨å›½å®¶ä¼ä¸šéƒ½æœ‰è·¨è¶Šå…¬ä¼—äº’è”ç½‘ï¼Œè®¿é—®ä¼ä¸šå†…éƒ¨ç½‘ç»œçš„éœ€æ±‚ã€‚é…ç½®NATæŸç§VPNï¼Œæ¯”å¦‚L2TP VPN æˆ–SSL VPNã€‚"></a>5ã€é…ç½®VPNã€‚ä¼ä¸šå†…ç½‘ä¸å¤–ç½‘ä¹‹é—´å¯èƒ½æœ‰é˜²ç«å¢™ï¼Œä¹Ÿå¯èƒ½æœ‰NATã€‚ä»ä¼ä¸šå¤–éƒ¨ï¼Œç”¨æˆ·ä¸èƒ½ç›´æ¥è®¿é—®ä¼ä¸šå†…éƒ¨ã€‚ä¼ä¸šå‘˜å·¥å¤–å‡ºï¼Œæˆ–è·¨åœ°åŒºã€è·¨å›½å®¶ä¼ä¸šéƒ½æœ‰è·¨è¶Šå…¬ä¼—äº’è”ç½‘ï¼Œè®¿é—®ä¼ä¸šå†…éƒ¨ç½‘ç»œçš„éœ€æ±‚ã€‚é…ç½®NATæŸç§VPNï¼Œæ¯”å¦‚L2TP VPN æˆ–SSL VPNã€‚</h2><p>é‡‡ç”¨äº†IPSec vpnæŠ€æœ¯ã€NATç­‰æŠ€æœ¯ï¼Œæ­å»ºäº†ä¸€ä¸ªç®€å•çš„æ€»å…¬å¸ä¸åˆ†å…¬å¸çš„ç½‘ç»œç¯å¢ƒï¼Œå®ç°æ€»å…¬å¸ä¸åˆ†å…¬å¸çš„æ­£å¸¸è®¿é—® ã€‚</p><h3 id="5-1å®éªŒæ‹“æ‰‘"><a href="#5-1å®éªŒæ‹“æ‰‘" class="headerlink" title="5.1å®éªŒæ‹“æ‰‘"></a>5.1å®éªŒæ‹“æ‰‘</h3><p><img src="https://s1.ax1x.com/2020/06/01/tJt9pt.png" alt="tJt9pt.png"></p><h3 id="5-2å®éªŒç›®çš„"><a href="#5-2å®éªŒç›®çš„" class="headerlink" title="5.2å®éªŒç›®çš„"></a>5.2å®éªŒç›®çš„</h3><p>  FW1å’ŒFW2æ¨¡æ‹Ÿä¼ä¸šè¾¹ç¼˜è®¾å¤‡ï¼Œåˆ†åˆ«åœ¨2å°è®¾å¤‡ä¸Šé…ç½®NATå’ŒIPsec vpnå®ç°2è¾¹ç§ç½‘å¯ä»¥é€šè¿‡vpnäº’ç›¸é€šä¿¡ </p><h3 id="5-3å®éªŒæ­¥éª¤"><a href="#5-3å®éªŒæ­¥éª¤" class="headerlink" title="5.3å®éªŒæ­¥éª¤"></a>5.3å®éªŒæ­¥éª¤</h3><h4 id="5-3-1AR4é…ç½®"><a href="#5-3-1AR4é…ç½®" class="headerlink" title="5.3.1AR4é…ç½®"></a>5.3.1AR4é…ç½®</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[AR4]int</span> <span class="string">g0/0/0</span></span><br><span class="line"><span class="meta">[AR4-GigabitEthernet0/0/1]ip</span> <span class="string">add 100.0.0.2 30</span></span><br><span class="line"><span class="meta">[AR4-GigabitEthernet0/0/1]int</span> <span class="string">g0/0/1</span></span><br><span class="line"><span class="meta">[AR4-GigabitEthernet0/0/0]ip</span> <span class="string">add 200.0.0.2 30</span></span><br></pre></td></tr></table></figure><h4 id="5-3-2-FW1é…ç½®"><a href="#5-3-2-FW1é…ç½®" class="headerlink" title="5.3.2 FW1é…ç½®"></a>5.3.2 FW1é…ç½®</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[FW1]firewall</span> <span class="string">zone trust          //é…ç½®truståŒºåŸŸ</span></span><br><span class="line"><span class="meta">[FW1-zone-trust]add</span> <span class="string">interface g0/0/0    //å°†æ¥å£åŠ å…¥truståŒºåŸŸ</span></span><br><span class="line"><span class="attr">[FW1-zone-trust]quit</span></span><br><span class="line"><span class="meta">[FW1]firewall</span> <span class="string">zone untrust           //é…ç½®untruståŒºåŸŸ</span></span><br><span class="line"><span class="meta">[FW1-zone-untrust]add</span> <span class="string">int g0/0/1          //å°†æ¥å£åŠ å…¥untruståŒºåŸŸ</span></span><br><span class="line"><span class="attr">[FW1-zone-untrust]quit</span></span><br><span class="line"><span class="meta">[FW1]int</span> <span class="string">g0/0/0</span></span><br><span class="line"><span class="meta">[FW1-GigabitEthernet0/0/0]ip</span> <span class="string">add 10.0.0.254 8</span></span><br><span class="line"><span class="meta">[FW1-GigabitEthernet0/0/0]int</span> <span class="string">g0/0/1</span></span><br><span class="line"><span class="meta">[FW1-GigabitEthernet0/0/1]ip</span> <span class="string">add 100.0.0.1 30</span></span><br><span class="line"><span class="attr">[FW1-GigabitEthernet0/0/1]quit</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#é…ç½®NAT</span></span><br><span class="line"><span class="meta">[FW1]ip</span> <span class="string">route-static 0.0.0.0 0.0.0.0 10.0.0.2   //é…ç½®é»˜è®¤è·¯ç”±ä¸Šå…¬ç½‘</span></span><br><span class="line"><span class="meta">[FW1]nat-policy</span> <span class="string">interzone trust untrust outbound </span></span><br><span class="line"><span class="attr">//è¿›å…¥truståˆ°untruståŒºåŸŸoutæ–¹å‘çš„ç­–ç•¥è§†å›¾</span></span><br><span class="line"><span class="meta">[FW1-nat-policy-interzone-trust-untrust-outbound]policy</span> <span class="string">1     //åˆ›å»ºä¸€ä¸ªç­–ç•¥</span></span><br><span class="line"><span class="meta">[FW1-nat-policy-interzone-trust-untrust-outbound-1]policy</span> <span class="string">source 10.0.0.0 0.255.255.255</span></span><br><span class="line"><span class="meta">[FW1-nat-policy-interzone-trust-untrust-outbound-1]policy</span> <span class="string">destination 192.168.1.0 0.0.0.255</span></span><br><span class="line"><span class="meta">[FW1-nat-policy-interzone-trust-untrust-outbound-1]action</span> <span class="string">no-nat </span></span><br><span class="line"><span class="attr">//ä»¥ä¸Šä¸‰æ¡å‘½ä»¤æ„æ€æ˜¯ä¸å…è®¸å°†æºä¸º10.0.0.0/8ç½‘æ®µç›®æ ‡ä¸º192.168.1.0/24ç½‘æ®µçš„æ•°æ®åŒ…è¿›è¡ŒNAT</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[FW1-nat-policy-interzone-trust-untrust-outbound-1]quit</span></span><br><span class="line"><span class="meta">[FW1-nat-policy-interzone-trust-untrust-outbound]policy</span> <span class="string">2  //åˆ›å»ºç­–ç•¥2</span></span><br><span class="line"><span class="meta">[FW1-nat-policy-interzone-trust-untrust-outbound-2]action</span> <span class="string">source-nat</span></span><br><span class="line"><span class="attr">//å…è®¸å¯¹æºIPè¿›è¡ŒNAT</span></span><br><span class="line"><span class="meta">[FW1-nat-policy-interzone-trust-untrust-outbound-2]easy-ip</span> <span class="string">g0/0/1</span></span><br><span class="line"><span class="attr">//å¯¹æ¥å£G0/0/1åœ°å€å¤ç”¨</span></span><br><span class="line"><span class="attr">[FW1-nat-policy-interzone-trust-untrust-outbound-2]quit</span></span><br><span class="line"><span class="attr">[FW1-nat-policy-interzone-trust-untrust-outbound]quit</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#é…ç½®IPSec Ã—Ã—Ã—</span></span><br><span class="line"><span class="attr">é˜¶æ®µä¸€</span></span><br><span class="line"><span class="meta">[FW1]ike</span> <span class="string">proposal 1     //é…ç½®ä¸€ä¸ªå®‰å…¨æè®®</span></span><br><span class="line"><span class="meta">[FW1-ike-proposal-1]authentication-method</span> <span class="string">pre-share   //é…ç½®IKEè®¤è¯æ–¹å¼ä¸ºé¢„å…±äº«å¯†é’¥</span></span><br><span class="line"><span class="meta">[FW-ike-proposal-1]authentication-algorithm</span> <span class="string">sha1   //é…ç½®IKEè®¤è¯ç®—æ³•ä¸ºsha1</span></span><br><span class="line"><span class="meta">[FW1-ike-proposal-1]integrity-algorithm</span> <span class="string">aes-xcbc-96  //é…ç½®IKEå®Œæ•´æ€§ç®—æ³•</span></span><br><span class="line"><span class="meta">[FW1-ike-proposal-1]dh</span> <span class="string">group2  //é…ç½®IKEå¯†é’¥åå•†DHç»„</span></span><br><span class="line"><span class="attr">[FW1-ike-proposal-1]quit</span></span><br><span class="line"><span class="meta">[FW]ike</span> <span class="string">peer FW2             //åˆ›å»ºä¸€ä¸ªIKEå¯¹ç­‰ä½“åå­—ä¸ºFW2</span></span><br><span class="line"><span class="meta">[FW1-ike-peer-usg-2]pre-shared-key</span> <span class="string">123.abc    //é…ç½®é¢„å…±äº«å¯†é’¥</span></span><br><span class="line"><span class="meta">[FW1-ike-peer-usg-2]remote-address</span> <span class="string">200.0.0.1  //é…ç½®å¯¹ç­‰ä½“IPåœ°å€</span></span><br><span class="line"><span class="meta">[FW1-ike-peer-usg-2]ike-proposal</span> <span class="string">1       //è°ƒç”¨ikeå®‰å…¨æè®®</span></span><br><span class="line"><span class="attr">[FW1-ike-peer-usg-2]quit</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">é˜¶æ®µäºŒ</span></span><br><span class="line"><span class="meta">[FW1]ipsec</span> <span class="string">proposal test        //é…ç½®ä¸€ä¸ªipsecå®‰å…¨æè®®</span></span><br><span class="line"><span class="meta">[FW1-ipsec-proposal-test]encapsulation-mode</span> <span class="string">tunnel    //å°è£…æ–¹å¼é‡‡ç”¨éš§é“</span></span><br><span class="line"><span class="meta">[FW1-ipsec-proposal-test]transform</span> <span class="string">esp    //é…ç½®IPSECå®‰å…¨åè®®ä¸ºESP</span></span><br><span class="line"><span class="meta">[FW1-ipsec-proposal-test]esp</span> <span class="string">encryption-algorithm aes   //é…ç½®ESPåè®®åŠ å¯†ç®—æ³•ä¸ºaes</span></span><br><span class="line"><span class="meta">[FW1-ipsec-proposal-test]esp</span> <span class="string">authentication-algorithm sha1  //é…ç½®ESPåè®®è®¤è¯ç®—æ³•</span></span><br><span class="line"><span class="attr">[FW1-ipsec-proposal-test]quit</span></span><br><span class="line"><span class="meta">[FW1]acl</span> <span class="string">3000         //åˆ›å»ºä¸€ä¸ªACLå®šä¹‰æ„Ÿå…´è¶£æµ</span></span><br><span class="line"><span class="meta">[FW1-acl-adv-3000]rule</span> <span class="string">permit ip source 10.0.0.0 0.255.255.255 destination 192.168.1.0 0.0.0.255</span></span><br><span class="line"></span><br><span class="line"><span class="meta">[FW1]ipsec</span> <span class="string">policy map 1 isakmp    //åˆ›å»ºä¸€ä¸ªå®‰å…¨ç­–ç•¥ï¼Œåç§°ä¸ºmap</span></span><br><span class="line"><span class="meta">[FW1-ipsec-policy-isakmp-map-1]ike-peer</span> <span class="string">FW2    //è°ƒç”¨ikeå¯¹ç­‰ä½“</span></span><br><span class="line"><span class="meta">[FW1-ipsec-policy-isakmp-map-1]proposal</span> <span class="string">test     //è°ƒç”¨IPsecå®‰å…¨æè®®</span></span><br><span class="line"><span class="meta">[FW1-ipsec-policy-isakmp-map-1]security</span> <span class="string">acl 3000   //é…ç½®æ„Ÿå…´è¶£æµ</span></span><br><span class="line"><span class="attr">[FW1-ipsec-policy-isakmp-map-1]quit</span></span><br><span class="line"><span class="meta">[FW1]int</span> <span class="string">g0/0/1</span></span><br><span class="line"><span class="meta">[FW1-GigabitEthernet0/0/1]ipsec</span> <span class="string">policy map     //åœ¨å¤–ç½‘å£ä¸Šè°ƒç”¨å®‰å…¨ç­–ç•¥</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#åŒºåŸŸé—´ç­–ç•¥é…ç½®</span></span><br><span class="line"><span class="meta">[FW1]policy</span> <span class="string">interzone trust untrust outbound .</span></span><br><span class="line"><span class="attr">//è¿›å…¥truståˆ°untruståŒºåŸŸoutæ–¹å‘ç­–ç•¥è§†å›¾</span></span><br><span class="line"><span class="meta">[FW1-policy-interzone-trust-untrust-outbound]policy</span> <span class="string">1    //åˆ›å»ºç­–ç•¥</span></span><br><span class="line"><span class="meta">[FW1-policy-interzone-trust-untrust-outbound-1]action</span> <span class="string">permit  </span></span><br><span class="line"><span class="meta">//å…è®¸truståŒºåŸŸæ‰€æœ‰ä¸»æœºè®¿é—®untruståŒºåŸŸ</span> <span class="string"></span></span><br><span class="line"><span class="attr">[FW1-policy-interzone-trust-untrust-outbound-1]quit</span></span><br><span class="line"><span class="attr">[FW1-policy-interzone-trust-untrust-outbound]quit</span></span><br><span class="line"><span class="meta">[FW1]policy</span> <span class="string">interzone trust untrust inbound </span></span><br><span class="line"><span class="attr">//è¿›å…¥truståŒºåŸŸåˆ°untruståŒºåŸŸçš„inæ–¹å‘ç­–ç•¥è§†å›¾</span></span><br><span class="line"><span class="meta">[FW1-policy-interzone-trust-untrust-inbound]policy</span> <span class="string">1</span></span><br><span class="line"><span class="meta">[FW1-policy-interzone-trust-untrust-inbound-1]policy</span> <span class="string">source 192.168.1.0 0.0.0.255</span></span><br><span class="line"><span class="meta">[FW1-policy-interzone-trust-untrust-inbound-1]policy</span> <span class="string">destination 10.0.0.0 0.255.255.255</span></span><br><span class="line"><span class="meta">[FW1-policy-interzone-trust-untrust-inbound-1]action</span> <span class="string">permit </span></span><br><span class="line"><span class="attr">//ä»¥ä¸Šå‘½ä»¤ä¸ºå…è®¸æ•°æ®åŒ…æºåœ°å€ä¸º192.168.1.0/24ç½‘æ®µå’Œç›®æ ‡åœ°å€ä¸º10.0.0.0/8ç½‘æ®µçš„æµé‡è¿‡</span></span><br><span class="line"><span class="attr">[FW1-policy-interzone-trust-untrust-inbound-1]quit</span></span><br><span class="line"><span class="attr">[FW1-policy-interzone-trust-untrust-inbound]quit</span></span><br><span class="line"><span class="meta">[FW1]policy</span> <span class="string">interzone local untrust inbound</span></span><br><span class="line"><span class="attr">//è¿›å…¥localåŒºåŸŸåˆ°untruståŒºåŸŸçš„inæ–¹å‘ç­–ç•¥è§†å›¾</span></span><br><span class="line"><span class="meta">[FW1-policy-interzone-local-untrust-inbound]policy</span> <span class="string">1</span></span><br><span class="line"><span class="meta">[FW1-policy-interzone-local-untrust-inbound-1]policy</span> <span class="string">source 200.0.0.1 0</span></span><br><span class="line"><span class="meta">[FW1-policy-interzone-local-untrust-inbound-1]policy</span> <span class="string">destination 100.0.0.1 0</span></span><br><span class="line"><span class="meta">[FW1-policy-interzone-local-untrust-inbound-1]action</span> <span class="string">permit </span></span><br><span class="line"><span class="attr">//å…è®¸æºåœ°å€æ˜¯200.0.0.1ç›®æ ‡åœ°å€æ˜¯100.0.0.1çš„æ•°æ®åŒ…è®¿é—®</span></span><br></pre></td></tr></table></figure><h4 id="5-3-3FW2é…ç½®"><a href="#5-3-3FW2é…ç½®" class="headerlink" title="5.3.3FW2é…ç½®"></a>5.3.3FW2é…ç½®</h4><p> <strong>FW2é…ç½®å’ŒFW1ç›¸åŒï¼Œåªéœ€è°ƒæ•´æºIPå’Œç›®æ ‡IPå³å¯</strong>ã€‚ </p><h4 id="5-3-4æµ‹è¯•"><a href="#5-3-4æµ‹è¯•" class="headerlink" title="5.3.4æµ‹è¯•"></a>5.3.4æµ‹è¯•</h4><p>æ€»å…¬å¸PC Ping åˆ†å…¬å¸PC ç»“æœå¦‚ä¸‹ï¼šping</p><p><img src="https://s1.ax1x.com/2020/06/01/tJtthR.png" alt="tJtthR.png"></p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå·¥ç¨‹è®¾è®¡ </category>
          
          <category> ç½‘ç»œå®‰å…¨å®éªŒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå·¥ç¨‹è®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SNMPå®éªŒ</title>
      <link href="/2020/05/24/snmp/"/>
      <url>/2020/05/24/snmp/</url>
      
        <content type="html"><![CDATA[<h1 id="1ã€å®éªŒæ‹“æ‰‘"><a href="#1ã€å®éªŒæ‹“æ‰‘" class="headerlink" title="1ã€å®éªŒæ‹“æ‰‘"></a>1ã€å®éªŒæ‹“æ‰‘</h1><p><a href="https://imgchr.com/i/tCOoR0" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/05/26/tCOoR0.png" alt="tCOoR0.png"></a></p><h1 id="2ã€å®éªŒè¦æ±‚"><a href="#2ã€å®éªŒè¦æ±‚" class="headerlink" title="2ã€å®éªŒè¦æ±‚"></a>2ã€å®éªŒè¦æ±‚</h1><ol><li>é€šè¿‡eNSPé‡Œçš„â€œäº‘â€ï¼Œå¯ä»¥ä½¿å¾—è™šæ‹Ÿç¯å¢ƒä¸­çš„è®¾å¤‡è®¿é—®â€œæœ¬æœºâ€ã€‚åœ¨æœ¬æœºä¸­è¿è¡ŒMIB Browserï¼Œè®¿é—®eNSPè™šæ‹Ÿç¯å¢ƒä¸­è®¾å¤‡çš„MIBåº“ã€‚ </li><li>æµè§ˆè®¾å¤‡MIBæ ‘çš„å„ä¸ªèŠ‚ç‚¹ ã€‚</li><li>è¿˜è¦æ•è·åˆ†ç»„ ï¼Œåˆ†æåè®®äº¤äº’è¿‡ç¨‹ã€‚</li><li>è‡ªå·±æ‰‹å·¥ç¼–ç /è§£ç åˆ†ç»„ä¸­çš„æ•°æ®ã€‚ä¹Ÿå°±æ˜¯ASN.1 TLVç¼–ç è§£ç è¿‡ç¨‹ã€‚ </li></ol><a id="more"></a><h1 id="3ã€å®éªŒæ­¥éª¤"><a href="#3ã€å®éªŒæ­¥éª¤" class="headerlink" title="3ã€å®éªŒæ­¥éª¤"></a>3ã€å®éªŒæ­¥éª¤</h1><h2 id="3-1è¿é€šæ€§"><a href="#3-1è¿é€šæ€§" class="headerlink" title="3.1è¿é€šæ€§"></a>3.1è¿é€šæ€§</h2><p>å°†VMwareä¸‹win7æ“ä½œç³»ç»Ÿä¸­çš„enspäº‘ä¸‹çš„è·¯ç”±å™¨ä¸ä¸»æœºè¿é€šã€‚</p><ul><li><p>å…³é—­æœ¬æœºå’ŒVMwareä¸‹win7ä¸‹çš„é˜²ç«å¢™ã€‚</p></li><li><p>å°†VMwareçš„ç½‘ç»œè¿æ¥æ¨¡å¼è®¾ç½®ä¸ºæ¡¥æ¥æ¨¡å¼ã€‚</p></li><li><p>æŸ¥çœ‹æœ¬æœºipã€‚</p></li><li><p>äº‘è®¾ç½®ï¼š</p><p><img src="https://s1.ax1x.com/2020/05/26/tCOOZ4.png" alt="tCOOZ4.png"></p><p>é€‰æ‹©æœ¬åœ°è¿æ¥ï¼ˆåŠwin7çš„ipåœ°å€é€‰é¡¹ï¼‰ã€‚</p></li><li><p>è·¯ç”±å™¨è®¾ç½®ï¼š</p><p>é…ç½®GE0/0/0ç«¯å£ipä¸ºï¼š192.168.10.222 æ©ç ä¸ºï¼š255.255.255.0ã€‚</p></li><li><p>æµ‹è¯•è¿é€šæ€§ï¼š</p><p>ä¸»æœºå’Œäº‘ä¸‹çš„è·¯ç”±å™¨äº’Pingå¯¹æ–¹IPåœ°å€ï¼Œç»“æœå…¥ä¸‹ï¼š</p><p><img src="https://s1.ax1x.com/2020/05/26/tCOXdJ.png" alt="tCOXdJ.png"></p><p>äº‘å†…ç½‘è®¾å¤‡å¯ä»¥äº’é€šã€‚</p></li></ul><h2 id="3-2-SNMPå·¥ä½œæœºåˆ¶"><a href="#3-2-SNMPå·¥ä½œæœºåˆ¶" class="headerlink" title="3.2 SNMPå·¥ä½œæœºåˆ¶"></a>3.2 SNMPå·¥ä½œæœºåˆ¶</h2><p>SNMPåˆ†ä¸ºNMSå’ŒAgentä¸¤éƒ¨åˆ†ï¼š</p><ul><li><p>NMS ï¼ˆNetwork Management Station,ç½‘ç»œç®¡ç†ç«™ï¼‰æ˜¯è¿è¡Œå®¢æˆ·ç«¯ç¨‹åºçš„å·¥ä½œç«™ï¼Œç›®å‰å¸¸ç”¨çš„ç½‘ç®¡å¹³å°æœ‰Qidviwv. Sun NotManerå’ŒIBM NetvieIã€‚</p></li><li><p>Agent æ˜¯è¿è¡Œåœ¨ç½‘ç»œè®¾å¤‡(å¦‚äº¤æ¢æœº)ä¸Šçš„æœåŠ¡å™¨ç«¯è½¯ä»¶ã€‚ </p><p>â€‹        NMSå¯ä»¥å‘Agentå‘å‡ºGetRequestã€GetNextRequestå’ŒSetRequestæŠ¥æ–‡, Agent æ¥æ”¶åˆ°NMS çš„è¿™äº›è¯·æ±‚æŠ¥æ–‡åï¼Œæ ¹æ®æŠ¥æ–‡ç±»å‹å¯¹ç®¡ç†å¯¹è±¡(MIB, Management Information Baseï¼Œ ç®¡ç†ä¿¡æ¯åº“)è¿›è¡ŒReadæˆ–Writeæ“ä½œï¼Œç”ŸæˆResponseæŠ¥æ–‡, å¹¶å°†æŠ¥æ–‡è¿”å›ç»™NMSã€‚</p><p>â€‹       Agentåœ¨è®¾å¤‡å‘ç”Ÿå¼‚å¸¸æƒ…å†µæˆ–çŠ¶æ€æ”¹å˜æ—¶(å¦‚è®¾å¤‡é‡æ–°å¯åŠ¨)ï¼Œä¹Ÿä¼šä¸»åŠ¨å‘NMS å‘é€TrapæŠ¥æ–‡ï¼Œå‘NMSæ±‡æŠ¥æ‰€å‘ç”Ÿçš„äº‹ä»¶ã€‚  </p></li></ul><p><strong>æ³¨æ„ï¼š</strong>åœ¨æ­¤ä½¿ç”¨çš„æ˜¯MIB  Browser ä¸æ˜¯SNMPç®¡ç†ç«™ï¼Œä¸èƒ½æ¥æ”¶TrapæŠ¥æ–‡,æ•…åœ¨Agentä¸­ä¸ç”¨é…ç½®å…è®¸è®¾å¤‡å‘ç®¡ç†ç«™å‘é€TrapæŠ¥æ–‡çš„å‘½ä»¤ã€‚</p><h2 id="3-3SNMP-Agenté…ç½®"><a href="#3-3SNMP-Agenté…ç½®" class="headerlink" title="3.3SNMP-Agenté…ç½®"></a>3.3SNMP-Agenté…ç½®</h2><p>å¯¹äº‘ä¸‹çš„è·¯ç”±å™¨è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[Huawei]snmp-agent</span> <span class="string"></span></span><br><span class="line"><span class="meta">[Huawei]snmp-agent</span> <span class="string">sys-info version all</span></span><br><span class="line"><span class="meta">[Huawei]snmp-agent</span> <span class="string">community read public</span></span><br><span class="line"><span class="meta">[Huawei]snmp-agent</span> <span class="string">community write public</span></span><br><span class="line"><span class="meta">[Huawei]</span> <span class="string">snmp-agent sys-info contact LiSongBai-Tel:152********</span></span><br><span class="line"><span class="meta">[Huawei]</span> <span class="string">snmp-agent sys-info location ShanXi-Xi an</span></span><br></pre></td></tr></table></figure><h2 id="3-4MIB-Browserä½¿ç”¨"><a href="#3-4MIB-Browserä½¿ç”¨" class="headerlink" title="3.4MIB-Browserä½¿ç”¨"></a>3.4MIB-Browserä½¿ç”¨</h2><p><img src="https://s1.ax1x.com/2020/05/26/tCXSRx.png" alt="tCXSRx.png"></p><ol><li><p>é€‰æ‹©Agentä¸­é…ç½®çš„snmpç‰ˆæœ¬ã€‚</p></li><li><p>è¾“å…¥enspä¸­äº‘ä¸‹çš„è·¯ç”±å™¨ç½‘å…³ipã€‚</p></li><li><p>è¿æ¥ï¼ŒæˆåŠŸå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://s1.ax1x.com/2020/05/26/tCXPsO.png" alt="tCXPsO.png"></p></li><li><p>é€šè¿‡GetRequest/GetNextRequestè¯·æ±‚è·å–Agentçš„ç›¸å…³ä¿¡æ¯</p><p>é€šè¿‡GetRequestè¯·æ±‚è·å–ï¼š</p><ul><li>è·å–è®¾å¤‡åï¼š</li></ul><p><img src="https://s1.ax1x.com/2020/05/26/tCXQOS.png" alt="tCXQOS.png"></p><ul><li><p>è·å–è®¾å¤‡ä½ç½®ï¼š</p><p><img src="https://s1.ax1x.com/2020/05/26/tCXBmF.png" alt="tCXBmF.png"></p></li></ul><p>é€šè¿‡GetNextRequestè¯·æ±‚è·å–ï¼š</p><ul><li><p>è·å–è®¾å¤‡çš„ç®¡ç†å‘˜ä¿¡æ¯ï¼š</p><p><img src="https://s1.ax1x.com/2020/05/26/tCX6YR.png" alt="tCX6YR.png"></p><p>åœ¨sysUpTimeä¸Šé€šè¿‡GetNextRequestè¯·æ±‚è·å–sysContactçš„ä¿¡æ¯ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><p><a href="https://imgchr.com/i/tCXcf1" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/05/26/tCXcf1.png" alt="tCXcf1.png"></a></p></li></ul></li><li><p>é€šè¿‡SetRequestè¯·æ±‚ä¿®æ”¹è®¾å¤‡çš„ç›¸å…³ä¿¡æ¯ã€‚</p><p>å¦‚ï¼šä¿®æ”¹è®¾å¤‡åï¼š</p><p><img src="https://s1.ax1x.com/2020/05/26/tCXfOO.png" alt="tCXfOO.png"></p><p><img src="https://s1.ax1x.com/2020/05/26/tCXvnS.png" alt="tCXvnS.png"></p><p>åœ¨enspä¸­æŸ¥çœ‹è·¯ç”±å™¨è®¾å¤‡åï¼Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://s1.ax1x.com/2020/05/26/tCjipq.png" alt="tCjipq.png"></p><p>å¯è§ï¼Œä¿®æ”¹æˆåŠŸã€‚</p></li></ol><h2 id="3-4æŠ¥æ–‡åˆ†æ"><a href="#3-4æŠ¥æ–‡åˆ†æ" class="headerlink" title="3.4æŠ¥æ–‡åˆ†æ"></a>3.4æŠ¥æ–‡åˆ†æ</h2><p>å¯¹sysName(sysNameçš„ä¸‹ä¸€é¡¹ä¸ºsysLocation)è¿›è¡ŒGet/GetNext/Setåœ¨è·¯ç”±å™¨GE0/0/0ç«¯å£æ•è·æŠ¥æ–‡ä¿¡æ¯å¦‚ä¸‹ï¼š</p><p><img src="https://s1.ax1x.com/2020/05/26/tCjnAJ.png" alt="tCjnAJ.png"></p><ul><li><p>Get-request</p><p><img src="https://s1.ax1x.com/2020/05/26/tCjBgP.png" alt="tCjBgP.png"></p><p>ä»æŠ¥æ–‡ä¸­å¯ä»¥çœ‹å‡ºSNMPåè®®åº•å±‚é‡‡ç”¨UDPå®ç°çš„ï¼Œä¸”Agentæ–¹çš„é»˜è®¤ç«¯å£å·ä¸º161ï¼Œä»æŠ¥æ–‡ä¸­å¯ä»¥çœ‹å‡ºé‡‡ç”¨çš„SNMPç‰ˆæœ¬æ˜¯v2c ï¼Œç¤¾å›¢åä¸ºpublicï¼Œè¯·æ±‚idä¸º38ï¼Œå€¼ä¸ºnullã€‚</p></li><li><p>Get-response</p><p><img src="https://s1.ax1x.com/2020/05/26/tCjQ91.png" alt="tCjQ91.png"></p><p>å…¶ä»–åŒä¸Šï¼Œå“åº”å€¼ä¸º415232ï¼Œè¡¨ç¤ºAR2ã€‚</p></li><li><p>Get-next-request</p><p><a href="https://imgchr.com/i/tCjsu8" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/05/26/tCjsu8.png" alt="tCjsu8.png"></a></p></li><li><p>Get-response</p><p><img src="https://s1.ax1x.com/2020/05/26/tCvpDO.png" alt="tCvpDO.png"></p></li><li><p>Set-request</p><p><img src="https://s1.ax1x.com/2020/05/26/tCvPVe.png" alt="tCvPVe.png"></p></li><li><p>Get-response</p><p><img src="https://s1.ax1x.com/2020/05/26/tCviUH.png" alt="tCviUH.png"></p></li></ul><h2 id="3-5ASN-1ç¼–ç å€¼å¯¹åº”çš„è§£é‡Š"><a href="#3-5ASN-1ç¼–ç å€¼å¯¹åº”çš„è§£é‡Š" class="headerlink" title="3.5ASN.1ç¼–ç å€¼å¯¹åº”çš„è§£é‡Š"></a>3.5ASN.1ç¼–ç å€¼å¯¹åº”çš„è§£é‡Š</h2><p>ç”¨3.4ä¸­çš„get-next-requestå’Œå¯¹åº”çš„responseä½œåˆ†æã€‚</p><ul><li><p>get-next-request</p><p><img src="https://s1.ax1x.com/2020/05/26/tCvF5d.png" alt="tCvF5d.png"></p><table><thead><tr><th>åå…­è¿›åˆ¶æ•°æ®</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>30</td><td>è¡¨ç¤ºSNMPåè®®æŠ¥æ–‡(æ•´ä¸ªæŠ¥æ–‡æ˜¯ä¸€ä¸ªSEQUENCE)</td></tr><tr><td>26</td><td>æ¶ˆæ¯é•¿åº¦38å­—èŠ‚(è¡¨ç¤ºåé¢è¿˜æœ‰38ä¸ªå­—èŠ‚çš„å†…å®¹)</td></tr><tr><td>02 01 01</td><td>åè®®ç‰ˆæœ¬(2c)(å‰ä¸¤ä¸ªå­—èŠ‚02è¡¨ç¤ºINTEGERç±»å‹01æ˜¯æŒ‡1ä¸ªå­—èŠ‚é•¿åº¦ï¼Œæœ€åçš„01æ˜¯å€¼01)</td></tr><tr><td>04</td><td>å‚æ•°ç±»å‹(OCTSTR)</td></tr><tr><td>06</td><td>ç¾¤ä½“(community)åé•¿åº¦</td></tr><tr><td>70 75 62 6c 69 63</td><td>ç¾¤ä½“åpublicçš„assicç å€¼</td></tr><tr><td>a1</td><td>PUDç±»å‹get-next-request</td></tr><tr><td>19</td><td>snmp pduçš„é•¿åº¦ä¸º25ä¸ªOctStr(åé¢çš„å†…å®¹25å­—èŠ‚)</td></tr><tr><td>02 01 27</td><td>è¯·æ±‚æ ‡è¯†ç¬¦Request ID</td></tr><tr><td>02 01 00</td><td>è¡¨ç¤ºerror-stateä¸º0</td></tr><tr><td>02 01 00</td><td>è¡¨ç¤ºerror-indexä¸º0</td></tr><tr><td>30 0e</td><td>è¡¨ç¤ºåé¢å˜é‡ç»‘å®šæ˜¯SEQUENCEç±»å‹14ä¸ªå­—èŠ‚é•¿åº¦</td></tr><tr><td>30 0c</td><td>è¡¨ç¤º(å˜é‡å1item)</td></tr><tr><td>06</td><td>è¡¨ç¤ºè¯¥å­—æ®µæ˜¯OIDç±»å‹</td></tr><tr><td>08</td><td>OIDé•¿åº¦8å­—èŠ‚</td></tr><tr><td>2b 06 01 02 01</td><td>1.3.6.1.2.1(æ ‡è¯†1.3è¢«åˆå¹¶ä¸º2B)</td></tr><tr><td>01 05 00</td><td>1.5.0</td></tr><tr><td>05 00</td><td>è¡¨ç¤ºNULL</td></tr></tbody></table></li><li><p>get-response</p><p><img src="https://s1.ax1x.com/2020/05/26/tCvMVg.png" alt="tCvMVg.png"></p><table><thead><tr><th>åå…­è¿›åˆ¶æ•°æ®</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>30</td><td>è¡¨ç¤ºSNMPåè®®æŠ¥æ–‡(æ•´ä¸ªæŠ¥æ–‡æ˜¯ä¸€ä¸ªSEQUENCE)</td></tr><tr><td>32</td><td>æ¶ˆæ¯é•¿åº¦50å­—èŠ‚(è¡¨ç¤ºåé¢è¿˜æœ‰50ä¸ªå­—èŠ‚çš„å†…å®¹)</td></tr><tr><td>02 01 01</td><td>åè®®ç‰ˆæœ¬(2c)(å‰ä¸¤ä¸ªå­—èŠ‚02 01 è¡¨ç¤ºINTEGERç±»å‹)</td></tr><tr><td>04</td><td>å‚æ•°ç±»å‹(OCTSTR)</td></tr><tr><td>06</td><td>ç¾¤ä½“(community)åé•¿åº¦</td></tr><tr><td>70 75 62 6c 69 63</td><td>ç¾¤ä½“åpublicçš„assicç å€¼</td></tr><tr><td>a2</td><td>PUDç±»å‹get-response</td></tr><tr><td>25</td><td>snmp pduçš„é•¿åº¦ä¸º37ä¸ªOctStr(åé¢çš„å†…å®¹37å­—èŠ‚)</td></tr><tr><td>02 01 27</td><td>è¯·æ±‚æ ‡è¯†ç¬¦Request ID</td></tr><tr><td>02 01 00</td><td>è¡¨ç¤ºerror-stateä¸º0</td></tr><tr><td>02 01 00</td><td>è¡¨ç¤ºerror-indexä¸º0</td></tr><tr><td>30 1a</td><td>è¡¨ç¤ºåé¢å˜é‡ç»‘å®šæ˜¯SEQUENCEç±»å‹26ä¸ªå­—èŠ‚é•¿åº¦</td></tr><tr><td>30 18</td><td>è¡¨ç¤º(å˜é‡å1 item)</td></tr><tr><td>06</td><td>è¡¨ç¤ºè¯¥å­—æ®µæ˜¯OIDç±»å‹</td></tr><tr><td>08</td><td>OIDé•¿åº¦8å­—èŠ‚</td></tr><tr><td>2b 06 01 02 01</td><td>1.3.6.1.2.1(æ ‡è¯†1.3è¢«åˆå¹¶ä¸º2B)</td></tr><tr><td>01 06 00</td><td>1.6.0</td></tr><tr><td>04</td><td>è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</td></tr><tr><td>0c</td><td>è¡¨ç¤ºå­—ç¬¦ä¸²é•¿åº¦ä¸º12</td></tr><tr><td>53 68 61 6e 58 69 2d 58 69 20 61 6e</td><td>è¡¨ç¤ºå­—ç¬¦ä¸²å†…å®¹ä¸ºâ€œShanXi-Xi anâ€</td></tr></tbody></table></li></ul>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå·¥ç¨‹è®¾è®¡ </category>
          
          <category> SNMPå®éªŒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå·¥ç¨‹è®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¾¹ç•Œç½‘å…³åè®®å®éªŒï¼ˆBGPï¼‰ã€Šä¸‰ã€‹</title>
      <link href="/2020/05/18/%E8%BE%B9%E7%95%8C%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE%E5%AE%9E%E9%AA%8C%EF%BC%88BGP%EF%BC%89%E3%80%8A%E4%B8%89%E3%80%8B/"/>
      <url>/2020/05/18/%E8%BE%B9%E7%95%8C%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE%E5%AE%9E%E9%AA%8C%EF%BC%88BGP%EF%BC%89%E3%80%8A%E4%B8%89%E3%80%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="1-æ‹“æ‰‘å›¾"><a href="#1-æ‹“æ‰‘å›¾" class="headerlink" title="1.æ‹“æ‰‘å›¾"></a>1.æ‹“æ‰‘å›¾</h1><p><img src="https://s1.ax1x.com/2020/05/18/Yhp0fK.png" alt="Yhp0fK.png">ã€</p><h1 id="2-å®éªŒç›®çš„"><a href="#2-å®éªŒç›®çš„" class="headerlink" title="2.å®éªŒç›®çš„"></a>2.å®éªŒç›®çš„</h1><p>åˆ©ç”¨AS-pathå±æ€§å®ç°è·¯ç”±ç­–ç•¥ï¼Œä½¿å¾—AR2ä¸å‘AR1é€šå‘ŠAS300å†…çš„ä»»ä½•è·¯ç”±ã€‚</p><h1 id="3-å®éªŒæ­¥éª¤"><a href="#3-å®éªŒæ­¥éª¤" class="headerlink" title="3.å®éªŒæ­¥éª¤"></a>3.å®éªŒæ­¥éª¤</h1><h2 id="3-1é…ç½®AR1-AR4è·¯ç”±å™¨çš„ç½‘å…³ip"><a href="#3-1é…ç½®AR1-AR4è·¯ç”±å™¨çš„ç½‘å…³ip" class="headerlink" title="3.1é…ç½®AR1~AR4è·¯ç”±å™¨çš„ç½‘å…³ip"></a>3.1é…ç½®AR1~AR4è·¯ç”±å™¨çš„ç½‘å…³ip</h2><h2 id="3-2é…ç½®åŸŸé—´è·¯ç”±åè®®ï¼ˆBGPï¼‰"><a href="#3-2é…ç½®åŸŸé—´è·¯ç”±åè®®ï¼ˆBGPï¼‰" class="headerlink" title="3.2é…ç½®åŸŸé—´è·¯ç”±åè®®ï¼ˆBGPï¼‰"></a>3.2é…ç½®åŸŸé—´è·¯ç”±åè®®ï¼ˆBGPï¼‰</h2><p>AR1é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[AR1]bgp</span> <span class="string">100</span></span><br><span class="line"><span class="meta">[AR1-bgp]peer</span> <span class="string">11.2.1.2 as-number 200</span></span><br><span class="line"><span class="meta">[AR1-bgp]import-route</span> <span class="string">direct</span></span><br></pre></td></tr></table></figure><a id="more"></a><p>å…¶ä»–è·¯ç”±å™¨åŒç†ã€‚</p><h2 id="3-3é…ç½®AS-PATHå±æ€§å®ç°è·¯ç”±è¿‡æ»¤"><a href="#3-3é…ç½®AS-PATHå±æ€§å®ç°è·¯ç”±è¿‡æ»¤" class="headerlink" title="3.3é…ç½®AS-PATHå±æ€§å®ç°è·¯ç”±è¿‡æ»¤"></a>3.3é…ç½®AS-PATHå±æ€§å®ç°è·¯ç”±è¿‡æ»¤</h2><h3 id="3-3-1-AS-PATHå±æ€§æ¦‚è¿°"><a href="#3-3-1-AS-PATHå±æ€§æ¦‚è¿°" class="headerlink" title="3.3.1 AS-PATHå±æ€§æ¦‚è¿°"></a>3.3.1 AS-PATHå±æ€§æ¦‚è¿°</h3><ul><li><p><strong>æ¦‚å¿µ</strong></p><p> AS-PATHæ˜¯å…¬è®¤å¿…éµå±æ€§ï¼Œè¯¥å±æ€§ç”¨ä¸€ä¸²ASå·æ¥æè¿°å»å¾€çš„æŒ‡å®šç›®çš„åœ°ASé—´è·¯å¾„æˆ–è·¯ç”±ï¼Œå½“BGP speakerå‘æ°”ä¸€æ¡è·¯ç”±ï¼Œå°†åœ¨AS_Pathä¸­å¢åŠ è‡ªå·±çš„ASå·ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™æ¡è·¯ç”±æ¯ç»è¿‡ä¸€ä¸ªASåŒºåŸŸï¼Œå°±ä¼šåŠ ä¸Šä¸€ä¸ªASå·ï¼Œç”¨æ¥æ ‡ç¤ºè·¯å¾„çš„ä¼˜å…ˆçº§ã€‚</p></li><li><p><strong>ä½œç”¨</strong></p><p>ç”¨æ¥æ ‡è¯†è·¯ç”±ç»è¿‡çš„ASè·¯å¾„ã€‚</p><p>å½“ä¸€ä¸ªè·¯ç”±å™¨æ”¶åˆ°ä¸¤æ¡ç›¸åŒç›®çš„åœ°çš„è·¯ç”±ï¼Œå®ƒå°†é€‰æ‹©<strong>ASè·¯å¾„æœ€çŸ­</strong>çš„è·¯ç”±ã€‚ </p><p> åœ¨çœŸå®çš„ç½‘ç»œç¯å¢ƒä¸­ï¼Œä¸ä¸€å®šASå·è¶Šå°‘çš„é“¾è·¯è´¨é‡è¶Šé«˜ã€‚è€ŒAS-PATHè¿™ä¸ªåŠŸèƒ½åˆæ˜¯æ ¹æ®ASå·æ¥åˆ¤æ–­è·¯ç”±çš„ä¼˜å…ˆçš„ï¼ŒASå·è¶Šå°‘è¶Šä¼˜å…ˆã€‚é‚£ä¹ˆè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯èƒ½ä¼šç”¨åˆ°AS-pathçš„ä¸€ä¸ªåŠŸèƒ½ï¼Œæ¥å¢åŠ ASå·çš„é•¿åº¦,ä»è€Œå®ç°é€‰è·¯çš„åŠŸèƒ½ï¼š</p><p><img src="https://s1.ax1x.com/2020/05/18/YhFydJ.jpg" alt="YhFydJ.jpg"></p><p>åœ¨è¿™ä¸ªå›¾ä¸­ï¼Œæœ¬æ¥å·¦è¾¹çš„è·¯å¾„æ˜¯ï¼š500,200,100,å³è¾¹çš„è·¯å¾„æ˜¯300,100,ç°åœ¨åœ¨å³è¾¹çš„è·¯å¾„ä¸Šé¢å¤šåŠ å‡ ä¸ªç›¸åŒçš„ASå·ï¼Œæœ€åå³è¾¹çš„è·¯å¾„å°±å˜æˆäº†ï¼š300,100,100,100,æ¯”å·¦è¾¹è·¯å¾„çš„ASå·è¦å¤šã€‚æœ€åå·¦è¾¹çš„è·¯å¾„ä¸ºä¸»è¦å·¥ä½œè·¯å¾„ã€‚</p></li><li><p><strong>æ€»ç»“</strong></p><ul><li><strong>ä¸€ä¸ªè·¯ç”±çš„ASå·é™„åŠ å¾—è¶Šå¤šï¼Œè·¯ç”±çš„ä¼˜å…ˆçº§è¶Šä½ã€‚</strong> </li><li><strong>AS-pathå±æ€§å¯ä»¥é˜²æ­¢ç¯è·¯ã€‚</strong> </li><li><strong>å¯ä»¥ä¿®æ”¹ASçš„é™„åŠ ï¼Œç§°ä¸ºpath-prependingã€‚</strong> </li></ul></li></ul><h3 id="3-3-2-AS-PATHå±æ€§é…ç½®"><a href="#3-3-2-AS-PATHå±æ€§é…ç½®" class="headerlink" title="3.3.2 AS-PATHå±æ€§é…ç½®"></a>3.3.2 AS-PATHå±æ€§é…ç½®</h3><p>åœ¨AS2ä¸Šé…ç½®ï¼Œåˆ›å»ºç¼–å·ä¸º1çš„AS-PATHè¿‡æ»¤å™¨ï¼Œæ‹’ç»åŒ…å«ASå·300çš„è·¯ç”±é€šè¿‡ã€‚</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[AR2]ip</span> <span class="string">as-path-filter path-filter1 deny _300_</span></span><br><span class="line"><span class="meta">[AR2]ip</span> <span class="string">as-path-filter path-filter1 permit .*</span></span><br><span class="line"><span class="meta">[AR2]bgp</span> <span class="string">200</span></span><br><span class="line"><span class="meta">[AR2-bgp]peer</span> <span class="string">11.2.1.1 as-path-filter path-filter1 export </span></span><br><span class="line"><span class="attr">[AR2-bgp]quit</span></span><br><span class="line"><span class="meta">[AR2]reset</span> <span class="string">bgp all</span></span><br></pre></td></tr></table></figure><h3 id="3-3-3-æµ‹è¯•"><a href="#3-3-3-æµ‹è¯•" class="headerlink" title="3.3.3 æµ‹è¯•"></a>3.3.3 æµ‹è¯•</h3><ol><li><p>æŸ¥çœ‹AR1è·¯ç”±è¡¨ï¼š</p><p><img src="https://s1.ax1x.com/2020/05/18/Yhm3pd.png" alt="Yhm3pd.png"></p><p>åœ¨AR1çš„è·¯ç”±è¡¨ä¸­æ²¡çœ‹åˆ°AS300ä¸­çš„ä»»ä½•è·¯ç”±æ¡ç›®ï¼ŒåŠå®ç°äº†é€šè¿‡é…ç½®AS-PATHå±æ€§å®ç°äº†AR2ä¸å‘AR1é€šå‘ŠAS300å†…çš„ä»»ä½•è·¯ç”±ã€‚</p></li><li><p>AR1å’ŒAR3äº’Pingç¯å›åœ°å€ï¼Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://s1.ax1x.com/2020/05/18/Yhn85F.png" alt="Yhn85F.png"></p><p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºAR1 Ping AR3 è¯·æ±‚è¶…æ—¶ï¼ŒAR3 Ping AR1 å¯ä»¥Pingé€šï¼Œä¹Ÿèƒ½è¯´æ˜åœ¨AR2ä¸­é€šè¿‡é…ç½®AS-PATHå±æ€§å®ç°äº†è·¯ç”±è¿‡æ»¤ã€‚</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå·¥ç¨‹è®¾è®¡ </category>
          
          <category> BGPå®éªŒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå·¥ç¨‹è®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¾¹ç•Œç½‘å…³åè®®å®éªŒï¼ˆBGPï¼‰ã€ŠäºŒã€‹</title>
      <link href="/2020/05/13/%E8%BE%B9%E7%95%8C%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE%E5%AE%9E%E9%AA%8C%EF%BC%88BGP%EF%BC%89%E3%80%8A%E4%BA%8C%E3%80%8B/"/>
      <url>/2020/05/13/%E8%BE%B9%E7%95%8C%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE%E5%AE%9E%E9%AA%8C%EF%BC%88BGP%EF%BC%89%E3%80%8A%E4%BA%8C%E3%80%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="1ã€æ‹“æ‰‘å›¾"><a href="#1ã€æ‹“æ‰‘å›¾" class="headerlink" title="1ã€æ‹“æ‰‘å›¾"></a>1ã€æ‹“æ‰‘å›¾</h1><p><img src="https://s1.ax1x.com/2020/05/11/YYpH2R.png" alt="YYpH2R.png"></p><h1 id="2-å®éªŒç›®çš„"><a href="#2-å®éªŒç›®çš„" class="headerlink" title="2.å®éªŒç›®çš„"></a>2.å®éªŒç›®çš„</h1><p>å®ç°æ§åˆ¶é€‰è·¯ï¼š</p><ul><li>AR1-&gt;AR4  ç»è¿‡AR2</li><li>AR4-&gt;AR1  ç»è¿‡AR3</li></ul><h1 id="3-å®éªŒæ­¥éª¤"><a href="#3-å®éªŒæ­¥éª¤" class="headerlink" title="3.å®éªŒæ­¥éª¤"></a>3.å®éªŒæ­¥éª¤</h1><h2 id="3-1åŸºç¡€é…ç½®"><a href="#3-1åŸºç¡€é…ç½®" class="headerlink" title="3.1åŸºç¡€é…ç½®"></a>3.1åŸºç¡€é…ç½®</h2><p>æ ¹æ®æ‹“æ‰‘æ‰€ç¤ºï¼Œé…ç½®å„ä¸ªè·¯ç”±å™¨ipã€‚</p><h2 id="3-2é…ç½®åŸŸå†…è·¯ç”±åè®®ï¼ˆOSPFï¼‰"><a href="#3-2é…ç½®åŸŸå†…è·¯ç”±åè®®ï¼ˆOSPFï¼‰" class="headerlink" title="3.2é…ç½®åŸŸå†…è·¯ç”±åè®®ï¼ˆOSPFï¼‰"></a>3.2é…ç½®åŸŸå†…è·¯ç”±åè®®ï¼ˆOSPFï¼‰</h2><p>AR2é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">R2</span></span><br><span class="line"><span class="meta">[AR2]ospf</span> <span class="string">1</span></span><br><span class="line"><span class="meta">[AR2-ospf-1]area</span> <span class="string">0</span></span><br><span class="line"><span class="meta">[AR2-ospf-1-area-0.0.0.0]network</span> <span class="string">19.0.24.0 0.0.0.255</span></span><br><span class="line"><span class="meta">[AR2-ospf-1-area-0.0.0.0]network</span> <span class="string">2.2.2.2 0.0.0.0</span></span><br><span class="line"><span class="attr">[AR2-ospf-1-area-0.0.0.0]quit</span></span><br><span class="line"><span class="attr">[AR2-ospf-1]quit</span></span><br></pre></td></tr></table></figure><a id="more"></a><p>AR3ï¼ŒAR4è·¯ç”±å™¨é…ç½®å‘½ä»¤ç±»ä¼¼ã€‚</p><p>æµ‹è¯•ï¼š</p><p> AR2ã€AR3ã€AR4äº’ç›¸pingä»¥ä¸‹ä»–ä»¬çš„loopbackåœ°å€ï¼Œçœ‹ospfæ˜¯å¦èƒ½pingé€š</p><p>ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://s1.ax1x.com/2020/05/11/YYPWrt.png" alt="YYPWrt.png"></p><h2 id="3-3åŸŸé—´è·¯ç”±åè®®ï¼ˆè¾¹ç•Œç½‘å…³åè®®BGPï¼‰"><a href="#3-3åŸŸé—´è·¯ç”±åè®®ï¼ˆè¾¹ç•Œç½‘å…³åè®®BGPï¼‰" class="headerlink" title="3.3åŸŸé—´è·¯ç”±åè®®ï¼ˆè¾¹ç•Œç½‘å…³åè®®BGPï¼‰"></a>3.3åŸŸé—´è·¯ç”±åè®®ï¼ˆè¾¹ç•Œç½‘å…³åè®®BGPï¼‰</h2><p> é…ç½®AR1å’ŒAR2ã€AR1å’ŒAR3ä¹‹é—´çš„é‚»æ¥å…³ç³»ï¼Œä½¿ä»–ä»¬ä¹‹é—´èƒ½é€šè¿‡==EBGP==ç›¸äº’ä¼ é€’è·¯ç”±ï¼Œåœ¨AR2ã€AR3å’ŒAR4ä¸Šé…ç½®IBGPé‚»æ¥å…³ç³»ï¼Œä½¿AR2ã€AR3ã€AR4ä¹‹é—´å¯ä»¥é€šè¿‡==IBGP==äº’ç›¸ä¼ é€’è·¯ç”±ã€‚ </p><ul><li>EBGPé‚»å±…:ASä¹‹é—´çš„BGPé‚»å±…å…³ç³»ã€‚</li><li>IBGPé‚»å±…:åŒä¸€ä¸ªASå†…éƒ¨çš„BGPé‚»å±…å…³ç³»ã€‚</li></ul><h3 id="AR1é…ç½®ï¼š"><a href="#AR1é…ç½®ï¼š" class="headerlink" title="AR1é…ç½®ï¼š"></a>AR1é…ç½®ï¼š</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;AR1&gt;sys</span></span><br><span class="line"><span class="meta">[AR1]bgp</span> <span class="string">100</span></span><br><span class="line"><span class="meta">[AR1-bgp]router-id</span> <span class="string">1.1.1.1</span></span><br><span class="line"><span class="meta">[AR1-bgp]peer</span> <span class="string">19.0.12.2 as-number 200</span></span><br><span class="line"><span class="meta">[AR1-bgp]peer</span> <span class="string">19.0.13.2 as-number 200</span></span><br><span class="line"><span class="meta">[AR1-bgp]network</span> <span class="string">1.1.1.1 32</span></span><br></pre></td></tr></table></figure><h3 id="AR2é…ç½®ï¼š"><a href="#AR2é…ç½®ï¼š" class="headerlink" title="AR2é…ç½®ï¼š"></a>AR2é…ç½®ï¼š</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[AR2]bgp</span> <span class="string">200</span></span><br><span class="line"><span class="meta">[AR2-bgp]router-id</span> <span class="string">2.2.2.2</span></span><br><span class="line"><span class="meta">[AR2-bgp]peer</span> <span class="string">19.0.12.1 as-number 100</span></span><br><span class="line"><span class="meta">[AR2-bgp]peer</span> <span class="string">19.0.24.2 as-number 200</span></span><br><span class="line"><span class="meta">[AR2-bgp]peer</span> <span class="string">19.0.24.2 next-hop-local</span></span><br><span class="line"><span class="meta">[AR2-bgp]import-route</span> <span class="string">ospf 1</span></span><br></pre></td></tr></table></figure><p>AR3ã€AR4ä¸AR2ç±»ä¼¼ã€‚</p><h2 id="3-4æŸ¥çœ‹BGPè·¯ç”±"><a href="#3-4æŸ¥çœ‹BGPè·¯ç”±" class="headerlink" title="3.4æŸ¥çœ‹BGPè·¯ç”±"></a>3.4æŸ¥çœ‹BGPè·¯ç”±</h2><h3 id="AR1è·¯ç”±è¡¨ï¼š"><a href="#AR1è·¯ç”±è¡¨ï¼š" class="headerlink" title="AR1è·¯ç”±è¡¨ï¼š"></a>AR1è·¯ç”±è¡¨ï¼š</h3><p><img src="https://s1.ax1x.com/2020/05/11/YYFD9e.png" alt="YYFD9e.png"></p><h3 id="AR4è·¯ç”±è¡¨ï¼š"><a href="#AR4è·¯ç”±è¡¨ï¼š" class="headerlink" title="AR4è·¯ç”±è¡¨ï¼š"></a>AR4è·¯ç”±è¡¨ï¼š</h3><p><img src="https://s1.ax1x.com/2020/05/11/YYkiHx.png" alt="YYkiHx.png"></p><p> ä»è·¯ç”±è¡¨å¯ä»¥çœ‹å‡ºï¼ŒAR4åˆ°AR1ä¹‹é—´çš„é€šä¿¡æ˜¯é€šè¿‡AR2æ¥ä¼ é€’çš„ã€‚</p><h3 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h3><p>AR4 Ping AR1 åœ¨AR2çš„GE0/0/0ç«¯å£ã€AR3çš„GE0/0/1ç«¯å£åˆ†åˆ«è¿›è¡ŒæŠ¥æ–‡æ•è·ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><p>AR2çš„GE0/0/0ç«¯å£:</p><p><img src="https://s1.ax1x.com/2020/05/11/YYk5a6.png" alt="YYk5a6.png"></p><p>AR3çš„GE0/0/1:</p><p><img src="https://s1.ax1x.com/2020/05/11/YYkOsA.png" alt="YYkOsA.png"></p><p>åœ¨AR2çš„GE0/0/0ç«¯å£æ•è·åˆ°ICMPæŠ¥æ–‡ï¼ŒéªŒè¯äº†è·¯ç”±ä¼ é€’è·¯å¾„ä¸ºAR4-&gt;AR2-&gt;AR1ã€‚</p><h2 id="3-5-BGPå„ç§å±æ€§æ§åˆ¶é€‰è·¯"><a href="#3-5-BGPå„ç§å±æ€§æ§åˆ¶é€‰è·¯" class="headerlink" title="3.5 BGPå„ç§å±æ€§æ§åˆ¶é€‰è·¯"></a>3.5 BGPå„ç§å±æ€§æ§åˆ¶é€‰è·¯</h2><h3 id="3-5-1-é€šè¿‡MEDå±æ€§æ§åˆ¶é€‰è·¯ï¼Œä½¿å¾—AR1åˆ°AR4çš„é€šä¿¡æ˜¯é€šè¿‡AR2æ¥ä¼ é€’çš„"><a href="#3-5-1-é€šè¿‡MEDå±æ€§æ§åˆ¶é€‰è·¯ï¼Œä½¿å¾—AR1åˆ°AR4çš„é€šä¿¡æ˜¯é€šè¿‡AR2æ¥ä¼ é€’çš„" class="headerlink" title="3.5.1 é€šè¿‡MEDå±æ€§æ§åˆ¶é€‰è·¯ï¼Œä½¿å¾—AR1åˆ°AR4çš„é€šä¿¡æ˜¯é€šè¿‡AR2æ¥ä¼ é€’çš„"></a>3.5.1 é€šè¿‡MEDå±æ€§æ§åˆ¶é€‰è·¯ï¼Œä½¿å¾—AR1åˆ°AR4çš„é€šä¿¡æ˜¯é€šè¿‡AR2æ¥ä¼ é€’çš„</h3><p>==MEDå€¼è¶Šå¤§ï¼Œä¼˜å…ˆçº§è¶Šä½ã€‚==</p><ol><li><p>ä¿®æ”¹MEDå±æ€§ï¼Œå¢åŠ AR3è·¯ç”±å™¨çš„MEDå€¼</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[AR3]route-policy</span> <span class="string">med permit node 10</span></span><br><span class="line"><span class="meta">[AR3-route-policy]apply</span> <span class="string">cost + 500</span></span><br><span class="line"><span class="attr">[AR3-route-policy]quit</span></span><br><span class="line"><span class="meta">[AR3]bgp</span> <span class="string">200</span></span><br><span class="line"><span class="meta">[AR3-bgp]peer</span> <span class="string">19.0.12.1 route-policy med export</span></span><br><span class="line"><span class="attr">[AR3-bgp]quit</span></span><br><span class="line"><span class="attr">[AR3]quit</span></span><br><span class="line"><span class="meta">&lt;AR3&gt;reset</span> <span class="string">bgp all</span></span><br><span class="line"><span class="attr">&lt;AR3&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨AR1ä¸ŠæŸ¥çœ‹è·¯ç”±è¡¨ </p><p><img src="https://s1.ax1x.com/2020/05/11/YYEr3F.png" alt="YYEr3F.png"></p><p>å¯ä»¥çœ‹åˆ°å»å¾€AR3çš„MEDå€¼æ˜æ˜¾å¤§äºAR2ã€‚æ•…è·¯ç”±ä¼ é€’è·¯å¾„ä¸ºAR1-&gt;AR2-&gt;AR4ã€‚</p></li></ol><h3 id="3-5-2-ä¿®æ”¹ä¼˜å…ˆçº§å‚æ•°ï¼Œä½¿AR4åˆ°AR1çš„é€šä¿¡é€šè¿‡AR3æ¥ä¼ é€’"><a href="#3-5-2-ä¿®æ”¹ä¼˜å…ˆçº§å‚æ•°ï¼Œä½¿AR4åˆ°AR1çš„é€šä¿¡é€šè¿‡AR3æ¥ä¼ é€’" class="headerlink" title="3.5.2 ä¿®æ”¹ä¼˜å…ˆçº§å‚æ•°ï¼Œä½¿AR4åˆ°AR1çš„é€šä¿¡é€šè¿‡AR3æ¥ä¼ é€’"></a>3.5.2 ä¿®æ”¹ä¼˜å…ˆçº§å‚æ•°ï¼Œä½¿AR4åˆ°AR1çš„é€šä¿¡é€šè¿‡AR3æ¥ä¼ é€’</h3><p> æœ¬åœ°ä¼˜å…ˆçº§ï¼ˆlocal-preferenceå±æ€§ï¼‰çš„é»˜è®¤å€¼ä¸º100ï¼Œè¶Šå¤§è¶Šæœ‰å…ˆï¼Œå–å€¼èŒƒå›´0-4294967295<br>æƒ³èµ°è°ï¼Œå°±å°†è°çš„local-preferenceå€¼è®¾ç½®çš„å¤§äº› </p><ol><li><p>åœ¨AR3ä¸Šä¿®æ”¹ä¼˜å…ˆçº§ </p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[AR3]route-policy</span> <span class="string">lop permit node 10</span></span><br><span class="line"><span class="meta">[AR3-route-policy]apply</span> <span class="string">local-preference 222</span></span><br><span class="line"><span class="attr">[AR3-route-policy]quit</span></span><br><span class="line"><span class="meta">[AR3]bgp</span> <span class="string">200</span></span><br><span class="line"><span class="meta">[AR3-bgp]peer</span> <span class="string">19.0.34.2 route-policy lop export</span></span><br><span class="line"><span class="attr">[AR3-bgp]quit</span></span><br><span class="line"><span class="attr">[AR3]quit</span></span><br><span class="line"><span class="meta">&lt;AR3&gt;reset</span> <span class="string">bgp all</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨AR4ä¸ŠæŸ¥çœ‹è·¯ç”±è¡¨<br><img src="https://s1.ax1x.com/2020/05/11/YYZbkt.png" alt="YYZbkt.png"></p><p>AR3çš„local-preferenceå€¼å¤§äºAR2ï¼Œè·¯ç”±è·¯å¾„åº”ä¸ºAR4-&gt;AR3-&gt;AR1ã€‚</p></li></ol><h3 id="éªŒè¯-1"><a href="#éªŒè¯-1" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h3><p>AR4 Ping AR1 åœ¨AR3çš„GE0/0/0ç«¯å£è¿›è¡ŒæŠ¥æ–‡æ•è·ï¼Œæ•è·æŠ¥æ–‡å†…å®¹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://s1.ax1x.com/2020/05/11/YYm85q.png" alt="YYm85q.png"></p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå·¥ç¨‹è®¾è®¡ </category>
          
          <category> BGPå®éªŒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå·¥ç¨‹è®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¾¹ç•Œç½‘å…³åè®®å®éªŒï¼ˆBGPï¼‰ã€Šä¸€ã€‹</title>
      <link href="/2020/05/11/%E8%BE%B9%E7%95%8C%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE%E5%AE%9E%E9%AA%8C%EF%BC%88BGP%EF%BC%89%E3%80%8A%E4%B8%80%E3%80%8B/"/>
      <url>/2020/05/11/%E8%BE%B9%E7%95%8C%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE%E5%AE%9E%E9%AA%8C%EF%BC%88BGP%EF%BC%89%E3%80%8A%E4%B8%80%E3%80%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="1-æ‹“æ‰‘å›¾"><a href="#1-æ‹“æ‰‘å›¾" class="headerlink" title="1.æ‹“æ‰‘å›¾"></a>1.æ‹“æ‰‘å›¾</h1><p><img src="https://s1.ax1x.com/2020/05/11/YYn0l8.png" alt="YYn0l8.png"></p><h1 id="2-å®éªŒç›®çš„"><a href="#2-å®éªŒç›®çš„" class="headerlink" title="2.å®éªŒç›®çš„"></a>2.å®éªŒç›®çš„</h1><p>äº†è§£è¾¹ç•Œç½‘ç®¡åè®®ï¼ˆBGPï¼‰</p><p>å®ç°ä¸¤ä¸ªåŸŸé—´çš„é€šè®¯ã€‚</p><h1 id="3-å®éªŒæ­¥éª¤"><a href="#3-å®éªŒæ­¥éª¤" class="headerlink" title="3.å®éªŒæ­¥éª¤"></a>3.å®éªŒæ­¥éª¤</h1><h2 id="3-1ç½‘å…³ipé…ç½®"><a href="#3-1ç½‘å…³ipé…ç½®" class="headerlink" title="3.1ç½‘å…³ipé…ç½®"></a>3.1ç½‘å…³ipé…ç½®</h2><p>AR1é…ç½®ï¼Œå…¶ä»–åŒç†ã€‚</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;Huawei&gt;sys</span></span><br><span class="line"><span class="meta">[Huawei]un</span> <span class="string">in en</span></span><br><span class="line"><span class="attr">Info</span>: <span class="string">Information center is disabled.</span></span><br><span class="line"><span class="meta">[Huawei]sysname</span> <span class="string">AR1</span></span><br><span class="line"><span class="meta">[AR1]interface</span> <span class="string">GigabitEthernet0/0/0</span></span><br><span class="line"><span class="meta">[AR1-GigabitEthernet0/0/0]ip</span> <span class="string">add 192.168.6.1 24</span></span><br><span class="line"><span class="meta">[AR1-GigabitEthernet0/0/0]interface</span> <span class="string">GigabitEthernet0/0/1</span></span><br><span class="line"><span class="meta">[AR1-GigabitEthernet0/0/1]ip</span> <span class="string">add 192.168.5.2 24</span></span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="3-2AS1é…ç½®RIPåè®®"><a href="#3-2AS1é…ç½®RIPåè®®" class="headerlink" title="3.2AS1é…ç½®RIPåè®®"></a>3.2AS1é…ç½®RIPåè®®</h2><p>AR1é…ç½®ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">[AR1]rip</span></span><br><span class="line"><span class="meta">[AR1-rip-1]net</span> <span class="string">192.168.6.0</span></span><br><span class="line"><span class="meta">[AR1-rip-1]net</span> <span class="string">192.168.5.0</span></span><br></pre></td></tr></table></figure><p>AR7é…ç½®åŒç†ã€‚</p><h2 id="3-3AS2é…ç½®OSPF"><a href="#3-3AS2é…ç½®OSPF" class="headerlink" title="3.3AS2é…ç½®OSPF"></a>3.3AS2é…ç½®OSPF</h2><p>AR2é…ç½®ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">[AR2]ospf</span></span><br><span class="line"><span class="meta">[AR2-ospf-1]area</span> <span class="string">0</span></span><br><span class="line"><span class="meta">[AR2-ospf-1-area-0.0.0.0]net</span> <span class="string">192.168.5.0 0.0.0.255</span></span><br><span class="line"><span class="meta">[AR2-ospf-1-area-0.0.0.0]net</span> <span class="string">192.168.1.0 0.0.0.255</span></span><br></pre></td></tr></table></figure><p>AR3~5åŒç†ã€‚</p><h2 id="3-4é…ç½®BGP"><a href="#3-4é…ç½®BGP" class="headerlink" title="3.4é…ç½®BGP"></a>3.4é…ç½®BGP</h2><p>AR1é…ç½®ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[AR1]bgp</span> <span class="string">1</span></span><br><span class="line"><span class="meta">[AR1-bgp]peer</span> <span class="string">192.168.5.1 as-number 2</span></span><br></pre></td></tr></table></figure><p>AR2é…ç½®ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[AR2]bgp</span> <span class="string">2</span></span><br><span class="line"><span class="meta">[AR2-bgp]peer</span> <span class="string">192.168.5.2 as-number 1</span></span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹BGPé‚»å±…å…³ç³»ï¼ˆdisplay bgp peerï¼‰</p><p>AR1:</p><p><img src="https://s1.ax1x.com/2020/05/11/YYnom4.png" alt="YYnom4.png"></p><p>AR2:</p><p><img src="https://s1.ax1x.com/2020/05/11/YYn779.png" alt="YYn779.png"></p><p>å†æŸ¥çœ‹è·¯ç”±è¡¨ï¼ˆdisplay bgp routing-tableï¼‰ï¼Œç”±äºæ²¡æœ‰å¼•å…¥è·¯ç”±è¡¨ä¸ºç©º,</p><p>å¼•å…¥ï¼š</p><ul><li><p>AR1ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[AR1-bgp]import-route</span> <span class="string">rip 1</span></span><br><span class="line"><span class="meta">[AR1-bgp]import-route</span> <span class="string">direct</span></span><br></pre></td></tr></table></figure><p>å†æ¬¡æŸ¥çœ‹è·¯ç”±è¡¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<img src="https://s1.ax1x.com/2020/05/11/YYnqt1.png" alt="YYnqt1.png"></p></li><li><p>AR2:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[AR2-bgp]import-route</span> <span class="string">direct </span></span><br><span class="line"><span class="meta">[AR2-bgp]import-route</span> <span class="string">ospf 1</span></span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2020/05/11/YYu97d.png" alt="YYu97d.png"></p></li></ul><h2 id="3-5æµ‹è¯•"><a href="#3-5æµ‹è¯•" class="headerlink" title="3.5æµ‹è¯•"></a>3.5æµ‹è¯•</h2><p>AR5 GE0/0/0 Ping AR7 GE0/0/0  åœ¨AR2 GE0/0/0ç«¯å£æŠ“åŒ…ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://s1.ax1x.com/2020/05/11/YYuPAA.png" alt="YYuPAA.png"></p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå·¥ç¨‹è®¾è®¡ </category>
          
          <category> BGPå®éªŒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå·¥ç¨‹è®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ›æ‰£æ¯æ—¥ä¸€é¢˜ä¹‹å¿«ä¹æ•°</title>
      <link href="/2020/04/30/%E5%8A%9B%E6%89%A3%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%E4%B9%8B%E5%BF%AB%E4%B9%90%E6%95%B0/"/>
      <url>/2020/04/30/%E5%8A%9B%E6%89%A3%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%E4%B9%8B%E5%BF%AB%E4%B9%90%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="1ã€é¢˜ç›®æè¿°"><a href="#1ã€é¢˜ç›®æè¿°" class="headerlink" title="1ã€é¢˜ç›®æè¿°"></a>1ã€é¢˜ç›®æè¿°</h1><p>ç¼–å†™ä¸€ä¸ªç®—æ³•æ¥åˆ¤æ–­ä¸€ä¸ªæ•° n æ˜¯ä¸æ˜¯å¿«ä¹æ•°ã€‚</p><p>ã€Œå¿«ä¹æ•°ã€å®šä¹‰ä¸ºï¼šå¯¹äºä¸€ä¸ªæ­£æ•´æ•°ï¼Œæ¯ä¸€æ¬¡å°†è¯¥æ•°æ›¿æ¢ä¸ºå®ƒæ¯ä¸ªä½ç½®ä¸Šçš„æ•°å­—çš„å¹³æ–¹å’Œï¼Œç„¶åé‡å¤è¿™ä¸ªè¿‡ç¨‹ç›´åˆ°è¿™ä¸ªæ•°å˜ä¸º 1ï¼Œä¹Ÿå¯èƒ½æ˜¯ æ— é™å¾ªç¯ ä½†å§‹ç»ˆå˜ä¸åˆ° 1ã€‚å¦‚æœ å¯ä»¥å˜ä¸º  1ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å°±æ˜¯å¿«ä¹æ•°ã€‚</p><p>å¦‚æœ n æ˜¯å¿«ä¹æ•°å°±è¿”å› True ï¼›ä¸æ˜¯ï¼Œåˆ™è¿”å› False ã€‚</p><a id="more"></a><h1 id="2ã€ç¤ºä¾‹"><a href="#2ã€ç¤ºä¾‹" class="headerlink" title="2ã€ç¤ºä¾‹"></a>2ã€ç¤ºä¾‹</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼š19</span><br><span class="line">è¾“å‡ºï¼štrue</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">12 + 92 = 82</span><br><span class="line">82 + 22 = 68</span><br><span class="line">62 + 82 = 100</span><br><span class="line">12 + 02 + 02 = 1</span><br></pre></td></tr></table></figure><h1 id="3ã€ç®—æ³•åˆ†æ"><a href="#3ã€ç®—æ³•åˆ†æ" class="headerlink" title="3ã€ç®—æ³•åˆ†æ"></a>3ã€ç®—æ³•åˆ†æ</h1><p> ç¬¬ 1 éƒ¨åˆ†æˆ‘ä»¬æŒ‰ç…§é¢˜ç›®çš„è¦æ±‚åšæ•°ä½åˆ†ç¦»ï¼Œæ±‚å¹³æ–¹å’Œã€‚ </p><p> ç¬¬ 2 éƒ¨åˆ†æŒ‰ç…§ä¸€ç³»åˆ—çš„æ•°å­—æ¥åˆ¤æ–­æˆ‘ä»¬æ˜¯å¦è¿›å…¥äº†ä¸€ä¸ªå¾ªç¯ã€‚</p><p>å­˜åœ¨ä¸¤ç§æƒ…å†µï¼š</p><ul><li>æ”¶æ•›äº1</li></ul><img src="/2020/04/30/%E5%8A%9B%E6%89%A3%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%E4%B9%8B%E5%BF%AB%E4%B9%90%E6%95%B0/1.png" class title="Router"><ul><li>é™·å…¥å¾ªç¯</li></ul><img src="/2020/04/30/%E5%8A%9B%E6%89%A3%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%E4%B9%8B%E5%BF%AB%E4%B9%90%E6%95%B0/2.png" class title="Router"><p>é€šè¿‡åå¤è°ƒç”¨getnum(n)å¾—åˆ°çš„æ˜¯ä¸€ä¸ªéšå¼é“¾è¡¨ã€‚éšå¼æ„å‘³ç€æˆ‘ä»¬æ²¡æœ‰å®é™…çš„é“¾è¡¨èŠ‚ç‚¹å’ŒæŒ‡é’ˆï¼Œä½†æ•°æ®ä»ç„¶å½¢æˆé“¾è¡¨ç»“æ„ã€‚èµ·å§‹æ•°å­—æ˜¯é“¾è¡¨çš„å¤´ â€œèŠ‚ç‚¹â€ï¼Œé“¾ä¸­çš„æ‰€æœ‰å…¶ä»–æ•°å­—éƒ½æ˜¯èŠ‚ç‚¹ã€‚next æŒ‡é’ˆæ˜¯é€šè¿‡è°ƒç”¨ getnum(n) å‡½æ•°è·å¾—ã€‚</p><p>æ„è¯†åˆ°æˆ‘ä»¬å®é™…æœ‰ä¸ªé“¾è¡¨ï¼Œé‚£ä¹ˆè¿™ä¸ªé—®é¢˜å°±å¯ä»¥è½¬æ¢ä¸ºæ£€æµ‹ä¸€ä¸ªé“¾è¡¨æ˜¯å¦æœ‰ç¯ã€‚å› æ­¤æˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥ä½¿ç”¨å¼—æ´›ä¼Šå¾·å¾ªç¯æŸ¥æ‰¾ç®—æ³•ã€‚è¿™ä¸ªç®—æ³•æ˜¯ä¸¤ä¸ªå¥”è·‘é€‰æ‰‹ï¼Œä¸€ä¸ªè·‘çš„å¿«ï¼Œä¸€ä¸ªè·‘å¾—æ…¢ã€‚åœ¨é¾Ÿå…”èµ›è·‘çš„å¯“è¨€ä¸­ï¼Œè·‘çš„å¿«çš„ç§°ä¸º â€œä¹Œé¾Ÿâ€ï¼Œè·‘å¾—å¿«çš„ç§°ä¸º â€œå…”å­â€ã€‚</p><p> ä¸ç®¡ä¹Œé¾Ÿå’Œå…”å­åœ¨å¾ªç¯ä¸­ä»å“ªé‡Œå¼€å§‹ï¼Œå®ƒä»¬æœ€ç»ˆéƒ½ä¼šç›¸é‡ã€‚è¿™æ˜¯å› ä¸ºå…”å­æ¯èµ°ä¸€æ­¥å°±å‘ä¹Œé¾Ÿé è¿‘ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆåœ¨å®ƒä»¬çš„ç§»åŠ¨æ–¹å‘ä¸Šï¼‰ã€‚ </p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="/2020/04/30/%E5%8A%9B%E6%89%A3%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%E4%B9%8B%E5%BF%AB%E4%B9%90%E6%95%B0/1.gif" class title="Router"><p>æˆ‘ä»¬ä¸æ˜¯åªè·Ÿè¸ªé“¾è¡¨ä¸­çš„ä¸€ä¸ªå€¼ï¼Œè€Œæ˜¯è·Ÿè¸ªä¸¤ä¸ªå€¼ï¼Œç§°ä¸ºå¿«è·‘è€…å’Œæ…¢è·‘è€…ã€‚åœ¨ç®—æ³•çš„æ¯ä¸€æ­¥ä¸­ï¼Œæ…¢é€Ÿåœ¨é“¾è¡¨ä¸­å‰è¿› 1 ä¸ªèŠ‚ç‚¹ï¼Œå¿«è·‘è€…å‰è¿› 2 ä¸ªèŠ‚ç‚¹ï¼ˆå¯¹ getnum(n) å‡½æ•°çš„åµŒå¥—è°ƒç”¨ï¼‰ã€‚</p><p>å¦‚æœ n æ˜¯ä¸€ä¸ªå¿«ä¹æ•°ï¼Œå³æ²¡æœ‰å¾ªç¯ï¼Œé‚£ä¹ˆå¿«è·‘è€…æœ€ç»ˆä¼šæ¯”æ…¢è·‘è€…å…ˆåˆ°è¾¾æ•°å­— 1ã€‚</p><p>å¦‚æœ n ä¸æ˜¯ä¸€ä¸ªå¿«ä¹çš„æ•°å­—ï¼Œé‚£ä¹ˆæœ€ç»ˆå¿«è·‘è€…å’Œæ…¢è·‘è€…å°†åœ¨åŒä¸€ä¸ªæ•°å­—ä¸Šç›¸é‡ã€‚</p><h1 id="4-ä»£ç å¦‚ä¸‹ï¼š"><a href="#4-ä»£ç å¦‚ä¸‹ï¼š" class="headerlink" title="4.ä»£ç å¦‚ä¸‹ï¼š"></a>4.ä»£ç å¦‚ä¸‹ï¼š</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HappyNum</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isHappy</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> slow = n, fast;</span><br><span class="line">        slow = getsum(slow);</span><br><span class="line">        fast = getsum(slow);</span><br><span class="line">        <span class="keyword">while</span> (fast != <span class="number">1</span> &amp;&amp; slow != fast) &#123;</span><br><span class="line">            slow = getsum(slow);</span><br><span class="line">            fast = getsum(getsum(fast));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> fast == <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ä¸‹ä¸€ä¸ªå„ä¸ªä½æ•°å¹³æ–¹å’Œçš„ç»“æœ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> n</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getsum</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (n &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> temp = n % <span class="number">10</span>;</span><br><span class="line">            n /= <span class="number">10</span>;</span><br><span class="line">            sum += temp * temp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(isHappy(<span class="number">20</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ›æ‰£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DHCPè·¨è·¯ç”±è½¬å‘</title>
      <link href="/2020/04/13/DHCP%E8%B7%A8%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91/"/>
      <url>/2020/04/13/DHCP%E8%B7%A8%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91/</url>
      
        <content type="html"><![CDATA[<h1 id="1-æ‹“æ‰‘å›¾"><a href="#1-æ‹“æ‰‘å›¾" class="headerlink" title="1.æ‹“æ‰‘å›¾"></a>1.æ‹“æ‰‘å›¾</h1><img src="/2020/04/13/DHCP%E8%B7%A8%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91/11.png" class><h1 id="2-å®éªŒç›®çš„"><a href="#2-å®éªŒç›®çš„" class="headerlink" title="2.å®éªŒç›®çš„"></a>2.å®éªŒç›®çš„</h1><ul><li>DHCPåè®®å·¥ä½œè¿‡ç¨‹é…ç½®</li><li>DHCPåè®®æŠ¥æ–‡æ ¼å¼</li></ul><h1 id="3-å®éªŒåŸç†"><a href="#3-å®éªŒåŸç†" class="headerlink" title="3.å®éªŒåŸç†"></a>3.å®éªŒåŸç†</h1><h2 id="3-1DHCPæ¦‚è¿°"><a href="#3-1DHCPæ¦‚è¿°" class="headerlink" title="3.1DHCPæ¦‚è¿°"></a>3.1DHCPæ¦‚è¿°</h2><p> DHCPï¼ŒåŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼Œå‰èº«æ˜¯BOOTPåè®®ï¼Œæ˜¯ä¸€ä¸ªå±€åŸŸç½‘çš„ç½‘ç»œåè®®ï¼Œä½¿ç”¨UDPåè®®å·¥ä½œï¼Œå¸¸ç”¨çš„2ä¸ªç«¯å£ï¼š67(DHCP server),68(DHCP client)ã€‚DHCPé€šå¸¸è¢«ç”¨äºå±€åŸŸç½‘ç¯å¢ƒï¼Œä¸»è¦ä½œç”¨æ˜¯é›†ä¸­çš„ç®¡ç†ã€åˆ†é…IPåœ°å€ï¼Œä½¿clientåŠ¨æ€çš„è·å¾—IPåœ°å€ã€Gatewayåœ°å€ã€DNSæœåŠ¡å™¨åœ°å€ç­‰ä¿¡æ¯ï¼Œå¹¶èƒ½å¤Ÿæå‡åœ°å€çš„ä½¿ç”¨ç‡ã€‚ç®€å•æ¥è¯´ï¼ŒDHCPå°±æ˜¯ä¸€ä¸ªä¸éœ€è¦è´¦å·å¯†ç ç™»å½•çš„ã€è‡ªåŠ¨ç»™å†…ç½‘æœºå™¨åˆ†é…IPåœ°å€ç­‰ä¿¡æ¯çš„åè®®ã€‚ </p><a id="more"></a><h2 id="3-2DHCPåè®®ä¸­çš„æŠ¥æ–‡"><a href="#3-2DHCPåè®®ä¸­çš„æŠ¥æ–‡" class="headerlink" title="3.2DHCPåè®®ä¸­çš„æŠ¥æ–‡"></a>3.2DHCPåè®®ä¸­çš„æŠ¥æ–‡</h2><h3 id="3-2-1DHCPæŠ¥æ–‡å…±æœ‰ä¸€ä¸‹å‡ ç§ï¼š"><a href="#3-2-1DHCPæŠ¥æ–‡å…±æœ‰ä¸€ä¸‹å‡ ç§ï¼š" class="headerlink" title="3.2.1DHCPæŠ¥æ–‡å…±æœ‰ä¸€ä¸‹å‡ ç§ï¼š"></a>3.2.1DHCPæŠ¥æ–‡å…±æœ‰ä¸€ä¸‹å‡ ç§ï¼š</h3><ul><li><strong>DHCP DISCOVER</strong> ï¼šå®¢æˆ·ç«¯å¼€å§‹DHCPè¿‡ç¨‹å‘é€çš„åŒ…ï¼Œæ˜¯DHCPåè®®çš„å¼€å§‹</li><li><strong>DHCP OFFER</strong> ï¼šæœåŠ¡å™¨æ¥æ”¶åˆ°DHCP DISCOVERä¹‹ååšå‡ºçš„å“åº”ï¼Œå®ƒåŒ…æ‹¬äº†ç»™äºˆå®¢æˆ·ç«¯çš„IPï¼ˆyiaddrï¼‰ã€å®¢æˆ·ç«¯çš„MACåœ°å€ã€ç§Ÿçº¦è¿‡æœŸæ—¶é—´ã€æœåŠ¡å™¨çš„è¯†åˆ«ç¬¦ä»¥åŠå…¶ä»–ä¿¡æ¯</li><li><strong>DHCP REQUEST</strong> ï¼šå®¢æˆ·ç«¯å¯¹äºæœåŠ¡å™¨å‘å‡ºçš„DHCP OFFERæ‰€åšå‡ºçš„å“åº”ã€‚åœ¨ç»­çº¦ç§ŸæœŸçš„æ—¶å€™åŒæ ·ä¼šä½¿ç”¨ã€‚</li><li><strong>DHCP ACK</strong> ï¼šæœåŠ¡å™¨åœ¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„DHCP REQUESTä¹‹åå‘å‡ºçš„æˆåŠŸç¡®è®¤çš„æŠ¥æ–‡ã€‚åœ¨å»ºç«‹è¿æ¥çš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯åœ¨æ¥æ”¶åˆ°è¿™ä¸ªæŠ¥æ–‡ä¹‹åæ‰ä¼šç¡®è®¤åˆ†é…ç»™å®ƒçš„IPå’Œå…¶ä»–ä¿¡æ¯å¯ä»¥è¢«å…è®¸ä½¿ç”¨ã€‚</li><li><strong>DHCP NAK</strong> ï¼šDHCP ACKçš„ç›¸åçš„æŠ¥æ–‡ï¼Œè¡¨ç¤ºæœåŠ¡å™¨æ‹’ç»äº†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</li><li><strong>DHCP RELEASE</strong> ï¼šä¸€èˆ¬å‡ºç°åœ¨å®¢æˆ·ç«¯å…³æœºã€ä¸‹çº¿ç­‰çŠ¶å†µã€‚è¿™ä¸ªæŠ¥æ–‡å°†ä¼šä½¿DHCPæœåŠ¡å™¨é‡Šæ”¾å‘å‡ºæ­¤æŠ¥æ–‡çš„å®¢æˆ·ç«¯çš„IPåœ°å€</li><li><strong>DHCP INFORM</strong> ï¼šå®¢æˆ·ç«¯å‘å‡ºçš„å‘æœåŠ¡å™¨è¯·æ±‚ä¸€äº›ä¿¡æ¯çš„æŠ¥æ–‡</li><li><strong>DHCP DECLINE</strong> :å½“å®¢æˆ·ç«¯å‘ç°æœåŠ¡å™¨åˆ†é…çš„IPåœ°å€æ— æ³•ä½¿ç”¨ï¼ˆå¦‚IPåœ°å€å†²çªæ—¶ï¼‰ï¼Œå°†å‘å‡ºæ­¤æŠ¥æ–‡ï¼Œé€šçŸ¥æœåŠ¡å™¨ç¦æ­¢ä½¿ç”¨è¯¥IPåœ°å€ã€‚</li></ul><h3 id="3-2-2DHCP-çš„-å·¥ä½œæµç¨‹ï¼š"><a href="#3-2-2DHCP-çš„-å·¥ä½œæµç¨‹ï¼š" class="headerlink" title="3.2.2DHCP çš„ å·¥ä½œæµç¨‹ï¼š"></a>3.2.2DHCP çš„ å·¥ä½œæµç¨‹ï¼š</h3><img src="/2020/04/13/DHCP%E8%B7%A8%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91/1.png" class><h1 id="4-å®éªŒä¸»è¦æ­¥éª¤"><a href="#4-å®éªŒä¸»è¦æ­¥éª¤" class="headerlink" title="4.å®éªŒä¸»è¦æ­¥éª¤"></a>4.å®éªŒä¸»è¦æ­¥éª¤</h1><h2 id="4-1è®¾ç½®PCçš„ipä¸ºDHCPåŠ¨æ€è·å–"><a href="#4-1è®¾ç½®PCçš„ipä¸ºDHCPåŠ¨æ€è·å–" class="headerlink" title="4.1è®¾ç½®PCçš„ipä¸ºDHCPåŠ¨æ€è·å–"></a>4.1è®¾ç½®PCçš„ipä¸ºDHCPåŠ¨æ€è·å–</h2><h2 id="4-2åœ¨äº¤æ¢æœºS1ä¸­åˆ’åˆ†vlanã€é…ç½®è™šæ¥å£IP"><a href="#4-2åœ¨äº¤æ¢æœºS1ä¸­åˆ’åˆ†vlanã€é…ç½®è™šæ¥å£IP" class="headerlink" title="4.2åœ¨äº¤æ¢æœºS1ä¸­åˆ’åˆ†vlanã€é…ç½®è™šæ¥å£IP"></a>4.2åœ¨äº¤æ¢æœºS1ä¸­åˆ’åˆ†vlanã€é…ç½®è™šæ¥å£IP</h2><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;Huawei&gt;sys</span></span><br><span class="line"><span class="attr">Enter</span> <span class="string">system view, return user view with Ctrl+Z.</span></span><br><span class="line"><span class="meta">[Huawei]sysname</span> <span class="string">S1</span></span><br><span class="line"><span class="meta">[S1]vlan</span> <span class="string">batch 2 3 4</span></span><br><span class="line"><span class="meta">[S1]int</span> <span class="string">GigabitEthernet0/0/1</span></span><br><span class="line"><span class="meta">[S1-GigabitEthernet0/0/1]port</span> <span class="string">link-type access </span></span><br><span class="line"><span class="meta">[S1-GigabitEthernet0/0/1]port</span> <span class="string">default vlan 2</span></span><br><span class="line"><span class="attr">[S1-GigabitEthernet0/0/1]quit</span></span><br><span class="line"><span class="meta">[S1]int</span> <span class="string">GigabitEthernet0/0/2</span></span><br><span class="line"><span class="meta">[S1-GigabitEthernet0/0/2]port</span> <span class="string">link-type access </span></span><br><span class="line"><span class="meta">[S1-GigabitEthernet0/0/2]port</span> <span class="string">default vlan 3</span></span><br><span class="line"><span class="meta">[S1-GigabitEthernet0/0/2]quit</span><span class="string"></span></span><br><span class="line"><span class="meta">[S1]int</span> <span class="string">GigabitEthernet 0/0/3</span></span><br><span class="line"><span class="meta">[S1-GigabitEthernet0/0/3]port</span> <span class="string">link-type access </span></span><br><span class="line"><span class="meta">[S1-GigabitEthernet0/0/3]port</span> <span class="string">l</span></span><br><span class="line"><span class="meta">[S1-GigabitEthernet0/0/3]port</span> <span class="string">li</span></span><br><span class="line"><span class="meta">[S1-GigabitEthernet0/0/3]port</span> <span class="string">default vlan 4</span></span><br><span class="line"><span class="attr">[S1-GigabitEthernet0/0/3]</span></span><br><span class="line"><span class="attr">[S1-GigabitEthernet0/0/3]quit</span></span><br><span class="line"></span><br><span class="line"><span class="meta">[S1-Vlanif2]ip</span> <span class="string">address 192.168.0.254 24</span></span><br><span class="line"><span class="attr">[S1-Vlanif2]quit</span></span><br><span class="line"><span class="meta">[S1]interface</span> <span class="string">Vlanif 3</span></span><br><span class="line"><span class="meta">[S1-Vlanif3]ip</span> <span class="string">address 192.168.1.254 24</span></span><br><span class="line"><span class="attr">[S1-Vlanif3]quit</span></span><br><span class="line"><span class="meta">[S1]interface</span> <span class="string">Vlanif 4</span></span><br><span class="line"><span class="meta">[S1-Vlanif4]ip</span> <span class="string">address 192.168.2.1 24</span></span><br><span class="line"><span class="attr">[S1-Vlanif4]quit</span></span><br></pre></td></tr></table></figure><h2 id="4-3åœ¨è·¯ç”±å™¨R1ä¸­é…ç½®DHCPæœåŠ¡"><a href="#4-3åœ¨è·¯ç”±å™¨R1ä¸­é…ç½®DHCPæœåŠ¡" class="headerlink" title="4.3åœ¨è·¯ç”±å™¨R1ä¸­é…ç½®DHCPæœåŠ¡"></a>4.3åœ¨è·¯ç”±å™¨R1ä¸­é…ç½®DHCPæœåŠ¡</h2><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;Huawei&gt;system-view</span> <span class="string"></span></span><br><span class="line"><span class="attr">Enter</span> <span class="string">system view, return user view with Ctrl+Z.</span></span><br><span class="line"><span class="meta">[Huawei]sysname</span> <span class="string">R1</span></span><br><span class="line"><span class="meta">[R1]int</span> <span class="string">GigabitEthernet0/0/0</span></span><br><span class="line"><span class="meta">[R1-GigabitEthernet0/0/0]ip</span> <span class="string">address 192.168.2.254 24</span></span><br><span class="line"><span class="attr">[R1-GigabitEthernet0/0/0]quit</span></span><br><span class="line"><span class="meta">[R1]ip</span> <span class="string">route-static 192.168.0.0 24 192.168.2.1</span></span><br><span class="line"><span class="meta">[R1]ip</span> <span class="string">route-static 192.168.1.0 24 192.168.2.1</span></span><br><span class="line"><span class="comment">#åˆ›å»ºåœ°å€æ±  1ã€2</span></span><br><span class="line"><span class="meta">[R1]ip</span> <span class="string">pool 1</span></span><br><span class="line"><span class="meta">[R1-ip-pool-1]network</span> <span class="string">192.168.0.0 mask 255.255.255.0</span></span><br><span class="line"><span class="meta">[R1-ip-pool-1]gate</span><span class="string"></span></span><br><span class="line"><span class="meta">[R1-ip-pool-1]gateway-list</span> <span class="string">192.168.0.254</span></span><br><span class="line"><span class="meta">[R1-ip-pool-1]dns-list</span> <span class="string">8.8.8.8</span></span><br><span class="line"><span class="attr">[R1-ip-pool-1]quit</span></span><br><span class="line"><span class="meta">[R1]ip</span> <span class="string">pool 2</span></span><br><span class="line"><span class="meta">[R1-ip-pool-2]network</span> <span class="string">192.168.1.0 mask 255.255.255.0</span></span><br><span class="line"><span class="meta">[R1-ip-pool-2]gateway-list</span> <span class="string">192.168.1.254</span></span><br><span class="line"><span class="meta">[R1-ip-pool-2]dns-list</span> <span class="string">114.114.114.114</span></span><br><span class="line"><span class="attr">[R1-ip-pool-2]quit</span></span><br><span class="line"><span class="meta">[R1]int</span> <span class="string">GigabitEthernet0/0/0</span></span><br><span class="line"><span class="meta">[R1-GigabitEthernet0/0/0]dhcp</span> <span class="string">enable</span></span><br><span class="line"><span class="meta">[R1-GigabitEthernet0/0/0]dhcp</span> <span class="string">select global </span></span><br><span class="line"><span class="attr">[R1-GigabitEthernet0/0/0]quit</span></span><br><span class="line"><span class="attr">[R1]</span></span><br></pre></td></tr></table></figure><h2 id="4-4åœ¨äº¤æ¢æœºS1ä¸­é…ç½®DHCPä¸­ç»§æœåŠ¡"><a href="#4-4åœ¨äº¤æ¢æœºS1ä¸­é…ç½®DHCPä¸­ç»§æœåŠ¡" class="headerlink" title="4.4åœ¨äº¤æ¢æœºS1ä¸­é…ç½®DHCPä¸­ç»§æœåŠ¡"></a>4.4åœ¨äº¤æ¢æœºS1ä¸­é…ç½®DHCPä¸­ç»§æœåŠ¡</h2><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[S1]dhcp</span> <span class="string">enable </span></span><br><span class="line"><span class="meta">[S1]int</span> <span class="string">Vlanif 2</span></span><br><span class="line"><span class="meta">[S1-Vlanif2]dhcp</span> <span class="string">select relay </span></span><br><span class="line"><span class="meta">[S1-Vlanif2]dhcp</span> <span class="string">relay server-ip 192.168.2.254</span></span><br><span class="line"><span class="attr">[S1-Vlanif2]quit</span></span><br><span class="line"><span class="meta">[S1]int</span> <span class="string">Vlanif 3</span></span><br><span class="line"><span class="meta">[S1-Vlanif3]dhcp</span> <span class="string">select relay </span></span><br><span class="line"><span class="meta">[S1-Vlanif3]dhcp</span> <span class="string">relay server-ip 192.168.2.254</span></span><br><span class="line"><span class="attr">[S1-Vlanif3]quit</span></span><br></pre></td></tr></table></figure><h2 id="4-5æµ‹è¯•"><a href="#4-5æµ‹è¯•" class="headerlink" title="4.5æµ‹è¯•"></a>4.5æµ‹è¯•</h2><p>åœ¨PC3çš„å‘½ä»¤è¡Œè¾“å…¥ipconfigå‘½ä»¤æŸ¥çœ‹æœºå™¨çš„ipåˆ†é…æƒ…å†µï¼š</p><img src="/2020/04/13/DHCP%E8%B7%A8%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91/12.png" class><p>åœ¨PC4çš„å‘½ä»¤è¡Œè¾“å…¥ipconfigå‘½ä»¤æŸ¥çœ‹æœºå™¨çš„ipåˆ†é…æƒ…å†µï¼š</p><img src="/2020/04/13/DHCP%E8%B7%A8%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91/13.png" class><p>ç”¨PC3 Ping PC4 æµ‹è¯•ç½‘ç»œè¿é€šæ€§ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><img src="/2020/04/13/DHCP%E8%B7%A8%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91/14.png" class><h2 id="4-6DHCPæŠ¥æ–‡æ•è·å’Œåˆ†æ"><a href="#4-6DHCPæŠ¥æ–‡æ•è·å’Œåˆ†æ" class="headerlink" title="4.6DHCPæŠ¥æ–‡æ•è·å’Œåˆ†æ"></a>4.6DHCPæŠ¥æ–‡æ•è·å’Œåˆ†æ</h2><h3 id="4-6-1æŠ¥æ–‡æ•è·"><a href="#4-6-1æŠ¥æ–‡æ•è·" class="headerlink" title="4.6.1æŠ¥æ–‡æ•è·"></a>4.6.1æŠ¥æ–‡æ•è·</h3><p>å…ˆå°†PC3çš„ipè·å–æ–¹å¼è®¾ç½®ä¸ºé™æ€ï¼Œç„¶ååœ¨è·¯ç”±å™¨R1çš„GE0/0/0ç«¯å£ä¸Šè¿›è¡ŒæŠ¥æ–‡æ•è·ï¼Œå†å°†PC3çš„ipè·å–æ–¹å¼è®¾ç½®ä¸ºDHCPåŠ¨æ€è·å–ï¼Œå»è§¦å‘3.2.2å·¥ä½œæµç¨‹ä¸­çš„æŠ¥æ–‡ï¼ˆ<strong>DHCP DISCOVER</strong>ï¼Œ<strong>DHCP OFFER</strong> ï¼Œ<strong>DHCP REQUEST</strong>ï¼Œ<strong>DHCP ACK</strong>ï¼‰ï¼Œå†å°†PC3çš„ipè·å–æ–¹å¼è®¾ç½®ä¸ºé™æ€ï¼Œæ¨¡æ‹Ÿè®¾å¤‡å®¢æˆ·ç«¯ä¸‹çº¿è¡Œä¸ºï¼Œè§¦å‘<strong>DHCP RELEASE</strong>æŠ¥æ–‡ã€‚å…±æ•è·åˆ°5ä¸­ç±»å‹çš„æŠ¥æ–‡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="/2020/04/13/DHCP%E8%B7%A8%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91/15.png" class><h3 id="4-6-2æŠ¥æ–‡åˆ†æ"><a href="#4-6-2æŠ¥æ–‡åˆ†æ" class="headerlink" title="4.6.2æŠ¥æ–‡åˆ†æ"></a>4.6.2æŠ¥æ–‡åˆ†æ</h3><ul><li><p><strong>DHCP DISCOVER</strong>ï¼šå®¢æˆ·ç«¯å¼€å§‹DHCPè¿‡ç¨‹å‘é€çš„åŒ…ï¼Œæ˜¯DHCPåè®®çš„å¼€å§‹ã€‚</p><img src="/2020/04/13/DHCP%E8%B7%A8%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91/16.png" class></li><li><p><strong>DHCP OFFER</strong> ï¼šæœåŠ¡å™¨æ¥æ”¶åˆ°DHCP DISCOVERä¹‹ååšå‡ºçš„å“åº”ï¼Œå®ƒåŒ…æ‹¬äº†ç»™äºˆå®¢æˆ·ç«¯çš„IPï¼ˆyiaddrï¼‰ã€å®¢æˆ·ç«¯çš„MACåœ°å€ã€ç§Ÿçº¦è¿‡æœŸæ—¶é—´ã€æœåŠ¡å™¨çš„è¯†åˆ«ç¬¦ä»¥åŠå…¶ä»–ä¿¡æ¯ã€‚</p><img src="/2020/04/13/DHCP%E8%B7%A8%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91/17.png" class></li><li><p><strong>DHCP REQUEST</strong> ï¼šå®¢æˆ·ç«¯å¯¹äºæœåŠ¡å™¨å‘å‡ºçš„DHCP OFFERæ‰€åšå‡ºçš„å“åº”ã€‚åœ¨ç»­çº¦ç§ŸæœŸçš„æ—¶å€™åŒæ ·ä¼šä½¿ç”¨ã€‚</p><img src="/2020/04/13/DHCP%E8%B7%A8%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91/18.png" class></li><li><p><strong>DHCP ACK</strong> ï¼šæœåŠ¡å™¨åœ¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„DHCP REQUESTä¹‹åå‘å‡ºçš„æˆåŠŸç¡®è®¤çš„æŠ¥æ–‡ã€‚åœ¨å»ºç«‹è¿æ¥çš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯åœ¨æ¥æ”¶åˆ°è¿™ä¸ªæŠ¥æ–‡ä¹‹åæ‰ä¼šç¡®è®¤åˆ†é…ç»™å®ƒçš„IPå’Œå…¶ä»–ä¿¡æ¯å¯ä»¥è¢«å…è®¸ä½¿ç”¨ã€‚</p><img src="/2020/04/13/DHCP%E8%B7%A8%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91/19.png" class></li><li><p><strong>DHCP RELEASE</strong> ï¼šä¸€èˆ¬å‡ºç°åœ¨å®¢æˆ·ç«¯å…³æœºã€ä¸‹çº¿ç­‰çŠ¶å†µã€‚è¿™ä¸ªæŠ¥æ–‡å°†ä¼šä½¿DHCPæœåŠ¡å™¨é‡Šæ”¾å‘å‡ºæ­¤æŠ¥æ–‡çš„å®¢æˆ·ç«¯çš„IPåœ°å€ã€‚</p><img src="/2020/04/13/DHCP%E8%B7%A8%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91/20.png" class></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ospfç»„ç½‘å®éªŒ</title>
      <link href="/2020/03/22/ospf%E7%BB%84%E7%BD%91%E5%AE%9E%E9%AA%8C/"/>
      <url>/2020/03/22/ospf%E7%BB%84%E7%BD%91%E5%AE%9E%E9%AA%8C/</url>
      
        <content type="html"><![CDATA[<h1 id="1ã€ç½‘ç»œæ‹“æ‰‘å›¾"><a href="#1ã€ç½‘ç»œæ‹“æ‰‘å›¾" class="headerlink" title="1ã€ç½‘ç»œæ‹“æ‰‘å›¾"></a>1ã€ç½‘ç»œæ‹“æ‰‘å›¾</h1><p><img src="https://s1.ax1x.com/2020/03/22/85DWGD.png" alt="85DWGD.png"></p><h1 id="2ã€å®éªŒç›®çš„"><a href="#2ã€å®éªŒç›®çš„" class="headerlink" title="2ã€å®éªŒç›®çš„"></a>2ã€å®éªŒç›®çš„</h1><ul><li>OSPFçš„åŸºæœ¬é…ç½®ï¼ˆé™æ€è·¯ç”±åŠåŠ¨æ€è·¯ç”±ï¼‰</li><li>OSPFåè®®æŠ¥æ–‡äº¤äº’è¿‡ç¨‹</li><li>åŒºåŸŸåˆ’åˆ†</li></ul><h1 id="3ã€å®éªŒæ­¥éª¤"><a href="#3ã€å®éªŒæ­¥éª¤" class="headerlink" title="3ã€å®éªŒæ­¥éª¤"></a>3ã€å®éªŒæ­¥éª¤</h1><h2 id="3-1-è¿æ¥æ‹“æ‰‘å¹¶é…ç½®PCæœºçš„IPåŠç½‘å…³"><a href="#3-1-è¿æ¥æ‹“æ‰‘å¹¶é…ç½®PCæœºçš„IPåŠç½‘å…³" class="headerlink" title="3.1 è¿æ¥æ‹“æ‰‘å¹¶é…ç½®PCæœºçš„IPåŠç½‘å…³"></a>3.1 è¿æ¥æ‹“æ‰‘å¹¶é…ç½®PCæœºçš„IPåŠç½‘å…³</h2><p>PC1é…ç½®å¦‚ä¸‹ï¼šï¼ˆå…¶ä»–PCåŒç†ï¼‰</p><p><img src="https://s1.ax1x.com/2020/03/22/85shDA.png" alt="PC1"></p><h2 id="3-2-é…ç½®è·¯ç”±å™¨çš„å„ä¸ªç«¯å£"><a href="#3-2-é…ç½®è·¯ç”±å™¨çš„å„ä¸ªç«¯å£" class="headerlink" title="3.2 é…ç½®è·¯ç”±å™¨çš„å„ä¸ªç«¯å£"></a>3.2 é…ç½®è·¯ç”±å™¨çš„å„ä¸ªç«¯å£</h2><h3 id="3-2-1-AR3ç«¯å£é…ç½®"><a href="#3-2-1-AR3ç«¯å£é…ç½®" class="headerlink" title="3.2.1 AR3ç«¯å£é…ç½®"></a>3.2.1 AR3ç«¯å£é…ç½®</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;Huawei&gt;sys</span></span><br><span class="line"><span class="attr">Enter</span> <span class="string">system view, return user view with Ctrl+Z.</span></span><br><span class="line"><span class="meta">[Huawei]sysname</span> <span class="string">R3</span></span><br><span class="line"><span class="meta">[R3]interface</span> <span class="string">GigabitEthernet 0/0/0</span></span><br><span class="line"><span class="meta">[R3-GigabitEthernet0/0/0]ip</span> <span class="string">address 192.168.4.254 24</span></span><br><span class="line"><span class="attr">[R3-GigabitEthernet0/0/0]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:23:11-08:00 R3 %%01IFNET/4/LINK_STATE(l)[0]:The line protocol IP </span></span><br><span class="line"><span class="attr">on</span> <span class="string">the interface GigabitEthernet0/0/0 has entered the UP state. </span></span><br><span class="line"><span class="meta">[R3-GigabitEthernet0/0/0]quit</span><span class="string"></span></span><br><span class="line"><span class="meta">[R3]interface</span> <span class="string">GigabitEthernet 0/0/1</span></span><br><span class="line"><span class="meta">[R3-GigabitEthernet0/0/1]ip</span> <span class="string">address 192.168.34.4 24</span></span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="3-2-2-AR4ç«¯å£é…ç½®"><a href="#3-2-2-AR4ç«¯å£é…ç½®" class="headerlink" title="3.2.2 AR4ç«¯å£é…ç½®"></a>3.2.2 AR4ç«¯å£é…ç½®</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;Huawei&gt;sys</span></span><br><span class="line"><span class="attr">Enter</span> <span class="string">system view, return user view with Ctrl+Z.</span></span><br><span class="line"><span class="meta">[Huawei]sysname</span> <span class="string">R4</span></span><br><span class="line"><span class="meta">[R4]interface</span> <span class="string">GigabitEthernet 0/0/0</span></span><br><span class="line"><span class="meta">[R4-GigabitEthernet0/0/0]ip</span> <span class="string">address 192.168.34.3 24</span></span><br><span class="line"><span class="attr">[R4-GigabitEthernet0/0/0]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:24:31-08:00 R4 %%01IFNET/4/LINK_STATE(l)[0]:The line protocol IP </span></span><br><span class="line"><span class="attr">on</span> <span class="string">the interface GigabitEthernet0/0/0 has entered the UP state. </span></span><br><span class="line"><span class="attr">[R4-GigabitEthernet0/0/0]quit</span></span><br><span class="line"><span class="meta">[R4]interface</span> <span class="string">GigabitEthernet 0/0/1</span></span><br><span class="line"><span class="meta">[R4-GigabitEthernet0/0/1]ip</span> <span class="string">address 192.168.13.2 24</span></span><br><span class="line"><span class="attr">[R4-GigabitEthernet0/0/1]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:24:52-08:00 R4 %%01IFNET/4/LINK_STATE(l)[1]:The line protocol IP </span></span><br><span class="line"><span class="attr">on</span> <span class="string">the interface GigabitEthernet0/0/1 has entered the UP state. </span></span><br><span class="line"><span class="attr">[R4-GigabitEthernet0/0/1]</span></span><br></pre></td></tr></table></figure><h3 id="3-2-3-AR5ç«¯å£é…ç½®"><a href="#3-2-3-AR5ç«¯å£é…ç½®" class="headerlink" title="3.2.3 AR5ç«¯å£é…ç½®"></a>3.2.3 AR5ç«¯å£é…ç½®</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;Huawei&gt;sys</span><span class="string"></span></span><br><span class="line"><span class="attr">Enter</span> <span class="string">system view, return user view with Ctrl+Z.</span></span><br><span class="line"><span class="meta">[Huawei]sysname</span> <span class="string">R5</span></span><br><span class="line"><span class="meta">[R5]interface</span> <span class="string">GigabitEthernet 0/0/0</span></span><br><span class="line"><span class="meta">[R5-GigabitEthernet0/0/0]ip</span> <span class="string">address 192.168.13.1 24</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:25:55-08:00 R5 %%01IFNET/4/LINK_STATE(l)[0]:The line protocol IP </span></span><br><span class="line"><span class="attr">on</span> <span class="string">the interface GigabitEthernet0/0/0 has entered the UP state. </span></span><br><span class="line"><span class="meta">[R5-GigabitEthernet0/0/0]quit</span><span class="string"></span></span><br><span class="line"><span class="meta">[R5]interface</span>  <span class="string">GigabitEthernet 0/0/1</span></span><br><span class="line"><span class="meta">[R5-GigabitEthernet0/0/1]ip</span> <span class="string">address 192.168.12.1 24</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:26:19-08:00 R5 %%01IFNET/4/LINK_STATE(l)[1]:The line protocol IP </span></span><br><span class="line"><span class="attr">on</span> <span class="string">the interface GigabitEthernet0/0/1 has entered the UP state. </span></span><br><span class="line"><span class="attr">[R5-GigabitEthernet0/0/1]quit</span></span><br><span class="line"><span class="meta">[R5]interface</span> <span class="string">GigabitEthernet 0/0/2</span></span><br><span class="line"><span class="meta">[R5-GigabitEthernet0/0/2]ip</span> <span class="string">address 192.168.11.1 24</span></span><br><span class="line"><span class="attr">[R5-GigabitEthernet0/0/2]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:26:53-08:00 R5 %%01IFNET/4/LINK_STATE(l)[2]:The line protocol IP </span></span><br><span class="line"><span class="attr">on</span> <span class="string">the interface GigabitEthernet0/0/2 has entered the UP state. </span></span><br><span class="line"><span class="attr">[R5-GigabitEthernet0/0/2]quit</span></span><br></pre></td></tr></table></figure><h3 id="3-2-4-AR6ç«¯å£é…ç½®"><a href="#3-2-4-AR6ç«¯å£é…ç½®" class="headerlink" title="3.2.4 AR6ç«¯å£é…ç½®"></a>3.2.4 AR6ç«¯å£é…ç½®</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;Huawei&gt;sys</span></span><br><span class="line"><span class="attr">Enter</span> <span class="string">system view, return user view with Ctrl+Z.</span></span><br><span class="line"><span class="meta">[Huawei]sysname</span> <span class="string">R6</span></span><br><span class="line"><span class="meta">[R6]interface</span> <span class="string">GigabitEthernet 0/0/0</span></span><br><span class="line"><span class="meta">[R6-GigabitEthernet0/0/0]ip</span> <span class="string">address 192.168.12.2 24</span></span><br><span class="line"><span class="attr">[R6-GigabitEthernet0/0/0]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:28:20-08:00 R6 %%01IFNET/4/LINK_STATE(l)[0]:The line protocol IP </span></span><br><span class="line"><span class="attr">on</span> <span class="string">the interface GigabitEthernet0/0/0 has entered the UP state. </span></span><br><span class="line"><span class="meta">[R6-GigabitEthernet0/0/0]quit</span><span class="string"></span></span><br><span class="line"><span class="meta">[R6]interface</span> <span class="string">GigabitEthernet 0/0/1</span></span><br><span class="line"><span class="meta">[R6-GigabitEthernet0/0/1]ip</span> <span class="string">address 192.168.2.254 24</span></span><br><span class="line"><span class="attr">[R6-GigabitEthernet0/0/1]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:28:47-08:00 R6 %%01IFNET/4/LINK_STATE(l)[1]:The line protocol IP </span></span><br><span class="line"><span class="attr">on</span> <span class="string">the interface GigabitEthernet0/0/1 has entered the UP state. </span></span><br><span class="line"><span class="attr">[R6-GigabitEthernet0/0/1]quit</span></span><br></pre></td></tr></table></figure><h3 id="3-2-5-AR7ç«¯å£é…ç½®"><a href="#3-2-5-AR7ç«¯å£é…ç½®" class="headerlink" title="3.2.5 AR7ç«¯å£é…ç½®"></a>3.2.5 AR7ç«¯å£é…ç½®</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;Huawei&gt;sys</span></span><br><span class="line"><span class="attr">Enter</span> <span class="string">system view, return user view with Ctrl+Z.</span></span><br><span class="line"><span class="meta">[Huawei]sysname</span> <span class="string">R7</span></span><br><span class="line"><span class="meta">[R7]interface</span> <span class="string">GigabitEthernet 0/0/0</span></span><br><span class="line"><span class="meta">[R7-GigabitEthernet0/0/0]ip</span> <span class="string">address 192.168.11.2 24</span></span><br><span class="line"><span class="attr">[R7-GigabitEthernet0/0/0]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:29:26-08:00 R7 %%01IFNET/4/LINK_STATE(l)[0]:The line protocol IP </span></span><br><span class="line"><span class="attr">on</span> <span class="string">the interface GigabitEthernet0/0/0 has entered the UP state. </span></span><br><span class="line"><span class="attr">[R7-GigabitEthernet0/0/0]quit</span></span><br><span class="line"><span class="meta">[R7]interface</span> <span class="string">GigabitEthernet 0/0/1</span></span><br><span class="line"><span class="meta">[R7-GigabitEthernet0/0/1]ip</span> <span class="string">address 1.1.1.254 24</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:29:54-08:00 R7 %%01IFNET/4/LINK_STATE(l)[1]:The line protocol IP </span></span><br><span class="line"><span class="attr">on</span> <span class="string">the interface GigabitEthernet0/0/1 has entered the UP state. </span></span><br><span class="line"><span class="attr">[R7-GigabitEthernet0/0/1]quit</span></span><br></pre></td></tr></table></figure><h2 id="3-3-é…ç½®OSPFåŒºåŸŸ"><a href="#3-3-é…ç½®OSPFåŒºåŸŸ" class="headerlink" title="3.3 é…ç½®OSPFåŒºåŸŸ"></a>3.3 é…ç½®OSPFåŒºåŸŸ</h2><h3 id="3-3-1-åœ¨AR5ä¸Šè¿›è¡Œå¦‚ä¸‹é…ç½®"><a href="#3-3-1-åœ¨AR5ä¸Šè¿›è¡Œå¦‚ä¸‹é…ç½®" class="headerlink" title="3.3.1 åœ¨AR5ä¸Šè¿›è¡Œå¦‚ä¸‹é…ç½®"></a>3.3.1 åœ¨AR5ä¸Šè¿›è¡Œå¦‚ä¸‹é…ç½®</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[R5]ospf</span> <span class="string">router-id 1.1.1.1  //æŒ‡å®šAR7åœ¨OSPFä¸­çš„ID</span></span><br><span class="line"><span class="meta">[R5-ospf-1]area</span> <span class="string">0 //è¿›å…¥éª¨å¹²åŒºåŸŸarea 0</span></span><br><span class="line"><span class="meta">[R5-ospf-1-area-0.0.0.0]network</span> <span class="string">192.168.12.0 0.0.0.255 //å®£å‘Šç½‘ç»œ192.168.12.0</span></span><br><span class="line"><span class="meta">[R5-ospf-1-area-0.0.0.0]quit</span>  <span class="string">//è¿”å›ä¸Šä¸€çº§</span></span><br><span class="line"><span class="meta">[R5-ospf-1]area</span> <span class="string">1 //è¿›å…¥ééª¨å¹²åŒºåŸŸarea 1</span></span><br><span class="line"><span class="meta">[R5-ospf-1-area-0.0.0.1]network</span> <span class="string">192.168.13.0 0.0.0.255 //å®£å‘Šç½‘ç»œ192.168.13.0</span></span><br><span class="line"><span class="attr">[R5-ospf-1-area-0.0.0.1]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:34:59-08:00 R5 %%01OSPF/4/NBR_CHANGE_E(l)[3]:Neighbor changes eve</span></span><br><span class="line"><span class="attr">nt</span>: <span class="string">neighbor status changed. (ProcessId=256, NeighborAddress=2.12.168.192, Neigh</span></span><br><span class="line"><span class="attr">borEvent</span>=<span class="string">HelloReceived, NeighborPreviousState=Down, NeighborCurrentState=Init) </span></span><br><span class="line"><span class="attr">[R5-ospf-1-area-0.0.0.1]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:35:07-08:00 R5 %%01OSPF/4/NBR_CHANGE_E(l)[4]:Neighbor changes eve</span></span><br><span class="line"><span class="attr">nt</span>: <span class="string">neighbor status changed. (ProcessId=256, NeighborAddress=2.12.168.192, Neigh</span></span><br><span class="line"><span class="attr">borEvent</span>=<span class="string">2WayReceived, NeighborPreviousState=Init, NeighborCurrentState=ExStart)</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">[R5-ospf-1-area-0.0.0.1]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:35:07-08:00 R5 %%01OSPF/4/NBR_CHANGE_E(l)[5]:Neighbor changes eve</span></span><br><span class="line"><span class="attr">nt</span>: <span class="string">neighbor status changed. (ProcessId=256, NeighborAddress=2.12.168.192, Neigh</span></span><br><span class="line"><span class="attr">borEvent</span>=<span class="string">NegotiationDone, NeighborPreviousState=ExStart, NeighborCurrentState=Ex</span></span><br><span class="line"><span class="meta">change)</span> <span class="string"></span></span><br><span class="line"><span class="attr">[R5-ospf-1-area-0.0.0.1]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:35:07-08:00 R5 %%01OSPF/4/NBR_CHANGE_E(l)[6]:Neighbor changes eve</span></span><br><span class="line"><span class="attr">nt</span>: <span class="string">neighbor status changed. (ProcessId=256, NeighborAddress=2.12.168.192, Neigh</span></span><br><span class="line"><span class="attr">borEvent</span>=<span class="string">ExchangeDone, NeighborPreviousState=Exchange, NeighborCurrentState=Load</span></span><br><span class="line"><span class="meta">ing)</span> <span class="string"></span></span><br><span class="line"><span class="attr">[R5-ospf-1-area-0.0.0.1]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:35:08-08:00 R5 %%01OSPF/4/NBR_CHANGE_E(l)[7]:Neighbor changes eve</span></span><br><span class="line"><span class="attr">nt</span>: <span class="string">neighbor status changed. (ProcessId=256, NeighborAddress=2.12.168.192, Neigh</span></span><br><span class="line"><span class="attr">borEvent</span>=<span class="string">LoadingDone, NeighborPreviousState=Loading, NeighborCurrentState=Full) </span></span><br><span class="line"></span><br><span class="line"><span class="attr">[R5-ospf-1-area-0.0.0.1]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:35:59-08:00 R5 %%01OSPF/4/NBR_CHANGE_E(l)[8]:Neighbor changes eve</span></span><br><span class="line"><span class="attr">nt</span>: <span class="string">neighbor status changed. (ProcessId=256, NeighborAddress=2.13.168.192, Neigh</span></span><br><span class="line"><span class="attr">borEvent</span>=<span class="string">HelloReceived, NeighborPreviousState=Down, NeighborCurrentState=Init) </span></span><br><span class="line"><span class="attr">[R5-ospf-1-area-0.0.0.1]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:36:04-08:00 R5 %%01OSPF/4/NBR_CHANGE_E(l)[9]:Neighbor changes eve</span></span><br><span class="line"><span class="attr">nt</span>: <span class="string">neighbor status changed. (ProcessId=256, NeighborAddress=2.13.168.192, Neigh</span></span><br><span class="line"><span class="attr">borEvent</span>=<span class="string">2WayReceived, NeighborPreviousState=Init, NeighborCurrentState=ExStart)</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">[R5-ospf-1-area-0.0.0.1]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:36:04-08:00 R5 %%01OSPF/4/NBR_CHANGE_E(l)[10]:Neighbor changes ev</span></span><br><span class="line"><span class="attr">ent</span>: <span class="string">neighbor status changed. (ProcessId=256, NeighborAddress=2.13.168.192, Neig</span></span><br><span class="line"><span class="attr">hborEvent</span>=<span class="string">NegotiationDone, NeighborPreviousState=ExStart, NeighborCurrentState=E</span></span><br><span class="line"><span class="meta">xchange)</span> <span class="string"></span></span><br><span class="line"><span class="attr">[R5-ospf-1-area-0.0.0.1]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:36:05-08:00 R5 %%01OSPF/4/NBR_CHANGE_E(l)[11]:Neighbor changes ev</span></span><br><span class="line"><span class="attr">ent</span>: <span class="string">neighbor status changed. (ProcessId=256, NeighborAddress=2.13.168.192, Neig</span></span><br><span class="line"><span class="attr">hborEvent</span>=<span class="string">ExchangeDone, NeighborPreviousState=Exchange, NeighborCurrentState=Loa</span></span><br><span class="line"><span class="meta">ding)</span> <span class="string"></span></span><br><span class="line"><span class="attr">[R5-ospf-1-area-0.0.0.1]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:36:05-08:00 R5 %%01OSPF/4/NBR_CHANGE_E(l)[12]:Neighbor changes ev</span></span><br><span class="line"><span class="attr">ent</span>: <span class="string">neighbor status changed. (ProcessId=256, NeighborAddress=2.13.168.192, Neig</span></span><br><span class="line"><span class="attr">hborEvent</span>=<span class="string">LoadingDone, NeighborPreviousState=Loading, NeighborCurrentState=Full)</span></span><br></pre></td></tr></table></figure><h3 id="3-3-2-åœ¨AR4ä¸Šè¿›è¡Œå¦‚ä¸‹é…ç½®"><a href="#3-3-2-åœ¨AR4ä¸Šè¿›è¡Œå¦‚ä¸‹é…ç½®" class="headerlink" title="3.3.2 åœ¨AR4ä¸Šè¿›è¡Œå¦‚ä¸‹é…ç½®"></a>3.3.2 åœ¨AR4ä¸Šè¿›è¡Œå¦‚ä¸‹é…ç½®</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[R4]osp</span><span class="string"></span></span><br><span class="line"><span class="meta">[R4]ospf</span> <span class="string">router-id 3.3.3.3</span></span><br><span class="line"><span class="meta">[R4-ospf-1]area</span> <span class="string">1</span></span><br><span class="line"><span class="meta">[R4-ospf-1-area-0.0.0.1]network</span> <span class="string">192.168.13.0 0.0.0.255</span></span><br><span class="line"><span class="attr">[R4-ospf-1-area-0.0.0.1]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:36:06-08:00 R4 %%01OSPF/4/NBR_CHANGE_E(l)[0]:Neighbor changes eve</span></span><br><span class="line"><span class="attr">nt</span>: <span class="string">neighbor status changed. (ProcessId=256, NeighborAddress=1.13.168.192, Neigh</span></span><br><span class="line"><span class="attr">borEvent</span>=<span class="string">HelloReceived, NeighborPreviousState=Down, NeighborCurrentState=Init) </span></span><br><span class="line"><span class="attr">[R4-ospf-1-area-0.0.0.1]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:36:06-08:00 R4 %%01OSPF/4/NBR_CHANGE_E(l)[1]:Neighbor changes eve</span></span><br><span class="line"><span class="attr">nt</span>: <span class="string">neighbor status changed. (ProcessId=256, NeighborAddress=1.13.168.192, Neigh</span></span><br><span class="line"><span class="attr">borEvent</span>=<span class="string">2WayReceived, NeighborPreviousState=Init, NeighborCurrentState=2Way) </span></span><br><span class="line"><span class="attr">[R4-ospf-1-area-0.0.0.1]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:36:06-08:00 R4 %%01OSPF/4/NBR_CHANGE_E(l)[2]:Neighbor changes eve</span></span><br><span class="line"><span class="attr">nt</span>: <span class="string">neighbor status changed. (ProcessId=256, NeighborAddress=1.13.168.192, Neigh</span></span><br><span class="line"><span class="attr">borEvent</span>=<span class="string">AdjOk?, NeighborPreviousState=2Way, NeighborCurrentState=ExStart) </span></span><br><span class="line"><span class="attr">[R4-ospf-1-area-0.0.0.1]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:36:06-08:00 R4 %%01OSPF/4/NBR_CHANGE_E(l)[3]:Neighbor changes eve</span></span><br><span class="line"><span class="attr">nt</span>: <span class="string">neighbor status changed. (ProcessId=256, NeighborAddress=1.13.168.192, Neigh</span></span><br><span class="line"><span class="attr">borEvent</span>=<span class="string">NegotiationDone, NeighborPreviousState=ExStart, NeighborCurrentState=Ex</span></span><br><span class="line"><span class="meta">change)</span> <span class="string"></span></span><br><span class="line"><span class="attr">[R4-ospf-1-area-0.0.0.1]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:36:06-08:00 R4 %%01OSPF/4/NBR_CHANGE_E(l)[4]:Neighbor changes eve</span></span><br><span class="line"><span class="attr">nt</span>: <span class="string">neighbor status changed. (ProcessId=256, NeighborAddress=1.13.168.192, Neigh</span></span><br><span class="line"><span class="attr">borEvent</span>=<span class="string">ExchangeDone, NeighborPreviousState=Exchange, NeighborCurrentState=Load</span></span><br><span class="line"><span class="meta">ing)</span> <span class="string"></span></span><br><span class="line"><span class="attr">[R4-ospf-1-area-0.0.0.1]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:36:06-08:00 R4 %%01OSPF/4/NBR_CHANGE_E(l)[5]:Neighbor changes eve</span></span><br><span class="line"><span class="attr">nt</span>: <span class="string">neighbor status changed. (ProcessId=256, NeighborAddress=1.13.168.192, Neigh</span></span><br><span class="line"><span class="attr">borEvent</span>=<span class="string">LoadingDone, NeighborPreviousState=Loading, NeighborCurrentState=Full)</span></span><br></pre></td></tr></table></figure><h3 id="3-3-3-åœ¨AR6ä¸Šè¿›è¡Œå¦‚ä¸‹é…ç½®"><a href="#3-3-3-åœ¨AR6ä¸Šè¿›è¡Œå¦‚ä¸‹é…ç½®" class="headerlink" title="3.3.3 åœ¨AR6ä¸Šè¿›è¡Œå¦‚ä¸‹é…ç½®"></a>3.3.3 åœ¨AR6ä¸Šè¿›è¡Œå¦‚ä¸‹é…ç½®</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[R6]ospf</span><span class="string"></span></span><br><span class="line"><span class="meta">[R6]ospf</span> <span class="string">router-id 2.2.2.2</span></span><br><span class="line"><span class="meta">[R6-ospf-1]area</span> <span class="string">0</span></span><br><span class="line"><span class="meta">[R6-ospf-1-area-0.0.0.0]network</span> <span class="string">192.168.12.0 0.0.0.255</span></span><br><span class="line"><span class="attr">[R6-ospf-1-area-0.0.0.0]quit</span></span><br><span class="line"><span class="attr">[R6-ospf-1]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:35:08-08:00 R6 %%01OSPF/4/NBR_CHANGE_E(l)[0]:Neighbor changes eve</span></span><br><span class="line"><span class="attr">nt</span>: <span class="string">neighbor status changed. (ProcessId=256, NeighborAddress=1.12.168.192, Neigh</span></span><br><span class="line"><span class="attr">borEvent</span>=<span class="string">HelloReceived, NeighborPreviousState=Down, NeighborCurrentState=Init) </span></span><br><span class="line"><span class="attr">[R6-ospf-1]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:35:08-08:00 R6 %%01OSPF/4/NBR_CHANGE_E(l)[1]:Neighbor changes eve</span></span><br><span class="line"><span class="attr">nt</span>: <span class="string">neighbor status changed. (ProcessId=256, NeighborAddress=1.12.168.192, Neigh</span></span><br><span class="line"><span class="attr">borEvent</span>=<span class="string">2WayReceived, NeighborPreviousState=Init, NeighborCurrentState=2Way) </span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:35:08-08:00 R6 %%01OSPF/4/NBR_CHANGE_E(l)[2]:Neighbor changes eve</span></span><br><span class="line"><span class="attr">nt</span>: <span class="string">neighbor status changed. (ProcessId=256, NeighborAddress=1.12.168.192, Neigh</span></span><br><span class="line"><span class="attr">borEvent</span>=<span class="string">AdjOk?, NeighborPreviousState=2Way, NeighborCurrentState=ExStart) </span></span><br><span class="line"><span class="attr">[R6-ospf-1]</span></span><br><span class="line"><span class="attr">[R6-ospf-1]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:35:09-08:00 R6 %%01OSPF/4/NBR_CHANGE_E(l)[3]:Neighbor changes eve</span></span><br><span class="line"><span class="attr">nt</span>: <span class="string">neighbor status changed. (ProcessId=256, NeighborAddress=1.12.168.192, Neigh</span></span><br><span class="line"><span class="attr">borEvent</span>=<span class="string">NegotiationDone, NeighborPreviousState=ExStart, NeighborCurrentState=Ex</span></span><br><span class="line"><span class="meta">change)</span> <span class="string"></span></span><br><span class="line"><span class="attr">[R6-ospf-1]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:35:09-08:00 R6 %%01OSPF/4/NBR_CHANGE_E(l)[4]:Neighbor changes eve</span></span><br><span class="line"><span class="attr">nt</span>: <span class="string">neighbor status changed. (ProcessId=256, NeighborAddress=1.12.168.192, Neigh</span></span><br><span class="line"><span class="attr">borEvent</span>=<span class="string">ExchangeDone, NeighborPreviousState=Exchange, NeighborCurrentState=Load</span></span><br><span class="line"><span class="meta">ing)</span> <span class="string"></span></span><br><span class="line"><span class="attr">[R6-ospf-1]</span></span><br><span class="line"><span class="attr">Mar</span> <span class="string">22 2020 14:35:09-08:00 R6 %%01OSPF/4/NBR_CHANGE_E(l)[5]:Neighbor changes eve</span></span><br><span class="line"><span class="attr">nt</span>: <span class="string">neighbor status changed. (ProcessId=256, NeighborAddress=1.12.168.192, Neigh</span></span><br><span class="line"><span class="attr">borEvent</span>=<span class="string">LoadingDone, NeighborPreviousState=Loading, NeighborCurrentState=Full) </span></span><br><span class="line"></span><br><span class="line"><span class="attr">[R6-ospf-1]quit</span></span><br></pre></td></tr></table></figure><p>éªŒè¯ï¼š</p><p>ä½¿ç”¨<strong>display ospf brief</strong>å‘½ä»¤ç”¨æ¥æŸ¥çœ‹OSPFçš„æ¦‚è¦ä¿¡æ¯ã€‚</p><p>AR5çš„æ¦‚è¦å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://s1.ax1x.com/2020/03/22/85xqRf.png" alt="85xqRf.png"></p><p>AR4çš„æ¦‚è¦å¦‚ä¸‹å›¾ï¼š</p><p> <img src="https://s1.ax1x.com/2020/03/22/85zFzT.png" alt="85zFzT.png"></p><p>AR6çš„æ¦‚è¦å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://s1.ax1x.com/2020/03/22/85zmw9.png" alt="85zmw9.png"></p><p> ç”±ä¸Šå›¾å¯çŸ¥ï¼ŒAR5ä¸ºABRè·¯ç”±å™¨ï¼ŒAR4å› ä¸ºè¿æ¥äº†å¤–éƒ¨è·¯ç”±æ‰€ä»¥ä¸ºASBRè·¯ç”±å™¨ã€‚ </p><h2 id="3-4-éªŒè¯area-0ä¸-area-1ä¹‹é—´çš„è·¯ç”±æ˜¯å¦å®ç°åŒºåŸŸå†…äº’é€š"><a href="#3-4-éªŒè¯area-0ä¸-area-1ä¹‹é—´çš„è·¯ç”±æ˜¯å¦å®ç°åŒºåŸŸå†…äº’é€š" class="headerlink" title="3.4  éªŒè¯area 0ä¸ area 1ä¹‹é—´çš„è·¯ç”±æ˜¯å¦å®ç°åŒºåŸŸå†…äº’é€š"></a>3.4  éªŒè¯area 0ä¸ area 1ä¹‹é—´çš„è·¯ç”±æ˜¯å¦å®ç°åŒºåŸŸå†…äº’é€š</h2><p>ä½¿ç”¨display ip routing-tableæŸ¥çœ‹AR4çš„è·¯ç”±è¡¨ä¿¡æ¯å¦‚ä¸‹ï¼š</p><p><img src="https://s1.ax1x.com/2020/03/22/8Iri4K.png" alt="8Iri4K.png"></p><p>ä½¿ç”¨display ip routing-tableæŸ¥çœ‹AR6çš„è·¯ç”±è¡¨ä¿¡æ¯å¦‚ä¸‹ï¼š</p><p><img src="https://s1.ax1x.com/2020/03/22/8IrVjH.png" alt="8IrVjH.png"></p><p> ç”±ä¸Šå›¾å¯çŸ¥ï¼ŒAR4ä¸AR6éƒ½æœ‰ä¸€æ¡å»å¾€å¯¹æ–¹çš„ospfè·¯ç”±æ¡ç›®ã€‚æ‰€ä»¥area 0ä¸area 1ä¹‹é—´çš„è·¯ç”±ï¼Œéƒ½æ˜¯å¯ä»¥pingé€šçš„ã€‚ </p><h2 id="3-5-é»˜è®¤è·¯ç”±ã€é™æ€è·¯ç”±åŠç›´è¿è·¯ç”±çš„é…ç½®"><a href="#3-5-é»˜è®¤è·¯ç”±ã€é™æ€è·¯ç”±åŠç›´è¿è·¯ç”±çš„é…ç½®" class="headerlink" title="3.5 é»˜è®¤è·¯ç”±ã€é™æ€è·¯ç”±åŠç›´è¿è·¯ç”±çš„é…ç½®"></a>3.5 é»˜è®¤è·¯ç”±ã€é™æ€è·¯ç”±åŠç›´è¿è·¯ç”±çš„é…ç½®</h2><p> ç”±äºAR5å»å¾€å¤–ç½‘ï¼Œéœ€è¦é…ç½®ä¸€æ¡é»˜è®¤è·¯ç”±ï¼Œå¹¶ä¸”éœ€è¦åœ¨è¿›ç¨‹ospf 1ä¸­è¿›è¡Œé»˜è®¤è·¯ç”±æ³¨å…¥<br>åŒæ ·AR4è¿æ¥äº†å¤–éƒ¨è·¯ç”±ï¼Œä¹Ÿéœ€è¦åœ¨è¿›ç¨‹ospf 1ä¸­æ³¨å…¥é™æ€è·¯ç”±ï¼ŒAR6åˆ™éœ€è¦æ³¨å…¥ç›´è¿è·¯ç”±<br>é…ç½®å‘½ä»¤å¦‚ä¸‹ </p><h3 id="3-5-1-åœ¨AR5ä¸Šé…ç½®é»˜è®¤è·¯ç”±å¹¶æ³¨å…¥ospfä¸­"><a href="#3-5-1-åœ¨AR5ä¸Šé…ç½®é»˜è®¤è·¯ç”±å¹¶æ³¨å…¥ospfä¸­" class="headerlink" title="3.5.1 åœ¨AR5ä¸Šé…ç½®é»˜è®¤è·¯ç”±å¹¶æ³¨å…¥ospfä¸­"></a>3.5.1 åœ¨AR5ä¸Šé…ç½®é»˜è®¤è·¯ç”±å¹¶æ³¨å…¥ospfä¸­</h3><p>å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[R5]ip</span> <span class="string">route-static 0.0.0.0 0.0.0.0 192.168.11.2</span></span><br><span class="line"><span class="meta">[R5]ospf</span> <span class="string">1</span></span><br><span class="line"><span class="meta">[R5-ospf-1]default-route-advertise</span> <span class="string">always cost 200 type 1</span></span><br><span class="line"><span class="attr">[R5-ospf-1]quit</span></span><br><span class="line"><span class="attr">[R5]</span></span><br></pre></td></tr></table></figure><h3 id="3-5-2-åœ¨AR4ä¸Šé…ç½®é™æ€è·¯ç”±å¹¶æ³¨å…¥ospfä¸­"><a href="#3-5-2-åœ¨AR4ä¸Šé…ç½®é™æ€è·¯ç”±å¹¶æ³¨å…¥ospfä¸­" class="headerlink" title="3.5.2 åœ¨AR4ä¸Šé…ç½®é™æ€è·¯ç”±å¹¶æ³¨å…¥ospfä¸­"></a>3.5.2 åœ¨AR4ä¸Šé…ç½®é™æ€è·¯ç”±å¹¶æ³¨å…¥ospfä¸­</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;R4&gt;sys</span></span><br><span class="line"><span class="attr">Enter</span> <span class="string">system view, return user view with Ctrl+Z.</span></span><br><span class="line"><span class="meta">[R4]ip</span> <span class="string">route-static 192.168.4.0 24 192.168.34.4</span></span><br><span class="line"><span class="meta">[R4]ospf</span> <span class="string">1</span></span><br><span class="line"><span class="meta">[R4-ospf-1]import-route</span> <span class="string">static cost 150 type 2</span></span><br><span class="line"><span class="attr">[R4-ospf-1]quit</span></span><br></pre></td></tr></table></figure><h3 id="3-5-3-åœ¨AR6ä¸Šæ³¨å…¥ç›´è¿è·¯ç”±"><a href="#3-5-3-åœ¨AR6ä¸Šæ³¨å…¥ç›´è¿è·¯ç”±" class="headerlink" title="3.5.3 åœ¨AR6ä¸Šæ³¨å…¥ç›´è¿è·¯ç”±"></a>3.5.3 åœ¨AR6ä¸Šæ³¨å…¥ç›´è¿è·¯ç”±</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;R6&gt;sys</span></span><br><span class="line"><span class="attr">Enter</span> <span class="string">system view, return user view with Ctrl+Z.</span></span><br><span class="line"><span class="meta">[R6]</span><span class="string"></span></span><br><span class="line"><span class="meta">[R6]ospf</span> <span class="string">1</span></span><br><span class="line"><span class="meta">[R6-ospf-1]import-route</span>  <span class="string">direct cost 50 type 2</span></span><br><span class="line"><span class="attr">[R6-ospf-1]quit</span></span><br></pre></td></tr></table></figure><p>å‘½ä»¤è§£é‡Šï¼š</p><p>å‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š</p><p><strong>import-route</strong> <em>protocol</em> [ <em>process-id</em>  ] [ <strong>cost</strong> <em>cost</em> |  <strong>type</strong> <em>type</em> |  <strong>tag</strong> <em>tag</em> |  <strong>route-policy</strong> <em>route-policy-name</em> ] </p><table><thead><tr><th>å‚æ•°</th><th>å‚æ•°è¯´æ˜</th><th>å–å€¼</th></tr></thead><tbody><tr><td><em>protocol</em></td><td>å¯å¼•å…¥çš„æºè·¯ç”±åè®®ã€‚</td><td>ç›®å‰å¯ä¸º<strong>direct</strong>ã€<strong>bgp</strong>ã€<strong>unr</strong>ã€<strong>static</strong>ã€<strong>ripng</strong>ã€<strong>isis</strong>æˆ–<strong>ospfv3</strong>ã€‚</td></tr><tr><td><em>process-id</em></td><td>å¼•å…¥çš„æºè·¯ç”±åè®®è¿›ç¨‹å·ï¼Œå½“å¼•å…¥è·¯ç”±åè®®ä¸º<strong>ripng</strong>ã€<strong>isis</strong>æˆ–<strong>ospfv3</strong>æ—¶ï¼Œéœ€è¦æŒ‡å®šè¯¥å€¼ã€‚</td><td>æ•´æ•°å½¢å¼ï¼Œå–å€¼èŒƒå›´æ˜¯1ï½65535ã€‚</td></tr><tr><td><strong>cost</strong> <em>cost</em></td><td>å¼•å…¥è·¯ç”±çš„å¼€é”€å€¼ã€‚</td><td>æ•´æ•°å½¢å¼ï¼Œå–å€¼èŒƒå›´æ˜¯1ï½16777214ã€‚</td></tr><tr><td><strong>type</strong> <em>type</em></td><td>å¼•å…¥è·¯ç”±çš„ç±»å‹ã€‚</td><td>å–å€¼æ˜¯1æˆ–2ã€‚ç¼ºçœå€¼æ˜¯2ã€‚</td></tr><tr><td><strong>tag</strong> <em>tag</em></td><td>æ ‡è¯†å¼•å…¥è·¯ç”±çš„tagå€¼ã€‚</td><td>æ•´æ•°å½¢å¼ï¼Œå–å€¼èŒƒå›´æ˜¯0ï½4294967295ã€‚ç¼ºçœå€¼æ˜¯1ã€‚</td></tr><tr><td><strong>route-policy</strong> <em>route-policy-name</em></td><td>æŒ‡å®šè·¯ç”±ç­–ç•¥åç§°ï¼Œåªæœ‰æ»¡è¶³æŒ‡å®šåŒ¹é…æ¡ä»¶çš„è·¯ç”±æ‰è¢«å¼•å…¥ã€‚</td><td>å­—ç¬¦ä¸²å½¢å¼ï¼Œé•¿åº¦èŒƒå›´æ˜¯1ï½40ä¸ªå­—ç¬¦ã€‚</td></tr></tbody></table><p>å‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š</p><p><strong>default-route-advertise</strong> [  <strong>always</strong> | <strong>cost</strong> <em>cost</em> | <strong>type</strong> <em>type</em> | <strong>tag</strong> <em>tag</em> | <strong>route-policy</strong> <em>route-policy-name</em> ] </p><table><thead><tr><th>å‚æ•°</th><th>å‚æ•°è¯´æ˜</th><th>å–å€¼</th></tr></thead><tbody><tr><td><strong>always</strong></td><td>æ— è®ºæœ¬æœºæ˜¯å¦å­˜åœ¨æ¿€æ´»çš„éOSPFv3ç¼ºçœè·¯ç”±ï¼Œéƒ½ä¼šäº§ç”Ÿå¹¶å‘å¸ƒä¸€ä¸ªæè¿°ç¼ºçœè·¯ç”±çš„LSAã€‚é…ç½®äº†<strong>always</strong>å‚æ•°çš„äº¤æ¢æœºä¸å†è®¡ç®—æ¥è‡ªå…¶ä»–äº¤æ¢æœºçš„ç¼ºçœè·¯ç”±ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šè¯¥å…³é”®å­—ï¼Œæœ¬æœºè·¯ç”±è¡¨ä¸­å¿…é¡»æœ‰æ¿€æ´»çš„éOSPFv3ç¼ºçœè·¯ç”±æ—¶æ‰ç”Ÿæˆç¼ºçœè·¯ç”±çš„LSAã€‚</td><td>-</td></tr><tr><td><strong>cost</strong> <em>cost</em></td><td>æŒ‡å®šè¯¥ASE LSAçš„åº¦é‡å€¼ã€‚</td><td>æ•´æ•°å½¢å¼ï¼Œå–å€¼èŒƒå›´æ˜¯1ï½16777214ã€‚</td></tr><tr><td><strong>type</strong> <em>type</em></td><td>æŒ‡å®šè¯¥ASE LSAçš„ç±»å‹ã€‚  Type-1ï¼šç¬¬ä¸€ç±»å¤–éƒ¨è·¯ç”±ï¼Œåˆ°ç¬¬ä¸€ç±»å¤–éƒ¨è·¯ç”±çš„å¼€é”€=æœ¬äº¤æ¢æœºåˆ°ç›¸åº”çš„ASBRçš„å¼€é”€+ASBRåˆ°è¯¥è·¯ç”±ç›®çš„åœ°å€çš„å¼€é”€ã€‚ Type-2ï¼šç¬¬äºŒç±»å¤–éƒ¨è·¯ç”±ï¼Œåˆ°ç¬¬äºŒç±»å¤–éƒ¨è·¯ç”±çš„å¼€é”€=ASBRåˆ°è¯¥è·¯ç”±ç›®çš„åœ°å€çš„å¼€é”€ã€‚</td><td>æ•´æ•°å½¢å¼ï¼Œå–å€¼èŒƒå›´æ˜¯1ï½2ã€‚ç¼ºçœå€¼æ˜¯2ã€‚</td></tr><tr><td><strong>tag</strong> <em>tag</em></td><td>æ ‡è¯†VPNå¼•å…¥è·¯ç”±çš„tagå€¼ã€‚</td><td>æ•´æ•°å½¢å¼ï¼Œå–å€¼èŒƒå›´æ˜¯0ï½4294967295ã€‚ç¼ºçœå€¼æ˜¯1ã€‚</td></tr><tr><td><strong>route-policy</strong> <em>route-policy-name</em></td><td>é€šè¿‡è·¯ç”±ç­–ç•¥ï¼Œå®ç°åœ¨è·¯ç”±è¡¨ä¸­æœ‰åŒ¹é…çš„éOSPFv3äº§ç”Ÿçš„ç¼ºçœè·¯ç”±è¡¨é¡¹æ—¶ï¼ŒæŒ‰è·¯ç”±ç­–ç•¥æ‰€é…ç½®çš„å‚æ•°å‘å¸ƒç¼ºçœè·¯ç”±ã€‚</td><td>å­—ç¬¦ä¸²å½¢å¼ï¼Œå–å€¼èŒƒå›´æ˜¯1ï½40ã€‚</td></tr></tbody></table><p>éªŒè¯ï¼š</p><p>ä½¿ç”¨<strong>display ospf routing</strong>å‘½ä»¤ç”¨æ¥æ˜¾ç¤ºOSPFè·¯ç”±è¡¨çš„ä¿¡æ¯ã€‚ã€‚</p><p>AR4çš„è·¯ç”±è¡¨ä¿¡æ¯å¦‚ä¸‹:</p><p><img src="https://s1.ax1x.com/2020/03/22/8IpZ5R.png" alt="8IpZ5R.png"></p><p>AR6çš„è·¯ç”±è¡¨ä¿¡æ¯å¦‚ä¸‹:</p><p><img src="https://s1.ax1x.com/2020/03/22/8oC6Qx.png" alt="8oC6Qx.png"></p><p>AR5çš„è·¯ç”±è¡¨ä¿¡æ¯å¦‚ä¸‹:</p><p><img src="https://s1.ax1x.com/2020/03/22/8oCGzq.png" alt="8oCGzq.png"></p><p>ç”±ä¸Šå›¾å¯çŸ¥ï¼ŒAR5å­¦åˆ°äº†192.168.2.0å’Œ192.168.4.0çš„è·¯ç”±<br>                       AR6å­¦åˆ°äº†0.0.0.0/0å’Œ192.168.4.0çš„è·¯ç”±<br>                       AR4å­¦åˆ°äº†0.0.0.0/0å’Œ192.168.2.0çš„è·¯ç”±<br> ç»¼ä¸Šï¼Œè·¯ç”±æ³¨å…¥æˆåŠŸã€‚</p><h2 id="3-6-éªŒè¯åŠæŠ¥æ–‡æ•è·åˆ†æ"><a href="#3-6-éªŒè¯åŠæŠ¥æ–‡æ•è·åˆ†æ" class="headerlink" title="3.6 éªŒè¯åŠæŠ¥æ–‡æ•è·åˆ†æ"></a>3.6 éªŒè¯åŠæŠ¥æ–‡æ•è·åˆ†æ</h2><h3 id="3-6-1-éªŒè¯"><a href="#3-6-1-éªŒè¯" class="headerlink" title="3.6.1 éªŒè¯"></a>3.6.1 éªŒè¯</h3><p>PC1 Ping PC2 å¹¶åœ¨AR5çš„GE0/0/0ç«¯å£æŠ“åŒ… ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://s1.ax1x.com/2020/03/22/8oipUe.png" alt="8oipUe.png"></p><p>åˆ†æåŸå› åŠè§£å†³æ–¹æ¡ˆï¼š</p><p>è·¯ç”±è™½ç„¶æ³¨å…¥æˆåŠŸï¼Œä½†æ˜¯PC1ä»ç„¶pingä¸é€šPC2ï¼Œå› ä¸ºPC2çŸ¥é“äº†å»å¾€192.168.4.0ç½‘æ®µçš„è·¯ç”±ï¼Œä½†æ˜¯AR3æ˜¯å¤–éƒ¨è·¯ç”±ï¼Œå®ƒå¹¶ä¸çŸ¥é“å¦‚ä½•å»å¾€ospf å†…éƒ¨ï¼Œæ‰€ä»¥éœ€è¦åœ¨AR3ä¸Šé…ç½®ä¸€æ¡é»˜è®¤è·¯ç”±ï¼Œä¸‹ä¸€è·³ä¸º192.168.34.3</p><p>åœ¨AR3ä¸Šé…ç½®å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;R3&gt;sys</span></span><br><span class="line"><span class="attr">Enter</span> <span class="string">system view, return user view with Ctrl+Z.</span></span><br><span class="line"><span class="meta">[R3]ip</span> <span class="string">route-static 0.0.0.0 0 192.168.34.3</span></span><br></pre></td></tr></table></figure><p>å†æ¬¡è¿›è¡ŒPingæ“ä½œå¹¶åœ¨AR5çš„GE0/0/0ç«¯å£å¼€å§‹æ•è·æŠ¥æ–‡å¹¶é‡å¯è¯¥ç«¯å£åçš„ç»“æœå¦‚ä¸‹ï¼š</p><img src="/2020/03/22/ospf%E7%BB%84%E7%BD%91%E5%AE%9E%E9%AA%8C/2.png" class title="PC1 Ping PC2"><p>å‘ç°å¯ä»¥Pingé€šï¼Œå¹¶å‘ç°å¦‚ä¸‹å‡ ç§ç±»å‹çš„OSPFæŠ¥æ–‡ï¼š</p><img src="/2020/03/22/ospf%E7%BB%84%E7%BD%91%E5%AE%9E%E9%AA%8C/1.png" class><h3 id="3-6-2-æŠ¥æ–‡åˆ†æ"><a href="#3-6-2-æŠ¥æ–‡åˆ†æ" class="headerlink" title="3.6.2 æŠ¥æ–‡åˆ†æ"></a>3.6.2 æŠ¥æ–‡åˆ†æ</h3><h4 id="3-6-2-1-LSAæŠ¥æ–‡åˆ†æ"><a href="#3-6-2-1-LSAæŠ¥æ–‡åˆ†æ" class="headerlink" title="3.6.2.1 LSAæŠ¥æ–‡åˆ†æ"></a>3.6.2.1 LSAæŠ¥æ–‡åˆ†æ</h4><ol><li><p><strong>æŠ¥æ–‡çš„åˆ†ç±»</strong></p><ul><li><strong>Router-LSAï¼ˆç¬¬1ç±»ï¼‰</strong>ï¼Œ ç”±æ¯ä¸ªè·¯ç”±å™¨ç”Ÿæˆï¼Œæè¿°äº†è·¯ç”±å™¨çš„é“¾è·¯çŠ¶æ€å’ŒèŠ±è´¹ï¼Œä¼ é€’åˆ°æ•´ä¸ªåŒºåŸŸ</li><li><strong>Network-LSA ï¼ˆç¬¬2ç±»ï¼‰</strong> ï¼Œç”±DRç”Ÿæˆï¼Œæè¿°äº†æœ¬ç½‘ç»œçš„é“¾è·¯çŠ¶æ€ï¼Œä¼ é€’åˆ°æ•´ä¸ªåŒºåŸŸ</li><li><strong>Net-Summary-LSA ï¼ˆç¬¬3ç±»ï¼‰</strong> ï¼Œç”±ABRç”Ÿæˆï¼Œæè¿°äº†åˆ°åŒºåŸŸå†…æŸä¸€ç½‘ç»œçš„è·¯ç”±ï¼Œä¼ é€’åˆ°ç›¸å…³åŒºåŸŸ</li><li><strong>Asbr-Summary-LSA ï¼ˆç¬¬4ç±»ï¼‰</strong> ï¼Œç”±ABRç”Ÿæˆï¼Œæè¿°äº†åˆ°ASBRçš„è·¯ç”±ï¼Œä¼ é€’åˆ°ç›¸å…³åŒºåŸŸ</li><li><strong>AS-External-LSA ï¼ˆç¬¬5ç±»ï¼‰</strong> ï¼Œç”±ASBRç”Ÿæˆï¼Œæè¿°äº†åˆ°ASå¤–éƒ¨çš„è·¯ç”±ï¼Œä¼ é€’åˆ°æ•´ä¸ªASï¼ˆSTUBåŒºåŸŸé™¤å¤–ï¼‰</li></ul></li><li><p>æŠ¥æ–‡åˆ†æï¼š</p><p>æŸ¥çœ‹LS updateæŠ¥æ–‡ç»“æœå¦‚ä¸‹å›¾ï¼š</p><img src="/2020/03/22/ospf%E7%BB%84%E7%BD%91%E5%AE%9E%E9%AA%8C/update.png" class title="LS_update"><p>å‘ç°å››ç§ç±»å‹çš„LSAï¼Œå¯¹å…¶è¿›è¡Œé€ä¸€åˆ†æï¼š</p><p><strong>Router-LSAï¼š</strong></p><p>æŠ¥æ–‡æ ¼å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="/2020/03/22/ospf%E7%BB%84%E7%BD%91%E5%AE%9E%E9%AA%8C/Router%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F.png" class title="RouteræŠ¥æ–‡æ ¼å¼"><p> æ ¼å¼å­—æ®µè§£é‡Šå¦‚ä¸‹å›¾ï¼š </p><img src="/2020/03/22/ospf%E7%BB%84%E7%BD%91%E5%AE%9E%E9%AA%8C/Ro1.png" class title="Ro1"><img src="/2020/03/22/ospf%E7%BB%84%E7%BD%91%E5%AE%9E%E9%AA%8C/Ro2.png" class title="Ro2"><img src="/2020/03/22/ospf%E7%BB%84%E7%BD%91%E5%AE%9E%E9%AA%8C/Ro3.png" class title="Ro3"><p>æ•è·çš„å…·ä½“å­—æ®µå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="/2020/03/22/ospf%E7%BB%84%E7%BD%91%E5%AE%9E%E9%AA%8C/Router.png" class title="Router"><p><strong>Network LSAï¼š</strong></p><p>æŠ¥æ–‡æ ¼å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="/2020/03/22/ospf%E7%BB%84%E7%BD%91%E5%AE%9E%E9%AA%8C/NW%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F.png" class title="NWæŠ¥æ–‡æ ¼å¼"><p> æ ¼å¼å­—æ®µè§£é‡Šå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š </p><img src="/2020/03/22/ospf%E7%BB%84%E7%BD%91%E5%AE%9E%E9%AA%8C/NW1.png" class title="NW1"><p>æ•è·çš„å…·ä½“å­—æ®µå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="/2020/03/22/ospf%E7%BB%84%E7%BD%91%E5%AE%9E%E9%AA%8C/NW.png" class title="NW"><p> <strong>Summary LSAï¼š</strong> </p><p>Network Summary LSAï¼ˆType3ï¼‰:æè¿°åŒºåŸŸå†…æ‰€æœ‰ç½‘æ®µçš„è·¯ç”±ï¼Œå¹¶é€šå‘Šç»™å…¶ä»–ç›¸å…³åŒºåŸŸã€‚</p><p>â€‹     ASBR Summary LSAï¼ˆType4ï¼‰:æè¿°åˆ°ASBRçš„è·¯ç”±ï¼Œé€šå‘Šç»™é™¤ASBRæ‰€åœ¨åŒºåŸŸçš„å…¶ä»–ç›¸å…³åŒºåŸŸã€‚</p><p>â€‹     Type3å’ŒType4çš„LSAæœ‰ç›¸åŒçš„æ ¼å¼ï¼Œä»–ä»¬éƒ½æ˜¯ç”±ABRäº§ç”Ÿã€‚</p><p>  Summary LSA æ ¼å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š </p><img src="/2020/03/22/ospf%E7%BB%84%E7%BD%91%E5%AE%9E%E9%AA%8C/SL.png" class title="SL"><p>  Network Summary LSAæ ¼å¼å­—æ®µè§£é‡Šï¼š</p><img src="/2020/03/22/ospf%E7%BB%84%E7%BD%91%E5%AE%9E%E9%AA%8C/NSL.png" class title="NSL"><p> ASBR Summary LSAæ ¼å¼å­—æ®µè§£é‡Šï¼š </p><img src="/2020/03/22/ospf%E7%BB%84%E7%BD%91%E5%AE%9E%E9%AA%8C/ALS.png" class title="ALS"><p>æ•è·çš„å…·ä½“å­—æ®µå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="/2020/03/22/ospf%E7%BB%84%E7%BD%91%E5%AE%9E%E9%AA%8C/NASL.png" class title="NALS"><p> <strong>AS-External LSA:</strong> </p><p>AS External LSAï¼ˆType5ï¼‰:ç”±ASBRäº§ç”Ÿï¼Œæè¿°åˆ°ASå¤–éƒ¨çš„è·¯ç”±ï¼Œè¿™æ˜¯äº”ç§LSAä¸­ï¼Œ</p><p>â€‹    å”¯ä¸€ä¸€ç§é€šå‘Š  ç»™æ‰€æœ‰åŒºåŸŸï¼ˆé™¤äº†StubåŒºåŸŸå’ŒNSSAåŒºåŸŸï¼‰çš„LSAã€‚</p><p>  AS External LSAæ ¼å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="/2020/03/22/ospf%E7%BB%84%E7%BD%91%E5%AE%9E%E9%AA%8C/AEL.png" class title="AEL"> <p>  AS-External LSAæ ¼å¼å­—æ®µè§£é‡Šï¼š </p><img src="/2020/03/22/ospf%E7%BB%84%E7%BD%91%E5%AE%9E%E9%AA%8C/AEL1.png" class title="AEL1"> <p>æ²¡æŠ“åˆ°è¿™ä¸ªç±»å‹çš„å­—æ®µã€‚</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå·¥ç¨‹è®¾è®¡ </category>
          
          <category> OSPFå®éªŒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå·¥ç¨‹è®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ’åºç®—æ³•æ€»ç»“å½’çº³</title>
      <link href="/2020/03/20/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93%E5%BD%92%E7%BA%B3/"/>
      <url>/2020/03/20/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93%E5%BD%92%E7%BA%B3/</url>
      
        <content type="html"><![CDATA[<hr><h1 id="1ã€æ’åºçš„å®šä¹‰"><a href="#1ã€æ’åºçš„å®šä¹‰" class="headerlink" title="1ã€æ’åºçš„å®šä¹‰"></a>1ã€æ’åºçš„å®šä¹‰</h1><p> å¯¹ä¸€åºåˆ—å¯¹è±¡æ ¹æ®æŸä¸ªå…³é”®å­—è¿›è¡Œæ’åºã€‚ </p><h1 id="2ã€æ’åºç®—æ³•è¡¨"><a href="#2ã€æ’åºç®—æ³•è¡¨" class="headerlink" title="2ã€æ’åºç®—æ³•è¡¨"></a>2ã€æ’åºç®—æ³•è¡¨</h1><p><img src="https://s1.ax1x.com/2020/03/20/8cBdkn.jpg" alt="8cBdkn.jpg"></p><p><strong>å›¾ç‰‡åè¯è§£é‡Šï¼š</strong></p><ul><li>n: æ•°æ®è§„æ¨¡</li><li>k: â€œæ¡¶â€çš„ä¸ªæ•°</li><li>In-place: å ç”¨å¸¸æ•°å†…å­˜ï¼Œä¸å ç”¨é¢å¤–å†…å­˜</li><li>Out-place: å ç”¨é¢å¤–å†…å­˜</li></ul><h1 id="3ã€æœ¯è¯­è¯´æ˜"><a href="#3ã€æœ¯è¯­è¯´æ˜" class="headerlink" title="3ã€æœ¯è¯­è¯´æ˜"></a>3ã€æœ¯è¯­è¯´æ˜</h1><ul><li><strong>ç¨³å®š</strong>ï¼šå¦‚æœaåŸæœ¬åœ¨bå‰é¢ï¼Œè€Œa=bï¼Œæ’åºä¹‹åaä»ç„¶åœ¨bçš„å‰é¢ï¼› </li><li><strong>ä¸ç¨³å®š</strong>ï¼šå¦‚æœaåŸæœ¬åœ¨bçš„å‰é¢ï¼Œè€Œa=bï¼Œæ’åºä¹‹åaå¯èƒ½ä¼šå‡ºç°åœ¨bçš„åé¢ï¼› </li><li><strong>å†…æ’åº</strong>ï¼šæ‰€æœ‰æ’åºæ“ä½œéƒ½åœ¨å†…å­˜ä¸­å®Œæˆï¼› </li><li><strong>å¤–æ’åº</strong>ï¼šç”±äºæ•°æ®å¤ªå¤§ï¼Œå› æ­¤æŠŠæ•°æ®æ”¾åœ¨ç£ç›˜ä¸­ï¼Œè€Œæ’åºé€šè¿‡ç£ç›˜å’Œå†…å­˜çš„æ•°æ®ä¼ è¾“æ‰èƒ½è¿›è¡Œï¼› </li><li><strong>æ—¶é—´å¤æ‚åº¦ï¼š</strong> ä¸€ä¸ªç®—æ³•æ‰§è¡Œæ‰€è€—è´¹çš„æ—¶é—´ã€‚ </li><li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šè¿è¡Œå®Œä¸€ä¸ªç¨‹åºæ‰€éœ€å†…å­˜çš„å¤§å°ã€‚ </li></ul><a id="more"></a><h1 id="4ã€ç®—æ³•çš„åˆ†ç±»"><a href="#4ã€ç®—æ³•çš„åˆ†ç±»" class="headerlink" title="4ã€ç®—æ³•çš„åˆ†ç±»"></a>4ã€ç®—æ³•çš„åˆ†ç±»</h1><p><img src="https://s1.ax1x.com/2020/03/20/8cDmcT.jpg" alt="8cDmcT.jpg"></p><h1 id="5ã€æ¯”è¾ƒå’Œéæ¯”è¾ƒçš„åŒºåˆ«"><a href="#5ã€æ¯”è¾ƒå’Œéæ¯”è¾ƒçš„åŒºåˆ«" class="headerlink" title="5ã€æ¯”è¾ƒå’Œéæ¯”è¾ƒçš„åŒºåˆ«"></a>5ã€æ¯”è¾ƒå’Œéæ¯”è¾ƒçš„åŒºåˆ«</h1><p> <strong>å¸¸è§çš„å¿«é€Ÿæ’åºã€å½’å¹¶æ’åºã€å †æ’åºã€å†’æ³¡æ’åºç­‰å±äºæ¯”è¾ƒæ’åºã€‚</strong>åœ¨æ’åºçš„æœ€ç»ˆç»“æœé‡Œï¼Œå…ƒç´ ä¹‹é—´çš„æ¬¡åºä¾èµ–äºå®ƒä»¬ä¹‹é—´çš„æ¯”è¾ƒã€‚æ¯ä¸ªæ•°éƒ½å¿…é¡»å’Œå…¶ä»–æ•°è¿›è¡Œæ¯”è¾ƒï¼Œæ‰èƒ½ç¡®å®šè‡ªå·±çš„ä½ç½®ã€‚ </p><p> åœ¨å†’æ³¡æ’åºä¹‹ç±»çš„æ’åºä¸­ï¼Œé—®é¢˜è§„æ¨¡ä¸ºnï¼Œåˆå› ä¸ºéœ€è¦æ¯”è¾ƒnæ¬¡ï¼Œæ‰€ä»¥å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸ºO(nÂ²)ã€‚<strong>åœ¨å½’å¹¶æ’åºã€å¿«é€Ÿæ’åºä¹‹ç±»çš„æ’åºä¸­ï¼Œé—®é¢˜è§„æ¨¡é€šè¿‡åˆ†æ²»æ³•æ¶ˆå‡ä¸ºlogNæ¬¡ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦å¹³å‡O(nlogn)ã€‚</strong> </p><p> æ¯”è¾ƒæ’åºçš„ä¼˜åŠ¿æ˜¯ï¼Œé€‚ç”¨äºå„ç§è§„æ¨¡çš„æ•°æ®ï¼Œä¹Ÿä¸åœ¨ä¹æ•°æ®çš„åˆ†å¸ƒï¼Œéƒ½èƒ½è¿›è¡Œæ’åºã€‚<strong>å¯ä»¥è¯´ï¼Œæ¯”è¾ƒæ’åºé€‚ç”¨äºä¸€åˆ‡éœ€è¦æ’åºçš„æƒ…å†µã€‚</strong> </p><p> <strong>è®¡æ•°æ’åºã€åŸºæ•°æ’åºã€æ¡¶æ’åºåˆ™å±äºéæ¯”è¾ƒæ’åºã€‚</strong>éæ¯”è¾ƒæ’åºæ˜¯é€šè¿‡ç¡®å®šæ¯ä¸ªå…ƒç´ ä¹‹å‰ï¼Œåº”è¯¥æœ‰å¤šå°‘ä¸ªå…ƒç´ æ¥æ’åºã€‚é’ˆå¯¹æ•°ç»„arrï¼Œè®¡ç®—arr[i]ä¹‹å‰æœ‰å¤šå°‘ä¸ªå…ƒç´ ï¼Œåˆ™å”¯ä¸€ç¡®å®šäº†arr[i]åœ¨æ’åºåæ•°ç»„ä¸­çš„ä½ç½®ã€‚ </p><h1 id="6ã€æ’åºç®—æ³•çš„ç®€è¿°åŠjavaä»£ç å®ç°"><a href="#6ã€æ’åºç®—æ³•çš„ç®€è¿°åŠjavaä»£ç å®ç°" class="headerlink" title="6ã€æ’åºç®—æ³•çš„ç®€è¿°åŠjavaä»£ç å®ç°"></a>6ã€æ’åºç®—æ³•çš„ç®€è¿°åŠjavaä»£ç å®ç°</h1><h2 id="6-1-å†’æ³¡æ’åºï¼ˆBubble-Sortï¼‰"><a href="#6-1-å†’æ³¡æ’åºï¼ˆBubble-Sortï¼‰" class="headerlink" title="6.1 å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰"></a>6.1 å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰</h2><h3 id="6-1-1-æ¦‚è¿°"><a href="#6-1-1-æ¦‚è¿°" class="headerlink" title="6.1.1 æ¦‚è¿°"></a>6.1.1 æ¦‚è¿°</h3><p>å†’æ³¡æ’åºæ˜¯ä¸€ç§ç®€å•çš„æ’åºç®—æ³•ã€‚å®ƒé‡å¤åœ°èµ°è®¿è¿‡è¦æ’åºçš„æ•°åˆ—ï¼Œä¸€æ¬¡æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœå®ƒä»¬çš„é¡ºåºé”™è¯¯å°±æŠŠå®ƒä»¬äº¤æ¢è¿‡æ¥ã€‚èµ°è®¿æ•°åˆ—çš„å·¥ä½œæ˜¯é‡å¤åœ°è¿›è¡Œç›´åˆ°æ²¡æœ‰å†éœ€è¦äº¤æ¢ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥æ•°åˆ—å·²ç»æ’åºå®Œæˆã€‚è¿™ä¸ªç®—æ³•çš„åå­—ç”±æ¥æ˜¯å› ä¸ºè¶Šå°çš„å…ƒç´ ä¼šç»ç”±äº¤æ¢æ…¢æ…¢â€œæµ®â€åˆ°æ•°åˆ—çš„é¡¶ç«¯ã€‚ </p><h3 id="6-1-2-ç®—æ³•æè¿°"><a href="#6-1-2-ç®—æ³•æè¿°" class="headerlink" title="6.1.2 ç®—æ³•æè¿°"></a>6.1.2 ç®—æ³•æè¿°</h3><ul><li>æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢å®ƒä»¬ä¸¤ä¸ªï¼› </li><li>å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œï¼Œä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ï¼Œè¿™æ ·åœ¨æœ€åçš„å…ƒç´ åº”è¯¥ä¼šæ˜¯æœ€å¤§çš„æ•°ï¼› </li><li>é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åä¸€ä¸ªï¼› </li><li>é‡å¤æ­¥éª¤1~3ï¼Œç›´åˆ°æ’åºå®Œæˆã€‚ </li></ul><h3 id="6-1-3-åŠ¨å›¾æ¼”ç¤º"><a href="#6-1-3-åŠ¨å›¾æ¼”ç¤º" class="headerlink" title="6.1.3 åŠ¨å›¾æ¼”ç¤º"></a>6.1.3 åŠ¨å›¾æ¼”ç¤º</h3><p><img src="https://s1.ax1x.com/2020/03/20/8crNin.gif" alt="8crNin.gif"></p><h3 id="6-1-4-ä»£ç å®ç°"><a href="#6-1-4-ä»£ç å®ç°" class="headerlink" title="6.1.4 ä»£ç å®ç°"></a>6.1.4 ä»£ç å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] bubbleSort(<span class="keyword">int</span>[] array)&#123;</span><br><span class="line">    <span class="keyword">if</span>(array.length == <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> array;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; array.length-<span class="number">1</span>; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(array[j]&gt;array[j+<span class="number">1</span>])&#123;</span><br><span class="line">                <span class="keyword">int</span> temp = array[j+<span class="number">1</span>];</span><br><span class="line">                array[j+<span class="number">1</span>] =array[j];</span><br><span class="line">                array[j] = temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•åŠç»“æœï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æµ‹è¯•</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] array = &#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">8</span>,<span class="number">5</span>,<span class="number">7</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span>[] re = bubbleSort(array);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; re.length; i++) &#123;</span><br><span class="line">            System.out.print(re[i]+<span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»“æœ</span></span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">7</span> <span class="number">8</span> </span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure><h3 id="6-1-5-ç®—æ³•åˆ†æ"><a href="#6-1-5-ç®—æ³•åˆ†æ" class="headerlink" title="6.1.5 ç®—æ³•åˆ†æ"></a>6.1.5 ç®—æ³•åˆ†æ</h3><p>==<strong>æœ€ä½³æƒ…å†µï¼šT(n) = O(n)  æœ€å·®æƒ…å†µï¼šT(n) = O(n^2)  å¹³å‡æƒ…å†µï¼šT(n) = O(n^2)</strong>==</p><h2 id="6-2-é€‰æ‹©æ’åºï¼ˆSelection-Sortï¼‰"><a href="#6-2-é€‰æ‹©æ’åºï¼ˆSelection-Sortï¼‰" class="headerlink" title="6.2 é€‰æ‹©æ’åºï¼ˆSelection Sortï¼‰"></a>6.2 é€‰æ‹©æ’åºï¼ˆSelection Sortï¼‰</h2><h3 id="6-2-1-æ¦‚è¿°"><a href="#6-2-1-æ¦‚è¿°" class="headerlink" title="6.2.1 æ¦‚è¿°"></a>6.2.1 æ¦‚è¿°</h3><p><strong>è¡¨ç°æœ€ç¨³å®šçš„æ’åºç®—æ³•ä¹‹ä¸€ï¼Œå› ä¸ºæ— è®ºä»€ä¹ˆæ•°æ®è¿›å»éƒ½æ˜¯O(n2)çš„æ—¶é—´å¤æ‚åº¦ï¼Œæ‰€ä»¥ç”¨åˆ°å®ƒçš„æ—¶å€™ï¼Œæ•°æ®è§„æ¨¡è¶Šå°è¶Šå¥½ã€‚</strong>å”¯ä¸€çš„å¥½å¤„å¯èƒ½å°±æ˜¯ä¸å ç”¨é¢å¤–çš„å†…å­˜ç©ºé—´äº†å§ã€‚ç†è®ºä¸Šè®²ï¼Œé€‰æ‹©æ’åºå¯èƒ½ä¹Ÿæ˜¯å¹³æ—¶æ’åºä¸€èˆ¬äººæƒ³åˆ°çš„æœ€å¤šçš„æ’åºæ–¹æ³•äº†å§ã€‚</p><p> é€‰æ‹©æ’åº(Selection-sort)æ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ã€‚å®ƒçš„å·¥ä½œåŸç†ï¼šé¦–å…ˆåœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œå­˜æ”¾åˆ°æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ï¼Œç„¶åï¼Œå†ä»å‰©ä½™æœªæ’åºå…ƒç´ ä¸­ç»§ç»­å¯»æ‰¾æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œç„¶åæ”¾åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾ã€‚ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ å‡æ’åºå®Œæ¯•ã€‚  </p><h3 id="6-2-2-ç®—æ³•æè¿°"><a href="#6-2-2-ç®—æ³•æè¿°" class="headerlink" title="6.2.2 ç®—æ³•æè¿°"></a>6.2.2 ç®—æ³•æè¿°</h3><p> nä¸ªè®°å½•çš„ç›´æ¥é€‰æ‹©æ’åºå¯ç»è¿‡n-1è¶Ÿç›´æ¥é€‰æ‹©æ’åºå¾—åˆ°æœ‰åºç»“æœã€‚å…·ä½“ç®—æ³•æè¿°å¦‚ä¸‹ï¼š </p><ul><li>åˆå§‹çŠ¶æ€ï¼šæ— åºåŒºä¸ºR[1..n]ï¼Œæœ‰åºåŒºä¸ºç©ºï¼› </li><li>ç¬¬iè¶Ÿæ’åº(i=1,2,3â€¦n-1)å¼€å§‹æ—¶ï¼Œå½“å‰æœ‰åºåŒºå’Œæ— åºåŒºåˆ†åˆ«ä¸ºR[1..i-1]å’ŒR(i..nï¼‰ã€‚è¯¥è¶Ÿæ’åºä»å½“å‰æ— åºåŒºä¸­-é€‰å‡ºå…³é”®å­—æœ€å°çš„è®°å½• R[k]ï¼Œå°†å®ƒä¸æ— åºåŒºçš„ç¬¬1ä¸ªè®°å½•Räº¤æ¢ï¼Œä½¿R[1..i]å’ŒR[i+1..n)åˆ†åˆ«å˜ä¸ºè®°å½•ä¸ªæ•°å¢åŠ 1ä¸ªçš„æ–°æœ‰åºåŒºå’Œè®°å½•ä¸ªæ•°å‡å°‘1ä¸ªçš„æ–°æ— åºåŒºï¼› </li><li>n-1è¶Ÿç»“æŸï¼Œæ•°ç»„æœ‰åºåŒ–äº†ã€‚ </li></ul><h3 id="6-2-3-åŠ¨å›¾æ¼”ç¤º"><a href="#6-2-3-åŠ¨å›¾æ¼”ç¤º" class="headerlink" title="6.2.3 åŠ¨å›¾æ¼”ç¤º"></a>6.2.3 åŠ¨å›¾æ¼”ç¤º</h3><p><img src="https://s1.ax1x.com/2020/03/20/8ccDpR.gif" alt="8ccDpR.gif"></p><h3 id="6-2-4-ä»£ç å®ç°"><a href="#6-2-4-ä»£ç å®ç°" class="headerlink" title="6.2.4 ä»£ç å®ç°"></a>6.2.4 ä»£ç å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>[] selectionSort(<span class="keyword">int</span>[] arr) &#123;</span><br><span class="line">    <span class="keyword">if</span>(arr.length == <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> arr;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> index = i;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt; arr.length; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[j]&lt;arr[index])&#123;<span class="comment">//æ‰¾åˆ°æœ€å°çš„æ•°</span></span><br><span class="line">                index = j;<span class="comment">//å°†æœ€å°æ•°çš„ç´¢å¼•ä¿å­˜</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> temp = arr[index];</span><br><span class="line">        arr[index] = arr[i];</span><br><span class="line">        arr[i] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•åŠç»“æœï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> [] arr = &#123;<span class="number">8</span>,<span class="number">2</span>,<span class="number">7</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">43</span>,<span class="number">5</span>,<span class="number">9</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span>[] re = selectionSort(arr);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; re.length; i++) &#123;</span><br><span class="line">            System.out.print(re[i]+<span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2</span> <span class="number">3</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">43</span> </span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure><h3 id="6-2-5-ç®—æ³•åˆ†æ"><a href="#6-2-5-ç®—æ³•åˆ†æ" class="headerlink" title="6.2.5 ç®—æ³•åˆ†æ"></a>6.2.5 ç®—æ³•åˆ†æ</h3><p>==<strong>æœ€ä½³æƒ…å†µï¼šT(n) = O(n^2)  æœ€å·®æƒ…å†µï¼šT(n) = O(n^2)  å¹³å‡æƒ…å†µï¼šT(n) = O(n^2)</strong>==</p><h2 id="6-3-æ’å…¥æ’åºï¼ˆInsertion-Sortï¼‰"><a href="#6-3-æ’å…¥æ’åºï¼ˆInsertion-Sortï¼‰" class="headerlink" title="6.3 æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰"></a>6.3 æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰</h2><h3 id="6-3-1-æ¦‚è¿°"><a href="#6-3-1-æ¦‚è¿°" class="headerlink" title="6.3.1 æ¦‚è¿°"></a>6.3.1 æ¦‚è¿°</h3><p>æ’å…¥æ’åºï¼ˆInsertion-Sortï¼‰çš„ç®—æ³•æè¿°æ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯é€šè¿‡æ„å»ºæœ‰åºåºåˆ—ï¼Œå¯¹äºæœªæ’åºæ•°æ®ï¼Œåœ¨å·²æ’åºåºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼Œæ‰¾åˆ°ç›¸åº”ä½ç½®å¹¶æ’å…¥ã€‚æ’å…¥æ’åºåœ¨å®ç°ä¸Šï¼Œé€šå¸¸é‡‡ç”¨in-placeæ’åºï¼ˆå³åªéœ€ç”¨åˆ°O(1)çš„é¢å¤–ç©ºé—´çš„æ’åºï¼‰ï¼Œå› è€Œåœ¨ä»åå‘å‰æ‰«æè¿‡ç¨‹ä¸­ï¼Œéœ€è¦åå¤æŠŠå·²æ’åºå…ƒç´ é€æ­¥å‘åæŒªä½ï¼Œä¸ºæœ€æ–°å…ƒç´ æä¾›æ’å…¥ç©ºé—´ã€‚</p><h3 id="6-3-2-ç®—æ³•æè¿°"><a href="#6-3-2-ç®—æ³•æè¿°" class="headerlink" title="6.3.2 ç®—æ³•æè¿°"></a>6.3.2 ç®—æ³•æè¿°</h3><p> ä¸€èˆ¬æ¥è¯´ï¼Œæ’å…¥æ’åºéƒ½é‡‡ç”¨in-placeåœ¨æ•°ç»„ä¸Šå®ç°ã€‚å…·ä½“ç®—æ³•æè¿°å¦‚ä¸‹ï¼š </p><ul><li>ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åºï¼› </li><li>å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼› </li><li>å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºï¼‰å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®ï¼› </li><li>é‡å¤æ­¥éª¤3ï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–è€…ç­‰äºæ–°å…ƒç´ çš„ä½ç½®ï¼› </li><li>å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®åï¼› </li><li>é‡å¤æ­¥éª¤2~5ã€‚ </li></ul><h3 id="6-3-3-åŠ¨å›¾æ¼”ç¤º"><a href="#6-3-3-åŠ¨å›¾æ¼”ç¤º" class="headerlink" title="6.3.3 åŠ¨å›¾æ¼”ç¤º"></a>6.3.3 åŠ¨å›¾æ¼”ç¤º</h3><p><img src="https://s1.ax1x.com/2020/03/20/8cRJXt.gif" alt="8cRJXt.gif"></p><h3 id="6-3-4-ä»£ç å®ç°"><a href="#6-3-4-ä»£ç å®ç°" class="headerlink" title="6.3.4 ä»£ç å®ç°"></a>6.3.4 ä»£ç å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>[] insertionSort(<span class="keyword">int</span>[] arr) &#123;</span><br><span class="line">    <span class="keyword">if</span>(arr.length == <span class="number">0</span> )&#123;</span><br><span class="line">        <span class="keyword">return</span> arr;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> current;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length-<span class="number">1</span>; i++) &#123;</span><br><span class="line">        current = arr[i+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span> preIndex = i;</span><br><span class="line">        <span class="keyword">while</span> (preIndex &gt;= <span class="number">0</span> &amp;&amp; current &lt; arr[preIndex])&#123;</span><br><span class="line">            arr[preIndex+<span class="number">1</span>] = arr[preIndex];</span><br><span class="line">            preIndex--;</span><br><span class="line">        &#125;</span><br><span class="line">        arr[preIndex + <span class="number">1</span>] =current;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•åŠç»“æœï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> [] arr = &#123;<span class="number">18</span>,<span class="number">4</span>,<span class="number">35</span>,<span class="number">22</span>,<span class="number">72</span>,<span class="number">17</span>,<span class="number">99</span>,<span class="number">101</span>,<span class="number">11</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span>[] re = insertionSort(arr);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; re.length; i++) &#123;</span><br><span class="line">            System.out.print(re[i]+<span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="number">4</span> <span class="number">11</span> <span class="number">17</span> <span class="number">18</span> <span class="number">22</span> <span class="number">35</span> <span class="number">72</span> <span class="number">99</span> <span class="number">101</span> </span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure><h3 id="6-3-5-ç®—æ³•åˆ†æ"><a href="#6-3-5-ç®—æ³•åˆ†æ" class="headerlink" title="6.3.5 ç®—æ³•åˆ†æ"></a>6.3.5 ç®—æ³•åˆ†æ</h3><p>==<strong>æœ€ä½³æƒ…å†µï¼šT(n) = O(n)  æœ€å·®æƒ…å†µï¼šT(n) = O(n^2)  å¹³å‡æƒ…å†µï¼šT(n) = O(n^2)</strong>==</p><h2 id="6-4-å¸Œå°”æ’åºï¼ˆShell-Sortï¼‰"><a href="#6-4-å¸Œå°”æ’åºï¼ˆShell-Sortï¼‰" class="headerlink" title="6.4 å¸Œå°”æ’åºï¼ˆShell Sortï¼‰"></a>6.4 å¸Œå°”æ’åºï¼ˆShell Sortï¼‰</h2><h3 id="6-4-1-æ¦‚è¿°"><a href="#6-4-1-æ¦‚è¿°" class="headerlink" title="6.4.1 æ¦‚è¿°"></a>6.4.1 æ¦‚è¿°</h3><p>å¸Œå°”æ’åºæ˜¯å¸Œå°”ï¼ˆDonald Shellï¼‰äº1959å¹´æå‡ºçš„ä¸€ç§æ’åºç®—æ³•ã€‚å¸Œå°”æ’åºä¹Ÿæ˜¯ä¸€ç§æ’å…¥æ’åºï¼Œå®ƒæ˜¯ç®€å•æ’å…¥æ’åºç»è¿‡æ”¹è¿›ä¹‹åçš„ä¸€ä¸ªæ›´é«˜æ•ˆçš„ç‰ˆæœ¬ï¼Œä¹Ÿç§°ä¸ºç¼©å°å¢é‡æ’åºï¼ŒåŒæ—¶è¯¥ç®—æ³•æ˜¯å†²ç ´O(n2ï¼‰çš„ç¬¬ä¸€æ‰¹ç®—æ³•ä¹‹ä¸€ã€‚å®ƒä¸æ’å…¥æ’åºçš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒä¼šä¼˜å…ˆæ¯”è¾ƒè·ç¦»è¾ƒè¿œçš„å…ƒç´ ã€‚å¸Œå°”æ’åºåˆå«ç¼©å°å¢é‡æ’åºã€‚</p><p>==<strong>å¸Œå°”æ’åºæ˜¯æŠŠè®°å½•æŒ‰ä¸‹è¡¨çš„ä¸€å®šå¢é‡åˆ†ç»„ï¼Œå¯¹æ¯ç»„ä½¿ç”¨ç›´æ¥æ’å…¥æ’åºç®—æ³•æ’åºï¼›éšç€å¢é‡é€æ¸å‡å°‘ï¼Œæ¯ç»„åŒ…å«çš„å…³é”®è¯è¶Šæ¥è¶Šå¤šï¼Œå½“å¢é‡å‡è‡³1æ—¶ï¼Œæ•´ä¸ªæ–‡ä»¶æ°è¢«åˆ†æˆä¸€ç»„ï¼Œç®—æ³•ä¾¿ç»ˆæ­¢ã€‚</strong>==</p><h3 id="6-4-2-ç®—æ³•æè¿°"><a href="#6-4-2-ç®—æ³•æè¿°" class="headerlink" title="6.4.2 ç®—æ³•æè¿°"></a>6.4.2 ç®—æ³•æè¿°</h3><p><strong>æˆ‘ä»¬æ¥çœ‹ä¸‹å¸Œå°”æ’åºçš„åŸºæœ¬æ­¥éª¤ï¼Œåœ¨æ­¤æˆ‘ä»¬é€‰æ‹©å¢é‡gap=length/2ï¼Œç¼©å°å¢é‡ç»§ç»­ä»¥gap = gap/2çš„æ–¹å¼ï¼Œè¿™ç§å¢é‡é€‰æ‹©æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªåºåˆ—æ¥è¡¨ç¤ºï¼Œ{n/2,(n/2)/2â€¦1}ï¼Œç§°ä¸ºå¢é‡åºåˆ—ã€‚</strong>å¸Œå°”æ’åºçš„å¢é‡åºåˆ—çš„é€‰æ‹©ä¸è¯æ˜æ˜¯ä¸ªæ•°å­¦éš¾é¢˜ï¼Œæˆ‘ä»¬é€‰æ‹©çš„è¿™ä¸ªå¢é‡åºåˆ—æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ï¼Œä¹Ÿæ˜¯å¸Œå°”å»ºè®®çš„å¢é‡ï¼Œç§°ä¸ºå¸Œå°”å¢é‡ï¼Œä½†å…¶å®è¿™ä¸ªå¢é‡åºåˆ—ä¸æ˜¯æœ€ä¼˜çš„ã€‚æ­¤å¤„æˆ‘ä»¬åšç¤ºä¾‹ä½¿ç”¨å¸Œå°”å¢é‡ã€‚</p><p>å…ˆå°†æ•´ä¸ªå¾…æ’åºçš„è®°å½•åºåˆ—åˆ†å‰²æˆä¸ºè‹¥å¹²å­åºåˆ—åˆ†åˆ«è¿›è¡Œç›´æ¥æ’å…¥æ’åºï¼Œå…·ä½“ç®—æ³•æè¿°ï¼š</p><ul><li>é€‰æ‹©ä¸€ä¸ªå¢é‡åºåˆ—t1ï¼Œt2ï¼Œâ€¦ï¼Œtkï¼Œå…¶ä¸­ti&gt;tjï¼Œtk=1ï¼› </li><li>æŒ‰å¢é‡åºåˆ—ä¸ªæ•°kï¼Œå¯¹åºåˆ—è¿›è¡Œk è¶Ÿæ’åºï¼› </li><li>æ¯è¶Ÿæ’åºï¼Œæ ¹æ®å¯¹åº”çš„å¢é‡tiï¼Œå°†å¾…æ’åºåˆ—åˆ†å‰²æˆè‹¥å¹²é•¿åº¦ä¸ºm çš„å­åºåˆ—ï¼Œåˆ†åˆ«å¯¹å„å­è¡¨è¿›è¡Œç›´æ¥æ’å…¥æ’åºã€‚ä»…å¢é‡å› å­ä¸º1 æ—¶ï¼Œæ•´ä¸ªåºåˆ—ä½œä¸ºä¸€ä¸ªè¡¨æ¥å¤„ç†ï¼Œè¡¨é•¿åº¦å³ä¸ºæ•´ä¸ªåºåˆ—çš„é•¿åº¦ã€‚ </li></ul><h3 id="6-4-3-è¿‡ç¨‹æ¼”ç¤º"><a href="#6-4-3-è¿‡ç¨‹æ¼”ç¤º" class="headerlink" title="6.4.3 è¿‡ç¨‹æ¼”ç¤º"></a>6.4.3 è¿‡ç¨‹æ¼”ç¤º</h3><p><img src="https://s1.ax1x.com/2020/03/20/8cq97d.jpg" alt="8cq97d.jpg"></p><h3 id="6-4-4-ä»£ç æ¼”ç¤º"><a href="#6-4-4-ä»£ç æ¼”ç¤º" class="headerlink" title="6.4.4 ä»£ç æ¼”ç¤º"></a>6.4.4 ä»£ç æ¼”ç¤º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>[] shellSort(<span class="keyword">int</span>[] arr) &#123;</span><br><span class="line">    <span class="keyword">int</span> len = arr.length;</span><br><span class="line">    <span class="keyword">int</span> temp,gap = len/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">while</span> (gap&gt;<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = gap; i &lt; len; i++) &#123;</span><br><span class="line">            temp = arr[i];</span><br><span class="line">            <span class="keyword">int</span> preIndex = i - gap;</span><br><span class="line">            <span class="keyword">while</span> (preIndex &gt;= <span class="number">0</span> &amp;&amp; arr[preIndex]&gt;temp)&#123;</span><br><span class="line">                arr[preIndex + gap] = arr[preIndex];</span><br><span class="line">                preIndex -= gap;</span><br><span class="line">            &#125;</span><br><span class="line">            arr[preIndex + gap] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">        gap /=<span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•åŠç»“æœï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] arr  = &#123;<span class="number">1</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">7</span>,<span class="number">56</span>,<span class="number">9</span>,<span class="number">4</span>,<span class="number">8</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span>[] re = shellSort(arr);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; re.length; i++) &#123;</span><br><span class="line">            System.out.print(re[i]+<span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line"><span class="number">1</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">56</span> </span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure><h3 id="6-4-5-ç®—æ³•åˆ†æ"><a href="#6-4-5-ç®—æ³•åˆ†æ" class="headerlink" title="6.4.5 ç®—æ³•åˆ†æ"></a>6.4.5 ç®—æ³•åˆ†æ</h3><p>==<strong>æœ€ä½³æƒ…å†µï¼šT(n) = O(nlog2 n)  æœ€åæƒ…å†µï¼šT(n) = O(nlog2 n)  å¹³å‡æƒ…å†µï¼šT(n) =O(nlog2n)</strong>==</p><h2 id="6-5-å½’å¹¶æ’åºï¼ˆMerge-Sortï¼‰"><a href="#6-5-å½’å¹¶æ’åºï¼ˆMerge-Sortï¼‰" class="headerlink" title="6.5 å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰"></a>6.5 å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰</h2><h3 id="6-5-1-æ¦‚è¿°"><a href="#6-5-1-æ¦‚è¿°" class="headerlink" title="6.5.1 æ¦‚è¿°"></a>6.5.1 æ¦‚è¿°</h3><p>å’Œé€‰æ‹©æ’åºä¸€æ ·ï¼Œå½’å¹¶æ’åºçš„æ€§èƒ½ä¸å—è¾“å…¥æ•°æ®çš„å½±å“ï¼Œä½†è¡¨ç°æ¯”é€‰æ‹©æ’åºå¥½çš„å¤šï¼Œå› ä¸ºå§‹ç»ˆéƒ½æ˜¯O(n log nï¼‰çš„æ—¶é—´å¤æ‚åº¦ã€‚ä»£ä»·æ˜¯éœ€è¦é¢å¤–çš„å†…å­˜ç©ºé—´ã€‚</p><p>å½’å¹¶æ’åºæ˜¯å»ºç«‹åœ¨å½’å¹¶æ“ä½œä¸Šçš„ä¸€ç§æœ‰æ•ˆçš„æ’åºç®—æ³•ã€‚è¯¥ç®—æ³•æ˜¯é‡‡ç”¨åˆ†æ²»æ³•ï¼ˆDivide and Conquerï¼‰çš„ä¸€ä¸ªéå¸¸å…¸å‹çš„åº”ç”¨ã€‚å½’å¹¶æ’åºæ˜¯ä¸€ç§ç¨³å®šçš„æ’åºæ–¹æ³•ã€‚å°†å·²æœ‰åºçš„å­åºåˆ—åˆå¹¶ï¼Œå¾—åˆ°å®Œå…¨æœ‰åºçš„åºåˆ—ï¼›å³å…ˆä½¿æ¯ä¸ªå­åºåˆ—æœ‰åºï¼Œå†ä½¿å­åºåˆ—æ®µé—´æœ‰åºã€‚è‹¥å°†ä¸¤ä¸ªæœ‰åºè¡¨åˆå¹¶æˆä¸€ä¸ªæœ‰åºè¡¨ï¼Œç§°ä¸º2-è·¯å½’å¹¶ã€‚ </p><h3 id="6-5-2-ç®—æ³•æè¿°"><a href="#6-5-2-ç®—æ³•æè¿°" class="headerlink" title="6.5.2 ç®—æ³•æè¿°"></a>6.5.2 ç®—æ³•æè¿°</h3><ul><li>æŠŠé•¿åº¦ä¸ºnçš„è¾“å…¥åºåˆ—åˆ†æˆä¸¤ä¸ªé•¿åº¦ä¸ºn/2çš„å­åºåˆ—ï¼› </li><li>å¯¹è¿™ä¸¤ä¸ªå­åºåˆ—åˆ†åˆ«é‡‡ç”¨å½’å¹¶æ’åºï¼› </li><li>å°†ä¸¤ä¸ªæ’åºå¥½çš„å­åºåˆ—åˆå¹¶æˆä¸€ä¸ªæœ€ç»ˆçš„æ’åºåºåˆ—ã€‚ </li></ul><h3 id="6-5-3-åŠ¨å›¾æ¼”ç¤º"><a href="#6-5-3-åŠ¨å›¾æ¼”ç¤º" class="headerlink" title="6.5.3 åŠ¨å›¾æ¼”ç¤º"></a>6.5.3 åŠ¨å›¾æ¼”ç¤º</h3><p><img src="https://s1.ax1x.com/2020/03/20/8cveTe.gif" alt="8cveTe.gif"></p><h3 id="6-5-4-ä»£ç å®ç°"><a href="#6-5-4-ä»£ç å®ç°" class="headerlink" title="6.5.4 ä»£ç å®ç°"></a>6.5.4 ä»£ç å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>[] mergeSort(<span class="keyword">int</span>[] arr) &#123;</span><br><span class="line">    <span class="keyword">if</span> (arr.length &lt; <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> arr;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> mid = arr.length / <span class="number">2</span>;</span><br><span class="line">    <span class="comment">//copyOfRangeæ–¹æ³•å¤åˆ¶çš„æ•°ç»„ä¸åŒ…å«midï¼ŒåŠ[0,mid)</span></span><br><span class="line">    <span class="keyword">int</span>[] left = Arrays.copyOfRange(arr, <span class="number">0</span>, mid);</span><br><span class="line">    <span class="keyword">int</span>[] right = Arrays.copyOfRange(arr, mid, arr.length);</span><br><span class="line">    <span class="keyword">return</span> merge(mergeSort(left), mergeSort(right));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>[] merge(<span class="keyword">int</span>[] left, <span class="keyword">int</span>[] right) &#123;</span><br><span class="line">    <span class="keyword">int</span>[] re = <span class="keyword">new</span> <span class="keyword">int</span>[left.length + right.length];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>, i = <span class="number">0</span>, j = <span class="number">0</span>; index &lt; re.length; index++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= left.length) &#123;</span><br><span class="line">            re[index] = right[j++];</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (j &gt;= right.length) &#123;</span><br><span class="line">            re[index] = left[i++];</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (left[i] &gt; right[j]) &#123;</span><br><span class="line">            re[index] = right[j++];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            re[index] = left[i++];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> re;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•åŠç»“æœï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] arr = &#123;<span class="number">8</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">43</span>, <span class="number">5</span>, <span class="number">9</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span>[] re = mergeSort(arr);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; re.length; i++) &#123;</span><br><span class="line">            System.out.print(re[i] + <span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="number">2</span> <span class="number">3</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">43</span> </span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure><h3 id="6-5-5-ç®—æ³•åˆ†æ"><a href="#6-5-5-ç®—æ³•åˆ†æ" class="headerlink" title="6.5.5 ç®—æ³•åˆ†æ"></a>6.5.5 ç®—æ³•åˆ†æ</h3><p>==<strong>æœ€ä½³æƒ…å†µï¼šT(n) = O(n)  æœ€å·®æƒ…å†µï¼šT(n) = O(nlogn)  å¹³å‡æƒ…å†µï¼šT(n) = O(nlogn)</strong>==</p><h2 id="6-6-å¿«é€Ÿæ’åºï¼ˆQuick-Sortï¼‰"><a href="#6-6-å¿«é€Ÿæ’åºï¼ˆQuick-Sortï¼‰" class="headerlink" title="6.6 å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰"></a>6.6 å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰</h2><h3 id="6-6-1-æ¦‚è¿°"><a href="#6-6-1-æ¦‚è¿°" class="headerlink" title="6.6.1 æ¦‚è¿°"></a>6.6.1 æ¦‚è¿°</h3><p> å¿«é€Ÿæ’åºçš„åŸºæœ¬æ€æƒ³ï¼šé€šè¿‡ä¸€è¶Ÿæ’åºå°†å¾…æ’è®°å½•åˆ†éš”æˆç‹¬ç«‹çš„ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†è®°å½•çš„å…³é”®å­—å‡æ¯”å¦ä¸€éƒ¨åˆ†çš„å…³é”®å­—å°ï¼Œåˆ™å¯åˆ†åˆ«å¯¹è¿™ä¸¤éƒ¨åˆ†è®°å½•ç»§ç»­è¿›è¡Œæ’åºï¼Œä»¥è¾¾åˆ°æ•´ä¸ªåºåˆ—æœ‰åºã€‚ </p><h3 id="6-6-2-ç®—æ³•æè¿°"><a href="#6-6-2-ç®—æ³•æè¿°" class="headerlink" title="6.6.2 ç®—æ³•æè¿°"></a>6.6.2 ç®—æ³•æè¿°</h3><p>å¿«é€Ÿæ’åºä½¿ç”¨åˆ†æ²»æ³•æ¥æŠŠä¸€ä¸ªä¸²ï¼ˆlistï¼‰åˆ†ä¸ºä¸¤ä¸ªå­ä¸²ï¼ˆsub-listsï¼‰ã€‚å…·ä½“ç®—æ³•æè¿°å¦‚ä¸‹ï¼š</p><ul><li>ä»æ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç§°ä¸º â€œåŸºå‡†â€ï¼ˆ==<strong>pivot</strong>==ï¼‰ï¼› </li><li>é‡æ–°æ’åºæ•°åˆ—ï¼Œæ‰€æœ‰å…ƒç´ æ¯”åŸºå‡†å€¼å°çš„æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰å…ƒç´ æ¯”åŸºå‡†å€¼å¤§çš„æ‘†åœ¨åŸºå‡†çš„åé¢ï¼ˆç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä¸€è¾¹ï¼‰ã€‚åœ¨è¿™ä¸ªåˆ†åŒºé€€å‡ºä¹‹åï¼Œè¯¥åŸºå‡†å°±å¤„äºæ•°åˆ—çš„ä¸­é—´ä½ç½®ã€‚è¿™ä¸ªç§°ä¸ºåˆ†åŒºï¼ˆpartitionï¼‰æ“ä½œï¼› </li><li>é€’å½’åœ°ï¼ˆrecursiveï¼‰æŠŠå°äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—å’Œå¤§äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—æ’åºã€‚ </li></ul><h3 id="6-6-3-åŠ¨å›¾æ¼”ç¤º"><a href="#6-6-3-åŠ¨å›¾æ¼”ç¤º" class="headerlink" title="6.6.3 åŠ¨å›¾æ¼”ç¤º"></a>6.6.3 åŠ¨å›¾æ¼”ç¤º</h3><p><img src="https://s1.ax1x.com/2020/03/20/8gDqOO.gif" alt="8gDqOO.gif"></p><h3 id="6-6-4-ä»£ç å®ç°"><a href="#6-6-4-ä»£ç å®ç°" class="headerlink" title="6.6.4 ä»£ç å®ç°"></a>6.6.4 ä»£ç å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>[] quickSort(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> start, <span class="keyword">int</span> end) &#123;</span><br><span class="line">    <span class="keyword">if</span> (arr.length &lt; <span class="number">1</span> || start &lt; <span class="number">0</span> || end &gt;= arr.length || start &gt; end) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> smallIndex = partition(arr, start, end);</span><br><span class="line">    <span class="keyword">if</span>(smallIndex &gt; start)&#123;</span><br><span class="line">        quickSort(arr,start,smallIndex-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(smallIndex &lt;end)&#123;</span><br><span class="line">        quickSort(arr,smallIndex+<span class="number">1</span>,end);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">partition</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> pivot = (<span class="keyword">int</span>) (start + Math.random() * (end - start + <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">int</span> smallIndex = start - <span class="number">1</span>;</span><br><span class="line">    swap(arr, pivot, end);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = start; i &lt;= end; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[i] &lt;= arr[end]) &#123;</span><br><span class="line">            smallIndex++;</span><br><span class="line">            <span class="keyword">if</span> (i &gt; smallIndex) &#123;</span><br><span class="line">                swap(arr, i, smallIndex);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> smallIndex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> temp = arr[i];</span><br><span class="line">    arr[i] = arr[j];</span><br><span class="line">    arr[j] = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•åŠç»“æœï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] arr = &#123;<span class="number">8</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">43</span>, <span class="number">5</span>, <span class="number">9</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span> start = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> end = arr.length-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span>[] re = quickSort(arr,start,end);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; re.length; i++) &#123;</span><br><span class="line">            System.out.print(re[i] + <span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="number">2</span> <span class="number">3</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">43</span> </span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure><h3 id="6-6-5-ç®—æ³•åˆ†æ"><a href="#6-6-5-ç®—æ³•åˆ†æ" class="headerlink" title="6.6.5 ç®—æ³•åˆ†æ"></a>6.6.5 ç®—æ³•åˆ†æ</h3><p> ==<strong>æœ€ä½³æƒ…å†µï¼šT(n) = O(nlogn)  æœ€å·®æƒ…å†µï¼šT(n) = O(n2)  å¹³å‡æƒ…å†µï¼šT(n) = O(nlogn)</strong>==ã€€ </p><h2 id="6-7-å †æ’åºï¼ˆHeap-Sortï¼‰"><a href="#6-7-å †æ’åºï¼ˆHeap-Sortï¼‰" class="headerlink" title="6.7 å †æ’åºï¼ˆHeap Sortï¼‰"></a>6.7 å †æ’åºï¼ˆHeap Sortï¼‰</h2><h3 id="6-7-1-æ¦‚è¿°"><a href="#6-7-1-æ¦‚è¿°" class="headerlink" title="6.7.1 æ¦‚è¿°"></a>6.7.1 æ¦‚è¿°</h3><p> å †æ’åºï¼ˆHeapsortï¼‰æ˜¯æŒ‡åˆ©ç”¨å †è¿™ç§æ•°æ®ç»“æ„æ‰€è®¾è®¡çš„ä¸€ç§æ’åºç®—æ³•ã€‚å †ç§¯æ˜¯ä¸€ä¸ªè¿‘ä¼¼å®Œå…¨äºŒå‰æ ‘çš„ç»“æ„ï¼Œå¹¶åŒæ—¶æ»¡è¶³å †ç§¯çš„æ€§è´¨ï¼šå³å­ç»“ç‚¹çš„é”®å€¼æˆ–ç´¢å¼•æ€»æ˜¯å°äºï¼ˆæˆ–è€…å¤§äºï¼‰å®ƒçš„çˆ¶èŠ‚ç‚¹ã€‚ </p><h3 id="6-7-2-ç®—æ³•æè¿°"><a href="#6-7-2-ç®—æ³•æè¿°" class="headerlink" title="6.7.2 ç®—æ³•æè¿°"></a>6.7.2 ç®—æ³•æè¿°</h3><ul><li>å°†åˆå§‹å¾…æ’åºå…³é”®å­—åºåˆ—(R1,R2â€¦.Rn)æ„å»ºæˆå¤§é¡¶å †ï¼Œæ­¤å †ä¸ºåˆå§‹çš„æ— åºåŒºï¼› </li><li>å°†å †é¡¶å…ƒç´ R[1]ä¸æœ€åä¸€ä¸ªå…ƒç´ R[n]äº¤æ¢ï¼Œæ­¤æ—¶å¾—åˆ°æ–°çš„æ— åºåŒº(R1,R2,â€¦â€¦Rn-1)å’Œæ–°çš„æœ‰åºåŒº(Rn),ä¸”æ»¡è¶³R[1,2â€¦n-1]&lt;=R[n]ï¼› </li><li>ç”±äºäº¤æ¢åæ–°çš„å †é¡¶R[1]å¯èƒ½è¿åå †çš„æ€§è´¨ï¼Œå› æ­¤éœ€è¦å¯¹å½“å‰æ— åºåŒº(R1,R2,â€¦â€¦Rn-1)è°ƒæ•´ä¸ºæ–°å †ï¼Œç„¶åå†æ¬¡å°†R[1]ä¸æ— åºåŒºæœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢ï¼Œå¾—åˆ°æ–°çš„æ— åºåŒº(R1,R2â€¦.Rn-2)å’Œæ–°çš„æœ‰åºåŒº(Rn-1,Rn)ã€‚ä¸æ–­é‡å¤æ­¤è¿‡ç¨‹ç›´åˆ°æœ‰åºåŒºçš„å…ƒç´ ä¸ªæ•°ä¸ºn-1ï¼Œåˆ™æ•´ä¸ªæ’åºè¿‡ç¨‹å®Œæˆã€‚</li></ul><h3 id="6-7-3-åŠ¨å›¾æ¼”ç¤º"><a href="#6-7-3-åŠ¨å›¾æ¼”ç¤º" class="headerlink" title="6.7.3 åŠ¨å›¾æ¼”ç¤º"></a>6.7.3 åŠ¨å›¾æ¼”ç¤º</h3><p><img src="https://s1.ax1x.com/2020/03/20/8gouOH.gif" alt="8gouOH.gif"></p><h3 id="6-7-4-ä»£ç å®ç°"><a href="#6-7-4-ä»£ç å®ç°" class="headerlink" title="6.7.4 ä»£ç å®ç°"></a>6.7.4 ä»£ç å®ç°</h3><p>==æ³¨æ„ï¼šè¿™é‡Œç”¨åˆ°äº†å®Œå…¨äºŒå‰æ ‘çš„éƒ¨åˆ†æ€§è´¨ã€‚== </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å£°æ˜å…¨å±€å˜é‡ï¼Œç”¨äºè®°å½•æ•°ç»„arrayçš„é•¿åº¦ï¼›</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> len;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å †æ’åºç®—æ³•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] heapSort(<span class="keyword">int</span>[] arr)&#123;</span><br><span class="line">    len = arr.length;</span><br><span class="line">    <span class="keyword">if</span>(len &lt;<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> arr;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//1.æ„å»ºä¸€ä¸ªæœ€å¤§å †</span></span><br><span class="line">    buildMaxHeap(arr);</span><br><span class="line">    <span class="comment">//2.å¾ªç¯å°†å †é¦–ä½ï¼ˆæœ€å¤§å€¼ï¼‰ä¸æœ«ä½äº¤æ¢ï¼Œç„¶ååœ¨é‡æ–°è°ƒæ•´æœ€å¤§å †</span></span><br><span class="line">    <span class="keyword">while</span> (len&gt;<span class="number">0</span>)&#123;</span><br><span class="line">        swap(arr,<span class="number">0</span>,len-<span class="number">1</span>);</span><br><span class="line">        len--;</span><br><span class="line">        adjustHeap(arr,<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">buildMaxHeap</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ä»æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹å‘ä¸Šæ„é€ æœ€å¤§å †</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = (len -<span class="number">1</span>)/<span class="number">2</span>; i &gt;=<span class="number">0</span>; i--) &#123;</span><br><span class="line">        adjustHeap(arr,i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è°ƒæ•´ä½¿ä¹‹æˆä¸ºæœ€å¤§å †</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> i</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">adjustHeap</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> maxIndex = i;</span><br><span class="line">    <span class="comment">//å¦‚æœæœ‰å·¦å­æ ‘ï¼Œä¸”å·¦å­æ ‘å¤§äºçˆ¶èŠ‚ç‚¹ï¼Œåˆ™å°†æœ€å¤§æŒ‡é’ˆæŒ‡å‘å·¦å­æ ‘</span></span><br><span class="line">    <span class="keyword">if</span> (i * <span class="number">2</span> &lt; len &amp;&amp; arr[i * <span class="number">2</span>] &gt; arr[maxIndex])&#123;</span><br><span class="line">        maxIndex = i * <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¦‚æœæœ‰å³å­æ ‘ï¼Œä¸”å³å­æ ‘å¤§äºçˆ¶èŠ‚ç‚¹ï¼Œåˆ™å°†æœ€å¤§æŒ‡é’ˆæŒ‡å‘å³å­æ ‘</span></span><br><span class="line">    <span class="keyword">if</span> (i * <span class="number">2</span> + <span class="number">1</span> &lt; len &amp;&amp; arr[i * <span class="number">2</span> + <span class="number">1</span>] &gt; arr[maxIndex])&#123;</span><br><span class="line">        maxIndex = i * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¦‚æœçˆ¶èŠ‚ç‚¹ä¸æ˜¯æœ€å¤§å€¼ï¼Œåˆ™å°†çˆ¶èŠ‚ç‚¹ä¸æœ€å¤§å€¼äº¤æ¢ï¼Œå¹¶ä¸”é€’å½’è°ƒæ•´ä¸çˆ¶èŠ‚ç‚¹äº¤æ¢çš„ä½ç½®ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (maxIndex != i) &#123;</span><br><span class="line">        swap(arr, maxIndex, i);</span><br><span class="line">        adjustHeap(arr, maxIndex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> temp = arr[i];</span><br><span class="line">    arr[i] = arr[j];</span><br><span class="line">    arr[j] = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•åŠç»“æœï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] arr = &#123;<span class="number">8</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">43</span>, <span class="number">5</span>, <span class="number">9</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span>[] re = heapSort(arr);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; re.length; i++) &#123;</span><br><span class="line">            System.out.print(re[i] + <span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="number">2</span> <span class="number">3</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">43</span> </span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure><h3 id="6-7-5-ç®—æ³•åˆ†æ"><a href="#6-7-5-ç®—æ³•åˆ†æ" class="headerlink" title="6.7.5 ç®—æ³•åˆ†æ"></a>6.7.5 ç®—æ³•åˆ†æ</h3><p> ==<strong>æœ€ä½³æƒ…å†µï¼šT(n) = O(nlogn) æœ€å·®æƒ…å†µï¼šT(n) = O(nlogn) å¹³å‡æƒ…å†µï¼šT(n) = O(nlogn)</strong>==</p><h2 id="6-8-è®¡æ•°æ’åºï¼ˆCounting-Sortï¼‰"><a href="#6-8-è®¡æ•°æ’åºï¼ˆCounting-Sortï¼‰" class="headerlink" title="6.8 è®¡æ•°æ’åºï¼ˆCounting Sortï¼‰"></a>6.8 è®¡æ•°æ’åºï¼ˆCounting Sortï¼‰</h2><h3 id="6-8-1-æ¦‚è¿°"><a href="#6-8-1-æ¦‚è¿°" class="headerlink" title="6.8.1 æ¦‚è¿°"></a>6.8.1 æ¦‚è¿°</h3><p>è®¡æ•°æ’åºçš„æ ¸å¿ƒåœ¨äºå°†è¾“å…¥çš„æ•°æ®å€¼è½¬åŒ–ä¸ºé”®å­˜å‚¨åœ¨é¢å¤–å¼€è¾Ÿçš„æ•°ç»„ç©ºé—´ä¸­ã€‚ä½œä¸ºä¸€ç§çº¿æ€§æ—¶é—´å¤æ‚åº¦çš„æ’åºï¼Œè®¡æ•°æ’åºè¦æ±‚è¾“å…¥çš„æ•°æ®å¿…é¡»æ˜¯æœ‰ç¡®å®šèŒƒå›´çš„æ•´æ•°ã€‚</p><p>è®¡æ•°æ’åº(Counting sort)æ˜¯ä¸€ç§ç¨³å®šçš„æ’åºç®—æ³•ã€‚è®¡æ•°æ’åºä½¿ç”¨ä¸€ä¸ªé¢å¤–çš„æ•°ç»„Cï¼Œå…¶ä¸­ç¬¬iä¸ªå…ƒç´ æ˜¯å¾…æ’åºæ•°ç»„Aä¸­å€¼ç­‰äºiçš„å…ƒç´ çš„ä¸ªæ•°ã€‚ç„¶åæ ¹æ®æ•°ç»„Cæ¥å°†Aä¸­çš„å…ƒç´ æ’åˆ°æ­£ç¡®çš„ä½ç½®ã€‚å®ƒåªèƒ½å¯¹æ•´æ•°è¿›è¡Œæ’åºã€‚</p><h3 id="6-8-2-ç®—æ³•æè¿°"><a href="#6-8-2-ç®—æ³•æè¿°" class="headerlink" title="6.8.2 ç®—æ³•æè¿°"></a>6.8.2 ç®—æ³•æè¿°</h3><ul><li>æ‰¾å‡ºå¾…æ’åºçš„æ•°ç»„ä¸­æœ€å¤§å’Œæœ€å°çš„å…ƒç´ ï¼› </li><li>ç»Ÿè®¡æ•°ç»„ä¸­æ¯ä¸ªå€¼ä¸ºiçš„å…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œå­˜å…¥æ•°ç»„Cçš„ç¬¬ié¡¹ï¼› </li><li>å¯¹æ‰€æœ‰çš„è®¡æ•°ç´¯åŠ ï¼ˆä»Cä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œæ¯ä¸€é¡¹å’Œå‰ä¸€é¡¹ç›¸åŠ ï¼‰ï¼› </li><li>åå‘å¡«å……ç›®æ ‡æ•°ç»„ï¼šå°†æ¯ä¸ªå…ƒç´ iæ”¾åœ¨æ–°æ•°ç»„çš„ç¬¬C(i)é¡¹ï¼Œæ¯æ”¾ä¸€ä¸ªå…ƒç´ å°±å°†C(i)å‡å»1ã€‚ </li></ul><h3 id="6-8-3-åŠ¨å›¾æ¼”ç¤º"><a href="#6-8-3-åŠ¨å›¾æ¼”ç¤º" class="headerlink" title="6.8.3 åŠ¨å›¾æ¼”ç¤º"></a>6.8.3 åŠ¨å›¾æ¼”ç¤º</h3><p><img src="https://s1.ax1x.com/2020/03/20/8gOm59.gif" alt="8gOm59.gif"></p><h3 id="6-8-4-ä»£ç å®ç°"><a href="#6-8-4-ä»£ç å®ç°" class="headerlink" title="6.8.4 ä»£ç å®ç°"></a>6.8.4 ä»£ç å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] countingSort(<span class="keyword">int</span>[] arr)&#123;</span><br><span class="line">    <span class="keyword">if</span>(arr.length == <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> arr;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> bias,min = arr[<span class="number">0</span>],max = arr[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(arr[i]&gt;max)&#123;</span><br><span class="line">            max = arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(arr[i]&lt;min)&#123;</span><br><span class="line">            min = arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    bias = <span class="number">0</span> - min;</span><br><span class="line">    <span class="keyword">int</span>[] bucket = <span class="keyword">new</span> <span class="keyword">int</span>[max - min +<span class="number">1</span>];</span><br><span class="line">    Arrays.fill(bucket,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        bucket[arr[i]+bias]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> index = <span class="number">0</span>,i =<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (index&lt;arr.length)&#123;</span><br><span class="line">        <span class="keyword">if</span>(bucket[i]!=<span class="number">0</span>)&#123;</span><br><span class="line">            arr[index] = i -bias;</span><br><span class="line">            bucket[i]--;</span><br><span class="line">            index++;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•åŠç»“æœï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] arr = &#123;<span class="number">8</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">43</span>, <span class="number">5</span>, <span class="number">9</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span>[] re = countingSort(arr);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; re.length; i++) &#123;</span><br><span class="line">            System.out.print(re[i] + <span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="number">2</span> <span class="number">3</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">43</span> </span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure><h3 id="6-8-5-ç®—æ³•åˆ†æ"><a href="#6-8-5-ç®—æ³•åˆ†æ" class="headerlink" title="6.8.5 ç®—æ³•åˆ†æ"></a>6.8.5 ç®—æ³•åˆ†æ</h3><p>å½“è¾“å…¥çš„å…ƒç´ æ˜¯n ä¸ª0åˆ°kä¹‹é—´çš„æ•´æ•°æ—¶ï¼Œå®ƒçš„è¿è¡Œæ—¶é—´æ˜¯ O(n + k)ã€‚è®¡æ•°æ’åºä¸æ˜¯æ¯”è¾ƒæ’åºï¼Œæ’åºçš„é€Ÿåº¦å¿«äºä»»ä½•æ¯”è¾ƒæ’åºç®—æ³•ã€‚ç”±äºç”¨æ¥è®¡æ•°çš„æ•°ç»„Cçš„é•¿åº¦å–å†³äºå¾…æ’åºæ•°ç»„ä¸­æ•°æ®çš„èŒƒå›´ï¼ˆç­‰äºå¾…æ’åºæ•°ç»„çš„æœ€å¤§å€¼ä¸æœ€å°å€¼çš„å·®åŠ ä¸Š1ï¼‰ï¼Œè¿™ä½¿å¾—è®¡æ•°æ’åºå¯¹äºæ•°æ®èŒƒå›´å¾ˆå¤§çš„æ•°ç»„ï¼Œéœ€è¦å¤§é‡æ—¶é—´å’Œå†…å­˜ã€‚ </p><p> ==<strong>æœ€ä½³æƒ…å†µï¼šT(n) = O(n+k)  æœ€å·®æƒ…å†µï¼šT(n) = O(n+k)  å¹³å‡æƒ…å†µï¼šT(n) = O(n+k)</strong>== </p><h2 id="6-9-æ¡¶æ’åºï¼ˆBucket-Sortï¼‰"><a href="#6-9-æ¡¶æ’åºï¼ˆBucket-Sortï¼‰" class="headerlink" title="6.9 æ¡¶æ’åºï¼ˆBucket Sortï¼‰"></a>6.9 æ¡¶æ’åºï¼ˆBucket Sortï¼‰</h2><h3 id="6-9-1-æ¦‚è¿°"><a href="#6-9-1-æ¦‚è¿°" class="headerlink" title="6.9.1 æ¦‚è¿°"></a>6.9.1 æ¦‚è¿°</h3><p>æ¡¶æ’åºæ˜¯è®¡æ•°æ’åºçš„å‡çº§ç‰ˆã€‚å®ƒåˆ©ç”¨äº†å‡½æ•°çš„æ˜ å°„å…³ç³»ï¼Œé«˜æ•ˆä¸å¦çš„å…³é”®å°±åœ¨äºè¿™ä¸ªæ˜ å°„å‡½æ•°çš„ç¡®å®šã€‚</p><p>æ¡¶æ’åº (Bucket sort)çš„å·¥ä½œçš„åŸç†ï¼šå‡è®¾è¾“å…¥æ•°æ®æœä»å‡åŒ€åˆ†å¸ƒï¼Œå°†æ•°æ®åˆ†åˆ°æœ‰é™æ•°é‡çš„æ¡¶é‡Œï¼Œæ¯ä¸ªæ¡¶å†åˆ†åˆ«æ’åºï¼ˆæœ‰å¯èƒ½å†ä½¿ç”¨åˆ«çš„æ’åºç®—æ³•æˆ–æ˜¯ä»¥é€’å½’æ–¹å¼ç»§ç»­ä½¿ç”¨æ¡¶æ’åºè¿›è¡Œæ’ã€‚</p><h3 id="6-9-2-ç®—æ³•æè¿°"><a href="#6-9-2-ç®—æ³•æè¿°" class="headerlink" title="6.9.2 ç®—æ³•æè¿°"></a>6.9.2 ç®—æ³•æè¿°</h3><ul><li><p>äººä¸ºè®¾ç½®ä¸€ä¸ªBucketSizeï¼Œä½œä¸ºæ¯ä¸ªæ¡¶æ‰€èƒ½æ”¾ç½®å¤šå°‘ä¸ªä¸åŒæ•°å€¼ï¼ˆä¾‹å¦‚å½“BucketSize==5æ—¶ï¼Œè¯¥æ¡¶å¯ä»¥å­˜æ”¾ï½›1,2,3,4,5ï½è¿™å‡ ç§æ•°å­—ï¼Œä½†æ˜¯å®¹é‡ä¸é™ï¼Œå³å¯ä»¥å­˜æ”¾100ä¸ª3ï¼‰ï¼› </p></li><li><p>éå†è¾“å…¥æ•°æ®ï¼Œå¹¶ä¸”æŠŠæ•°æ®ä¸€ä¸ªä¸€ä¸ªæ”¾åˆ°å¯¹åº”çš„æ¡¶é‡Œå»ï¼› </p></li><li><p>å¯¹æ¯ä¸ªä¸æ˜¯ç©ºçš„æ¡¶è¿›è¡Œæ’åºï¼Œå¯ä»¥ä½¿ç”¨å…¶å®ƒæ’åºæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥é€’å½’ä½¿ç”¨æ¡¶æ’åºï¼› </p></li><li><p>ä»ä¸æ˜¯ç©ºçš„æ¡¶é‡ŒæŠŠæ’å¥½åºçš„æ•°æ®æ‹¼æ¥èµ·æ¥ã€‚  </p><p><strong>æ³¨æ„ï¼Œå¦‚æœé€’å½’ä½¿ç”¨æ¡¶æ’åºä¸ºå„ä¸ªæ¡¶æ’åºï¼Œåˆ™å½“æ¡¶æ•°é‡ä¸º1æ—¶è¦æ‰‹åŠ¨å‡å°BucketSizeå¢åŠ ä¸‹ä¸€å¾ªç¯æ¡¶çš„æ•°é‡ï¼Œå¦åˆ™ä¼šé™·å…¥æ­»å¾ªç¯ï¼Œå¯¼è‡´å†…å­˜æº¢å‡ºã€‚</strong> </p></li></ul><h3 id="6-9-3-å›¾ç‰‡æ¼”ç¤º"><a href="#6-9-3-å›¾ç‰‡æ¼”ç¤º" class="headerlink" title="6.9.3 å›¾ç‰‡æ¼”ç¤º"></a>6.9.3 å›¾ç‰‡æ¼”ç¤º</h3><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28RgPBKvBRIiaribLhcBenhoVWvXPkViccgjmetibPRUWzib63lYHH8rBqbR2NBUkMCLTYExtVbXOnJMEsg/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p><h3 id="6-9-4-ä»£ç å®ç°"><a href="#6-9-4-ä»£ç å®ç°" class="headerlink" title="6.9.4 ä»£ç å®ç°"></a>6.9.4 ä»£ç å®ç°</h3>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> æ’åºç®—æ³•æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ’åºç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RIPv2æŠ¥æ–‡åˆ†æ</title>
      <link href="/2020/03/16/RIPv2%E6%8A%A5%E6%96%87%E5%88%86%E6%9E%90/"/>
      <url>/2020/03/16/RIPv2%E6%8A%A5%E6%96%87%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="1-æ‹“æ‰‘å›¾"><a href="#1-æ‹“æ‰‘å›¾" class="headerlink" title="1.æ‹“æ‰‘å›¾"></a>1.æ‹“æ‰‘å›¾</h1><p><img src="https://s1.ax1x.com/2020/03/16/8GVlV0.png" alt="8GVlV0.png"></p><h1 id="2-é…ç½®æ€è·¯"><a href="#2-é…ç½®æ€è·¯" class="headerlink" title="2.é…ç½®æ€è·¯"></a>2.é…ç½®æ€è·¯</h1><ol><li>é…ç½®å„æ¥å£IPåœ°å€ï¼Œä½¿ç½‘ç»œå¯è¾¾ã€‚</li><li>åœ¨å„è·¯ç”±å™¨ä¸Šä½¿èƒ½RIPï¼ŒåŸºæœ¬å®ç°ç½‘ç»œäº’è”ã€‚ </li><li>åœ¨å„è·¯ç”±å™¨ä¸Šé…ç½®RIPv2ç‰ˆæœ¬ï¼Œæå‡RIPè·¯ç”±æ‰©å±•æ€§èƒ½ã€‚</li><li>ä½¿AR1æ¥æ”¶åˆ°çš„RIPè·¯ç”±çš„åº¦é‡å€¼åŠ å¤§5. </li></ol><h1 id="3-æ“ä½œé…ç½®"><a href="#3-æ“ä½œé…ç½®" class="headerlink" title="3.æ“ä½œé…ç½®"></a>3.æ“ä½œé…ç½®</h1><h2 id="3-1-é…ç½®AR1-AR2-AR3-AR4-ç›´è¿æ¥å£ipåœ°å€å’Œå›ç¯ipåœ°å€"><a href="#3-1-é…ç½®AR1-AR2-AR3-AR4-ç›´è¿æ¥å£ipåœ°å€å’Œå›ç¯ipåœ°å€" class="headerlink" title="3.1 é…ç½®AR1,AR2,AR3,AR4,ç›´è¿æ¥å£ipåœ°å€å’Œå›ç¯ipåœ°å€"></a>3.1 é…ç½®AR1,AR2,AR3,AR4,ç›´è¿æ¥å£ipåœ°å€å’Œå›ç¯ipåœ°å€</h2><ul><li><h3 id="AR1é…ç½®"><a href="#AR1é…ç½®" class="headerlink" title="AR1é…ç½®"></a>AR1é…ç½®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;system-view</span><br><span class="line">sysname R1</span><br><span class="line"></span><br><span class="line">[R1]interface GigabitEthernet 0/0/0    //è¿›å…¥g0/0/0æ¥å£</span><br><span class="line">[R1-GigabitEthernet0/0/0]ip address 10.1.12.1 24   //é…ç½®æ¥å£ip</span><br><span class="line">[R1-GigabitEthernet0/0/0]quit</span><br><span class="line">[R1]interface loopback 0 </span><br><span class="line">[R1-loopback0]ip address 10.1.1.1 32   //é…ç½®loopback 0 å›ç¯ipåœ°å€</span><br><span class="line">[R1-loopback0]quit</span><br></pre></td></tr></table></figure></li><li><h3 id="AR2é…ç½®"><a href="#AR2é…ç½®" class="headerlink" title="AR2é…ç½®"></a>AR2é…ç½®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;system-view</span><br><span class="line">sysname R2</span><br><span class="line"></span><br><span class="line">[R2]interface GigabitEthernet 0/0/0    //è¿›å…¥g0/0/0æ¥å£</span><br><span class="line">[R2-GigabitEthernet0/0/0]ip address 10.1.12.2 24   //é…ç½®æ¥å£ip</span><br><span class="line">[R2-GigabitEthernet0/0/0]quit</span><br><span class="line">[R2]interface GigabitEthernet 0/0/1    </span><br><span class="line">[R2-GigabitEthernet0/0/1]ip address 10.1.23.2 24  //é…ç½®æ¥å£ip</span><br><span class="line">[R2-GigabitEthernet0/0/1]quit</span><br><span class="line">[R2]interface GigabitEthernet 0/0/2    </span><br><span class="line">[R2-GigabitEthernet0/0/2]ip address 10.1.24.2 24   //é…ç½®æ¥å£ip</span><br><span class="line">[R2-GigabitEthernet0/0/2]quit</span><br><span class="line">[R2]interface loopback 0 </span><br><span class="line">[R2-loopback0]ip address 10.1.2.2 32   //é…ç½®loopback 0 å›ç¯ipåœ°å€</span><br><span class="line">[R2-loopback0]quit</span><br></pre></td></tr></table></figure></li><li><h3 id="AR3é…ç½®"><a href="#AR3é…ç½®" class="headerlink" title="AR3é…ç½®"></a>AR3é…ç½®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;system-view</span><br><span class="line">sysname R3</span><br><span class="line"></span><br><span class="line">[R3]interface GigabitEthernet 0/0/0    //è¿›å…¥g0/0/0æ¥å£</span><br><span class="line">[R3-GigabitEthernet0/0/0]ip address 10.1.23.13 24   //é…ç½®æ¥å£ip</span><br><span class="line">[R3-GigabitEthernet0/0/0]quit</span><br><span class="line">[R3]interface loopback 0 </span><br><span class="line">[R3-loopback0]ip address 10.1.3.3 32   //é…ç½®loopback 0 å›ç¯ipåœ°å€</span><br><span class="line">[R3-loopback0]quit</span><br></pre></td></tr></table></figure></li><li><h3 id="AR4é…ç½®"><a href="#AR4é…ç½®" class="headerlink" title="AR4é…ç½®"></a>AR4é…ç½®</h3></li></ul><a id="more"></a><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;system-view</span><br><span class="line">sysname R4</span><br><span class="line"></span><br><span class="line">[R4]interface GigabitEthernet 0/0/0    //è¿›å…¥g0/0/0æ¥å£</span><br><span class="line">[R4-GigabitEthernet0/0/0]ip address 10.1.24.4 24   //é…ç½®æ¥å£ip</span><br><span class="line">[R4-GigabitEthernet0/0/0]quit</span><br><span class="line">[R4]interface loopback 0 </span><br><span class="line">[R4-loopback0]ip address 10.1.4.4 32   //é…ç½®loopback 0 å›ç¯ipåœ°å€</span><br><span class="line">[R4-loopback0]quit</span><br></pre></td></tr></table></figure><h2 id="3-2åœ¨AR1-AR2-AR3-AR4-ä¸Šé…ç½®RIPåŸºæœ¬åŠŸèƒ½"><a href="#3-2åœ¨AR1-AR2-AR3-AR4-ä¸Šé…ç½®RIPåŸºæœ¬åŠŸèƒ½" class="headerlink" title="3.2åœ¨AR1,AR2,AR3,AR4,ä¸Šé…ç½®RIPåŸºæœ¬åŠŸèƒ½"></a>3.2åœ¨AR1,AR2,AR3,AR4,ä¸Šé…ç½®RIPåŸºæœ¬åŠŸèƒ½</h2><ul><li><h3 id="AR1é…ç½®-1"><a href="#AR1é…ç½®-1" class="headerlink" title="AR1é…ç½®"></a>AR1é…ç½®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[R1]rip    //è¿›å…¥RIPè¿›ç¨‹</span><br><span class="line">[R1-rip-1]version 2     //æŒ‡å®šRIPv2</span><br><span class="line">[R1-rip-1]network 10.0.0.0     //æŒ‡å®šç½‘æ®µæ¥å£ä½¿èƒ½RIPè·¯ç”±</span><br><span class="line">[R1-rip-1]quit</span><br></pre></td></tr></table></figure></li><li><h3 id="AR2é…ç½®-1"><a href="#AR2é…ç½®-1" class="headerlink" title="AR2é…ç½®"></a>AR2é…ç½®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[R2]rip    //è¿›å…¥RIPè¿›ç¨‹</span><br><span class="line">[R2-rip-1]version 2     //æŒ‡å®šRIPv2</span><br><span class="line">[R2-rip-1]network 10.0.0.0     //æŒ‡å®šç½‘æ®µæ¥å£ä½¿èƒ½RIPè·¯ç”±</span><br><span class="line">[R2-rip-1]quit</span><br></pre></td></tr></table></figure></li><li><h3 id="AR3é…ç½®-1"><a href="#AR3é…ç½®-1" class="headerlink" title="AR3é…ç½®"></a>AR3é…ç½®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[R3]rip    //è¿›å…¥RIPè¿›ç¨‹</span><br><span class="line">[R3-rip-1]version 2     //æŒ‡å®šRIPv2</span><br><span class="line">[R3-rip-1]network 10.0.0.0     //æŒ‡å®šç½‘æ®µæ¥å£ä½¿èƒ½RIPè·¯ç”±</span><br><span class="line">[R3-rip-1]quit</span><br></pre></td></tr></table></figure></li><li><h3 id="AR4é…ç½®-1"><a href="#AR4é…ç½®-1" class="headerlink" title="AR4é…ç½®"></a>AR4é…ç½®</h3></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[R4]rip    //è¿›å…¥RIPè¿›ç¨‹</span><br><span class="line">[R4-rip-1]version 2     //æŒ‡å®šRIPv2</span><br><span class="line">[R4-rip-1]network 10.0.0.0     //æŒ‡å®šç½‘æ®µæ¥å£ä½¿èƒ½RIPè·¯ç”±</span><br><span class="line">[R4-rip-1]quit</span><br></pre></td></tr></table></figure><h2 id="3-3æŸ¥çœ‹è·¯ç”±è¡¨"><a href="#3-3æŸ¥çœ‹è·¯ç”±è¡¨" class="headerlink" title="3.3æŸ¥çœ‹è·¯ç”±è¡¨"></a>3.3æŸ¥çœ‹è·¯ç”±è¡¨</h2><ol><li><p>åœ¨AR1ä¸ŠæŸ¥çœ‹è·¯ç”±è¡¨ä¿¡æ¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">display rip 1 route</span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2020/03/16/8GtF61.png" alt="8GtF61.png"></p></li><li><p>ä¿®æ”¹åº¦é‡å€¼</p><p>ä½¿AR1æ¥å—åˆ°çš„RIPè·¯ç”±åº¦é‡å€¼å¢å¤§5ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">interface gigabitrthernet 0/0/0</span><br><span class="line">rip metricin 5</span><br><span class="line">quit</span><br></pre></td></tr></table></figure></li><li><p>å†æ¬¡æŸ¥çœ‹è·¯ç”±è¡¨ä¿¡æ¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">display rip 1 route</span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2020/03/16/8GNEgs.png" alt="8GNEgs.png"></p></li></ol><h2 id="3-4Ripv2æŠ¥æ–‡åˆ†æ"><a href="#3-4Ripv2æŠ¥æ–‡åˆ†æ" class="headerlink" title="3.4Ripv2æŠ¥æ–‡åˆ†æ"></a>3.4Ripv2æŠ¥æ–‡åˆ†æ</h2><p>R1 Ping R4åœ¨AR4çš„GE0/0/0ç«¯å£æ•è·æŠ¥æ–‡å¦‚ä¸‹ï¼š</p><p><img src="/2020/03/16/RIPv2%E6%8A%A5%E6%96%87%E5%88%86%E6%9E%90/C:%5CUsers%5C12173%5CDesktop%5Cimage%5CRipv2.png" alt="Ripv2"></p><p>å…·ä½“æŠ¥æ–‡å†…å®¹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://s1.ax1x.com/2020/03/16/8GwjmR.png" alt="8GwjmR.png"></p><p>commandå­—æ®µï¼šå 1ä¸ªå­—èŠ‚ï¼Œå–å€¼ä¸º2æ—¶è¡¨ç¤ºè¯¥æŠ¥æ–‡æ˜¯ä¸€ä¸ªå›åº”æŠ¥æ–‡ã€‚å…¶ä¸­åŒ…å«è·¯ç”±ä¿¡æ¯ã€‚</p><p>versionå­—æ®µï¼šå 1ä¸ªå­—èŠ‚ï¼Œå–å€¼ä¸º2æ—¶è¡¨ç¤ºRIPv2ã€‚</p><p>address Familyå­—æ®µï¼šå 2ä¸ªå­—èŠ‚ï¼Œipv4å–å€¼ä¸º2ã€‚</p><p>route tagå­—æ®µï¼šå 2ä¸ªå­—èŠ‚ï¼Œæ ‡è®°å¤–éƒ¨é‡åˆ†å‘è¿›RIPv2ä¸­çš„è·¯ç”±</p><p>ip addresså­—æ®µï¼šå 4ä¸ªå­—èŠ‚ï¼Œè¡¨ç¤ºè·¯ç”±çš„ç›®çš„åœ°å€ï¼Œè¯¥åœ°å€æ˜¯ç½‘ç»œåœ°å€ã€‚</p><p>netmaskå­—æ®µï¼šå 4ä¸ªå­—èŠ‚ï¼Œæ˜¯å­ç½‘æ©ç ï¼ŒRIPv2æ˜¯æœ‰ç±»åˆ«çš„ï¼Œæ‰€ä»¥æœ‰è¿™ä¸ªå­—æ®µã€‚</p><p>next hopå­—æ®µï¼šå 4ä¸ªå­—èŠ‚ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªæ¯”é€šå‘Šè·¯ç”±å™¨çš„åœ°å€æ›´å¥½çš„ä¸‹ä¸€è·³ã€‚å¦‚æœè¿™ä¸ªå­—æ®µè®¾ç½®ä¸º0.0.0.0è¯´æ˜é€šå‘Šè·¯ç”±å™¨çš„åœ°å€å°±æ˜¯æœ€ä¼˜çš„ä¸‹ä¸€è·³ã€‚</p><p>metricå­—æ®µï¼šå 4ä¸ªå­—èŠ‚ï¼ŒæŒ‡åº¦é‡å€¼ï¼Œåœ¨RIPä¸­å°±æ˜¯è·³æ•°ã€‚</p><h2 id="3-5Ripv2å’ŒRipv1çš„åŒºåˆ«"><a href="#3-5Ripv2å’ŒRipv1çš„åŒºåˆ«" class="headerlink" title="3.5Ripv2å’ŒRipv1çš„åŒºåˆ«"></a>3.5Ripv2å’ŒRipv1çš„åŒºåˆ«</h2><p> <strong>åŒºåˆ«ä¸€ï¼š</strong>RIP1æ˜¯ä¸€ä¸ªæœ‰ç±»è·¯ç”±åè®®ï¼Œå³æ‰€æœ‰çš„æ›´æ–°åŒ…ä¸­ä¸å«å­ç½‘æ©ç ï¼Œä¸æ”¯æŒVLSMï¼Œ æ‰€ä»¥å°±è¦æ±‚ç½‘ç»œä¸­æ‰€æœ‰è®¾å¤‡å¿…é¡»ä½¿ç”¨ç›¸åŒçš„å­ç½‘æ©ç ï¼Œå¦åˆ™å°±ä¼šå‡ºé”™ï¼Œè€ŒRIP2æ˜¯ä¸€ä¸ªæ— ç±»çš„è·¯ç”±åè®®ï¼Œå®ƒä½¿ç”¨å­ç½‘æ©ç ã€‚<br><strong>åŒºåˆ«äºŒï¼š</strong>ç¬¬äºŒä¸ªä¸åŒçš„åœ°æ–¹æ˜¯RIP1<em>æ˜¯å‘é€æ›´æ–°åŒ…çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯*</em>å¹¿æ’­åŒ…<strong>ï¼Œè€ŒRIP2é»˜è®¤ä½¿ç”¨çš„æ˜¯</strong>ç»„æ’­<strong>224.0.0.9ï¼Œä¹Ÿæ”¯æŒå¹¿æ’­å‘é€ï¼Œè¿™æ ·ç›¸å¯¹äºRIP1æ¥è¯´å°±èŠ‚çœäº†ä¸€éƒ¨åˆ†ç½‘ç»œå¸¦å®½ã€‚<br>**åŒºåˆ«ä¸‰ï¼š</strong>ç¬¬ä¸‰ä¸ªå°±æ˜¯RIP2æ”¯æŒæ˜æ–‡æˆ–è€…æ˜¯ MD5éªŒè¯ï¼Œè¦æ±‚ä¸¤å°è·¯ç”±å™¨åœ¨åŒæ­¥è·¯ç”±è¡¨çš„æ—¶å€™å¿…é¡»è¿›è¡ŒéªŒè¯ï¼Œé€šè¿‡æ‰å¯ä»¥è¿›è¡Œè·¯ç”±åŒæ­¥ï¼Œè¿™æ ·å¯ä»¥åŠ å¼ºå®‰å…¨æ€§ã€‚ </p><p><strong>è¡¥å……</strong></p><h2 id="3-6Ripv2é…ç½®MD5éªŒè¯"><a href="#3-6Ripv2é…ç½®MD5éªŒè¯" class="headerlink" title="3.6Ripv2é…ç½®MD5éªŒè¯"></a>3.6Ripv2é…ç½®MD5éªŒè¯</h2><p>åœ¨å„ä¸ªè·¯ç”±å™¨çš„ç›¸åº”ç«¯å£ä¸Šé…ç½®å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rip authentication-mode md5 usual abc</span><br></pre></td></tr></table></figure><p>AR3 Ping AR4æ—¶åœ¨AR2çš„GE0/0/2ç«¯å£æ•è·æŠ¥æ–‡å¦‚ä¸‹ï¼š</p><p><img src="https://s1.ax1x.com/2020/03/16/8G74Ff.png" alt="8G74Ff.png"></p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå·¥ç¨‹è®¾è®¡ </category>
          
          <category> RIPv2æŠ¥æ–‡åˆ†æ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå·¥ç¨‹è®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é™æ€è·¯ç”±åŠé»˜è®¤è·¯ç”±é…ç½®</title>
      <link href="/2020/03/09/%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E5%8F%8A%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE%E5%88%86%E6%9E%90/"/>
      <url>/2020/03/09/%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E5%8F%8A%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€é™æ€è·¯ç”±åŠé»˜è®¤è·¯ç”±é…ç½®"><a href="#ä¸€ã€é™æ€è·¯ç”±åŠé»˜è®¤è·¯ç”±é…ç½®" class="headerlink" title="ä¸€ã€é™æ€è·¯ç”±åŠé»˜è®¤è·¯ç”±é…ç½®"></a>ä¸€ã€é™æ€è·¯ç”±åŠé»˜è®¤è·¯ç”±é…ç½®</h1><h2 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1.æ¦‚è¿°"></a>1.æ¦‚è¿°</h2><ul><li><p><strong>é™æ€è·¯ç”±ï¼š</strong> æ˜¯æŒ‡ç”¨æˆ·æˆ–ç½‘ç»œç®¡ç†å‘˜æ‰‹å·¥é…ç½®çš„è·¯ç”±ä¿¡æ¯ã€‚å½“ç½‘ç»œæ‹“æ‰‘ç»“æ„æˆ–é“¾è·¯çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œéœ€è¦ç½‘ç»œç®¡ç†å‘˜æ‰‹å·¥é…ç½®é™æ€è·¯ç”±ä¿¡æ¯ã€‚</p><p><strong>é™æ€è·¯ç”±ä¼˜ç¼ºç‚¹ï¼š</strong>  ç›¸æ¯”è¾ƒåŠ¨æ€è·¯ç”±åè®®ï¼Œé™æ€è·¯ç”±æ— éœ€é¢‘ç¹çš„äº¤æ¢å„è‡ªçš„è·¯ç”±è¡¨ï¼Œé…ç½®ç®€å•ï¼Œæ¯”è¾ƒé€‚åˆå°å‹ã€ç®€å•çš„ç½‘ç»œç¯å¢ƒã€‚ä¸é€‚åˆå¤§å‹å’Œå¤æ‚çš„ç½‘ç»œç¯å¢ƒçš„åŸå› æ˜¯ï¼šå½“ç½‘ç»œæ‹“æ‰‘ç»“æ„å’Œé“¾è·¯çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œç½‘ç»œç®¡ç†å‘˜éœ€è¦åšå¤§é‡çš„è°ƒæ•´ï¼Œå·¥ä½œé‡ç¹é‡ï¼Œè€Œä¸”æ— æ³•æ„ŸçŸ¥é”™è¯¯å‘ç”Ÿï¼Œä¸æ˜“æ’é”™ã€‚ </p></li><li><p><strong>é»˜è®¤è·¯ç”±ï¼š</strong> æ˜¯ä¸€ç§ç‰¹æ®Šçš„é™æ€è·¯ç”±ï¼Œå½“è·¯ç”±è¡¨ä¸­ä¸æ•°æ®åŒ…ç›®çš„åœ°å€æ²¡æœ‰åŒ¹é…çš„è¡¨é¡¹æ—¶ï¼Œæ•°æ®åŒ…å°†æ ¹æ®é»˜è®¤è·¯ç”±æ¡ç›®è¿›è¡Œè½¬å‘ã€‚é»˜è®¤è·¯ç”±åœ¨æŸäº›æ—¶å€™æ˜¯éå¸¸æœ‰æ•ˆçš„ï¼Œä¾‹å¦‚åœ¨æœ«æ¢¢ç½‘ç»œä¸­ï¼Œé»˜è®¤è·¯ç”±å¯ä»¥å¤§å¤§ç®€åŒ–è·¯ç”±å™¨çš„é…ç½®ï¼Œå‡è½»ç½‘ç»œç®¡ç†å‘˜çš„å·¥ä½œè´Ÿæ‹…ã€‚ </p></li></ul><a id="more"></a><h2 id="2-å®éªŒç›®çš„"><a href="#2-å®éªŒç›®çš„" class="headerlink" title="2.å®éªŒç›®çš„"></a>2.å®éªŒç›®çš„</h2><ul><li>æŒæ¡é™æ€è·¯ç”±çš„é…ç½®æ–¹æ³•ã€‚</li><li>æŒæ¡é»˜è®¤è·¯ç”±çš„é…ç½®æ–¹æ³•ã€‚</li></ul><h2 id="3-å®éªŒæ‹“æ‰‘"><a href="#3-å®éªŒæ‹“æ‰‘" class="headerlink" title="3.å®éªŒæ‹“æ‰‘"></a>3.å®éªŒæ‹“æ‰‘</h2><p><img src="https://s2.ax1x.com/2020/03/08/3zg9HS.png" alt="3zg9HS.png"></p><h2 id="4-å®éªŒæ­¥éª¤"><a href="#4-å®éªŒæ­¥éª¤" class="headerlink" title="4.å®éªŒæ­¥éª¤"></a>4.å®éªŒæ­¥éª¤</h2><h3 id="4-1é…ç½®PCAã€PCBçš„IPã€æ©ç åŠç½‘å…³ã€‚"><a href="#4-1é…ç½®PCAã€PCBçš„IPã€æ©ç åŠç½‘å…³ã€‚" class="headerlink" title="4.1é…ç½®PCAã€PCBçš„IPã€æ©ç åŠç½‘å…³ã€‚"></a>4.1é…ç½®PCAã€PCBçš„IPã€æ©ç åŠç½‘å…³ã€‚</h3><p>å¦‚æ‹“æ‰‘å›¾ä¸­æ‰€ç¤º</p><h3 id="4-2åœ¨S1äº¤æ¢æœºä¸Šåˆ’åˆ†vlané…ç½®è™šæ¥å£"><a href="#4-2åœ¨S1äº¤æ¢æœºä¸Šåˆ’åˆ†vlané…ç½®è™šæ¥å£" class="headerlink" title="4.2åœ¨S1äº¤æ¢æœºä¸Šåˆ’åˆ†vlané…ç½®è™šæ¥å£"></a>4.2åœ¨S1äº¤æ¢æœºä¸Šåˆ’åˆ†vlané…ç½®è™šæ¥å£</h3><p><strong>è¦æ±‚ï¼švlan1åŒ…æ‹¬ç«¯å£E0/1åˆ°E0/22ï¼Œvlan2åŒ…æ‹¬ç«¯å£E0/23åˆ°E0/24</strong></p><p>é…ç½®å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;Huawei&gt;system-view</span></span><br><span class="line"><span class="attr">sysname</span> <span class="string">S1</span></span><br><span class="line"><span class="meta">[S1]vlan</span> <span class="string">batch 1 2</span></span><br><span class="line"></span><br><span class="line"><span class="meta">[S1]interface</span> <span class="string">GigabitEthernet 0/0/23</span></span><br><span class="line"><span class="meta">[S1-GigabitEthernet0/0/23]port</span> <span class="string">link-type trunk</span></span><br><span class="line"><span class="meta">[S1-GigabitEthernet0/0/23]port</span> <span class="string">trunk allow-pass vlan 2</span></span><br><span class="line"></span><br><span class="line"><span class="meta">[S1]interface</span> <span class="string">GigabitEthernet 0/0/24</span></span><br><span class="line"><span class="meta">[S1-GigabitEthernet0/0/24]port</span> <span class="string">link-type trunk</span></span><br><span class="line"><span class="meta">[S1-GigabitEthernet0/0/24]port</span> <span class="string">trunk allow-pass vlan 2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">[S1]interface</span> <span class="string">GigabitEthernet 0/0/1</span></span><br><span class="line"><span class="meta">[S1-GigabitEthernet0/0/1]port</span> <span class="string">link-type access</span></span><br><span class="line"><span class="meta">[S1-GigabitEthernet0/0/1]port</span> <span class="string">default vlan 3</span></span><br><span class="line"></span><br><span class="line"><span class="meta">[S1]interface</span> <span class="string">GigabitEthernet 0/0/2</span></span><br><span class="line"><span class="meta">[S1-GigabitEthernet0/0/2]port</span> <span class="string">link-type access</span></span><br><span class="line"><span class="meta">[S1-GigabitEthernet0/0/2]port</span> <span class="string">default vlan 3</span></span><br><span class="line"></span><br><span class="line"><span class="meta">[S1]interface</span> <span class="string">vlanif 2</span></span><br><span class="line"><span class="meta">[S1-Vlanif</span> <span class="string">2]ip address 192.168.1.1 24</span></span><br><span class="line"></span><br><span class="line"><span class="meta">[S1]interface</span> <span class="string">vlanif 3</span></span><br><span class="line"><span class="meta">[S1-Vlanif</span> <span class="string">2]ip address 192.168.2.1 24</span></span><br></pre></td></tr></table></figure><p>é…ç½®å®Œæˆåç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://s2.ax1x.com/2020/03/08/3zgnBT.png" alt="3zgnBT.png"></p><h3 id="4-3åœ¨R1ä¸Šé…ç½®ç«¯å£ipå’Œé™æ€è·¯ç”±"><a href="#4-3åœ¨R1ä¸Šé…ç½®ç«¯å£ipå’Œé™æ€è·¯ç”±" class="headerlink" title="4.3åœ¨R1ä¸Šé…ç½®ç«¯å£ipå’Œé™æ€è·¯ç”±"></a>4.3åœ¨R1ä¸Šé…ç½®ç«¯å£ipå’Œé™æ€è·¯ç”±</h3><p>åœ¨R1 GE0/0/0ç«¯å£ä¸Šé…ç½®ipä¸º192.168.1.2/24</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[R1]interface</span> <span class="string">GigabitEthernet 0/0/0</span></span><br><span class="line"><span class="meta">[R1-GigabitEthernet0/0/0]ip</span> <span class="string">address 192.168.1.2 24</span></span><br></pre></td></tr></table></figure><ul><li><h5 id="é…ç½®é™æ€è·¯ç”±"><a href="#é…ç½®é™æ€è·¯ç”±" class="headerlink" title="é…ç½®é™æ€è·¯ç”±"></a>é…ç½®é™æ€è·¯ç”±</h5></li></ul><p><img src="https://s2.ax1x.com/2020/03/08/3zgQN4.png" alt="3zgQN4.png"></p><p>æŸ¥çœ‹è·¯ç”±è¡¨ï¼š</p><p><img src="https://s2.ax1x.com/2020/03/08/3zgUHO.png" alt="3zgUHO.png"></p><p>æµ‹è¯•ï¼špcApingR1</p><p><img src="https://s2.ax1x.com/2020/03/08/3z2roF.png" alt="3z2roF.png"></p><p>â€‹    åœ¨è·¯ç”±å™¨GE0/0/0ç«¯å£æ•è·æŠ¥æ–‡å¦‚ä¸‹ï¼š</p><p><img src="https://s2.ax1x.com/2020/03/08/3zR4cn.png" alt="3zR4cn.png"></p><ul><li><h5 id="é…ç½®é»˜è®¤è·¯ç”±"><a href="#é…ç½®é»˜è®¤è·¯ç”±" class="headerlink" title="é…ç½®é»˜è®¤è·¯ç”±"></a>é…ç½®é»˜è®¤è·¯ç”±</h5><p>åˆ é™¤åˆšæ‰é…ç½®çš„é™æ€è·¯ç”±ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">undo</span> <span class="string">ip route-static 192.168.2.0 255.255.255.0 192.168.1.1</span></span><br></pre></td></tr></table></figure><p>å¯¹R1é…ç½®ç¼ºçœè·¯ç”±ã€‚</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[R1]</span> <span class="string">IP route-static 0.0.0.0  0.0.0.0 192.168.1.1</span></span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹è·¯ç”±è¡¨ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://s2.ax1x.com/2020/03/08/3zWcK1.png" alt="3zWcK1.png"></p></li></ul><p>æµ‹è¯•:</p><p>R1pingPCA:</p><p><img src="https://s2.ax1x.com/2020/03/08/3zfAaT.png" alt="3zfAaT.png"></p><p><strong>é—®é¢˜å‡ºå¤„ï¼š</strong>åœ¨æ‹“æ‰‘ä¸­ï¼ŒS1ä¸ŠGE0/0/24ç«¯å£é€‰æ‹©çš„æ˜¯trunkç±»å‹ï¼Œæ— æ³•pingé€šã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š</strong></p><p>å°†GE0/0/24ç«¯å£ç±»å‹æ¢ä¸ºaccessã€‚</p><p><strong>åŸå› è§£é‡Šï¼š</strong></p><p>å› ä¸ºR1æ˜¯è·¯ç”±å™¨ã€‚è·¯ç”±å™¨æ˜¯ä¸‰å±‚è®¾å¤‡ï¼Œä¸è®¤è¯†äºŒå±‚çš„Vlanã€Trunkç­‰ç­‰ã€‚ æ•…åœ¨æ­¤å°†è·¯ç”±å™¨å½“ä½œç”¨æˆ·è®¾å¤‡ç«¯å£ç±»å‹é€‰æ‹©ä¸ºaccessã€‚</p><p>ç«¯å£ç±»å‹æ›´æ¢åæµ‹è¯•ï¼š</p><p>R1 Ping PCAï¼š</p><p><img src="https://s2.ax1x.com/2020/03/09/3zxgED.png" alt="3zxgED.png"></p><p>åœ¨ç«¯å£</p><p>GE0/0/0ä¸Šæ•è·æŠ¥æ–‡å¦‚ä¸‹ï¼š</p><p><img src="https://s2.ax1x.com/2020/03/09/3zxTDf.png" alt="3zxTDf.png"></p><h1 id="äºŒã€RIPé…ç½®åŠRIPv1æŠ¥æ–‡ç»“æ„åˆ†æ"><a href="#äºŒã€RIPé…ç½®åŠRIPv1æŠ¥æ–‡ç»“æ„åˆ†æ" class="headerlink" title="äºŒã€RIPé…ç½®åŠRIPv1æŠ¥æ–‡ç»“æ„åˆ†æ"></a>äºŒã€RIPé…ç½®åŠRIPv1æŠ¥æ–‡ç»“æ„åˆ†æ</h1><h2 id="1-æ¦‚è¿°-1"><a href="#1-æ¦‚è¿°-1" class="headerlink" title="1.æ¦‚è¿°"></a>1.æ¦‚è¿°</h2><p> RIP(Routing Information Protocol,è·¯ç”±ä¿¡æ¯åè®®ï¼‰æ˜¯ä¸€ç§<a href="https://baike.baidu.com/item/å†…éƒ¨ç½‘å…³åè®®" target="_blank" rel="noopener">å†…éƒ¨ç½‘å…³åè®®</a>ï¼ˆIGPï¼‰ï¼Œæ˜¯ä¸€ç§<a href="https://baike.baidu.com/item/åŠ¨æ€è·¯ç”±é€‰æ‹©/1250467" target="_blank" rel="noopener">åŠ¨æ€è·¯ç”±é€‰æ‹©</a>åè®®ï¼Œç”¨äºè‡ªæ²»ç³»ç»Ÿï¼ˆASï¼‰å†…çš„è·¯ç”±ä¿¡æ¯çš„ä¼ é€’ã€‚RIPåè®®åŸºäºè·ç¦»çŸ¢é‡ç®—æ³•ï¼ˆDistanceVectorAlgorithmsï¼‰ï¼Œä½¿ç”¨â€œè·³æ•°â€(å³metric)æ¥è¡¡é‡åˆ°è¾¾ç›®æ ‡åœ°å€çš„è·¯ç”±è·ç¦»ã€‚è¿™ç§åè®®çš„<a href="https://baike.baidu.com/item/è·¯ç”±å™¨/108294" target="_blank" rel="noopener">è·¯ç”±å™¨</a>åªå…³å¿ƒè‡ªå·±å‘¨å›´çš„<a href="https://baike.baidu.com/item/ä¸–ç•Œ/24458" target="_blank" rel="noopener">ä¸–ç•Œ</a>ï¼Œåªä¸è‡ªå·±ç›¸é‚»çš„è·¯ç”±å™¨äº¤æ¢ä¿¡æ¯ï¼ŒèŒƒå›´é™åˆ¶åœ¨15è·³(15åº¦)ä¹‹å†…ï¼Œå†è¿œï¼Œå®ƒå°±ä¸å…³å¿ƒäº†ã€‚RIPåº”ç”¨äºç½‘ç»œä¸ƒå±‚æ¨¡å‹çš„åº”ç”¨å±‚ã€‚ </p><h2 id="2-å®éªŒç›®çš„-1"><a href="#2-å®éªŒç›®çš„-1" class="headerlink" title="2.å®éªŒç›®çš„"></a>2.å®éªŒç›®çš„</h2><ul><li>æŒæ¡RIPçš„é…ç½®æ–¹æ³•ã€‚</li><li>ç†è§£RIPv1æŠ¥æ–‡çš„ç»“æ„ã€‚</li></ul><h2 id="3-å®éªŒæ‹“æ‰‘-1"><a href="#3-å®éªŒæ‹“æ‰‘-1" class="headerlink" title="3.å®éªŒæ‹“æ‰‘"></a>3.å®éªŒæ‹“æ‰‘</h2><p><img src="https://s2.ax1x.com/2020/03/08/3zg9HS.png" alt="3zg9HS.png"></p><h2 id="4-å®éªŒæ­¥éª¤-1"><a href="#4-å®éªŒæ­¥éª¤-1" class="headerlink" title="4.å®éªŒæ­¥éª¤"></a>4.å®éªŒæ­¥éª¤</h2><p>åœ¨é™æ€è·¯ç”±çš„å®éªŒåŸºç¡€ä¸Šå®ŒæˆRIPçš„é…ç½®ã€‚</p><h3 id="4-1å¯¹é™æ€è·¯ç”±é…ç½®è¿›è¡Œä¿®æ”¹"><a href="#4-1å¯¹é™æ€è·¯ç”±é…ç½®è¿›è¡Œä¿®æ”¹" class="headerlink" title="4.1å¯¹é™æ€è·¯ç”±é…ç½®è¿›è¡Œä¿®æ”¹"></a>4.1å¯¹é™æ€è·¯ç”±é…ç½®è¿›è¡Œä¿®æ”¹</h3><p>åˆ é™¤é™æ€è·¯ç”±æ¡ç›®æˆ–è€…ç¼ºçœè·¯ç”±æ¡ç›®ã€‚</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">undo</span> <span class="string">ip route-static 192.168.2.0 255.255.255.0 192.168.1.1</span></span><br><span class="line"><span class="comment">#or</span></span><br><span class="line"><span class="attr">undo</span> <span class="string">ip route-static 0.0.0.0 0.0.0.0 192.168.1.1</span></span><br></pre></td></tr></table></figure><h3 id="4-2åœ¨S1ã€R1ä¸Šåˆ†åˆ«é…ç½®RIPåè®®"><a href="#4-2åœ¨S1ã€R1ä¸Šåˆ†åˆ«é…ç½®RIPåè®®" class="headerlink" title="4.2åœ¨S1ã€R1ä¸Šåˆ†åˆ«é…ç½®RIPåè®®"></a>4.2åœ¨S1ã€R1ä¸Šåˆ†åˆ«é…ç½®RIPåè®®</h3><p>å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨äº¤æ¢æœºS1ä¸Šçš„é…ç½®ä¿¡æ¯å¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="attr">[S1]rip</span></span><br><span class="line"><span class="meta">[S1-rip-1]network</span> <span class="string">192.168.1.0</span></span><br><span class="line"><span class="meta">[S1-rip-1]network</span> <span class="string">192.168.2.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨è·¯ç”±å™¨R1ä¸Šçš„é…ç½®ä¿¡æ¯å¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="attr">[R4]rip</span></span><br><span class="line"><span class="meta">[R4-rip-1]network</span> <span class="string">192.168.1.0</span></span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹R1çš„è·¯ç”±è¡¨ä¿¡æ¯ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[R1]display</span> <span class="string">ip routing-table</span></span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2020/03/09/8Sh4Mj.png" alt="8Sh4Mj.png"></p><p>å¯ä»¥çœ‹åˆ°RIPçš„è·¯ç”±æ¡ç›®ï¼š</p><ul><li><p>ç›®çš„IPä¸ºï¼š192.168.2.0</p></li><li><p>å­ç½‘æ©ç ä¸ºï¼š255.255.255.0ï¼ˆ24ï¼‰</p></li><li><p>ä¸‹ä¸€è·³IPä¸ºï¼š192.168.1.1</p></li></ul><p>æµ‹è¯•ï¼š</p><p>R1 Ping PCAï¼š</p><p><img src="https://s2.ax1x.com/2020/03/09/8S5pcQ.png" alt="8S5pcQ.png"></p><p>åœ¨ç«¯å£GE0/0/0å¤„æ•è·æŠ¥æ–‡ä¿¡æ¯å¦‚ä¸‹ï¼š</p><p><img src="https://s2.ax1x.com/2020/03/09/8SIaGT.png" alt="8SIaGT.png"></p><p>å‘ç°RIPv1çš„æŠ¥æ–‡ã€‚</p><h3 id="4-3RIPv1æŠ¥æ–‡ç»“æ„åˆ†æ"><a href="#4-3RIPv1æŠ¥æ–‡ç»“æ„åˆ†æ" class="headerlink" title="4.3RIPv1æŠ¥æ–‡ç»“æ„åˆ†æ"></a>4.3RIPv1æŠ¥æ–‡ç»“æ„åˆ†æ</h3><p>å…·ä½“æŠ¥æ–‡å†…å®¹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://s1.ax1x.com/2020/03/12/8VvUiR.png" alt="8VvUiR.png"></p><p>åœ¨æ­¤åªç ”ç©¶RIPæŠ¥æ–‡ç»“æ„ï¼Œå¯¹å…¶ä»–å±‚ä¸åšå±•å¼€æè¿°ã€‚</p><p>ä¼šè¯å±‚æ•°æ®æ¦‚å†µ ï¼ˆè¯¥æ–‡ä½¿ç”¨RIPåè®®ï¼šRouting Information Protocolï¼‰</p><ul><li><p><strong>Command Response (2)  #å‘½ä»¤</strong></p><ul><li><p>1ä¸ºRIPè¯·æ±‚ä¿¡æ¯ï¼›</p><p>äº¤æ¢æœºåˆšå¯åŠ¨RIPæ—¶ï¼Œå‘é€requestè¯·æ±‚æŠ¥æ–‡ï¼›<br>æ­¤åï¼Œæ²¡æœ‰requestæŠ¥æ–‡ï¼Œåªæœ‰responseåº”ç­”æŠ¥æ–‡</p></li><li><p>2ä¸ºRIPå“åº”ä¿¡æ¯ï¼›</p></li></ul></li><li><p><strong>Version  RIPv1 (1)  #ç‰ˆæœ¬</strong></p><p>ä½¿ç”¨RIPv1ç‰ˆæœ¬</p></li><li><p><strong>Address Family IP (2) #åè®®ç°‡</strong></p><p>è¯¥å­—æ®µé•¿åº¦ä¸º4å­—èŠ‚ã€‚å¯¹äºTCP/IPåè®®ç°‡ï¼Œè¯¥å­—æ®µçš„å–å€¼ä¸º2 </p></li><li><p><strong>IP Address 192.168.1.0   #è·¯ç”±é¡¹çš„ç›®çš„ç½‘ç»œåœ°å€</strong> </p><p> è¡¨ç¤ºè·¯ç”±å™¨çš„ç›®çš„ç½‘ç»œåœ°å€ä¸º 192.168.1.0</p></li><li><p><strong>Metric  16 #è·³æ•°:</strong></p><p>è¡¨ç¤ºè·³æ•°ä¸º16</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå·¥ç¨‹è®¾è®¡ </category>
          
          <category> è·¯ç”±å®éªŒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå·¥ç¨‹è®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vlané—´é€šè®¯</title>
      <link href="/2020/03/08/vlan%E9%97%B4%E9%80%9A%E8%AE%AF/"/>
      <url>/2020/03/08/vlan%E9%97%B4%E9%80%9A%E8%AE%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="1-vlanæ‹“æ‰‘å›¾"><a href="#1-vlanæ‹“æ‰‘å›¾" class="headerlink" title="1.vlanæ‹“æ‰‘å›¾"></a>1.vlanæ‹“æ‰‘å›¾</h1><p><img src="https://s2.ax1x.com/2020/03/02/3Rmj76.png" alt="3Rmj76.png"></p><h1 id="2-é…ç½®äº¤æ¢æœº"><a href="#2-é…ç½®äº¤æ¢æœº" class="headerlink" title="2.é…ç½®äº¤æ¢æœº"></a>2.é…ç½®äº¤æ¢æœº</h1><h2 id="2-1é…ç½®S1å‘½ä»¤å¦‚ä¸‹-S2åŒç†-ï¼š"><a href="#2-1é…ç½®S1å‘½ä»¤å¦‚ä¸‹-S2åŒç†-ï¼š" class="headerlink" title="2.1é…ç½®S1å‘½ä»¤å¦‚ä¸‹(S2åŒç†)ï¼š"></a>2.1é…ç½®S1å‘½ä»¤å¦‚ä¸‹(S2åŒç†)ï¼š</h2><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">&lt;Huawei&gt;system-view</span></span><br><span class="line"><span class="attr">sysname</span> <span class="string">S1</span></span><br><span class="line"><span class="meta">[S1]vlan</span> <span class="string">batch 2 3</span></span><br><span class="line"></span><br><span class="line"><span class="meta">[S1]interface</span> <span class="string">GigabitEthernet 0/0/1</span></span><br><span class="line"><span class="meta">[S1-GigabitEthernet0/0/1]port</span> <span class="string">link-type access</span></span><br><span class="line"><span class="meta">[S1-GigabitEthernet0/0/1]port</span> <span class="string">default vlan 2     #å°†è¯¥ç«¯å£åŠ å…¥åˆ°VLAN 2</span></span><br><span class="line"></span><br><span class="line"><span class="meta">[S1]interface</span> <span class="string">GigabitEthernet 0/0/2</span></span><br><span class="line"><span class="meta">[S1-GigabitEthernet0/0/2]port</span> <span class="string">link-type access</span></span><br><span class="line"><span class="meta">[S1-GigabitEthernet0/0/2]port</span> <span class="string">default vlan 3</span></span><br><span class="line"></span><br><span class="line"><span class="meta">[S1]interface</span> <span class="string">GigabitEthernet 0/0/3</span></span><br><span class="line"><span class="meta">[S1-GigabitEthernet0/0/3]port</span> <span class="string">link-type trunk</span></span><br><span class="line"><span class="meta">[S1-GigabitEthernet0/0/3]port</span> <span class="string">trunk allow-pass vlan 2 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åªåœ¨S1ä¸­è¿›è¡Œé…ç½®</span></span><br><span class="line"><span class="meta">[S1]interface</span> <span class="string">vlanif 2</span></span><br><span class="line"><span class="meta">[S1-Vlanif10]ip</span> <span class="string">address 192.168.2.254 24</span></span><br><span class="line"><span class="meta">[S1]interface</span> <span class="string">vlanif 3</span></span><br><span class="line"><span class="meta">[S1-Vlanif20]ip</span> <span class="string">address 192.168.3.254 24</span></span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="2-2åœ¨äº¤æ¢æœºä¸ŠæŸ¥çœ‹vlanåˆ’åˆ†æƒ…å†µï¼š"><a href="#2-2åœ¨äº¤æ¢æœºä¸ŠæŸ¥çœ‹vlanåˆ’åˆ†æƒ…å†µï¼š" class="headerlink" title="2.2åœ¨äº¤æ¢æœºä¸ŠæŸ¥çœ‹vlanåˆ’åˆ†æƒ…å†µï¼š"></a>2.2åœ¨äº¤æ¢æœºä¸ŠæŸ¥çœ‹vlanåˆ’åˆ†æƒ…å†µï¼š</h2><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">display</span> <span class="string">vlan</span></span><br></pre></td></tr></table></figure><p><img src="/2020/03/08/vlan%E9%97%B4%E9%80%9A%E8%AE%AF/F:%5C%E5%A4%A7%E4%B8%89%E4%B8%8B%5C%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E8%AE%BE%E8%AE%A1%5Cmarkdown%5Cimages%5C3Re4RH.png" alt="3Re4RH.png"></p><h1 id="3-æµ‹è¯•vlané—´é€šè®¯"><a href="#3-æµ‹è¯•vlané—´é€šè®¯" class="headerlink" title="3.æµ‹è¯•vlané—´é€šè®¯"></a>3.æµ‹è¯•vlané—´é€šè®¯</h1><h2 id="3-1åŒä¸€äº¤æ¢æœºä¸‹ä¸åŒvlanä¸‹çš„æœºå™¨è¿›è¡Œpingæ“ä½œ"><a href="#3-1åŒä¸€äº¤æ¢æœºä¸‹ä¸åŒvlanä¸‹çš„æœºå™¨è¿›è¡Œpingæ“ä½œ" class="headerlink" title="3.1åŒä¸€äº¤æ¢æœºä¸‹ä¸åŒvlanä¸‹çš„æœºå™¨è¿›è¡Œpingæ“ä½œ"></a>3.1åŒä¸€äº¤æ¢æœºä¸‹ä¸åŒvlanä¸‹çš„æœºå™¨è¿›è¡Œpingæ“ä½œ</h2><p><strong>pc1Pingpc2ï¼š</strong></p><p><img src="/2020/03/08/vlan%E9%97%B4%E9%80%9A%E8%AE%AF/F:%5C%E5%A4%A7%E4%B8%89%E4%B8%8B%5C%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E8%AE%BE%E8%AE%A1%5Cmarkdown%5Cimages%5C3Rifjf.png" alt="3Rifjf.png"></p><p>åœ¨ç«¯å£<strong>0/0/2</strong>ä¸Šæ•è·æŠ¥æ–‡å¦‚ä¸‹ï¼š</p><p><img src="/2020/03/08/vlan%E9%97%B4%E9%80%9A%E8%AE%AF/F:%5C%E5%A4%A7%E4%B8%89%E4%B8%8B%5C%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E8%AE%BE%E8%AE%A1%5Cmarkdown%5Cimages%5C3Rk3FJ.png" alt="3Rk3FJ.png"></p><h2 id="3-2ä¸åŒäº¤æ¢æœºä¸‹ä¸åŒvlanä¸‹çš„æœºå™¨è¿›è¡Œpingæ“ä½œ"><a href="#3-2ä¸åŒäº¤æ¢æœºä¸‹ä¸åŒvlanä¸‹çš„æœºå™¨è¿›è¡Œpingæ“ä½œ" class="headerlink" title="3.2ä¸åŒäº¤æ¢æœºä¸‹ä¸åŒvlanä¸‹çš„æœºå™¨è¿›è¡Œpingæ“ä½œ"></a>3.2ä¸åŒäº¤æ¢æœºä¸‹ä¸åŒvlanä¸‹çš„æœºå™¨è¿›è¡Œpingæ“ä½œ</h2><p><strong>pc3pingpc2ï¼š</strong></p><p><img src="/2020/03/08/vlan%E9%97%B4%E9%80%9A%E8%AE%AF/F:%5C%E5%A4%A7%E4%B8%89%E4%B8%8B%5C%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E8%AE%BE%E8%AE%A1%5Cmarkdown%5Cimages%5C3RZfvn.png" alt="3RZfvn.png"></p><p>åœ¨ç«¯å£<strong>0/0/3</strong>ä¸Šæ•è·æŠ¥æ–‡å¦‚ä¸‹ï¼š</p><p><img src="/2020/03/08/vlan%E9%97%B4%E9%80%9A%E8%AE%AF/F:%5C%E5%A4%A7%E4%B8%89%E4%B8%8B%5C%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E8%AE%BE%E8%AE%A1%5Cmarkdown%5Cimages%5C3ReZrt.png" alt="3ReZrt.png"></p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå·¥ç¨‹è®¾è®¡ </category>
          
          <category> vlané—´é€šè®¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå·¥ç¨‹è®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>whiter-jotter</title>
      <link href="/2020/03/08/whiter-jotter/"/>
      <url>/2020/03/08/whiter-jotter/</url>
      
        <content type="html"><![CDATA[<h1 id="1-é¡¹ç›®æ¦‚è¿°"><a href="#1-é¡¹ç›®æ¦‚è¿°" class="headerlink" title="1.é¡¹ç›®æ¦‚è¿°"></a>1.é¡¹ç›®æ¦‚è¿°</h1><p> è¿™ä¸ªé¡¹ç›®æˆ‘æŠŠå®ƒå‘½åä¸º <strong>â€œç™½å·â€</strong>ï¼Œå› ä¸ºå®ƒéšç€å¼€å‘çš„è¿›å±•é€æ¸å®Œå–„ï¼Œè±¡å¾ç€çŸ¥è¯†çš„ä»æ— åˆ°æœ‰ï¼Œä»æœ‰åˆ°å¤šã€‚å¦å¤–æˆ‘è¿˜ç»™å®ƒèµ·äº†ä¸€ä¸ªè‹±æ–‡åå­—ï¼Œå« <strong>White Jotter</strong>ï¼ˆç™½è‰²ç¬”è®°æœ¬ï¼‰ï¼Œçº¯ç²¹æ˜¯ä¸ºäº†è°éŸ³ã€‚ </p><p> æˆ‘é€‰ç”¨ Vue.js + Spring Boot æ¥å¼€å‘è¿™ä¸ªé¡¹ç›® ï¼Œ æ˜¯å› ä¸ºè¿™ä¸¤ç§æ¡†æ¶å½“ä¸‹æ¯”è¾ƒçƒ­é—¨ï¼Œä¹Ÿæ˜¯å®ç°æ‰€è°“ <strong>å‰åç«¯åˆ†ç¦»</strong> çš„æœ€ä½³é€‰æ‹©ä¹‹ä¸€ã€‚ </p><a id="more"></a><h2 id="1-1å‰ç«¯é¡¹ç›®åŸºæœ¬ç»“æ„"><a href="#1-1å‰ç«¯é¡¹ç›®åŸºæœ¬ç»“æ„" class="headerlink" title="1.1å‰ç«¯é¡¹ç›®åŸºæœ¬ç»“æ„"></a>1.1å‰ç«¯é¡¹ç›®åŸºæœ¬ç»“æ„</h2><p><img src="https://s2.ax1x.com/2020/03/08/3x9BdS.png" alt="3x9BdS.png"></p><p>psï¼šç›®å‰åªå®Œæˆäº†ç™»å½•é¡µé¢å’Œå›¾ä¹¦é¦†é¡µé¢</p><h3 id="ç™»å½•é¡µé¢ï¼š"><a href="#ç™»å½•é¡µé¢ï¼š" class="headerlink" title="ç™»å½•é¡µé¢ï¼š"></a>ç™»å½•é¡µé¢ï¼š</h3><p><img src="https://s2.ax1x.com/2020/03/08/3xCBOx.png" alt="3xCBOx.png"></p><h3 id="å›¾ä¹¦é¦†é¡µé¢ï¼š"><a href="#å›¾ä¹¦é¦†é¡µé¢ï¼š" class="headerlink" title="å›¾ä¹¦é¦†é¡µé¢ï¼š"></a>å›¾ä¹¦é¦†é¡µé¢ï¼š</h3><p><img src="https://s2.ax1x.com/2020/03/08/3xCWpd.png" alt="3xCWpd.png"></p><h2 id="1-2åç«¯é¡¹ç›®åŸºæœ¬ç»“æ„"><a href="#1-2åç«¯é¡¹ç›®åŸºæœ¬ç»“æ„" class="headerlink" title="1.2åç«¯é¡¹ç›®åŸºæœ¬ç»“æ„"></a>1.2åç«¯é¡¹ç›®åŸºæœ¬ç»“æ„</h2><ul><li><p>åå°ç®¡ç†æ¨¡å—çš„å¸¸è§åŠŸèƒ½ä¸å¸ƒå±€ï¼ˆå†…å®¹ç®¡ç†ã€ç”¨æˆ·\æƒé™ç®¡ç†ã€è¿ç»´ç›‘æ§ï¼‰</p></li><li><p>ç”¨æˆ·èº«ä»½éªŒè¯ã€æˆæƒã€ä¼šè¯ç®¡ç†ä¸ä¿¡æ¯åŠ å¯†å­˜å‚¨</p></li><li><p>Shiro æ¡†æ¶çš„ä½¿ç”¨</p></li><li><p>å®ç°ä¸åŒç²’åº¦çš„è®¿é—®æ§åˆ¶ï¼ˆåŠ¨æ€èœå•ã€åŠŸèƒ½æ§åˆ¶ã€æ•°æ®æ§åˆ¶ï¼‰</p><p>åå°åŸºæœ¬ç»“æ„å¦‚ä¸‹ï¼š </p></li></ul><p><img src="https://s2.ax1x.com/2020/03/08/3xiOLq.png" alt="3xiOLq.png"></p><h1 id="2-æŠ€æœ¯æ ˆ"><a href="#2-æŠ€æœ¯æ ˆ" class="headerlink" title="2.æŠ€æœ¯æ ˆ"></a>2.æŠ€æœ¯æ ˆ</h1><p>ç›®å‰ç”¨åˆ°çš„æŠ€æœ¯å¦‚ä¸‹æ‰€ç¤ºï¼š</p><h2 id="2-1å‰ç«¯æŠ€æœ¯æ ˆ"><a href="#2-1å‰ç«¯æŠ€æœ¯æ ˆ" class="headerlink" title="2.1å‰ç«¯æŠ€æœ¯æ ˆ"></a>2.1å‰ç«¯æŠ€æœ¯æ ˆ</h2><ul><li>Vue.js</li><li>ElementUI</li><li>axios</li></ul><p>psï¼šæ²¡æœ‰ç³»ç»Ÿçš„å­¦è¿‡vueæ¡†æ¶ï¼Œå¼€å‘è¿‡ç¨‹ä¸­æŸ¥é˜…äº†ç›¸å½“å¤šçš„èµ„æ–™ã€‚</p><h2 id="2-2åç«¯æŠ€æœ¯æ ˆ"><a href="#2-2åç«¯æŠ€æœ¯æ ˆ" class="headerlink" title="2.2åç«¯æŠ€æœ¯æ ˆ"></a>2.2åç«¯æŠ€æœ¯æ ˆ</h2><ul><li>SpringBoot</li><li>SpringData + JPA</li><li>MySQL5.5</li></ul><h1 id="3-ç›®å‰é¡¹ç›®è¿›å±•"><a href="#3-ç›®å‰é¡¹ç›®è¿›å±•" class="headerlink" title="3.ç›®å‰é¡¹ç›®è¿›å±•"></a>3.ç›®å‰é¡¹ç›®è¿›å±•</h1><p>å®ç°äº†ç™»å½•ã€å›¾ä¹¦å±•ç¤ºåŠŸèƒ½ï¼Œåç«¯é‡‡ç”¨JPAå®ç°äº†ä¹¦æœ¬æ•°æ®çš„å¢åˆ æ”¹æŸ¥ï¼Œé€šè¿‡å¤–é”®å»ºç«‹ä¹¦æœ¬è¡¨å’Œåˆ†ç±»è¡¨çš„å…³ç³»ï¼Œå¯¹ä¹¦æœ¬æ•°æ®è¿›è¡Œåˆ†ç±»å±•ç¤ºã€‚ä¸‹ä¸€æ­¥è®¡é‡‡ç”¨Shiro å®ç°ç”¨æˆ·ä¿¡æ¯åŠ å¯†ä¸ç™»å½•è®¤è¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JUC/GC</title>
      <link href="/2020/02/25/JUC-GC/"/>
      <url>/2020/02/25/JUC-GC/</url>
      
        <content type="html"><![CDATA[<h1 id="1-JUCï¼ˆjava-util-concurrentï¼‰"><a href="#1-JUCï¼ˆjava-util-concurrentï¼‰" class="headerlink" title="1.JUCï¼ˆjava.util.concurrentï¼‰"></a>1.JUCï¼ˆjava.util.concurrentï¼‰</h1><p>é«˜å¹¶å‘ã€å¹¶è¡Œé—®é¢˜</p><h2 id="1-1java-util-concurrent-atomic"><a href="#1-1java-util-concurrent-atomic" class="headerlink" title="1.1java.util.concurrent.atomic"></a>1.1java.util.concurrent.atomic</h2><h3 id="1-1-1Class-AtomicIntefger"><a href="#1-1-1Class-AtomicIntefger" class="headerlink" title="1.1.1Class AtomicIntefger"></a>1.1.1Class AtomicIntefger</h3><p>åŸå­å¼•ç”¨</p><p>1.ä½ å¯¹volatileçš„ç†è§£ï¼Ÿ</p><ul><li><p>volatileæ˜¯javaè™šæ‹Ÿæœºæä¾›çš„è½»é‡çº§çš„åŒæ­¥æœºåˆ¶ã€‚æœ‰ä¸‰å¤§ç‰¹æ€§ï¼š</p><ul><li><p>ä¿è¯å¯è§æ€§ã€‚</p><p>ä»£ç éªŒè¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lcx;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyData</span></span>&#123;</span><br><span class="line">    <span class="comment">//int number = 0;</span></span><br><span class="line">    <span class="comment">//volatile å®ç°äº†çº¿ç¨‹çš„å¯è§æ€§ åŠä¸€ä¸ªçº¿ç¨‹å°†æ‹·è´çš„å€¼ä¿®æ”¹ååˆ·å›ä¿®æ”¹äº†ä¸»å†…å­˜çš„å€¼ï¼Œå¯¹å…¶ä»–çº¿ç¨‹å¯è§ã€‚</span></span><br><span class="line">    <span class="keyword">volatile</span> <span class="keyword">int</span> number = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addTo60</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.number = <span class="number">60</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1. éªŒè¯volatileçš„å¯è§æ€§</span></span><br><span class="line"><span class="comment"> * 1.1 å‡å¦‚ int number = 0ï¼›numberå˜é‡ä¹‹å‰æ²¡åŠ volatileå…³é”®å­—ä¿®é¥°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VolatileTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MyData myData = <span class="keyword">new</span> MyData();<span class="comment">//èµ„æºç±»</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(()-&gt;&#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">"\t come in"</span>);</span><br><span class="line">            <span class="comment">//æš‚åœçº¿ç¨‹</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                TimeUnit.SECONDS.sleep(<span class="number">3</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            myData.addTo60();</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">"\t update number value:"</span>+myData.number);</span><br><span class="line">        &#125;,<span class="string">"AAA"</span>).start();</span><br><span class="line">        <span class="comment">//ç¬¬äºŒä¸ªçº¿ç¨‹æ˜¯mainçº¿ç¨‹</span></span><br><span class="line">        <span class="keyword">while</span> (myData.number == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">//mainçº¿ç¨‹ç­‰å¾…ï¼Œç›´åˆ°numberå€¼ä¸ä¸º0</span></span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">"\t mission is over"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä¸ä¿è¯åŸå­æ€§ã€‚</p></li></ul></li></ul><a id="more"></a><ul><li>ç¦æ­¢æŒ‡ä»¤é‡æ’ã€‚</li></ul><ul><li>JVMï¼ˆjavaè™šæ‹Ÿæœºï¼‰</li></ul><ul><li><p>JMMï¼ˆjavaå†…å­˜æ¨¡å‹ï¼‰</p><p><img src="/2020/02/25/JUC-GC/C:%5CUsers%5C12173%5CDesktop%5Cimage%5CJMM01.png" alt="JMM"></p><p><img src="/2020/02/25/JUC-GC/C:%5CUsers%5C12173%5CDesktop%5Cimage%5CJMM.png" alt="JMM"></p><p>JMMä¸‰å¤§ç‰¹æ€§ï¼šå¯è§æ€§ã€åŸå­æ€§ã€æœ‰åºæ€§ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> JUC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œç®¡ç†ä¸ç»´æŠ¤è¯¾åä½œä¸š</title>
      <link href="/2020/02/24/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E4%B8%8E%E7%BB%B4%E6%8A%A4%E8%AF%BE%E5%90%8E%E4%BD%9C%E4%B8%9A/"/>
      <url>/2020/02/24/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E4%B8%8E%E7%BB%B4%E6%8A%A4%E8%AF%BE%E5%90%8E%E4%BD%9C%E4%B8%9A/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¬¬ä¸€ç« "><a href="#ç¬¬ä¸€ç« " class="headerlink" title="ç¬¬ä¸€ç« "></a>ç¬¬ä¸€ç« </h1><p><strong>2.ç½‘ç»œç®¡ç†çš„å¯¹è±¡æœ‰å“ªäº›ï¼Ÿä¸¾ä¾‹è¯´æ˜ã€‚</strong></p><p>ç½‘ç»œç®¡ç†å¯¹è±¡å…¸å‹åœ°åˆ†ä¸ºä»¥ä¸‹ 2 ç±»ï¼š </p><p>â‘´ ç½‘ç»œä¸Šçš„ç»“ç‚¹è®¾å¤‡ã€‚</p><p>å¦‚è®¡ç®—æœºç½‘ç»œä¸­ çš„ä¸»æœºã€ç½‘å…³ã€è·¯ç”±å™¨ã€äº¤æ¢æœºã€æœåŠ¡å™¨ã€å­˜å‚¨è®¾å¤‡ï¼Œæä¾›ç”µè¯ä¸šåŠ¡çš„äº¤æ¢</p><p>æœºã€æä¾›ç§»åŠ¨ç”µ è¯ä¸šåŠ¡çš„ç§»åŠ¨äº¤æ¢æœºã€æä¾›å«æ˜Ÿé€šä¿¡ä¸šåŠ¡çš„è½¬å‘å™¨ç­‰</p><p>â‘µ ç½‘ç»œä¸­çš„è½¯ä»¶ã€æœåŠ¡ä»¥åŠäº‹ä»¶ã€‚</p><p>è½¯ä»¶èµ„æºä¸»è¦åŒ…æ‹¬æ“ä½œç³»ç»Ÿã€åº”ç”¨è½¯ä»¶å’Œé€šä¿¡è½¯ä»¶ç­‰ã€‚</p><a id="more"></a><p>æœåŠ¡æ˜¯æŒ‡ç»“ç‚¹è®¾å¤‡æˆ–è½¯ä»¶æ‰€æä¾›æœåŠ¡çš„ç›¸å…³ä¿¡æ¯ã€‚</p><p>äº‹ä»¶æŒ‡ç½‘ç»œä¸­å‡ºç°å„ç§æƒ…å†µæ—¶å‘ç”Ÿçš„äº‹ä»¶ã€‚</p><p>ä¾‹ï¼šIPè·¯ç”±å™¨</p><p>è·¯ç”±å™¨æ˜¯ç®¡ç†èµ·æ¥æœ€ç›´è§‚çš„è®¾å¤‡ã€‚å…¶ç”¨é€”æ˜¯æä¾›ä¸åŒç½‘ç»œä¹‹é—´ IP æ•°æ®æŠ¥çš„è½¬å‘ã€‚å…¸å‹ç»“æ„æ˜¯</p><p>ä¸€ä¸ªç‹¬ç«‹çš„ã€å¸¦æœ‰å¤šä¸ªç‰©ç†ç«¯å£çš„è®¾å¤‡ï¼Œæ¯ä¸ªç«¯å£å¯ä»¥è¿æ¥å…¶ä»–è®¾å¤‡ï¼ˆé€šå¸¸æ˜¯è®¡ç®—æœºæˆ–è·¯ç”±</p><p>å™¨ï¼‰ã€‚å¯ç®¡ç†çš„å¯¹è±¡ä¾‹å¦‚ç«¯å£çš„çŠ¶æ€ï¼ˆå¯ç”¨æˆ–ä¸å¯ç”¨ã€è®¾å¤‡æ˜¯å¦è¿æ¥ã€å½“å‰çš„é€Ÿç‡ç­‰ï¼‰ï¼Œ ç«¯</p><p>å£çš„ IP åœ°å€å’Œæ©ç ï¼Œé™æ€è·¯ç”±ï¼Œè·¯ç”±åè®®åŠå…¶å‚æ•°ç­‰ã€‚è¿˜å¯ä»¥ç›‘æ§æ¯ä¸ªæ¥å£å‘é€ä¸æ¥æ”¶ </p><p>çš„ IP æ•°æ®æŠ¥æ•°é‡ç­‰ã€‚</p><p><strong>5. ISO ç½‘ç»œç®¡ç†çš„äº”å¤§ç®¡ç†åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Ÿåˆ†åˆ«å¯¹æ¯ä¸ªåŠŸèƒ½è¿›è¡Œç®€å•çš„æè¿°ã€‚</strong></p><p>ISO ç½‘ç»œç®¡ç†çš„äº”å¤§ç®¡ç†åŠŸèƒ½åˆ†åˆ«æ˜¯<strong>æ€§èƒ½ç®¡ç†</strong>ã€<strong>æ•…éšœç®¡ç†</strong>ã€<strong>è®¡è´¹ç®¡ç†</strong>ã€<strong>é…ç½®ç®¡ç†</strong>ã€<strong>å®‰å…¨ç®¡ç†</strong>ã€‚</p><ul><li><p><strong>æ€§èƒ½ç®¡ç†ï¼š</strong></p><p>æ€§èƒ½ç®¡ç†æ˜¯é‡‡é›†ã€åˆ†æç½‘ç»œä»¥åŠç½‘ç»œè®¾å¤‡çš„æ€§èƒ½æ•°æ®ï¼Œä»¥ä¾¿å‘ç°ç½‘ç»œæˆ–ç½‘ç»œè®¾å¤‡çš„æ€§èƒ½ </p><p>æ˜¯å¦äº§ç”Ÿåå·®æˆ–ä¸‹é™å¹¶è¿›è¡ŒçŸ«æ­£ï¼ŒåŒæ—¶ç»Ÿè®¡ç½‘ç»œè¿è¡ŒçŠ¶æ€ä¿¡æ¯ï¼Œå¯¹ç½‘ç»œçš„æœåŠ¡è´¨é‡åšå‡º</p><p>è¯„æµ‹ã€ä¼°è®¡ï¼Œä¸ºç½‘ç»œè¿›ä¸€æ­¥è§„åˆ’ä¸è°ƒæ•´æä¾›ä¾æ®ã€‚æ€§èƒ½ç®¡ç†çš„ç›®çš„æ˜¯ç»´æŠ¤ç½‘ç»œæœåŠ¡è´¨é‡</p><p>å’Œç½‘ç»œè¿è¥æ•ˆç‡ã€‚</p></li><li><p><strong>æ•…éšœç®¡ç†ï¼š</strong></p><p>æ•…éšœç®¡ç†æ˜¯æ”¶é›†ã€è¿‡æ»¤å’Œå½’å¹¶ç½‘ç»œäº‹ä»¶ï¼Œæœ‰æ•ˆåœ°å‘ç°ã€ç¡®è®¤ã€è®°å½•å’Œå®šä½ç½‘ç»œæ•…éšœï¼Œåˆ† </p><p>ææ•…éšœåŸå› å¹¶ç»™å‡ºæ’é”™å»ºè®®ä¸æ’é”™å·¥å…·ï¼Œå½¢æˆæ•…éšœå‘ç°ã€æ•…éšœå‘Šè­¦ã€æ•…éšœéš”ç¦»ã€æ•…éšœæ’</p><p>é™¤å’Œæ•…éšœé¢„é˜²çš„ä¸€æ•´å¥—æœºåˆ¶ã€‚</p></li><li><p><strong>è®¡è´¹ç®¡ç†ï¼š</strong></p><p>è®¡è´¹ç®¡ç†çš„ä½œç”¨æ˜¯æ­£ç¡®åœ°è®¡ç®—å’Œæ”¶å–ç”¨æˆ·ä½¿ç”¨ç½‘ç»œæœåŠ¡çš„è´¹ç”¨ï¼Œä»¥åŠè¿›è¡Œç½‘ç»œèµ„æºåˆ©ç”¨ </p><p>ç‡çš„ç»Ÿè®¡å’Œç½‘ç»œçš„æˆæœ¬æ•ˆç›Šæ ¸ç®—ã€‚</p></li><li><p><strong>é…ç½®ç®¡ç†ï¼š</strong></p><p>é…ç½®ç®¡ç†æ˜¯æœ€åŸºæœ¬çš„ç½‘ç»œç®¡ç†åŠŸèƒ½ï¼Œå…¶ä½œç”¨æ˜¯ç®¡ç†ç½‘ç»œçš„å»ºç«‹ã€æ‰©å……å’Œå¼€é€šã€‚ç”±äºç½‘ç»œ </p><p>è®¾å¤‡æ¥è‡ªå¤šä¸ªå‚å•†ï¼Œå› æ­¤ç®¡ç†ä¿¡æ¯å®šä¹‰å’Œæ“ä½œçš„ä¸€è‡´æ€§å’Œäº’é€šæ€§å°±æˆäº†ä¸€ä¸ªéå¸¸å¤æ‚çš„é—®é¢˜ã€‚</p></li><li><p><strong>å®‰å…¨ç®¡ç†ï¼š</strong></p><p>å®‰å…¨ç®¡ç†çš„ä½œç”¨æ˜¯æä¾›ä¿¡æ¯çš„ä¿å¯†ã€è®¤è¯å’Œå®Œæ•´æ€§ä¿æŠ¤æœºåˆ¶ï¼Œä½¿ç½‘ç»œä¸­çš„æœåŠ¡ã€æ•°æ®å’Œ </p><p>ç³»ç»Ÿå…å—ä¾µæ‰°å’Œç ´åã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œç®¡ç†ä¸ç»´æŠ¤ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œç®¡ç†ä¸ç»´æŠ¤ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Postman</title>
      <link href="/2020/02/23/postman/"/>
      <url>/2020/02/23/postman/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€Postman"><a href="#ä¸€ã€Postman" class="headerlink" title="ä¸€ã€Postman"></a>ä¸€ã€Postman</h1><ul><li><h2 id="postmanç®€ä»‹"><a href="#postmanç®€ä»‹" class="headerlink" title="postmanç®€ä»‹"></a>postmanç®€ä»‹</h2></li></ul><p>ç”¨æˆ·åœ¨å¼€å‘æˆ–è€…è°ƒè¯•ç½‘ç»œç¨‹åºæˆ–è€…æ˜¯ç½‘é¡µB/Sæ¨¡å¼çš„ç¨‹åºçš„æ—¶å€™æ˜¯éœ€è¦ä¸€äº›æ–¹æ³•æ¥è·Ÿè¸ªç½‘é¡µè¯·æ±‚çš„ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ä¸€äº›ç½‘ç»œçš„ç›‘è§†å·¥å…·æ¯”å¦‚è‘—åçš„Firebugç­‰ç½‘é¡µè°ƒè¯•å·¥å…·ã€‚ä»Šå¤©ç»™å¤§å®¶ä»‹ç»çš„è¿™æ¬¾ç½‘é¡µè°ƒè¯•å·¥å…·ä¸ä»…å¯ä»¥è°ƒè¯•ç®€å•çš„cssã€htmlã€è„šæœ¬ç­‰ç®€å•çš„ç½‘é¡µåŸºæœ¬ä¿¡æ¯ï¼Œå®ƒè¿˜å¯ä»¥å‘é€å‡ ä¹æ‰€æœ‰ç±»å‹çš„HTTPè¯·æ±‚ï¼Postmanåœ¨å‘é€ç½‘ç»œHTTPè¯·æ±‚æ–¹é¢å¯ä»¥è¯´æ˜¯Chromeæ’ä»¶ç±»äº§å“ä¸­çš„ä»£è¡¨äº§å“ä¹‹ä¸€ã€‚</p><a id="more"></a><ul><li><h2 id="åŸºæœ¬åŠŸèƒ½"><a href="#åŸºæœ¬åŠŸèƒ½" class="headerlink" title="åŸºæœ¬åŠŸèƒ½"></a>åŸºæœ¬åŠŸèƒ½</h2><p><img src="https://s2.ax1x.com/2020/02/13/1Ot534.png" alt="1Ot534.png"></p><ul><li><p><strong>Get</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/meishi"</span>,method = RequestMethod.GET)</span><br><span class="line">   <span class="meta">@ResponseBody</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Foods <span class="title">meishi</span><span class="params">()</span></span>&#123;</span><br><span class="line">       Foods food = <span class="keyword">new</span> Foods(<span class="string">"æµ·åº•æ"</span>,<span class="string">"ç«é”…"</span>,<span class="number">300</span>);</span><br><span class="line">       <span class="keyword">return</span> food;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2020/02/13/1ODEeH.png" alt="1ODEeH.png"></p></li><li><p><strong>Getå¸¦å‚æ•°ï¼ˆå ä½ç¬¦è·å–ï¼‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/*å ä½ç¬¦çš„ä½¿ç”¨*/</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/meishi/&#123;id&#125;"</span>,method = RequestMethod.GET)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Foods <span class="title">meishi01</span><span class="params">(@PathVariable (value = <span class="string">"id"</span>,required = <span class="keyword">true</span>)</span><span class="keyword">int</span> id)</span>&#123;</span><br><span class="line">    System.out.println(id);</span><br><span class="line">    Foods food = <span class="keyword">new</span> Foods(<span class="string">"å››å·å°ç‚’"</span>, <span class="string">"å°–æ¤’è‚‰ä¸"</span>, <span class="number">15</span>);</span><br><span class="line">    <span class="keyword">return</span> food;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2020/02/13/1Os5od.png" alt="1Os5od.png"></p></li><li><p><strong>Post</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">/*  æ•°æ®çš„æ·»åŠ æ“ä½œ */</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/add"</span>,method = RequestMethod.POST)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Foods <span class="title">meishiAdd</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"meishi add action!"</span>);</span><br><span class="line">    Foods food = <span class="keyword">new</span> Foods(<span class="string">"é™•è¥¿é¢é¦†"</span>,<span class="string">"æˆ·å¿è½¯é¢"</span>,<span class="number">11</span>);</span><br><span class="line">    <span class="keyword">return</span> food;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2020/02/13/1OyPS0.png" alt="1OyPS0.png"></p></li><li><p><strong>Put</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/*ä¿®æ”¹æ“ä½œ*/</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/update/&#123;id&#125;"</span>,method = RequestMethod.PUT)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Foods <span class="title">meishiPut</span><span class="params">(@PathVariable (value = <span class="string">"id"</span>,required = <span class="keyword">true</span>)</span><span class="keyword">int</span> id)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"meishi update  action!"</span> + id);</span><br><span class="line">    Foods food = <span class="keyword">new</span> Foods(<span class="string">"å››å·å°ç‚’"</span>,<span class="string">"é’æ¤’è‚‰ä¸"</span>,<span class="number">20</span>);</span><br><span class="line">    <span class="keyword">return</span> food;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2020/02/13/1Oy4XT.png" alt="1Oy4XT.png"></p><p>ä¸šåŠ¡é€»è¾‘ä»£ç ï¼ˆæ§åˆ¶å°æ‰“å°ï¼‰ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meishi update  action!<span class="number">123</span></span><br></pre></td></tr></table></figure></li><li><p><strong>Delete</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/delete/&#123;id&#125;"</span>,method = RequestMethod.DELETE)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Foods <span class="title">meishiDelete</span><span class="params">(@PathVariable (value = <span class="string">"id"</span>,required = <span class="keyword">true</span>)</span><span class="keyword">int</span> id)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"meishi delete  action!"</span> + id);</span><br><span class="line">    Foods food = <span class="keyword">new</span> Foods(<span class="string">"å››å·å°ç‚’"</span>,<span class="string">"é’æ¤’è‚‰ä¸"</span>,<span class="number">20</span>);</span><br><span class="line">    <span class="keyword">return</span> food;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2020/02/13/1O6nHg.png" alt="1O6nHg.png"></p><p>ä¸šåŠ¡é€»è¾‘ä»£ç ï¼ˆæ§åˆ¶å°æ‰“å°ï¼‰ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meishi delete  action!<span class="number">123</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><h1 id="äºŒã€AJAX"><a href="#äºŒã€AJAX" class="headerlink" title="äºŒã€AJAX"></a>äºŒã€AJAX</h1><ul><li><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p><strong>AJAX æ˜¯ä¸€ç§åœ¨æ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿæ›´æ–°éƒ¨åˆ†ç½‘é¡µçš„æŠ€æœ¯ã€‚</strong> </p><p> AJAX = å¼‚æ­¥ JavaScript å’Œ XMLã€‚</p><p>AJAX æ˜¯ä¸€ç§ç”¨äºåˆ›å»ºå¿«é€ŸåŠ¨æ€ç½‘é¡µçš„æŠ€æœ¯ã€‚</p><p>é€šè¿‡åœ¨åå°ä¸æœåŠ¡å™¨è¿›è¡Œå°‘é‡æ•°æ®äº¤æ¢ï¼ŒAJAX å¯ä»¥ä½¿ç½‘é¡µå®ç°å¼‚æ­¥æ›´æ–°ã€‚è¿™æ„å‘³ç€å¯ä»¥åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œå¯¹ç½‘é¡µçš„æŸéƒ¨åˆ†è¿›è¡Œæ›´æ–°ã€‚</p></li><li><h3 id="SpringMVCä¸­AJAXçš„åº”ç”¨"><a href="#SpringMVCä¸­AJAXçš„åº”ç”¨" class="headerlink" title="SpringMVCä¸­AJAXçš„åº”ç”¨"></a>SpringMVCä¸­AJAXçš„åº”ç”¨</h3><p>å‰åç«¯äº¤äº’ä¸­ä½¿ç”¨jsonæ•°æ®æ ¼å¼ï¼Œéœ€è¦å¯¼å…¥jsonçš„ç›¸å…³ä¾èµ–</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> å·¥å…· </category>
          
          <category> Postman </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DESåŠ è§£å¯†ç®—æ³•æµ…æ</title>
      <link href="/2020/02/23/DES%E5%8A%A0%E8%A7%A3%E5%AF%86%E7%AE%97%E6%B3%95%E6%B5%85%E6%9E%90/"/>
      <url>/2020/02/23/DES%E5%8A%A0%E8%A7%A3%E5%AF%86%E7%AE%97%E6%B3%95%E6%B5%85%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="DESåŠ è§£å¯†ç®—æ³•æµ…æ"><a href="#DESåŠ è§£å¯†ç®—æ³•æµ…æ" class="headerlink" title="DESåŠ è§£å¯†ç®—æ³•æµ…æ"></a>DESåŠ è§£å¯†ç®—æ³•æµ…æ</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>DESæ˜¯ä¸€ä¸ªåˆ†ç»„åŠ å¯†ç®—æ³•ï¼Œå®ƒä»¥64ä½ä¸ºåˆ†ç»„å¯¹æ•°æ®åŠ å¯†ã€‚åŒæ—¶DESä¹Ÿæ˜¯ä¸€ä¸ªå¯¹ç§°ç®—æ³•ï¼šåŠ å¯†å’Œè§£å¯†ç”¨çš„æ˜¯åŒä¸€ä¸ªç®—æ³•ã€‚DESæ˜¯ä¸€ä¸ªåŒ…å«16ä¸ªé˜¶æ®µçš„â€œæ›¿æ¢â€“ç½®æ¢â€çš„åˆ†ç»„åŠ å¯†ç®—æ³•ï¼Œ64ä½çš„åˆ†ç»„æ˜æ–‡åºåˆ—ä½œä¸ºåŠ å¯†ç®—æ³•çš„è¾“å…¥ï¼Œç»è¿‡16è½®åŠ å¯†å¾—åˆ°64ä½çš„å¯†æ–‡åºåˆ—ã€‚</p><p>ç®—æ³•åŸç†çœ‹ä¸‹å›¾ï¼š</p><p><img src="https://s2.ax1x.com/2019/11/09/MmQzp6.png" alt="MmQzp6.png"></p><h2 id="åŸç†æµ…æ"><a href="#åŸç†æµ…æ" class="headerlink" title="åŸç†æµ…æ"></a>åŸç†æµ…æ</h2><p>DESç®—æ³•ä¸»è¦åˆ†ä¸º3éƒ¨åˆ†ï¼šåŠ è§£å¯†è¿ç®—ã€få‡½æ•°çš„å¤„ç†ã€è½®å­å¯†é’¥çš„ç”Ÿæˆï¼Œä»å³å¾€å·¦åˆ†åˆ«ç®€å•ä»‹ç»ä¸€ä¸‹ã€‚</p><a id="more"></a><p>è½®å­å¯†é’¥çš„ç”Ÿæˆ</p><p>æ•°æ®è¡¨1</p><p> //PC-1</p><p>â€‹    private int[] PC1={57,49,41,33,25,17,9,</p><p>â€‹                       1,58,50,42,34,26,18,</p><p>â€‹                       10,2,59,51,43,35,27,</p><p>â€‹                        19,11,3,60,52,44,36,</p><p>â€‹                       63,55,47,39,31,23,15,</p><p>â€‹                       7,62,54,46,38,30,22,</p><p>â€‹                       14,6,61,53,45,37,29,</p><p>â€‹                       21,13,5,28,20,12,4};</p><p>â€‹    //PC-2</p><p>â€‹    private int[] PC2={14,17,11,24,1,5,3,28,</p><p>â€‹                       15,6,21,10,23,19,12,4,</p><p>â€‹                       26,8,16,7,27,20,13,2,</p><p>â€‹                       41,52,31,37,47,55,30,40,</p><p>â€‹                       51,45,33,48,44,49,39,56,</p><p>â€‹                       34,53,46,42,50,36,29,32};</p><p>â€‹    //Schedule of Left Shifts</p><p>â€‹    private int[] LFT={1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1};</p><p>16ä¸ªå­å¯†é’¥çš„ç”Ÿæˆä¸»è¦æ˜¯åˆ©ç”¨äº†æ•°æ®è¡¨1ä¸­çš„æ•°è¡¨ï¼Œé¦–å…ˆå°†64ä½çš„åˆå§‹å¯†é’¥åˆ©ç”¨PC1å‹ç¼©ç½®æ¢ä½56ä½çš„å¯†é’¥ï¼Œç„¶åå°†å…¶ä¸€åˆ†ä¸ºäºŒï¼Œè¿™é‡Œè®°ä¸ºC0å’ŒD0ã€‚è¿™é‡Œ28ä½çš„C0å’Œ28ä½çš„D0åˆ†åˆ«æ ¹æ®LETæ•°ç»„ç›¸åº”ä½ç½®çš„å€¼è¿›è¡Œå·¦ç§»ä½å¾—åˆ°C1å’ŒD1ã€‚è¿™æ˜¯å°†C1å’ŒD1åˆå¹¶æ ¹æ®PC2è¿›è¡Œå‹ç¼©ç½®æ¢å¾—åˆ°48ä½çš„å­å¯†é’¥ï¼Œè€Œä¸”æ³¨æ„C1å’ŒD1ä½œä¸ºä¸‹è½®çš„è¾“å…¥ä»¥ç”¨æ¥äº§ç”Ÿä¸‹ä¸€ä¸ªå­å¯†é’¥ã€‚</p><p>få‡½æ•°çš„è¿ç®—</p><p>æ•°æ®è¡¨2</p><p>//Eæ‰©å±•</p><p>â€‹    private int[] E={32,1,2,3,4,5,</p><p>â€‹                      4,5,6,7,8,9,</p><p>â€‹                     8,9,10,11,12,13,</p><p>â€‹                     12,13,14,15,16,17,</p><p>â€‹                     16,17,18,19,20,21,</p><p>â€‹                     20,21,22,23,24,25,</p><p>â€‹                     24,25,26,27,28,29,</p><p>â€‹                     28,29,30,31,32,1};</p><p>â€‹    //Pç½®æ¢</p><p>â€‹    private int[] P={16,7,20,21,29,12,28,17,</p><p>â€‹                      1,15,23,26,5,18,31,10,</p><p>â€‹                      2,8,24,14,32,27,3,9,</p><p>â€‹                      19,13,30,6,22,11,4,25};</p><p>â€‹    private static final int[][][] S_Box = {//S-ç›’</p><p>â€‹            {// S_Box[1]</p><p>â€‹                    { 14, 4, 13, 1, 2, 15, 11, 8, 3, 10, 6, 12, 5, 9, 0, 7 },</p><p>â€‹                    { 0, 15, 7, 4, 14, 2, 13, 1, 10, 6, 12, 11, 9, 5, 3, 8 },</p><p>â€‹                    { 4, 1, 14, 8, 13, 6, 2, 11, 15, 12, 9, 7, 3, 10, 5, 0 },</p><p>â€‹                    { 15, 12, 8, 2, 4, 9, 1, 7, 5, 11, 3, 14, 10, 0, 6, 13 } },</p><p>â€‹            { // S_Box[2]</p><p>â€‹                    { 15, 1, 8, 14, 6, 11, 3, 4, 9, 7, 2, 13, 12, 0, 5, 10 },</p><p>â€‹                    { 3, 13, 4, 7, 15, 2, 8, 14, 12, 0, 1, 10, 6, 9, 11, 5 },</p><p>â€‹                    { 0, 14, 7, 11, 10, 4, 13, 1, 5, 8, 12, 6, 9, 3, 2, 15 },</p><p>â€‹                    { 13, 8, 10, 1, 3, 15, 4, 2, 11, 6, 7, 12, 0, 5, 14, 9 } },</p><p>â€‹            { // S_Box[3]</p><p>â€‹                    { 10, 0, 9, 14, 6, 3, 15, 5, 1, 13, 12, 7, 11, 4, 2, 8 },</p><p>â€‹                    { 13, 7, 0, 9, 3, 4, 6, 10, 2, 8, 5, 14, 12, 11, 15, 1 },</p><p>â€‹                    { 13, 6, 4, 9, 8, 15, 3, 0, 11, 1, 2, 12, 5, 10, 14, 7 },</p><p>â€‹                    { 1, 10, 13, 0, 6, 9, 8, 7, 4, 15, 14, 3, 11, 5, 2, 12 } },</p><p>â€‹            { // S_Box[4]</p><p>â€‹                    { 7, 13, 14, 3, 0, 6, 9, 10, 1, 2, 8, 5, 11, 12, 4, 15 },</p><p>â€‹                    { 13, 8, 11, 5, 6, 15, 0, 3, 4, 7, 2, 12, 1, 10, 14, 9 },</p><p>â€‹                    { 10, 6, 9, 0, 12, 11, 7, 13, 15, 1, 3, 14, 5, 2, 8, 4 },</p><p>â€‹                    { 3, 15, 0, 6, 10, 1, 13, 8, 9, 4, 5, 11, 12, 7, 2, 14 } },</p><p>â€‹            { // S_Box[5]</p><p>â€‹                    { 2, 12, 4, 1, 7, 10, 11, 6, 8, 5, 3, 15, 13, 0, 14, 9 },</p><p>â€‹                    { 14, 11, 2, 12, 4, 7, 13, 1, 5, 0, 15, 10, 3, 9, 8, 6 },</p><p>â€‹                    { 4, 2, 1, 11, 10, 13, 7, 8, 15, 9, 12, 5, 6, 3, 0, 14 },</p><p>â€‹                    { 11, 8, 12, 7, 1, 14, 2, 13, 6, 15, 0, 9, 10, 4, 5, 3 } },</p><p>â€‹            { // S_Box[6]</p><p>â€‹                    { 12, 1, 10, 15, 9, 2, 6, 8, 0, 13, 3, 4, 14, 7, 5, 11 },</p><p>â€‹                    { 10, 15, 4, 2, 7, 12, 9, 5, 6, 1, 13, 14, 0, 11, 3, 8 },</p><p>â€‹                    { 9, 14, 15, 5, 2, 8, 12, 3, 7, 0, 4, 10, 1, 13, 11, 6 },</p><p>â€‹                    { 4, 3, 2, 12, 9, 5, 15, 10, 11, 14, 1, 7, 6, 0, 8, 13 } },</p><p>â€‹            { // S_Box[7]</p><p>â€‹                    { 4, 11, 2, 14, 15, 0, 8, 13, 3, 12, 9, 7, 5, 10, 6, 1 },</p><p>â€‹                    { 13, 0, 11, 7, 4, 9, 1, 10, 14, 3, 5, 12, 2, 15, 8, 6 },</p><p>â€‹                    { 1, 4, 11, 13, 12, 3, 7, 14, 10, 15, 6, 8, 0, 5, 9, 2 },</p><p>â€‹                    { 6, 11, 13, 8, 1, 4, 10, 7, 9, 5, 0, 15, 14, 2, 3, 12 } },</p><p>â€‹            { // S_Box[8]</p><p>â€‹                    { 13, 2, 8, 4, 6, 15, 11, 1, 10, 9, 3, 14, 5, 0, 12, 7 },</p><p>â€‹                    { 1, 15, 13, 8, 10, 3, 7, 4, 12, 5, 6, 11, 0, 14, 9, 2 },</p><p>â€‹                    { 7, 11, 4, 1, 9, 12, 14, 2, 0, 6, 10, 13, 15, 3, 5, 8 },</p><p>â€‹                    { 2, 1, 14, 7, 4, 10, 8, 13, 15, 12, 9, 0, 3, 5, 6, 11 } }</p><p>â€‹    };</p><p>ä»åŸç†å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œfå‡½æ•°çš„è¾“å…¥æ˜¯æ˜æ–‡åˆ†ç»„çš„å³åŠåˆ†ç»„è®°ä¸ºRå’Œå­å¯†é’¥è®°ä¸ºKã€‚32ä½çš„Ré¦–å…ˆè¦åˆ©ç”¨æ•°æ®è¡¨2ä¸­çš„Eè¿›è¡ŒEç›’æ‰©å±•å˜æ¢å¾—åˆ°48ä½çš„æ•°æ®ï¼Œè¿™é‡Œè®°ä¸ºREã€‚ç„¶åå°†REä¸Kè¿›è¡Œå¼‚æˆ–è¿ç®—å¹¶å°†å¼‚æˆ–ç»“æœåˆ©ç”¨æ•°æ®è¡¨2ä¸­çš„S_BOXè¿›è¡ŒSç›’æ›¿æ¢ï¼Œå¾—åˆ°48ä½çš„è¿ç®—ç»“æœè®°ä¸ºRSã€‚å†å°†RSåˆ©ç”¨æ•°æ®è¡¨2ä¸­çš„Pè¿›è¡ŒPç›’æ›¿æ¢ï¼Œå¾—åˆ°32ä½çš„æœ€ç»ˆç»“æœï¼Œè®°ä¸ºRFã€‚åˆ°è¿™é‡Œfå‡½æ•°çš„è¿ç®—ä»»åŠ¡å°±å®Œæˆäº†ã€‚</p><p>åŠ è§£å¯†è¿ç®—</p><p> //åˆå§‹ç½®æ¢</p><p>â€‹    private int[] IP={58,50,42,34,26,18,10,2,</p><p>â€‹                     60,52,44,36,28,20,12,4,</p><p>â€‹                     62,54,46,38,30,22,14,6,</p><p>â€‹                     64,56,48,40,32,24,16,8,</p><p>â€‹                     57,49,41,33,25,17,9,1,</p><p>â€‹                     59,51,43,35,27,19,11,3,</p><p>â€‹                     61,53,45,37,29,21,13,5,</p><p>â€‹                     63,55,47,39,31,23,15,7};</p><p>â€‹    //é€†åˆå§‹ç½®æ¢</p><p>â€‹    private int[] IP_1={40,8,48,16,56,24,64,32,</p><p>â€‹                       39,7,47,15,55,23,63,31,</p><p>â€‹                       38,6,46,14,54,22,62,30,</p><p>â€‹                       37,5,45,13,53,21,61,29,</p><p>â€‹                       36,4,44,12,52,20,60,28,</p><p>â€‹                       35,3,43,11,51,19,59,27,</p><p>â€‹                       34,2,42,10,50,18,58,26,</p><p>â€‹                       33,1,41,9,49,17,57,25};</p><p>åœ¨ç¬¬ä¸€è½®ä¸­å°†64ä½çš„æ˜æ–‡åˆ†ä¸ºL0å’ŒR0,åˆ™åŠ å¯†è¿ç®—å¦‚ä¸‹ï¼š<br> L1=R0<br> R1=L0âŠ•f(R0,K0)<br> ç„¶åæŒ‰æ­¤å…¬å¼è¿›è¡Œ16è½®çš„è¿ç®—ã€‚</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><p>CustomDES</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lcx.des;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomDES</span> </span>&#123;</span><br><span class="line">    <span class="comment">//åˆå§‹ç½®æ¢</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] IP = &#123;<span class="number">58</span>, <span class="number">50</span>, <span class="number">42</span>, <span class="number">34</span>, <span class="number">26</span>, <span class="number">18</span>, <span class="number">10</span>, <span class="number">2</span>,</span><br><span class="line">            <span class="number">60</span>, <span class="number">52</span>, <span class="number">44</span>, <span class="number">36</span>, <span class="number">28</span>, <span class="number">20</span>, <span class="number">12</span>, <span class="number">4</span>,</span><br><span class="line">            <span class="number">62</span>, <span class="number">54</span>, <span class="number">46</span>, <span class="number">38</span>, <span class="number">30</span>, <span class="number">22</span>, <span class="number">14</span>, <span class="number">6</span>,</span><br><span class="line">            <span class="number">64</span>, <span class="number">56</span>, <span class="number">48</span>, <span class="number">40</span>, <span class="number">32</span>, <span class="number">24</span>, <span class="number">16</span>, <span class="number">8</span>,</span><br><span class="line">            <span class="number">57</span>, <span class="number">49</span>, <span class="number">41</span>, <span class="number">33</span>, <span class="number">25</span>, <span class="number">17</span>, <span class="number">9</span>, <span class="number">1</span>,</span><br><span class="line">            <span class="number">59</span>, <span class="number">51</span>, <span class="number">43</span>, <span class="number">35</span>, <span class="number">27</span>, <span class="number">19</span>, <span class="number">11</span>, <span class="number">3</span>,</span><br><span class="line">            <span class="number">61</span>, <span class="number">53</span>, <span class="number">45</span>, <span class="number">37</span>, <span class="number">29</span>, <span class="number">21</span>, <span class="number">13</span>, <span class="number">5</span>,</span><br><span class="line">            <span class="number">63</span>, <span class="number">55</span>, <span class="number">47</span>, <span class="number">39</span>, <span class="number">31</span>, <span class="number">23</span>, <span class="number">15</span>, <span class="number">7</span>&#125;;</span><br><span class="line">    <span class="comment">//é€†åˆå§‹ç½®æ¢</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] IP_1 = &#123;<span class="number">40</span>, <span class="number">8</span>, <span class="number">48</span>, <span class="number">16</span>, <span class="number">56</span>, <span class="number">24</span>, <span class="number">64</span>, <span class="number">32</span>,</span><br><span class="line">            <span class="number">39</span>, <span class="number">7</span>, <span class="number">47</span>, <span class="number">15</span>, <span class="number">55</span>, <span class="number">23</span>, <span class="number">63</span>, <span class="number">31</span>,</span><br><span class="line">            <span class="number">38</span>, <span class="number">6</span>, <span class="number">46</span>, <span class="number">14</span>, <span class="number">54</span>, <span class="number">22</span>, <span class="number">62</span>, <span class="number">30</span>,</span><br><span class="line">            <span class="number">37</span>, <span class="number">5</span>, <span class="number">45</span>, <span class="number">13</span>, <span class="number">53</span>, <span class="number">21</span>, <span class="number">61</span>, <span class="number">29</span>,</span><br><span class="line">            <span class="number">36</span>, <span class="number">4</span>, <span class="number">44</span>, <span class="number">12</span>, <span class="number">52</span>, <span class="number">20</span>, <span class="number">60</span>, <span class="number">28</span>,</span><br><span class="line">            <span class="number">35</span>, <span class="number">3</span>, <span class="number">43</span>, <span class="number">11</span>, <span class="number">51</span>, <span class="number">19</span>, <span class="number">59</span>, <span class="number">27</span>,</span><br><span class="line">            <span class="number">34</span>, <span class="number">2</span>, <span class="number">42</span>, <span class="number">10</span>, <span class="number">50</span>, <span class="number">18</span>, <span class="number">58</span>, <span class="number">26</span>,</span><br><span class="line">            <span class="number">33</span>, <span class="number">1</span>, <span class="number">41</span>, <span class="number">9</span>, <span class="number">49</span>, <span class="number">17</span>, <span class="number">57</span>, <span class="number">25</span>&#125;;<span class="comment">//æ‰‹æ®‹ï¼Œæ•°ç»„æ•°æ®æ²¡å†™å…¨</span></span><br><span class="line">    <span class="comment">//Eæ‰©å±•</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] E = &#123;<span class="number">32</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>,</span><br><span class="line">            <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>,</span><br><span class="line">            <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>,</span><br><span class="line">            <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>,</span><br><span class="line">            <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">20</span>, <span class="number">21</span>,</span><br><span class="line">            <span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">25</span>,</span><br><span class="line">            <span class="number">24</span>, <span class="number">25</span>, <span class="number">26</span>, <span class="number">27</span>, <span class="number">28</span>, <span class="number">29</span>,</span><br><span class="line">            <span class="number">28</span>, <span class="number">29</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>, <span class="number">1</span>&#125;;</span><br><span class="line">    <span class="comment">//Pç½®æ¢</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] P = &#123;<span class="number">16</span>, <span class="number">7</span>, <span class="number">20</span>, <span class="number">21</span>, <span class="number">29</span>, <span class="number">12</span>, <span class="number">28</span>, <span class="number">17</span>,</span><br><span class="line">            <span class="number">1</span>, <span class="number">15</span>, <span class="number">23</span>, <span class="number">26</span>, <span class="number">5</span>, <span class="number">18</span>, <span class="number">31</span>, <span class="number">10</span>,</span><br><span class="line">            <span class="number">2</span>, <span class="number">8</span>, <span class="number">24</span>, <span class="number">14</span>, <span class="number">32</span>, <span class="number">27</span>, <span class="number">3</span>, <span class="number">9</span>,</span><br><span class="line">            <span class="number">19</span>, <span class="number">13</span>, <span class="number">30</span>, <span class="number">6</span>, <span class="number">22</span>, <span class="number">11</span>, <span class="number">4</span>, <span class="number">25</span>&#125;;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span>[][][] S_Box = &#123;</span><br><span class="line">            &#123;</span><br><span class="line">                    &#123;<span class="number">14</span>, <span class="number">4</span>, <span class="number">13</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">15</span>, <span class="number">11</span>, <span class="number">8</span>, <span class="number">3</span>, <span class="number">10</span>, <span class="number">6</span>, <span class="number">12</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">0</span>, <span class="number">7</span>&#125;,</span><br><span class="line">                    &#123;<span class="number">0</span>, <span class="number">15</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">14</span>, <span class="number">2</span>, <span class="number">13</span>, <span class="number">1</span>, <span class="number">10</span>, <span class="number">6</span>, <span class="number">12</span>, <span class="number">11</span>, <span class="number">9</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">8</span>&#125;,</span><br><span class="line">                    &#123;<span class="number">4</span>, <span class="number">1</span>, <span class="number">14</span>, <span class="number">8</span>, <span class="number">13</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">11</span>, <span class="number">15</span>, <span class="number">12</span>, <span class="number">9</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">10</span>, <span class="number">5</span>, <span class="number">0</span>&#125;,</span><br><span class="line">                    &#123;<span class="number">15</span>, <span class="number">12</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">11</span>, <span class="number">3</span>, <span class="number">14</span>, <span class="number">10</span>, <span class="number">0</span>, <span class="number">6</span>, <span class="number">13</span>&#125;&#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                    &#123;<span class="number">15</span>, <span class="number">1</span>, <span class="number">8</span>, <span class="number">14</span>, <span class="number">6</span>, <span class="number">11</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">13</span>, <span class="number">12</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">10</span>&#125;,</span><br><span class="line">                    &#123;<span class="number">3</span>, <span class="number">13</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="number">15</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">14</span>, <span class="number">12</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">10</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">11</span>, <span class="number">5</span>&#125;,</span><br><span class="line">                    &#123;<span class="number">0</span>, <span class="number">14</span>, <span class="number">7</span>, <span class="number">11</span>, <span class="number">10</span>, <span class="number">4</span>, <span class="number">13</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">12</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">15</span>&#125;,</span><br><span class="line">                    &#123;<span class="number">13</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">15</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">11</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">12</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">14</span>, <span class="number">9</span>&#125;&#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                    &#123;<span class="number">10</span>, <span class="number">0</span>, <span class="number">9</span>, <span class="number">14</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">15</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">13</span>, <span class="number">12</span>, <span class="number">7</span>, <span class="number">11</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">8</span>&#125;,</span><br><span class="line">                    &#123;<span class="number">13</span>, <span class="number">7</span>, <span class="number">0</span>, <span class="number">9</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">10</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">14</span>, <span class="number">12</span>, <span class="number">11</span>, <span class="number">15</span>, <span class="number">1</span>&#125;,</span><br><span class="line">                    &#123;<span class="number">13</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">15</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">11</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">12</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">14</span>, <span class="number">7</span>&#125;,</span><br><span class="line">                    &#123;<span class="number">1</span>, <span class="number">10</span>, <span class="number">13</span>, <span class="number">0</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">15</span>, <span class="number">14</span>, <span class="number">3</span>, <span class="number">11</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">12</span>&#125;&#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                    &#123;<span class="number">7</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">4</span>, <span class="number">15</span>&#125;,</span><br><span class="line">                    &#123;<span class="number">13</span>, <span class="number">8</span>, <span class="number">11</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">15</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">12</span>, <span class="number">1</span>, <span class="number">10</span>, <span class="number">14</span>, <span class="number">9</span>&#125;,</span><br><span class="line">                    &#123;<span class="number">10</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">0</span>, <span class="number">12</span>, <span class="number">11</span>, <span class="number">7</span>, <span class="number">13</span>, <span class="number">15</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">14</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">4</span>&#125;,</span><br><span class="line">                    &#123;<span class="number">3</span>, <span class="number">15</span>, <span class="number">0</span>, <span class="number">6</span>, <span class="number">10</span>, <span class="number">1</span>, <span class="number">13</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">14</span>&#125;&#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                    &#123;<span class="number">2</span>, <span class="number">12</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">15</span>, <span class="number">13</span>, <span class="number">0</span>, <span class="number">14</span>, <span class="number">9</span>&#125;,</span><br><span class="line">                    &#123;<span class="number">14</span>, <span class="number">11</span>, <span class="number">2</span>, <span class="number">12</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="number">13</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">15</span>, <span class="number">10</span>, <span class="number">3</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">6</span>&#125;,</span><br><span class="line">                    &#123;<span class="number">4</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">11</span>, <span class="number">10</span>, <span class="number">13</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">15</span>, <span class="number">9</span>, <span class="number">12</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">14</span>&#125;,</span><br><span class="line">                    &#123;<span class="number">11</span>, <span class="number">8</span>, <span class="number">12</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">14</span>, <span class="number">2</span>, <span class="number">13</span>, <span class="number">6</span>, <span class="number">15</span>, <span class="number">0</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">3</span>&#125;&#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                    &#123;<span class="number">12</span>, <span class="number">1</span>, <span class="number">10</span>, <span class="number">15</span>, <span class="number">9</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">0</span>, <span class="number">13</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">14</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">11</span>&#125;,</span><br><span class="line">                    &#123;<span class="number">10</span>, <span class="number">15</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">12</span>, <span class="number">9</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">0</span>, <span class="number">11</span>, <span class="number">3</span>, <span class="number">8</span>&#125;,</span><br><span class="line">                    &#123;<span class="number">9</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">12</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">0</span>, <span class="number">4</span>, <span class="number">10</span>, <span class="number">1</span>, <span class="number">13</span>, <span class="number">11</span>, <span class="number">6</span>&#125;,</span><br><span class="line">                    &#123;<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">12</span>, <span class="number">9</span>, <span class="number">5</span>, <span class="number">15</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">14</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">0</span>, <span class="number">8</span>, <span class="number">13</span>&#125;&#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                    &#123;<span class="number">4</span>, <span class="number">11</span>, <span class="number">2</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">0</span>, <span class="number">8</span>, <span class="number">13</span>, <span class="number">3</span>, <span class="number">12</span>, <span class="number">9</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">6</span>, <span class="number">1</span>&#125;,</span><br><span class="line">                    &#123;<span class="number">13</span>, <span class="number">0</span>, <span class="number">11</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">1</span>, <span class="number">10</span>, <span class="number">14</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">12</span>, <span class="number">2</span>, <span class="number">15</span>, <span class="number">8</span>, <span class="number">6</span>&#125;,</span><br><span class="line">                    &#123;<span class="number">1</span>, <span class="number">4</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">12</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">14</span>, <span class="number">10</span>, <span class="number">15</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">2</span>&#125;,</span><br><span class="line">                    &#123;<span class="number">6</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">8</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">10</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">15</span>, <span class="number">14</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">12</span>&#125;&#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                    &#123;<span class="number">13</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">15</span>, <span class="number">11</span>, <span class="number">1</span>, <span class="number">10</span>, <span class="number">9</span>, <span class="number">3</span>, <span class="number">14</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">12</span>, <span class="number">7</span>&#125;,</span><br><span class="line">                    &#123;<span class="number">1</span>, <span class="number">15</span>, <span class="number">13</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">12</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">11</span>, <span class="number">0</span>, <span class="number">14</span>, <span class="number">9</span>, <span class="number">2</span>&#125;,</span><br><span class="line">                    &#123;<span class="number">7</span>, <span class="number">11</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">9</span>, <span class="number">12</span>, <span class="number">14</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">6</span>, <span class="number">10</span>, <span class="number">13</span>, <span class="number">15</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">8</span>&#125;,</span><br><span class="line">                    &#123;<span class="number">2</span>, <span class="number">1</span>, <span class="number">14</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">10</span>, <span class="number">8</span>, <span class="number">13</span>, <span class="number">15</span>, <span class="number">12</span>, <span class="number">9</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">11</span>&#125;&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//PC-1</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] PC1 = &#123;<span class="number">57</span>, <span class="number">49</span>, <span class="number">41</span>, <span class="number">33</span>, <span class="number">25</span>, <span class="number">17</span>, <span class="number">9</span>,</span><br><span class="line">            <span class="number">1</span>, <span class="number">58</span>, <span class="number">50</span>, <span class="number">42</span>, <span class="number">34</span>, <span class="number">26</span>, <span class="number">18</span>,</span><br><span class="line">            <span class="number">10</span>, <span class="number">2</span>, <span class="number">59</span>, <span class="number">51</span>, <span class="number">43</span>, <span class="number">35</span>, <span class="number">27</span>,</span><br><span class="line">            <span class="number">19</span>, <span class="number">11</span>, <span class="number">3</span>, <span class="number">60</span>, <span class="number">52</span>, <span class="number">44</span>, <span class="number">36</span>,</span><br><span class="line">            <span class="number">63</span>, <span class="number">55</span>, <span class="number">47</span>, <span class="number">39</span>, <span class="number">31</span>, <span class="number">23</span>, <span class="number">15</span>,</span><br><span class="line">            <span class="number">7</span>, <span class="number">62</span>, <span class="number">54</span>, <span class="number">46</span>, <span class="number">38</span>, <span class="number">30</span>, <span class="number">22</span>,</span><br><span class="line">            <span class="number">14</span>, <span class="number">6</span>, <span class="number">61</span>, <span class="number">53</span>, <span class="number">45</span>, <span class="number">37</span>, <span class="number">29</span>,</span><br><span class="line">            <span class="number">21</span>, <span class="number">13</span>, <span class="number">5</span>, <span class="number">28</span>, <span class="number">20</span>, <span class="number">12</span>, <span class="number">4</span>&#125;;</span><br><span class="line">    <span class="comment">//PC-2</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] PC2 = &#123;<span class="number">14</span>, <span class="number">17</span>, <span class="number">11</span>, <span class="number">24</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">28</span>,</span><br><span class="line">            <span class="number">15</span>, <span class="number">6</span>, <span class="number">21</span>, <span class="number">10</span>, <span class="number">23</span>, <span class="number">19</span>, <span class="number">12</span>, <span class="number">4</span>,</span><br><span class="line">            <span class="number">26</span>, <span class="number">8</span>, <span class="number">16</span>, <span class="number">7</span>, <span class="number">27</span>, <span class="number">20</span>, <span class="number">13</span>, <span class="number">2</span>,</span><br><span class="line">            <span class="number">41</span>, <span class="number">52</span>, <span class="number">31</span>, <span class="number">37</span>, <span class="number">47</span>, <span class="number">55</span>, <span class="number">30</span>, <span class="number">40</span>,</span><br><span class="line">            <span class="number">51</span>, <span class="number">45</span>, <span class="number">33</span>, <span class="number">48</span>, <span class="number">44</span>, <span class="number">49</span>, <span class="number">39</span>, <span class="number">56</span>,</span><br><span class="line">            <span class="number">34</span>, <span class="number">53</span>, <span class="number">46</span>, <span class="number">42</span>, <span class="number">50</span>, <span class="number">36</span>, <span class="number">29</span>, <span class="number">32</span>&#125;;</span><br><span class="line">    <span class="comment">//Schedule of Left Shifts</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] LFT = &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>&#125;;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŠ å¯†è½®æ•°</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> LOOP_NUM = <span class="number">16</span>;</span><br><span class="line">    <span class="keyword">private</span> String[] keys = <span class="keyword">new</span> String[LOOP_NUM];</span><br><span class="line">    <span class="keyword">private</span> String[] pContent;</span><br><span class="line">    <span class="keyword">private</span> String[] cContent;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> origin_length;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 16ä¸ªå­å¯†é’¥</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[][] sub_key = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">16</span>][<span class="number">48</span>];</span><br><span class="line">    <span class="keyword">private</span> String content;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> p_origin_length;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomDES</span><span class="params">(String key, String content)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.content = content;</span><br><span class="line">        p_origin_length = content.getBytes().length;</span><br><span class="line">        generateKeys(key);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/****æ‹†åˆ†åˆ†ç»„****/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">byte</span>[] deal(<span class="keyword">byte</span>[] p, <span class="keyword">int</span> flag) &#123;</span><br><span class="line">        origin_length = p.length;</span><br><span class="line">        <span class="keyword">int</span> g_num;</span><br><span class="line">        <span class="keyword">int</span> r_num;</span><br><span class="line">        g_num = origin_length / <span class="number">8</span>;</span><br><span class="line">        r_num = <span class="number">8</span> - (origin_length - g_num * <span class="number">8</span>);<span class="comment">//8ä¸å¡«å……</span></span><br><span class="line">        <span class="keyword">byte</span>[] p_padding;</span><br><span class="line">        <span class="comment">/****å¡«å……********/</span></span><br><span class="line">        <span class="keyword">if</span> (r_num &lt; <span class="number">8</span>) &#123;</span><br><span class="line">            p_padding = <span class="keyword">new</span> <span class="keyword">byte</span>[origin_length + r_num];</span><br><span class="line">            System.arraycopy(p, <span class="number">0</span>, p_padding, <span class="number">0</span>, origin_length);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; r_num; i++) &#123;</span><br><span class="line">                p_padding[origin_length + i] = (<span class="keyword">byte</span>) r_num;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            p_padding = p;</span><br><span class="line">        &#125;</span><br><span class="line">        g_num = p_padding.length / <span class="number">8</span>;</span><br><span class="line">        <span class="keyword">byte</span>[] f_p = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">8</span>];</span><br><span class="line">        <span class="keyword">byte</span>[] result_data = <span class="keyword">new</span> <span class="keyword">byte</span>[p_padding.length];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; g_num; i++) &#123;</span><br><span class="line">            System.arraycopy(p_padding, i * <span class="number">8</span>, f_p, <span class="number">0</span>, <span class="number">8</span>);</span><br><span class="line">            System.arraycopy(descryUnit(f_p, sub_key, flag), <span class="number">0</span>, result_data, i * <span class="number">8</span>, <span class="number">8</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (flag == <span class="number">0</span>) &#123;<span class="comment">//è§£å¯†</span></span><br><span class="line">            <span class="keyword">byte</span>[] p_result_data = <span class="keyword">new</span> <span class="keyword">byte</span>[p_origin_length];</span><br><span class="line">            System.arraycopy(result_data, <span class="number">0</span>, p_result_data, <span class="number">0</span>, p_origin_length);</span><br><span class="line">            <span class="keyword">return</span> p_result_data;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result_data;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŠ å¯†</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">byte</span>[] descryUnit(<span class="keyword">byte</span>[] p, <span class="keyword">int</span> k[][], <span class="keyword">int</span> flag) &#123;</span><br><span class="line">        <span class="keyword">int</span>[] p_bit = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">64</span>];</span><br><span class="line">        StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) &#123;</span><br><span class="line">            String p_b = Integer.toBinaryString(p[i] &amp; <span class="number">0xff</span>);</span><br><span class="line">            <span class="keyword">while</span> (p_b.length() % <span class="number">8</span> != <span class="number">0</span>) &#123;</span><br><span class="line">                p_b = <span class="string">"0"</span> + p_b;</span><br><span class="line">            &#125;</span><br><span class="line">            stringBuilder.append(p_b);</span><br><span class="line">        &#125;</span><br><span class="line">        String p_str = stringBuilder.toString();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">64</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> p_t = Integer.valueOf(p_str.charAt(i));</span><br><span class="line">            <span class="keyword">if</span> (p_t == <span class="number">48</span>) &#123;</span><br><span class="line">                p_t = <span class="number">0</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (p_t == <span class="number">49</span>) &#123;</span><br><span class="line">                p_t = <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">"To bit error!"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            p_bit[i] = p_t;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/***IPç½®æ¢***/</span></span><br><span class="line">        <span class="keyword">int</span>[] p_IP = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">64</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">64</span>; i++) &#123;</span><br><span class="line">            p_IP[i] = p_bit[IP[i] - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (flag == <span class="number">1</span>) &#123; <span class="comment">// åŠ å¯†</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span>; i++) &#123;</span><br><span class="line">                L(p_IP, i, flag, k[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (flag == <span class="number">0</span>) &#123; <span class="comment">// è§£å¯†</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">15</span>; i &gt; -<span class="number">1</span>; i--) &#123;</span><br><span class="line">                L(p_IP, i, flag, k[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span>[] c = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">64</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; IP_1.length; i++) &#123;</span><br><span class="line">            c[i] = p_IP[IP_1[i] - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">byte</span>[] c_byte = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">8</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) &#123;</span><br><span class="line">            c_byte[i] = (<span class="keyword">byte</span>) ((c[<span class="number">8</span> * i] &lt;&lt; <span class="number">7</span>) + (c[<span class="number">8</span> * i + <span class="number">1</span>] &lt;&lt; <span class="number">6</span>) + (c[<span class="number">8</span> * i + <span class="number">2</span>] &lt;&lt; <span class="number">5</span>) + (c[<span class="number">8</span> * i + <span class="number">3</span>] &lt;&lt; <span class="number">4</span>) + (c[<span class="number">8</span> * i + <span class="number">4</span>] &lt;&lt; <span class="number">3</span>) + (c[<span class="number">8</span> * i + <span class="number">5</span>] &lt;&lt; <span class="number">2</span>) + (c[<span class="number">8</span> * i + <span class="number">6</span>] &lt;&lt; <span class="number">1</span>) + (c[<span class="number">8</span> * i + <span class="number">7</span>]));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> c_byte;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">L</span><span class="params">(<span class="keyword">int</span>[] M, <span class="keyword">int</span> times, <span class="keyword">int</span> flag, <span class="keyword">int</span>[] keyarray)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] L0 = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">32</span>];</span><br><span class="line">        <span class="keyword">int</span>[] R0 = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">32</span>];</span><br><span class="line">        <span class="keyword">int</span>[] L1 = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">32</span>];</span><br><span class="line">        <span class="keyword">int</span>[] R1 = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">32</span>];</span><br><span class="line">        <span class="keyword">int</span>[] f = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">32</span>];</span><br><span class="line">        System.arraycopy(M, <span class="number">0</span>, L0, <span class="number">0</span>, <span class="number">32</span>);</span><br><span class="line">        System.arraycopy(M, <span class="number">32</span>, R0, <span class="number">0</span>, <span class="number">32</span>);</span><br><span class="line">        L1 = R0;</span><br><span class="line">        f = fFuction(R0, keyarray);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">32</span>; j++) &#123;</span><br><span class="line">            R1[j] = L0[j] ^ f[j];</span><br><span class="line">            <span class="keyword">if</span> (((flag == <span class="number">0</span>) &amp;&amp; (times == <span class="number">0</span>)) || ((flag == <span class="number">1</span>) &amp;&amp; (times == <span class="number">15</span>))) &#123;</span><br><span class="line">                M[j] = R1[j];</span><br><span class="line">                M[j + <span class="number">32</span>] = L1[j];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                M[j] = L1[j];</span><br><span class="line">                M[j + <span class="number">32</span>] = R1[j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] fFuction(<span class="keyword">int</span>[] r_content, <span class="keyword">int</span>[] key) &#123;</span><br><span class="line">        <span class="keyword">int</span>[] result = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">32</span>];</span><br><span class="line">        <span class="keyword">int</span>[] e_k = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">48</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; E.length; i++) &#123;</span><br><span class="line">            e_k[i] = r_content[E[i] - <span class="number">1</span>] ^ key[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/********Sç›’æ›¿æ¢:ç”±48ä½å˜32ä½ï¼Œç°åˆ†å‰²e_kï¼Œç„¶åå†è¿›è¡Œæ›¿æ¢*********/</span></span><br><span class="line">        <span class="keyword">int</span>[][] s = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">8</span>][<span class="number">6</span>];</span><br><span class="line">        <span class="keyword">int</span>[] s_after = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">32</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) &#123;</span><br><span class="line">            System.arraycopy(e_k, i * <span class="number">6</span>, s[i], <span class="number">0</span>, <span class="number">6</span>);</span><br><span class="line">            <span class="keyword">int</span> r = (s[i][<span class="number">0</span>] &lt;&lt; <span class="number">1</span>) + s[i][<span class="number">5</span>];<span class="comment">//æ¨ªåæ ‡</span></span><br><span class="line">            <span class="keyword">int</span> c = (s[i][<span class="number">1</span>] &lt;&lt; <span class="number">3</span>) + (s[i][<span class="number">2</span>] &lt;&lt; <span class="number">2</span>) + (s[i][<span class="number">3</span>] &lt;&lt; <span class="number">1</span>) + s[i][<span class="number">4</span>];<span class="comment">//çºµåæ ‡</span></span><br><span class="line">            String str = Integer.toBinaryString(S_Box[i][r][c]);</span><br><span class="line">            <span class="keyword">while</span> (str.length() &lt; <span class="number">4</span>) &#123;</span><br><span class="line">                str = <span class="string">"0"</span> + str;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++) &#123;</span><br><span class="line">                <span class="keyword">int</span> p = Integer.valueOf(str.charAt(j));</span><br><span class="line">                <span class="keyword">if</span> (p == <span class="number">48</span>) &#123;</span><br><span class="line">                    p = <span class="number">0</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (p == <span class="number">49</span>) &#123;</span><br><span class="line">                    p = <span class="number">1</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">"To bit error!"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                s_after[<span class="number">4</span> * i + j] = p;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/******Sç›’æ›¿æ¢ç»“æŸ*******/</span></span><br><span class="line">        <span class="comment">/****Pç›’æ›¿ä»£****/</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; P.length; i++) &#123;</span><br><span class="line">            result[i] = s_after[P[i] - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆå­å¯†é’¥</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">generateKeys</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (key.length() &lt; <span class="number">8</span>) &#123;</span><br><span class="line">            key = key + key;</span><br><span class="line">        &#125;</span><br><span class="line">        key = key.substring(<span class="number">0</span>, <span class="number">8</span>);</span><br><span class="line">        <span class="keyword">byte</span>[] keys = key.getBytes();</span><br><span class="line">        <span class="keyword">int</span>[] k_bit = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">64</span>];</span><br><span class="line">        <span class="comment">//å–ä½å€¼</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) &#123;</span><br><span class="line">            String k_str = Integer.toBinaryString(keys[i] &amp; <span class="number">0xff</span>);</span><br><span class="line">            <span class="keyword">if</span> (k_str.length() &lt; <span class="number">8</span>) &#123;</span><br><span class="line">                <span class="keyword">int</span> k_size = k_str.length();</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> t = <span class="number">0</span>; t &lt; <span class="number">8</span> - k_size; t++) &#123;</span><br><span class="line">                    k_str = <span class="string">"0"</span> + k_str;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">8</span>; j++) &#123;</span><br><span class="line">                <span class="keyword">int</span> p = Integer.valueOf(k_str.charAt(j));</span><br><span class="line">                <span class="keyword">if</span> (p == <span class="number">48</span>) &#123;</span><br><span class="line">                    p = <span class="number">0</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (p == <span class="number">49</span>) &#123;</span><br><span class="line">                    p = <span class="number">1</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">"To bit error!"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                k_bit[i * <span class="number">8</span> + j] = p;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//k_bitæ˜¯åˆå§‹çš„64ä½é•¿å¯†é’¥ï¼Œä¸‹ä¸€æ­¥å¼€å§‹è¿›è¡Œæ›¿æ¢</span></span><br><span class="line">        <span class="comment">/***********PC-1å‹ç¼©****************/</span></span><br><span class="line">        <span class="keyword">int</span>[] k_new_bit = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">56</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; PC1.length; i++) &#123;</span><br><span class="line">            k_new_bit[i] = k_bit[PC1[i] - <span class="number">1</span>];<span class="comment">/////è¿™ä¸ªå‡1æ³¨æ„ç‚¹</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/**************************/</span></span><br><span class="line">        <span class="keyword">int</span>[] c0 = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">28</span>];</span><br><span class="line">        <span class="keyword">int</span>[] d0 = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">28</span>];</span><br><span class="line">        System.arraycopy(k_new_bit, <span class="number">0</span>, c0, <span class="number">0</span>, <span class="number">28</span>);</span><br><span class="line">        System.arraycopy(k_new_bit, <span class="number">28</span>, d0, <span class="number">0</span>, <span class="number">28</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span>[] c1 = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">28</span>];</span><br><span class="line">            <span class="keyword">int</span>[] d1 = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">28</span>];</span><br><span class="line">            <span class="keyword">if</span> (LFT[i] == <span class="number">1</span>) &#123;</span><br><span class="line">                System.arraycopy(c0, <span class="number">1</span>, c1, <span class="number">0</span>, <span class="number">27</span>);</span><br><span class="line">                c1[<span class="number">27</span>] = c0[<span class="number">0</span>];</span><br><span class="line">                System.arraycopy(d0, <span class="number">1</span>, d1, <span class="number">0</span>, <span class="number">27</span>);</span><br><span class="line">                d1[<span class="number">27</span>] = d0[<span class="number">0</span>];</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (LFT[i] == <span class="number">2</span>) &#123;</span><br><span class="line">                System.arraycopy(c0, <span class="number">2</span>, c1, <span class="number">0</span>, <span class="number">26</span>);</span><br><span class="line">                c1[<span class="number">26</span>] = c0[<span class="number">0</span>];</span><br><span class="line">                c1[<span class="number">27</span>] = c0[<span class="number">1</span>];<span class="comment">//è¿™é‡Œæ‰‹æ®‹ä¹‹å‰å†™æˆc1</span></span><br><span class="line"></span><br><span class="line">                System.arraycopy(d0, <span class="number">2</span>, d1, <span class="number">0</span>, <span class="number">26</span>);</span><br><span class="line">                d1[<span class="number">26</span>] = d0[<span class="number">0</span>];</span><br><span class="line">                d1[<span class="number">27</span>] = d0[<span class="number">1</span>];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">"LFT Error!"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span>[] tmp = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">56</span>];</span><br><span class="line">            System.arraycopy(c1, <span class="number">0</span>, tmp, <span class="number">0</span>, <span class="number">28</span>);</span><br><span class="line">            System.arraycopy(d1, <span class="number">0</span>, tmp, <span class="number">28</span>, <span class="number">28</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; PC2.length; j++) &#123;<span class="comment">//PC2å‹ç¼©ç½®æ¢</span></span><br><span class="line">                sub_key[i][j] = tmp[PC2[j] - <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            c0 = c1;</span><br><span class="line">            d0 = d1;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>CustomDESTest</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lcx.des;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomDESTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        String origin=<span class="string">"https://www.lisongbai.top"</span>;</span><br><span class="line">        System.out.println(<span class="string">"åŸæ–‡ï¼š\n"</span>+origin);</span><br><span class="line">        CustomDES customDES=<span class="keyword">new</span> CustomDES(<span class="string">"LCX"</span>,origin);</span><br><span class="line">        <span class="keyword">byte</span>[] c=customDES.deal(origin.getBytes(),<span class="number">1</span>);</span><br><span class="line">        System.out.println(<span class="string">"å¯†æ–‡ï¼š\n"</span>+<span class="keyword">new</span> String(c));</span><br><span class="line">        <span class="keyword">byte</span>[]p=customDES.deal(c,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">byte</span>[] p_d=<span class="keyword">new</span> <span class="keyword">byte</span>[origin.getBytes().length];</span><br><span class="line">        System.arraycopy(p,<span class="number">0</span>,p_d,<span class="number">0</span>,origin.getBytes().length);</span><br><span class="line">        System.out.println(<span class="string">"æ˜æ–‡ï¼š\n"</span>+<span class="keyword">new</span> String(p));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p><p><a href="https://imgchr.com/i/Kj3ioq" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/11/03/Kj3ioq.md.png" alt="Kj3ioq.md.png"></a></p><h2 id="æ„Ÿæ‚Ÿå¿ƒå¾—"><a href="#æ„Ÿæ‚Ÿå¿ƒå¾—" class="headerlink" title="æ„Ÿæ‚Ÿå¿ƒå¾—"></a>æ„Ÿæ‚Ÿå¿ƒå¾—</h2><p>â€‹        é€šè¿‡è‡ªå·±åŠ¨æ‰‹å®ç°DESåŠ å¯†è§£å¯†ç®—æ³•ï¼Œæˆ‘å¯¹DESçš„åŠ å¯†è§£å¯†è¿‡ç¨‹æœ‰äº†æ›´æ·±çš„è®¤è¯†ï¼Œä¹‹å‰åœ¨è¯¾å ‚ä¸ŠçŸ¥è¯†å¤§è‡´äº†è§£äº†ä¸€ä¸‹æµç¨‹ï¼Œå¾ˆå¤šç»†èŠ‚æ–¹é¢çš„çŸ¥è¯†å¹¶ä¸æ˜¯å¾ˆäº†è§£ï¼Œåœ¨è¿™æ¬¡å¤§ä½œä¸šä¸­ï¼ŒæŸ¥é˜…äº†å¾ˆå¤šèµ„æ–™ï¼Œå¯¹DESåŠ å¯†ç®—æ³•æœ‰äº†æ›´å¤šçš„ä½“ä¼šã€‚<br>â€‹        DESåŠ å¯†æ˜¯å †æˆåŠ å¯†çš„ç»å…¸ç®—æ³•ï¼Œé€šè¿‡å®ƒçš„å®ç°è¿‡ç¨‹å‘ç°å®ƒä½¿ç”¨äº†å¾ˆå¤šæ¬¡ç½®æ¢æ³•ï¼Œé‡‡ç”¨äº†æ··ä¹±å’Œæ‰©æ•£çš„ç»„åˆï¼Œæ¯ä¸ªç»„åˆå…ˆæ›¿æ¢åç½®æ¢ï¼Œå…±è¿›è¡Œäº†16è½®ï¼Œå…¶ä¸­å……åˆ†åˆ©ç”¨äº†Sç›’çš„éå¯¹ç§°æ€§è¿ç®—ï¼Œå¤§å¤§å¢åŠ äº†ç ´è§£éš¾åº¦ï¼Œåœ¨æ²¡æœ‰å¯†é’¥çš„æƒ…å†µä¸‹ï¼Œç ´è§£è€…ä¹‹æ¶èƒ½é€šè¿‡ç©·ä¸¾æ³•æ¥ç ´è§£å¯†é’¥ï¼Œè¿™ç§ç ´è§£æ–¹æ³•è´¹æ—¶è´¹åŠ›ï¼Œæ‰€ä»¥DESçš„å®‰å…¨æ€§è¿˜æ˜¯æŒºé«˜çš„ã€‚<br>é€šè¿‡è¿™æ­¤å¤§ä½œä¸šï¼Œæˆ‘ä½“ä¼šåˆ°äº†å¯†ç å­¦ä¸­åŠ å¯†è®¾è®¡çš„æœ‰è¶£ä¹‹å¤„ï¼Œåœ¨åªæ¥è§¦åˆ°ç†è®ºçŸ¥è¯†çš„æ—¶å€™ï¼Œè§‰å¾—åŠ å¯†ç®—æ³•åªæ˜¯æ¯ç‡¥çš„è¿­ä»£è¿ç®—ï¼Œå®è·µåæ‰è§‰å¾—æ¯ç‡¥çš„è¿­ä»£è¿ç®—æ­£æ˜¯å®ƒè®¾è®¡çš„å¥¥ç§˜æ‰€åœ¨ã€‚åœ¨ä»¥åçš„å­¦ä¹ è¿‡ç¨‹ä¸­ï¼ŒåŠªåŠ›åšåˆ°çŸ¥å…¶ç„¶å¹¶çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åŠ å¯†ç®—æ³• </category>
          
          <category> DES </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œä¿¡æ¯å®‰å…¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>windows10æ­å»ºtruffleåŠå‡ºç°é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ</title>
      <link href="/2020/02/23/windows10%E6%90%AD%E5%BB%BAtruffle%E5%8F%8A%E5%87%BA%E7%8E%B0%E9%97%AE%E9%A2%98%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
      <url>/2020/02/23/windows10%E6%90%AD%E5%BB%BAtruffle%E5%8F%8A%E5%87%BA%E7%8E%B0%E9%97%AE%E9%A2%98%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<h1 id="1-ç‰ˆæœ¬ä¿¡æ¯"><a href="#1-ç‰ˆæœ¬ä¿¡æ¯" class="headerlink" title="1.ç‰ˆæœ¬ä¿¡æ¯"></a>1.ç‰ˆæœ¬ä¿¡æ¯</h1><h2 id="1-1-node"><a href="#1-1-node" class="headerlink" title="1.1 node"></a>1.1 node</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">v12.15.0</span><br></pre></td></tr></table></figure><h2 id="1-2-npm"><a href="#1-2-npm" class="headerlink" title="1.2 npm"></a>1.2 npm</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">npm -v</span><br><span class="line">6.13.4</span><br><span class="line"><span class="meta">#</span><span class="bash">æ¢æº</span></span><br><span class="line">npm config set registry https://registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">npm config list</span><br><span class="line">; cli configs</span><br><span class="line">metrics-registry = "https://registry.npm.taobao.org/"</span><br><span class="line">scope = ""</span><br><span class="line">user-agent = "npm/6.13.4 node/v12.15.0 win32 x64"</span><br><span class="line"></span><br><span class="line">; userconfig C:\Users\12173\.npmrc</span><br><span class="line">registry = "https://registry.npm.taobao.org/"</span><br><span class="line"></span><br><span class="line">; builtin config undefined</span><br><span class="line">prefix = "C:\\Users\\12173\\AppData\\Roaming\\npm"</span><br><span class="line"></span><br><span class="line">; node bin location = E:\Program Files\nodejs\node.exe</span><br><span class="line">; cwd = C:\Users\12173</span><br><span class="line">; HOME = C:\Users\12173</span><br><span class="line">; "npm config ls -l" to show all defaults.</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="1-3-git"><a href="#1-3-git" class="headerlink" title="1.3 git"></a>1.3 git</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git --version</span><br><span class="line">git version 2.21.0.windows.1</span><br></pre></td></tr></table></figure><h2 id="1-4-å®‰è£…ganache-clièŠ‚ç‚¹ä»¿çœŸå™¨"><a href="#1-4-å®‰è£…ganache-clièŠ‚ç‚¹ä»¿çœŸå™¨" class="headerlink" title="1.4 å®‰è£…ganache-clièŠ‚ç‚¹ä»¿çœŸå™¨"></a>1.4 å®‰è£…ganache-clièŠ‚ç‚¹ä»¿çœŸå™¨</h2><h3 id="1-4-1-ç®€ä»‹"><a href="#1-4-1-ç®€ä»‹" class="headerlink" title="1.4.1 ç®€ä»‹"></a>1.4.1 ç®€ä»‹</h3><p>ç”¨äºæµ‹è¯•å’Œå¼€å‘çš„å¿«é€Ÿä»¥å¤ªåŠRPCå®¢æˆ·ç«¯ã€‚</p><p>æ³¨æ„ï¼štestrpc æ˜¯ç°åœ¨çš„ganache-cliã€‚ åƒä½¿ç”¨testrpcä¸€æ ·å»ä½¿ç”¨å®ƒã€‚</p><p> ä¸ºäº†å¿«é€Ÿå¼€å‘å’Œæµ‹è¯•ä»¥å¤ªåŠDAppï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨ä»¥å¤ªåŠèŠ‚ç‚¹ä»¿çœŸå™¨æ¥æ¨¡æ‹ŸåŒºå—é“¾ï¼Œæœ€æµè¡Œçš„èŠ‚ç‚¹ä»¿çœŸå™¨å°±æ˜¯Ganacheï¼Œä¹‹å‰è¢«ç§°ä¸ºTeseRPCã€‚ </p><h3 id="1-4-2-å®‰è£…"><a href="#1-4-2-å®‰è£…" class="headerlink" title="1.4.2 å®‰è£…"></a>1.4.2 å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">npm install -g ganache-cli</span><br><span class="line"></span><br><span class="line">C:\Users\12173\AppData\Roaming\npm\ganache-cli -&gt; C:\Users\12173\AppData\Roaming\npm\node_modules\ganache-cli\cli.js</span><br><span class="line">+ ganache-cli@6.9.1</span><br><span class="line">updated 1 package in 5.506s</span><br><span class="line"></span><br><span class="line">ganache-cli --version</span><br><span class="line">Ganache CLI v6.9.1 (ganache-core: 2.10.2)</span><br></pre></td></tr></table></figure><h2 id="1-5-å®‰è£…solidityç¼–è¯‘å™¨"><a href="#1-5-å®‰è£…solidityç¼–è¯‘å™¨" class="headerlink" title="1.5 å®‰è£…solidityç¼–è¯‘å™¨"></a>1.5 å®‰è£…solidityç¼–è¯‘å™¨</h2><h3 id="1-5-1-ç®€ä»‹"><a href="#1-5-1-ç®€ä»‹" class="headerlink" title="1.5.1 ç®€ä»‹"></a>1.5.1 ç®€ä»‹</h3><p> solidityæ˜¯å¼€å‘ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦çš„ç¼–ç¨‹è¯­è¨€ã€‚[ å®˜ç½‘ ] : <a href="https://solidity.readthedocs.io/en/v0.6.3/" target="_blank" rel="noopener">https://solidity.readthedocs.io/en/v0.6.3/</a> </p><h3 id="1-5-2-å®‰è£…"><a href="#1-5-2-å®‰è£…" class="headerlink" title="1.5.2 å®‰è£…"></a>1.5.2 å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">npm install -g solc</span><br><span class="line"></span><br><span class="line">C:\Users\12173\AppData\Roaming\npm\solcjs -&gt; C:\Users\12173\AppData\Roaming\npm\node_modules\solc\solcjs</span><br><span class="line">+ solc@0.6.3</span><br><span class="line">added 25 packages from 15 contributors in 39.318s</span><br><span class="line"></span><br><span class="line">solcjs -V</span><br><span class="line">0.6.3+commit.8dda9521.Emscripten.clang</span><br></pre></td></tr></table></figure><h2 id="1-6-Web3"><a href="#1-6-Web3" class="headerlink" title="1.6 Web3"></a>1.6 Web3</h2><h3 id="1-6-1-ç®€ä»‹"><a href="#1-6-1-ç®€ä»‹" class="headerlink" title="1.6.1 ç®€ä»‹"></a>1.6.1 ç®€ä»‹</h3><p> web3.jsæ˜¯ä¸€ä¸ªåº“é›†åˆï¼Œä½ å¯ä»¥ä½¿ç”¨HTTPæˆ–IPCè¿æ¥æœ¬åœ°æˆ–è¿œç¨‹ä»¥å¤ªå®ƒèŠ‚ç‚¹è¿›è¡Œäº¤äº’ã€‚ web3çš„JavaScriptåº“èƒ½å¤Ÿä¸ä»¥å¤ªåŠåŒºå—é“¾äº¤äº’ã€‚ å®ƒå¯ä»¥æ£€ç´¢ç”¨æˆ·å¸æˆ·ï¼Œå‘é€äº¤æ˜“ï¼Œä¸æ™ºèƒ½åˆçº¦äº¤äº’ç­‰ã€‚ </p><h3 id="1-6-2-å®‰è£…"><a href="#1-6-2-å®‰è£…" class="headerlink" title="1.6.2 å®‰è£…"></a>1.6.2 å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">npm install -g web3@0.20.2</span><br><span class="line">+ web3@0.20.2</span><br><span class="line">added 6 packages from 9 contributors in 44.408s</span><br><span class="line"></span><br><span class="line">node -p 'require("web3")'</span><br><span class="line">require(web3)</span><br></pre></td></tr></table></figure><h2 id="1-7-Truffle"><a href="#1-7-Truffle" class="headerlink" title="1.7 Truffle"></a>1.7 Truffle</h2><h3 id="1-7-1-ç®€ä»‹"><a href="#1-7-1-ç®€ä»‹" class="headerlink" title="1.7.1 ç®€ä»‹"></a>1.7.1 ç®€ä»‹</h3><p> Truffleæ˜¯é’ˆå¯¹åŸºäºä»¥å¤ªåŠçš„Solidityè¯­è¨€çš„ä¸€å¥—å¼€å‘æ¡†æ¶ã€‚  æœ¬èº«åŸºäºJavascript </p><h3 id="1-7-2-å®‰è£…"><a href="#1-7-2-å®‰è£…" class="headerlink" title="1.7.2 å®‰è£…"></a>1.7.2 å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">npm install -g truffle</span><br><span class="line">C:\Users\12173\AppData\Roaming\npm\truffle -&gt; C:\Users\12173\AppData\Roaming\npm\node_modules\truffle\build\cli.bundled.js</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> truffle@5.1.14 postinstall C:\Users\12173\AppData\Roaming\npm\node_modules\truffle</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> node ./scripts/postinstall.js</span></span><br><span class="line"></span><br><span class="line">- Fetching solc version list from solc-bin. Attempt #1</span><br><span class="line">- Fetching solc version list from solc-bin. Attempt #2</span><br><span class="line">- Fetching solc version list from solc-bin. Attempt #3</span><br><span class="line">+ truffle@5.1.14</span><br><span class="line">added 27 packages from 439 contributors in 121.064s</span><br><span class="line"></span><br><span class="line">truffle --version</span><br><span class="line">Truffle v5.1.14 - a development framework for Ethereum</span><br><span class="line"></span><br><span class="line">Usage: truffle &lt;command&gt; [options]</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">  build     Execute build pipeline (if configuration present)</span><br><span class="line">  compile   Compile contract source files</span><br><span class="line">  config    Set user-level configuration options</span><br><span class="line">  console   Run a console with contract abstractions and commands available</span><br><span class="line">  create    Helper to create new contracts, migrations and tests</span><br><span class="line">  debug     Interactively debug any transaction on the blockchain (experimental)</span><br><span class="line">  deploy    (alias for migrate)</span><br><span class="line">  develop   Open a console with a local development blockchain</span><br><span class="line">  exec      Execute a JS module within this Truffle environment</span><br><span class="line">  help      List all commands or provide information about a specific command</span><br><span class="line">  init      Initialize new and empty Ethereum project</span><br><span class="line">  install   Install a package from the Ethereum Package Registry</span><br><span class="line">  migrate   Run migrations to deploy contracts</span><br><span class="line">  networks  Show addresses for deployed contracts on each network</span><br><span class="line">  obtain    Fetch and cache a specified compiler</span><br><span class="line">  opcode    Print the compiled opcodes for a given contract</span><br><span class="line">  publish   Publish a package to the Ethereum Package Registry</span><br><span class="line">  run       Run a third-party command</span><br><span class="line">  test      Run JavaScript and Solidity tests</span><br><span class="line">  unbox     Download a Truffle Box, a pre-built Truffle project</span><br><span class="line">  version   Show version number and exit</span><br><span class="line">  watch     Watch filesystem for changes and rebuild the project automatically</span><br><span class="line"></span><br><span class="line">See more at http://truffleframework.com/docs</span><br></pre></td></tr></table></figure><h2 id="1-8webpack"><a href="#1-8webpack" class="headerlink" title="1.8webpack"></a>1.8webpack</h2><h3 id="1-8-1ç®€ä»‹"><a href="#1-8-1ç®€ä»‹" class="headerlink" title="1.8.1ç®€ä»‹"></a>1.8.1ç®€ä»‹</h3><p> æœ¬è´¨ä¸Šï¼Œ<em>webpack</em> æ˜¯ä¸€ä¸ªç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„<em>é™æ€æ¨¡å—æ‰“åŒ…å™¨(module bundler)</em>ã€‚å½“ webpack å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šé€’å½’åœ°æ„å»ºä¸€ä¸ª<em>ä¾èµ–å…³ç³»å›¾(dependency graph)</em>ï¼Œå…¶ä¸­åŒ…å«åº”ç”¨ç¨‹åºéœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª <em>bundle</em>ã€‚ </p><h3 id="1-8-2å®‰è£…"><a href="#1-8-2å®‰è£…" class="headerlink" title="1.8.2å®‰è£…"></a>1.8.2å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> npm install -g webpack@3.11.0</span><br><span class="line">C:\Users\12173\AppData\Roaming\npm\webpack -&gt; C:\Users\12173\AppData\Roaming\npm\node_modules\webpack\bin\webpack.js</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> uglifyjs-webpack-plugin@0.4.6 postinstall C:\Users\12173\AppData\Roaming\npm\node_modules\webpack\node_modules\uglifyjs-webpack-plugin</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> node lib/post_install.js</span></span><br><span class="line"></span><br><span class="line">npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.11 (node_modules\webpack\node_modules\fsevents):</span><br><span class="line">npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.11: wanted &#123;"os":"darwin","arch":"any"&#125; (current: &#123;"os":"win32","arch":"x64"&#125;)</span><br><span class="line"></span><br><span class="line">+ webpack@3.11.0</span><br><span class="line">added 333 packages from 285 contributors in 26.975s</span><br><span class="line"></span><br><span class="line">webpack -v</span><br><span class="line">3.11.0</span><br></pre></td></tr></table></figure><h1 id="2-ç›¸å…³çŸ¥è¯†"><a href="#2-ç›¸å…³çŸ¥è¯†" class="headerlink" title="2.ç›¸å…³çŸ¥è¯†"></a>2.ç›¸å…³çŸ¥è¯†</h1><h2 id="2-1-Truffleä¸web3åˆå§‹"><a href="#2-1-Truffleä¸web3åˆå§‹" class="headerlink" title="2.1 Truffleä¸web3åˆå§‹"></a>2.1 Truffleä¸web3åˆå§‹</h2><p><strong>Truffleæä¾›åŠŸèƒ½å¦‚ä¸‹</strong></p><ol><li><p>å†…ç½®æ™ºèƒ½åˆçº¦ç¼–è¯‘ã€é“¾æ¥ã€éƒ¨ç½²å’ŒäºŒè¿›åˆ¶å­—èŠ‚ç ç®¡ç†</p></li><li><p>é’ˆå¯¹å¿«é€Ÿè¿­ä»£å¼€å‘çš„è‡ªåŠ¨åŒ–åˆçº¦</p></li><li><p>å¯è„šæœ¬åŒ–ã€å¯æ‰©å±•éƒ¨ç½²å’Œè¿ç§»æ¡†æ¶</p></li><li><p>ç½‘ç»œç®¡ç†ï¼Œå¯éƒ¨ç½²åˆ°ä»»æ„æ•°é‡çš„å…¬å…±ç½‘ç»œå’Œç§æœ‰ç½‘ç»œ</p></li><li><p>ä½¿ç”¨EthPMå’ŒNPMè¿›è¡ŒåŒ…å®‰è£…ç®¡ç†</p></li><li><p>ç”¨äºç›´æ¥ä¸åˆçº¦é€šä¿¡çš„äº¤äº’å¼æ§åˆ¶å°</p></li><li><p>æ”¯æŒæŒç»­é›†æˆå¯é…ç½®æ„å»ºç®¡é“</p></li><li><p>å¤–éƒ¨è„šæœ¬è¿è¡Œç¨‹åºå¯ä»¥åœ¨Truffleç¯å¢ƒä¸­æ‰§è¡Œè„šæœ¬</p></li><li><p>æä¾›åˆçº¦æŠ½è±¡æ¥å£ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡var instance = Storage.deployed()æ‹¿åˆ°åˆçº¦å¯¹è±¡ï¼Œç„¶ååœ¨JavaScriptä¸­ç›´æ¥æ“ä½œå¯¹åº”çš„åˆçº¦å‡½æ•°ã€‚</p></li></ol><p>*<em>web3.js *</em></p><ol><li><p>web3.jsæä¾›äº†ç”¨äºå’Œgethé€šä¿¡çš„javascript API,å…¶å†…éƒ¨ä½¿ç”¨äº†JSON-RPCä¸gethé€šä¿¡ã€‚</p></li><li><p>JSON-RPCæ˜¯ä¸€ä¸ªæ— çŠ¶æ€ä¸”è½»é‡çº§çš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œå…è®¸ä½¿ç”¨socket,httpç­‰åè®®è¿›è¡Œé€šä¿¡ã€‚ä½¿ç”¨JSONä½œä¸ºæ•°æ®æ ¼å¼ã€‚</p></li><li><p>web3.jså¯ä»¥ä¸æ‰€æœ‰æ”¯æŒJSON-RPCçš„èŠ‚ç‚¹é€šä¿¡ã€‚ä¸ä»…æ”¯æŒETHä¸­çš„APIï¼Œè¿˜æ”¯æŒETHç”Ÿæ€ä¸­å…¶ä»–ç³»ç»Ÿçš„APIï¼Œæ¯”å¦‚whispir</p></li><li><p>whispiræ˜¯ä¸€ä¸ªé›†æˆè¿›ETHçš„æ¶ˆæ¯ç³»ç»Ÿ ï¼Œ å…è®¸DAppå‘é€å°é‡ä¿¡æ¯è¿›è¡Œéå®æ—¶é€šä¿¡ã€‚</p></li></ol><h1 id="3-Truffleé¡¹ç›®æ„å»º"><a href="#3-Truffleé¡¹ç›®æ„å»º" class="headerlink" title="3. Truffleé¡¹ç›®æ„å»º"></a>3. Truffleé¡¹ç›®æ„å»º</h1><h2 id="3-1åˆå§‹åŒ–é¡¹ç›®ï¼ˆtruffle-unbox-webpackï¼‰"><a href="#3-1åˆå§‹åŒ–é¡¹ç›®ï¼ˆtruffle-unbox-webpackï¼‰" class="headerlink" title="3.1åˆå§‹åŒ–é¡¹ç›®ï¼ˆtruffle unbox webpackï¼‰"></a>3.1åˆå§‹åŒ–é¡¹ç›®ï¼ˆtruffle unbox webpackï¼‰</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line">truffle unbox webpack</span><br><span class="line">This directory is non-empty...</span><br><span class="line">? Proceed anyway? (Y/n)</span><br><span class="line">Starting unbox...</span><br><span class="line">=================</span><br><span class="line"></span><br><span class="line">? Proceed anyway? Yes</span><br><span class="line">âˆš Preparing to download box</span><br><span class="line">âˆš Downloading</span><br><span class="line">gyp ERR! find Python</span><br><span class="line">gyp ERR! find Python Python is not set from command line or npm configuration</span><br><span class="line">gyp ERR! find Python Python is not set from environment variable PYTHON</span><br><span class="line">gyp ERR! find Python checking if "python" can be used</span><br><span class="line">gyp ERR! find Python - "python" is not in PATH or produced an error</span><br><span class="line">gyp ERR! find Python checking if "python2" can be used</span><br><span class="line">gyp ERR! find Python - "python2" is not in PATH or produced an error</span><br><span class="line">gyp ERR! find Python checking if "python3" can be used</span><br><span class="line">gyp ERR! find Python - "python3" is not in PATH or produced an error</span><br><span class="line">gyp ERR! find Python checking if the py launcher can be used to find Python 2</span><br><span class="line">gyp ERR! find Python - "py.exe" is not in PATH or produced an error</span><br><span class="line">gyp ERR! find Python checking if Python is C:\Python27\python.exe</span><br><span class="line">gyp ERR! find Python - "C:\Python27\python.exe" could not be run</span><br><span class="line">gyp ERR! find Python checking if Python is C:\Python37\python.exe</span><br><span class="line">gyp ERR! find Python - "C:\Python37\python.exe" could not be run</span><br><span class="line">gyp ERR! find Python</span><br><span class="line">gyp ERR! find Python **********************************************************</span><br><span class="line">gyp ERR! find Python You need to install the latest version of Python.</span><br><span class="line">gyp ERR! find Python Node-gyp should be able to find and use Python. If not,</span><br><span class="line">gyp ERR! find Python you can try one of the following options:</span><br><span class="line">gyp ERR! find Python - Use the switch --python="C:\Path\To\python.exe"</span><br><span class="line">gyp ERR! find Python   (accepted by both node-gyp and npm)</span><br><span class="line">gyp ERR! find Python - Set the environment variable PYTHON</span><br><span class="line">gyp ERR! find Python - Set the npm configuration variable python:</span><br><span class="line">gyp ERR! find Python   npm config set python "C:\Path\To\python.exe"</span><br><span class="line">gyp ERR! find Python For more information consult the documentation at:</span><br><span class="line">gyp ERR! find Python https://github.com/nodejs/node-gyp#installation</span><br><span class="line">gyp ERR! find Python **********************************************************</span><br><span class="line">gyp ERR! find Python</span><br><span class="line">gyp ERR! configure error</span><br><span class="line">gyp ERR! stack Error: Could not find any Python installation to use</span><br><span class="line">gyp ERR! stack     at PythonFinder.fail (E:\Program Files\nodejs\node_modules\npm\node_modules\node-gyp\lib\find-python.js:307:47)</span><br><span class="line">gyp ERR! stack     at PythonFinder.runChecks (E:\Program Files\nodejs\node_modules\npm\node_modules\node-gyp\lib\find-python.js:136:21)</span><br><span class="line">gyp ERR! stack     at PythonFinder.&lt;anonymous&gt; (E:\Program Files\nodejs\node_modules\npm\node_modules\node-gyp\lib\find-python.js:225:16)</span><br><span class="line">gyp ERR! stack     at PythonFinder.execFileCallback (E:\Program Files\nodejs\node_modules\npm\node_modules\node-gyp\lib\find-python.js:271:16)</span><br><span class="line">gyp ERR! stack     at exithandler (child_process.js:302:5)</span><br><span class="line">gyp ERR! stack     at ChildProcess.errorhandler (child_process.js:314:5)</span><br><span class="line">gyp ERR! stack     at ChildProcess.emit (events.js:223:5)</span><br><span class="line">gyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:270:12)</span><br><span class="line">gyp ERR! stack     at onErrorNT (internal/child_process.js:456:16)</span><br><span class="line">gyp ERR! stack     at processTicksAndRejections (internal/process/task_queues.js:81:21)</span><br><span class="line">gyp ERR! System Windows_NT 10.0.16299</span><br><span class="line">gyp ERR! command "E:\\Program Files\\nodejs\\node.exe" "E:\\Program Files\\nodejs\\node_modules\\npm\\node_modules\\node-gyp\\bin\\node-gyp.js" "rebuild"</span><br><span class="line">gyp ERR! cwd E:\Dapp\hello\app\node_modules\keccak</span><br><span class="line">gyp ERR! node -v v12.15.0</span><br><span class="line">gyp ERR! node-gyp -v v5.0.5</span><br><span class="line">gyp ERR! not ok</span><br><span class="line">/ Downloading</span><br><span class="line">npm ERR! errno 1</span><br><span class="line">npm ERR! keccak@2.1.0 rebuild: `node-gyp rebuild`</span><br><span class="line"></span><br><span class="line">npm ERR!</span><br><span class="line">npm ERR! Failed at the keccak@2.1.0 rebuild script.</span><br><span class="line">npm ERR! This is probably not a problem with npm. There is likely additional logging output above.</span><br><span class="line">npm WARN Local package.json exists, but node_modules missing, did you mean to install?</span><br><span class="line"></span><br><span class="line">npm ERR! A complete log of this run can be found in:</span><br><span class="line">npm ERR!     C:\Users\12173\AppData\Roaming\npm-cache\_logs\2020-02-22T17_26_38_700Z-debug.log</span><br><span class="line">gyp ERR! find Python</span><br><span class="line"></span><br><span class="line">gyp ERR! find Python Python is not set from environment variable PYTHON</span><br><span class="line">gyp ERR! find Python checking if "python" can be used</span><br><span class="line">gyp ERR! find Python - "python" is not in PATH or produced an error</span><br><span class="line">gyp ERR! find Python checking if "python2" can be used</span><br><span class="line">gyp ERR! find Python - "python2" is not in PATH or produced an error</span><br><span class="line">gyp ERR! find Python checking if "python3" can be used</span><br><span class="line">gyp ERR! find Python - "python3" is not in PATH or produced an error</span><br><span class="line">gyp ERR! find Python checking if the py launcher can be used to find Python 2</span><br><span class="line">gyp ERR! find Python - "py.exe" is not in PATH or produced an error</span><br><span class="line">gyp ERR! find Python checking if Python is C:\Python27\python.exe</span><br><span class="line">gyp ERR! find Python - "C:\Python27\python.exe" could not be run</span><br><span class="line">gyp ERR! find Python checking if Python is C:\Python37\python.exe</span><br><span class="line">gyp ERR! find Python - "C:\Python37\python.exe" could not be run</span><br><span class="line">gyp ERR! find Python</span><br><span class="line">gyp ERR! find Python **********************************************************</span><br><span class="line">gyp ERR! find Python You need to install the latest version of Python.</span><br><span class="line">gyp ERR! find Python Node-gyp should be able to find and use Python. If not,</span><br><span class="line">gyp ERR! find Python you can try one of the following options:</span><br><span class="line">gyp ERR! find Python - Use the switch --python="C:\Path\To\python.exe"</span><br><span class="line">gyp ERR! find Python   (accepted by both node-gyp and npm)</span><br><span class="line">gyp ERR! find Python - Set the environment variable PYTHON</span><br><span class="line">gyp ERR! find Python - Set the npm configuration variable python:</span><br><span class="line">gyp ERR! find Python   npm config set python "C:\Path\To\python.exe"</span><br><span class="line">gyp ERR! find Python For more information consult the documentation at:</span><br><span class="line">gyp ERR! find Python https://github.com/nodejs/node-gyp#installation</span><br><span class="line">gyp ERR! find Python **********************************************************</span><br><span class="line">gyp ERR! find Python</span><br><span class="line">gyp ERR! configure error</span><br><span class="line">gyp ERR! stack Error: Could not find any Python installation to use</span><br><span class="line">gyp ERR! stack     at PythonFinder.fail (E:\Program Files\nodejs\node_modules\npm\node_modules\node-gyp\lib\find-python.js:307:47)</span><br><span class="line">gyp ERR! stack     at PythonFinder.runChecks (E:\Program Files\nodejs\node_modules\npm\node_modules\node-gyp\lib\find-python.js:136:21)</span><br><span class="line">gyp ERR! stack     at PythonFinder.&lt;anonymous&gt; (E:\Program Files\nodejs\node_modules\npm\node_modules\node-gyp\lib\find-python.js:225:16)</span><br><span class="line">gyp ERR! stack     at PythonFinder.execFileCallback (E:\Program Files\nodejs\node_modules\npm\node_modules\node-gyp\lib\find-python.js:271:16)</span><br><span class="line">gyp ERR! stack     at exithandler (child_process.js:302:5)</span><br><span class="line">gyp ERR! stack     at ChildProcess.errorhandler (child_process.js:314:5)</span><br><span class="line">gyp ERR! stack     at ChildProcess.emit (events.js:223:5)</span><br><span class="line">gyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:270:12)</span><br><span class="line">gyp ERR! stack     at onErrorNT (internal/child_process.js:456:16)</span><br><span class="line">gyp ERR! stack     at processTicksAndRejections (internal/process/task_queues.js:81:21)</span><br><span class="line">gyp ERR! System Windows_NT 10.0.16299</span><br><span class="line">gyp ERR! command "E:\\Program Files\\nodejs\\node.exe" "E:\\Program Files\\nodejs\\node_modules\\npm\\node_modules\\node-gyp\\bin\\node-gyp.js" "rebuild"</span><br><span class="line">gyp ERR! cwd E:\Dapp\hello\app\node_modules\secp256k1</span><br><span class="line">gyp ERR! node -v v12.15.0</span><br><span class="line">gyp ERR! node-gyp -v v5.0.5</span><br><span class="line">gyp ERR! not ok</span><br><span class="line">npm ERR! code ELIFECYCLE</span><br><span class="line">npm ERR! errno 1</span><br><span class="line">npm ERR! secp256k1@3.7.1 rebuild: `node-gyp rebuild`</span><br><span class="line">npm ERR! Exit status 1</span><br><span class="line">npm ERR!</span><br><span class="line">npm ERR! Failed at the secp256k1@3.7.1 rebuild script.</span><br><span class="line">npm ERR! This is probably not a problem with npm. There is likely additional logging output above.</span><br><span class="line">npm WARN Local package.json exists, but node_modules missing, did you mean to install?</span><br><span class="line"></span><br><span class="line">npm ERR! A complete log of this run can be found in:</span><br><span class="line">npm ERR!     C:\Users\12173\AppData\Roaming\npm-cache\_logs\2020-02-22T17_26_39_779Z-debug.log</span><br><span class="line">npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.9 (node_modules\fsevents):</span><br><span class="line">npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.9: wanted &#123;"os":"darwin","arch":"any"&#125; (current: &#123;"os":"win32","arch":"x64"&#125;)</span><br><span class="line"></span><br><span class="line">âˆš cleaning up temporary files</span><br><span class="line">âˆš Setting up box</span><br><span class="line"></span><br><span class="line">Unbox successful, sweet!</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line"></span><br><span class="line">  Compile:              truffle compile</span><br><span class="line">  Migrate:              truffle migrate</span><br><span class="line">  Test contracts:       truffle test</span><br><span class="line">  Run dev server:       cd app &amp;&amp; npm run dev</span><br><span class="line">  Build for production: cd app &amp;&amp; npm run build</span><br></pre></td></tr></table></figure><p>è§£å†³æ²¡æœ‰pythonç¯å¢ƒçš„é—®é¢˜ï¼š</p><p>æˆ‘ä»¬é€‰æ‹©å®‰è£…windows-build-tools,ä»–çš„ä¾èµ–ä¸­åŒ…å«ä¸€äº›Visual Studio Build Toolsä»¥åŠpython2.7</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">npm install --global --production windows-build-tools </span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> windows-build-tools@5.2.2 postinstall C:\Users\12173\AppData\Roaming\npm\node_modules\windows-build-tools</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> node ./dist/index.js</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Downloading python-2.7.15.amd64.msi</span><br><span class="line"><span class="meta">[&gt;</span><span class="bash">                                            ] 0.0% (0 B/s)</span></span><br><span class="line">Downloaded python-2.7.15.amd64.msi. Saved to C:\Users\12173\.windows-build-tools\python-2.7.15.amd64.msi.</span><br><span class="line">Downloading vs_BuildTools.exe</span><br><span class="line"><span class="meta">[&gt;</span><span class="bash">                                            ] 0.0% (0 B/s)</span></span><br><span class="line">Downloaded vs_BuildTools.exe. Saved to C:\Users\12173\.windows-build-tools\vs_BuildTools.exe.</span><br><span class="line"></span><br><span class="line">Starting installation...</span><br><span class="line">Launched installers, now waiting for them to finish.</span><br><span class="line">This will likely take some time - please be patient!</span><br><span class="line"></span><br><span class="line">Status from the installers:</span><br><span class="line">---------- Visual Studio Build Tools ----------</span><br><span class="line">Successfully installed Visual Studio Build Tools.</span><br><span class="line">------------------- Python --------------------</span><br><span class="line">Action ended 12:45:23: MsiUnpublishAssemblies. Return value 1.</span><br><span class="line">Action start 12:45:23: UnpublishFeatures.</span><br><span class="line">Action ended 12:45:23: UnpublishFeatures. Return value 1.</span><br><span class="line">Action start 12:45:23: StopServices.</span><br><span class="line">Action ended 12:45:23: StopServices. Return value 1.</span><br><span class="line"></span><br><span class="line">Now configuring the Visual Studio Build Tools and Python...</span><br><span class="line"></span><br><span class="line">All done!</span><br><span class="line"></span><br><span class="line">+ windows-build-tools@5.2.2</span><br><span class="line">updated 1 package in 15.463s</span><br></pre></td></tr></table></figure><p><strong>é…ç½®python2.7çš„ç¯å¢ƒå˜é‡</strong></p><p>åœ¨ç³»ç»Ÿå˜é‡pathä¸‹æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p><p>C:\Users\12173.windows-build-tools\python27</p><p>åˆå§‹åŒ–æˆåŠŸç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> truffle unbox webpack</span></span><br><span class="line"></span><br><span class="line">Starting unbox...</span><br><span class="line">=================</span><br><span class="line"></span><br><span class="line">- Preparing to download box</span><br><span class="line">âˆš Preparing to download box</span><br><span class="line">- Downloading</span><br><span class="line">âˆš Downloading</span><br><span class="line">npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.9 (node_modules\fsevents):</span><br><span class="line">npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.9: wanted &#123;"os":"darwin","arch":"any"&#125; (current: &#123;"os":"win32","arch":"x64"&#125;)</span><br><span class="line"></span><br><span class="line">- cleaning up temporary files</span><br><span class="line">âˆš cleaning up temporary files</span><br><span class="line">- Setting up box</span><br><span class="line">âˆš Setting up box</span><br><span class="line"></span><br><span class="line">Unbox successful, sweet!</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line"></span><br><span class="line">  Compile:              truffle compile</span><br><span class="line">  Migrate:              truffle migrate</span><br><span class="line">  Test contracts:       truffle test</span><br><span class="line">  Run dev server:       cd app &amp;&amp; npm run dev</span><br><span class="line">  Build for production: cd app &amp;&amp; npm run build</span><br></pre></td></tr></table></figure><h2 id="3-2-ä¿®æ”¹truffleé…ç½®"><a href="#3-2-ä¿®æ”¹truffleé…ç½®" class="headerlink" title="3.2 ä¿®æ”¹truffleé…ç½®"></a>3.2 ä¿®æ”¹truffleé…ç½®</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">development: &#123;</span><br><span class="line"> host: <span class="string">"127.0.0.1"</span>,     <span class="comment">// Localhost (default: none)</span></span><br><span class="line"> port: <span class="number">8545</span>,            <span class="comment">// Standard Ethereum port (default: none)</span></span><br><span class="line"> network_id: <span class="string">"*"</span>,       <span class="comment">// Any network (default: none)</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="3-3å¯åŠ¨èŠ‚ç‚¹ï¼ˆ-ganache-cli-ï¼‰"><a href="#3-3å¯åŠ¨èŠ‚ç‚¹ï¼ˆ-ganache-cli-ï¼‰" class="headerlink" title="3.3å¯åŠ¨èŠ‚ç‚¹ï¼ˆ ganache-cli ï¼‰"></a>3.3å¯åŠ¨èŠ‚ç‚¹ï¼ˆ ganache-cli ï¼‰</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ganache-cli</span></span><br><span class="line">Ganache CLI v6.9.1 (ganache-core: 2.10.2)</span><br><span class="line"></span><br><span class="line">Available Accounts</span><br><span class="line">==================</span><br><span class="line">(0) 0xc1a8803eAA83aCb7bf942e5cAf4284b0e2AdcDD7 (100 ETH)</span><br><span class="line">(1) 0xd188bc0a7BEE5890dcd0D59d384199520D75665D (100 ETH)</span><br><span class="line">(2) 0xC7be8b832cb3A3285803a006648Fe4dB0E0e4dD9 (100 ETH)</span><br><span class="line">(3) 0xe1F1B3C361fd5361ad131aA9BBfDef9BaC3f009C (100 ETH)</span><br><span class="line">(4) 0x2d8AfB48dA53BDFFd25B52d7f89A1455769571C7 (100 ETH)</span><br><span class="line">(5) 0x8Ce8ceF65b854A49df75D7f9DcCd2a8017E263B8 (100 ETH)</span><br><span class="line">(6) 0x87d5646Fcb48DBB8d0453104EDe3bb8b75fc75b6 (100 ETH)</span><br><span class="line">(7) 0x6B950A801d325a08Fe7d064E2D1A60A700dA0812 (100 ETH)</span><br><span class="line">(8) 0x74C29Af89F6ABD921059B3666168CD78F9144aE7 (100 ETH)</span><br><span class="line">(9) 0x96708eaE55B8D3749493b7069692E31BDc9B4465 (100 ETH)</span><br><span class="line"></span><br><span class="line">Private Keys</span><br><span class="line">==================</span><br><span class="line">(0) 0xe71b27443128f13736d4abf56be959231a495e240827fecda3e89671ddaf03c2</span><br><span class="line">(1) 0xc6d43777cce13673ffce12406437e97d85f10809704643a6b348c00cb7bbeea3</span><br><span class="line">(2) 0x9bdcbb3a51e3645c4788091f27fa33043f6a1c7ad078c654482bc04c847bd41b</span><br><span class="line">(3) 0x0978ac0611e532bac1697beca2b7494981bababc9680a0d8176df3ef8a7f9e13</span><br><span class="line">(4) 0xf0e5af8777fee7fc5aa1dff3ffac6f41f9f28a3da4abd300e9b5439b309822d3</span><br><span class="line">(5) 0x9475d9b1047e2d52be6d9ab4c0eaeba2d0ecc54a305d3e75874551d0308d83cf</span><br><span class="line">(6) 0x496a8ceed4f5c273905ade586e654c1504cbeaab61128e0197aa81bcfa0badd9</span><br><span class="line">(7) 0xea4a812229f425bcab97c684b7aade7399e35bbe3f27971ff6c4d394d862a64f</span><br><span class="line">(8) 0xba0a1f75915f771b4e24ceee2a96841e7d2f57849569b3da4d6e567b3206f278</span><br><span class="line">(9) 0x79fa9edf9864b0f90c0b0e88e69cb56eb7a01e33f07c669b82ee053bd1248d3d</span><br><span class="line"></span><br><span class="line">HD Wallet</span><br><span class="line">==================</span><br><span class="line">Mnemonic:      deputy explain stock just boat year health desk arrive double almost depend</span><br><span class="line">Base HD Path:  m/44'/60'/0'/0/&#123;account_index&#125;</span><br><span class="line"></span><br><span class="line">Gas Price</span><br><span class="line">==================</span><br><span class="line">20000000000</span><br><span class="line"></span><br><span class="line">Gas Limit</span><br><span class="line">==================</span><br><span class="line">6721975</span><br><span class="line"></span><br><span class="line">Call Gas Limit</span><br><span class="line">==================</span><br><span class="line">9007199254740991</span><br><span class="line"></span><br><span class="line">Listening on 127.0.0.1:8545</span><br></pre></td></tr></table></figure><p> æˆåŠŸä¹‹åï¼Œä¼šç»™è‡ªåŠ¨å»ºç«‹10ä¸ªè´¦æˆ·ï¼Œå¿…é¡»å…ˆå¯åŠ¨è¿™ä¸ªä¹‹åæ‰èƒ½åˆçº¦çš„ç¼–è¯‘ä¸éƒ¨ç½²ã€‚å¦åˆ™éƒ¨ç½²ä¸æˆåŠŸã€‚ </p><h2 id="3-4-å®‰è£…é¡¹ç›®ä¾èµ–çš„NPMåŒ…"><a href="#3-4-å®‰è£…é¡¹ç›®ä¾èµ–çš„NPMåŒ…" class="headerlink" title="3.4 å®‰è£…é¡¹ç›®ä¾èµ–çš„NPMåŒ…"></a>3.4 å®‰è£…é¡¹ç›®ä¾èµ–çš„NPMåŒ…</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br><span class="line">npm WARN saveError ENOENT: no such file or directory, open 'E:\Dapp\myproject\package.json'</span><br><span class="line">npm WARN enoent ENOENT: no such file or directory, open 'E:\Dapp\myproject\package.json'</span><br><span class="line">npm WARN myproject No description</span><br><span class="line">npm WARN myproject No repository field.</span><br><span class="line">npm WARN myproject No README data</span><br><span class="line">npm WARN myproject No license field.</span><br><span class="line"></span><br><span class="line">up to date in 0.418s</span><br></pre></td></tr></table></figure><p><strong>å‡ºé”™åŸå› ï¼š</strong></p><p>ç¼ºå°‘<strong>package.json</strong>æ–‡ä»¶ã€‚</p><p>è§£å†³åŠæ³•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">åˆå§‹åŒ–é¡¹ç›®</span></span><br><span class="line">npm init -f</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">å®‰è£…ä¾èµ–</span></span><br><span class="line">npm install formidable --save</span><br></pre></td></tr></table></figure><p><code>-f</code>è¡¨ç¤ºforceçš„æ„æ€ï¼Œä¸åŠ è¿™ä¸ªï¼Œnpmä¼šè®©ä½ è¾“å…¥ä¸€å †ä¿¡æ¯ï¼Œæ¯”å¦‚nameã€versionä¹‹ç±»ï¼Œå¦‚æœåªæ˜¯åšåšå®éªŒå°demoï¼Œç›´æ¥<code>-f</code>ï¼Œnpmå¸®ä½ åˆå§‹åŒ–package.jsonï¼Œå¹¶å¡«å……å„ç§é»˜è®¤å€¼ï¼Œçœäº‹ã€‚</p><p><code>--save</code>è¡¨ç¤ºå°†å®‰è£…çš„åŒ…åŠ å…¥ä¾èµ–åˆ—è¡¨çš„æ„æ€ï¼Œå¯ä»¥çœ‹ä¸‹package.json é‡Œçš„<code>dependencies</code>å­—æ®µã€‚åé¢å†è¿è¡Œ <code>npm install</code>ï¼Œå°±ä¼šæŠŠæ‰€æœ‰ä¾èµ–å®‰è£…ä¸‹æ¥ã€‚å¦‚æœä¸åŠ <code>--save</code>ï¼Œä»€ä¹ˆéƒ½ä¸ä¼šå®‰è£…ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">npm init -f</span><br><span class="line">npm WARN using --force I sure hope you know what you are doing.</span><br><span class="line">Wrote to E:\Dapp\myproject\package.json:</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  "name": "myproject",</span><br><span class="line">  "version": "1.0.0",</span><br><span class="line">  "description": "",</span><br><span class="line">  "main": "truffle-config.js",</span><br><span class="line">  "directories": &#123;</span><br><span class="line">    "test": "test"</span><br><span class="line">  &#125;,</span><br><span class="line">  "scripts": &#123;</span><br><span class="line">    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"</span><br><span class="line">  &#125;,</span><br><span class="line">  "keywords": [],</span><br><span class="line">  "author": "",</span><br><span class="line">  "license": "ISC"</span><br><span class="line">  </span><br><span class="line">npm install formidable --save</span><br><span class="line">npm WARN myproject@1.0.0 No description</span><br><span class="line">npm WARN myproject@1.0.0 No repository field.</span><br><span class="line"></span><br><span class="line">+ formidable@1.2.1</span><br><span class="line">added 1 package in 0.438s</span><br></pre></td></tr></table></figure><p><strong>é”™è¯¯æè¿°ï¼š</strong></p><p>ç¼ºå°‘æè¿°ã€ç¼ºå°‘ä»“åº“ã€‚</p><p><strong>è§£å†³åŠæ³•ï¼š</strong></p><p>ä¿®æ”¹package.å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"myproject"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="attr">"description"</span>: <span class="string">"my first project"</span>,</span><br><span class="line">  <span class="attr">"main"</span>: <span class="string">"truffle-config.js"</span>,</span><br><span class="line">  <span class="attr">"directories"</span>: &#123;</span><br><span class="line">    <span class="attr">"test"</span>: <span class="string">"test"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"keywords"</span>: [],</span><br><span class="line">  <span class="attr">"author"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="attr">"license"</span>: <span class="string">"ISC"</span>,</span><br><span class="line">  <span class="attr">"private"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">"dependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"formidable"</span>: <span class="string">"^1.2.1"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install formidable --save</span><br><span class="line">+ formidable@1.2.1</span><br><span class="line">updated 1 package in 0.353s</span><br></pre></td></tr></table></figure><h2 id="3-5ç¼–è¯‘åˆçº¦ï¼ˆtruffle-compileï¼‰"><a href="#3-5ç¼–è¯‘åˆçº¦ï¼ˆtruffle-compileï¼‰" class="headerlink" title="3.5ç¼–è¯‘åˆçº¦ï¼ˆtruffle compileï¼‰"></a>3.5ç¼–è¯‘åˆçº¦ï¼ˆtruffle compileï¼‰</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">E:\Dapp\myproject&gt;truffle compile</span><br><span class="line"></span><br><span class="line">Compiling your contracts...</span><br><span class="line">===========================</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Compiling .\contracts\ConvertLib.sol</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Compiling .\contracts\MetaCoin.sol</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Compiling .\contracts\Migrations.sol</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Artifacts written to E:\Dapp\myproject\build\contracts</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Compiled successfully using:</span></span><br><span class="line">   - solc: 0.5.16+commit.9c3226ce.Emscripten.clang</span><br></pre></td></tr></table></figure><h2 id="3-6éƒ¨ç½²åˆçº¦ï¼ˆtruffle-migrateï¼‰"><a href="#3-6éƒ¨ç½²åˆçº¦ï¼ˆtruffle-migrateï¼‰" class="headerlink" title="3.6éƒ¨ç½²åˆçº¦ï¼ˆtruffle migrateï¼‰"></a>3.6éƒ¨ç½²åˆçº¦ï¼ˆtruffle migrateï¼‰</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">E:\Dapp\myproject&gt;truffle migrate</span><br><span class="line"></span><br><span class="line">Compiling your contracts...</span><br><span class="line">===========================</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Compiling .\contracts\ConvertLib.sol</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Compiling .\contracts\MetaCoin.sol</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Compiling .\contracts\Migrations.sol</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Artifacts written to E:\Dapp\myproject\build\contracts</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Compiled successfully using:</span></span><br><span class="line">   - solc: 0.5.16+commit.9c3226ce.Emscripten.clang</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Starting migrations...</span><br><span class="line">======================</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Network name:    <span class="string">'development'</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Network id:      1582444858253</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Block gas <span class="built_in">limit</span>: 0x6691b7</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1_initial_migration.js</span><br><span class="line">======================</span><br><span class="line"></span><br><span class="line">   Deploying 'Migrations'</span><br><span class="line">   ----------------------</span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> transaction <span class="built_in">hash</span>:    0xe0b8512e708ca45c8b2e7237f689f61f658b4075f149f76cb8c842363f848af0</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> Blocks: 0            Seconds: 0</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> contract address:    0x9A73F98453dF48993F7a252C1e7810C05C976891</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> block number:        1</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> block timestamp:     1582446022</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> account:             0xc1a8803eAA83aCb7bf942e5cAf4284b0e2AdcDD7</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> balance:             99.9967165</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> gas used:            164175</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> gas price:           20 gwei</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> value sent:          0 ETH</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> total cost:          0.0032835 ETH</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> Saving migration to chain.</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> Saving artifacts</span></span><br><span class="line">   -------------------------------------</span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> Total cost:           0.0032835 ETH</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2_deploy_contracts.js</span><br><span class="line">=====================</span><br><span class="line"></span><br><span class="line">   Deploying 'ConvertLib'</span><br><span class="line">   ----------------------</span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> transaction <span class="built_in">hash</span>:    0xb5e1469996cbd6f1592edce0d68c9661abb9c6d47d1b9af3b9121e7273c4c987</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> Blocks: 0            Seconds: 0</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> contract address:    0xe8b65D954EC3dB61A068184DAFAEcc7a4Ce3784E</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> block number:        3</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> block timestamp:     1582446023</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> account:             0xc1a8803eAA83aCb7bf942e5cAf4284b0e2AdcDD7</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> balance:             99.99396028</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> gas used:            95470</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> gas price:           20 gwei</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> value sent:          0 ETH</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> total cost:          0.0019094 ETH</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   Linking</span><br><span class="line">   -------</span><br><span class="line">   * Contract: MetaCoin &lt;--&gt; Library: ConvertLib (at address: 0xe8b65D954EC3dB61A068184DAFAEcc7a4Ce3784E)</span><br><span class="line"></span><br><span class="line">   Deploying 'MetaCoin'</span><br><span class="line">   --------------------</span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> transaction <span class="built_in">hash</span>:    0x411669a9e6bb3c8986d411433ce92e4c2a89228069221b2d2f25efe01764bc9b</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> Blocks: 0            Seconds: 0</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> contract address:    0xC0B8C2A1384b4bacE94FA448B7cA1fD01C012f68</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> block number:        4</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> block timestamp:     1582446023</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> account:             0xc1a8803eAA83aCb7bf942e5cAf4284b0e2AdcDD7</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> balance:             99.98822898</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> gas used:            286565</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> gas price:           20 gwei</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> value sent:          0 ETH</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> total cost:          0.0057313 ETH</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> Saving migration to chain.</span></span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> Saving artifacts</span></span><br><span class="line">   -------------------------------------</span><br><span class="line"><span class="meta">   &gt;</span><span class="bash"> Total cost:           0.0076407 ETH</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Summary</span><br><span class="line">=======</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Total deployments:   3</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Final cost:          0.0109242 ETH</span></span><br></pre></td></tr></table></figure><h2 id="3-7å¯åŠ¨Dappï¼ˆnpm-run-devï¼‰"><a href="#3-7å¯åŠ¨Dappï¼ˆnpm-run-devï¼‰" class="headerlink" title="3.7å¯åŠ¨Dappï¼ˆnpm run devï¼‰"></a>3.7å¯åŠ¨Dappï¼ˆnpm run devï¼‰</h2><p><strong>æ³¨æ„ï¼š</strong>éœ€è¦åœ¨appç›®å½•ä¸‹æ‰§è¡Œï¼Œæˆ–è€…åœ¨å½“å‰ç›®å½•æ‰§è¡Œcd app &amp;&amp; npm run dev</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br><span class="line">npm ERR! missing script: dev</span><br><span class="line"></span><br><span class="line">npm ERR! A complete log of this run can be found in:</span><br><span class="line">npm ERR!     C:\Users\12173\AppData\Roaming\npm-cache\_logs\2020-02-23T08_21_47_877Z-debug.log</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">E:\Dapp\webpacktest\app&gt;npm run dev</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> app@1.0.0 dev E:\Dapp\webpacktest\app</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> webpack-dev-server</span></span><br><span class="line"></span><br><span class="line">i ï½¢wdsï½£: Project is running at http://localhost:8080/</span><br><span class="line">i ï½¢wdsï½£: webpack output is served from /</span><br><span class="line">i ï½¢wdsï½£: Content not from webpack is served from E:\Dapp\webpacktest\app\dist</span><br><span class="line">Ã— ï½¢wdmï½£: Hash: 438dc1a71410c6fb5b06</span><br><span class="line">Version: webpack 4.41.2</span><br><span class="line">Time: 1794ms</span><br><span class="line">Built at: 2020-02-23 16:52:17</span><br><span class="line">     Asset       Size  Chunks             Chunk Names</span><br><span class="line">index.html  879 bytes          [emitted]</span><br><span class="line">  index.js   2.37 MiB    main  [emitted]  main</span><br><span class="line">Entrypoint main = index.js</span><br><span class="line">[0] multi (webpack)-dev-server/client?http://localhost:8080 ./src/index.js 40 bytes &#123;main&#125; [built]</span><br><span class="line">[./node_modules/ansi-html/index.js] 4.16 KiB &#123;main&#125; [built]</span><br><span class="line">[./node_modules/html-entities/index.js] 231 bytes &#123;main&#125; [built]</span><br><span class="line">[./node_modules/loglevel/lib/loglevel.js] 8.36 KiB &#123;main&#125; [built]</span><br><span class="line">[./node_modules/web3/src/index.js] 2.01 KiB &#123;main&#125; [built]</span><br><span class="line">[./node_modules/webpack-dev-server/client/index.js?http://localhost:8080] (webpack)-dev-server/client?http://localhost:8080 4.29 KiB &#123;main&#125; [built]</span><br><span class="line">[./node_modules/webpack-dev-server/client/overlay.js] (webpack)-dev-server/client/overlay.js 3.51 KiB &#123;main&#125; [built]</span><br><span class="line">[./node_modules/webpack-dev-server/client/socket.js] (webpack)-dev-server/client/socket.js 1.53 KiB &#123;main&#125; [built]</span><br><span class="line">[./node_modules/webpack-dev-server/client/utils/createSocketUrl.js] (webpack)-dev-server/client/utils/createSocketUrl.js 2.89 KiB &#123;main&#125; [built]</span><br><span class="line">[./node_modules/webpack-dev-server/client/utils/log.js] (webpack)-dev-server/client/utils/log.js 964 bytes &#123;main&#125; [built]</span><br><span class="line">[./node_modules/webpack-dev-server/client/utils/reloadApp.js] (webpack)-dev-server/client/utils/reloadApp.js 1.59 KiB &#123;main&#125; [built]</span><br><span class="line">[./node_modules/webpack-dev-server/client/utils/sendMessage.js] (webpack)-dev-server/client/utils/sendMessage.js 402 bytes &#123;main&#125; [built]</span><br><span class="line">[./node_modules/webpack-dev-server/node_modules/strip-ansi/index.js] (webpack)-dev-server/node_modules/strip-ansi/index.js 161 bytes &#123;main&#125; [built]</span><br><span class="line">[./node_modules/webpack/hot sync ^\.\/log$] (webpack)/hot sync nonrecursive ^\.\/log$ 170 bytes &#123;main&#125; [built]</span><br><span class="line">[./src/index.js] 2.08 KiB &#123;main&#125; [built]</span><br><span class="line">    + 349 hidden modules</span><br><span class="line"></span><br><span class="line">ERROR in ./src/index.js</span><br><span class="line">Module not found: Error: Can't resolve '../../build/contracts/MetaCoin.json' in 'E:\Dapp\webpacktest\app\src'</span><br><span class="line"> @ ./src/index.js 2:0-67 15:30-46 17:8-24</span><br><span class="line">i ï½¢wdmï½£: Failed to compile.</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://s2.ax1x.com/2020/02/23/3188K0.png" alt="3188K0.png"></p><p>æ³¨ï¼š<strong>ä»3.3ä»¥åçš„æ“ä½œéƒ½åœ¨é¡¹ç›®å·¥ç¨‹çš„appç›®å½•ä¸‹è¿›è¡Œ</strong></p><h1 id="4-ä»¥å¤ªåŠå® ç‰©å•†åº—â€˜"><a href="#4-ä»¥å¤ªåŠå® ç‰©å•†åº—â€˜" class="headerlink" title="4. ä»¥å¤ªåŠå® ç‰©å•†åº—â€˜"></a>4. ä»¥å¤ªåŠå® ç‰©å•†åº—â€˜</h1><h2 id="4-1åˆå§‹åŒ–é¡¹ç›®ï¼ˆtruffle-unbox-pet-shopï¼‰"><a href="#4-1åˆå§‹åŒ–é¡¹ç›®ï¼ˆtruffle-unbox-pet-shopï¼‰" class="headerlink" title="4.1åˆå§‹åŒ–é¡¹ç›®ï¼ˆtruffle unbox pet-shopï¼‰"></a>4.1åˆå§‹åŒ–é¡¹ç›®ï¼ˆtruffle unbox pet-shopï¼‰</h2><p>åœ¨æŒ‡å®šç›®å½•ä¸‹æ‰§è¡Œ<strong>truffle unbox pet-shop</strong>å‘½ä»¤åˆå§‹åŒ–é¡¹ç›®ã€‚ç”Ÿæˆç›®å½•å¦‚ä¸‹ï¼š</p><p><img src="https://s2.ax1x.com/2020/02/26/3NA3DS.png" alt="pet-shop.png"></p><h2 id="4-2ç¼–å†™æ™ºèƒ½åˆçº¦"><a href="#4-2ç¼–å†™æ™ºèƒ½åˆçº¦" class="headerlink" title="4.2ç¼–å†™æ™ºèƒ½åˆçº¦"></a>4.2ç¼–å†™æ™ºèƒ½åˆçº¦</h2><p>åœ¨contractsç›®å½•ä¸‹åˆ›å»ºæ–°åˆçº¦æ–‡ä»¶<strong>Adoption.sol</strong>å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity &gt;=0.4.21 &lt;0.7.0;</span><br><span class="line"></span><br><span class="line">contract Adoption &#123;</span><br><span class="line">//å®šä¹‰å˜é‡ æ•°ç»„ç±»å‹çš„ adopters   ä¿å­˜é¢†å…»è€…åœ°å€</span><br><span class="line">address[16] public adopters;</span><br><span class="line"></span><br><span class="line">// å®šä¹‰æ–¹æ³•  </span><br><span class="line">//Adopting a pet é¢†å…»å® ç‰©</span><br><span class="line">function adopt(uint petId) public returns (uint) &#123;</span><br><span class="line">require(petId &gt;= 0 &amp;&amp; petId &lt;= 15);</span><br><span class="line"></span><br><span class="line">adopters[petId] = msg.sender;</span><br><span class="line"></span><br><span class="line">return petId;</span><br><span class="line">&#125;</span><br><span class="line">// Retrieving the adopters  æ£€ç´¢é¢†å…»è€…</span><br><span class="line">function getAdopters() public view returns (address[16] memory) &#123;</span><br><span class="line">return adopters;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-3ç¼–è¯‘å’Œè¿ç§»æ™ºèƒ½åˆçº¦"><a href="#4-3ç¼–è¯‘å’Œè¿ç§»æ™ºèƒ½åˆçº¦" class="headerlink" title="4.3ç¼–è¯‘å’Œè¿ç§»æ™ºèƒ½åˆçº¦"></a>4.3ç¼–è¯‘å’Œè¿ç§»æ™ºèƒ½åˆçº¦</h2><h3 id="4-3-1æ±‡ç¼–"><a href="#4-3-1æ±‡ç¼–" class="headerlink" title="4.3.1æ±‡ç¼–"></a>4.3.1æ±‡ç¼–</h3><p>Solidityæ˜¯ä¸€ç§ç¼–è¯‘è¯­è¨€ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦å°†Solidityç¼–è¯‘ä¸ºå­—èŠ‚ä»£ç ï¼Œä»¥ä¾›ä»¥å¤ªåŠè™šæ‹Ÿæœºï¼ˆEVMï¼‰æ‰§è¡Œã€‚å°†å…¶è§†ä¸ºå°†äººç±»å¯è¯»çš„Solidityè½¬æ¢ä¸ºEVMå¯ä»¥ç†è§£çš„ä¸œè¥¿ã€‚</p><ol><li><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ<strong>truffle compile</strong></p><p>å¯ä»¥çœ‹åˆ°å¦‚ä¸‹è¾“å‡ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> truffle compile</span></span><br><span class="line"></span><br><span class="line">Compiling your contracts...</span><br><span class="line">===========================</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Compiling .\contracts\Adoption.sol</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Compiling .\contracts\Migrations.sol</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Artifacts written to E:\Dapp\guide-pet-shop\build\contracts</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Compiled successfully using:</span></span><br><span class="line">   - solc: 0.5.16+commit.9c3226ce.Emscripten.clang</span><br></pre></td></tr></table></figure></li></ol><h3 id="4-3-2è¿ç§»"><a href="#4-3-2è¿ç§»" class="headerlink" title="4.3.2è¿ç§»"></a>4.3.2è¿ç§»</h3><p>åœ¨æˆåŠŸç¼–è¯‘åˆçº¦åï¼Œéœ€å°†åˆçº¦è¿ç§»åˆ°åŒºå—é“¾ä¸Šã€‚</p><p> <strong>è¿ç§»æ˜¯ä¸€ç§éƒ¨ç½²è„šæœ¬ï¼Œæ—¨åœ¨æ›´æ”¹åº”ç”¨ç¨‹åºåˆåŒçš„çŠ¶æ€</strong>ï¼Œå°†å…¶ä»ä¸€ç§çŠ¶æ€è½¬ç§»åˆ°å¦ä¸€ç§çŠ¶æ€ã€‚å¯¹äºç¬¬ä¸€æ¬¡è¿ç§»ï¼Œæ‚¨å¯èƒ½åªæ˜¯åœ¨éƒ¨ç½²æ–°ä»£ç ï¼Œä½†æ˜¯éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå…¶ä»–è¿ç§»å¯èƒ½ä¼šç§»åŠ¨æ•°æ®æˆ–ç”¨æ–°åˆåŒæ›¿æ¢åˆåŒã€‚ </p><p>æ‚¨å°†åœ¨<code>migrations/</code>ç›®å½•ä¸­çœ‹åˆ°ä¸€ä¸ªJavaScriptæ–‡ä»¶ï¼š<code>1_initial_migration.js</code>ã€‚è¿™å°†å¤„ç†éƒ¨ç½²<code>Migrations.sol</code>åˆåŒä»¥è§‚å¯Ÿåç»­çš„æ™ºèƒ½åˆåŒè¿ç§»ï¼Œå¹¶ç¡®ä¿æˆ‘ä»¬å°†æ¥ä¸ä¼šé‡å¤è¿ç§»æœªæ›´æ”¹çš„åˆåŒã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å‡†å¤‡åˆ›å»ºè‡ªå·±çš„è¿ç§»è„šæœ¬ã€‚</p><ol><li><p>åœ¨<code>migrations/</code>ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„jsæ–‡ä»¶å‘½åä¸º <strong>2_deploy_contracts.js</strong> ã€‚ </p></li><li><p>æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Adoption = artifacts.require(<span class="string">"Adoption"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">deployer</span>) </span>&#123;</span><br><span class="line">  deployer.deploy(Adoption);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨å°†åˆåŒè¿ç§»åˆ°åŒºå—é“¾ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦è¿è¡Œä¸€ä¸ªåŒºå—é“¾ã€‚åœ¨æ­¤æˆ‘ä½¿ç”¨çš„æ˜¯ganache</p><p>è¿è¡Œganache</p><p><img src="https://s2.ax1x.com/2020/02/26/3Nu4W4.png" alt="3Nu4W4.png"></p></li></ol><ol start="4"><li>å›åˆ°æˆ‘ä»¬çš„ç»ˆç«¯ï¼Œå°†åˆåŒè¿ç§»åˆ°åŒºå—é“¾(truffle migrate)ã€‚ </li></ol><pre><code>åœ¨æ‰“å¼€çš„ Ganache é‡Œå¯ä»¥çœ‹åˆ°åŒºå—é“¾çŠ¶æ€çš„å˜åŒ–ï¼Œç°åœ¨äº§ç”Ÿäº† 4 ä¸ªåŒºå—ã€‚ </code></pre><p>   <img src="https://s2.ax1x.com/2020/02/26/3NKuXn.png" alt="3NKuXn.png"></p><h2 id="4-4æµ‹è¯•æ™ºèƒ½åˆçº¦"><a href="#4-4æµ‹è¯•æ™ºèƒ½åˆçº¦" class="headerlink" title="4.4æµ‹è¯•æ™ºèƒ½åˆçº¦"></a>4.4æµ‹è¯•æ™ºèƒ½åˆçº¦</h2><p> Truffleåœ¨æ™ºèƒ½åˆçº¦æµ‹è¯•æ–¹é¢éå¸¸çµæ´»ï¼Œå› ä¸ºæµ‹è¯•å¯ä»¥ç”¨JavaScriptæˆ–Solidityç¼–å†™ã€‚åœ¨æ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Solidityç¼–å†™æµ‹è¯•ã€‚ </p><ol><li><p>åœ¨<code>test/</code>ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ <code>TestAdoption.sol</code>ã€‚ </p></li><li><p>å†™å…¥å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.5.16;</span><br><span class="line"></span><br><span class="line">import &quot;truffle/Assert.sol&quot;;   // å¼•å…¥çš„æ–­è¨€</span><br><span class="line">import &quot;truffle/DeployedAddresses.sol&quot;;  // ç”¨æ¥è·å–è¢«æµ‹è¯•åˆçº¦çš„åœ°å€</span><br><span class="line">import &quot;../contracts/Adoption.sol&quot;;      // è¢«æµ‹è¯•åˆçº¦</span><br><span class="line"></span><br><span class="line">contract TestAdoption &#123;</span><br><span class="line">  Adoption adoption = Adoption(DeployedAddresses.Adoption());</span><br><span class="line"></span><br><span class="line">  // é¢†å…»æµ‹è¯•ç”¨ä¾‹</span><br><span class="line">  function testUserCanAdoptPet() public &#123;</span><br><span class="line">    uint returnedId = adoption.adopt(8);</span><br><span class="line"></span><br><span class="line">    uint expected = 8;</span><br><span class="line">    Assert.equal(returnedId, expected, &quot;Adoption of pet ID 8 should be recorded.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // å® ç‰©æ‰€æœ‰è€…æµ‹è¯•ç”¨ä¾‹</span><br><span class="line">  function testGetAdopterAddressByPetId() public &#123;</span><br><span class="line">    // æœŸæœ›é¢†å…»è€…çš„åœ°å€å°±æ˜¯æœ¬åˆçº¦åœ°å€ï¼Œå› ä¸ºäº¤æ˜“æ˜¯ç”±æµ‹è¯•åˆçº¦å‘èµ·äº¤æ˜“ï¼Œ</span><br><span class="line">    address expected = this;</span><br><span class="line">    address adopter = adoption.adopters(8);</span><br><span class="line">    Assert.equal(adopter, expected, &quot;Owner of pet ID 8 should be recorded.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    // æµ‹è¯•æ‰€æœ‰é¢†å…»è€…</span><br><span class="line">  function testGetAdopterAddressByPetIdInArray() public &#123;</span><br><span class="line">  // é¢†å…»è€…çš„åœ°å€å°±æ˜¯æœ¬åˆçº¦åœ°å€</span><br><span class="line">    address expected = this;</span><br><span class="line">    address[16] memory adopters = adoption.getAdopters();</span><br><span class="line">    Assert.equal(adopters[8], expected, &quot;Owner of pet ID 8 should be recorded.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> truffle <span class="built_in">test</span></span></span><br><span class="line">Using network 'development'.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Compiling your contracts...</span><br><span class="line">===========================</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Compiling .\contracts\Adoption.sol</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Compiling .\contracts\Migrations.sol</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Compiling .\<span class="built_in">test</span>\TestAdoption.sol</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Artifacts written to C:\Users\12173\AppData\Local\Temp\<span class="built_in">test</span>-2020126-25536-1azqqoo.mstk</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Compiled successfully using:</span></span><br><span class="line">   - solc: 0.5.16+commit.9c3226ce.Emscripten.clang</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  TestAdoption</span><br><span class="line">    1) "before all" hook: prepare suite</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  0 passing (320ms)</span><br><span class="line">  1 failing</span><br><span class="line"></span><br><span class="line">  1) TestAdoption</span><br><span class="line">       "before all" hook: prepare suite:</span><br><span class="line">     TypeError: Error parsing E:/Dapp/guide-pet-shop/contracts/Adoption.sol: Cannot destructure property `body` of 'undefined' or 'null'.</span><br><span class="line">      at getImports (C:\Users\12173\AppData\Roaming\npm\node_modules\truffle\build\webpack:\packages\compile-solidity\profiler\getImports.js:5:1)</span><br><span class="line">      at C:\Users\12173\AppData\Roaming\npm\node_modules\truffle\build\webpack:\packages\compile-solidity\profiler\index.js:145:1</span><br></pre></td></tr></table></figure><p><strong>Cannot destructure property <code>body</code> of â€˜undefinedâ€™ or â€˜nullâ€™</strong></p><p>æš‚æ— è§£å†³æ–¹æ¡ˆã€‚æ— æ³•è¿›è¡Œæ™ºèƒ½åˆçº¦æµ‹è¯•ï¼Œä½†ä¸å½±å“æ­£å¸¸ä½¿ç”¨ã€‚</p></li></ol><h2 id="4-5åˆ›å»ºç”¨æˆ·ç•Œé¢ä»¥ä¸æ™ºèƒ½åˆçº¦è¿›è¡Œäº¤äº’"><a href="#4-5åˆ›å»ºç”¨æˆ·ç•Œé¢ä»¥ä¸æ™ºèƒ½åˆçº¦è¿›è¡Œäº¤äº’" class="headerlink" title="4.5åˆ›å»ºç”¨æˆ·ç•Œé¢ä»¥ä¸æ™ºèƒ½åˆçº¦è¿›è¡Œäº¤äº’"></a>4.5åˆ›å»ºç”¨æˆ·ç•Œé¢ä»¥ä¸æ™ºèƒ½åˆçº¦è¿›è¡Œäº¤äº’</h2><p>ç°åœ¨æˆ‘ä»¬å·²ç»åˆ›å»ºäº†æ™ºèƒ½åˆçº¦ï¼Œå¹¶å°†å…¶éƒ¨ç½²åˆ°æœ¬åœ°æµ‹è¯•åŒºå—é“¾ä¸­ï¼Œå¹¶ç¡®è®¤æˆ‘ä»¬å¯ä»¥é€šè¿‡æ§åˆ¶å°ä¸ä¹‹äº¤äº’ï¼Œæ˜¯æ—¶å€™åˆ›å»ºä¸€ä¸ªUIï¼Œä»¥ä¾¿Peteå¯ä»¥åœ¨ä»–çš„å® ç‰©åº—ä¸­ä½¿ç”¨å®ƒäº†ï¼</p><p><code>pet-shop</code>truffleç›’ä¸­åŒ…å«è¯¥åº”ç”¨ç¨‹åºå‰ç«¯çš„ä»£ç ã€‚è¯¥ä»£ç å­˜åœ¨äº<code>src/</code>ç›®å½•ä¸­ã€‚</p><h3 id="4-5-1å®ä¾‹åŒ–web3"><a href="#4-5-1å®ä¾‹åŒ–web3" class="headerlink" title="4.5.1å®ä¾‹åŒ–web3"></a>4.5.1å®ä¾‹åŒ–web3</h3><ol><li><code>/src/js/app.js</code>åœ¨æ–‡æœ¬ç¼–è¾‘å™¨ä¸­æ‰“å¼€ã€‚</li><li>æ£€æŸ¥æ–‡ä»¶ã€‚è¯·æ³¨æ„ï¼Œå­˜åœ¨ä¸€ä¸ªå…¨å±€<code>App</code>å¯¹è±¡æ¥ç®¡ç†æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œå°†æ•°æ®åŠ è½½åˆ°å…¶ä¸­<code>init()</code>ï¼Œç„¶åè°ƒç”¨å‡½æ•°<code>initWeb3()</code>ã€‚è¯¥<a href="https://github.com/ethereum/web3.js/" target="_blank" rel="noopener">WEB3 JavaScriptåº“</a>äº¤äº’ä¸å¤ä»‡blockchainã€‚å®ƒå¯ä»¥æ£€ç´¢ç”¨æˆ·å¸æˆ·ï¼Œå‘é€äº¤æ˜“ï¼Œä¸æ™ºèƒ½åˆçº¦è¿›è¡Œäº¤äº’ç­‰ç­‰ã€‚</li><li>ä»å†…éƒ¨åˆ é™¤å¤šè¡Œæ³¨é‡Šï¼Œ<code>initWeb3</code>å¹¶å°†å…¶æ›¿æ¢ä¸ºä»¥ä¸‹å†…å®¹ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.ethereum) &#123;</span><br><span class="line">  App.web3Provider = <span class="built_in">window</span>.ethereum;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// Request account access</span></span><br><span class="line">    <span class="keyword">await</span> <span class="built_in">window</span>.ethereum.enable();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="comment">// User denied account access...</span></span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">"User denied account access"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Legacy dapp browsers...</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.web3) &#123;</span><br><span class="line">  App.web3Provider = <span class="built_in">window</span>.web3.currentProvider;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// If no injected web3 instance is detected, fall back to Ganache</span></span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">  App.web3Provider = <span class="keyword">new</span> Web3.providers.HttpProvider(<span class="string">'http://localhost:7545'</span>);</span><br><span class="line">&#125;</span><br><span class="line">web3 = <span class="keyword">new</span> Web3(App.web3Provider);</span><br></pre></td></tr></table></figure><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>é¦–å…ˆï¼Œæˆ‘ä»¬æ£€æŸ¥ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨ç°ä»£DAPPæµè§ˆå™¨æˆ–æ›´è¿‘çš„ç‰ˆæœ¬<a href="https://github.com/MetaMask" target="_blank" rel="noopener">MetaMask</a>å…¶ä¸­ä¸€ä¸ª<code>ethereum</code>ä¾›åº”å•†è¢«æ³¨å…¥<code>window</code>å¯¹è±¡ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å®ƒæ¥åˆ›å»ºæˆ‘ä»¬çš„web3å¯¹è±¡ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜éœ€è¦é€šè¿‡æ˜¾å¼è¯·æ±‚è®¿é—®å¸æˆ·<code>ethereum.enable()</code>ã€‚</li><li>å¦‚æœ<code>ethereum</code>å¯¹è±¡ä¸å­˜åœ¨ï¼Œåˆ™æ£€æŸ¥æ³¨å…¥çš„<code>web3</code>å®ä¾‹ã€‚å¦‚æœå­˜åœ¨ï¼Œåˆ™è¡¨æ˜æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯è¾ƒæ—§çš„dappæµè§ˆå™¨ï¼ˆå¦‚<a href="https://github.com/ethereum/mist" target="_blank" rel="noopener">Mist</a>æˆ–è¾ƒæ—§çš„MetaMaskç‰ˆæœ¬ï¼‰ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œæˆ‘ä»¬å°†è·å¾—å…¶æä¾›ç¨‹åºå¹¶ä½¿ç”¨å®ƒæ¥åˆ›å»ºæˆ‘ä»¬çš„web3å¯¹è±¡ã€‚</li><li>å¦‚æœä¸å­˜åœ¨æ³¨å…¥çš„web3å®ä¾‹ï¼Œæˆ‘ä»¬å°†åŸºäºæœ¬åœ°æä¾›ç¨‹åºåˆ›å»ºweb3å¯¹è±¡ã€‚ï¼ˆè¿™ç§åå¤‡æ–¹å¼é€‚ç”¨äºå¼€å‘ç¯å¢ƒï¼Œä½†ä¸å®‰å…¨ä¸”ä¸é€‚åˆç”Ÿäº§ã€‚ï¼‰</li></ul><h3 id="4-5-2å®ä¾‹åŒ–åˆåŒ"><a href="#4-5-2å®ä¾‹åŒ–åˆåŒ" class="headerlink" title="4.5.2å®ä¾‹åŒ–åˆåŒ"></a>4.5.2å®ä¾‹åŒ–åˆåŒ</h3><p> ç°åœ¨æˆ‘ä»¬å¯ä»¥é€šè¿‡web3ä¸ä»¥å¤ªåŠè¿›è¡Œäº¤äº’ï¼Œæˆ‘ä»¬éœ€è¦å®ä¾‹åŒ–æˆ‘ä»¬çš„æ™ºèƒ½åˆçº¦ï¼Œä»¥ä¾¿web3çŸ¥é“åœ¨å“ªé‡Œå¯ä»¥æ‰¾åˆ°å®ƒä»¥åŠå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚truffleæœ‰ä¸€ä¸ªåä¸ºçš„åº“æ¥å¸®åŠ©æ‚¨è§£å†³æ­¤é—®é¢˜<code>truffle-contract</code>ã€‚å®ƒä½¿æœ‰å…³åˆåŒçš„ä¿¡æ¯ä¸è¿ç§»ä¿æŒåŒæ­¥ï¼Œå› æ­¤æ‚¨æ— éœ€æ‰‹åŠ¨æ›´æ”¹åˆåŒçš„éƒ¨ç½²åœ°å€ã€‚ </p><ol><li><p>ä»åœ¨ä¸­<code>/src/js/app.js</code>ï¼Œä»å†…éƒ¨åˆ é™¤å¤šè¡Œæ³¨é‡Šï¼Œ<code>initContract</code>å¹¶å°†å…¶æ›¿æ¢ä¸ºä»¥ä¸‹å†…å®¹ï¼š </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$.getJSON(<span class="string">'Adoption.json'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Get the necessary contract artifact file and instantiate it with truffle-contract</span></span><br><span class="line">  <span class="keyword">var</span> AdoptionArtifact = data;</span><br><span class="line">  App.contracts.Adoption = TruffleContract(AdoptionArtifact);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Set the provider for our contract</span></span><br><span class="line">  App.contracts.Adoption.setProvider(App.web3Provider);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Use our contract to retrieve and mark the adopted pets</span></span><br><span class="line">  <span class="keyword">return</span> App.markAdopted();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ol><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>æˆ‘ä»¬é¦–å…ˆæ£€ç´¢æ™ºèƒ½åˆçº¦çš„å·¥ä»¶æ–‡ä»¶ã€‚<strong>å·¥ä»¶æ˜¯æœ‰å…³æˆ‘ä»¬åˆåŒçš„ä¿¡æ¯ï¼Œä¾‹å¦‚å…¶éƒ¨ç½²åœ°å€å’Œåº”ç”¨ç¨‹åºäºŒè¿›åˆ¶æ¥å£ï¼ˆABIï¼‰</strong>ã€‚<strong>ABIæ˜¯ä¸€ä¸ªJavaScriptå¯¹è±¡ï¼Œå®šä¹‰äº†å¦‚ä½•ä¸åˆåŒè¿›è¡Œäº¤äº’ï¼ŒåŒ…æ‹¬å…¶å˜é‡ï¼Œå‡½æ•°åŠå…¶å‚æ•°ã€‚</strong></li><li>å›è°ƒä¸­åŒ…å«å·¥ä»¶åï¼Œä¾¿å°†å®ƒä»¬ä¼ é€’ç»™<code>TruffleContract()</code>ã€‚è¿™å°†åˆ›å»ºä¸€ä¸ªæˆ‘ä»¬å¯ä»¥ä¸ä¹‹äº¤äº’çš„åˆåŒå®ä¾‹ã€‚</li><li>å®ä¾‹åŒ–åˆåŒåï¼Œæˆ‘ä»¬ä½¿ç”¨<code>App.web3Provider</code>è®¾ç½®web3æ—¶å­˜å‚¨çš„å€¼æ¥è®¾ç½®å…¶web3æä¾›ç¨‹åºã€‚</li><li>ç„¶å<code>markAdopted()</code>ï¼Œå¦‚æœä»¥å‰è®¿é—®è¿‡ä»»ä½•å® ç‰©ï¼Œæˆ‘ä»¬éƒ½ä¼šè°ƒç”¨è¯¥åº”ç”¨ç¨‹åºçš„åŠŸèƒ½ã€‚æˆ‘ä»¬å°†å…¶å°è£…åœ¨ä¸€ä¸ªå•ç‹¬çš„å‡½æ•°ä¸­ï¼Œå› ä¸ºæ¯æ¬¡æ›´æ”¹æ™ºèƒ½åˆçº¦çš„æ•°æ®æ—¶éƒ½éœ€è¦æ›´æ–°UIã€‚</li></ul><h3 id="4-5-3è·å–è¢«æ”¶å…»çš„å® ç‰©å¹¶æ›´æ–°UI"><a href="#4-5-3è·å–è¢«æ”¶å…»çš„å® ç‰©å¹¶æ›´æ–°UI" class="headerlink" title="4.5.3è·å–è¢«æ”¶å…»çš„å® ç‰©å¹¶æ›´æ–°UI"></a>4.5.3è·å–è¢«æ”¶å…»çš„å® ç‰©å¹¶æ›´æ–°UI</h3><ol><li><p>ä»åœ¨ä¸­<code>/src/js/app.js</code>ï¼Œä»ä¸­åˆ é™¤å¤šè¡Œæ³¨é‡Šï¼Œ<code>markAdopted</code>å¹¶å°†å…¶æ›¿æ¢ä¸ºä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> adoptionInstance;</span><br><span class="line"></span><br><span class="line">App.contracts.Adoption.deployed().then(<span class="function"><span class="keyword">function</span>(<span class="params">instance</span>) </span>&#123;</span><br><span class="line">  adoptionInstance = instance;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> adoptionInstance.getAdopters.call();</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">adopters</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; adopters.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (adopters[i] !== <span class="string">'0x0000000000000000000000000000000000000000'</span>) &#123;</span><br><span class="line">      $(<span class="string">'.panel-pet'</span>).eq(i).find(<span class="string">'button'</span>).text(<span class="string">'Success'</span>).attr(<span class="string">'disabled'</span>, <span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err.message);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ol><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>æˆ‘ä»¬è®¿é—®å·²éƒ¨ç½²çš„<code>Adoption</code>åˆåŒï¼Œç„¶åè°ƒç”¨<code>getAdopters()</code>è¯¥å®ä¾‹ã€‚</li><li>æˆ‘ä»¬é¦–å…ˆ<code>adoptionInstance</code>åœ¨æ™ºèƒ½åˆçº¦è°ƒç”¨ä¹‹å¤–å£°æ˜å˜é‡ï¼Œä»¥ä¾¿åœ¨æœ€åˆæ£€ç´¢å®ä¾‹åå¯ä»¥è®¿é—®è¯¥å®ä¾‹ã€‚</li><li>ä½¿ç”¨<strong>callï¼ˆï¼‰</strong>å…è®¸æˆ‘ä»¬ä»åŒºå—é“¾è¯»å–æ•°æ®ï¼Œè€Œä¸å¿…å‘é€å®Œæ•´çš„äº¤æ˜“ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬ä¸å¿…èŠ±è´¹ä»»ä½•ä»¥å¤ªå¸ã€‚</li><li>è‡´ç”µå<code>getAdopters()</code>ï¼Œæˆ‘ä»¬å°†éå†æ‰€æœ‰è¿™äº›å¯¹è±¡ï¼Œæ£€æŸ¥æ˜¯å¦ä¸ºæ¯ä¸ªå® ç‰©å­˜å‚¨äº†åœ°å€ã€‚ç”±äºæ•°ç»„åŒ…å«åœ°å€ç±»å‹ï¼Œå› æ­¤ä»¥å¤ªåŠä½¿ç”¨16ä¸ªç©ºåœ°å€åˆå§‹åŒ–æ•°ç»„ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬æ£€æŸ¥ä¸€ä¸ªç©ºçš„åœ°å€å­—ç¬¦ä¸²è€Œä¸æ˜¯nullæˆ–å…¶ä»–è™šå‡å€¼çš„åŸå› ã€‚</li><li>ä¸€æ—¦<code>petId</code>æ‰¾åˆ°å…·æœ‰ç›¸åº”åœ°å€çš„ï¼Œæˆ‘ä»¬å°†ç¦ç”¨å…¶é‡‡ç”¨æŒ‰é’®ï¼Œå¹¶å°†æŒ‰é’®æ–‡æœ¬æ›´æ”¹ä¸ºâ€œæˆåŠŸâ€ï¼Œä»¥ä¾¿ç”¨æˆ·è·å¾—ä¸€äº›åé¦ˆã€‚</li><li>ä»»ä½•é”™è¯¯éƒ½ä¼šè®°å½•åˆ°æ§åˆ¶å°ã€‚</li></ul><h3 id="4-5-4å¤„ç†takeï¼ˆï¼‰å‡½æ•°"><a href="#4-5-4å¤„ç†takeï¼ˆï¼‰å‡½æ•°" class="headerlink" title="4.5.4å¤„ç†takeï¼ˆï¼‰å‡½æ•°"></a>4.5.4å¤„ç†takeï¼ˆï¼‰å‡½æ•°</h3><ol><li><p>ä»åœ¨ä¸­<code>/src/js/app.js</code>ï¼Œä»ä¸­åˆ é™¤å¤šè¡Œæ³¨é‡Šï¼Œ<code>handleAdopt</code>å¹¶å°†å…¶æ›¿æ¢ä¸ºä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> adoptionInstance;</span><br><span class="line"></span><br><span class="line">web3.eth.getAccounts(<span class="function"><span class="keyword">function</span>(<span class="params">error, accounts</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> account = accounts[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">  App.contracts.Adoption.deployed().then(<span class="function"><span class="keyword">function</span>(<span class="params">instance</span>) </span>&#123;</span><br><span class="line">    adoptionInstance = instance;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Execute adopt as a transaction by sending account</span></span><br><span class="line">    <span class="keyword">return</span> adoptionInstance.adopt(petId, &#123;<span class="attr">from</span>: account&#125;);</span><br><span class="line">  &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> App.markAdopted();</span><br><span class="line">  &#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err.message);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ol><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>æˆ‘ä»¬ä½¿ç”¨web3è·å–ç”¨æˆ·çš„å¸æˆ·ã€‚åœ¨é”™è¯¯æ£€æŸ¥åçš„å›è°ƒä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©ç¬¬ä¸€ä¸ªå¸æˆ·ã€‚</li><li>ä»é‚£é‡Œï¼Œæˆ‘ä»¬åƒä¸Šé¢ä¸€æ ·è·å¾—å·²éƒ¨ç½²çš„åˆåŒï¼Œå¹¶å°†å®ä¾‹å­˜å‚¨åœ¨ä¸­<code>adoptionInstance</code>ã€‚ä¸è¿‡è¿™æ¬¡ï¼Œæˆ‘ä»¬å°†å‘é€<strong>äº¤æ˜“</strong>è€Œä¸æ˜¯è‡´ç”µã€‚äº¤æ˜“éœ€è¦ä¸€ä¸ªâ€œå‘ä»¶äººâ€åœ°å€ï¼Œå¹¶å…·æœ‰ç›¸å…³çš„æˆæœ¬ã€‚è¿™ç§ä»¥é†šæ”¯ä»˜çš„è´¹ç”¨ç§°ä¸º<strong>ç…¤æ°”</strong>ã€‚æ°”ä½“æˆæœ¬æ˜¯åœ¨æ™ºèƒ½åˆçº¦ä¸­æ‰§è¡Œè®¡ç®—å’Œ/æˆ–å­˜å‚¨æ•°æ®çš„è´¹ç”¨ã€‚æˆ‘ä»¬é€šè¿‡<code>adopt()</code>åŒæ—¶ä½¿ç”¨å® ç‰©IDå’ŒåŒ…å«å¸æˆ·åœ°å€çš„å¯¹è±¡æ‰§è¡Œè¯¥å‡½æ•°æ¥å‘é€äº¤æ˜“ï¼Œè¯¥åœ°å€å…ˆå‰å­˜å‚¨åœ¨ä¸­<code>account</code>ã€‚</li><li>å‘é€äº¤æ˜“çš„ç»“æœæ˜¯äº¤æ˜“å¯¹è±¡ã€‚å¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œæˆ‘ä»¬å°†ç»§ç»­è°ƒç”¨<code>markAdopted()</code>å‡½æ•°ä»¥å°†UIä¸æ–°å­˜å‚¨çš„æ•°æ®åŒæ­¥ã€‚</li></ul><h3 id="4-5-5dappä¸æµè§ˆå™¨ä¸­çš„äº¤äº’"><a href="#4-5-5dappä¸æµè§ˆå™¨ä¸­çš„äº¤äº’" class="headerlink" title="4.5.5dappä¸æµè§ˆå™¨ä¸­çš„äº¤äº’"></a>4.5.5dappä¸æµè§ˆå™¨ä¸­çš„äº¤äº’</h3><ul><li><p><strong>å®‰è£…å’Œé…ç½®MetaMask</strong></p></li><li><p><strong>å®‰è£…å’Œé…ç½®LiteæœåŠ¡å™¨</strong></p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å¯åŠ¨æœ¬åœ°WebæœåŠ¡å™¨å¹¶ä½¿ç”¨dappã€‚æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨è¯¥<code>lite-server</code>åº“æ¥æä¾›æˆ‘ä»¬çš„é™æ€æ–‡ä»¶ã€‚è¿™æ˜¯<code>pet-shop</code>æ¾éœ²ç›’éšé™„çš„ï¼Œä½†è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p><ol><li><p><code>bs-config.json</code>åœ¨æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆåœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸­ï¼‰ä¸­æ‰“å¼€å¹¶æ£€æŸ¥å†…å®¹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"server"</span>: &#123;</span><br><span class="line">    <span class="string">"baseDir"</span>: [<span class="string">"./src"</span>, <span class="string">"./build/contracts"</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™å‘Šè¯‰<code>lite-server</code>å“ªäº›æ–‡ä»¶è¦åŒ…å«åœ¨æˆ‘ä»¬çš„åŸºæœ¬ç›®å½•ä¸­ã€‚æˆ‘ä»¬<code>./src</code>ä¸ºç½‘ç«™æ–‡ä»¶æ·»åŠ ç›®å½•ï¼Œ<code>./build/contracts</code>ä¸ºåˆåŒå·¥ä»¶æ·»åŠ ç›®å½•ã€‚</p><p>æˆ‘ä»¬è¿˜å‘é¡¹ç›®æ ¹ç›®å½•ä¸­æ–‡ä»¶ä¸­çš„å¯¹è±¡æ·»åŠ äº†<code>dev</code>å‘½ä»¤ã€‚è¯¥å¯¹è±¡å…è®¸æˆ‘ä»¬å°†æ§åˆ¶å°å‘½ä»¤åˆ«åä¸ºå•ä¸ªnpmå‘½ä»¤ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä»…æ‰§è¡Œå•ä¸ªå‘½ä»¤ï¼Œä½†æ˜¯å¯èƒ½å…·æœ‰æ›´å¤æ‚çš„é…ç½®ã€‚è¿™æ˜¯æ‚¨çš„æ ·å­ï¼š<code>scripts``package.json``scripts</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  <span class="string">"dev"</span>: <span class="string">"lite-server"</span>,</span><br><span class="line">  <span class="string">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>è¿™å‘Šè¯‰npm ä»æ§åˆ¶å°<code>lite-server</code>æ‰§è¡Œæ—¶è¿è¡Œæœ¬åœ°å®‰è£…<code>npm run dev</code>ã€‚</p></li></ol></li></ul><h3 id="4-6ä½¿ç”¨dapp"><a href="#4-6ä½¿ç”¨dapp" class="headerlink" title="4.6ä½¿ç”¨dapp"></a>4.6ä½¿ç”¨dapp</h3><ol><li><p>å¯åŠ¨æœ¬åœ°WebæœåŠ¡å™¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure><p>å¼€å‘æœåŠ¡å™¨å°†å¯åŠ¨å¹¶è‡ªåŠ¨æ‰“å¼€ä¸€ä¸ªåŒ…å«æ‚¨çš„dappçš„æ–°æµè§ˆå™¨é€‰é¡¹å¡ã€‚</p><p><img src="https://www.trufflesuite.com/img/tutorials/pet-shop/dapp.png" alt="çš®ç‰¹çš„å® ç‰©åº—"></p><p>çš®ç‰¹çš„å® ç‰©åº—</p></li><li><p>åº”è¯¥ä¼šå‡ºç°ä¸€ä¸ªMetaMaskå¼¹å‡ºçª—å£ï¼Œè¦æ±‚æ‚¨æ‰¹å‡†ï¼Œä»¥å…è®¸Peteçš„Pet Shopè¿æ¥åˆ°æ‚¨çš„MetaMaské’±åŒ…ã€‚æœªç»æ˜ç¡®æ‰¹å‡†ï¼Œæ‚¨å°†æ— æ³•ä¸dappè¿›è¡Œäº¤äº’ã€‚å•å‡»<strong>è¿æ¥</strong>ã€‚</p><p><img src="https://www.trufflesuite.com/img/tutorials/pet-shop/metamask-transactionconfirm.png" alt="MetaMaskæ‰¹å‡†è¯·æ±‚"></p><p>MetaMaskæ‰¹å‡†è¯·æ±‚</p></li><li><p>è¦ä½¿ç”¨dappï¼Œè¯·åœ¨æ‚¨é€‰æ‹©çš„å® ç‰©ä¸Šå•å‡»â€œ <strong>é‡‡ç”¨â€</strong>æŒ‰é’®ã€‚</p></li><li><p>MetaMaskå°†è‡ªåŠ¨æç¤ºæ‚¨æ‰¹å‡†äº¤æ˜“ã€‚å•å‡»<strong>æäº¤</strong>ä»¥æ‰¹å‡†äº¤æ˜“ã€‚</p><p><img src="https://www.trufflesuite.com/img/tutorials/pet-shop/metamask-transactionconfirm.png" alt="æ”¶å…»äº¤æ˜“å®¡æŸ¥"></p><p>æ”¶å…»äº¤æ˜“å®¡æŸ¥</p></li><li><p>æ­£å¦‚æˆ‘ä»¬æŒ‡å®šçš„é‚£æ ·ï¼Œæ‚¨å°†çœ‹åˆ°å·²æ”¶å…»å® ç‰©æ—è¾¹çš„æŒ‰é’®æ›´æ”¹ä¸ºâ€œæˆåŠŸâ€å¹¶è¢«ç¦ç”¨ï¼Œå› ä¸ºè¯¥å® ç‰©ç°å·²è¢«æ”¶å…»ã€‚</p><p><img src="https://www.trufflesuite.com/img/tutorials/pet-shop/dapp-success.png" alt="æ”¶å…»æˆåŠŸ"></p><p>æ”¶å…»æˆåŠŸ</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> truffle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> truffle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot-loggingé…ç½®</title>
      <link href="/2020/02/22/SpringBoot-logging%E9%85%8D%E7%BD%AE/"/>
      <url>/2020/02/22/SpringBoot-logging%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="1-ä½¿ç”¨è‡ªå¸¦çš„æ—¥å¿—ç³»ç»Ÿï¼ˆlongbackï¼‰è¿›è¡Œé…ç½®"><a href="#1-ä½¿ç”¨è‡ªå¸¦çš„æ—¥å¿—ç³»ç»Ÿï¼ˆlongbackï¼‰è¿›è¡Œé…ç½®" class="headerlink" title="1.ä½¿ç”¨è‡ªå¸¦çš„æ—¥å¿—ç³»ç»Ÿï¼ˆlongbackï¼‰è¿›è¡Œé…ç½®"></a>1.ä½¿ç”¨è‡ªå¸¦çš„æ—¥å¿—ç³»ç»Ÿï¼ˆlongbackï¼‰è¿›è¡Œé…ç½®</h1><h2 id="1-1longbackç®€ä»‹"><a href="#1-1longbackç®€ä»‹" class="headerlink" title="1.1longbackç®€ä»‹"></a>1.1longbackç®€ä»‹</h2><h3 id="1-1-1Logbackä¸»è¦æœ‰ä¸‹é¢çš„ç‰¹æ€§ï¼š"><a href="#1-1-1Logbackä¸»è¦æœ‰ä¸‹é¢çš„ç‰¹æ€§ï¼š" class="headerlink" title="1.1.1Logbackä¸»è¦æœ‰ä¸‹é¢çš„ç‰¹æ€§ï¼š"></a>1.1.1Logbackä¸»è¦æœ‰ä¸‹é¢çš„ç‰¹æ€§ï¼š</h3><ul><li><p><strong>æ›´å¿«çš„æ‰§è¡Œé€Ÿåº¦ï¼š</strong></p><p>åŸºäºæˆ‘ä»¬å…ˆå‰åœ¨Log4jä¸Šçš„å·¥ä½œï¼ŒLogback é‡å†™äº†å†…éƒ¨çš„å®ç°ï¼Œåœ¨æŸäº›ç‰¹å®šçš„åœºæ™¯ä¸Šé¢ï¼Œç”šè‡³å¯ä»¥æ¯”ä¹‹å‰çš„é€Ÿåº¦å¿«ä¸Š10å€ã€‚åœ¨ä¿è¯Logbackçš„ç»„ä»¶æ›´åŠ å¿«é€Ÿçš„åŒæ—¶ï¼ŒåŒæ—¶æ‰€éœ€çš„å†…å­˜æ›´åŠ å°‘ï¼›</p></li><li><p><strong>å……åˆ†çš„æµ‹è¯•ï¼š</strong></p><p>Logback å†ç»äº†å‡ å¹´ï¼Œæ•°ä¸æ¸…å°æ—¶æ•°çš„æµ‹è¯•ã€‚å°½ç®¡Log4jä¹Ÿæ˜¯æµ‹è¯•è¿‡çš„ï¼Œä½†æ˜¯Logbackçš„æµ‹è¯•æ›´åŠ å……åˆ†ï¼Œè·ŸLog4jä¸åœ¨åŒä¸€ä¸ªçº§åˆ«ã€‚æˆ‘ä»¬è®¤ä¸ºï¼Œè¿™æ­£æ˜¯äººä»¬é€‰æ‹©Logbackè€Œä¸æ˜¯Log4jçš„æœ€é‡è¦çš„åŸå› ã€‚è°ä¸å¸Œæœ›å³ä½¿åœ¨æ¶åŠ£çš„æ¡ä»¶ä¸‹ï¼Œä½ çš„æ—¥å¿—æ¡†æ¶ä¾ç„¶ç¨³å®šè€Œå¯é å‘¢ï¼Ÿ</p></li></ul><a id="more"></a><h3 id="1-1-2-ç»„æˆæ¨¡å—"><a href="#1-1-2-ç»„æˆæ¨¡å—" class="headerlink" title="1.1.2 ç»„æˆæ¨¡å—"></a>1.1.2 ç»„æˆæ¨¡å—</h3><ul><li>logback-core </li><li>logback-classic </li><li>logback-access </li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logback-coreæ˜¯å…¶å®ƒæ¨¡å—çš„åŸºç¡€è®¾æ–½ï¼Œå…¶å®ƒæ¨¡å—åŸºäºå®ƒæ„å»ºï¼Œæ˜¾ç„¶ï¼Œlogback-coreæä¾›äº†ä¸€äº›å…³é”®çš„é€šç”¨æœºåˆ¶ã€‚logback-classicçš„åœ°ä½å’Œä½œç”¨ç­‰åŒäº Log4Jï¼Œå®ƒä¹Ÿè¢«è®¤ä¸ºæ˜¯ Log4Jçš„ä¸€ä¸ªæ”¹è¿›ç‰ˆï¼Œå¹¶ä¸”å®ƒå®ç°äº†ç®€å•æ—¥å¿—é—¨é¢ SLF4Jï¼›è€Œ logback-accessä¸»è¦ä½œä¸ºä¸€ä¸ªä¸ Servletå®¹å™¨äº¤äº’çš„æ¨¡å—ï¼Œæ¯”å¦‚è¯´tomcatæˆ–è€… jettyï¼Œæä¾›ä¸€äº›ä¸ HTTPè®¿é—®ç›¸å…³çš„åŠŸèƒ½ã€‚</span><br></pre></td></tr></table></figure><h3 id="1-1-3-Sl4Jæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-1-3-Sl4Jæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1.1.3 Sl4Jæ˜¯ä»€ä¹ˆï¼Ÿ"></a>1.1.3 <strong>Sl4Jæ˜¯ä»€ä¹ˆï¼Ÿ</strong></h3><p> <strong>slf4jï¼š</strong></p><p>The Simple Logging Facade for Java å³javaçš„ç®€å•æ—¥å¿—é—¨é¢<br>ç®€ç­”çš„è®²å°±æ˜¯slf4jæ˜¯ä¸€ç³»åˆ—çš„æ—¥å¿—æ¥å£ï¼Œslf4jæ˜¯ä½œä¸ºä¸€ä¸ªæ—¥å¿—çš„æŠ½è±¡è¡Œä¸ºå­˜åœ¨çš„ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æä¾›çœŸæ­£çš„å®ç°ã€‚ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">slf4jä¸ºå„ç§æ—¥å¿—æ¡†æ¶æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„ç•Œé¢ï¼Œä½¿ç”¨æˆ·å¯ä»¥ç”¨ç»Ÿä¸€çš„æ¥å£è®°å½•æ—¥å¿—ï¼ŒåŠ¨æ€åœ°å†³å®šè¦ä½¿ç”¨çš„å®ç°æ¡†æ¶ï¼Œæ¯”å¦‚Logbackï¼ŒLog4jï¼Œcommon-loggingç­‰æ¡†æ¶éƒ½å®ç°äº†è¿™äº›æ¥å£ã€‚</span><br></pre></td></tr></table></figure><h2 id="1-2éœ€è¦å¯¼å…¥çš„ä¾èµ–"><a href="#1-2éœ€è¦å¯¼å…¥çš„ä¾èµ–" class="headerlink" title="1.2éœ€è¦å¯¼å…¥çš„ä¾èµ–"></a>1.2éœ€è¦å¯¼å…¥çš„ä¾èµ–</h2><p>åœ¨springbooté¡¹ç›®çš„åŸºç¡€ä¸Šå¯¼å…¥ä»¥ä¸‹ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="1-2æ—¥å¿—é…ç½®"><a href="#1-2æ—¥å¿—é…ç½®" class="headerlink" title="1.2æ—¥å¿—é…ç½®"></a>1.2æ—¥å¿—é…ç½®</h2><h3 id="1-2-1-åœ¨application-propertiesä¸­é…ç½®"><a href="#1-2-1-åœ¨application-propertiesä¸­é…ç½®" class="headerlink" title="1.2.1.åœ¨application.propertiesä¸­é…ç½®"></a>1.2.1.åœ¨application.propertiesä¸­é…ç½®</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#spring.profiles.active=prod</span></span><br><span class="line"><span class="comment"># æ—¥å¿—çš„é…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="comment"># æ—¥å¿—è¾“å‡ºçš„çº§åˆ«</span></span><br><span class="line"><span class="meta">logging.level.root</span>=<span class="string">info</span></span><br><span class="line"><span class="comment"># æ ¹æ®æˆ‘ä»¬çš„åŒ…ä¸‹é¢çš„æ“ä½œè¿›è¡Œæ—¥å¿—è®°å½•</span></span><br><span class="line"><span class="meta">logging.level.com.lcx</span>=<span class="string">trace</span></span><br><span class="line"><span class="meta">logging.file.path</span>=<span class="string">F:/spring/spring02.log</span></span><br><span class="line"><span class="meta">logging.pattern.file</span>=<span class="string">%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [ %thread ] - [ %-5level ] [ %logger&#123;50&#125; : %line ] - %msg%n</span></span><br></pre></td></tr></table></figure><h3 id="1-2-2ä½¿ç”¨xmlæ–‡ä»¶è¿›è¡Œé…ç½®"><a href="#1-2-2ä½¿ç”¨xmlæ–‡ä»¶è¿›è¡Œé…ç½®" class="headerlink" title="1.2.2ä½¿ç”¨xmlæ–‡ä»¶è¿›è¡Œé…ç½®"></a>1.2.2ä½¿ç”¨xmlæ–‡ä»¶è¿›è¡Œé…ç½®</h3><p><strong>longback-spring.xmlå†…å®¹å¦‚ä¸‹ï¼š</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">scanï¼šå½“æ­¤å±æ€§è®¾ç½®ä¸ºtrueæ—¶ï¼Œé…ç½®æ–‡ä»¶å¦‚æœå‘ç”Ÿæ”¹å˜ï¼Œå°†ä¼šè¢«é‡æ–°åŠ è½½ï¼Œé»˜è®¤å€¼ä¸ºtrueã€‚</span></span><br><span class="line"><span class="comment">scanPeriodï¼šè®¾ç½®ç›‘æµ‹é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰ä¿®æ”¹çš„æ—¶é—´é—´éš”ï¼Œå¦‚æœæ²¡æœ‰ç»™å‡ºæ—¶é—´å•ä½ï¼Œé»˜è®¤å•ä½æ˜¯æ¯«ç§’å½“scanä¸ºtrueæ—¶ï¼Œæ­¤å±æ€§ç”Ÿæ•ˆã€‚é»˜è®¤çš„æ—¶é—´é—´éš”ä¸º1åˆ†é’Ÿã€‚</span></span><br><span class="line"><span class="comment">debugï¼šå½“æ­¤å±æ€§è®¾ç½®ä¸ºtrueæ—¶ï¼Œå°†æ‰“å°å‡ºlogbackå†…éƒ¨æ—¥å¿—ä¿¡æ¯ï¼Œå®æ—¶æŸ¥çœ‹logbackè¿è¡ŒçŠ¶æ€ã€‚é»˜è®¤å€¼ä¸ºfalseã€‚</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">scan</span>=<span class="string">"false"</span> <span class="attr">scanPeriod</span>=<span class="string">"60 seconds"</span> <span class="attr">debug</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å®šä¹‰æ—¥å¿—çš„æ ¹ç›®å½• --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"LOG_HOME"</span> <span class="attr">value</span>=<span class="string">"/app/log"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å®šä¹‰æ—¥å¿—æ–‡ä»¶åç§° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"appName"</span> <span class="attr">value</span>=<span class="string">"springboot"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ch.qos.logback.core.ConsoleAppender è¡¨ç¤ºæ§åˆ¶å°è¾“å‡º --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"stdout"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.ConsoleAppender"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        æ—¥å¿—è¾“å‡ºæ ¼å¼ï¼š</span></span><br><span class="line"><span class="comment">%dè¡¨ç¤ºæ—¥æœŸæ—¶é—´ï¼Œ</span></span><br><span class="line"><span class="comment">%threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ</span></span><br><span class="line"><span class="comment">%-5levelï¼šçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦</span></span><br><span class="line"><span class="comment">%logger&#123;50&#125; è¡¨ç¤ºloggeråå­—æœ€é•¿50ä¸ªå­—ç¬¦ï¼Œå¦åˆ™æŒ‰ç…§å¥ç‚¹åˆ†å‰²ã€‚</span></span><br><span class="line"><span class="comment">%msgï¼šæ—¥å¿—æ¶ˆæ¯ï¼Œ</span></span><br><span class="line"><span class="comment">%næ˜¯æ¢è¡Œç¬¦</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"prod"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- configuration to be enabled when the "production" profile is not active --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.PatternLayout"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd&#125;----- [%thread] ---- %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"!prod"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- configuration to be enabled when the "production" profile is not active --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.PatternLayout"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ»šåŠ¨è®°å½•æ–‡ä»¶ï¼Œå…ˆå°†æ—¥å¿—è®°å½•åˆ°æŒ‡å®šæ–‡ä»¶ï¼Œå½“ç¬¦åˆæŸä¸ªæ¡ä»¶æ—¶ï¼Œå°†æ—¥å¿—è®°å½•åˆ°å…¶ä»–æ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"appLogAppender"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.RollingFileAppender"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æŒ‡å®šæ—¥å¿—æ–‡ä»¶çš„åç§° --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;file&gt;$&#123;LOG_HOME&#125;/$&#123;appName&#125;.log&lt;/file&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>F:/spring/spring.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        å½“å‘ç”Ÿæ»šåŠ¨æ—¶ï¼Œå†³å®š RollingFileAppender çš„è¡Œä¸ºï¼Œæ¶‰åŠæ–‡ä»¶ç§»åŠ¨å’Œé‡å‘½å</span></span><br><span class="line"><span class="comment">        TimeBasedRollingPolicyï¼š æœ€å¸¸ç”¨çš„æ»šåŠ¨ç­–ç•¥ï¼Œå®ƒæ ¹æ®æ—¶é—´æ¥åˆ¶å®šæ»šåŠ¨ç­–ç•¥ï¼Œæ—¢è´Ÿè´£æ»šåŠ¨ä¹Ÿè´Ÿè´£å‡ºå‘æ»šåŠ¨ã€‚</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.TimeBasedRollingPolicy"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">            æ»šåŠ¨æ—¶äº§ç”Ÿçš„æ–‡ä»¶çš„å­˜æ”¾ä½ç½®åŠæ–‡ä»¶åç§° %d&#123;yyyy-MM-dd&#125;ï¼šæŒ‰å¤©è¿›è¡Œæ—¥å¿—æ»šåŠ¨</span></span><br><span class="line"><span class="comment">            %iï¼šå½“æ–‡ä»¶å¤§å°è¶…è¿‡maxFileSizeæ—¶ï¼ŒæŒ‰ç…§iè¿›è¡Œæ–‡ä»¶æ»šåŠ¨</span></span><br><span class="line"><span class="comment">            --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;LOG_HOME&#125;/$&#123;appName&#125;-%d&#123;yyyy-MM-dd&#125;-%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">            å¯é€‰èŠ‚ç‚¹ï¼Œæ§åˆ¶ä¿ç•™çš„å½’æ¡£æ–‡ä»¶çš„æœ€å¤§æ•°é‡ï¼Œè¶…å‡ºæ•°é‡å°±åˆ é™¤æ—§æ–‡ä»¶ã€‚å‡è®¾è®¾ç½®æ¯å¤©æ»šåŠ¨ï¼Œ</span></span><br><span class="line"><span class="comment">            ä¸”maxHistoryæ˜¯365ï¼Œåˆ™åªä¿å­˜æœ€è¿‘365å¤©çš„æ–‡ä»¶ï¼Œåˆ é™¤ä¹‹å‰çš„æ—§æ–‡ä»¶ã€‚æ³¨æ„ï¼Œåˆ é™¤æ—§æ–‡ä»¶æ˜¯ï¼Œ</span></span><br><span class="line"><span class="comment">            é‚£äº›ä¸ºäº†å½’æ¡£è€Œåˆ›å»ºçš„ç›®å½•ä¹Ÿä¼šè¢«åˆ é™¤ã€‚</span></span><br><span class="line"><span class="comment">            --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">MaxHistory</span>&gt;</span>365<span class="tag">&lt;/<span class="name">MaxHistory</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">            å½“æ—¥å¿—æ–‡ä»¶è¶…è¿‡maxFileSizeæŒ‡å®šçš„å¤§å°æ˜¯ï¼Œæ ¹æ®ä¸Šé¢æåˆ°çš„%iè¿›è¡Œæ—¥å¿—æ–‡ä»¶æ»šåŠ¨ æ³¨æ„æ­¤å¤„é…ç½®SizeBasedTriggeringPolicyæ˜¯æ— æ³•å®ç°æŒ‰æ–‡ä»¶å¤§å°è¿›è¡Œæ»šåŠ¨çš„ï¼Œå¿…é¡»é…ç½®timeBasedFileNamingAndTriggeringPolicy</span></span><br><span class="line"><span class="comment">            --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>100MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ—¥å¿—è¾“å‡ºæ ¼å¼ï¼š --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.PatternLayout"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [ %thread ] - [ %-5level ] [ %logger&#123;50&#125; : %line ] - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">loggerä¸»è¦ç”¨äºå­˜æ”¾æ—¥å¿—å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥å®šä¹‰æ—¥å¿—ç±»å‹ã€çº§åˆ«</span></span><br><span class="line"><span class="comment">nameï¼šè¡¨ç¤ºåŒ¹é…çš„loggerç±»å‹å‰ç¼€ï¼Œä¹Ÿå°±æ˜¯åŒ…çš„å‰åŠéƒ¨åˆ†</span></span><br><span class="line"><span class="comment">levelï¼šè¦è®°å½•çš„æ—¥å¿—çº§åˆ«ï¼ŒåŒ…æ‹¬ TRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR</span></span><br><span class="line"><span class="comment">additivityï¼šä½œç”¨åœ¨äºchildren-loggeræ˜¯å¦ä½¿ç”¨ rootLoggeré…ç½®çš„appenderè¿›è¡Œè¾“å‡ºï¼Œ</span></span><br><span class="line"><span class="comment">falseï¼šè¡¨ç¤ºåªç”¨å½“å‰loggerçš„appender-refï¼Œtrueï¼š</span></span><br><span class="line"><span class="comment">è¡¨ç¤ºå½“å‰loggerçš„appender-refå’ŒrootLoggerçš„appender-reféƒ½æœ‰æ•ˆ</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- hibernate logger --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"com.lcx"</span> <span class="attr">level</span>=<span class="string">"debug"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Spring framework logger --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"org.springframework"</span> <span class="attr">level</span>=<span class="string">"debug"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>&gt;</span><span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    rootä¸loggeræ˜¯çˆ¶å­å…³ç³»ï¼Œæ²¡æœ‰ç‰¹åˆ«å®šä¹‰åˆ™é»˜è®¤ä¸ºrootï¼Œä»»ä½•ä¸€ä¸ªç±»åªä¼šå’Œä¸€ä¸ªloggerå¯¹åº”ï¼Œ</span></span><br><span class="line"><span class="comment">    è¦ä¹ˆæ˜¯å®šä¹‰çš„loggerï¼Œè¦ä¹ˆæ˜¯rootï¼Œåˆ¤æ–­çš„å…³é”®åœ¨äºæ‰¾åˆ°è¿™ä¸ªloggerï¼Œç„¶ååˆ¤æ–­è¿™ä¸ªloggerçš„appenderå’Œlevelã€‚</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">"info"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"stdout"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"appLogAppender"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="2-ä½¿ç”¨log4j2æ›¿æ¢Logback"><a href="#2-ä½¿ç”¨log4j2æ›¿æ¢Logback" class="headerlink" title="2.ä½¿ç”¨log4j2æ›¿æ¢Logback"></a>2.ä½¿ç”¨log4j2æ›¿æ¢Logback</h1><h2 id="2-1Log4j2ç®€ä»‹"><a href="#2-1Log4j2ç®€ä»‹" class="headerlink" title="2.1Log4j2ç®€ä»‹"></a>2.1Log4j2ç®€ä»‹</h2><p> Log4j2æ˜¯Log4jçš„å‡çº§ç‰ˆï¼Œä¸ä¹‹å‰çš„ç‰ˆæœ¬Log4j 1.xç›¸æ¯”ã€æœ‰é‡å¤§çš„æ”¹è¿›ï¼Œä¿®æ­£äº†Logbackå›ºæœ‰çš„æ¶æ„é—®é¢˜çš„åŒäº‹ï¼Œæ”¹è¿›äº†è®¸å¤šLogbackæ‰€å…·æœ‰çš„åŠŸèƒ½ã€‚ </p><h2 id="2-2ç‰¹æ€§"><a href="#2-2ç‰¹æ€§" class="headerlink" title="2.2ç‰¹æ€§"></a>2.2ç‰¹æ€§</h2><h3 id="2-2-1-API-åˆ†ç¦»"><a href="#2-2-1-API-åˆ†ç¦»" class="headerlink" title="2.2.1 API åˆ†ç¦»"></a>2.2.1 API åˆ†ç¦»</h3><p>  Log4j2å°†APIä¸å®ç°åˆ†ç¦»å¼€æ¥ã€‚å¼€å‘äººå‘˜ç°åœ¨å¯ä»¥å¾ˆæ¸…æ¥šçš„çŸ¥é“èƒ½å¤Ÿä½¿ç”¨å“ªäº›æ²¡æœ‰å…¼å®¹é—®é¢˜çš„ç±»å’Œæ–¹æ³•ï¼ŒåŒäº‹åˆå…è®¸é€šè¿‡è‡ªå·±å®ç°æ¥å¢åŠ åŠŸèƒ½ã€‚ </p><h3 id="2-2-2æ”¹è¿›æ€§èƒ½"><a href="#2-2-2æ”¹è¿›æ€§èƒ½" class="headerlink" title="2.2.2æ”¹è¿›æ€§èƒ½"></a>2.2.2æ”¹è¿›æ€§èƒ½</h3><p>  Log4j2çš„æ€§èƒ½åœ¨æŸäº›å…³é”®é¢†åŸŸæ¯”Log4j 1.xæ›´å¿«ï¼Œè€Œä¸”å¤§å¤šæ•°æƒ…å†µä¸‹ä¸Logbackç›¸å½“ã€‚ </p><h3 id="2-2-3-æ”¯æŒå¤šç§-API"><a href="#2-2-3-æ”¯æŒå¤šç§-API" class="headerlink" title="2.2.3 æ”¯æŒå¤šç§ API"></a>2.2.3 æ”¯æŒå¤šç§ API</h3><p> Log4j 2æä¾›äº†æœ€æ£’çš„æ€§èƒ½çš„åŒäº‹ï¼Œè¿˜æ”¯æŒSLF4Jå’Œå…¬å…±æ—¥å¿—è®°å½•APIã€‚</p><h3 id="2-2-4-è‡ªåŠ¨è£…é…åŠ è½½"><a href="#2-2-4-è‡ªåŠ¨è£…é…åŠ è½½" class="headerlink" title="2.2.4 è‡ªåŠ¨è£…é…åŠ è½½"></a>2.2.4 è‡ªåŠ¨è£…é…åŠ è½½</h3><p> åƒLogbackä¸€æ ·ï¼Œä¸€æ—¦é…ç½®å‘ç”Ÿæ”¹å˜ï¼ŒLog4j2å¯ä»¥è‡ªåŠ¨è½½å…¥è¿™äº›æ›´æ”¹åçš„é…ç½®ä¿¡æ¯ï¼Œåˆä¸Logbackä¸åŒï¼Œé…ç½®å‘ç”Ÿæ”¹å˜æ—¶ä¸ä¼šä¸¢å¤±ä»»ä½•æ—¥å¿—äº‹ä»¶ã€‚ </p><h3 id="2-2-5-é«˜çº§è¿‡æ»¤åŠŸèƒ½"><a href="#2-2-5-é«˜çº§è¿‡æ»¤åŠŸèƒ½" class="headerlink" title="2.2.5 é«˜çº§è¿‡æ»¤åŠŸèƒ½"></a>2.2.5 é«˜çº§è¿‡æ»¤åŠŸèƒ½</h3><p>ä¸Logbackç±»ä¼¼ï¼ŒLog4Jj2å¯ä»¥æ”¯æŒåŸºäºä¸Šä¸‹æ–‡æ•°æ®ã€æ ‡è®°ã€æ­£åˆ™è¡¨è¾¾å¼ä»¥åŠæ—¥å¿—æ—¶é—´ä¸­çš„å…¶ä»–ç»„ä»¶çš„è¿‡æ»¤ã€‚Log4j2èƒ½å¤Ÿä¸“é—¨åˆ¶å®šé€‚ç”¨äºæ‰€æœ‰çš„äº‹ä»¶ï¼Œæ— è®ºè¿™äº›äº‹ä»¶åœ¨ä¼ å…¥Loggersä¹‹å‰è¿˜æ˜¯æ­£åœ¨ä¼ ç»™appendersã€‚å¦å¤–ï¼Œè¿‡æ»¤å™¨è¿˜å¯ä»¥ä¸Loggerså…³è”å…¶é˜¿é‡Œã€‚ä¸Logbackä¸åŒçš„æ˜¯ï¼ŒFilterå…¬å…±ç±»å¯ä»¥ç”¨äºä»»ä½•æƒ…å†µã€‚</p><h3 id="2-2-6-æ’ä»¶æ¶æ„"><a href="#2-2-6-æ’ä»¶æ¶æ„" class="headerlink" title="2.2.6 æ’ä»¶æ¶æ„"></a>2.2.6 æ’ä»¶æ¶æ„</h3><p> æ‰€æœ‰å¯ä»¥é…ç½®çš„ç»„ä»¶éƒ½ä»¥Log4jæ’ä»¶çš„å½¢å¼æ¥å®šä¹‰ã€‚åŒæ ·åœ°ï¼Œä¸éœ€è¦ä¿®æ”¹ä»»ä½•Log4jä»£ç å°±å¯ä»¥åˆ›å»ºæ–°çš„Appenderã€layoutã€Pattern Convertç­‰ç­‰ã€‚Log4jè‡ªåŠ¨è¯†åˆ«é¢„å®šä¹‰çš„æ’ä»¶ï¼Œå¦‚æœåœ¨é…ç½®ä¸­å¼•ç”¨åˆ°è¿™äº›æ’ä»¶ï¼ŒLog4jå°±ä¼šè‡ªåŠ¨è½½å…¥ä½¿ç”¨ã€‚ </p><h3 id="2-2-7-å±æ€§æ”¯æŒ"><a href="#2-2-7-å±æ€§æ”¯æŒ" class="headerlink" title="2.2.7 å±æ€§æ”¯æŒ"></a>2.2.7 å±æ€§æ”¯æŒ</h3><p> å±æ€§å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­å¼•ç”¨ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ›¿ä»£æˆ–ä¼ å…¥æ½œåœ¨çš„ç»„ä»¶ï¼Œå±æ€§åœ¨è¿™äº›ç»„ä»¶ä¸­èƒ½å¤ŸåŠ¨æ€è§£æã€‚å±æ€§å¯ä»¥æ˜¯é…ç½®æ–‡ä»¶ã€å±æ€§æ–‡ä»¶ã€ç¯å¢ƒå˜é‡ã€çº¿ç¨‹ä¸Šä¸‹æ–‡æ˜ å°„ä»¥åŠäº‹ä»¶ä¸­çš„æ•°æ®ä¸­å®šä¹‰çš„å€¼ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡å¢åŠ è‡ªå·±çš„Lookupæ’ä»¶æ¥å®šåˆ¶è‡ªå·±çš„å±æ€§ã€‚ </p><h2 id="2-3æ—¥å¿—é…ç½®"><a href="#2-3æ—¥å¿—é…ç½®" class="headerlink" title="2.3æ—¥å¿—é…ç½®"></a>2.3æ—¥å¿—é…ç½®</h2><h3 id="2-3-1pomæ–‡ä»¶ä¸­çš„æ”¹åŠ¨"><a href="#2-3-1pomæ–‡ä»¶ä¸­çš„æ”¹åŠ¨" class="headerlink" title="2.3.1pomæ–‡ä»¶ä¸­çš„æ”¹åŠ¨"></a>2.3.1pomæ–‡ä»¶ä¸­çš„æ”¹åŠ¨</h3><p>è§£é™¤åº•å±‚é»˜è®¤æ—¥å¿—ä¾èµ–ã€å¹¶æ·»åŠ log4j2ä½œä¸ºè‡ªå·±çš„æ—¥å¿—å®ç°ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!--è§£é™¤åº•å±‚çš„é»˜è®¤çš„æ—¥å¿—ä¾èµ–  logback--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ä½¿ç”¨log4j2ä½œä¸ºæ—¥å¿—çš„å®ç°--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-log4j2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-3-2åœ¨application-propertiesä¸­é…ç½®"><a href="#2-3-2åœ¨application-propertiesä¸­é…ç½®" class="headerlink" title="2.3.2åœ¨application.propertiesä¸­é…ç½®"></a>2.3.2åœ¨application.propertiesä¸­é…ç½®</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">logging.level.root</span>=<span class="string">info</span></span><br><span class="line"><span class="meta">logging.level.com.lcx</span>=<span class="string">debug</span></span><br><span class="line"><span class="meta">logging.file.name</span>=<span class="string">F:/spring01/spring.log</span></span><br><span class="line"><span class="meta">logging.file.max-size</span>=<span class="string">100MB</span></span><br><span class="line"><span class="meta">logging.pattern.console</span>=<span class="string">&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n</span></span><br><span class="line"><span class="meta">logging.pattern.file</span>=<span class="string">&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125;==== [%thread] === %-5level %logger&#123;50&#125; - %msg%n</span></span><br></pre></td></tr></table></figure><h3 id="2-3-3åœ¨xmlä¸­çš„é…ç½®"><a href="#2-3-3åœ¨xmlä¸­çš„é…ç½®" class="headerlink" title="2.3.3åœ¨xmlä¸­çš„é…ç½®"></a>2.3.3åœ¨xmlä¸­çš„é…ç½®</h3><p><strong>log4j.xmlå†…å®¹å¦‚ä¸‹ï¼š</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ—¥å¿—çº§åˆ«ä»¥åŠä¼˜å…ˆçº§æ’åº: OFF &gt; FATAL &gt; ERROR &gt; WARN &gt; INFO &gt; DEBUG &gt; TRACE &gt; ALL --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Configurationåé¢çš„statusï¼Œè¿™ä¸ªç”¨äºè®¾ç½®log4j2è‡ªèº«å†…éƒ¨çš„ä¿¡æ¯è¾“å‡ºï¼Œå¯ä»¥ä¸è®¾ç½®ï¼Œå½“è®¾ç½®æˆtraceæ—¶ï¼Œä½ ä¼šçœ‹åˆ°log4j2å†…éƒ¨å„ç§è¯¦ç»†è¾“å‡º--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--monitorIntervalï¼šLog4jèƒ½å¤Ÿè‡ªåŠ¨æ£€æµ‹ä¿®æ”¹é…ç½® æ–‡ä»¶å’Œé‡æ–°é…ç½®æœ¬èº«ï¼Œè®¾ç½®é—´éš”ç§’æ•°--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">status</span>=<span class="string">"WARN"</span> <span class="attr">monitorInterval</span>=<span class="string">"30"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å…ˆå®šä¹‰æ‰€æœ‰çš„appender--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appenders</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è¿™ä¸ªè¾“å‡ºæ§åˆ¶å°çš„é…ç½®--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">console</span> <span class="attr">name</span>=<span class="string">"Console"</span> <span class="attr">target</span>=<span class="string">"SYSTEM_OUT"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--è¾“å‡ºæ—¥å¿—çš„æ ¼å¼--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"[%d&#123;HH:mm:ss:SSS&#125;] [%p] - %l - %m%n"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">console</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ–‡ä»¶ä¼šæ‰“å°å‡ºæ‰€æœ‰ä¿¡æ¯ï¼Œè¿™ä¸ªlogæ¯æ¬¡è¿è¡Œç¨‹åºä¼šè‡ªåŠ¨æ¸…ç©ºï¼Œç”±appendå±æ€§å†³å®šï¼Œè¿™ä¸ªä¹ŸæŒºæœ‰ç”¨çš„ï¼Œé€‚åˆä¸´æ—¶æµ‹è¯•ç”¨--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">File</span> <span class="attr">name</span>=<span class="string">"log"</span> <span class="attr">fileName</span>=<span class="string">"F:/spring-Log/spring.log"</span> <span class="attr">append</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"%d&#123;HH:mm:ss.SSS&#125; %-5level %class&#123;36&#125; %L %M - %msg%xEx%n"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">File</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è¿™ä¸ªä¼šæ‰“å°å‡ºæ‰€æœ‰çš„infoåŠä»¥ä¸‹çº§åˆ«çš„ä¿¡æ¯ï¼Œæ¯æ¬¡å¤§å°è¶…è¿‡sizeï¼Œåˆ™è¿™sizeå¤§å°çš„æ—¥å¿—ä¼šè‡ªåŠ¨å­˜å…¥æŒ‰å¹´ä»½-æœˆä»½å»ºç«‹çš„æ–‡ä»¶å¤¹ä¸‹é¢å¹¶è¿›è¡Œå‹ç¼©ï¼Œä½œä¸ºå­˜æ¡£--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RollingFile</span> <span class="attr">name</span>=<span class="string">"RollingFileInfo"</span> <span class="attr">fileName</span>=<span class="string">"$&#123;sys:user.home&#125;/logs/info.log"</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">filePattern</span>=<span class="string">"$&#123;sys:user.home&#125;/logs/$$&#123;date:yyyy-MM&#125;/info-%d&#123;yyyy-MM-dd&#125;-%i.log"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ§åˆ¶å°åªè¾“å‡ºlevelåŠä»¥ä¸Šçº§åˆ«çš„ä¿¡æ¯ï¼ˆonMatchï¼‰ï¼Œå…¶ä»–çš„ç›´æ¥æ‹’ç»ï¼ˆonMismatchï¼‰--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"info"</span> <span class="attr">onMatch</span>=<span class="string">"ACCEPT"</span> <span class="attr">onMismatch</span>=<span class="string">"DENY"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"[%d&#123;HH:mm:ss:SSS&#125;] [%p] - %l - %m%n"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Policies</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">TimeBasedTriggeringPolicy</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">SizeBasedTriggeringPolicy</span> <span class="attr">size</span>=<span class="string">"100 MB"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">Policies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RollingFile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RollingFile</span> <span class="attr">name</span>=<span class="string">"RollingFileWarn"</span> <span class="attr">fileName</span>=<span class="string">"$&#123;sys:user.home&#125;/logs/warn.log"</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">filePattern</span>=<span class="string">"$&#123;sys:user.home&#125;/logs/$$&#123;date:yyyy-MM&#125;/warn-%d&#123;yyyy-MM-dd&#125;-%i.log"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"warn"</span> <span class="attr">onMatch</span>=<span class="string">"ACCEPT"</span> <span class="attr">onMismatch</span>=<span class="string">"DENY"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"[%d&#123;HH:mm:ss:SSS&#125;] [%p] - %l - %m%n"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Policies</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">TimeBasedTriggeringPolicy</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">SizeBasedTriggeringPolicy</span> <span class="attr">size</span>=<span class="string">"100 MB"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">Policies</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- DefaultRolloverStrategyå±æ€§å¦‚ä¸è®¾ç½®ï¼Œåˆ™é»˜è®¤ä¸ºæœ€å¤šåŒä¸€æ–‡ä»¶å¤¹ä¸‹7ä¸ªæ–‡ä»¶ï¼Œè¿™é‡Œè®¾ç½®äº†20 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">DefaultRolloverStrategy</span> <span class="attr">max</span>=<span class="string">"20"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RollingFile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RollingFile</span> <span class="attr">name</span>=<span class="string">"RollingFileError"</span> <span class="attr">fileName</span>=<span class="string">"$&#123;sys:user.home&#125;/logs/error.log"</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">filePattern</span>=<span class="string">"$&#123;sys:user.home&#125;/logs/$$&#123;date:yyyy-MM&#125;/error-%d&#123;yyyy-MM-dd&#125;-%i.log"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"error"</span> <span class="attr">onMatch</span>=<span class="string">"ACCEPT"</span> <span class="attr">onMismatch</span>=<span class="string">"DENY"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"[%d&#123;HH:mm:ss:SSS&#125;] [%p] - %l - %m%n"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Policies</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">TimeBasedTriggeringPolicy</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">SizeBasedTriggeringPolicy</span> <span class="attr">size</span>=<span class="string">"100 MB"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">Policies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RollingFile</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appenders</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ç„¶åå®šä¹‰loggerï¼Œåªæœ‰å®šä¹‰äº†loggerå¹¶å¼•å…¥çš„appenderï¼Œappenderæ‰ä¼šç”Ÿæ•ˆ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">loggers</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è¿‡æ»¤æ‰springå’Œmybatisçš„ä¸€äº›æ— ç”¨çš„DEBUGä¿¡æ¯--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"org.springframework"</span> <span class="attr">level</span>=<span class="string">"INFO"</span>&gt;</span><span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"org.mybatis"</span> <span class="attr">level</span>=<span class="string">"INFO"</span>&gt;</span><span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">"all"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"Console"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"RollingFileInfo"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"RollingFileWarn"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"RollingFileError"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">loggers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬”è¯•é¢˜æ€»ç»“</title>
      <link href="/2020/02/21/%E7%AC%94%E8%AF%95%E9%A2%98%E6%80%BB%E7%BB%93/"/>
      <url>/2020/02/21/%E7%AC%94%E8%AF%95%E9%A2%98%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<h2 id="1-ç¼–ç¨‹é¢˜"><a href="#1-ç¼–ç¨‹é¢˜" class="headerlink" title="1.ç¼–ç¨‹é¢˜"></a>1.ç¼–ç¨‹é¢˜</h2><h3 id="1-1å€’åºæ•°ï¼š"><a href="#1-1å€’åºæ•°ï¼š" class="headerlink" title="1.1å€’åºæ•°ï¼š"></a>1.1å€’åºæ•°ï¼š</h3><p>å°†ä¸€ä¸ªæ•´æ•°ä¸­çš„æ•°å­—è¿›è¡Œé¢ å€’ï¼Œå½“é¢ å€’åçš„æ•´æ•°æº¢å‡ºæ—¶ï¼Œè¿”å› 0 (æ ‡è®°ä¸º 32 ä½æ•´æ•°)ã€‚<br>ç»™å®š x = 123ï¼Œè¿”å› 321 </p><p>ç»™å®š x = -123ï¼Œè¿”å› -321</p><p>æ€è·¯ï¼›é€šè¿‡å–ä½™å–å¾—æœ€åä¸€ä½ ç„¶åé™¤ä»¥åå†å–æœ€åä¸€ä½(ç›¸å½“äºå¾€å‰å–ä¸€ä½) ,ç”¨ä¸€ä¸ªæ•°ä¿å­˜ï¼Œæ¯æ¬¡å–å¾—éƒ½ä¹˜åå¹¶åŠ ä¸Šå–å¾—çš„æ•°å­—ï¼ˆç›¸å½“äºå¾€å‰æŒ¤ä¸€ä½ï¼‰ï¼Œ</p><a id="more"></a><pre><code>ç›´è‡³åŸæ•°ä¸èƒ½å†è¢«åæ•´é™¤æˆ–è€…åè½¬ç»“æœå·²ç»æº¢å‡ºåˆ™ç»“æŸå¾ªç¯</code></pre><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.it.bigdata.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Daoxu</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">outNumber</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> c = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (n != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span> temp = c; <span class="comment">//ä¸´æ—¶è®°å½•c ç”¨äºåˆ¤æ–­æ˜¯å¦æº¢å‡º</span></span><br><span class="line">            c = c * <span class="number">10</span>  + n % <span class="number">10</span>;</span><br><span class="line">            n /= <span class="number">10</span>;</span><br><span class="line">            <span class="keyword">if</span>(c/<span class="number">10</span> != temp)&#123;<span class="comment">//å¦‚æœc/10å’Œä¸´æ—¶è®°å½•å¹¶ä¸ç›¸ç­‰ï¼Œè¯´æ˜å·²ç»æº¢å‡ºäº† ç»“æŸå¾ªç¯</span></span><br><span class="line">                c = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> c;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = -<span class="number">10</span>;</span><br><span class="line">        <span class="keyword">int</span> i = outNumber(n);</span><br><span class="line">        System.out.println(i);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><strong>c = c * 10  + n % 10</strong></p><p><strong>c = c * 10  + n % 10</strong></p><p><strong>c = c * 10  + n % 10</strong></p><p>çœŸæ»´è ¢ï¼ï¼ï¼</p><h3 id="1-2è·³å°é˜¶ï¼š"><a href="#1-2è·³å°é˜¶ï¼š" class="headerlink" title="1.2è·³å°é˜¶ï¼š"></a>1.2è·³å°é˜¶ï¼š</h3><p> ä¸€æ¬¡å¯ä»¥è·³ä¸Š1çº§å°é˜¶ï¼Œä¹Ÿå¯ä»¥è·³ä¸Š2çº§ã€‚æ±‚è¯¥é’è›™è·³ä¸Šä¸€ä¸ªnçº§çš„å°é˜¶æ€»å…±æœ‰å¤šå°‘ç§è·³æ³•ï¼ˆå…ˆåæ¬¡åºä¸åŒç®—ä¸åŒçš„ç»“æœï¼‰ã€‚ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">JumpFloor</span><span class="params">(<span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(target &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(target == <span class="number">1</span> || target == <span class="number">2</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> target;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> JumpFloor(target - <span class="number">1</span>)+JumpFloor(target -<span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> ç¬”è¯•æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringMVC02</title>
      <link href="/2020/02/12/SpringMVC02/"/>
      <url>/2020/02/12/SpringMVC02/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€lombokæ³¨è§£å¼€å‘"><a href="#ä¸€ã€lombokæ³¨è§£å¼€å‘" class="headerlink" title="ä¸€ã€lombokæ³¨è§£å¼€å‘"></a>ä¸€ã€lombokæ³¨è§£å¼€å‘</h1><ul><li><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2></li></ul><p>å¤§éƒ¨åˆ†é¡¹ç›®ä¸­éƒ½å¿…ä¸å¯å°‘çš„åŒ…å«æ•°æ®åº“å®ä½“(Entity)ã€æ•°æ®è½½ä½“(dto,dataObject),è€Œè¿™ä¸¤éƒ¨åˆ†éƒ½åŒ…å«ç€å¤§é‡çš„æ²¡æœ‰ä¸šåŠ¡é€»è¾‘çš„setterã€getterã€ç©ºå‚æ„é€ ï¼ŒåŒæ—¶æˆ‘ä»¬ä¸€èˆ¬è¦å¤å†™ç±»çš„toString(),equals(),hashCode()æ–¹æ³•(è´«è¡€æ¨¡å‹)ã€‚è¿™äº›å·¥ä½œéƒ½æ˜¯é‡å¤æ€§çš„å·¥ä½œï¼Œä½œä¸ºç¨‹åºå‘˜ï¼Œæ‡’æ˜¯å¿…å¤‡ç´ è´¨ä¹‹ä¸€ï¼Œè¿™äº›å·¥ä½œè‚¯å®šå·²ç»æœ‰å¤§ç‰›å°è£…å¥½äº†å¤„ç†æ–¹æ³•,è¿™å°±æ˜¯lombokã€‚ </p><a id="more"></a><ul><li><h2 id="ä¸‹è½½å®‰è£…æ’ä»¶"><a href="#ä¸‹è½½å®‰è£…æ’ä»¶" class="headerlink" title="ä¸‹è½½å®‰è£…æ’ä»¶"></a>ä¸‹è½½å®‰è£…æ’ä»¶</h2><p>å»å®˜ç½‘ä¸‹è½½ideaå¯¹åº”ç‰ˆæœ¬çš„lombokçš„å‹ç¼©åŒ…</p><p>æ’ä»¶é…ç½®</p><p>é‡å¯</p></li><li><h2 id="å¼•å…¥pomä¾èµ–"><a href="#å¼•å…¥pomä¾èµ–" class="headerlink" title="å¼•å…¥pomä¾èµ–"></a>å¼•å…¥pomä¾èµ–</h2></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><h2 id="å¸¸ç”¨æ–¹æ³•"><a href="#å¸¸ç”¨æ–¹æ³•" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a>å¸¸ç”¨æ–¹æ³•</h2><ul><li><p><strong>@Setter</strong></p><p>ç”Ÿæˆsetteræ–¹æ³•ï¼Œfinalå˜é‡ä¸åŒ…å«</p></li><li><p><strong>@Getter</strong></p><p>ç”Ÿæˆgetteræ–¹æ³•ï¼Œfinalå˜é‡ä¸åŒ…å«</p></li><li><p><strong>@NoArgsConstructor</strong></p><p>ç”Ÿæˆç©ºå‚æ„é€ </p></li><li><p><strong>@AllArgsConstructor</strong></p><p>ç”Ÿæˆå…¨éƒ¨å‚æ•°æ„é€ </p></li><li><p><strong>@RequiredArgsConstructor</strong></p><p>å°†æ ‡è®°ä¸º@NoNullçš„å±æ€§ç”Ÿæˆä¸€ä¸ªæ„é€ å™¨ ï¼Œ å¦‚æœè¿è¡Œä¸­æ ‡è®°ä¸º@NoNullçš„å±æ€§ä¸ºnull,ä¼šæŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚ </p></li><li><p><strong>@ToString</strong></p><p>ç”Ÿæˆæ‰€æœ‰å±æ€§çš„toString()æ–¹æ³• </p></li><li><p><strong>@EqualsAndHashCode</strong></p><p>ç”Ÿæˆequals()æ–¹æ³•å’ŒhashCodeæ–¹æ³• </p></li><li><p><strong>@Data(å¸¸ç”¨)</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@Dataç›´æ¥ä¿®é¥°POJO or beansï¼Œ getteræ‰€æœ‰çš„å˜é‡ï¼Œsetteræ‰€æœ‰ä¸ä¸ºfinalçš„å˜é‡ã€‚å¦‚æœä½ ä¸éœ€è¦é»˜è®¤çš„ç”Ÿæˆæ–¹å¼ï¼Œç›´æ¥å¡«å†™ä½ éœ€è¦çš„annotationçš„å°±å¯ä»¥äº†ã€‚é»˜è®¤ç”Ÿæˆçš„æ‰€æœ‰çš„annotationéƒ½æ˜¯publicçš„ï¼Œå¦‚æœéœ€è¦ä¸åŒæƒé™ä¿®é¥°ç¬¦å¯ä»¥ä½¿ç”¨AccessLevel.NONEé€‰é¡¹ã€‚å½“ç„¶@Data ä¹Ÿå¯ä»¥ä½¿ç”¨staticConstructoré€‰é¡¹ç”Ÿæˆä¸€ä¸ªé™æ€æ–¹æ³•ã€‚</span><br></pre></td></tr></table></figure><p><strong>@Data=@Setter+@Getter+@EqualsAndHashCode+@NoArgsConstructor</strong></p></li><li><p><strong>@SneakyThrows</strong> </p><p>å¯ä»¥å¯¹å—æ£€å¼‚å¸¸è¿›è¡Œæ•æ‰å¹¶æŠ›å‡ºã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyDateConversion</span> <span class="keyword">implements</span> <span class="title">Converter</span> &lt;<span class="title">String</span>, <span class="title">Date</span>&gt;</span>&#123;</span><br><span class="line">    <span class="meta">@SneakyThrows</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">convert</span><span class="params">(String  str)</span> </span>&#123;</span><br><span class="line">        SimpleDateFormat  simpleDateFormat  =  <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd hh:mm:ss"</span>);</span><br><span class="line">        Date  date =  simpleDateFormat.parse(str);</span><br><span class="line">        <span class="keyword">return</span> date;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h1 id="äºŒã€SpringMVCæ³¨è§£å¼€å‘"><a href="#äºŒã€SpringMVCæ³¨è§£å¼€å‘" class="headerlink" title="äºŒã€SpringMVCæ³¨è§£å¼€å‘"></a>äºŒã€SpringMVCæ³¨è§£å¼€å‘</h1><ul><li><h3 id="å¯¼å…¥MVCã€Webä¾èµ–"><a href="#å¯¼å…¥MVCã€Webä¾èµ–" class="headerlink" title="å¯¼å…¥MVCã€Webä¾èµ–"></a>å¯¼å…¥MVCã€Webä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.13.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.13.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><h2 id="SpringMVCä¸­æ³¨è§£å¼€å‘çš„æ³¨è§£æ€»ç»“"><a href="#SpringMVCä¸­æ³¨è§£å¼€å‘çš„æ³¨è§£æ€»ç»“" class="headerlink" title="SpringMVCä¸­æ³¨è§£å¼€å‘çš„æ³¨è§£æ€»ç»“"></a>SpringMVCä¸­æ³¨è§£å¼€å‘çš„æ³¨è§£æ€»ç»“</h2><ul><li><p><strong>@controller</strong> </p><p>æ ‡è®°ä¸ºå¤„ç†å™¨ï¼Œæ–¹ä¾¿Springå®¹å™¨è¿›è¡Œæ˜ å°„ã€‚ </p></li><li><p><strong>@RequestMapping</strong> </p><p>é€šè¿‡RequestMappingæ³¨è§£å¯ä»¥å®šä¹‰ä¸åŒçš„å¤„ç†å™¨æ˜ å°„è§„åˆ™ã€‚ </p><p><strong>ä½œç”¨ï¼š</strong></p><p>1ã€URLè·¯å¾„æ˜ å°„ã€‚</p><p>2ã€çª„åŒ–è¯·æ±‚æ˜ å°„ã€‚</p><p>@RequestMappingæ”¾åœ¨ç±»åä¸Šè¾¹ï¼Œè®¾ç½®è¯·æ±‚å‰ç¼€</p><p>@Controller</p><p>@RequestMapping(â€œ/itemâ€)</p><p>æ–¹æ³•åä¸Šè¾¹è®¾ç½®è¯·æ±‚æ˜ å°„urlï¼š</p><p>@RequestMappingæ”¾åœ¨æ–¹æ³•åä¸Šè¾¹ï¼Œå¦‚ä¸‹ï¼š</p><p>@RequestMapping(â€œ/queryItem â€œ) </p><p>è®¿é—®åœ°å€ä¸ºï¼š/item/queryItem</p><p> 3ã€è¯·æ±‚æ–¹æ³•é™å®š </p></li><li><p><strong>@RequestParam</strong> </p><p>ä½¿ç”¨@RequestParamå¸¸ç”¨äºå¤„ç†ç®€å•ç±»å‹çš„ç»‘å®šã€‚</p><p>å¸¸ç”¨å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">editItem</span><span class="params">(@RequestParam(value=<span class="string">"item_id"</span>,required=<span class="keyword">true</span>)</span> String id) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>@Validated</strong> </p><p>åœ¨ç»‘å®šå‚æ•°çš„å‚æ•°å‰æ·»åŠ ï¼Œè¡¨ç¤ºå¯¹è¯¥å‚æ•°è¿›è¡Œæ ¡éªŒã€‚å‚æ•°åé¢è¿˜éœ€è¦æ·»åŠ BindingResultï¼Œè¡¨ç¤ºæ£€éªŒä¿¡æ¯å†™å…¥æ­¤ã€‚ </p></li><li><p><strong>@RequestBodyå’ŒResponseBody</strong> </p><p>@RequestBodyå’ŒResponseBodyåˆ†åˆ«è¡¨ç¤ºè¾“å…¥å’Œè¾“å‡ºè½¬æ¢ä¸ºjsonæ•°æ®ã€‚</p><p>controllerç¼–å†™ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/json"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">json</span><span class="params">(Person person)</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"------------jsondata-----------------"</span>);</span><br><span class="line">    <span class="keyword">return</span>  person;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>@PathVariable</strong> </p><p>ç”¨äºRESTfullä¸­çš„æ¨¡æ¿æ¨¡å¼æ˜ å°„ã€‚</p><p>@PathVariableç”¨äºå°†è¯·æ±‚URLä¸­çš„æ¨¡æ¿å˜é‡æ˜ å°„åˆ°åŠŸèƒ½å¤„ç†æ–¹æ³•çš„å‚æ•°ä¸Šã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/* å¤šä¸ªå ä½ç¬¦çš„å€¼å¾—æ¥å—å’Œä¼ é€’ */</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/param04/&#123;id&#125;/&#123;name&#125;"</span>,method = RequestMethod.GET)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">param04</span><span class="params">(@PathVariable(value = <span class="string">"id"</span>,required = <span class="keyword">true</span>)</span> <span class="keyword">int</span>  id</span></span><br><span class="line"><span class="function">  ,@<span class="title">PathVariable</span><span class="params">(value = <span class="string">"name"</span>)</span>String name)</span>&#123;</span><br><span class="line">      System.out.println(id +<span class="string">"-----------"</span>+ name);</span><br><span class="line">      <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> å·¥å…· </category>
          
          <category> lombok </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringMVC</title>
      <link href="/2020/01/29/SpringMVC/"/>
      <url>/2020/01/29/SpringMVC/</url>
      
        <content type="html"><![CDATA[<hr><hr><h1 id="ä¸€ã€SpringMVCæ˜¯ä»€ä¹ˆ"><a href="#ä¸€ã€SpringMVCæ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸€ã€SpringMVCæ˜¯ä»€ä¹ˆ?"></a>ä¸€ã€SpringMVCæ˜¯ä»€ä¹ˆ?</h1><p>Spring MVCå±äºSpringFrameWorkçš„åç»­äº§å“ï¼Œå·²ç»èåˆåœ¨Spring Web Flowé‡Œé¢ã€‚Spring æ¡†æ¶æä¾›äº†æ„å»º Web åº”ç”¨ç¨‹åºçš„å…¨åŠŸèƒ½ MVC æ¨¡å—ã€‚ä½¿ç”¨ Spring å¯æ’å…¥çš„ MVC æ¶æ„ï¼Œä»è€Œåœ¨ä½¿ç”¨Springè¿›è¡ŒWEBå¼€å‘æ—¶ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨Springçš„Spring MVCæ¡†æ¶æˆ–é›†æˆå…¶ä»–MVCå¼€å‘æ¡†æ¶ï¼Œå¦‚Struts1(ç°åœ¨ä¸€èˆ¬ä¸ç”¨)ï¼ŒStruts 2(ä¸€èˆ¬è€é¡¹ç›®ä½¿ç”¨)ç­‰ã€‚</p><a id="more"></a><h1 id="äºŒã€MVCçš„è®¾è®¡æ¶æ„"><a href="#äºŒã€MVCçš„è®¾è®¡æ¶æ„" class="headerlink" title="äºŒã€MVCçš„è®¾è®¡æ¶æ„"></a>äºŒã€MVCçš„è®¾è®¡æ¶æ„</h1><p>â€‹    <strong>m: model</strong></p><p>â€‹    <strong>v: view</strong></p><p>â€‹    <strong>c: controller</strong></p><p><a href="https://imgchr.com/i/1toyb6" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2020/02/02/1toyb6.md.png" alt="1toyb6.md.png"></a></p><h1 id="ä¸‰ã€SpringMVCçš„æ¡†æ¶"><a href="#ä¸‰ã€SpringMVCçš„æ¡†æ¶" class="headerlink" title="ä¸‰ã€SpringMVCçš„æ¡†æ¶"></a>ä¸‰ã€SpringMVCçš„æ¡†æ¶</h1><p><a href="https://imgchr.com/i/1toOPg" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2020/02/02/1toOPg.md.png" alt="1toOPg.md.png"></a></p><ol><li>ç”¨æˆ·å‘èµ·requestè¯·æ±‚ï¼Œè¯·æ±‚è‡³DispatcherServletå‰ç«¯æ§åˆ¶å™¨ </li><li>DispatcherServletå‰ç«¯æ§åˆ¶å™¨è¯·æ±‚HandlerMappingå¤„ç†å™¨æ˜ å°„å™¨æŸ¥æ‰¾Handler </li><li>HandlerMappingå¤„ç†å™¨æ˜ å°„å™¨ï¼Œæ ¹æ®urlåŠä¸€äº›é…ç½®è§„åˆ™ï¼ˆxmlé…ç½®ã€æ³¨è§£é…ç½®ï¼‰æŸ¥æ‰¾Handlerï¼Œå°†Handlerè¿”å›ç»™DispatcherServletå‰ç«¯æ§åˆ¶å™¨ </li><li>DispatcherServletå‰ç«¯æ§åˆ¶å™¨è°ƒç”¨é€‚é…å™¨æ‰§è¡ŒHandler </li><li>é€‚é…å™¨æ‰§è¡ŒHandler </li><li>Handleræ‰§è¡Œå®Œæˆè¿”å›ModelAndView </li><li>é€‚é…å™¨å°†ModelAndViewè¿”å›ç»™DispatcherServlet </li><li>DispatcherServletè°ƒç”¨è§†å›¾è§£æå™¨è¿›è¡Œè§†å›¾è§£æï¼Œè§£æåç”Ÿæˆview (springmvcè§†å›¾å°è£…å¯¹è±¡ )</li><li>ViewResolverè§†å›¾è§£æå™¨ç»™å‰ç«¯æ§åˆ¶å™¨è¿”å›view </li><li>DispatcherServletè°ƒç”¨viewçš„æ¸²æŸ“è§†å›¾çš„æ–¹æ³•ï¼Œå°†æ¨¡å‹æ•°æ®å¡«å……åˆ°requeståŸŸ </li><li>DispatcherServletå‘ç”¨æˆ·å“åº”ç»“æœ(jspé¡µé¢ã€jsonæ•°æ®ã€‚ã€‚ã€‚ã€‚) </li></ol><h1 id="å››ã€springmvcå…¥é—¨ç¨‹åº"><a href="#å››ã€springmvcå…¥é—¨ç¨‹åº" class="headerlink" title="å››ã€springmvcå…¥é—¨ç¨‹åº"></a>å››ã€springmvcå…¥é—¨ç¨‹åº</h1><h2 id="4-1-å¼•å…¥SpringMVCçš„ä¾èµ–"><a href="#4-1-å¼•å…¥SpringMVCçš„ä¾èµ–" class="headerlink" title="4.1 å¼•å…¥SpringMVCçš„ä¾èµ–"></a>4.1 å¼•å…¥SpringMVCçš„ä¾èµ–</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="4-2-é…ç½®å¤„ç†å™¨æ˜ å°„å™¨ã€é€‚é…å™¨å’Œè§†å›¾è§£æå™¨"><a href="#4-2-é…ç½®å¤„ç†å™¨æ˜ å°„å™¨ã€é€‚é…å™¨å’Œè§†å›¾è§£æå™¨" class="headerlink" title="4.2 é…ç½®å¤„ç†å™¨æ˜ å°„å™¨ã€é€‚é…å™¨å’Œè§†å›¾è§£æå™¨"></a>4.2 é…ç½®å¤„ç†å™¨æ˜ å°„å™¨ã€é€‚é…å™¨å’Œè§†å›¾è§£æå™¨</h2><p><strong>applicationContext.xml</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                           http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">                           http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                           http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="tag"><span class="string">                           http://www.springframework.org/schema/mvc/spring-mvc.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®æ³¨è§£æ‰«æå™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.it.bigdata"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¤„ç†å™¨æ˜ å°„å™¨  RequestMappingHandlerMapping--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¤„ç†å™¨é€‚é…å™¨  RequestMappingHandlerAdapter--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è§†å›¾è§£æå™¨  é»˜è®¤ä¸ºInternalResourceViewResolver --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;bean class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;property name="suffix" value=".jsp"&gt;&lt;/property&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;/bean&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="4-3-é…ç½®å‰ç«¯æ§åˆ¶å™¨"><a href="#4-3-é…ç½®å‰ç«¯æ§åˆ¶å™¨" class="headerlink" title="4.3  é…ç½®å‰ç«¯æ§åˆ¶å™¨"></a>4.3  é…ç½®å‰ç«¯æ§åˆ¶å™¨</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.action<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="4-4-ç¼–å†™å¤„ç†å™¨"><a href="#4-4-ç¼–å†™å¤„ç†å™¨" class="headerlink" title="4.4 ç¼–å†™å¤„ç†å™¨"></a>4.4 ç¼–å†™å¤„ç†å™¨</h2><p><strong>å³controllerå±‚ä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¤„ç†å™¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyController01</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›å€¼æ˜¯è§†å›¾</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ModelAndView</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/func1.action"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">func1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"func1"</span>);</span><br><span class="line">        ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView(<span class="string">"index02.jsp"</span>);</span><br><span class="line">        modelAndView.addObject(<span class="string">"username"</span>,<span class="string">"admin"</span>);</span><br><span class="line">        modelAndView.addObject(<span class="string">"userage"</span>,<span class="number">18</span>);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="4-5-ç¼–å†™è§†å›¾"><a href="#4-5-ç¼–å†™è§†å›¾" class="headerlink" title="4.5 ç¼–å†™è§†å›¾"></a>4.5 ç¼–å†™è§†å›¾</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> isELIgnored=<span class="string">"false"</span> %&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">"c"</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;index02&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">$&#123;username&#125;</span><br><span class="line">$&#123;userage&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h1 id="äº”ã€å¤„ç†å™¨æ–¹æ³•çš„è¿”å›å€¼"><a href="#äº”ã€å¤„ç†å™¨æ–¹æ³•çš„è¿”å›å€¼" class="headerlink" title="äº”ã€å¤„ç†å™¨æ–¹æ³•çš„è¿”å›å€¼"></a>äº”ã€å¤„ç†å™¨æ–¹æ³•çš„è¿”å›å€¼</h1><h2 id="5-1-è¿”å›ModelAndView"><a href="#5-1-è¿”å›ModelAndView" class="headerlink" title="5.1 è¿”å›ModelAndView"></a>5.1 è¿”å›ModelAndView</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/func1.action"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">func1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"func1"</span>);</span><br><span class="line">    ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView(<span class="string">"index02.jsp"</span>);</span><br><span class="line">    modelAndView.addObject(<span class="string">"username"</span>,<span class="string">"admin"</span>);</span><br><span class="line">    modelAndView.addObject(<span class="string">"userage"</span>,<span class="number">18</span>);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-2-è¿”å›String"><a href="#5-2-è¿”å›String" class="headerlink" title="5.2 è¿”å›String"></a>5.2 è¿”å›String</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼æ˜¯è§†å›¾çš„åç§°ï¼Œåœ¨modelä¸­å¯ä»¥è®¾ç½®æ•°æ®ï¼ˆå¸¸ç”¨ï¼‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> model</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> String</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/func2.action"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">func2</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"func2"</span>);</span><br><span class="line">    model.addAttribute(<span class="string">"username"</span>,<span class="string">"å¼ ä¸‰"</span>);</span><br><span class="line">     model.addAttribute(<span class="string">"userage"</span>,<span class="number">18</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"index02.jsp"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-3è¿”å›å¯¹è±¡"><a href="#5-3è¿”å›å¯¹è±¡" class="headerlink" title="5.3è¿”å›å¯¹è±¡"></a>5.3è¿”å›å¯¹è±¡</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/func3.action"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿”å›å¯¹è±¡ ä»¥jsonè¿”å›</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">func3</span><span class="params">(Model model, HttpServletRequest request)</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"func3"</span>);</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setName(<span class="string">"æå››"</span>);</span><br><span class="line">    user.setAge(<span class="number">18</span>);</span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨ï¼š</strong>é¡»å¯¼å…¥<strong>jackson-databind</strong>åŒ…</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="5-4è¿”å›void"><a href="#5-4è¿”å›void" class="headerlink" title="5.4è¿”å›void"></a>5.4è¿”å›void</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/func4.action"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">func4</span><span class="params">(Model model, HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"func4"</span>);</span><br><span class="line">    <span class="comment">//ä»è§†å›¾å‘é€æ•°æ®åˆ°æ§åˆ¶å°</span></span><br><span class="line">    System.out.println(request.getParameter(<span class="string">"id"</span>));</span><br><span class="line">    <span class="comment">//ä»æ§åˆ¶å°å†™æ•°æ®åˆ°è§†å›¾</span></span><br><span class="line">    response.getWriter().write(<span class="string">"hello"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>orange pi zero</title>
      <link href="/2020/01/24/orange-pi-zero/"/>
      <url>/2020/01/24/orange-pi-zero/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸€ã€å¯ä»¥ç”¨-Orange-Pi-Zero-åšä»€ä¹ˆï¼Ÿ"><a href="#ä¸€ã€å¯ä»¥ç”¨-Orange-Pi-Zero-åšä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸€ã€å¯ä»¥ç”¨ Orange Pi Zero åšä»€ä¹ˆï¼Ÿ"></a>ä¸€ã€å¯ä»¥ç”¨ Orange Pi Zero åšä»€ä¹ˆï¼Ÿ</h3><p>æˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ­å»ºï¼š</p><ul><li>ä¸€å°è®¡ç®—æœº</li><li>ä¸€ä¸ªæ— çº¿ç½‘ç»œæœåŠ¡å™¨</li><li>æ¸¸æˆæœº</li><li>éŸ³ä¹æ’­æ”¾å™¨</li><li>é«˜æ¸…è§†é¢‘æ’­æ”¾å™¨</li><li>æ‰¬å£°å™¨</li><li>Android</li><li>Scratch</li><li>æ›´å¤šçš„å„ç§åŠŸèƒ½ï¼Œå› ä¸º Orange Pi Zero æ˜¯å¼€æºçš„</li></ul><h3 id="äºŒã€Orange-Pi-Zero-æ˜¯ä¸ºè°è®¾è®¡çš„ï¼Ÿ"><a href="#äºŒã€Orange-Pi-Zero-æ˜¯ä¸ºè°è®¾è®¡çš„ï¼Ÿ" class="headerlink" title="äºŒã€Orange Pi Zero æ˜¯ä¸ºè°è®¾è®¡çš„ï¼Ÿ"></a>äºŒã€Orange Pi Zero æ˜¯ä¸ºè°è®¾è®¡çš„ï¼Ÿ</h3><p>Orange Pi Zero ä¸ä»…ä»…æ˜¯ä¸€æ¬¾æ¶ˆè´¹å“ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ç»™ä»»ä½•æƒ³ç”¨æŠ€æœ¯æ¥è¿›è¡Œåˆ›ä½œåˆ›æ–°çš„äººè®¾è®¡çš„ã€‚å®ƒæ˜¯ä¸€æ¬¾éå¸¸ç®€å•ã€æœ‰è¶£ã€å®ç”¨çš„å·¥å…·ï¼Œä½ å¯ä»¥ç”¨å®ƒå»æ‰“é€ ä½ èº«è¾¹çš„ä¸–ç•Œã€‚</p><a id="more"></a><h3 id="ä¸‰ã€åˆ†åŒºæ‰©å®¹"><a href="#ä¸‰ã€åˆ†åŒºæ‰©å®¹" class="headerlink" title="ä¸‰ã€åˆ†åŒºæ‰©å®¹"></a>ä¸‰ã€åˆ†åŒºæ‰©å®¹</h3><p>åœ¨ä½¿ç”¨win32DiskImagerå·¥å…·å¯¹*.imgé•œåƒè¿›è¡Œå†™å…¥ï¼Œå®ƒåªç»™rootfsåˆ†é…ä¸€ä¸ªgå¾—å­˜å‚¨ç©ºé—´ï¼Œä¸å¤Ÿä½¿ç”¨ï¼Œéœ€è¦å¯¹åˆ†åŒºè¿›è¡Œæ‰©å®¹ã€‚</p><p>linuxä¸‹ä½¿ç”¨<strong>Gparted</strong></p><p>å®‰è£…æŒ‡ä»¤ï¼šsudo apt-get install  gparted </p><p>windowsä¸‹ä½¿ç”¨<strong>DiskGenius</strong></p><p><strong>æ³¨æ„ï¼š</strong>DiskGeniuså¯¹åˆ†åŒºè¿›è¡Œæ‰©å®¹æœ‰æå¤§å¯èƒ½ä¼šé€ æˆæ•°æ®ä¸¢å¤±ï¼Œä»è€Œå¯¼è‡´ç³»ç»Ÿè·‘ä¸èµ·æ¥ã€‚å»ºè®®ä½¿ç”¨Gpartedå·¥å…·æ¥è¿›è¡Œæ‰©å®¹ã€‚</p><h3 id="å››ã€VNCè¿œç¨‹æŠ•å±"><a href="#å››ã€VNCè¿œç¨‹æŠ•å±" class="headerlink" title="å››ã€VNCè¿œç¨‹æŠ•å±"></a>å››ã€VNCè¿œç¨‹æŠ•å±</h3><h4 id="å®‰è£…xfce4æ¡Œé¢"><a href="#å®‰è£…xfce4æ¡Œé¢" class="headerlink" title="å®‰è£…xfce4æ¡Œé¢"></a>å®‰è£…xfce4æ¡Œé¢</h4><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-<span class="keyword">get</span> install xfce4</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…vncæœåŠ¡"><a href="#å®‰è£…vncæœåŠ¡" class="headerlink" title="å®‰è£…vncæœåŠ¡"></a>å®‰è£…vncæœåŠ¡</h4><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-<span class="keyword">get</span> install vnc4server</span><br></pre></td></tr></table></figure><h4 id="è®¾ç½®vncå¯†ç "><a href="#è®¾ç½®vncå¯†ç " class="headerlink" title="è®¾ç½®vncå¯†ç "></a>è®¾ç½®vncå¯†ç </h4><p>å®‰è£…å®Œæˆåå¯¹vnc4serverè®¾ç½®å¯†ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vnc4server</span><br></pre></td></tr></table></figure><h4 id="è¿œç¨‹ç™»å½•"><a href="#è¿œç¨‹ç™»å½•" class="headerlink" title="è¿œç¨‹ç™»å½•"></a>è¿œç¨‹ç™»å½•</h4><p>ä½¿ç”¨vnc viewerè¾“å…¥ipä¸ç«¯å£å·ï¼ˆé»˜è®¤ç«¯å£å·ä¸º5901ï¼‰</p><p>ç™»å½•æˆåŠŸååªæœ‰ä¸€ä¸ªç»ˆç«¯ï¼Œå¹¶æ— æ¡Œé¢ã€‚</p><p>ç„¶åä¿®æ”¹é…ç½®</p><p><strong>è¿›å…¥å½“å‰ç»ˆç«¯ç”¨æˆ·çš„.vncç›®å½•ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.vnc</span><br></pre></td></tr></table></figure><p><strong>å¤‡ä»½å¥½åŸæ¥çš„ xstartup:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp xstartup xstartup-bak</span><br></pre></td></tr></table></figure><p><strong>xstartupé…ç½®å‚æ•°å¦‚ä¸‹:</strong></p><p><img src="https://s2.ax1x.com/2020/01/24/1ZKNtK.png" alt="1ZKNtK.png"></p><h4 id="é‡å¯vnc-æœåŠ¡"><a href="#é‡å¯vnc-æœåŠ¡" class="headerlink" title="é‡å¯vnc æœåŠ¡:"></a>é‡å¯vnc æœåŠ¡:</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">vncserver</span> <span class="selector-tag">-kill</span> <span class="selector-pseudo">:1</span></span><br><span class="line"><span class="selector-tag">vncserver</span> <span class="selector-pseudo">:1</span></span><br></pre></td></tr></table></figure><h4 id="é‡æ–°è¿æ¥VNC"><a href="#é‡æ–°è¿æ¥VNC" class="headerlink" title="é‡æ–°è¿æ¥VNC:"></a>é‡æ–°è¿æ¥VNC:</h4><p>å‡ºç°ä¹±ç æƒ…å†µ</p><p><img src="https://s2.ax1x.com/2020/01/24/1ZKf1g.jpg" alt="1ZKf1g.jpg"></p><p><strong>çŠ¶å†µï¼š</strong>æ‰€ç”¨çš„<a href="https://www.centos.bz/tag/ubuntu/" target="_blank" rel="noopener">ubuntu</a>ç³»ç»Ÿä¸æ”¯æŒä¸­æ–‡ï¼Œé‡è§ä¸­æ–‡å°±????ã€‚ORZâ€¦</p><p><strong>ç›®æ ‡ï¼š</strong>ä½¿ç³»ç»Ÿ/æœåŠ¡å™¨æ”¯æŒä¸­æ–‡ï¼Œèƒ½å¤Ÿæ­£å¸¸æ˜¾ç¤ºã€‚</p><p>é¦–å…ˆï¼Œå®‰è£…ä¸­æ–‡æ”¯æŒåŒ…language-pack-zh-hansï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get install language-pack-zh-hans</span></span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œä¿®æ”¹/etc/environmentï¼ˆåœ¨æ–‡ä»¶çš„æœ«å°¾è¿½åŠ ï¼‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LANG=&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LANGUAGE=&quot;zh_CN:zh:en_US:en&quot;</span><br></pre></td></tr></table></figure><p>å†ä¿®æ”¹/var/lib/locales/supported.d/local(æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶å°±æ–°å»ºï¼ŒåŒæ ·åœ¨æœ«å°¾è¿½åŠ )ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">en_US.UTF-8 UTF-8</span><br><span class="line">zh_CN.UTF-8 UTF-8</span><br><span class="line">zh_CN.GBK GBK</span><br><span class="line">zh_CN GB2312</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo locale-gen</span></span><br></pre></td></tr></table></figure><p>å¯¹äºä¸­æ–‡ä¹±ç æ˜¯ç©ºæ ¼çš„æƒ…å†µï¼Œå®‰è£…ä¸­æ–‡å­—ä½“è§£å†³ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get install fonts-droid-fallback ttf-wqy-zenhei ttf-wqy-microhei fonts-arphic-ukai fonts-arphic-uming</span></span><br></pre></td></tr></table></figure><p><strong>æ„Ÿè§‰æ¡Œé¢ä½œç”¨ä¸å¤§ï¼ï¼ï¼</strong></p>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ </category>
          
          <category> Orange Pi Zero </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åµŒå…¥å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java mysqlæ•°æ®ç±»å‹å¯¹ç…§</title>
      <link href="/2020/01/16/java-mysql%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%AF%B9%E7%85%A7/"/>
      <url>/2020/01/16/java-mysql%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%AF%B9%E7%85%A7/</url>
      
        <content type="html"><![CDATA[<h1 id="java-mysqlæ•°æ®ç±»å‹å¯¹ç…§"><a href="#java-mysqlæ•°æ®ç±»å‹å¯¹ç…§" class="headerlink" title="java mysqlæ•°æ®ç±»å‹å¯¹ç…§"></a>java mysqlæ•°æ®ç±»å‹å¯¹ç…§</h1><table><thead><tr><th><strong>ç±»å‹åç§°</strong></th><th><strong>æ˜¾ç¤ºé•¿åº¦</strong></th><th><strong>æ•°æ®åº“ç±»å‹</strong></th><th><strong>JAVAç±»å‹</strong></th><th><strong>JDBCç±»å‹ç´¢å¼•(int)</strong></th><th><strong>æè¿°</strong></th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td><strong>VARCHAR</strong></td><td><strong>L+N</strong></td><td><strong>VARCHAR</strong></td><td><strong>java.lang.String</strong></td><td><strong>12</strong></td><td></td></tr><tr><td><strong>CHAR</strong></td><td><strong>N</strong></td><td><strong>CHAR</strong></td><td><strong>java.lang.String</strong></td><td><strong>1</strong></td><td></td></tr><tr><td><strong>BLOB</strong></td><td><strong>L+N</strong></td><td><strong>BLOB</strong></td><td><strong>java.lang.byte[]</strong></td><td><strong>-4</strong></td><td></td></tr><tr><td><strong>TEXT</strong></td><td><strong>65535</strong></td><td><strong>VARCHAR</strong></td><td><strong>java.lang.String</strong></td><td><strong>-1</strong></td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td><strong>INTEGER</strong></td><td><strong>4</strong></td><td><strong>INTEGER UNSIGNED</strong></td><td><strong>java.lang.Long</strong></td><td><strong>4</strong></td><td></td></tr><tr><td><strong>TINYINT</strong></td><td><strong>3</strong></td><td><strong>TINYINT UNSIGNED</strong></td><td><strong>java.lang.Integer</strong></td><td><strong>-6</strong></td><td></td></tr><tr><td><strong>SMALLINT</strong></td><td><strong>5</strong></td><td><strong>SMALLINT UNSIGNED</strong></td><td><strong>java.lang.Integer</strong></td><td><strong>5</strong></td><td></td></tr><tr><td><strong>MEDIUMINT</strong></td><td><strong>8</strong></td><td><strong>MEDIUMINT UNSIGNED</strong></td><td><strong>java.lang.Integer</strong></td><td><strong>4</strong></td><td></td></tr><tr><td><strong>BIT</strong></td><td><strong>1</strong></td><td><strong>BIT</strong></td><td><strong>java.lang.Boolean</strong></td><td><strong>-7</strong></td><td></td></tr><tr><td><strong>BIGINT</strong></td><td><strong>20</strong></td><td><strong>BIGINT UNSIGNED</strong></td><td><strong>java.math.BigInteger</strong></td><td><strong>-5</strong></td><td></td></tr><tr><td><strong>FLOAT</strong></td><td><strong>4+8</strong></td><td><strong>FLOAT</strong></td><td><strong>java.lang.Float</strong></td><td><strong>7</strong></td><td></td></tr><tr><td><strong>DOUBLE</strong></td><td><strong>22</strong></td><td><strong>DOUBLE</strong></td><td><strong>java.lang.Double</strong></td><td><strong>8</strong></td><td></td></tr><tr><td><strong>DECIMAL</strong></td><td><strong>11</strong></td><td><strong>DECIMAL</strong></td><td><strong>java.math.BigDecimal</strong></td><td><strong>3</strong></td><td></td></tr><tr><td><strong>BOOLEAN</strong></td><td><strong>1</strong></td><td><strong>åŒTINYINT</strong></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td><strong>ID</strong></td><td><strong>11</strong></td><td><strong>PK (INTEGER UNSIGNED)</strong></td><td><strong>java.lang.Long</strong></td><td><strong>4</strong></td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td><strong>DATE</strong></td><td><strong>10</strong></td><td><strong>DATE</strong></td><td><strong>java.sql.Date</strong></td><td><strong>91</strong></td><td></td></tr><tr><td><strong>TIME</strong></td><td><strong>8</strong></td><td><strong>TIME</strong></td><td><strong>java.sql.Time</strong></td><td><strong>92</strong></td><td></td></tr><tr><td><strong>DATETIME</strong></td><td><strong>19</strong></td><td><strong>DATETIME</strong></td><td><strong>java.sql.Timestamp</strong></td><td><strong>93</strong></td><td></td></tr><tr><td><strong>TIMESTAMP</strong></td><td><strong>19</strong></td><td><strong>TIMESTAMP</strong></td><td><strong>java.sql.Timestamp</strong></td><td><strong>93</strong></td><td></td></tr><tr><td><strong>YEAR</strong></td><td><strong>4</strong></td><td><strong>YEAR</strong></td><td><strong>java.sql.Date</strong></td><td><strong>91</strong></td><td></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mySqlä¸­çš„äº‹åŠ¡</title>
      <link href="/2020/01/15/mySql%E4%B8%AD%E7%9A%84%E4%BA%8B%E5%8A%A1/"/>
      <url>/2020/01/15/mySql%E4%B8%AD%E7%9A%84%E4%BA%8B%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€MySqlä¸­çš„äº‹åŠ¡"><a href="#ä¸€ã€MySqlä¸­çš„äº‹åŠ¡" class="headerlink" title="ä¸€ã€MySqlä¸­çš„äº‹åŠ¡"></a>ä¸€ã€MySqlä¸­çš„äº‹åŠ¡</h1><p>MySQL äº‹åŠ¡ä¸»è¦ç”¨äºå¤„ç†æ“ä½œé‡å¤§ï¼Œå¤æ‚åº¦é«˜çš„æ•°æ®ã€‚æ¯”å¦‚è¯´ï¼Œåœ¨äººå‘˜ç®¡ç†ç³»ç»Ÿä¸­ï¼Œä½ åˆ é™¤ä¸€ä¸ªäººå‘˜ï¼Œä½ æ—¢éœ€è¦åˆ é™¤äººå‘˜çš„åŸºæœ¬èµ„æ–™ï¼Œä¹Ÿè¦åˆ é™¤å’Œè¯¥äººå‘˜ç›¸å…³çš„ä¿¡æ¯ï¼Œå¦‚ä¿¡ç®±ï¼Œæ–‡ç« ç­‰ç­‰ï¼Œè¿™æ ·ï¼Œè¿™äº›æ•°æ®åº“æ“ä½œè¯­å¥å°±æ„æˆä¸€ä¸ªäº‹åŠ¡ï¼</p><ul><li>åœ¨ MySQL ä¸­åªæœ‰ä½¿ç”¨äº† Innodb æ•°æ®åº“å¼•æ“çš„æ•°æ®åº“æˆ–è¡¨æ‰æ”¯æŒäº‹åŠ¡ã€‚</li><li>äº‹åŠ¡å¤„ç†å¯ä»¥ç”¨æ¥ç»´æŠ¤æ•°æ®åº“çš„å®Œæ•´æ€§ï¼Œä¿è¯æˆæ‰¹çš„ SQL è¯­å¥è¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œã€‚</li><li>äº‹åŠ¡ç”¨æ¥ç®¡ç† insert,update,delete è¯­å¥</li></ul><a id="more"></a><h1 id="äºŒã€äº‹åŠ¡çš„å››å¤§ç‰¹æ€§ï¼ˆACIDï¼‰"><a href="#äºŒã€äº‹åŠ¡çš„å››å¤§ç‰¹æ€§ï¼ˆACIDï¼‰" class="headerlink" title="äºŒã€äº‹åŠ¡çš„å››å¤§ç‰¹æ€§ï¼ˆACIDï¼‰"></a>äºŒã€äº‹åŠ¡çš„å››å¤§ç‰¹æ€§ï¼ˆACIDï¼‰</h1><ul><li><p><strong>åŸå­æ€§ï¼ˆAtomicityï¼‰</strong></p><p>æ•´ä¸ªäº‹åŠ¡ä¸­çš„å•å…ƒè¦ä¹ˆå…¨éƒ¨æˆåŠŸ,è¦ä¹ˆå…¨éƒ¨å¤±è´¥ ã€‚</p><p>ä¸€ä¸ªäº‹åŠ¡ï¼ˆtransactionï¼‰ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸å®Œæˆï¼Œä¸ä¼šç»“æŸåœ¨ä¸­é—´æŸä¸ªç¯èŠ‚ã€‚äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œä¼šè¢«å›æ»šï¼ˆRollbackï¼‰åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼Œå°±åƒè¿™ä¸ªäº‹åŠ¡ä»æ¥æ²¡æœ‰æ‰§è¡Œè¿‡ä¸€æ ·ã€‚</p></li><li><p><strong>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰</strong></p><p>äº‹åŠ¡æ‰§è¡Œå‰åçš„ç»“æœå¿…é¡»ä¸€è‡´ ã€‚</p><p>åœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰å’Œäº‹åŠ¡ç»“æŸä»¥åï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§æ²¡æœ‰è¢«ç ´åã€‚è¿™è¡¨ç¤ºå†™å…¥çš„èµ„æ–™å¿…é¡»å®Œå…¨ç¬¦åˆæ‰€æœ‰çš„é¢„è®¾è§„åˆ™ï¼Œè¿™åŒ…å«èµ„æ–™çš„ç²¾ç¡®åº¦ã€ä¸²è”æ€§ä»¥åŠåç»­æ•°æ®åº“å¯ä»¥è‡ªå‘æ€§åœ°å®Œæˆé¢„å®šçš„å·¥ä½œã€‚</p></li><li><p><strong>éš”ç¦»æ€§(Isolation)</strong> </p><p>äº‹åŠ¡ä¹‹é—´åº”è¯¥ç›¸äº’ç‹¬ç«‹,äº’ç›¸ä¸å—å½±å“ ã€‚</p><p>æ•°æ®åº“å…è®¸å¤šä¸ªå¹¶å‘äº‹åŠ¡åŒæ—¶å¯¹å…¶æ•°æ®è¿›è¡Œè¯»å†™å’Œä¿®æ”¹çš„èƒ½åŠ›ï¼Œéš”ç¦»æ€§å¯ä»¥é˜²æ­¢å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ç”±äºäº¤å‰æ‰§è¡Œè€Œå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚äº‹åŠ¡éš”ç¦»åˆ†ä¸ºä¸åŒçº§åˆ«ï¼ŒåŒ…æ‹¬è¯»æœªæäº¤ï¼ˆRead uncommittedï¼‰ã€è¯»æäº¤ï¼ˆread committedï¼‰ã€å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰å’Œä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰</p></li><li><p><strong>æŒä¹…æ€§(Durability)</strong> </p><p>ä¸€æ—¦äº‹åŠ¡æäº¤,å°±ä¼šæŒä¹…åŒ–ä¿å­˜ ,äº‹åŠ¡å®Œæˆåï¼Œäº‹åŠ¡å¯¹æ•°æ®åº“çš„æ‰€æœ‰æ›´æ–°å°†è¢«ä¿å­˜åˆ°æ•°æ®åº“ï¼Œä¸èƒ½å›æ»šã€‚</p><p>äº‹åŠ¡å¤„ç†ç»“æŸåï¼Œå¯¹æ•°æ®çš„ä¿®æ”¹å°±æ˜¯æ°¸ä¹…çš„ï¼Œå³ä¾¿ç³»ç»Ÿæ•…éšœä¹Ÿä¸ä¼šä¸¢å¤±ã€‚</p></li></ul><p><strong>æ³¨æ„ï¼š</strong></p><p>â€‹    <em>åœ¨ MySQL å‘½ä»¤è¡Œçš„é»˜è®¤è®¾ç½®ä¸‹ï¼Œäº‹åŠ¡éƒ½æ˜¯è‡ªåŠ¨æäº¤çš„ï¼Œå³æ‰§è¡Œ SQL è¯­å¥åå°±ä¼šé©¬ä¸Šæ‰§è¡Œ COMMIT æ“ä½œã€‚å› æ­¤è¦æ˜¾å¼åœ°å¼€å¯ä¸€ä¸ªäº‹åŠ¡åŠ¡é¡»ä½¿ç”¨å‘½ä»¤ BEGIN æˆ– START TRANSACTIONï¼Œæˆ–è€…æ‰§è¡Œå‘½ä»¤ SET AUTOCOMMIT=0ï¼Œç”¨æ¥ç¦æ­¢ä½¿ç”¨å½“å‰ä¼šè¯çš„è‡ªåŠ¨æäº¤ã€‚</em></p><h1 id="ä¸‰ã€äº‹åŠ¡çš„ä¸¤å¤§åŠ¨ä½œ"><a href="#ä¸‰ã€äº‹åŠ¡çš„ä¸¤å¤§åŠ¨ä½œ" class="headerlink" title="ä¸‰ã€äº‹åŠ¡çš„ä¸¤å¤§åŠ¨ä½œ"></a>ä¸‰ã€äº‹åŠ¡çš„ä¸¤å¤§åŠ¨ä½œ</h1><ul><li><strong>æäº¤ï¼ˆcommitï¼‰</strong></li><li><strong>å›æ»šï¼ˆrollbackï¼‰</strong></li></ul><h1 id="å››ã€äº‹åŠ¡çš„å¹¶å‘é—®é¢˜"><a href="#å››ã€äº‹åŠ¡çš„å¹¶å‘é—®é¢˜" class="headerlink" title="å››ã€äº‹åŠ¡çš„å¹¶å‘é—®é¢˜"></a>å››ã€äº‹åŠ¡çš„å¹¶å‘é—®é¢˜</h1><ul><li><strong>è„è¯»</strong><ul><li>äº‹åŠ¡Aè¯»å–äº†äº‹åŠ¡Bæ›´æ–°çš„æ•°æ®ï¼Œç„¶åBå›æ»šæ“ä½œï¼Œé‚£ä¹ˆAè¯»å–åˆ°çš„æ•°æ®æ˜¯è„æ•°æ®</li></ul></li><li><strong>ä¸å¯é‡å¤è¯»</strong> <ul><li>äº‹åŠ¡ A å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®ï¼Œäº‹åŠ¡ B åœ¨äº‹åŠ¡Aå¤šæ¬¡è¯»å–çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹æ•°æ®ä½œäº†æ›´æ–°å¹¶æäº¤ï¼Œå¯¼è‡´äº‹åŠ¡Aå¤šæ¬¡è¯»å–åŒä¸€æ•°æ®æ—¶ï¼Œç»“æœ ä¸ä¸€è‡´ (<strong>ä¾§é‡ä¿®æ”¹æ“ä½œ</strong>)</li></ul></li><li><strong>å¹»è¯»</strong> <ul><li>ç³»ç»Ÿç®¡ç†å‘˜Aå°†æ•°æ®åº“ä¸­æ‰€æœ‰å­¦ç”Ÿçš„æˆç»©ä»å…·ä½“åˆ†æ•°æ”¹ä¸ºABCDEç­‰çº§ï¼Œä½†æ˜¯ç³»ç»Ÿç®¡ç†å‘˜Bå°±åœ¨è¿™ä¸ªæ—¶å€™æ’å…¥äº†ä¸€æ¡å…·ä½“åˆ†æ•°çš„è®°å½•ï¼Œå½“ç³»ç»Ÿç®¡ç†å‘˜Aæ”¹ç»“æŸåå‘ç°è¿˜æœ‰ä¸€æ¡è®°å½•æ²¡æœ‰æ”¹è¿‡æ¥ï¼Œå°±å¥½åƒå‘ç”Ÿäº†å¹»è§‰ä¸€æ ·ï¼Œè¿™å°±å«å¹»è¯» (<strong>ä¾§é‡æ–°å¢æˆ–åˆ é™¤</strong>)</li></ul></li></ul><h1 id="äº”ã€MySQLäº‹åŠ¡çš„éš”ç¦»çº§åˆ«"><a href="#äº”ã€MySQLäº‹åŠ¡çš„éš”ç¦»çº§åˆ«" class="headerlink" title="äº”ã€MySQLäº‹åŠ¡çš„éš”ç¦»çº§åˆ«"></a>äº”ã€MySQLäº‹åŠ¡çš„éš”ç¦»çº§åˆ«</h1><table><thead><tr><th>äº‹åŠ¡éš”ç¦»çº§åˆ«</th><th>è„è¯»</th><th>ä¸å¯é‡å¤è¯»</th><th>å¹»è¯»</th></tr></thead><tbody><tr><td>è¯»æœªæäº¤ï¼ˆread-uncommittedï¼‰</td><td>æ˜¯</td><td>æ˜¯</td><td>æ˜¯</td></tr><tr><td>è¯»å·²æäº¤ï¼ˆread-committedï¼‰</td><td>å¦</td><td>æ˜¯</td><td>æ˜¯</td></tr><tr><td>å¯é‡å¤è¯»ï¼ˆrepeatable-readï¼‰</td><td>å¦</td><td>å¦</td><td>æ˜¯</td></tr><tr><td>ä¸²è¡ŒåŒ–ï¼ˆserializableï¼‰</td><td>å¦</td><td>å¦</td><td>å¦</td></tr></tbody></table><h1 id="å…­ã€mysqlå’Œoracleé»˜è®¤çš„éš”ç¦»çº§åˆ«"><a href="#å…­ã€mysqlå’Œoracleé»˜è®¤çš„éš”ç¦»çº§åˆ«" class="headerlink" title="å…­ã€mysqlå’Œoracleé»˜è®¤çš„éš”ç¦»çº§åˆ«"></a>å…­ã€mysqlå’Œoracleé»˜è®¤çš„éš”ç¦»çº§åˆ«</h1><p>â€‹    mysqlé»˜è®¤çš„éš”ç¦»çº§åˆ«æ˜¯<strong>repeatable-read</strong> </p><p>â€‹    oracleé»˜è®¤çš„éš”ç¦»çº§åˆ«æ˜¯ <strong>read committed</strong></p><p>â€‹    <strong>æŸ¥è¯¢äº‹åŠ¡çš„éš”ç¦»çº§åˆ«: select @@tx_isolation</strong> </p><p>â€‹    <strong>è®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«: set session transaction  isolation level read committed</strong></p><h1 id="ä¸ƒã€éš”ç¦»çº§åˆ«çš„é€‰æ‹©"><a href="#ä¸ƒã€éš”ç¦»çº§åˆ«çš„é€‰æ‹©" class="headerlink" title="ä¸ƒã€éš”ç¦»çº§åˆ«çš„é€‰æ‹©"></a>ä¸ƒã€éš”ç¦»çº§åˆ«çš„é€‰æ‹©</h1><ul><li>ä¸¤ä¸ªæç«¯çš„æƒ…å†µä¸é€‰æ‹©<ul><li>read uncommittedå’Œserializableæ˜¯ä¸€èˆ¬ä¸ä¼šä½¿ç”¨</li><li>ä¸€èˆ¬æˆ‘ä»¬ä¼šä½¿ç”¨é»˜è®¤çš„éš”ç¦»çº§åˆ«</li></ul></li></ul><h1 id="å…«ã€äº‹åŠ¡æ§åˆ¶è¯­å¥"><a href="#å…«ã€äº‹åŠ¡æ§åˆ¶è¯­å¥" class="headerlink" title="å…«ã€äº‹åŠ¡æ§åˆ¶è¯­å¥"></a>å…«ã€äº‹åŠ¡æ§åˆ¶è¯­å¥</h1><ul><li>BEGIN æˆ– START TRANSACTION æ˜¾å¼åœ°å¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼›</li><li>COMMIT ä¹Ÿå¯ä»¥ä½¿ç”¨ COMMIT WORKï¼Œä¸è¿‡äºŒè€…æ˜¯ç­‰ä»·çš„ã€‚COMMIT ä¼šæäº¤äº‹åŠ¡ï¼Œå¹¶ä½¿å·²å¯¹æ•°æ®åº“è¿›è¡Œçš„æ‰€æœ‰ä¿®æ”¹æˆä¸ºæ°¸ä¹…æ€§çš„ï¼›</li><li>ROLLBACK ä¹Ÿå¯ä»¥ä½¿ç”¨ ROLLBACK WORKï¼Œä¸è¿‡äºŒè€…æ˜¯ç­‰ä»·çš„ã€‚å›æ»šä¼šç»“æŸç”¨æˆ·çš„äº‹åŠ¡ï¼Œå¹¶æ’¤é”€æ­£åœ¨è¿›è¡Œçš„æ‰€æœ‰æœªæäº¤çš„ä¿®æ”¹ï¼›</li><li>SAVEPOINT identifierï¼ŒSAVEPOINT å…è®¸åœ¨äº‹åŠ¡ä¸­åˆ›å»ºä¸€ä¸ªä¿å­˜ç‚¹ï¼Œä¸€ä¸ªäº‹åŠ¡ä¸­å¯ä»¥æœ‰å¤šä¸ª SAVEPOINTï¼›</li><li>RELEASE SAVEPOINT identifier åˆ é™¤ä¸€ä¸ªäº‹åŠ¡çš„ä¿å­˜ç‚¹ï¼Œå½“æ²¡æœ‰æŒ‡å®šçš„ä¿å­˜ç‚¹æ—¶ï¼Œæ‰§è¡Œè¯¥è¯­å¥ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼›</li><li>ROLLBACK TO identifier æŠŠäº‹åŠ¡å›æ»šåˆ°æ ‡è®°ç‚¹ï¼›</li><li>SET TRANSACTION ç”¨æ¥è®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€‚InnoDB å­˜å‚¨å¼•æ“æä¾›äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æœ‰READ UNCOMMITTEDã€READ COMMITTEDã€REPEATABLE READ å’Œ SERIALIZABLEã€‚</li></ul><h1 id="ä¹ã€MYSQL-äº‹åŠ¡å¤„ç†ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼š"><a href="#ä¹ã€MYSQL-äº‹åŠ¡å¤„ç†ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼š" class="headerlink" title="ä¹ã€MYSQL äº‹åŠ¡å¤„ç†ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼š"></a>ä¹ã€MYSQL äº‹åŠ¡å¤„ç†ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼š</h1><p>1ã€ç”¨ BEGIN, ROLLBACK, COMMITæ¥å®ç°</p><ul><li><strong>BEGIN</strong> å¼€å§‹ä¸€ä¸ªäº‹åŠ¡</li><li><strong>ROLLBACK</strong> äº‹åŠ¡å›æ»š</li><li><strong>COMMIT</strong> äº‹åŠ¡ç¡®è®¤</li></ul><p>2ã€ç›´æ¥ç”¨ SET æ¥æ”¹å˜ MySQL çš„è‡ªåŠ¨æäº¤æ¨¡å¼:</p><ul><li><strong>SET AUTOCOMMIT=0</strong> ç¦æ­¢è‡ªåŠ¨æäº¤</li><li><strong>SET AUTOCOMMIT=1</strong> å¼€å¯è‡ªåŠ¨æäº¤</li></ul><h1 id="åã€jdbcæ“ä½œäº‹åŠ¡"><a href="#åã€jdbcæ“ä½œäº‹åŠ¡" class="headerlink" title="åã€jdbcæ“ä½œäº‹åŠ¡"></a>åã€jdbcæ“ä½œäº‹åŠ¡</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Statement statement;</span><br><span class="line"><span class="keyword">private</span> Connection conn;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">/*è´¾è¿æ¬²æ‰§äº‹*/</span></span><br><span class="line">    <span class="comment">//åŠ è½½é©±åŠ¨</span></span><br><span class="line">    <span class="comment">//è·å–è¿æ¥</span></span><br><span class="line">    <span class="comment">//æ‰§è¡Œsqlè¯­å¥</span></span><br><span class="line">    <span class="comment">//æ“ä½œäº‹åŠ¡</span></span><br><span class="line">    <span class="comment">//å…³é—­èµ„æº</span></span><br><span class="line">    Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">    conn = DriverManager.getConnection(<span class="string">"jdbc:mysql://localhost:3306/db2"</span>, <span class="string">"root"</span>, <span class="string">"root"</span>);</span><br><span class="line">    statement = conn.createStatement();</span><br><span class="line">    ShiWuCaoZuo(<span class="number">500</span>, <span class="string">"xiaoming"</span>, <span class="string">"xiaohua"</span>);</span><br><span class="line">    statement.close();</span><br><span class="line">    conn.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ShiWuCaoZuo</span><span class="params">(Integer money, String from, String to)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    conn.setAutoCommit(<span class="keyword">false</span>);<span class="comment">//å¼€å¯äº‹åŠ¡</span></span><br><span class="line">    ResultSet resultSet = statement.executeQuery(<span class="string">"select balance from account WHERE name='"</span> + from + <span class="string">"'"</span>);</span><br><span class="line">    <span class="keyword">if</span> (resultSet.next()) &#123;</span><br><span class="line">        <span class="keyword">int</span> balance = resultSet.getInt(<span class="string">"balance"</span>);</span><br><span class="line">        <span class="keyword">if</span> (balance &gt;= money) &#123;</span><br><span class="line">            statement.execute(<span class="string">"update account set balance=balance-"</span> + money + <span class="string">" where name='"</span> + from + <span class="string">"'"</span>);</span><br><span class="line">            statement.execute(<span class="string">"update account set balance=balance+"</span> + money + <span class="string">" where name='"</span> + to + <span class="string">"'"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            conn.rollback();<span class="comment">//å›æ»š</span></span><br><span class="line">            System.out.println(<span class="string">"è½¬è´¦å¤±è´¥...."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    conn.commit();<span class="comment">//æäº¤äº‹åŠ¡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springæ¡†æ¶</title>
      <link href="/2020/01/13/Spring%E6%A1%86%E6%9E%B6/"/>
      <url>/2020/01/13/Spring%E6%A1%86%E6%9E%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€springç®€ä»‹"><a href="#ä¸€ã€springç®€ä»‹" class="headerlink" title="ä¸€ã€springç®€ä»‹"></a>ä¸€ã€springç®€ä»‹</h1><p>spring æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ï¼ŒåŸºäºIOCå’ŒAOPæ ¸å¿ƒæŠ€æœ¯çš„ä¼ä¸šçº§å¼€æºå¼€å‘æ¡†æ¶</p><p>åŠ¨æ€æ³¨å…¥ï¼Œè®©ä¸€ä¸ªå¯¹è±¡çš„åˆ›å»ºä¸ç”¨newäº†ï¼Œå¯ä»¥è‡ªåŠ¨çš„ç”Ÿäº§ï¼Œè¿™å…¶å®å°±æ˜¯åˆ©ç”¨javaé‡Œçš„åå°„ï¼Œåå°„å…¶å®å°±æ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€çš„å»åˆ›å»ºã€è°ƒç”¨å¯¹è±¡ï¼ŒSpringå°±æ˜¯åœ¨è¿è¡Œæ—¶ï¼Œæ ¹æ®xml Springçš„é…ç½®æ–‡ä»¶æ¥åŠ¨æ€çš„åˆ›å»ºå¯¹è±¡ï¼Œå’Œè°ƒç”¨å¯¹è±¡é‡Œçš„æ–¹æ³•çš„ã€‚ </p><a id="more"></a><p>Springè¿˜æœ‰ä¸€ä¸ªæ ¸å¿ƒå°±æ˜¯AOPè¿™ä¸ªå°±æ˜¯é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œå¯ä»¥ä¸ºæŸä¸€ç±»å¯¹è±¡ è¿›è¡Œç›‘ç£å’Œæ§åˆ¶ï¼ˆä¹Ÿå°±æ˜¯ åœ¨è°ƒç”¨è¿™ç±»å¯¹è±¡çš„å…·ä½“æ–¹æ³•çš„å‰åå»è°ƒç”¨ä½ æŒ‡å®šçš„ æ¨¡å—ï¼‰ä»è€Œè¾¾åˆ°å¯¹ä¸€ä¸ªæ¨¡å—æ‰©å……çš„åŠŸèƒ½ã€‚è¿™äº›éƒ½æ˜¯é€šè¿‡é…ç½®ç±»è¾¾åˆ°çš„ã€‚ </p><p><strong>Springç›®çš„</strong>ï¼šå°±æ˜¯è®©å¯¹è±¡ä¸å¯¹è±¡ï¼ˆæ¨¡å—ä¸æ¨¡å—ï¼‰ä¹‹é—´çš„å…³ç³»æ²¡æœ‰é€šè¿‡ä»£ç æ¥å…³è”ï¼Œéƒ½æ˜¯é€šè¿‡é…ç½®ç±»è¯´æ˜ ç®¡ç†çš„ï¼ˆSpringæ ¹æ®è¿™äº›é…ç½® å†…éƒ¨é€šè¿‡åå°„å»åŠ¨æ€çš„ç»„è£…å¯¹è±¡ï¼‰ </p><p><strong>æ³¨æ„ï¼š</strong>Springæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå‡¡æ˜¯åœ¨å®¹å™¨é‡Œçš„å¯¹è±¡æ‰ä¼šæœ‰Springæ‰€æä¾›çš„è¿™äº›æœåŠ¡å’ŒåŠŸèƒ½ã€‚</p><h1 id="äºŒã€springçš„ä¸»è¦ç‰¹å¾"><a href="#äºŒã€springçš„ä¸»è¦ç‰¹å¾" class="headerlink" title="äºŒã€springçš„ä¸»è¦ç‰¹å¾"></a>äºŒã€springçš„ä¸»è¦ç‰¹å¾</h1><p><strong>ï¼ˆ1ï¼‰è½»é‡çº§</strong>ï¼šspringæ˜¯ä¸€ä¸ªè½»é‡çº§çš„å¼€å‘æ¡†æ¶ï¼ŒåŸºæœ¬ç‰ˆæœ¬å¤§çº¦åªæœ‰2M</p><p><strong>ï¼ˆ2ï¼‰IOCï¼š</strong>æ§åˆ¶åè½¬ï¼Œåº”ç”¨ç¨‹åºä¸­å¯¹è±¡ä¹‹é—´çš„ä¾èµ–æ˜¯ç”±spring æ¥æ§åˆ¶çš„</p><p><strong>ï¼ˆ3ï¼‰AOPï¼š</strong>é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œspringæ”¯æŒé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œè¿™æ ·å¯ä»¥å°†ä¸šåŠ¡é€»è¾‘å’Œç³»ç»ŸæœåŠ¡åˆ†å¼€ï¼Œåˆ†ç¦»</p><p><strong>ï¼ˆ4ï¼‰å®¹å™¨ï¼š</strong>åŒ…å«å¹¶ç®¡ç†åº”ç”¨ç¨‹åºä¸­å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œé…ç½®ä¿¡æ¯</p><p><strong>ï¼ˆ5ï¼‰MVCæ€æƒ³ï¼š</strong>springä¹Ÿæ˜¯åŸºäºMVCæ€æƒ³çš„æ¡†æ¶ï¼Œä¹Ÿéµå¾ªæ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨è¿™ä¸‰ä¸ªå±‚æ¬¡</p><p><strong>ï¼ˆ6ï¼‰äº‹åŠ¡ï¼š</strong>springæä¾›ä¸€ä¸ªæŒç»­åŒ–çš„æ¥å£ï¼Œå¯ä»¥ä¸Šè‡³æ‰©å±•åˆ°æœ¬åœ°äº‹åŠ¡ä¸‹è‡³æ‰©å±•åˆ°å…¨å±€äº‹åŠ¡</p><p><strong>ï¼ˆ7ï¼‰å¼‚å¸¸å¤„ç†ï¼š</strong>Spring æä¾›æ–¹ä¾¿çš„APIæŠŠå…·ä½“æŠ€æœ¯ç›¸å…³çš„å¼‚å¸¸ï¼ˆæ¯”å¦‚ç”±JDBCï¼Œhibernate,or JDOæŠ›å‡ºçš„ï¼‰è½¬åŒ–ä¸ºä¸€è‡´çš„unchecked å¼‚å¸¸ã€‚</p><h1 id="ä¸‰ã€springä¼˜ç¼ºç‚¹"><a href="#ä¸‰ã€springä¼˜ç¼ºç‚¹" class="headerlink" title="ä¸‰ã€springä¼˜ç¼ºç‚¹"></a>ä¸‰ã€springä¼˜ç¼ºç‚¹</h1><p><strong>ä¼˜ç‚¹ï¼š</strong></p><p>Springèƒ½æœ‰æ•ˆåœ°ç»„ç»‡ä½ çš„ä¸­é—´å±‚å¯¹è±¡ï¼Œä¸ç®¡ä½ æ˜¯å¦é€‰æ‹©ä½¿ç”¨äº†EJBã€‚å¦‚æœä½ ä»…ä»…ä½¿ç”¨äº†Strutsæˆ–å…¶ä»–ä¸ºJ2EEçš„ APIç‰¹åˆ¶çš„frameworkï¼ŒSpringè‡´åŠ›äºè§£å†³å‰©ä¸‹çš„é—®é¢˜ã€‚<br>Springèƒ½æ¶ˆé™¤åœ¨è®¸å¤šå·¥ç¨‹ä¸­å¸¸è§çš„å¯¹Singletonçš„è¿‡å¤šä½¿ç”¨ã€‚æ ¹æ®æˆ‘çš„ç»éªŒï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œå®ƒé™ä½äº†ç³»ç»Ÿçš„å¯æµ‹è¯•æ€§å’Œé¢å‘å¯¹è±¡çš„ç¨‹åº¦ã€‚<br>é€šè¿‡ä¸€ç§åœ¨ä¸åŒåº”ç”¨ç¨‹åºå’Œé¡¹ç›®é—´ä¸€è‡´çš„æ–¹æ³•æ¥å¤„ç†é…ç½®æ–‡ä»¶ï¼ŒSpringèƒ½æ¶ˆé™¤å„ç§å„æ ·è‡ªå®šä¹‰æ ¼å¼çš„å±æ€§æ–‡ä»¶çš„éœ€è¦ã€‚æ›¾ç»å¯¹æŸä¸ªç±»è¦å¯»æ‰¾çš„æ˜¯å“ªä¸ªé­”æ³•èˆ¬çš„å±æ€§é¡¹æˆ–ç³»ç»Ÿå±<br>æ€§æ„Ÿåˆ°ä¸è§£ï¼Œä¸ºæ­¤ä¸å¾—ä¸å»è¯»Javadocç”šè‡³æºç¼–ç ï¼Ÿæœ‰äº†Springï¼Œä½ ä»…ä»…éœ€è¦çœ‹çœ‹ç±»çš„JavaBeanå±æ€§ã€‚Inversion of Controlçš„ä½¿ç”¨ï¼ˆåœ¨ä¸‹é¢è®¨è®ºï¼‰å¸®åŠ©å®Œæˆäº†è¿™ç§ç®€åŒ–ã€‚<br>é€šè¿‡æŠŠå¯¹æ¥å£ç¼–ç¨‹è€Œä¸æ˜¯å¯¹ç±»ç¼–ç¨‹çš„ä»£ä»·å‡ ä¹å‡å°‘åˆ°æ²¡æœ‰ï¼ŒSpringèƒ½å¤Ÿä¿ƒè¿›å…»æˆå¥½çš„ç¼–ç¨‹ä¹ æƒ¯ã€‚<br>Springè¢«è®¾è®¡ä¸ºè®©ä½¿ç”¨å®ƒåˆ›å»ºçš„åº”ç”¨å°½å¯èƒ½å°‘çš„ä¾èµ–äºä»–çš„APIsã€‚åœ¨Springåº”ç”¨ä¸­çš„å¤§å¤šæ•°ä¸šåŠ¡å¯¹è±¡æ²¡æœ‰ä¾èµ–äºSpringã€‚<br>ä½¿ç”¨Springæ„å»ºçš„åº”ç”¨ç¨‹åºæ˜“äºå•å…ƒæµ‹è¯•ã€‚<br>Springèƒ½ä½¿EJBçš„ä½¿ç”¨æˆä¸ºä¸€ä¸ªå®ç°é€‰æ‹©,è€Œä¸æ˜¯åº”ç”¨æ¶æ„çš„å¿…ç„¶é€‰æ‹©ã€‚ä½ èƒ½é€‰æ‹©ç”¨POJOsæˆ–local EJBsæ¥å®ç°ä¸šåŠ¡æ¥å£ï¼Œå´ä¸ä¼šå½±å“è°ƒç”¨ä»£ç ã€‚<br>Springå¸®åŠ©ä½ è§£å†³è®¸å¤šé—®é¢˜è€Œæ— éœ€ä½¿ç”¨EJBã€‚Springèƒ½æä¾›ä¸€ç§EJBçš„æ›¿æ¢ç‰©ï¼Œå®ƒä»¬é€‚ç”¨äºè®¸å¤šwebåº”ç”¨ã€‚ä¾‹å¦‚ï¼ŒSpringèƒ½ä½¿ç”¨AOPæä¾›å£°æ˜æ€§äº‹åŠ¡ç®¡ç†è€Œä¸é€šè¿‡EJBå®¹å™¨ï¼Œå¦‚æœä½ ä»…ä»…éœ€è¦ä¸å•ä¸ªæ•°æ®åº“æ‰“äº¤é“ï¼Œç”šè‡³ä¸éœ€è¦ä¸€ä¸ªJTAå®ç°ã€‚<br>Springä¸ºæ•°æ®å­˜å–æä¾›äº†ä¸€ä¸ªä¸€è‡´çš„æ¡†æ¶,ä¸è®ºæ˜¯ä½¿ç”¨çš„æ˜¯JDBCè¿˜æ˜¯O/R mappingäº§å“ï¼ˆå¦‚Hibernateï¼‰ã€‚<br><strong>ç¼ºç‚¹ï¼š</strong><br>1.jspä¸­è¦å†™å¾ˆå¤šä»£ç ã€æ§åˆ¶å™¨è¿‡äºçµæ´»ï¼Œç¼ºå°‘ä¸€ä¸ªå…¬ç”¨æ§åˆ¶å™¨</p><p>2.Springä¸æ”¯æŒåˆ†å¸ƒå¼ï¼Œè¿™ä¹Ÿæ˜¯EJBä»ç„¶åœ¨ç”¨çš„åŸå› ä¹‹ä¸€ã€‚</p><h1 id="å››ã€Springçš„ä¸¤å¤§å†…å®¹"><a href="#å››ã€Springçš„ä¸¤å¤§å†…å®¹" class="headerlink" title="å››ã€Springçš„ä¸¤å¤§å†…å®¹"></a>å››ã€Springçš„ä¸¤å¤§å†…å®¹</h1><p><strong>IOCï¼ˆæ§åˆ¶åè½¬ï¼‰å’ŒAOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰</strong></p><p><strong>IOCï¼š</strong>æŠŠå¯¹è±¡çš„åˆ›å»ºæƒäº¤ç»™Springã€‚</p><p><strong>AOPï¼š</strong>åº•å±‚ä½¿ç”¨åŠ¨æ€ä»£ç†,å¯¹ä»£ç è¿›è¡Œå¢å¼ºçš„ä¸€ç§æ–¹å¼ã€‚</p><h2 id="1ã€IOCå’ŒDIï¼ˆä¾èµ–æ³¨å…¥ï¼‰çš„å…³ç³»"><a href="#1ã€IOCå’ŒDIï¼ˆä¾èµ–æ³¨å…¥ï¼‰çš„å…³ç³»" class="headerlink" title="1ã€IOCå’ŒDIï¼ˆä¾èµ–æ³¨å…¥ï¼‰çš„å…³ç³»"></a>1ã€IOCå’ŒDIï¼ˆä¾èµ–æ³¨å…¥ï¼‰çš„å…³ç³»</h2><ul><li><p><strong>ä¾èµ–æ³¨å…¥çš„å‰æ:</strong></p><p>æœ‰IOCçš„ç¯å¢ƒ,ä¹Ÿå°±æ˜¯å°†å¿…é¡»å¯¹è±¡çš„åˆ›å»ºæƒäº¤ç»™äº†Spring.</p></li><li><p><strong>DI ä»‹ç»</strong> </p><p>Dependency Injection ä¾èµ–æ³¨å…¥.éœ€è¦æœ‰IOC çš„ç¯å¢ƒ,Spring åˆ›å»ºè¿™ä¸ªç±»çš„è¿‡ç¨‹ä¸­,Spring å°†ç±»çš„ä¾èµ–çš„å±æ€§è®¾ç½®è¿›å».</p></li><li><p><strong>IOCä¸DIçš„çš„åŒºåˆ«:</strong> </p><p>IOC:  æ§åˆ¶åè½¬,å°†ç±»çš„å¯¹è±¡çš„åˆ›å»ºäº¤ç»™Springç±»ç®¡ç†åˆ›å»º.<br>DI:    ä¾èµ–æ³¨å…¥,å°†ç±»é‡Œé¢çš„å±æ€§åœ¨åˆ›å»ºç±»çš„è¿‡ç¨‹ä¸­ç»™å±æ€§èµ‹å€¼.<br>DIå’ŒIOCçš„å…³ç³»: DIä¸èƒ½å•ç‹¬å­˜åœ¨,DIéœ€è¦åœ¨IOCçš„åŸºç¡€ä¸Šæ¥å®Œæˆ.</p><p>è¿™æ ·åšå¾—å¥½å¤„ï¼šåšåˆ°äº†å•ä¸€èŒè´£ï¼Œå¹¶ä¸”æé«˜äº†å¤ç”¨æ€§ï¼Œè§£è€¦äº†ä¹‹åï¼Œä»»ä½ å¦‚ä½•å®ç°ï¼Œä½¿ç”¨æ¥å£çš„å¼•ç”¨è°ƒç”¨çš„æ–¹æ³•ï¼Œæ°¸è¿œä¸éœ€è¦æ”¹å˜ã€‚</p></li><li><p><strong>ä¾èµ–æ³¨å…¥çš„å››ç§æ–¹å¼ï¼š</strong></p><ul><li><p><strong>setteræ³¨å…¥ï¼š</strong></p><p>åœ¨å®ä½“ç±»ä¸­ç”Ÿæˆgetã€setæ–¹æ³•å’Œæ— å‚æ„é€ æ–¹æ³•ï¼Œåœ¨ApplicationContext.xmlä¸­é…ç½®ã€‚</p></li><li><p><strong>æ„é€ å™¨æ³¨å…¥:</strong></p><p>åœ¨å®ä½“ç±»ä¸­ç”Ÿæˆæœ‰å‚æ„é€ æ–¹æ³•ï¼Œåœ¨ApplicationContext.xmlä¸­é…ç½®ã€‚</p><p>ApplicationContext.xmlä¸­é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--     IOC setteræ³¨å…¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"Stu"</span> <span class="attr">class</span>=<span class="string">"com.lcx.pojo.Student"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"æå››"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"18"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"address"</span> <span class="attr">value</span>=<span class="string">"é™•è¥¿è¥¿å®‰"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"Dog"</span> <span class="attr">class</span>=<span class="string">"com.lcx.pojo.Dog"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"å°é»„"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"3"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"color"</span> <span class="attr">value</span>=<span class="string">"yellow"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    æ„é€ å™¨æ³¨å…¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"User"</span> <span class="attr">class</span>=<span class="string">"com.lcx.pojo.User"</span> <span class="attr">scope</span>=<span class="string">"singleton"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"å°æ˜"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"18"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"address"</span> <span class="attr">value</span>=<span class="string">"xian"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"dog"</span> <span class="attr">ref</span>=<span class="string">"Dog"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>AcUtilsä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lcx.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"><span class="keyword">import</span> sun.plugin2.message.GetAppletMessage;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AcUtils</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> ApplicationContext applicationContext = <span class="keyword">null</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ApplicationContext <span class="title">GetApplicationContext</span><span class="params">(String path)</span></span>&#123;</span><br><span class="line">        applicationContext=<span class="keyword">new</span> ClassPathXmlApplicationContext(path);</span><br><span class="line">        <span class="keyword">return</span> applicationContext;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.lcx.pojo.Dog;</span><br><span class="line"><span class="keyword">import</span> com.lcx.pojo.Student;</span><br><span class="line"><span class="keyword">import</span> com.lcx.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.lcx.utils.AcUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DITest01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ApplicationContext applicationContext = AcUtils.GetApplicationContext(<span class="string">"ApplicationContext.xml"</span>);</span><br><span class="line">        Student stu = applicationContext.getBean(<span class="string">"Stu"</span>, Student.class);</span><br><span class="line">        Dog dog = applicationContext.getBean(<span class="string">"Dog"</span>, Dog.class);</span><br><span class="line">        User user = applicationContext.getBean(<span class="string">"User"</span>, User.class);</span><br><span class="line">        System.out.println(stu+<span class="string">" "</span> +dog+<span class="string">" "</span> +user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Student&#123;name=&apos;æå››&apos;, age=18, address=&apos;é™•è¥¿è¥¿å®‰&apos;&#125; Dog&#123;name=&apos;å°é»„&apos;, age=3, color=&apos;yellow&apos;&#125; User&#123;name=&apos;å°æ˜&apos;, age=18, address=&apos;xian&apos;, dog=Dog&#123;name=&apos;å°é»„&apos;, age=3, color=&apos;yellow&apos;&#125;&#125;</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong>å½“æ³¨å…¥çš„å±æ€§ä¸ºå¦ä¸€ä¸ªç±»å¯¹è±¡æ—¶ç”¨ refã€åœ¨å½±å°„è¿‡ç¨‹ä¸­å¦‚æœè¯¥ç±»çš„å¯¹è±¡æœ‰ç»§æ‰¿å…³ç³»æ—¶ç”¨parent=çˆ¶ç±»æ³¨è§£idå¯¹åº”çš„å­—ç¬¦ä¸²ã€‚</p></li><li><p>æ¥å£æ³¨å…¥ï¼ˆä¸å¸¸ç”¨ï¼‰ï¼š</p><p>é€šè¿‡æ¥å£çš„æ–¹å¼ç»™å®ä½“ç±»æ³¨å…¥ä¿¡æ¯ã€‚ä¾‹å­å¦‚ä¸‹ï¼š</p><p>change4.xmlé…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"changeToLowerCase"</span> <span class="attr">class</span>=<span class="string">"com.lcx.pojo.ChangetoLowerCase"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"str"</span> <span class="attr">value</span>=<span class="string">"ABCDEFG"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"changeToUoCase"</span> <span class="attr">class</span>=<span class="string">"com.lcx.pojo.ChangetoUpCase"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"str"</span> <span class="attr">value</span>=<span class="string">"higklmn"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ChangeWord.javaæ¥å£å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lcx.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ChangeCase</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">change</span><span class="params">(String s)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®šä¹‰ä¸¤ä¸ªå®ä½“ç±»ï¼Œåˆ†åˆ«å®ç°å¤§å†™è½¬å°å†™ï¼Œå°å†™è½¬å¤§å†™ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><p>ChangetoLower.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lcx.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChangetoLowerCase</span> <span class="keyword">implements</span> <span class="title">ChangeCase</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String str;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getStr</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStr</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.str = str;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">change</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        String result = s.toLowerCase();</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ChangetoUpCase.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lcx.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChangetoUpCase</span> <span class="keyword">implements</span> <span class="title">ChangeCase</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String str;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getStr</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStr</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.str = str;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">change</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        String result = s.toUpperCase();</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å¤§å†™è½¬å°å†™åçš„ç»“æœï¼šabcdefg</span><br><span class="line">å°å†™è½¬å¤§å†™åçš„ç»“æœï¼šHIGKLMN</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure></li><li><p><strong>æ³¨è§£æ³¨å…¥ï¼ˆæ¨èï¼‰ï¼š</strong></p><p>ApplicationContext01.xmlé…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                           http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">                           http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ³¨è§£æ³¨å…¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.lcx.pojo"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å®ä½“ç±»Itemsï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lcx.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br></pre></td></tr></table></figure></li></ul><p>@Component(â€œitemsâ€)<br>  public class Items {</p><pre><code>@Value(&quot;å¤§ç™½å…”&quot;)  private String name;  @Value(&quot;10&quot;)  private Double price;  @Value(&quot;ç³–&quot;)  private String dec;</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public String getName() &#123;</span><br><span class="line">      return name;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  public void setName(String name) &#123;</span><br><span class="line">      this.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  public Double getPrice() &#123;</span><br><span class="line">      return price;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  public void setPrice(Double price) &#123;</span><br><span class="line">      this.price = price;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  public String getDec() &#123;</span><br><span class="line">      return dec;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  public void setDec(String dec) &#123;</span><br><span class="line">      this.dec = dec;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>  }</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">å®ä½“ç±»Superï¼š</span><br><span class="line">  </span><br><span class="line">```java</span><br><span class="line">package com.lcx.pojo;</span><br><span class="line"></span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.beans.factory.annotation.Value;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">@Component(&quot;super&quot;)</span><br><span class="line">public class Super &#123;</span><br><span class="line">    @Value(&quot;å¤§è„šä¾¿åˆ©åº—&quot;)</span><br><span class="line">    private String name;</span><br><span class="line">    @Autowired</span><br><span class="line">    private Items items;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Items getItems() &#123;</span><br><span class="line">        return items;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><pre><code>æµ‹è¯•ç±»ä»£ç ï¼š</code></pre>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.lcx.pojo.Items;</span><br><span class="line"><span class="keyword">import</span> com.lcx.pojo.Super;</span><br><span class="line"><span class="keyword">import</span> com.lcx.utils.AcUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DITest02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ApplicationContext applicationContext = AcUtils.GetApplicationContext(<span class="string">"ApplicationContext01.xml"</span>);</span><br><span class="line">        Items items = applicationContext.getBean(<span class="string">"items"</span>, Items.class);</span><br><span class="line">        System.out.println(items.getName());</span><br><span class="line">        System.out.println(items.getDec());</span><br><span class="line">        System.out.println(items.getPrice());</span><br><span class="line">        Super aSuper = applicationContext.getBean(<span class="string">"super"</span>, Super.class);</span><br><span class="line">        System.out.println(aSuper.getName()+<span class="string">" "</span>+ aSuper.getItems());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><pre><code>ç»“æœï¼š</code></pre>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å¤§ç™½å…”</span><br><span class="line">ç³–</span><br><span class="line">10.0</span><br><span class="line">å¤§è„šä¾¿åˆ©åº— Items&#123;name=&apos;å¤§ç™½å…”&apos;, price=10.0, dec=&apos;ç³–&apos;&#125;</span><br></pre></td></tr></table></figure><pre><code>**æ³¨æ„ï¼š**å¦‚æœæ³¨å…¥çš„å±æ€§ä¸ºå¯¹è±¡ï¼Œä½¿ç”¨@Autowiredè‡ªåŠ¨æ³¨å…¥ã€‚</code></pre><h2 id="2ã€AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰"><a href="#2ã€AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰" class="headerlink" title="2ã€AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰"></a>2ã€AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰</h2><h4 id="Springä¸­çš„AOPçš„ç®€ä»‹"><a href="#Springä¸­çš„AOPçš„ç®€ä»‹" class="headerlink" title="Springä¸­çš„AOPçš„ç®€ä»‹"></a><strong>Springä¸­çš„AOPçš„ç®€ä»‹</strong></h4><ul><li><strong>AOP Aspect Oriented Programing é¢å‘åˆ‡é¢ç¼–ç¨‹</strong></li><li><strong>AOPé‡‡å–==æ¨ªå‘æŠ½å–==æœºåˆ¶ï¼Œå–ä»£äº†ä¼ ç»Ÿ==çºµå‘ç»§æ‰¿==ä½“ç³»é‡å¤æ€§ä»£ç ï¼ˆæ€§èƒ½ç›‘è§†ã€äº‹åŠ¡ç®¡ç†ã€å®‰å…¨æ£€æŸ¥ã€ç¼“å­˜ï¼‰</strong></li><li><strong>Springä¸­çš„Aopæ˜¯çº¯Javaæ¥å®ç°çš„,ä½¿ç”¨==åŠ¨æ€ä»£ç†==çš„æ–¹å¼å¢å¼ºä»£ç </strong></li><li><strong>AOPä¸æ˜¯ç”±Springæå‡ºæ¥çš„,æ˜¯ç”±AOPè”ç›Ÿå®šä¹‰çš„</strong></li></ul><h4 id="Springä¸­çš„åŠ¨æ€ä»£ç†"><a href="#Springä¸­çš„åŠ¨æ€ä»£ç†" class="headerlink" title="Springä¸­çš„åŠ¨æ€ä»£ç†"></a>Springä¸­çš„åŠ¨æ€ä»£ç†</h4><ul><li><strong>jdkè‡ªå¸¦çš„åŠ¨æ€ä»£ç†</strong><ul><li>å¦‚æœå§”æ‰˜ç±»å’Œä»£ç†ç±»å®ç°äº†åŒä¸€ä¸ªæ¥å£åˆ™åº•å±‚é€‰æ‹©jdkçš„åŠ¨æ€ä»£ç†</li></ul></li><li><strong>cglibåŠ¨æ€ä»£ç†</strong><ul><li>å§”æ‰˜ç±»å’Œä»£ç†ç±»æ²¡æœ‰å®ç°åŒä¸€ä¸ªæ¥å£,åˆ™åº•å±‚é€‰æ‹©cglibçš„åŠ¨æ€ä»£ç†,cglibçš„åŠ¨æ€ä»£ç†åº•å±‚ä½¿ç”¨çš„æ˜¯ç»§æ‰¿</li></ul></li></ul><h4 id="Springä¸­çš„AOPçš„ä¸“ä¸šæœ¯è¯­"><a href="#Springä¸­çš„AOPçš„ä¸“ä¸šæœ¯è¯­" class="headerlink" title="Springä¸­çš„AOPçš„ä¸“ä¸šæœ¯è¯­"></a>Springä¸­çš„AOPçš„ä¸“ä¸šæœ¯è¯­</h4><ul><li><strong>Joinpoint(è¿æ¥ç‚¹)</strong> :å§”æ‰˜ç±»ä¸­å¯ä»¥è¢«å¢å¼ºçš„æ–¹æ³• </li><li>==<strong>Pointcut(åˆ‡å…¥ç‚¹)</strong> :åˆ‡ç‚¹ ,è¦è¢«å¢å¼ºçš„æ–¹æ³•== </li><li>==<strong>Advice(é€šçŸ¥/å¢å¼º)</strong> :å¢å¼ºçš„ä»£ç == </li><li><strong>Target(ç›®æ ‡å¯¹è±¡)</strong> :å§”æ‰˜å¯¹è±¡ </li><li><strong>Weaving(ç»‡å…¥) :æŠŠå¢å¼º</strong>åº”ç”¨<strong>åˆ‡ç‚¹</strong>çš„è¿‡ç¨‹ </li><li><strong>Proxyï¼ˆä»£ç†ï¼‰</strong>: ä¸€ä¸ªç±»è¢«AOPç»‡å…¥å¢å¼ºåï¼Œå°±äº§ç”Ÿä¸€ä¸ªç»“æœä»£ç†ç±» </li><li>==<strong>Aspect(åˆ‡é¢):</strong> æ˜¯<strong>åˆ‡ç‚¹</strong>å’Œ<strong>é€šçŸ¥</strong>çš„ç»“åˆ== </li></ul><h4 id="Springä¸­çš„AOPçš„å®ç°"><a href="#Springä¸­çš„AOPçš„å®ç°" class="headerlink" title="Springä¸­çš„AOPçš„å®ç°"></a>Springä¸­çš„AOPçš„å®ç°</h4><h5 id="ä¼ ç»Ÿçš„SpringAOP"><a href="#ä¼ ç»Ÿçš„SpringAOP" class="headerlink" title="ä¼ ç»Ÿçš„SpringAOP"></a>ä¼ ç»Ÿçš„SpringAOP</h5><p>â€‹    <strong>ä¸€ä¸ªåˆ‡ç‚¹åªèƒ½å¯¹åº”ä¸€ä¸ªé€šçŸ¥</strong></p><h5 id="åŸºäºAspectJçš„AOP"><a href="#åŸºäºAspectJçš„AOP" class="headerlink" title="åŸºäºAspectJçš„AOP"></a>åŸºäºAspectJçš„AOP</h5><ul><li>AspectJæ˜¯ä¸€ä¸ªåŸºäºJavaè¯­è¨€çš„é¢å‘åˆ‡é¢çš„AOPæ¡†æ¶</li><li>Spring2.0ä»¥åæ–°å¢äº†å¯¹AspectJ<strong>åˆ‡ç‚¹è¡¨è¾¾å¼</strong>æ”¯æŒ</li><li>@AspectJ æ˜¯AspectJ1.5æ–°å¢åŠŸèƒ½ï¼Œé€šè¿‡JDK5æ³¨è§£æŠ€æœ¯ï¼Œå…è®¸ç›´æ¥åœ¨Beanç±»ä¸­å®šä¹‰åˆ‡é¢</li><li>æ–°ç‰ˆæœ¬Springæ¡†æ¶ï¼Œå»ºè®®ä½¿ç”¨AspectJæ–¹å¼æ¥å¼€å‘AOP</li></ul><h5 id="Aspectjçš„åˆ‡ç‚¹è¡¨è¾¾å¼"><a href="#Aspectjçš„åˆ‡ç‚¹è¡¨è¾¾å¼" class="headerlink" title="Aspectjçš„åˆ‡ç‚¹è¡¨è¾¾å¼"></a>Aspectjçš„åˆ‡ç‚¹è¡¨è¾¾å¼</h5><ul><li>è¯­æ³•:execution(è¡¨è¾¾å¼)</li><li>execution(&lt;è®¿é—®ä¿®é¥°ç¬¦&gt;?&lt;è¿”å›ç±»å‹&gt;&lt;æ–¹æ³•å&gt;(&lt;å‚æ•°&gt;)&lt;å¼‚å¸¸&gt;)</li><li>public * *(..) â€”æ£€ç´¢æ‰€æœ‰çš„publicæ–¹æ³•</li><li>execution(â€œ* cn.it.spring4.demo1.dao.*(..)â€) â€”åªæ£€ç´¢å½“å‰åŒ…</li><li>execution(â€œ* cn.it.spring4.demo1.dao..*(..)â€) â€”æ£€ç´¢åŒ…åŠå½“å‰åŒ…çš„å­åŒ….</li></ul><h5 id="Aspectçš„å¢å¼ºç±»å‹"><a href="#Aspectçš„å¢å¼ºç±»å‹" class="headerlink" title="Aspectçš„å¢å¼ºç±»å‹"></a>Aspectçš„å¢å¼ºç±»å‹</h5><ul><li>@Before å‰ç½®é€šçŸ¥ </li><li>@AfterReturning åç½®é€šçŸ¥ </li><li>@Around ç¯ç»•é€šçŸ¥ </li><li>@AfterThrowingæŠ›å‡ºé€šçŸ¥ </li><li>@After æœ€ç»ˆfinalé€šçŸ¥ </li></ul><h4 id="aopç¼–ç¨‹å®ç°"><a href="#aopç¼–ç¨‹å®ç°" class="headerlink" title="aopç¼–ç¨‹å®ç°"></a>aopç¼–ç¨‹å®ç°</h4><ul><li><p><strong>å¼•å…¥pomä¾èµ–</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>é…ç½®è‡ªåŠ¨ä»£ç†å’Œæ³¨è§£æ‰«æå™¨</strong></p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                           http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">                           http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                           http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">                           http://www.springframework.org/schema/aop/spring-aop-4.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®æ³¨è§£æ‰«æå™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.it.bigdata"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--å¼€å¯aopè‡ªåŠ¨ä»£ç†--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:aspectj-autoproxy</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p><strong>ç¼–å†™ï¼ˆdaoï¼‰å§”æ‰˜ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lcx.bigdata;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">addUser</span><span class="params">(User user)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ·»åŠ æ–°ç”¨æˆ·..."</span>+user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"admin"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteUser</span><span class="params">(Integer id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"åˆ é™¤ç”¨æˆ·..."</span>+id);</span><br><span class="line">        <span class="comment">//int a =10/0;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findUser</span><span class="params">(Integer  id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æŸ¥è¯¢ç”¨æˆ·"</span>+ id);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateUser</span><span class="params">(Integer id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ä¿®æ”¹ç”¨æˆ·..."</span>+id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™åˆ‡é¢</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lcx.bigdata;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ‡é¢ = åˆ‡ç‚¹(åˆ‡ç‚¹è¡¨è¾¾å¼) + é€šçŸ¥(è¦å¢å¼ºçš„ä»£ç ,æ–¹æ³•)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAspect</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€šçŸ¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">//å‰ç½®é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@Before</span>(<span class="string">"execution(* com.lcx.bigdata.UserDao.delete*(..))"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">advice1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å‰ç½®é€šçŸ¥ã€‚"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//åç½®é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@After</span>(<span class="string">"execution(* com.lcx.bigdata.UserDao.add*(..))"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">advice2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"åç½®é€šçŸ¥"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åç½®é€šçŸ¥å¸¦è¿”å›å€¼</span></span><br><span class="line">    <span class="meta">@AfterReturning</span>(value = <span class="string">"execution( * com.lcx.bigdata.UserDao.add*(..))"</span>, returning = <span class="string">"ret"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">advice2</span><span class="params">(String ret)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"åç½®é€šçŸ¥"</span> + ret);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¯ç»•é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@Around</span>(<span class="string">"execution(* com.lcx.bigdata.UserDao.updateUser(..)))"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">advice3</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ç¯ç»•é€šçŸ¥å‰"</span>);</span><br><span class="line">        pjp.proceed();</span><br><span class="line">        System.out.println(<span class="string">"ç¯ç»•é€šçŸ¥å"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//æŠ›å‡ºå¼‚å¸¸é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@AfterThrowing</span>(<span class="string">"execution( * com.lcx.bigdata.UserDao.delete*(..))"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">advice4</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å¼‚å¸¸é€šçŸ¥"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>æµ‹è¯•ç±»ä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lcx.bigdata;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith</span>(SpringRunner.class)</span><br><span class="line"><span class="meta">@ContextConfiguration</span>(<span class="string">"classpath:ApplicationContext.xml"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringTest01</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testBefore</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        userDao.deleteUser(<span class="number">12</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAfter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        userDao.addUser(<span class="keyword">new</span> User(<span class="string">"å¼ ä¸‰"</span>, <span class="number">18</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testThrow</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        userDao.deleteUser(<span class="number">12</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAround</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        userDao.updateUser(<span class="number">12</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>ä¸€äº›æ³¨è§£çš„å«ä¹‰ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- @Aspect ä½œç”¨æ˜¯æŠŠå½“å‰ç±»æ ‡è¯†ä¸ºä¸€ä¸ªåˆ‡é¢ä¾›å®¹å™¨è¯»å–</span><br><span class="line">- @Before å‰ç½®é€šçŸ¥ </span><br><span class="line">- @AfterReturning åç½®é€šçŸ¥ </span><br><span class="line">- @Around ç¯ç»•é€šçŸ¥ </span><br><span class="line">- @AfterThrowingæŠ›å‡ºé€šçŸ¥ </span><br><span class="line">- @After æœ€ç»ˆfinalé€šçŸ¥</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- @Repository å­˜å‚¨å±‚(Dao)Bean</span><br><span class="line">- @Service ä¸šåŠ¡å±‚Bean</span><br><span class="line">- @Controller å±•ç¤ºå±‚Bean</span><br><span class="line">- @Component æ˜¯ä¸€ä¸ªæ³›åŒ–çš„æ¦‚å¿µï¼Œä»…ä»…è¡¨ç¤ºä¸€ä¸ªç»„ä»¶ (Bean) ï¼Œå¯ä»¥ä½œç”¨åœ¨ä»»ä½•å±‚æ¬¡ã€‚</span><br><span class="line">- @Service é€šå¸¸ä½œç”¨åœ¨ä¸šåŠ¡å±‚ï¼Œä½†æ˜¯ç›®å‰è¯¥åŠŸèƒ½ä¸ @Component ç›¸åŒã€‚</span><br><span class="line">- @Constroller é€šå¸¸ä½œç”¨åœ¨æ§åˆ¶å±‚ï¼Œä½†æ˜¯ç›®å‰è¯¥åŠŸèƒ½ä¸ @Component ç›¸åŒã€‚</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- @RunWith å°±æ˜¯ä¸€ä¸ªè¿è¡Œå™¨</span><br><span class="line">- @RunWith(JUnit4.class) å°±æ˜¯æŒ‡ç”¨JUnit4æ¥è¿è¡Œ</span><br><span class="line"></span><br><span class="line">- @RunWith(SpringJUnit4ClassRunner.class),è®©æµ‹è¯•è¿è¡ŒäºSpringæµ‹è¯•ç¯å¢ƒ</span><br><span class="line"></span><br><span class="line">- @RunWith(Suite.class) çš„è¯å°±æ˜¯ä¸€å¥—æµ‹è¯•é›†åˆï¼Œ</span><br><span class="line"></span><br><span class="line">- @ContextConfiguration Springæ•´åˆJUnit4æµ‹è¯•æ—¶ï¼Œä½¿ç”¨æ³¨è§£å¼•å…¥å¤šä¸ªé…ç½®æ–‡ä»¶</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Autowired æ³¨é‡Šï¼Œå®ƒå¯ä»¥å¯¹ç±»æˆå‘˜å˜é‡ã€æ–¹æ³•åŠæ„é€ å‡½æ•°è¿›è¡Œæ ‡æ³¨ï¼Œå®Œæˆè‡ªåŠ¨è£…é…çš„å·¥ä½œã€‚</span><br><span class="line">@Autowiredçš„åŸç†:å…¶å®åœ¨å¯åŠ¨spring IoCæ—¶ï¼Œå®¹å™¨è‡ªåŠ¨è£…è½½äº†ä¸€ä¸ªAutowiredAnnotationBeanPostProcessoråç½®å¤„ç†å™¨ï¼Œå½“å®¹å™¨æ‰«æåˆ°@Autowiedã€@Resourceæˆ–@Injectæ—¶ï¼Œå°±ä¼šåœ¨IoCå®¹å™¨è‡ªåŠ¨æŸ¥æ‰¾éœ€è¦çš„beanï¼Œå¹¶è£…é…ç»™è¯¥å¯¹è±¡çš„å±æ€§.</span><br><span class="line">æ³¨æ„äº‹é¡¹ï¼š</span><br><span class="line">ã€€ã€€åœ¨ä½¿ç”¨@Autowiredæ—¶ï¼Œé¦–å…ˆåœ¨å®¹å™¨ä¸­æŸ¥è¯¢å¯¹åº”ç±»å‹çš„beanã€‚</span><br><span class="line">ã€€ã€€ã€€ã€€å¦‚æœæŸ¥è¯¢ç»“æœåˆšå¥½ä¸ºä¸€ä¸ªï¼Œå°±å°†è¯¥beanè£…é…ç»™@AutowiredæŒ‡å®šçš„æ•°æ®ã€‚</span><br><span class="line">ã€€ã€€ã€€ã€€å¦‚æœæŸ¥è¯¢çš„ç»“æœä¸æ­¢ä¸€ä¸ªï¼Œé‚£ä¹ˆ@Autowiredä¼šæ ¹æ®åç§°æ¥æŸ¥æ‰¾ã€‚</span><br><span class="line">ã€€ã€€ã€€ã€€å¦‚æœæŸ¥è¯¢çš„ç»“æœä¸ºç©ºï¼Œé‚£ä¹ˆä¼šæŠ›å‡ºå¼‚å¸¸ã€‚è§£å†³æ–¹æ³•æ—¶ï¼Œä½¿ç”¨required=falseã€‚</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaæ¡†æ¶å­¦ä¹ &lt;ä¸€&gt;</title>
      <link href="/2020/01/11/Java%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0-%E4%B8%80/"/>
      <url>/2020/01/11/Java%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0-%E4%B8%80/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€JavaSE"><a href="#ä¸€ã€JavaSE" class="headerlink" title="ä¸€ã€JavaSE"></a>ä¸€ã€JavaSE</h1><h2 id="é—å¿˜çŸ¥è¯†å›é¡¾"><a href="#é—å¿˜çŸ¥è¯†å›é¡¾" class="headerlink" title="é—å¿˜çŸ¥è¯†å›é¡¾"></a>é—å¿˜çŸ¥è¯†å›é¡¾</h2><ul><li><p><strong>javaåŸºæœ¬æ•°æ®ç±»å‹ï¼šbyteã€charã€shortã€intã€longã€floatã€doubleã€boolean</strong></p></li><li><p><strong>å¯¹åº”åŒ…è£…ç±»ï¼šByteã€Characterã€Shortã€Integerã€Longã€Floatã€Doubleã€Boolean</strong></p></li><li><p><strong>è®¿é—®ä¿®é¥°ç¬¦èŒƒå›´ä»å¤§åˆ°å°ï¼špublicã€protectedã€defaultã€privateã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</strong></p><p><img src="https://s2.ax1x.com/2020/01/11/l5ijzt.png" alt="l5ijzt.png"></p></li><li><p><strong>æ ‡è¯†æ¥å£</strong></p><p>æ ‡è¯†æ¥å£æ˜¯æ²¡æœ‰ä»»ä½•æ–¹æ³•å’Œå±æ€§çš„æ¥å£ã€‚æ ‡è¯†æ¥å£ä¸å¯¹å®ç°å®ƒçš„ç±»æœ‰ä»»ä½•è¯­ä¹‰ä¸Šçš„è¦æ±‚ï¼Œå®ƒä»…ä»…è¡¨æ˜å®ç°å®ƒçš„ç±»å±äºä¸€ä¸ªç‰¹å®šçš„ç±»å‹ã€‚</p><p>ã€€æ ‡æ¥å£åœ¨Javaè¯­è¨€ä¸­æœ‰ä¸€äº›å¾ˆè‘—åçš„åº”ç”¨ï¼Œä¾‹å¦‚æˆ‘ä»¬å¸¸ç”¨çš„ArrayListç±»ï¼Œå®ƒçš„ç±»å®ç°æ¥å£å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayList</span>&lt;<span class="title">E</span>&gt; <span class="keyword">extends</span> <span class="title">AbstractList</span>&lt;<span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">        implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»”ç»†çœ‹ RandomAccessã€RandomAccessã€Serializableçš„æ¥å£å¯ä»¥çœ‹åˆ°ï¼Œå†…éƒ¨éƒ½æ˜¯ä¸€äº›ç©ºæ¥å£ï¼Œæ²¡æœ‰å®šä¹‰æ¥å£æ–¹æ³•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public interface RandomAccess &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public interface Cloneable &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public interface Serializable &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> æ ‡è¯†æ¥å£ï¼Œ<strong>å½“ä¸€ä¸ªç±»å®ç°äº†ä¸€ä¸ªæ ‡è¯†æ¥å£ä¹‹åå°±åƒæ˜¯ç»™è‡ªå·±æ‰“äº†ä¸ªæ ‡ç­¾ã€‚</strong></p><p>ã€€ã€€æ‰“ä¸ªæ¯”å–»ï¼Œä¸æ˜¯å¾ˆæ°å½“ã€‚å°±åƒæ˜¯ä¸€ä¸ªäººç©¿äº†ä»¶åç‰Œè¡£æœï¼ˆå®ç°äº†æ ‡è¯†æ¥å£ï¼‰ï¼Œåˆ«äººä¸€çœ‹ä»–ç©¿çš„è¡£æœï¼ˆæ ‡è¯†æ¥å£ï¼‰å°±çŸ¥é“ä»–çš„å“å‘³ã€èº«ä»½ï¼ˆç‰¹æ€§ï¼‰ã€‚</p></li><li><p><strong>javaåå°„æœºåˆ¶</strong></p><p>JAVAåå°„æœºåˆ¶æ˜¯åœ¨è¿è¡ŒçŠ¶æ€ä¸­ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„æ–¹æ³•å’Œå±æ€§ï¼›è¿™ç§åŠ¨æ€è·å–ä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡æ–¹æ³•çš„åŠŸèƒ½ç§°ä¸ºjavaè¯­è¨€çš„åå°„æœºåˆ¶ã€‚</p></li><li><p><strong>æ³¨è§£</strong></p></li></ul><a id="more"></a><h1 id="äºŒã€Javaä¸»æµæ¡†æ¶"><a href="#äºŒã€Javaä¸»æµæ¡†æ¶" class="headerlink" title="äºŒã€Javaä¸»æµæ¡†æ¶"></a>äºŒã€Javaä¸»æµæ¡†æ¶</h1><h2 id="æ¡†æ¶çš„ä½œç”¨ï¼š"><a href="#æ¡†æ¶çš„ä½œç”¨ï¼š" class="headerlink" title="æ¡†æ¶çš„ä½œç”¨ï¼š"></a>æ¡†æ¶çš„ä½œç”¨ï¼š</h2><p>å¯¹åŸç”Ÿæ€çš„javaä»£ç è¿›è¡Œå°è£…ï¼Œç®€åŒ–ç¨‹åºå‘˜æ“ä½œã€‚</p><ul><li><p><strong>æ¡†æ¶æ˜¯ä»€ä¹ˆï¼š</strong></p><p>æ¡†æ¶å°±æ˜¯ä¸€å¥—è§„èŒƒã€‚æ—¢ç„¶æ˜¯è§„èŒƒï¼Œä½ ä½¿ç”¨è¿™ä¸ªæ¡†æ¶å°±è¦éµå®ˆè¿™ä¸ªæ¡†æ¶æ‰€è§„å®šçš„çº¦æŸã€‚åœ¨Javaå¼€å‘ä¸­ï¼Œæ¡†æ¶æ˜¯ç”¨ä¸€å¥—è§„åˆ™+ä¸€ç¾¤jaråŒ…æ¥è¡¨ç¤ºçš„ã€‚</p></li><li><p><strong>æ„ä¹‰ï¼š</strong></p><p>æ¡†æ¶ä¸ä»…ä»…åªå®Œæˆè¿™äº›ç®€å•çš„çº¦æŸï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œæ¡†æ¶ä¸ºæˆ‘ä»¬å°è£…å¥½äº†ä¸€äº›å†—ä½™ï¼Œä¸”é‡ç”¨ç‡ä½çš„ä»£ç ã€‚å¹¶ä¸”ä½¿ç”¨åå°„ä¸åŠ¨æ€ä»£ç†æœºåˆ¶ï¼Œå°†ä»£ç å®ç°äº†é€šç”¨æ€§ã€‚æ¯”å¦‚å¦‚æœä½ è¯´servletå¼€å‘ï¼Œä½ éœ€è¦åœ¨servletè·å–è¡¨å•çš„å‚æ•°ï¼Œæ¯æ¬¡éƒ½è¦è·å–å¾ˆéº»çƒ¦ï¼Œè€Œstrutsåº•å±‚å°±ä½¿ç”¨åå°„æœºåˆ¶å’Œæ‹¦æˆªå™¨æœºåˆ¶å¸®åŠ©æˆ‘ä»¬è·å–è¡¨å•çš„å€¼ï¼Œæˆ‘ä»¬å°±ä¸ç”¨æ¯æ¬¡éƒ½æ‰‹å†™é‚£äº›ä»£ç äº†ï¼Œç®€åŒ–äº†å¼€å‘ï¼Œå½“ç„¶ä½ å¿…é¡»éµå®ˆä¸€äº›è§„å®šæ¥é…ç½®ã€‚</p><p>è¿˜æœ‰æ¯”å¦‚hibernateï¼Œå®ƒæä¾›äº†ä¸€äº›é€šç”¨æ€§å¾ˆå¼ºçš„å¯¹æ•°æ®åº“çš„å¢åˆ æ”¹å·®ï¼Œå¦‚æœä½ ä½¿ç”¨jdbcæ¯æ¬¡åšä¸€äº›ç®€å•çš„crudçš„æ—¶å€™éƒ½å¿…é¡»å†™sqlï¼Œä½†ä½¿ç”¨hibernateå°±ä¸éœ€è¦è¿™ä¹ˆéº»çƒ¦äº†ï¼Œç›´æ¥save,updateå°±å¯ä»¥äº†ã€‚å½“ç„¶ï¼Œä½ è¿˜æ˜¯è¦éµå¾ªå…¶ä¸€äº›è§„èŒƒè€Œé…ç½®ã€‚åŒç†springä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p></li></ul><h2 id="Javaæœ€åŸå§‹çš„æ¡†æ¶"><a href="#Javaæœ€åŸå§‹çš„æ¡†æ¶" class="headerlink" title="Javaæœ€åŸå§‹çš„æ¡†æ¶"></a>Javaæœ€åŸå§‹çš„æ¡†æ¶</h2><p><strong>æ•´åˆæ¡†æ¶ï¼šSSH=spring+struts2+hibernate</strong></p><h3 id="springæ¡†æ¶"><a href="#springæ¡†æ¶" class="headerlink" title="springæ¡†æ¶"></a><strong>springæ¡†æ¶</strong></h3><p><strong>1.springç®€ä»‹</strong><br>spring æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ï¼ŒåŸºäºIOCå’ŒAOPæ ¸å¿ƒæŠ€æœ¯çš„ä¼ä¸šçº§å¼€æºå¼€å‘æ¡†æ¶</p><p>åŠ¨æ€æ³¨å…¥ï¼Œè®©ä¸€ä¸ªå¯¹è±¡çš„åˆ›å»ºä¸ç”¨newäº†ï¼Œå¯ä»¥è‡ªåŠ¨çš„ç”Ÿäº§ï¼Œè¿™å…¶å®å°±æ˜¯åˆ©ç”¨javaé‡Œçš„åå°„ï¼Œåå°„å…¶å®å°±æ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€çš„å»åˆ›å»ºã€è°ƒç”¨å¯¹è±¡ï¼ŒSpringå°±æ˜¯åœ¨è¿è¡Œæ—¶ï¼Œæ ¹æ®xml Springçš„é…ç½®æ–‡ä»¶æ¥åŠ¨æ€çš„åˆ›å»ºå¯¹è±¡ï¼Œå’Œè°ƒç”¨å¯¹è±¡é‡Œçš„æ–¹æ³•çš„ã€‚ </p><p>Springè¿˜æœ‰ä¸€ä¸ªæ ¸å¿ƒå°±æ˜¯AOPè¿™ä¸ªå°±æ˜¯é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œå¯ä»¥ä¸ºæŸä¸€ç±»å¯¹è±¡ è¿›è¡Œç›‘ç£å’Œæ§åˆ¶ï¼ˆä¹Ÿå°±æ˜¯ åœ¨è°ƒç”¨è¿™ç±»å¯¹è±¡çš„å…·ä½“æ–¹æ³•çš„å‰åå»è°ƒç”¨ä½ æŒ‡å®šçš„ æ¨¡å—ï¼‰ä»è€Œè¾¾åˆ°å¯¹ä¸€ä¸ªæ¨¡å—æ‰©å……çš„åŠŸèƒ½ã€‚è¿™äº›éƒ½æ˜¯é€šè¿‡é…ç½®ç±»è¾¾åˆ°çš„ã€‚ </p><p><strong>Springç›®çš„</strong>ï¼šå°±æ˜¯è®©å¯¹è±¡ä¸å¯¹è±¡ï¼ˆæ¨¡å—ä¸æ¨¡å—ï¼‰ä¹‹é—´çš„å…³ç³»æ²¡æœ‰é€šè¿‡ä»£ç æ¥å…³è”ï¼Œéƒ½æ˜¯é€šè¿‡é…ç½®ç±»è¯´æ˜ ç®¡ç†çš„ï¼ˆSpringæ ¹æ®è¿™äº›é…ç½® å†…éƒ¨é€šè¿‡åå°„å»åŠ¨æ€çš„ç»„è£…å¯¹è±¡ï¼‰ </p><p><strong>æ³¨æ„ï¼š</strong>Springæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå‡¡æ˜¯åœ¨å®¹å™¨é‡Œçš„å¯¹è±¡æ‰ä¼šæœ‰Springæ‰€æä¾›çš„è¿™äº›æœåŠ¡å’ŒåŠŸèƒ½ã€‚</p><p><strong>2.springçš„ä¸»è¦ç‰¹å¾</strong><br><strong>ï¼ˆ1ï¼‰è½»é‡çº§</strong>ï¼šspringæ˜¯ä¸€ä¸ªè½»é‡çº§çš„å¼€å‘æ¡†æ¶ï¼ŒåŸºæœ¬ç‰ˆæœ¬å¤§çº¦åªæœ‰2M</p><p><strong>ï¼ˆ2ï¼‰IOCï¼š</strong>æ§åˆ¶åè½¬ï¼Œåº”ç”¨ç¨‹åºä¸­å¯¹è±¡ä¹‹é—´çš„ä¾èµ–æ˜¯ç”±spring æ¥æ§åˆ¶çš„</p><p><strong>ï¼ˆ3ï¼‰AOPï¼š</strong>é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œspringæ”¯æŒé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œè¿™æ ·å¯ä»¥å°†ä¸šåŠ¡é€»è¾‘å’Œç³»ç»ŸæœåŠ¡åˆ†å¼€ï¼Œåˆ†ç¦»</p><p><strong>ï¼ˆ4ï¼‰å®¹å™¨ï¼š</strong>åŒ…å«å¹¶ç®¡ç†åº”ç”¨ç¨‹åºä¸­å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œé…ç½®ä¿¡æ¯</p><p><strong>ï¼ˆ5ï¼‰MVCæ€æƒ³ï¼š</strong>springä¹Ÿæ˜¯åŸºäºMVCæ€æƒ³çš„æ¡†æ¶ï¼Œä¹Ÿéµå¾ªæ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨è¿™ä¸‰ä¸ªå±‚æ¬¡</p><p><strong>ï¼ˆ6ï¼‰äº‹åŠ¡ï¼š</strong>springæä¾›ä¸€ä¸ªæŒç»­åŒ–çš„æ¥å£ï¼Œå¯ä»¥ä¸Šè‡³æ‰©å±•åˆ°æœ¬åœ°äº‹åŠ¡ä¸‹è‡³æ‰©å±•åˆ°å…¨å±€äº‹åŠ¡</p><p><strong>ï¼ˆ7ï¼‰å¼‚å¸¸å¤„ç†ï¼š</strong>Spring æä¾›æ–¹ä¾¿çš„APIæŠŠå…·ä½“æŠ€æœ¯ç›¸å…³çš„å¼‚å¸¸ï¼ˆæ¯”å¦‚ç”±JDBCï¼Œhibernate,or JDOæŠ›å‡ºçš„ï¼‰è½¬åŒ–ä¸ºä¸€è‡´çš„unchecked å¼‚å¸¸ã€‚</p><p> <strong>3.springä¼˜ç¼ºç‚¹</strong></p><p><strong>ä¼˜ç‚¹ï¼š</strong></p><p>Springèƒ½æœ‰æ•ˆåœ°ç»„ç»‡ä½ çš„ä¸­é—´å±‚å¯¹è±¡ï¼Œä¸ç®¡ä½ æ˜¯å¦é€‰æ‹©ä½¿ç”¨äº†EJBã€‚å¦‚æœä½ ä»…ä»…ä½¿ç”¨äº†Strutsæˆ–å…¶ä»–ä¸ºJ2EEçš„ APIç‰¹åˆ¶çš„frameworkï¼ŒSpringè‡´åŠ›äºè§£å†³å‰©ä¸‹çš„é—®é¢˜ã€‚<br>Springèƒ½æ¶ˆé™¤åœ¨è®¸å¤šå·¥ç¨‹ä¸­å¸¸è§çš„å¯¹Singletonçš„è¿‡å¤šä½¿ç”¨ã€‚æ ¹æ®æˆ‘çš„ç»éªŒï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œå®ƒé™ä½äº†ç³»ç»Ÿçš„å¯æµ‹è¯•æ€§å’Œé¢å‘å¯¹è±¡çš„ç¨‹åº¦ã€‚<br>é€šè¿‡ä¸€ç§åœ¨ä¸åŒåº”ç”¨ç¨‹åºå’Œé¡¹ç›®é—´ä¸€è‡´çš„æ–¹æ³•æ¥å¤„ç†é…ç½®æ–‡ä»¶ï¼ŒSpringèƒ½æ¶ˆé™¤å„ç§å„æ ·è‡ªå®šä¹‰æ ¼å¼çš„å±æ€§æ–‡ä»¶çš„éœ€è¦ã€‚æ›¾ç»å¯¹æŸä¸ªç±»è¦å¯»æ‰¾çš„æ˜¯å“ªä¸ªé­”æ³•èˆ¬çš„å±æ€§é¡¹æˆ–ç³»ç»Ÿå±<br>æ€§æ„Ÿåˆ°ä¸è§£ï¼Œä¸ºæ­¤ä¸å¾—ä¸å»è¯»Javadocç”šè‡³æºç¼–ç ï¼Ÿæœ‰äº†Springï¼Œä½ ä»…ä»…éœ€è¦çœ‹çœ‹ç±»çš„JavaBeanå±æ€§ã€‚Inversion of Controlçš„ä½¿ç”¨ï¼ˆåœ¨ä¸‹é¢è®¨è®ºï¼‰å¸®åŠ©å®Œæˆäº†è¿™ç§ç®€åŒ–ã€‚<br>é€šè¿‡æŠŠå¯¹æ¥å£ç¼–ç¨‹è€Œä¸æ˜¯å¯¹ç±»ç¼–ç¨‹çš„ä»£ä»·å‡ ä¹å‡å°‘åˆ°æ²¡æœ‰ï¼ŒSpringèƒ½å¤Ÿä¿ƒè¿›å…»æˆå¥½çš„ç¼–ç¨‹ä¹ æƒ¯ã€‚<br>Springè¢«è®¾è®¡ä¸ºè®©ä½¿ç”¨å®ƒåˆ›å»ºçš„åº”ç”¨å°½å¯èƒ½å°‘çš„ä¾èµ–äºä»–çš„APIsã€‚åœ¨Springåº”ç”¨ä¸­çš„å¤§å¤šæ•°ä¸šåŠ¡å¯¹è±¡æ²¡æœ‰ä¾èµ–äºSpringã€‚<br>ä½¿ç”¨Springæ„å»ºçš„åº”ç”¨ç¨‹åºæ˜“äºå•å…ƒæµ‹è¯•ã€‚<br>Springèƒ½ä½¿EJBçš„ä½¿ç”¨æˆä¸ºä¸€ä¸ªå®ç°é€‰æ‹©,è€Œä¸æ˜¯åº”ç”¨æ¶æ„çš„å¿…ç„¶é€‰æ‹©ã€‚ä½ èƒ½é€‰æ‹©ç”¨POJOsæˆ–local EJBsæ¥å®ç°ä¸šåŠ¡æ¥å£ï¼Œå´ä¸ä¼šå½±å“è°ƒç”¨ä»£ç ã€‚<br>Springå¸®åŠ©ä½ è§£å†³è®¸å¤šé—®é¢˜è€Œæ— éœ€ä½¿ç”¨EJBã€‚Springèƒ½æä¾›ä¸€ç§EJBçš„æ›¿æ¢ç‰©ï¼Œå®ƒä»¬é€‚ç”¨äºè®¸å¤šwebåº”ç”¨ã€‚ä¾‹å¦‚ï¼ŒSpringèƒ½ä½¿ç”¨AOPæä¾›å£°æ˜æ€§äº‹åŠ¡ç®¡ç†è€Œä¸é€šè¿‡EJBå®¹å™¨ï¼Œå¦‚æœä½ ä»…ä»…éœ€è¦ä¸å•ä¸ªæ•°æ®åº“æ‰“äº¤é“ï¼Œç”šè‡³ä¸éœ€è¦ä¸€ä¸ªJTAå®ç°ã€‚<br>Springä¸ºæ•°æ®å­˜å–æä¾›äº†ä¸€ä¸ªä¸€è‡´çš„æ¡†æ¶,ä¸è®ºæ˜¯ä½¿ç”¨çš„æ˜¯JDBCè¿˜æ˜¯O/R mappingäº§å“ï¼ˆå¦‚Hibernateï¼‰ã€‚<br><strong>ç¼ºç‚¹ï¼š</strong><br>1.jspä¸­è¦å†™å¾ˆå¤šä»£ç ã€æ§åˆ¶å™¨è¿‡äºçµæ´»ï¼Œç¼ºå°‘ä¸€ä¸ªå…¬ç”¨æ§åˆ¶å™¨</p><p>2.Springä¸æ”¯æŒåˆ†å¸ƒå¼ï¼Œè¿™ä¹Ÿæ˜¯EJBä»ç„¶åœ¨ç”¨çš„åŸå› ä¹‹ä¸€ã€‚</p><h3 id="Strutsæ¡†æ¶"><a href="#Strutsæ¡†æ¶" class="headerlink" title="Strutsæ¡†æ¶"></a>Strutsæ¡†æ¶</h3><p><strong>1.structs1åŸç†</strong><br>æƒ³è¦ç†è§£strusts1ï¼Œæˆ‘æ˜¯å…ˆé€šè¿‡strusts1çš„è¿è¡ŒåŸç†å›¾æ¥ç†è§£çš„ï¼Œç„¶åï¼Œæˆ‘ä»¬æ ¹æ®åŸç†å›¾æ¥è®²è§£structs1åŸç†ã€‚</p><p><strong>1.1 strusts1åŸç†å›¾</strong></p><p><img src="https://s2.ax1x.com/2020/01/11/l5ytiV.jpg" alt="l5ytiV.jpg"></p><p><strong>1.2 structs1åŸç†æ­¥éª¤</strong><br>ç”¨æˆ·åœ¨è§†å›¾å±‚è¾“å…¥æ•°æ®ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼šstructsæ¡†æ¶æ€»æ§åˆ¶å™¨ï¼Œåˆå§‹åŒ–,å¼€å§‹è¯»å–strusts-config.xmlæ–‡ä»¶ã€‚</p><p>strutsæ¡†æ¶çš„æ€»æ§åˆ¶å™¨ActionServletæ˜¯ä¸€ä¸ªServletï¼Œå®ƒåœ¨web.xmlä¸­é…ç½®æˆè‡ªåŠ¨å¯åŠ¨çš„Servletï¼Œåœ¨å¯åŠ¨æ—¶æ€»æ§åˆ¶å™¨ä¼šè¯»å–é…ç½®æ–‡ä»¶(struts-config.xml)çš„é…ç½®ä¿¡æ¯ï¼Œä¸ºstrutsä¸­ä¸åŒçš„æ¨¡å—åˆå§‹åŒ–ç›¸åº”çš„å¯¹è±¡ã€‚(é¢å‘å¯¹è±¡æ€æƒ³)</p><p>ç¬¬äºŒæ­¥ï¼šè§†å›¾å±‚å‘æ€»æ§åˆ¶å™¨å‘é€Httpè¯·æ±‚</p><p>ç”¨æˆ·æäº¤è¡¨å•æˆ–è€…é€šè¿‡URLå‘WEBæœåŠ¡å™¨æäº¤è¯·æ±‚ï¼Œè¯·æ±‚çš„æ•°æ®ç”¨HTTPåè®®ä¼ ç»™webæœåŠ¡å™¨</p><p>ç¬¬ä¸‰æ­¥ï¼š Formå¡«å……</p><p>strutsçš„æ€»æ§åˆ¶å™¨ActionServletåœ¨ç”¨æˆ·æäº¤è¯·æ±‚æ—¶å°†æ•°æ®æ”¾åˆ°å¯¹åº”çš„formå¯¹è±¡ä¸­çš„æˆå‘˜å˜é‡ä¸­ã€‚</p><p>ç¬¬å››æ­¥ï¼šæ´¾å‘è¯·æ±‚</p><p>æ§åˆ¶å™¨æ ¹æ®é…ç½®ä¿¡æ¯ï¼Œå¯¹è±¡ActionConfigå°†è¯·æ±‚æ´¾å‘åˆ°å…·ä½“çš„Actionï¼Œå¯¹åº”çš„formBeanä¸€å¹¶ä¼ ç»™è¿™ä¸ªActionä¸­çš„excute()æ–¹æ³•ã€‚</p><p>ç¬¬äº”æ­¥ï¼šå¤„ç†ä¸šåŠ¡</p><p>Actionä¸€èˆ¬åªåŒ…å«ä¸€ä¸ªexcute()æ–¹æ³•ï¼Œå®ƒè´Ÿè´£æ‰§è¡Œç›¸åº”çš„ä¸šåŠ¡é€»è¾‘(è°ƒç”¨å…¶å®ƒçš„ä¸šåŠ¡æ¨¡å—)å®Œæ¯•åè¿”å›ä¸€ä¸ªActionForwardå¯¹è±¡ã€‚æœåŠ¡å™¨é€šè¿‡ActionForwardå¯¹è±¡è¿›è¡Œè½¬å‘å·¥ä½œã€‚</p><p>ç¬¬å…­æ­¥ï¼šè¿”å›å“åº”</p><p>Actionå°†ä¸šåŠ¡å¤„ç†çš„ä¸åŒç»“æœè¿”å›ä¸€ä¸ªç›®æ ‡å“åº”å¯¹è±¡ç»™æ€»æ§åˆ¶å™¨ã€‚</p><p>ç¬¬ä¸ƒæ­¥ï¼šæŸ¥æ‰¾å“åº”</p><p>æ€»æ§åˆ¶å™¨æ ¹æ®Actionå¤„ç†ä¸šåŠ¡è¿”å›çš„ç›®æ ‡å“åº”å¯¹è±¡ï¼Œæ‰¾åˆ°å¯¹åº”çš„èµ„æºå¯¹è±¡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸ºjspé¡µé¢ã€‚</p><p>ç¬¬å…«æ­¥:å“åº”ç”¨æˆ·</p><p>ç›®æ ‡å“åº”å¯¹è±¡å°†ç»“æœä¼ é€’ç»™èµ„æºå¯¹è±¡ï¼Œå°†ç»“æœå±•ç°ç»™ç”¨æˆ·ã€‚</p><p><strong>1.3 structsçš„ä¼˜ç¼ºç‚¹ï¼š</strong><br><strong>1.ä¼˜ç‚¹ï¼š</strong><br>  â‘ å¼€æºçš„æ¡†æ¶ï¼Œç»“æ„æ¸…æ™°<br>  â‘¡æ˜¯MVCçš„ç»å…¸å®ç°ï¼ˆMVCæ˜¯ä¸€ç§æ€æƒ³ï¼Œè€Œä¸æ˜¯ä¸€ç§æŠ€æœ¯ï¼‰<br>  â‘¢å¤„ç†å¼‚å¸¸æœºåˆ¶ï¼Œå®ç°å›½é™…åŒ–<br>  â‘£å…·æœ‰å¼ºå¤§çš„æ ‡ç­¾åº“<br>  â‘¤è§£å†³äº†JSPé¡µé¢å­˜åœ¨å¤§é‡çš„JAVAä»£ç ï¼Œç»´æŠ¤èµ·æ¥æ–¹ä¾¿<br>  â‘¥åœ¨formBeanä¸­ä¼šè‡ªåŠ¨æäº¤ï¼Œä¸ä¼šå»ä½¿ç”¨ä¼ ç»Ÿçš„getã€setæ–¹æ³•å¾—åˆ°å€¼ã€å–å€¼ </p><p><strong>2.ç¼ºç‚¹ï¼š</strong><br>  â‘ é…ç½®å¤æ‚<br>  â‘¡æµ‹è¯•ä¸æ–¹ä¾¿<br>  â‘¢ä¾èµ–webå®¹å™¨<br>  â‘£actionæ˜¯ä¸€ä¸ªå•ä¾‹æ¨¡å¼ï¼Œå¿…é¡»è®¾ç½®ä¸ºçº¿ç¨‹å®‰å…¨<br><strong>2.structs2åŸç†</strong><br><strong>2.1 structs2åŸç†å›¾</strong></p><p><img src="https://s2.ax1x.com/2020/01/11/l56Ymd.jpg" alt="l56Ymd.jpg"></p><p>ç¬¬ä¸€æ­¥ï¼šå®¢æˆ·ç«¯åˆå§‹åŒ–ä¸€ä¸ªæŒ‡å‘Servletå®¹å™¨ï¼ˆä¾‹å¦‚Tomcatï¼‰çš„è¯·æ±‚<br>ç¬¬äºŒæ­¥ï¼šè¿™ä¸ªè¯·æ±‚ç»è¿‡ä¸€ç³»åˆ—çš„è¿‡æ»¤å™¨ï¼ˆFilterï¼‰ï¼ˆè¿™äº›è¿‡æ»¤å™¨ä¸­æœ‰ä¸€ä¸ªå«åšActionContextCleanUpçš„å¯é€‰è¿‡æ»¤å™¨ï¼Œè¿™ä¸ªè¿‡æ»¤å™¨å¯¹äºStruts2å’Œå…¶ä»–æ¡†æ¶çš„é›†æˆå¾ˆæœ‰å¸®åŠ©ï¼Œä¾‹å¦‚ï¼šSiteMesh Pluginï¼‰<br>ç¬¬ä¸‰æ­¥ï¼šæ¥ç€FilterDispatcherè¢«è°ƒç”¨ï¼ŒFilterDispatcherè¯¢é—®ActionMapperæ¥å†³å®šè¿™ä¸ªè¯·æ˜¯å¦éœ€è¦è°ƒç”¨æŸä¸ªAction<br>ç¬¬å››æ­¥ï¼šå¦‚æœActionMapperå†³å®šéœ€è¦è°ƒç”¨æŸä¸ªActionï¼ŒFilterDispatcheræŠŠè¯·æ±‚çš„å¤„ç†äº¤ç»™ActionProxy<br>ç¬¬äº”æ­¥ï¼šActionProxyé€šè¿‡Configuration Managerè¯¢é—®æ¡†æ¶çš„é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°éœ€è¦è°ƒç”¨çš„Actionç±»<br>ç¬¬å…­æ­¥ï¼šActionProxyåˆ›å»ºä¸€ä¸ªActionInvocationçš„å®ä¾‹ã€‚<br>ç¬¬ä¸ƒæ­¥ï¼šActionInvocationå®ä¾‹ä½¿ç”¨å‘½åæ¨¡å¼æ¥è°ƒç”¨ï¼Œåœ¨è°ƒç”¨Actionçš„è¿‡ç¨‹å‰åï¼Œæ¶‰åŠåˆ°ç›¸å…³æ‹¦æˆªå™¨ï¼ˆIntercepterï¼‰çš„è°ƒç”¨ã€‚ </p><p>ç¬¬å…«æ­¥ï¼šä¸€æ—¦Actionæ‰§è¡Œå®Œæ¯•ï¼ŒActionInvocationè´Ÿè´£æ ¹æ®struts.xmlä¸­çš„é…ç½®æ‰¾åˆ°å¯¹åº”çš„è¿”å›ç»“æœã€‚è¿”å›ç»“æœé€šå¸¸æ˜¯ï¼ˆä½†ä¸æ€»æ˜¯ï¼Œä¹Ÿå¯ èƒ½æ˜¯å¦å¤–çš„ä¸€ä¸ªActioné“¾ï¼‰ä¸€ä¸ªéœ€è¦è¢«è¡¨ç¤ºçš„JSPæˆ–è€…FreeMarkerçš„æ¨¡ç‰ˆã€‚åœ¨è¡¨ç¤ºçš„è¿‡ç¨‹ä¸­å¯ä»¥ä½¿ç”¨Struts2 æ¡†æ¶ä¸­ç»§æ‰¿çš„æ ‡ç­¾ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­éœ€è¦æ¶‰åŠåˆ°ActionMapper </p><p><strong>æ³¨æ„ï¼š</strong>åœ¨ä¸Šè¿°è¿‡ç¨‹ä¸­æ‰€æœ‰çš„å¯¹è±¡ï¼ˆActionï¼ŒResultsï¼ŒInterceptorsï¼Œç­‰ï¼‰éƒ½æ˜¯é€šè¿‡ObjectFactoryæ¥åˆ›å»ºçš„</p><p><strong>2.2 structs2çš„ä¼˜ç¼ºç‚¹ï¼š</strong><br><strong>ä¼˜ç‚¹ï¼š</strong><br>å¤§é‡çš„æ‹¦æˆªå™¨ï¼š<br>Struts2æœ¬èº«æä¾›äº†å¤§é‡çš„å¯é‡ç”¨çš„æ‹¦æˆªå™¨ï¼Œæ¯”å¦‚ç±»å‹è½¬æ¢æ‹¦æˆªå™¨ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä»é¡µé¢å–å¾—å‚æ•°ï¼Œè¿™ä¸ªæ—¶å€™å®ƒæ˜¯Stringç±»å‹çš„ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨ã€‚<br>åŸºäºæ’ä»¶çš„æ¡†æ¶ï¼š<br>Struts2æ˜¯ä¸€ä¸ªåŸºäºæ’ä»¶çš„æ¡†æ¶ï¼Œç¤¾åŒºä¸­æä¾›äº†å¾ˆå¤šå®ç”¨çš„æ’ä»¶ï¼Œæ¯”å¦‚jfreechat/jsonç­‰ç­‰ï¼Œä½¿ç”¨è¿™äº›æ’ä»¶å¯ä»¥ç®€åŒ–æˆ‘ä»¬çš„å¼€å‘ï¼ŒåŠ å¿«å¼€å‘è¿›åº¦ã€‚<br>struts2æœ€å¤§çš„ç¼ºç‚¹è«è¿‡äºåœ¨å¥½å¤šwebæœåŠ¡å™¨ä¸Šæ”¯æŒä¸å¥½ï¼Œä¾‹å¦‚åœ¨websphere5.5,weblogic8.1åŠä»¥å‰ç‰ˆæœ¬æ”¯æŒéå¸¸æŸ¥ï¼Œéœ€è¦ç”¨æœ€æ–°çš„ã€‚<br>å¤šç§è§†å›¾çš„æ”¯æŒï¼š<br>å¤šç§è§†å›¾çš„æ”¯æŒï¼šjspï¼Œfreemarkerï¼ŒVeloctiyï¼Œåªè¦ä½ æ„¿æ„ï¼Œä½ ç”šè‡³å¯ä»¥é€šè¿‡è½»æ¾çš„æ”¹é€ è®©å®ƒæ”¯æŒpdfï¼ŒåŒä¸€ä¸ªé¡¹ç›®ä¸­ä½ å¯ä»¥æ”¯æŒå¤šç§è§†å›¾ã€‚<br>æ›´åŠ çš„æ¨¡å—åŒ–ï¼š<br>ä¸Struts1.X ç›¸æ¯”ï¼ŒStruts2æ›´åŠ çš„æ¨¡å—åŒ–ï¼Œå¯ä»¥è½»æ¾å°†é…ç½®ä¿¡æ¯æŒ‰åŠŸèƒ½ç•Œé™æ‹†åˆ†æˆå¤šä¸ªæ–‡ä»¶ï¼Œä¾¿äºç®¡ç†å’Œå›¢é˜Ÿåä½œå¼€å‘ã€‚<br>ä¸Springçš„é›†æˆï¼š<br>ä¸Struts1.xç›¸æ¯”ï¼ŒStruts2ä¸å¿…å†è‡ªå·±ç¼–å†™singletonï¼Œè¿›ä¸€æ­¥çš„é™ä½äº†ç¨‹åºé—´çš„è€¦åˆæ€§ï¼Œå°±Struts2å†…éƒ¨æœ¬èº«è€Œè¨€ï¼Œé™ä½äº†æ¡†æ¶æœ¬èº«çš„å¶åˆæ€§ã€‚<br>åŸºäºpojoæ˜“äºæµ‹è¯•ï¼š</p><p>åœ¨Struts1.xä¸­æˆ‘éœ€è¦Mockå‡ºè¿™ä¸¤ä¸ªHttpå¯¹è±¡ï¼Œä½¿æˆ‘ä»¬å¾ˆéš¾ç¼–å†™Actionçš„å•å…ƒæµ‹è¯•ï¼Œä¸Struts1.xç›¸æ¯”ï¼ŒStruts2çš„Action ä¸å†ä¾èµ–äºHttpServletRequestå’ŒHttpServletResponseå¯¹è±¡ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿæ›´æ–¹ä¾¿çš„é’ˆå¯¹Actionç¼–å†™å•å…ƒæµ‹è¯•ã€‚</p><p><strong>ç¼ºç‚¹ï¼š</strong><br>Struts2ä¸­Actionä¸­å–å¾—ä»jspä¸­ä¼ è¿‡æ¥çš„å‚æ•°æ—¶è¿˜æ˜¯æœ‰ç‚¹éº»çƒ¦ã€‚</p><p>å¯ä»¥ä¸ºStruts2çš„Actionä¸­çš„å±æ€§é…ç½®ä¸ŠGetterå’ŒSetteræ–¹æ³•ï¼Œé€šè¿‡é»˜è®¤æ‹¦æˆªå™¨ï¼Œå°±å¯ä»¥å°†è¯·æ±‚å‚æ•°è®¾ç½®åˆ°è¿™äº›å±æ€§ä¸­ã€‚å¦‚æœç”¨è¿™ç§æ–¹å¼ï¼Œå½“è¯·æ±‚å‚æ•°å¾ˆå¤šæ—¶ï¼ŒActionç±»å°±ä¼šè¢«è¿™äº›è¡¨å•å±æ€§å¼„çš„å¾ˆè‡ƒè‚¿ï¼Œè®©äººæ„Ÿè§‰ä¼šå¾ˆä¹±ã€‚è¿˜æœ‰Actionä¸­çš„å±æ€§ä¸ä½†å¯ä»¥ç”¨æ¥è·å¾—è¯·æ±‚å‚æ•°è¿˜å¯ä»¥è¾“å‡ºåˆ°Jspä¸­ï¼Œè¿™æ ·å°±ä¼šæ›´ä¹±ã€‚å‡è®¾ä»JSP1ä¸­è·å¾—äº†å‚æ•°money=100000ï¼Œä½†æ˜¯è¿™ä¸ªActionè¿˜è¦è¾“å‡ºåˆ°JSP2ä¸­ï¼Œä½†æ˜¯è¾“å‡ºçš„æ ¼å¼å´ä¸åŒï¼Œmoney=100,000ï¼Œè¿™æ ·è¿™ä¸ªActionä¸­çš„moneyä¸­çš„å€¼å°±å˜äº†ã€‚</p><p>æ ¡éªŒè¿˜æ˜¯æ„Ÿè§‰æ¯”è¾ƒç¹çï¼Œæ„Ÿè§‰å¤ªçƒ¦ä¹±ï¼Œä¹Ÿå¤ªç»†åŒ–äº†ã€‚</p><p>å¦‚æœæ ¡éªŒå‡ºé”™çš„åªèƒ½ç»™ç”¨æˆ·æç¤ºä¸€äº›ä¿¡æ¯ã€‚å¦‚æœæœ‰å¤šä¸ªå­—æ®µï¼Œæ¯ä¸ªå­—æ®µå‡ºé”™æ—¶è¿”å›åˆ°ä¸åŒçš„ç”»é¢ï¼Œè¿™ä¸ªåŠŸèƒ½åœ¨Strut2æ¡†æ¶ä¸‹å€ŸåŠ©æ¡†æ¶æä¾›çš„æ ¡éªŒé€»è¾‘å°±ä¸å®¹æ˜“å®ç°ã€‚</p><p>å®‰å…¨æ€§æœ‰å¾…æé«˜ã€‚</p><p>Struts2æ›å‡º2ä¸ªé«˜å±å®‰å…¨æ¼æ´ï¼Œä¸€ä¸ªæ˜¯ä½¿ç”¨ç¼©å†™çš„å¯¼èˆªå‚æ•°å‰ç¼€æ—¶çš„è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼Œå¦ä¸€ä¸ªæ˜¯ä½¿ç”¨ç¼©å†™çš„é‡å®šå‘å‚æ•°å‰ç¼€æ—¶çš„å¼€æ”¾å¼é‡å®šå‘æ¼æ´ã€‚è¿™äº›æ¼æ´å¯ä½¿é»‘å®¢å–å¾—ç½‘ç«™æœåŠ¡å™¨çš„â€œæœ€é«˜æƒé™â€ï¼Œä»è€Œä½¿ä¼ä¸šæœåŠ¡å™¨å˜æˆé»‘å®¢æ‰‹ä¸­çš„â€œè‚‰é¸¡â€</p><h3 id="hibernateæ¡†æ¶"><a href="#hibernateæ¡†æ¶" class="headerlink" title="hibernateæ¡†æ¶"></a><strong>hibernateæ¡†æ¶</strong></h3><p><strong>1.hibernateçš„å·¥ä½œåŸç†</strong></p><p>ç¬¬ä¸€æ­¥ï¼šConfiguration.config() æ¥è¯»å–xmlé…ç½®æ–‡ä»¶</p><p>ç¬¬äºŒæ­¥ï¼šConfiguration.config()æ¥è¯»å–é…ç½®æ–‡ä»¶é‡Œé¢çš„æ˜ å°„ä¿¡æ¯</p><p>ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºä¼šè¯å·¥å‚</p><p>ç¬¬å››æ­¥ï¼šæ‰“å¼€ä¼šè¯</p><p>ç¬¬äº”æ­¥ï¼šå¼€å¯äº‹åŠ¡</p><p>ç¬¬å…­æ­¥ï¼šæŒä¹…åŒ–åˆ°æ•°æ®åº“</p><p>ç¬¬ä¸ƒæ­¥ï¼šå…³é—­ä¼šè¯</p><p>ç¬¬å…«æ­¥ï¼šå…³é—­ä¼šè¯å·¥å‚<br><strong>2.hibernateä¼˜ç¼ºç‚¹</strong></p><p><strong>ä¼˜ç‚¹ï¼š</strong></p><p>1.hibernateæ˜¯åŸºäºORMappingæŠ€æœ¯çš„å¼€æºçš„æ¡†æ¶ï¼Œå¯¹JDBCè¿›è¡Œäº†è½»é‡çº§çš„å°è£…ï¼Œä½¿ç”¨é¢å‘å¯¹è±¡çš„æ€ç»´æ¥æ“çºµæ•°æ®åº“ã€‚ </p><p>2.hibernateæä¾›äº†sessionç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ï¼Œå¯¹äºä¸éœ€è¦è¿›è¡Œå¤æ‚æŸ¥è¯¢çš„ç³»ç»Ÿï¼Œæ€§èƒ½æœ‰æå‡ã€‚ </p><p>3.ä½ä¾µå…¥å¼è®¾è®¡</p><p><strong>ç¼ºç‚¹ï¼š</strong></p><p>1.hibernateä¸å®¹æ˜“ä¸Šæ‰‹ï¼Œå­¦ä¹ æˆæœ¬å¤ªé«˜</p><p>2.hibernateç”±äºä¸ç›´æ¥å¯¹åº•å±‚æ•°æ®åº“è¿›è¡Œæ“ä½œï¼Œæ‰€ä»¥ä¸é€‚åˆå¤æ‚çš„æŸ¥è¯¢ï¼ˆç»Ÿè®¡ï¼‰</p><p>3.ä¸é€‚åˆå¤§é‡çš„èšé›†æ“ä½œï¼ˆå­˜å‚¨è¿‡ç¨‹ï¼‰</p><p>æ¯”è¾ƒéš¾æ“ä½œï¼Œæ¯”è¾ƒå¤è€ï¼Œå·²å¾ˆå°‘ä½¿ç”¨ã€‚</p><h2 id="Javaè¾ƒæ–°æ¡†æ¶"><a href="#Javaè¾ƒæ–°æ¡†æ¶" class="headerlink" title="Javaè¾ƒæ–°æ¡†æ¶"></a>Javaè¾ƒæ–°æ¡†æ¶</h2><p><strong>é›†æˆæ¡†æ¶SSM=SptingMVC+Spring+Mybiats</strong></p><h2 id="Javaæœ€æ–°æ¡†æ¶"><a href="#Javaæœ€æ–°æ¡†æ¶" class="headerlink" title="Javaæœ€æ–°æ¡†æ¶"></a>Javaæœ€æ–°æ¡†æ¶</h2><p><strong>Springboot</strong></p><h2 id="Javaå¾®æœåŠ¡æ¡†æ¶"><a href="#Javaå¾®æœåŠ¡æ¡†æ¶" class="headerlink" title="Javaå¾®æœåŠ¡æ¡†æ¶"></a>Javaå¾®æœåŠ¡æ¡†æ¶</h2><p><strong>SpringCloud</strong></p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ubuntu18.04ç³»ç»Ÿç§»æ¤è¿‡åŠç¨‹åºç„¼å†™</title>
      <link href="/2020/01/08/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E7%A7%BB%E6%A4%8D/"/>
      <url>/2020/01/08/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E7%A7%BB%E6%A4%8D/</url>
      
        <content type="html"><![CDATA[<h1 id="ubuntu18-04ç³»ç»Ÿç§»æ¤è¿‡åŠç¨‹åºç„¼å†™"><a href="#ubuntu18-04ç³»ç»Ÿç§»æ¤è¿‡åŠç¨‹åºç„¼å†™" class="headerlink" title="ubuntu18.04ç³»ç»Ÿç§»æ¤è¿‡åŠç¨‹åºç„¼å†™"></a>ubuntu18.04ç³»ç»Ÿç§»æ¤è¿‡åŠç¨‹åºç„¼å†™</h1><h2 id="ubuntu18-04ç³»ç»Ÿç§»æ¤ï¼ˆç›®æ ‡ç‰ˆä¸ºcontex-Aç³»åˆ—ï¼‰"><a href="#ubuntu18-04ç³»ç»Ÿç§»æ¤ï¼ˆç›®æ ‡ç‰ˆä¸ºcontex-Aç³»åˆ—ï¼‰" class="headerlink" title="ubuntu18.04ç³»ç»Ÿç§»æ¤ï¼ˆç›®æ ‡ç‰ˆä¸ºcontex Aç³»åˆ—ï¼‰"></a>ubuntu18.04ç³»ç»Ÿç§»æ¤ï¼ˆç›®æ ‡ç‰ˆä¸ºcontex Aç³»åˆ—ï¼‰</h2><h3 id="ä¸€ã€tftpæ–‡ä»¶æœåŠ¡å™¨"><a href="#ä¸€ã€tftpæ–‡ä»¶æœåŠ¡å™¨" class="headerlink" title="ä¸€ã€tftpæ–‡ä»¶æœåŠ¡å™¨"></a>ä¸€ã€tftpæ–‡ä»¶æœåŠ¡å™¨</h3><ul><li><strong>tftpçš„ä½œç”¨</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åœ¨åµŒå…¥å¼ç³»ç»Ÿå¼€å‘ä¸­ï¼Œç»å¸¸éœ€è¦ä»ä¸»æœºä¸Šä¼ é€æ˜ åƒã€æ–‡ä»¶ç­‰åˆ°ç›®æ ‡æœºä¸Šã€‚å®ç°çš„æ–¹æ³•æœ‰å¾ˆå¤šã€‚å¦‚tftpï¼Œscpç­‰ã€‚<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TFTPï¼ˆTrivial File Transfer Protocolï¼‰æ˜¯ç”¨æ¥ä¸‹è½½è¿œç¨‹æ–‡ä»¶çš„æœ€ç®€å•çš„ç½‘ç»œåè®®ï¼Œå®ƒåŸºäºUDPåè®®è€Œå®ç°ã€‚</li><li><strong>å®‰è£…tftp-hpa</strong></li></ul><a id="more"></a><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install tftp-hpa</span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tftp-hpaæ˜¯å®¢æˆ·ç«¯ï¼Œä½œç”¨æ˜¯ä»åˆ«äººçš„TFTPæœåŠ¡å™¨ç«¯ä¸Šä¼ /ä¸‹è½½ä¸œè¥¿ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install tftpd-hpa</span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tftpd-hpaæ˜¯æœåŠ¡ç«¯ï¼Œå­—æ¯dä»£è¡¨daemonï¼Œä½œç”¨æ˜¯ä¸ºåˆ«äººæä¾›TFTPæœåŠ¡ï¼Œä¾›åˆ«äººä¸Šä¼ /ä¸‹è½½ä¸œè¥¿ã€‚</p><ul><li><strong>åˆ›å»ºTFTPç›®å½•</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åœ¨æ­¤æˆ‘ä½¿ç”¨çš„æ˜¯é»˜è®¤æ–‡ä»¶å¤¹ã€‚</li><li><strong>ä¿®æ”¹é…ç½®æ–‡ä»¶</strong></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/default/tftpd-hpa</span><br></pre></td></tr></table></figure><p>æ›´æ”¹åå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1 # /etc/default/tftpd-hpa                                                    </span><br><span class="line">2 </span><br><span class="line">3 TFTP_USERNAME=&quot;tftp&quot;</span><br><span class="line">4 TFTP_DIRECTORY=&quot;/var/lib/tftpboot&quot;  // æŒ‡å®štftpçš„å…±äº«ç›®å½• </span><br><span class="line">5 TFTP_ADDRESS=&quot;0.0.0.0:69&quot;</span><br><span class="line">6 TFTP_OPTIONS=&quot;-c -s -l&quot;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹é…ç½®åé‡å¯tftiæœåŠ¡å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service tftpd-hpa restart</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong><br>ä¸Šä¼ æ–‡ä»¶æ—¶æ³¨æ„æƒé™<br>å»ºè®®ç»™æœ€å¤§æƒé™ï¼ˆ777ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod -R  777  ç›®å½•å</span><br></pre></td></tr></table></figure><h3 id="äºŒã€nfsç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ"><a href="#äºŒã€nfsç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="äºŒã€nfsç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ"></a>äºŒã€nfsç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ</h3><ul><li><strong>nfsçš„ä½œç”¨</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¸€ä¸ªåµŒå…¥å¼æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼šå†…æ ¸å’Œæ–‡ä»¶ç³»ç»Ÿã€‚åœ¨æœ¬æ¬¡è¯¾è®¾ä¸­ï¼Œä½¿ç”¨çš„å†…æ ¸æ˜¯åˆ«äººæä¾›çš„ï¼Œä½¿ç”¨çš„æ“ä½œç³»ç»Ÿæ˜¯nfsç½‘ç»œæ–‡ä»¶ç³»ç»Ÿã€‚åœ¨å†…æ ¸ä¸­åº”æ·»åŠ å¯¹nfsçš„æ”¯æŒï¼Œå®è´¨æ˜¯åœ¨å†…æ ¸å¯åŠ¨è¿‡ç¨‹ä¸­ï¼Œå¯åŠ¨äº†ä¸€ä¸ªnfså®¢æˆ·ç«¯é€šè¿‡é…ç½®æ–‡ä»¶å»è¯»å–nfsæœåŠ¡ç«¯ä¸Šçš„æ–‡ä»¶ç³»ç»Ÿã€‚<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å°†pcNFSæ˜¯ç”±Sunå¼€å‘å¹¶å‘å±•èµ·æ¥çš„ä¸€é¡¹åœ¨ä¸åŒæœºå™¨ã€ä¸åŒæ“ä½œç³»ç»Ÿä¹‹é—´é€šè¿‡ç½‘ç»œå…±äº«æ–‡ä»¶çš„æŠ€æœ¯ã€‚åœ¨åµŒå…¥å¼Linuxç³»ç»Ÿçš„å¼€å‘è°ƒè¯•é˜¶æ®µï¼Œå¯ä»¥åˆ©ç”¨è¯¥æŠ€æœ¯åœ¨ä¸»æœºä¸Šå»ºç«‹åŸºäºNFS çš„æ ¹æ–‡ä»¶ç³»ç»Ÿï¼ŒæŒ‚è½½åˆ°åµŒå…¥å¼è®¾å¤‡ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä¿®æ”¹æ ¹æ–‡ä»¶ç³»ç»Ÿçš„å†…å®¹ã€‚ä»¥ä¸Šè®¨è®ºçš„éƒ½æ˜¯åŸºäºå­˜å‚¨è®¾å¤‡çš„æ–‡ä»¶ç³»ç»Ÿ(memory-based file system)ï¼Œå®ƒä»¬éƒ½å¯ç”¨ä½œLinuxçš„æ ¹æ–‡ä»¶ç³»ç»Ÿã€‚å®é™…ä¸Šï¼ŒLinuxè¿˜æ”¯æŒé€»è¾‘çš„æˆ–ä¼ªæ–‡ä»¶ç³»ç»Ÿ(logical or pseudo file system)ï¼Œä¾‹å¦‚procfs(procæ–‡ä»¶ç³»ç»Ÿ)ï¼Œç”¨äºè·å–ç³»ç»Ÿä¿¡æ¯ï¼Œä»¥åŠdevfs(è®¾å¤‡æ–‡ä»¶ç³»ç»Ÿ)å’Œsysfsï¼Œç”¨äºç»´æŠ¤è®¾å¤‡æ–‡ä»¶ã€‚<br><strong>å®‰è£…nfsæœåŠ¡å™¨</strong></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nfs-kernel-server</span><br></pre></td></tr></table></figure><p><strong>é…ç½®nfsæœåŠ¡å™¨</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/exports</span><br></pre></td></tr></table></figure><p>æ›´æ”¹åå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> 1 # /etc/exports: the access control list for filesystems which may be exporte    d                                                                           </span><br><span class="line"> 2 #       to NFS clients.  See exports(5).</span><br><span class="line"> 3 #</span><br><span class="line"> 4 # Example for NFSv2 and NFSv3:</span><br><span class="line"> 5 # /srv/homes       hostname1(rw,sync,no_subtree_check) hostname2(ro,sync,no_    subtree_check)</span><br><span class="line"> 6 #</span><br><span class="line"> 7 # Example for NFSv4:</span><br><span class="line"> 8 # /srv/nfs4        gss/krb5i(rw,sync,fsid=0,crossmnt,no_subtree_check)</span><br><span class="line"> 9 # /srv/nfs4/homes  gss/krb5i(rw,sync,no_subtree_check)</span><br><span class="line">10 #</span><br><span class="line">11 /home/source/rootfs *(rw,sync,no_root_squash)</span><br><span class="line"># æŒ‡å®šå…±äº«ç›®å½•ä¸º/home/source/rootfs  æƒé™ä¸ºè¯»å†™ ...</span><br></pre></td></tr></table></figure><p><strong>å¤åˆ¶æ–‡ä»¶ç³»ç»Ÿå‹ç¼©åŒ…è‡³æŒ‡å®šç›®å½•å¹¶è§£å‹</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å°†æ ¹æ–‡ä»¶ç³»ç»Ÿçš„å‹ç¼©åŒ…rootfs.tar.xzæ‹·è´è‡³/home/sourceï¼Œç„¶åè§£å‹ï¼Œæ³¨æ„æƒé™<br><strong>è§£å‹æŒ‡ä»¤:</strong>sudo tar -xvf  rootfs.tar.xz<br><strong>é‡å¯NFSæœåŠ¡å™¨</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service nfs-kernel-server restart</span><br></pre></td></tr></table></figure><p><strong>è¿›è¡ŒæŒ‚è½½æµ‹è¯•</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -t nfs localhost:/source/rootfs /mnt</span><br><span class="line">ls -l /mnt</span><br></pre></td></tr></table></figure><p><strong>å¸è½½æµ‹è¯•</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo umount /mnt/</span><br></pre></td></tr></table></figure><h3 id="ä¸‰ã€å¼€å‘æ¿çš„ç¯å¢ƒæ­å»ºï¼ˆcontex-Aç³»åˆ—ï¼‰"><a href="#ä¸‰ã€å¼€å‘æ¿çš„ç¯å¢ƒæ­å»ºï¼ˆcontex-Aç³»åˆ—ï¼‰" class="headerlink" title="ä¸‰ã€å¼€å‘æ¿çš„ç¯å¢ƒæ­å»ºï¼ˆcontex Aç³»åˆ—ï¼‰"></a>ä¸‰ã€å¼€å‘æ¿çš„ç¯å¢ƒæ­å»ºï¼ˆcontex Aç³»åˆ—ï¼‰</h3><ul><li><strong>æŸ¥çœ‹ä¸²å£é©±åŠ¨</strong><br><strong>æŒ‡ä»¤å¦‚ä¸‹ï¼š</strong></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lcx@lcx-linux:~$ cd /dev/</span><br><span class="line">lcx@lcx-linux:/dev$ ls ttyUSB*</span><br><span class="line">crw-rw-rw- 1 root dialout 188, 0 2020-01-08 10:38 ttyUSB0</span><br><span class="line">lcx@lcx-linux:/dev$</span><br></pre></td></tr></table></figure><ul><li><strong>å®‰è£…ä¼ ä¸²å£é€šè®¯è½¯ä»¶ï¼ˆputty ï¼‰</strong></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install putty</span><br></pre></td></tr></table></figure><p>è®¾ç½®ç«¯å£ï¼šä½/ç§’ 115200ï¼Œæ•°æ®ä½ 8ï¼Œå¥‡å¶æ ¡éªŒ æ— ï¼Œåœæ­¢ä½ 1ï¼Œæ•°æ®æµæ§åˆ¶ æ— </p><ul><li><strong>è¿æ¥ä¸²å£çº¿åˆ°å¼€å‘æ¿</strong><br>ç»™å¼€å‘æ¿ä¸Šç”µï¼Œåº”è¯¥èƒ½ä»puttyçœ‹åˆ°ä¸²å£ä¿¡æ¯ã€‚</li><li><strong>é…ç½®å¼€å‘æ¿çš„ç¯å¢ƒå˜é‡</strong><br>setenv ipaddr 192.168.1.3â€”-&gt;å¼€å‘æ¿IP<br>setenv serverip 192.168.1.2â€”&gt;nfsæœåŠ¡å™¨IP<br><strong>ping æµ‹è¯•</strong><br>å¼€å‘æ¿ping 192.168.1.2<br>æ˜¾ç¤ºalive pingé€šäº†  ä¹Ÿå¯ç”¨ä¸»æœºpingå¼€å‘æ¿<br><strong>ç³»ç»Ÿå¯åŠ¨å‚æ•°</strong><br>setenv bootcmd tftp 41000000 uImage;tftp 42000000 exynos4412-fs4412.dtb;bootm 41000000 - 42000000<br><strong>å†…æ ¸å¯åŠ¨nfsæ–‡ä»¶ç³»ç»Ÿå‚æ•°</strong><br>setenv bootargs root=/dev/nfs nfsroot=192.168.1.2:/home/source/rootfs rw ip=192.168.1.3 console=ttySAC2,115200 init=/linuxrc</li></ul><h3 id="å››ã€äº¤å‰ç¼–è¯‘å·¥å…·é“¾"><a href="#å››ã€äº¤å‰ç¼–è¯‘å·¥å…·é“¾" class="headerlink" title="å››ã€äº¤å‰ç¼–è¯‘å·¥å…·é“¾"></a>å››ã€äº¤å‰ç¼–è¯‘å·¥å…·é“¾</h3><ul><li><strong>äº¤å‰ç¼–è¯‘å·¥å…·é“¾çš„ä½œç”¨ï¼š</strong><br>armäº¤å‰ç¼–è¯‘å·¥å…·é“¾æ˜¯ç”¨äºåœ¨ä¸€ç§å¹³å°ä¸Šç¼–è¯‘å‡ºèƒ½è¿è¡Œåœ¨ä½“ç³»ç»“æ„ä¸åŒçš„å¦ä¸€ç§å¹³å°ä¸Šçš„ç¨‹åºï¼Œæ¯”å¦‚åœ¨PCå¹³å°ï¼ˆX86 CPUï¼‰ä¸Šç¼–è¯‘å‡ºèƒ½è¿è¡Œåœ¨ä»¥ARMä¸ºå†…æ ¸çš„CPUå¹³å°ä¸Šçš„ç¨‹åºï¼Œç¼–è¯‘å¾—åˆ°çš„ç¨‹åºåœ¨X86 CPUå¹³å°ä¸Šæ˜¯ä¸èƒ½è¿è¡Œçš„ï¼Œå¿…é¡»æ”¾åˆ°ARM CPUå¹³å°ä¸Šæ‰èƒ½è¿è¡Œï¼Œè™½ç„¶ä¸¤ä¸ªå¹³å°ç”¨çš„éƒ½æ˜¯Linuxç³»ç»Ÿã€‚</li><li><strong>ä¸‹è½½äº¤å‰ç¼–è¯‘é“¾å·¥å…·</strong><br><strong>æ–¹æ³•ä¸€ï¼š</strong></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä¸‹è½½æŒ‡ä»¤ï¼š</span><br><span class="line">sudo apt-get install gcc-arm-linux-gnueabihf </span><br><span class="line">å¸è½½æŒ‡ä»¤ï¼š</span><br><span class="line">sudo apt-get remove gcc-arm-linux-gnueabihf</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹æ³•ä¸éœ€è¦é…ç½®ç¯å¢ƒ  ä½†æ˜¯å¯èƒ½å‡ºç°not foundçš„é—®é¢˜   è¯¥é—®é¢˜æ˜¯å› ä¸ºä½ çš„linuxç³»ç»Ÿæ˜¯64ä½çš„ç³»ç»Ÿçš„è€Œä½ å®‰è£…çš„arm-linux-gcc-4.4.3æ˜¯32ä½çš„è½¯ä»¶ï¼Œè™½ç„¶64ä½ç³»ç»Ÿå¯ä»¥è¿è¡Œ32ä½çš„è½¯ä»¶ï¼Œä½†éœ€è¦å®‰è£…32ä½çš„è¿è¡Œåº“ï¼Œä½ æ²¡å®‰è£…32ä½è¿è¡Œåº“å°±ä¸èƒ½ä½¿ç”¨ã€‚<br><strong>æ–¹æ³•äºŒï¼š</strong><br>1.ä»ç½‘ä¸Šä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„äº¤å‰ç¼–è¯‘å·¥å…·ã€‚<br>2.ä½¿ç”¨tarå‘½ä»¤è§£å‹å®‰è£…åŒ…ï¼Œå³åœ¨Terminalä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼šï¼ˆå‰é¢çš„sudoè¡¨ç¤ºä½¿ç”¨rootæƒé™æ‰§è¡Œè¯¥å‘½ä»¤ï¼‰ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lcx@lcx-linux:~/ä¸‹è½½$ sudo tar -xvf gcc-4.6.4.tar.xz</span><br></pre></td></tr></table></figure><p>3.æŸ¥çœ‹è§£å‹åbinç›®å½•çš„å…¨è·¯å¾„ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lcx@lcx-linux:~$ cd ä¸‹è½½/gcc-4.6.4/bin/</span><br><span class="line">lcx@lcx-linux:~/ä¸‹è½½/gcc-4.6.4/bin$ pwd</span><br><span class="line">/home/lcx/ä¸‹è½½/gcc-4.6.4/bin</span><br><span class="line">lcx@lcx-linux:~/ä¸‹è½½/gcc-4.6.4/bin$</span><br></pre></td></tr></table></figure><p>4.æ·»åŠ ç¯å¢ƒå˜é‡ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lcx@lcx-linux:~$ vim .bashrc</span><br></pre></td></tr></table></figure><p>æœ€åä¸€è¡Œæ·»åŠ ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># äº¤å‰ç¼–è¯‘å·¥å…·é“¾</span><br><span class="line"> export PATH=$PATH:/home/lcx/ä¸‹è½½/gcc-4.6.4/bin</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lcx@lcx-linux:~$ source .bashrc</span><br></pre></td></tr></table></figure><h2 id="ç¨‹åºçš„çƒ§å†™"><a href="#ç¨‹åºçš„çƒ§å†™" class="headerlink" title="ç¨‹åºçš„çƒ§å†™"></a>ç¨‹åºçš„çƒ§å†™</h2><h3 id="ä¸€ã€æ–‡ä»¶æ‹·è´é¡¹ç›®"><a href="#ä¸€ã€æ–‡ä»¶æ‹·è´é¡¹ç›®" class="headerlink" title="ä¸€ã€æ–‡ä»¶æ‹·è´é¡¹ç›®"></a>ä¸€ã€æ–‡ä»¶æ‹·è´é¡¹ç›®</h3><p>1.å°†é¡¹ç›®ç¨‹åºæ‹·è´è‡³nfsæ–‡ä»¶ç³»ç»Ÿä¸­<br>2.åœ¨ubuntu18.04ä¸­å°†é¡¹ç›®ç¨‹åºä½¿ç”¨äº¤å‰ç¼–è¯‘å·¥å…·é“¾è¿›è¡Œç¼–è¯‘<br>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lcx@lcx-linux:/home/source/rootfs$ arm-none-linux-gnueabi-gcc-4.6.4 -o write write.c</span><br></pre></td></tr></table></figure><p>3.åœ¨å¼€å‘æ¿ä¸Šæ‰§è¡Œç¨‹åº<br>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@farsight ]# ./write 1.txt 2.txt</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">open source file ok!</span><br><span class="line">Create new file successfully!</span><br><span class="line">Write ok!</span><br></pre></td></tr></table></figure><p>é¡¹ç›®ä»£ç å¦‚ä¸‹ï¼ˆå®ç°æ–‡ä»¶æ‹·è´åŠŸèƒ½ï¼‰ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"> <span class="number">1</span> <span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"> <span class="number">2</span> <span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"> <span class="number">3</span> <span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"> <span class="number">4</span> <span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"> <span class="number">5</span> <span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"> <span class="number">6</span> <span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"> <span class="number">7</span> <span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"> <span class="number">8</span> <span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;errno.h&gt;</span></span></span><br><span class="line"> <span class="number">9</span> </span><br><span class="line"><span class="number">10</span> <span class="meta"># <span class="meta-keyword">define</span> BUF_SIZE 20</span></span><br><span class="line"><span class="number">11</span> </span><br><span class="line"><span class="number">12</span> <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc,<span class="keyword">char</span> *argv[])</span></span>&#123;</span><br><span class="line"><span class="number">13</span>     <span class="keyword">int</span> fd,fd1;</span><br><span class="line"><span class="number">14</span>     <span class="keyword">char</span> bufs[<span class="number">20</span>];</span><br><span class="line"><span class="number">15</span>     <span class="keyword">int</span> len;</span><br><span class="line"><span class="number">16</span>     <span class="keyword">if</span>(argc != <span class="number">3</span>)&#123;</span><br><span class="line"><span class="number">17</span>         <span class="built_in">printf</span>(<span class="string">"please input file name!\n"</span>);</span><br><span class="line"><span class="number">18</span>         <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line"><span class="number">19</span>     &#125;</span><br><span class="line"><span class="number">20</span>     <span class="keyword">else</span>&#123;</span><br><span class="line"><span class="number">21</span>         <span class="comment">//1 æ‰“å¼€æºæ–‡ä»¶</span></span><br><span class="line"><span class="number">22</span>         fd = open(argv[<span class="number">1</span>],O_RDONLY,<span class="number">0666</span>);</span><br><span class="line"><span class="number">23</span>         <span class="keyword">if</span>(<span class="number">-1</span> == fd)&#123;</span><br><span class="line"><span class="number">24</span>             perror(<span class="string">"open read file error!\n"</span>);</span><br><span class="line"><span class="number">25</span>             <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line"><span class="number">26</span>         &#125;</span><br><span class="line"><span class="number">27</span>         <span class="keyword">else</span>&#123;</span><br><span class="line"><span class="number">28</span>             <span class="built_in">printf</span>(<span class="string">"open source file ok!\n"</span>);</span><br><span class="line"><span class="number">29</span>         <span class="comment">//2 æ‰“å¼€ç›®æ ‡æ–‡ä»¶ </span></span><br><span class="line"><span class="number">30</span>             <span class="comment">//å¦‚æœç›®æ ‡æ–‡ä»¶ä¸å­˜åœ¨  åˆ™åˆ›å»ºç›®æ ‡æ–‡ä»¶</span></span><br><span class="line"><span class="number">31</span>             fd1 = open(argv[<span class="number">2</span>],O_WRONLY,<span class="number">0666</span>);</span><br><span class="line"><span class="number">32</span>             <span class="keyword">if</span>(<span class="number">-1</span> == fd1)&#123;</span><br><span class="line"><span class="number">33</span>                 <span class="comment">//åˆ›å»ºç›®æ ‡æ–‡ä»¶</span></span><br><span class="line"><span class="number">34</span>                 fd1 = creat(argv[<span class="number">2</span>],<span class="number">0775</span>);</span><br><span class="line"><span class="number">35</span>                 <span class="built_in">printf</span>(<span class="string">"Create new file successfully!\n"</span>);</span><br><span class="line"><span class="number">36</span>                 fd1 = open(argv[<span class="number">2</span>],O_WRONLY,<span class="number">0666</span>);</span><br><span class="line"><span class="number">37</span>             <span class="comment">// cp</span></span><br><span class="line"><span class="number">38</span>                 <span class="keyword">while</span>((len = read(fd,bufs,BUF_SIZE))&gt;<span class="number">0</span>)&#123;</span><br><span class="line"><span class="number">39</span>                       write(fd1,bufs,len);</span><br><span class="line"><span class="number">40</span>                 &#125;</span><br><span class="line"><span class="number">41</span>                 <span class="built_in">printf</span>(<span class="string">"Write ok!\n"</span>);</span><br><span class="line"><span class="number">42</span> </span><br><span class="line"><span class="number">43</span>                 <span class="keyword">if</span>(<span class="number">-1</span> == fd1)</span><br><span class="line"><span class="number">44</span>                 &#123;</span><br><span class="line"><span class="number">45</span>                 perror(<span class="string">"open write file error!\n"</span>);</span><br><span class="line"><span class="number">46</span>                 <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line"><span class="number">47</span>                 &#125;                                                                                                                                                                                             </span><br><span class="line"><span class="number">48</span>             &#125;</span><br><span class="line"><span class="number">49</span>             <span class="keyword">else</span>&#123;</span><br><span class="line"><span class="number">50</span>                 <span class="built_in">printf</span>(<span class="string">"open destination file ok!\n"</span>);</span><br><span class="line"><span class="number">51</span>         <span class="comment">//3  å¦‚æœå­˜åœ¨ åˆ™å¤åˆ¶åˆ°ç›®æ ‡æ–‡ä»¶</span></span><br><span class="line"><span class="number">52</span>                 <span class="keyword">while</span>((len = read(fd,bufs,BUF_SIZE))&gt;<span class="number">0</span>)&#123;</span><br><span class="line"><span class="number">53</span>                     write(fd1,bufs,len);</span><br><span class="line"><span class="number">54</span> </span><br><span class="line"><span class="number">55</span>                 &#125;</span><br><span class="line"><span class="number">56</span>                 <span class="built_in">printf</span>(<span class="string">"write ok!\n"</span>);</span><br><span class="line"><span class="number">57</span>             &#125;</span><br><span class="line"><span class="number">58</span>             close(fd);</span><br><span class="line"><span class="number">59</span>             close(fd1);</span><br><span class="line"><span class="number">60</span>             <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="number">61</span>         &#125;</span><br><span class="line"><span class="number">62</span>     &#125;</span><br><span class="line"><span class="number">63</span> &#125;</span><br></pre></td></tr></table></figure><p>ç”±äºå¼€å‘æ¿ä¸æ”¯æŒä¸­æ–‡æ ¼å¼ï¼Œæ•…å°†æµ‹è¯•æºæ–‡ä»¶å‘½åä¸º1.txtï¼Œå†…å®¹ä¸ºèˆŒå°–ä¸Šçš„ä¸­å›½è‹±è¯‘ç‰ˆæ–‡æ¡ˆ ,åœ¨æ­¤ä¸åˆ›å»ºç›®æ ‡æ–‡ä»¶ã€‚ï¼ˆæ‹·è´æ—¶åˆ›å»ºï¼‰<br>æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š<br><img src="https://s2.ax1x.com/2020/01/08/l26KL6.png" alt="è¿è¡Œç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶.png"><br><img src="https://s2.ax1x.com/2020/01/08/l26koF.png" alt="2.txt.png"></p><h3 id="äºŒã€ç™¾åº¦ç½‘ç›˜é¡¹ç›®"><a href="#äºŒã€ç™¾åº¦ç½‘ç›˜é¡¹ç›®" class="headerlink" title="äºŒã€ç™¾åº¦ç½‘ç›˜é¡¹ç›®"></a>äºŒã€ç™¾åº¦ç½‘ç›˜é¡¹ç›®</h3><ul><li><strong>é¡¹ç›®ç®€ä»‹åŠä½¿ç”¨</strong><br>ç”±ä¸¤ä¸ªcç¨‹åºå®ç°ç½‘ç›˜æ–‡ä»¶ä¼ è¾“åŠŸèƒ½ï¼Œæ˜¯åŸºäºtcpåè®®çš„æ–‡ä»¶ä¼ è¾“ç¨‹åºã€‚å…¶åŠŸèƒ½æ˜¯ä½¿ç”¨TCPåè®®ä»clientç«¯å‘serverç«¯ä¼ è¾“æ–‡ä»¶ã€‚å°†serverç¨‹åºé€šè¿‡gccç¼–è¯‘è¿è¡Œåœ¨å¼€å‘æœºä¸Šï¼Œå°†clientç¨‹åºé€šè¿‡äº¤å‰ç¼–è¯‘é“¾ç¼–è¯‘è¿è¡Œåœ¨å¼€å‘æ¿ä¸Šã€‚<br>å…·ä½“ç”¨æ³•å¦‚ä¸‹ï¼š</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Â ç¼–è¯‘ï¼š</span><br><span class="line"></span><br><span class="line">Â  Â  Â lcx@lcx-linux:~/test/ç™¾åº¦ç½‘ç›˜ä½é…ç‰ˆ$ gcc -o server server.c </span><br><span class="line">lcx@lcx-linux:~/test/ç™¾åº¦ç½‘ç›˜ä½é…ç‰ˆ$ arm-none-linux-gnueabi-gcc-4.6.4 -o client client.c </span><br><span class="line"></span><br><span class="line">Â  Â  Â è¿è¡Œï¼š</span><br><span class="line"></span><br><span class="line">Â  Â  Â  Â  Â  Â clientç«¯ï¼š./client  server IP  ç«¯å£å·  ä¸Šä¼ æ–‡ä»¶å</span><br><span class="line">Â  Â  Â  Â  Â  Â serverç«¯ï¼š./server   ç«¯å£å·   ä¿å­˜ä¸ºæ–‡ä»¶å</span><br></pre></td></tr></table></figure><ul><li><strong>çŸ¥è¯†å‚¨å¤‡</strong><br>tcpä¼ è¾“åè®®ã€ç½‘ç»œå¥—æ¥å­—ç¼–ç¨‹ã€cè¯­è¨€ã€‚</li><li><strong>æµ‹è¯•ç»“æœå¦‚ä¸‹</strong><br><img src="https://s2.ax1x.com/2020/01/09/lR4sje.png" alt="å®¢æˆ·ç«¯"><br><strong>æ³¨æ„</strong>  å…ˆæ‰“å¼€serverç¨‹åº è®¾ç½®å¥½ç«¯å£å·ï¼Œå†æ‰“å¼€clientç¨‹åºã€‚å›¾ä¸­ä¸ŠåŠéƒ¨åˆ†ä¸ºé”™è¯¯æ¡ˆä¾‹ã€‚<br><img src="https://s2.ax1x.com/2020/01/09/lR5SvF.png" alt="æœåŠ¡ç«¯"><br>æ¥æ”¶åˆ°çš„æ–‡ä»¶åæŒ‡å®šä¸º1.txt<br>æ‰“å¼€1.txtå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="https://s2.ax1x.com/2020/01/09/lR5Ban.png" alt="lR5Ban.png"></li><li><strong>ä»£ç å¦‚ä¸‹</strong><br><strong>client.c</strong></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netinet/in.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;arpa/inet.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span>    MAXLINE        1024</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">usage</span><span class="params">(<span class="keyword">char</span> *command)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"usage :%s ipaddr portnum filename\n"</span>, command);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc,<span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span>     <span class="title">serv_addr</span>;</span></span><br><span class="line">    <span class="keyword">char</span>                   buf[MAXLINE];</span><br><span class="line">    <span class="keyword">int</span>                    sock_id;</span><br><span class="line">    <span class="keyword">int</span>                    read_len;</span><br><span class="line">    <span class="keyword">int</span>                    send_len;</span><br><span class="line">    FILE                   *fp;</span><br><span class="line">    <span class="keyword">int</span>                    i_ret;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">4</span>) &#123;</span><br><span class="line">        usage(argv[<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* open the file to be transported commented by guoqingbo*/</span></span><br><span class="line">    <span class="keyword">if</span> ((fp = fopen(argv[<span class="number">3</span>],<span class="string">"r"</span>)) == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        perror(<span class="string">"Open file failed\n"</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* create the socket commented by guoqingbo*/</span></span><br><span class="line">    <span class="keyword">if</span> ((sock_id = socket(AF_INET,SOCK_STREAM,<span class="number">0</span>)) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        perror(<span class="string">"Create socket failed\n"</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">memset</span>(&amp;serv_addr, <span class="number">0</span>, <span class="keyword">sizeof</span>(serv_addr));</span><br><span class="line">    serv_addr.sin_family = AF_INET;</span><br><span class="line">    serv_addr.sin_port = htons(atoi(argv[<span class="number">2</span>]));</span><br><span class="line">    inet_pton(AF_INET, argv[<span class="number">1</span>], &amp;serv_addr.sin_addr);</span><br><span class="line">   </span><br><span class="line">    <span class="comment">/* connect the server commented by guoqingbo*/</span></span><br><span class="line">    i_ret = connect(sock_id, (struct sockaddr *)&amp;serv_addr, <span class="keyword">sizeof</span>(struct sockaddr));</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">-1</span> == i_ret) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Connect socket failed\n"</span>);</span><br><span class="line">       <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* transported the file commented by guoqingbo*/</span></span><br><span class="line">    bzero(buf, MAXLINE);</span><br><span class="line">    <span class="keyword">while</span> ((read_len = fread(buf, <span class="keyword">sizeof</span>(<span class="keyword">char</span>), MAXLINE, fp)) &gt;<span class="number">0</span> ) &#123;</span><br><span class="line">        send_len = send(sock_id, buf, read_len, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span> ( send_len &lt; <span class="number">0</span> ) &#123;</span><br><span class="line">            perror(<span class="string">"Send file failed\n"</span>);</span><br><span class="line">            <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        bzero(buf, MAXLINE);</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line">    close(sock_id);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Send Finish\n"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>server.c</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netinet/in.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;arpa/inet.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span>    MAXLINE        1024</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">usage</span><span class="params">(<span class="keyword">char</span> *command)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"usage :%s portnum filename\n"</span>, command);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc,<span class="keyword">char</span> **argv)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span>     <span class="title">serv_addr</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span>     <span class="title">clie_addr</span>;</span></span><br><span class="line">    <span class="keyword">char</span>                   buf[MAXLINE];</span><br><span class="line">    <span class="keyword">int</span>                    sock_id;</span><br><span class="line">    <span class="keyword">int</span>                    link_id;</span><br><span class="line">    <span class="keyword">int</span>                    recv_len;</span><br><span class="line">    <span class="keyword">int</span>                    write_leng;</span><br><span class="line">    <span class="keyword">int</span>                    clie_addr_len;</span><br><span class="line">    FILE                   *fp;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">3</span>) &#123;</span><br><span class="line">        usage(argv[<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ((fp = fopen(argv[<span class="number">2</span>], <span class="string">"w"</span>)) == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        perror(<span class="string">"Open file failed\n"</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ((sock_id = socket(AF_INET, SOCK_STREAM, <span class="number">0</span>)) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        perror(<span class="string">"Create socket failed\n"</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*fill the server sockaddr_in struct commented by guoqingbo*/</span></span><br><span class="line">    <span class="built_in">memset</span>(&amp;serv_addr, <span class="number">0</span>, <span class="keyword">sizeof</span>(serv_addr));</span><br><span class="line">    serv_addr.sin_family = AF_INET;</span><br><span class="line">    serv_addr.sin_port = htons(atoi(argv[<span class="number">1</span>]));</span><br><span class="line">    serv_addr.sin_addr.s_addr = htonl(INADDR_ANY);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (bind(sock_id, (struct sockaddr *)&amp;serv_addr, <span class="keyword">sizeof</span>(serv_addr)) &lt; <span class="number">0</span> ) &#123;</span><br><span class="line">        perror(<span class="string">"Bind socket failed\n"</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (<span class="number">-1</span> == listen(sock_id, <span class="number">10</span>)) &#123;</span><br><span class="line">        perror(<span class="string">"Listen socket failed\n"</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* server part commented by guoqingbo*/</span></span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        clie_addr_len = <span class="keyword">sizeof</span>(clie_addr);</span><br><span class="line">        link_id = accept(sock_id, (struct sockaddr *)&amp;clie_addr, &amp;clie_addr_len);</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">-1</span> == link_id) &#123;</span><br><span class="line">            perror(<span class="string">"Accept socket failed\n"</span>);</span><br><span class="line">            <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        bzero(buf, MAXLINE);</span><br><span class="line">        <span class="keyword">while</span> (recv_len = recv(link_id, buf, MAXLINE, <span class="number">0</span>)) &#123;</span><br><span class="line">            <span class="comment">/* receiver data part commented by guoqingbo*/</span></span><br><span class="line">            <span class="keyword">if</span>(recv_len &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"Recieve Data From Server Failed!\n"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"#"</span>);</span><br><span class="line">            write_leng = fwrite(buf, <span class="keyword">sizeof</span>(<span class="keyword">char</span>), recv_len, fp);</span><br><span class="line">            <span class="keyword">if</span> (write_leng &lt; recv_len) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"Write file failed\n"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            bzero(buf,MAXLINE);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\nFinish Recieve\n"</span>);</span><br><span class="line">        fclose(fp);</span><br><span class="line">        close(link_id);</span><br><span class="line">    &#125;</span><br><span class="line">    close(sock_id); </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><ul><li><strong>æ³¨æ„äº‹é¡¹</strong><br>åœ¨ä½¿ç”¨å¼€å‘æ¿å‰ï¼Œåº”æ‰“å¼€tftpæœåŠ¡å™¨å’ŒnfsæœåŠ¡å™¨ã€‚<br>å¼€å‘æ¿å±äºçƒ­æ’æ‹”å™¨ä»¶ï¼Œåº”æ–­ç”µåæ’æ‹”ã€‚<br>åœ¨ä½¿ç”¨nfsç½‘ç»œæ–‡ä»¶ç³»ç»Ÿæ—¶ï¼Œåº”æ³¨æ„åœ¨ç¼–è¯‘å†…æ ¸çš„è¿‡ç¨‹ä¸­ï¼Œé€‰æ‹©nfsé€‰é¡¹ï¼Œä½¿å¾—åœ¨å†…æ ¸å¯åŠ¨è¿‡ç¨‹ä¸­å»åˆ›å»ºä¸€ä¸ªnfså®¢æˆ·ç«¯å»è¿æ¥æœåŠ¡ç«¯ è·å–æ–‡ä»¶ç³»ç»Ÿã€‚</li><li><strong>å¯èƒ½å‡ºç°çš„é—®é¢˜</strong><br>åœ¨å†…æ ¸å¯åŠ¨è¿‡ç¨‹ä¸­æ— æ³•åŠ åœ¨nfsæ–‡ä»¶ç³»ç»Ÿã€‚<br>åº”ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢å»æŸ¥é”™ï¼š<br>1.å†…æ ¸ç¼–è¯‘æ—¶æ˜¯å¦é€‰æ‹©nfsæ–‡ä»¶ç³»ç»Ÿé€‰é¡¹ã€‚<br>2.nfsæœåŠ¡å™¨æ˜¯å¦æ­å»ºå®Œæˆã€‚ï¼ˆéœ€è¦åšæœ¬æœºæŒ‚è½½æµ‹è¯•ï¼‰<br>3.ç½‘ç»œæ˜¯å¦é€šç•…ã€‚ï¼ˆping å‘½ä»¤æŸ¥çœ‹ï¼‰<br>4.nfså‚æ•°é…ç½®æ˜¯å¦æ­£ç¡®ã€‚</li><li><strong>æœ€ä¸¥é‡çš„é—®é¢˜</strong></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">VFS: Unable to mount root fs via NFS, trying floppy.</span><br><span class="line">VFS: Cannot open root device &quot;nfs&quot; or unknown-block(2,0): error -6</span><br><span class="line">Please append a correct &quot;root=&quot; boot option; here are the available partitions:</span><br><span class="line">1f00             256 mtdblock0  (driver?)</span><br><span class="line">1f01             128 mtdblock1  (driver?)</span><br><span class="line">1f02            2048 mtdblock2  (driver?)</span><br><span class="line">1f03          259712 mtdblock3  (driver?)</span><br><span class="line">Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(2,0)</span><br></pre></td></tr></table></figure><p>æŸ¥æ‰¾èµ„æ–™å‘ç°ä»Ubuntu17.04å¼€å§‹ï¼Œnfsé»˜è®¤åªæ”¯æŒåè®®3å’Œåè®®4ï¼Œè€Œkernelä¸­é»˜è®¤æ”¯æŒåè®®2ï¼Œæ‰€ä»¥æ‰ä¼šå‡ºç°æŒ‚è½½å¤±è´¥çš„æƒ…å†µï¼Œç°æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è§£å†³è¯¥é—®é¢˜ï¼š</p><ol><li>è®¾ç½®Ubuntu18.04ç³»ç»Ÿä¸­çš„nfsæœåŠ¡æ”¯æŒåè®®2ï¼Œä¿®æ”¹nfsé…ç½®æ–‡ä»¶ /etc/default/nfs-kernel-server,åœ¨æ–‡ä»¶æœ«å°¾åŠ å…¥ä¸€å¥ï¼šRPCNFSDOPTS=â€â€“nfs-version 2,3,4 â€“debug â€“syslogâ€ã€‚</li><li>å¦‚æœkernelç‰ˆæœ¬è¾ƒé«˜æ”¯æŒnfsåè®®3çš„è¯ï¼Œå¯ä»¥åœ¨Ubootä¼ åˆ°Kernelçš„bootargså‚æ•°ä¸­åŠ å…¥â€™nfsvers=3â€™,ä½¿kernelä½¿ç”¨nfsåè®®3ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ </category>
          
          <category> ç³»ç»Ÿç§»æ¤ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åµŒå…¥å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mysqlç¬”è®°æ•´ç†</title>
      <link href="/2019/11/26/mysql%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/"/>
      <url>/2019/11/26/mysql%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h3 id="WindowsæœåŠ¡"><a href="#WindowsæœåŠ¡" class="headerlink" title="WindowsæœåŠ¡"></a>WindowsæœåŠ¡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- å¯åŠ¨MySQL</span><br><span class="line">    net start mysql</span><br><span class="line">-- åˆ›å»ºWindowsæœåŠ¡</span><br><span class="line">    sc create mysql binPath = mysqld_bin_path(æ³¨æ„ï¼šç­‰å·ä¸å€¼ä¹‹é—´æœ‰ç©ºæ ¼)</span><br></pre></td></tr></table></figure><h3 id="è¿æ¥ä¸æ–­å¼€æœåŠ¡å™¨"><a href="#è¿æ¥ä¸æ–­å¼€æœåŠ¡å™¨" class="headerlink" title="è¿æ¥ä¸æ–­å¼€æœåŠ¡å™¨"></a>è¿æ¥ä¸æ–­å¼€æœåŠ¡å™¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql -h åœ°å€ -P ç«¯å£ -u ç”¨æˆ·å -p å¯†ç </span><br><span class="line"> </span><br><span class="line">SHOW PROCESSLIST -- æ˜¾ç¤ºå“ªäº›çº¿ç¨‹æ­£åœ¨è¿è¡Œ</span><br><span class="line">SHOW VARIABLES -- æ˜¾ç¤ºç³»ç»Ÿå˜é‡ä¿¡æ¯</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="æ•°æ®åº“æ“ä½œ"><a href="#æ•°æ®åº“æ“ä½œ" class="headerlink" title="æ•°æ®åº“æ“ä½œ"></a>æ•°æ®åº“æ“ä½œ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-- æŸ¥çœ‹å½“å‰æ•°æ®åº“</span><br><span class="line"> Â  Â SELECT DATABASE();</span><br><span class="line">-- æ˜¾ç¤ºå½“å‰æ—¶é—´ã€ç”¨æˆ·åã€æ•°æ®åº“ç‰ˆæœ¬</span><br><span class="line"> Â  Â SELECT now(), user(), version();</span><br><span class="line">-- åˆ›å»ºåº“</span><br><span class="line"> Â  Â CREATE DATABASE[ IF NOT EXISTS] æ•°æ®åº“å æ•°æ®åº“é€‰é¡¹</span><br><span class="line"> Â  Â æ•°æ®åº“é€‰é¡¹ï¼š</span><br><span class="line"> Â  Â  Â  Â CHARACTER SET charset_name</span><br><span class="line"> Â  Â  Â  Â COLLATE collation_name</span><br><span class="line">-- æŸ¥çœ‹å·²æœ‰åº“</span><br><span class="line"> Â  Â SHOW DATABASES[ LIKE &apos;PATTERN&apos;]</span><br><span class="line">-- æŸ¥çœ‹å½“å‰åº“ä¿¡æ¯</span><br><span class="line"> Â  Â SHOW CREATE DATABASE æ•°æ®åº“å</span><br><span class="line">-- ä¿®æ”¹åº“çš„é€‰é¡¹ä¿¡æ¯</span><br><span class="line"> Â  Â ALTER DATABASE åº“å é€‰é¡¹ä¿¡æ¯</span><br><span class="line">-- åˆ é™¤åº“</span><br><span class="line"> Â  Â DROP DATABASE[ IF EXISTS] æ•°æ®åº“å</span><br></pre></td></tr></table></figure><h3 id="è¡¨çš„æ“ä½œ"><a href="#è¡¨çš„æ“ä½œ" class="headerlink" title="è¡¨çš„æ“ä½œ"></a>è¡¨çš„æ“ä½œ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">-- åˆ›å»ºè¡¨</span><br><span class="line"> Â  Â CREATE [TEMPORARY] TABLE[ IF NOT EXISTS] [åº“å.]è¡¨å ( è¡¨çš„ç»“æ„å®šä¹‰ )[ è¡¨é€‰é¡¹]</span><br><span class="line"> Â  Â  Â  Â æ¯ä¸ªå­—æ®µå¿…é¡»æœ‰æ•°æ®ç±»å‹</span><br><span class="line"> Â  Â  Â  Â æœ€åä¸€ä¸ªå­—æ®µåä¸èƒ½æœ‰é€—å·</span><br><span class="line"> Â  Â  Â  Â TEMPORARY ä¸´æ—¶è¡¨ï¼Œä¼šè¯ç»“æŸæ—¶è¡¨è‡ªåŠ¨æ¶ˆå¤±</span><br><span class="line"> Â  Â  Â  Â å¯¹äºå­—æ®µçš„å®šä¹‰ï¼š</span><br><span class="line"> Â  Â  Â  Â  Â  Â å­—æ®µå æ•°æ®ç±»å‹ [NOT NULL | NULL] [DEFAULT default_value] [AUTO_INCREMENT] [UNIQUE [KEY] | [PRIMARY] KEY] [COMMENT &apos;string&apos;]</span><br><span class="line">-- è¡¨é€‰é¡¹</span><br><span class="line"> Â  Â -- å­—ç¬¦é›†</span><br><span class="line"> Â  Â  Â  Â CHARSET = charset_name</span><br><span class="line"> Â  Â  Â  Â å¦‚æœè¡¨æ²¡æœ‰è®¾å®šï¼Œåˆ™ä½¿ç”¨æ•°æ®åº“å­—ç¬¦é›†</span><br><span class="line"> Â  Â -- å­˜å‚¨å¼•æ“</span><br><span class="line"> Â  Â  Â  Â ENGINE = engine_name</span><br><span class="line"> Â  Â  Â  Â è¡¨åœ¨ç®¡ç†æ•°æ®æ—¶é‡‡ç”¨çš„ä¸åŒçš„æ•°æ®ç»“æ„ï¼Œç»“æ„ä¸åŒä¼šå¯¼è‡´å¤„ç†æ–¹å¼ã€æä¾›çš„ç‰¹æ€§æ“ä½œç­‰ä¸åŒ</span><br><span class="line"> Â  Â  Â  Â å¸¸è§çš„å¼•æ“ï¼šInnoDB MyISAM Memory/Heap BDB Merge Example CSV MaxDB Archive</span><br><span class="line"> Â  Â  Â  Â ä¸åŒçš„å¼•æ“åœ¨ä¿å­˜è¡¨çš„ç»“æ„å’Œæ•°æ®æ—¶é‡‡ç”¨ä¸åŒçš„æ–¹å¼</span><br><span class="line"> Â  Â  Â  Â MyISAMè¡¨æ–‡ä»¶å«ä¹‰ï¼š.frmè¡¨å®šä¹‰ï¼Œ.MYDè¡¨æ•°æ®ï¼Œ.MYIè¡¨ç´¢å¼•</span><br><span class="line"> Â  Â  Â  Â InnoDBè¡¨æ–‡ä»¶å«ä¹‰ï¼š.frmè¡¨å®šä¹‰ï¼Œè¡¨ç©ºé—´æ•°æ®å’Œæ—¥å¿—æ–‡ä»¶</span><br><span class="line"> Â  Â  Â  Â SHOW ENGINES -- æ˜¾ç¤ºå­˜å‚¨å¼•æ“çš„çŠ¶æ€ä¿¡æ¯</span><br><span class="line"> Â  Â  Â  Â SHOW ENGINE å¼•æ“å &#123;LOGS|STATUS&#125; -- æ˜¾ç¤ºå­˜å‚¨å¼•æ“çš„æ—¥å¿—æˆ–çŠ¶æ€ä¿¡æ¯</span><br><span class="line"> Â  Â -- è‡ªå¢èµ·å§‹æ•°</span><br><span class="line"> Â  Â  Â  Â AUTO_INCREMENT = è¡Œæ•°</span><br><span class="line"> Â  Â -- æ•°æ®æ–‡ä»¶ç›®å½•</span><br><span class="line"> Â  Â  Â  Â DATA DIRECTORY = &apos;ç›®å½•&apos;</span><br><span class="line"> Â  Â -- ç´¢å¼•æ–‡ä»¶ç›®å½•</span><br><span class="line"> Â  Â  Â  Â INDEX DIRECTORY = &apos;ç›®å½•&apos;</span><br><span class="line"> Â  Â -- è¡¨æ³¨é‡Š</span><br><span class="line"> Â  Â  Â  Â COMMENT = &apos;string&apos;</span><br><span class="line"> Â  Â -- åˆ†åŒºé€‰é¡¹</span><br><span class="line"> Â  Â  Â  Â PARTITION BY ... (è¯¦ç»†è§æ‰‹å†Œ)</span><br><span class="line">-- æŸ¥çœ‹æ‰€æœ‰è¡¨</span><br><span class="line"> Â  Â SHOW TABLES[ LIKE &apos;pattern&apos;]</span><br><span class="line"> Â  Â SHOW TABLES FROM è¡¨å</span><br><span class="line">-- æŸ¥çœ‹è¡¨æœºæ„</span><br><span class="line"> Â  Â SHOW CREATE TABLE è¡¨å ï¼ˆä¿¡æ¯æ›´è¯¦ç»†ï¼‰</span><br><span class="line"> Â  Â DESC è¡¨å / DESCRIBE è¡¨å / EXPLAIN è¡¨å / SHOW COLUMNS FROM è¡¨å [LIKE &apos;PATTERN&apos;]</span><br><span class="line"> Â  Â SHOW TABLE STATUS [FROM db_name] [LIKE &apos;pattern&apos;]</span><br><span class="line">-- ä¿®æ”¹è¡¨</span><br><span class="line"> Â  Â -- ä¿®æ”¹è¡¨æœ¬èº«çš„é€‰é¡¹</span><br><span class="line"> Â  Â  Â  Â ALTER TABLE è¡¨å è¡¨çš„é€‰é¡¹</span><br><span class="line"> Â  Â  Â  Â eg: ALTER TABLE è¡¨å ENGINE=MYISAM;</span><br><span class="line"> Â  Â -- å¯¹è¡¨è¿›è¡Œé‡å‘½å</span><br><span class="line"> Â  Â  Â  Â RENAME TABLE åŸè¡¨å TO æ–°è¡¨å</span><br><span class="line"> Â  Â  Â  Â RENAME TABLE åŸè¡¨å TO åº“å.è¡¨å ï¼ˆå¯å°†è¡¨ç§»åŠ¨åˆ°å¦ä¸€ä¸ªæ•°æ®åº“ï¼‰</span><br><span class="line"> Â  Â  Â  Â -- RENAMEå¯ä»¥äº¤æ¢ä¸¤ä¸ªè¡¨å</span><br><span class="line"> Â  Â -- ä¿®æ”¹è¡¨çš„å­—æ®µæœºæ„ï¼ˆ13.1.2. ALTER TABLEè¯­æ³•ï¼‰</span><br><span class="line"> Â  Â  Â  Â ALTER TABLE è¡¨å æ“ä½œå</span><br><span class="line"> Â  Â  Â  Â -- æ“ä½œå</span><br><span class="line"> Â  Â  Â  Â  Â  Â ADD[ COLUMN] å­—æ®µå®šä¹‰ Â  Â  Â  -- å¢åŠ å­—æ®µ</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â AFTER å­—æ®µå Â  Â  Â  Â  Â -- è¡¨ç¤ºå¢åŠ åœ¨è¯¥å­—æ®µååé¢</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â FIRST Â  Â  Â  Â  Â  Â  Â  -- è¡¨ç¤ºå¢åŠ åœ¨ç¬¬ä¸€ä¸ª</span><br><span class="line"> Â  Â  Â  Â  Â  Â ADD PRIMARY KEY(å­—æ®µå) Â  -- åˆ›å»ºä¸»é”®</span><br><span class="line"> Â  Â  Â  Â  Â  Â ADD UNIQUE [ç´¢å¼•å] (å­—æ®µå)-- åˆ›å»ºå”¯ä¸€ç´¢å¼•</span><br><span class="line"> Â  Â  Â  Â  Â  Â ADD INDEX [ç´¢å¼•å] (å­—æ®µå) -- åˆ›å»ºæ™®é€šç´¢å¼•</span><br><span class="line"> Â  Â  Â  Â  Â  Â DROP[ COLUMN] å­—æ®µå Â  Â  Â -- åˆ é™¤å­—æ®µ</span><br><span class="line"> Â  Â  Â  Â  Â  Â MODIFY[ COLUMN] å­—æ®µå å­—æ®µå±æ€§ Â  Â  -- æ”¯æŒå¯¹å­—æ®µå±æ€§è¿›è¡Œä¿®æ”¹ï¼Œä¸èƒ½ä¿®æ”¹å­—æ®µå(æ‰€æœ‰åŸæœ‰å±æ€§ä¹Ÿéœ€å†™ä¸Š)</span><br><span class="line"> Â  Â  Â  Â  Â  Â CHANGE[ COLUMN] åŸå­—æ®µå æ–°å­—æ®µå å­—æ®µå±æ€§ Â  Â  Â -- æ”¯æŒå¯¹å­—æ®µåä¿®æ”¹</span><br><span class="line"> Â  Â  Â  Â  Â  Â DROP PRIMARY KEY Â  Â -- åˆ é™¤ä¸»é”®(åˆ é™¤ä¸»é”®å‰éœ€åˆ é™¤å…¶AUTO_INCREMENTå±æ€§)</span><br><span class="line"> Â  Â  Â  Â  Â  Â DROP INDEX ç´¢å¼•å -- åˆ é™¤ç´¢å¼•</span><br><span class="line"> Â  Â  Â  Â  Â  Â DROP FOREIGN KEY å¤–é”® Â  Â -- åˆ é™¤å¤–é”®</span><br><span class="line">-- åˆ é™¤è¡¨</span><br><span class="line"> Â  Â DROP TABLE[ IF EXISTS] è¡¨å ...</span><br><span class="line">-- æ¸…ç©ºè¡¨æ•°æ®</span><br><span class="line"> Â  Â TRUNCATE [TABLE] è¡¨å</span><br><span class="line">-- å¤åˆ¶è¡¨ç»“æ„</span><br><span class="line"> Â  Â CREATE TABLE è¡¨å LIKE è¦å¤åˆ¶çš„è¡¨å</span><br><span class="line">-- å¤åˆ¶è¡¨ç»“æ„å’Œæ•°æ®</span><br><span class="line"> Â  Â CREATE TABLE è¡¨å [AS] SELECT * FROM è¦å¤åˆ¶çš„è¡¨å</span><br><span class="line">-- æ£€æŸ¥è¡¨æ˜¯å¦æœ‰é”™è¯¯</span><br><span class="line"> Â  Â CHECK TABLE tbl_name [, tbl_name] ... [option] ...</span><br><span class="line">-- ä¼˜åŒ–è¡¨</span><br><span class="line"> Â  Â OPTIMIZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name [, tbl_name] ...</span><br><span class="line">-- ä¿®å¤è¡¨</span><br><span class="line"> Â  Â REPAIR [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name [, tbl_name] ... [QUICK] [EXTENDED] [USE_FRM]</span><br><span class="line">-- åˆ†æè¡¨</span><br><span class="line"> Â  Â ANALYZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name [, tbl_name] ...</span><br></pre></td></tr></table></figure><h3 id="æ•°æ®æ“ä½œ"><a href="#æ•°æ®æ“ä½œ" class="headerlink" title="æ•°æ®æ“ä½œ"></a>æ•°æ®æ“ä½œ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-- å¢</span><br><span class="line"> Â  Â INSERT [INTO] è¡¨å [(å­—æ®µåˆ—è¡¨)] VALUES (å€¼åˆ—è¡¨)[, (å€¼åˆ—è¡¨), ...]</span><br><span class="line"> Â  Â  Â  Â -- å¦‚æœè¦æ’å…¥çš„å€¼åˆ—è¡¨åŒ…å«æ‰€æœ‰å­—æ®µå¹¶ä¸”é¡ºåºä¸€è‡´ï¼Œåˆ™å¯ä»¥çœç•¥å­—æ®µåˆ—è¡¨ã€‚</span><br><span class="line"> Â  Â  Â  Â -- å¯åŒæ—¶æ’å…¥å¤šæ¡æ•°æ®è®°å½•ï¼</span><br><span class="line"> Â  Â  Â  Â REPLACE ä¸ INSERT å®Œå…¨ä¸€æ ·ï¼Œå¯äº’æ¢ã€‚</span><br><span class="line"> Â  Â INSERT [INTO] è¡¨å SET å­—æ®µå=å€¼[, å­—æ®µå=å€¼, ...]</span><br><span class="line">-- æŸ¥</span><br><span class="line"> Â  Â SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å[ å…¶ä»–å­å¥]</span><br><span class="line"> Â  Â  Â  Â -- å¯æ¥è‡ªå¤šä¸ªè¡¨çš„å¤šä¸ªå­—æ®µ</span><br><span class="line"> Â  Â  Â  Â -- å…¶ä»–å­å¥å¯ä»¥ä¸ä½¿ç”¨</span><br><span class="line"> Â  Â  Â  Â -- å­—æ®µåˆ—è¡¨å¯ä»¥ç”¨*ä»£æ›¿ï¼Œè¡¨ç¤ºæ‰€æœ‰å­—æ®µ</span><br><span class="line">-- åˆ </span><br><span class="line"> Â  Â DELETE FROM è¡¨å[ åˆ é™¤æ¡ä»¶å­å¥]</span><br><span class="line"> Â  Â  Â  Â æ²¡æœ‰æ¡ä»¶å­å¥ï¼Œåˆ™ä¼šåˆ é™¤å…¨éƒ¨</span><br><span class="line">-- æ”¹</span><br><span class="line"> Â  Â UPDATE è¡¨å SET å­—æ®µå=æ–°å€¼[, å­—æ®µå=æ–°å€¼] [æ›´æ–°æ¡ä»¶]</span><br></pre></td></tr></table></figure><h3 id="å­—ç¬¦é›†ç¼–ç "><a href="#å­—ç¬¦é›†ç¼–ç " class="headerlink" title="å­—ç¬¦é›†ç¼–ç "></a>å­—ç¬¦é›†ç¼–ç </h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-- MySQLã€æ•°æ®åº“ã€è¡¨ã€å­—æ®µå‡å¯è®¾ç½®ç¼–ç </span><br><span class="line">-- æ•°æ®ç¼–ç ä¸å®¢æˆ·ç«¯ç¼–ç ä¸éœ€ä¸€è‡´</span><br><span class="line">SHOW VARIABLES LIKE &apos;character_set_%&apos; Â  -- æŸ¥çœ‹æ‰€æœ‰å­—ç¬¦é›†ç¼–ç é¡¹</span><br><span class="line"> Â  Â character_set_client Â  Â  Â  Â å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€æ•°æ®æ—¶ä½¿ç”¨çš„ç¼–ç </span><br><span class="line"> Â  Â character_set_results Â  Â  Â  æœåŠ¡å™¨ç«¯å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯æ‰€ä½¿ç”¨çš„ç¼–ç </span><br><span class="line"> Â  Â character_set_connection Â  Â è¿æ¥å±‚ç¼–ç </span><br><span class="line">SET å˜é‡å = å˜é‡å€¼</span><br><span class="line"> Â  Â SET character_set_client = gbk;</span><br><span class="line"> Â  Â SET character_set_results = gbk;</span><br><span class="line"> Â  Â SET character_set_connection = gbk;</span><br><span class="line">SET NAMES GBK; Â -- ç›¸å½“äºå®Œæˆä»¥ä¸Šä¸‰ä¸ªè®¾ç½®</span><br><span class="line">-- æ ¡å¯¹é›†</span><br><span class="line"> Â  Â æ ¡å¯¹é›†ç”¨ä»¥æ’åº</span><br><span class="line"> Â  Â SHOW CHARACTER SET [LIKE &apos;pattern&apos;]/SHOW CHARSET [LIKE &apos;pattern&apos;] Â  æŸ¥çœ‹æ‰€æœ‰å­—ç¬¦é›†</span><br><span class="line"> Â  Â SHOW COLLATION [LIKE &apos;pattern&apos;] Â  Â  æŸ¥çœ‹æ‰€æœ‰æ ¡å¯¹é›†</span><br><span class="line"> Â  Â CHARSET å­—ç¬¦é›†ç¼–ç  Â  Â  è®¾ç½®å­—ç¬¦é›†ç¼–ç </span><br><span class="line"> Â  Â COLLATE æ ¡å¯¹é›†ç¼–ç  Â  Â  è®¾ç½®æ ¡å¯¹é›†ç¼–ç </span><br></pre></td></tr></table></figure><h3 id="æ•°æ®ç±»å‹ï¼ˆåˆ—ç±»å‹ï¼‰"><a href="#æ•°æ®ç±»å‹ï¼ˆåˆ—ç±»å‹ï¼‰" class="headerlink" title="æ•°æ®ç±»å‹ï¼ˆåˆ—ç±»å‹ï¼‰"></a>æ•°æ®ç±»å‹ï¼ˆåˆ—ç±»å‹ï¼‰</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line">1. æ•°å€¼ç±»å‹</span><br><span class="line"> </span><br><span class="line">-- a. æ•´å‹ ----------</span><br><span class="line"> Â  Â ç±»å‹ Â  Â  Â  Â  å­—èŠ‚ Â  Â  èŒƒå›´ï¼ˆæœ‰ç¬¦å·ä½ï¼‰</span><br><span class="line"> Â  Â tinyint Â  Â  1å­—èŠ‚ Â  Â -128 ~ 127 Â  Â  Â æ— ç¬¦å·ä½ï¼š0 ~ 255</span><br><span class="line"> Â  Â smallint Â  Â 2å­—èŠ‚ Â  Â -32768 ~ 32767</span><br><span class="line"> Â  Â mediumint Â  3å­—èŠ‚ Â  Â -8388608 ~ 8388607</span><br><span class="line"> Â  Â int Â  Â  Â  Â  4å­—èŠ‚</span><br><span class="line"> Â  Â bigint Â  Â  Â 8å­—èŠ‚</span><br><span class="line"> Â  Â int(M) Â Mè¡¨ç¤ºæ€»ä½æ•°</span><br><span class="line"> Â  Â - é»˜è®¤å­˜åœ¨ç¬¦å·ä½ï¼Œunsigned å±æ€§ä¿®æ”¹</span><br><span class="line"> Â  Â - æ˜¾ç¤ºå®½åº¦ï¼Œå¦‚æœæŸä¸ªæ•°ä¸å¤Ÿå®šä¹‰å­—æ®µæ—¶è®¾ç½®çš„ä½æ•°ï¼Œåˆ™å‰é¢ä»¥0è¡¥å¡«ï¼Œzerofill å±æ€§ä¿®æ”¹</span><br><span class="line"> Â  Â  Â  Â ä¾‹ï¼šint(5) Â  æ’å…¥ä¸€ä¸ªæ•°&apos;123&apos;ï¼Œè¡¥å¡«åä¸º&apos;00123&apos;</span><br><span class="line"> Â  Â - åœ¨æ»¡è¶³è¦æ±‚çš„æƒ…å†µä¸‹ï¼Œè¶Šå°è¶Šå¥½ã€‚</span><br><span class="line"> Â  Â - 1è¡¨ç¤ºboolå€¼çœŸï¼Œ0è¡¨ç¤ºboolå€¼å‡ã€‚MySQLæ²¡æœ‰å¸ƒå°”ç±»å‹ï¼Œé€šè¿‡æ•´å‹0å’Œ1è¡¨ç¤ºã€‚å¸¸ç”¨tinyint(1)è¡¨ç¤ºå¸ƒå°”å‹ã€‚</span><br><span class="line"> </span><br><span class="line">-- b. æµ®ç‚¹å‹ ----------</span><br><span class="line"> Â  Â ç±»å‹ Â  Â  Â  Â  Â  Â  å­—èŠ‚ Â  Â  èŒƒå›´</span><br><span class="line"> Â  Â float(å•ç²¾åº¦) Â  Â  4å­—èŠ‚</span><br><span class="line"> Â  Â double(åŒç²¾åº¦) Â  Â 8å­—èŠ‚</span><br><span class="line"> Â  Â æµ®ç‚¹å‹æ—¢æ”¯æŒç¬¦å·ä½ unsigned å±æ€§ï¼Œä¹Ÿæ”¯æŒæ˜¾ç¤ºå®½åº¦ zerofill å±æ€§ã€‚</span><br><span class="line"> Â  Â  Â  Â ä¸åŒäºæ•´å‹ï¼Œå‰åå‡ä¼šè¡¥å¡«0.</span><br><span class="line"> Â  Â å®šä¹‰æµ®ç‚¹å‹æ—¶ï¼Œéœ€æŒ‡å®šæ€»ä½æ•°å’Œå°æ•°ä½æ•°ã€‚</span><br><span class="line"> Â  Â  Â  Â float(M, D) Â  Â  double(M, D)</span><br><span class="line"> Â  Â  Â  Â Mè¡¨ç¤ºæ€»ä½æ•°ï¼ŒDè¡¨ç¤ºå°æ•°ä½æ•°ã€‚</span><br><span class="line"> Â  Â  Â  Â Må’ŒDçš„å¤§å°ä¼šå†³å®šæµ®ç‚¹æ•°çš„èŒƒå›´ã€‚ä¸åŒäºæ•´å‹çš„å›ºå®šèŒƒå›´ã€‚</span><br><span class="line"> Â  Â  Â  Â Mæ—¢è¡¨ç¤ºæ€»ä½æ•°ï¼ˆä¸åŒ…æ‹¬å°æ•°ç‚¹å’Œæ­£è´Ÿå·ï¼‰ï¼Œä¹Ÿè¡¨ç¤ºæ˜¾ç¤ºå®½åº¦ï¼ˆæ‰€æœ‰æ˜¾ç¤ºç¬¦å·å‡åŒ…æ‹¬ï¼‰ã€‚</span><br><span class="line"> Â  Â  Â  Â æ”¯æŒç§‘å­¦è®¡æ•°æ³•è¡¨ç¤ºã€‚</span><br><span class="line"> Â  Â  Â  Â æµ®ç‚¹æ•°è¡¨ç¤ºè¿‘ä¼¼å€¼ã€‚</span><br><span class="line"> </span><br><span class="line">-- c. å®šç‚¹æ•° ----------</span><br><span class="line"> Â  Â decimal -- å¯å˜é•¿åº¦</span><br><span class="line"> Â  Â decimal(M, D) Â  Mä¹Ÿè¡¨ç¤ºæ€»ä½æ•°ï¼ŒDè¡¨ç¤ºå°æ•°ä½æ•°ã€‚</span><br><span class="line"> Â  Â ä¿å­˜ä¸€ä¸ªç²¾ç¡®çš„æ•°å€¼ï¼Œä¸ä¼šå‘ç”Ÿæ•°æ®çš„æ”¹å˜ï¼Œä¸åŒäºæµ®ç‚¹æ•°çš„å››èˆäº”å…¥ã€‚</span><br><span class="line"> Â  Â å°†æµ®ç‚¹æ•°è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ¥ä¿å­˜ï¼Œæ¯9ä½æ•°å­—ä¿å­˜ä¸º4ä¸ªå­—èŠ‚ã€‚</span><br><span class="line"> </span><br><span class="line">2. å­—ç¬¦ä¸²ç±»å‹</span><br><span class="line"> </span><br><span class="line">-- a. char, varchar ----------</span><br><span class="line"> Â  Â char Â  Â å®šé•¿å­—ç¬¦ä¸²ï¼Œé€Ÿåº¦å¿«ï¼Œä½†æµªè´¹ç©ºé—´</span><br><span class="line"> Â  Â varchar å˜é•¿å­—ç¬¦ä¸²ï¼Œé€Ÿåº¦æ…¢ï¼Œä½†èŠ‚çœç©ºé—´</span><br><span class="line"> Â  Â Mè¡¨ç¤ºèƒ½å­˜å‚¨çš„æœ€å¤§é•¿åº¦ï¼Œæ­¤é•¿åº¦æ˜¯å­—ç¬¦æ•°ï¼Œéå­—èŠ‚æ•°ã€‚</span><br><span class="line"> Â  Â ä¸åŒçš„ç¼–ç ï¼Œæ‰€å ç”¨çš„ç©ºé—´ä¸åŒã€‚</span><br><span class="line"> Â  Â char,æœ€å¤š255ä¸ªå­—ç¬¦ï¼Œä¸ç¼–ç æ— å…³ã€‚</span><br><span class="line"> Â  Â varchar,æœ€å¤š65535å­—ç¬¦ï¼Œä¸ç¼–ç æœ‰å…³ã€‚</span><br><span class="line"> Â  Â ä¸€æ¡æœ‰æ•ˆè®°å½•æœ€å¤§ä¸èƒ½è¶…è¿‡65535ä¸ªå­—èŠ‚ã€‚</span><br><span class="line"> Â  Â  Â  Â utf8 æœ€å¤§ä¸º21844ä¸ªå­—ç¬¦ï¼Œgbk æœ€å¤§ä¸º32766ä¸ªå­—ç¬¦ï¼Œlatin1 æœ€å¤§ä¸º65532ä¸ªå­—ç¬¦</span><br><span class="line"> Â  Â varchar æ˜¯å˜é•¿çš„ï¼Œéœ€è¦åˆ©ç”¨å­˜å‚¨ç©ºé—´ä¿å­˜ varchar çš„é•¿åº¦ï¼Œå¦‚æœæ•°æ®å°äº255ä¸ªå­—èŠ‚ï¼Œåˆ™é‡‡ç”¨ä¸€ä¸ªå­—èŠ‚æ¥ä¿å­˜é•¿åº¦ï¼Œåä¹‹éœ€è¦ä¸¤ä¸ªå­—èŠ‚æ¥ä¿å­˜ã€‚</span><br><span class="line"> Â  Â varchar çš„æœ€å¤§æœ‰æ•ˆé•¿åº¦ç”±æœ€å¤§è¡Œå¤§å°å’Œä½¿ç”¨çš„å­—ç¬¦é›†ç¡®å®šã€‚</span><br><span class="line"> Â  Â æœ€å¤§æœ‰æ•ˆé•¿åº¦æ˜¯65532å­—èŠ‚ï¼Œå› ä¸ºåœ¨varcharå­˜å­—ç¬¦ä¸²æ—¶ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚æ˜¯ç©ºçš„ï¼Œä¸å­˜åœ¨ä»»ä½•æ•°æ®ï¼Œç„¶åè¿˜éœ€ä¸¤ä¸ªå­—èŠ‚æ¥å­˜æ”¾å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œæ‰€ä»¥æœ‰æ•ˆé•¿åº¦æ˜¯64432-1-2=65532å­—èŠ‚ã€‚</span><br><span class="line"> Â  Â ä¾‹ï¼šè‹¥ä¸€ä¸ªè¡¨å®šä¹‰ä¸º CREATE TABLE tb(c1 int, c2 char(30), c3 varchar(N)) charset=utf8; é—®Nçš„æœ€å¤§å€¼æ˜¯å¤šå°‘ï¼Ÿ ç­”ï¼š(65535-1-2-4-30*3)/3</span><br><span class="line"> </span><br><span class="line">-- b. blob, text ----------</span><br><span class="line"> Â  Â blob äºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼ˆå­—èŠ‚å­—ç¬¦ä¸²ï¼‰</span><br><span class="line"> Â  Â  Â  Â tinyblob, blob, mediumblob, longblob</span><br><span class="line"> Â  Â text éäºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼ˆå­—ç¬¦å­—ç¬¦ä¸²ï¼‰</span><br><span class="line"> Â  Â  Â  Â tinytext, text, mediumtext, longtext</span><br><span class="line"> Â  Â text åœ¨å®šä¹‰æ—¶ï¼Œä¸éœ€è¦å®šä¹‰é•¿åº¦ï¼Œä¹Ÿä¸ä¼šè®¡ç®—æ€»é•¿åº¦ã€‚</span><br><span class="line"> Â  Â text ç±»å‹åœ¨å®šä¹‰æ—¶ï¼Œä¸å¯ç»™defaultå€¼</span><br><span class="line"> </span><br><span class="line">-- c. binary, varbinary ----------</span><br><span class="line"> Â  Â ç±»ä¼¼äºcharå’Œvarcharï¼Œç”¨äºä¿å­˜äºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯ä¿å­˜å­—èŠ‚å­—ç¬¦ä¸²è€Œéå­—ç¬¦å­—ç¬¦ä¸²ã€‚</span><br><span class="line"> Â  Â char, varchar, text å¯¹åº” binary, varbinary, blob.</span><br><span class="line"> </span><br><span class="line">3. æ—¥æœŸæ—¶é—´ç±»å‹</span><br><span class="line"> Â  Â ä¸€èˆ¬ç”¨æ•´å‹ä¿å­˜æ—¶é—´æˆ³ï¼Œå› ä¸ºPHPå¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†æ—¶é—´æˆ³è¿›è¡Œæ ¼å¼åŒ–ã€‚</span><br><span class="line"> Â  Â datetime Â  Â 8å­—èŠ‚ Â  Â æ—¥æœŸåŠæ—¶é—´ Â  Â  1000-01-01 00:00:00 åˆ° 9999-12-31 23:59:59</span><br><span class="line"> Â  Â date Â  Â  Â  Â 3å­—èŠ‚ Â  Â æ—¥æœŸ Â  Â  Â  Â  1000-01-01 åˆ° 9999-12-31</span><br><span class="line"> Â  Â timestamp Â  4å­—èŠ‚ Â  Â æ—¶é—´æˆ³ Â  Â  Â  Â 19700101000000 åˆ° 2038-01-19 03:14:07</span><br><span class="line"> Â  Â time Â  Â  Â  Â 3å­—èŠ‚ Â  Â æ—¶é—´ Â  Â  Â  Â  -838:59:59 åˆ° 838:59:59</span><br><span class="line"> Â  Â year Â  Â  Â  Â 1å­—èŠ‚ Â  Â å¹´ä»½ Â  Â  Â  Â  1901 - 2155</span><br><span class="line">datetime Â  Â YYYY-MM-DD hh:mm:ss</span><br><span class="line">timestamp Â  YY-MM-DD hh:mm:ss</span><br><span class="line"> Â  Â  Â  Â  Â  Â YYYYMMDDhhmmss</span><br><span class="line"> Â  Â  Â  Â  Â  Â YYMMDDhhmmss</span><br><span class="line"> Â  Â  Â  Â  Â  Â YYYYMMDDhhmmss</span><br><span class="line"> Â  Â  Â  Â  Â  Â YYMMDDhhmmss</span><br><span class="line">date Â  Â  Â  Â YYYY-MM-DD</span><br><span class="line"> Â  Â  Â  Â  Â  Â YY-MM-DD</span><br><span class="line"> Â  Â  Â  Â  Â  Â YYYYMMDD</span><br><span class="line"> Â  Â  Â  Â  Â  Â YYMMDD</span><br><span class="line"> Â  Â  Â  Â  Â  Â YYYYMMDD</span><br><span class="line"> Â  Â  Â  Â  Â  Â YYMMDD</span><br><span class="line">time Â  Â  Â  Â hh:mm:ss</span><br><span class="line"> Â  Â  Â  Â  Â  Â hhmmss</span><br><span class="line"> Â  Â  Â  Â  Â  Â hhmmss</span><br><span class="line">year Â  Â  Â  Â YYYY</span><br><span class="line"> Â  Â  Â  Â  Â  Â YY</span><br><span class="line"> Â  Â  Â  Â  Â  Â YYYY</span><br><span class="line"> Â  Â  Â  Â  Â  Â YY</span><br><span class="line"> </span><br><span class="line">4. æšä¸¾å’Œé›†åˆ</span><br><span class="line"> </span><br><span class="line">-- æšä¸¾(enum) ----------</span><br><span class="line">enum(val1, val2, val3...)</span><br><span class="line"> Â  Â åœ¨å·²çŸ¥çš„å€¼ä¸­è¿›è¡Œå•é€‰ã€‚æœ€å¤§æ•°é‡ä¸º65535.</span><br><span class="line"> Â  Â æšä¸¾å€¼åœ¨ä¿å­˜æ—¶ï¼Œä»¥2ä¸ªå­—èŠ‚çš„æ•´å‹(smallint)ä¿å­˜ã€‚æ¯ä¸ªæšä¸¾å€¼ï¼ŒæŒ‰ä¿å­˜çš„ä½ç½®é¡ºåºï¼Œä»1å¼€å§‹é€ä¸€é€’å¢ã€‚</span><br><span class="line"> Â  Â è¡¨ç°ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼Œå­˜å‚¨å´æ˜¯æ•´å‹ã€‚</span><br><span class="line"> Â  Â NULLå€¼çš„ç´¢å¼•æ˜¯NULLã€‚</span><br><span class="line"> Â  Â ç©ºå­—ç¬¦ä¸²é”™è¯¯å€¼çš„ç´¢å¼•å€¼æ˜¯0ã€‚</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">-- é›†åˆï¼ˆsetï¼‰ ----------</span><br><span class="line">set(val1, val2, val3...)</span><br><span class="line"> Â  Â create table tab ( gender set(&apos;ç”·&apos;, &apos;å¥³&apos;, &apos;æ— &apos;) );</span><br><span class="line"> Â  Â insert into tab values (&apos;ç”·, å¥³&apos;);</span><br><span class="line"> Â  Â æœ€å¤šå¯ä»¥æœ‰64ä¸ªä¸åŒçš„æˆå‘˜ã€‚ä»¥bigintå­˜å‚¨ï¼Œå…±8ä¸ªå­—èŠ‚ã€‚é‡‡å–ä½è¿ç®—çš„å½¢å¼ã€‚</span><br><span class="line"> Â  Â å½“åˆ›å»ºè¡¨æ—¶ï¼ŒSETæˆå‘˜å€¼çš„å°¾éƒ¨ç©ºæ ¼å°†è‡ªåŠ¨è¢«åˆ é™¤ã€‚</span><br></pre></td></tr></table></figure><h3 id="é€‰æ‹©ç±»å‹"><a href="#é€‰æ‹©ç±»å‹" class="headerlink" title="é€‰æ‹©ç±»å‹"></a>é€‰æ‹©ç±»å‹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-- PHPè§’åº¦</span><br><span class="line">1. åŠŸèƒ½æ»¡è¶³</span><br><span class="line">2. å­˜å‚¨ç©ºé—´å°½é‡å°ï¼Œå¤„ç†æ•ˆç‡æ›´é«˜</span><br><span class="line">3. è€ƒè™‘å…¼å®¹é—®é¢˜</span><br><span class="line"> </span><br><span class="line">-- IPå­˜å‚¨ ----------</span><br><span class="line">1. åªéœ€å­˜å‚¨ï¼Œå¯ç”¨å­—ç¬¦ä¸²</span><br><span class="line">2. å¦‚æœéœ€è®¡ç®—ï¼ŒæŸ¥æ‰¾ç­‰ï¼Œå¯å­˜å‚¨ä¸º4ä¸ªå­—èŠ‚çš„æ— ç¬¦å·intï¼Œå³unsigned</span><br><span class="line"> Â  Â 1) PHPå‡½æ•°è½¬æ¢</span><br><span class="line"> Â  Â  Â  Â ip2longå¯è½¬æ¢ä¸ºæ•´å‹ï¼Œä½†ä¼šå‡ºç°æºå¸¦ç¬¦å·é—®é¢˜ã€‚éœ€æ ¼å¼åŒ–ä¸ºæ— ç¬¦å·çš„æ•´å‹ã€‚</span><br><span class="line"> Â  Â  Â  Â åˆ©ç”¨sprintfå‡½æ•°æ ¼å¼åŒ–å­—ç¬¦ä¸²</span><br><span class="line"> Â  Â  Â  Â sprintf(&quot;%u&quot;, ip2long(&apos;192.168.3.134&apos;));</span><br><span class="line"> Â  Â  Â  Â ç„¶åç”¨long2ipå°†æ•´å‹è½¬å›IPå­—ç¬¦ä¸²</span><br><span class="line"> Â  Â 2) MySQLå‡½æ•°è½¬æ¢(æ— ç¬¦å·æ•´å‹ï¼ŒUNSIGNED)</span><br><span class="line"> Â  Â  Â  Â INET_ATON(&apos;127.0.0.1&apos;) å°†IPè½¬ä¸ºæ•´å‹</span><br><span class="line"> Â  Â  Â  Â INET_NTOA(2130706433) å°†æ•´å‹è½¬ä¸ºIP</span><br></pre></td></tr></table></figure><h3 id="åˆ—å±æ€§ï¼ˆåˆ—çº¦æŸï¼‰"><a href="#åˆ—å±æ€§ï¼ˆåˆ—çº¦æŸï¼‰" class="headerlink" title="åˆ—å±æ€§ï¼ˆåˆ—çº¦æŸï¼‰"></a>åˆ—å±æ€§ï¼ˆåˆ—çº¦æŸï¼‰</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">1. PRIMARY ä¸»é”®</span><br><span class="line"> Â  Â - èƒ½å”¯ä¸€æ ‡è¯†è®°å½•çš„å­—æ®µï¼Œå¯ä»¥ä½œä¸ºä¸»é”®ã€‚</span><br><span class="line"> Â  Â - ä¸€ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ã€‚</span><br><span class="line"> Â  Â - ä¸»é”®å…·æœ‰å”¯ä¸€æ€§ã€‚</span><br><span class="line"> Â  Â - å£°æ˜å­—æ®µæ—¶ï¼Œç”¨ primary key æ ‡è¯†ã€‚</span><br><span class="line"> Â  Â  Â  Â ä¹Ÿå¯ä»¥åœ¨å­—æ®µåˆ—è¡¨ä¹‹åå£°æ˜</span><br><span class="line"> Â  Â  Â  Â  Â  Â ä¾‹ï¼šcreate table tab ( id int, stu varchar(10), primary key (id));</span><br><span class="line"> Â  Â - ä¸»é”®å­—æ®µçš„å€¼ä¸èƒ½ä¸ºnullã€‚</span><br><span class="line"> Â  Â - ä¸»é”®å¯ä»¥ç”±å¤šä¸ªå­—æ®µå…±åŒç»„æˆã€‚æ­¤æ—¶éœ€è¦åœ¨å­—æ®µåˆ—è¡¨åå£°æ˜çš„æ–¹æ³•ã€‚</span><br><span class="line"> Â  Â  Â  Â ä¾‹ï¼šcreate table tab ( id int, stu varchar(10), age int, primary key (stu, age));</span><br><span class="line">2. UNIQUE å”¯ä¸€ç´¢å¼•ï¼ˆå”¯ä¸€çº¦æŸï¼‰</span><br><span class="line"> Â  Â ä½¿å¾—æŸå­—æ®µçš„å€¼ä¹Ÿä¸èƒ½é‡å¤ã€‚</span><br><span class="line">3. NULL çº¦æŸ</span><br><span class="line"> Â  Â nullä¸æ˜¯æ•°æ®ç±»å‹ï¼Œæ˜¯åˆ—çš„ä¸€ä¸ªå±æ€§ã€‚</span><br><span class="line"> Â  Â è¡¨ç¤ºå½“å‰åˆ—æ˜¯å¦å¯ä»¥ä¸ºnullï¼Œè¡¨ç¤ºä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚</span><br><span class="line"> Â  Â null, å…è®¸ä¸ºç©ºã€‚é»˜è®¤ã€‚</span><br><span class="line"> Â  Â not null, ä¸å…è®¸ä¸ºç©ºã€‚</span><br><span class="line"> Â  Â insert into tab values (null, &apos;val&apos;);</span><br><span class="line"> Â  Â  Â  Â -- æ­¤æ—¶è¡¨ç¤ºå°†ç¬¬ä¸€ä¸ªå­—æ®µçš„å€¼è®¾ä¸ºnull, å–å†³äºè¯¥å­—æ®µæ˜¯å¦å…è®¸ä¸ºnull</span><br><span class="line">4. DEFAULT é»˜è®¤å€¼å±æ€§</span><br><span class="line"> Â  Â å½“å‰å­—æ®µçš„é»˜è®¤å€¼ã€‚</span><br><span class="line"> Â  Â insert into tab values (default, &apos;val&apos;); Â  Â -- æ­¤æ—¶è¡¨ç¤ºå¼ºåˆ¶ä½¿ç”¨é»˜è®¤å€¼ã€‚</span><br><span class="line"> Â  Â create table tab ( add_time timestamp default current_timestamp );</span><br><span class="line"> Â  Â  Â  Â -- è¡¨ç¤ºå°†å½“å‰æ—¶é—´çš„æ—¶é—´æˆ³è®¾ä¸ºé»˜è®¤å€¼ã€‚</span><br><span class="line"> Â  Â  Â  Â current_date, current_time</span><br><span class="line">5. AUTO_INCREMENT è‡ªåŠ¨å¢é•¿çº¦æŸ</span><br><span class="line"> Â  Â è‡ªåŠ¨å¢é•¿å¿…é¡»ä¸ºç´¢å¼•ï¼ˆä¸»é”®æˆ–uniqueï¼‰</span><br><span class="line"> Â  Â åªèƒ½å­˜åœ¨ä¸€ä¸ªå­—æ®µä¸ºè‡ªåŠ¨å¢é•¿ã€‚</span><br><span class="line"> Â  Â é»˜è®¤ä¸º1å¼€å§‹è‡ªåŠ¨å¢é•¿ã€‚å¯ä»¥é€šè¿‡è¡¨å±æ€§ auto_increment = xè¿›è¡Œè®¾ç½®ï¼Œæˆ– alter table tbl auto_increment = x;</span><br><span class="line">6. COMMENT æ³¨é‡Š</span><br><span class="line"> Â  Â ä¾‹ï¼šcreate table tab ( id int ) comment &apos;æ³¨é‡Šå†…å®¹&apos;;</span><br><span class="line">7. FOREIGN KEY å¤–é”®çº¦æŸ</span><br><span class="line"> Â  Â ç”¨äºé™åˆ¶ä¸»è¡¨ä¸ä»è¡¨æ•°æ®å®Œæ•´æ€§ã€‚</span><br><span class="line"> Â  Â alter table t1 add constraint `t1_t2_fk` foreign key (t1_id) references t2(id);</span><br><span class="line"> Â  Â  Â  Â -- å°†è¡¨t1çš„t1_idå¤–é”®å…³è”åˆ°è¡¨t2çš„idå­—æ®µã€‚</span><br><span class="line"> Â  Â  Â  Â -- æ¯ä¸ªå¤–é”®éƒ½æœ‰ä¸€ä¸ªåå­—ï¼Œå¯ä»¥é€šè¿‡ constraint æŒ‡å®š</span><br><span class="line"> Â  Â å­˜åœ¨å¤–é”®çš„è¡¨ï¼Œç§°ä¹‹ä¸ºä»è¡¨ï¼ˆå­è¡¨ï¼‰ï¼Œå¤–é”®æŒ‡å‘çš„è¡¨ï¼Œç§°ä¹‹ä¸ºä¸»è¡¨ï¼ˆçˆ¶è¡¨ï¼‰ã€‚</span><br><span class="line"> Â  Â ä½œç”¨ï¼šä¿æŒæ•°æ®ä¸€è‡´æ€§ï¼Œå®Œæ•´æ€§ï¼Œä¸»è¦ç›®çš„æ˜¯æ§åˆ¶å­˜å‚¨åœ¨å¤–é”®è¡¨ï¼ˆä»è¡¨ï¼‰ä¸­çš„æ•°æ®ã€‚</span><br><span class="line"> Â  Â MySQLä¸­ï¼Œå¯ä»¥å¯¹InnoDBå¼•æ“ä½¿ç”¨å¤–é”®çº¦æŸï¼š</span><br><span class="line"> Â  Â è¯­æ³•ï¼š</span><br><span class="line"> Â  Â foreign key (å¤–é”®å­—æ®µï¼‰ references ä¸»è¡¨å (å…³è”å­—æ®µ) [ä¸»è¡¨è®°å½•åˆ é™¤æ—¶çš„åŠ¨ä½œ] [ä¸»è¡¨è®°å½•æ›´æ–°æ—¶çš„åŠ¨ä½œ]</span><br><span class="line"> Â  Â æ­¤æ—¶éœ€è¦æ£€æµ‹ä¸€ä¸ªä»è¡¨çš„å¤–é”®éœ€è¦çº¦æŸä¸ºä¸»è¡¨çš„å·²å­˜åœ¨çš„å€¼ã€‚å¤–é”®åœ¨æ²¡æœ‰å…³è”çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è®¾ç½®ä¸ºnull.å‰ææ˜¯è¯¥å¤–é”®åˆ—ï¼Œæ²¡æœ‰not nullã€‚</span><br><span class="line"> Â  Â å¯ä»¥ä¸æŒ‡å®šä¸»è¡¨è®°å½•æ›´æ”¹æˆ–æ›´æ–°æ—¶çš„åŠ¨ä½œï¼Œé‚£ä¹ˆæ­¤æ—¶ä¸»è¡¨çš„æ“ä½œè¢«æ‹’ç»ã€‚</span><br><span class="line"> Â  Â å¦‚æœæŒ‡å®šäº† on update æˆ– on deleteï¼šåœ¨åˆ é™¤æˆ–æ›´æ–°æ—¶ï¼Œæœ‰å¦‚ä¸‹å‡ ä¸ªæ“ä½œå¯ä»¥é€‰æ‹©ï¼š</span><br><span class="line"> Â  Â 1. cascadeï¼Œçº§è”æ“ä½œã€‚ä¸»è¡¨æ•°æ®è¢«æ›´æ–°ï¼ˆä¸»é”®å€¼æ›´æ–°ï¼‰ï¼Œä»è¡¨ä¹Ÿè¢«æ›´æ–°ï¼ˆå¤–é”®å€¼æ›´æ–°ï¼‰ã€‚ä¸»è¡¨è®°å½•è¢«åˆ é™¤ï¼Œä»è¡¨ç›¸å…³è®°å½•ä¹Ÿè¢«åˆ é™¤ã€‚</span><br><span class="line"> Â  Â 2. set nullï¼Œè®¾ç½®ä¸ºnullã€‚ä¸»è¡¨æ•°æ®è¢«æ›´æ–°ï¼ˆä¸»é”®å€¼æ›´æ–°ï¼‰ï¼Œä»è¡¨çš„å¤–é”®è¢«è®¾ç½®ä¸ºnullã€‚ä¸»è¡¨è®°å½•è¢«åˆ é™¤ï¼Œä»è¡¨ç›¸å…³è®°å½•å¤–é”®è¢«è®¾ç½®æˆnullã€‚ä½†æ³¨æ„ï¼Œè¦æ±‚è¯¥å¤–é”®åˆ—ï¼Œæ²¡æœ‰not nullå±æ€§çº¦æŸã€‚</span><br><span class="line"> Â  Â 3. restrictï¼Œæ‹’ç»çˆ¶è¡¨åˆ é™¤å’Œæ›´æ–°ã€‚</span><br><span class="line"> Â  Â æ³¨æ„ï¼Œå¤–é”®åªè¢«InnoDBå­˜å‚¨å¼•æ“æ‰€æ”¯æŒã€‚å…¶ä»–å¼•æ“æ˜¯ä¸æ”¯æŒçš„ã€‚</span><br></pre></td></tr></table></figure><h3 id="å»ºè¡¨è§„èŒƒ"><a href="#å»ºè¡¨è§„èŒƒ" class="headerlink" title="å»ºè¡¨è§„èŒƒ"></a>å»ºè¡¨è§„èŒƒ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> Â -- Normal Format, NF</span><br><span class="line"> Â  Â  Â  Â - æ¯ä¸ªè¡¨ä¿å­˜ä¸€ä¸ªå®ä½“ä¿¡æ¯</span><br><span class="line"> Â  Â  Â  Â - æ¯ä¸ªå…·æœ‰ä¸€ä¸ªIDå­—æ®µä½œä¸ºä¸»é”®</span><br><span class="line"> Â  Â  Â  Â - IDä¸»é”® + åŸå­è¡¨</span><br><span class="line"> Â  Â -- 1NF, ç¬¬ä¸€èŒƒå¼</span><br><span class="line"> Â  Â  Â  Â å­—æ®µä¸èƒ½å†åˆ†ï¼Œå°±æ»¡è¶³ç¬¬ä¸€èŒƒå¼ã€‚</span><br><span class="line"> Â  Â -- 2NF, ç¬¬äºŒèŒƒå¼</span><br><span class="line"> Â  Â  Â  Â æ»¡è¶³ç¬¬ä¸€èŒƒå¼çš„å‰æä¸‹ï¼Œä¸èƒ½å‡ºç°éƒ¨åˆ†ä¾èµ–ã€‚</span><br><span class="line"> Â  Â  Â  Â æ¶ˆé™¤ç¬¦åˆä¸»é”®å°±å¯ä»¥é¿å…éƒ¨åˆ†ä¾èµ–ã€‚å¢åŠ å•åˆ—å…³é”®å­—ã€‚</span><br><span class="line"> Â  Â -- 3NF, ç¬¬ä¸‰èŒƒå¼</span><br><span class="line"> Â  Â  Â  Â æ»¡è¶³ç¬¬äºŒèŒƒå¼çš„å‰æä¸‹ï¼Œä¸èƒ½å‡ºç°ä¼ é€’ä¾èµ–ã€‚</span><br><span class="line"> Â  Â  Â  Â æŸä¸ªå­—æ®µä¾èµ–äºä¸»é”®ï¼Œè€Œæœ‰å…¶ä»–å­—æ®µä¾èµ–äºè¯¥å­—æ®µã€‚è¿™å°±æ˜¯ä¼ é€’ä¾èµ–ã€‚</span><br><span class="line"> Â  Â  Â  Â å°†ä¸€ä¸ªå®ä½“ä¿¡æ¯çš„æ•°æ®æ”¾åœ¨ä¸€ä¸ªè¡¨å†…å®ç°ã€‚</span><br></pre></td></tr></table></figure><h3 id="SELECT"><a href="#SELECT" class="headerlink" title="SELECT"></a>SELECT</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">SELECT [ALL|DISTINCT] select_expr FROM -&gt; WHERE -&gt; GROUP BY [åˆè®¡å‡½æ•°] -&gt; HAVING -&gt; ORDER BY -&gt; LIMIT</span><br><span class="line">a. select_expr</span><br><span class="line"> Â  Â -- å¯ä»¥ç”¨ * è¡¨ç¤ºæ‰€æœ‰å­—æ®µã€‚</span><br><span class="line"> Â  Â  Â  Â select * from tb;</span><br><span class="line"> Â  Â -- å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼ï¼ˆè®¡ç®—å…¬å¼ã€å‡½æ•°è°ƒç”¨ã€å­—æ®µä¹Ÿæ˜¯ä¸ªè¡¨è¾¾å¼ï¼‰</span><br><span class="line"> Â  Â  Â  Â select stu, 29+25, now() from tb;</span><br><span class="line"> Â  Â -- å¯ä»¥ä¸ºæ¯ä¸ªåˆ—ä½¿ç”¨åˆ«åã€‚é€‚ç”¨äºç®€åŒ–åˆ—æ ‡è¯†ï¼Œé¿å…å¤šä¸ªåˆ—æ ‡è¯†ç¬¦é‡å¤ã€‚</span><br><span class="line"> Â  Â  Â  Â - ä½¿ç”¨ as å…³é”®å­—ï¼Œä¹Ÿå¯çœç•¥ as.</span><br><span class="line"> Â  Â  Â  Â select stu+10 as add10 from tb;</span><br><span class="line">b. FROM å­å¥</span><br><span class="line"> Â  Â ç”¨äºæ ‡è¯†æŸ¥è¯¢æ¥æºã€‚</span><br><span class="line"> Â  Â -- å¯ä»¥ä¸ºè¡¨èµ·åˆ«åã€‚ä½¿ç”¨aså…³é”®å­—ã€‚</span><br><span class="line"> Â  Â  Â  Â SELECT * FROM tb1 AS tt, tb2 AS bb;</span><br><span class="line"> Â  Â -- fromå­å¥åï¼Œå¯ä»¥åŒæ—¶å‡ºç°å¤šä¸ªè¡¨ã€‚</span><br><span class="line"> Â  Â  Â  Â -- å¤šä¸ªè¡¨ä¼šæ¨ªå‘å åŠ åˆ°ä¸€èµ·ï¼Œè€Œæ•°æ®ä¼šå½¢æˆä¸€ä¸ªç¬›å¡å°”ç§¯ã€‚</span><br><span class="line"> Â  Â  Â  Â SELECT * FROM tb1, tb2;</span><br><span class="line"> Â  Â -- å‘ä¼˜åŒ–ç¬¦æç¤ºå¦‚ä½•é€‰æ‹©ç´¢å¼•</span><br><span class="line"> Â  Â  Â  Â USE INDEXã€IGNORE INDEXã€FORCE INDEX</span><br><span class="line"> Â  Â  Â  Â SELECT * FROM table1 USE INDEX (key1,key2) WHERE key1=1 AND key2=2 AND key3=3;</span><br><span class="line"> Â  Â  Â  Â SELECT * FROM table1 IGNORE INDEX (key3) WHERE key1=1 AND key2=2 AND key3=3;</span><br><span class="line">c. WHERE å­å¥</span><br><span class="line"> Â  Â -- ä»fromè·å¾—çš„æ•°æ®æºä¸­è¿›è¡Œç­›é€‰ã€‚</span><br><span class="line"> Â  Â -- æ•´å‹1è¡¨ç¤ºçœŸï¼Œ0è¡¨ç¤ºå‡ã€‚</span><br><span class="line"> Â  Â -- è¡¨è¾¾å¼ç”±è¿ç®—ç¬¦å’Œè¿ç®—æ•°ç»„æˆã€‚</span><br><span class="line"> Â  Â  Â  Â -- è¿ç®—æ•°ï¼šå˜é‡ï¼ˆå­—æ®µï¼‰ã€å€¼ã€å‡½æ•°è¿”å›å€¼</span><br><span class="line"> Â  Â  Â  Â -- è¿ç®—ç¬¦ï¼š</span><br><span class="line"> Â  Â  Â  Â  Â  Â =, &lt;=&gt;, &lt;&gt;, !=, &lt;=, &lt;, &gt;=, &gt;, !, &amp;&amp;, ||,</span><br><span class="line"> Â  Â  Â  Â  Â  Â in (not) null, (not) like, (not) in, (not) between and, is (not), and, or, not, xor</span><br><span class="line"> Â  Â  Â  Â  Â  Â is/is not åŠ ä¸Šture/false/unknownï¼Œæ£€éªŒæŸä¸ªå€¼çš„çœŸå‡</span><br><span class="line"> Â  Â  Â  Â  Â  Â &lt;=&gt;ä¸&lt;&gt;åŠŸèƒ½ç›¸åŒï¼Œ&lt;=&gt;å¯ç”¨äºnullæ¯”è¾ƒ</span><br><span class="line">d. GROUP BY å­å¥, åˆ†ç»„å­å¥</span><br><span class="line"> Â  Â GROUP BY å­—æ®µ/åˆ«å [æ’åºæ–¹å¼]</span><br><span class="line"> Â  Â åˆ†ç»„åä¼šè¿›è¡Œæ’åºã€‚å‡åºï¼šASCï¼Œé™åºï¼šDESC</span><br><span class="line"> Â  Â ä»¥ä¸‹[åˆè®¡å‡½æ•°]éœ€é…åˆ GROUP BY ä½¿ç”¨ï¼š</span><br><span class="line"> Â  Â count è¿”å›ä¸åŒçš„éNULLå€¼æ•°ç›® Â count(*)ã€count(å­—æ®µ)</span><br><span class="line"> Â  Â sum æ±‚å’Œ</span><br><span class="line"> Â  Â max æ±‚æœ€å¤§å€¼</span><br><span class="line"> Â  Â min æ±‚æœ€å°å€¼</span><br><span class="line"> Â  Â avg æ±‚å¹³å‡å€¼</span><br><span class="line"> Â  Â group_concat è¿”å›å¸¦æœ‰æ¥è‡ªä¸€ä¸ªç»„çš„è¿æ¥çš„éNULLå€¼çš„å­—ç¬¦ä¸²ç»“æœã€‚ç»„å†…å­—ç¬¦ä¸²è¿æ¥ã€‚</span><br><span class="line">e. HAVING å­å¥ï¼Œæ¡ä»¶å­å¥</span><br><span class="line"> Â  Â ä¸ where åŠŸèƒ½ã€ç”¨æ³•ç›¸åŒï¼Œæ‰§è¡Œæ—¶æœºä¸åŒã€‚</span><br><span class="line"> Â  Â where åœ¨å¼€å§‹æ—¶æ‰§è¡Œæ£€æµ‹æ•°æ®ï¼Œå¯¹åŸæ•°æ®è¿›è¡Œè¿‡æ»¤ã€‚</span><br><span class="line"> Â  Â having å¯¹ç­›é€‰å‡ºçš„ç»“æœå†æ¬¡è¿›è¡Œè¿‡æ»¤ã€‚</span><br><span class="line"> Â  Â having å­—æ®µå¿…é¡»æ˜¯æŸ¥è¯¢å‡ºæ¥çš„ï¼Œwhere å­—æ®µå¿…é¡»æ˜¯æ•°æ®è¡¨å­˜åœ¨çš„ã€‚</span><br><span class="line"> Â  Â where ä¸å¯ä»¥ä½¿ç”¨å­—æ®µçš„åˆ«åï¼Œhaving å¯ä»¥ã€‚å› ä¸ºæ‰§è¡ŒWHEREä»£ç æ—¶ï¼Œå¯èƒ½å°šæœªç¡®å®šåˆ—å€¼ã€‚</span><br><span class="line"> Â  Â where ä¸å¯ä»¥ä½¿ç”¨åˆè®¡å‡½æ•°ã€‚ä¸€èˆ¬éœ€ç”¨åˆè®¡å‡½æ•°æ‰ä¼šç”¨ having</span><br><span class="line"> Â  Â SQLæ ‡å‡†è¦æ±‚HAVINGå¿…é¡»å¼•ç”¨GROUP BYå­å¥ä¸­çš„åˆ—æˆ–ç”¨äºåˆè®¡å‡½æ•°ä¸­çš„åˆ—ã€‚</span><br><span class="line">f. ORDER BY å­å¥ï¼Œæ’åºå­å¥</span><br><span class="line"> Â  Â order by æ’åºå­—æ®µ/åˆ«å æ’åºæ–¹å¼ [,æ’åºå­—æ®µ/åˆ«å æ’åºæ–¹å¼]...</span><br><span class="line"> Â  Â å‡åºï¼šASCï¼Œé™åºï¼šDESC</span><br><span class="line"> Â  Â æ”¯æŒå¤šä¸ªå­—æ®µçš„æ’åºã€‚</span><br><span class="line">g. LIMIT å­å¥ï¼Œé™åˆ¶ç»“æœæ•°é‡å­å¥</span><br><span class="line"> Â  Â ä»…å¯¹å¤„ç†å¥½çš„ç»“æœè¿›è¡Œæ•°é‡é™åˆ¶ã€‚å°†å¤„ç†å¥½çš„ç»“æœçš„çœ‹ä½œæ˜¯ä¸€ä¸ªé›†åˆï¼ŒæŒ‰ç…§è®°å½•å‡ºç°çš„é¡ºåºï¼Œç´¢å¼•ä»0å¼€å§‹ã€‚</span><br><span class="line"> Â  Â limit èµ·å§‹ä½ç½®, è·å–æ¡æ•°</span><br><span class="line"> Â  Â çœç•¥ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºä»ç´¢å¼•0å¼€å§‹ã€‚limit è·å–æ¡æ•°</span><br><span class="line">h. DISTINCT, ALL é€‰é¡¹</span><br><span class="line"> Â  Â distinct å»é™¤é‡å¤è®°å½•</span><br><span class="line"> Â  Â é»˜è®¤ä¸º all, å…¨éƒ¨è®°å½•</span><br></pre></td></tr></table></figure><h3 id="UNION"><a href="#UNION" class="headerlink" title="UNION"></a>UNION</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> Â å°†å¤šä¸ªselectæŸ¥è¯¢çš„ç»“æœç»„åˆæˆä¸€ä¸ªç»“æœé›†åˆã€‚</span><br><span class="line"> Â  Â SELECT ... UNION [ALL|DISTINCT] SELECT ...</span><br><span class="line"> Â  Â é»˜è®¤ DISTINCT æ–¹å¼ï¼Œå³æ‰€æœ‰è¿”å›çš„è¡Œéƒ½æ˜¯å”¯ä¸€çš„</span><br><span class="line"> Â  Â å»ºè®®ï¼Œå¯¹æ¯ä¸ªSELECTæŸ¥è¯¢åŠ ä¸Šå°æ‹¬å·åŒ…è£¹ã€‚</span><br><span class="line"> Â  Â ORDER BY æ’åºæ—¶ï¼Œéœ€åŠ ä¸Š LIMIT è¿›è¡Œç»“åˆã€‚</span><br><span class="line"> Â  Â éœ€è¦å„selectæŸ¥è¯¢çš„å­—æ®µæ•°é‡ä¸€æ ·ã€‚</span><br><span class="line"> Â  Â æ¯ä¸ªselectæŸ¥è¯¢çš„å­—æ®µåˆ—è¡¨(æ•°é‡ã€ç±»å‹)åº”ä¸€è‡´ï¼Œå› ä¸ºç»“æœä¸­çš„å­—æ®µåä»¥ç¬¬ä¸€æ¡selectè¯­å¥ä¸ºå‡†ã€‚</span><br></pre></td></tr></table></figure><h3 id="å­æŸ¥è¯¢"><a href="#å­æŸ¥è¯¢" class="headerlink" title="å­æŸ¥è¯¢"></a>å­æŸ¥è¯¢</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"> Â  Â - å­æŸ¥è¯¢éœ€ç”¨æ‹¬å·åŒ…è£¹ã€‚</span><br><span class="line">-- fromå‹</span><br><span class="line"> Â  Â fromåè¦æ±‚æ˜¯ä¸€ä¸ªè¡¨ï¼Œå¿…é¡»ç»™å­æŸ¥è¯¢ç»“æœå–ä¸ªåˆ«åã€‚</span><br><span class="line"> Â  Â - ç®€åŒ–æ¯ä¸ªæŸ¥è¯¢å†…çš„æ¡ä»¶ã€‚</span><br><span class="line"> Â  Â - fromå‹éœ€å°†ç»“æœç”Ÿæˆä¸€ä¸ªä¸´æ—¶è¡¨æ ¼ï¼Œå¯ç”¨ä»¥åŸè¡¨çš„é”å®šçš„é‡Šæ”¾ã€‚</span><br><span class="line"> Â  Â - å­æŸ¥è¯¢è¿”å›ä¸€ä¸ªè¡¨ï¼Œè¡¨å‹å­æŸ¥è¯¢ã€‚</span><br><span class="line"> Â  Â select * from (select * from tb where id&gt;0) as subfrom where id&gt;1;</span><br><span class="line">-- whereå‹</span><br><span class="line"> Â  Â - å­æŸ¥è¯¢è¿”å›ä¸€ä¸ªå€¼ï¼Œæ ‡é‡å­æŸ¥è¯¢ã€‚</span><br><span class="line"> Â  Â - ä¸éœ€è¦ç»™å­æŸ¥è¯¢å–åˆ«åã€‚</span><br><span class="line"> Â  Â - whereå­æŸ¥è¯¢å†…çš„è¡¨ï¼Œä¸èƒ½ç›´æ¥ç”¨ä»¥æ›´æ–°ã€‚</span><br><span class="line"> Â  Â select * from tb where money = (select max(money) from tb);</span><br><span class="line"> Â  Â -- åˆ—å­æŸ¥è¯¢</span><br><span class="line"> Â  Â  Â  Â å¦‚æœå­æŸ¥è¯¢ç»“æœè¿”å›çš„æ˜¯ä¸€åˆ—ã€‚</span><br><span class="line"> Â  Â  Â  Â ä½¿ç”¨ in æˆ– not in å®ŒæˆæŸ¥è¯¢</span><br><span class="line"> Â  Â  Â  Â exists å’Œ not exists æ¡ä»¶</span><br><span class="line"> Â  Â  Â  Â  Â  Â å¦‚æœå­æŸ¥è¯¢è¿”å›æ•°æ®ï¼Œåˆ™è¿”å›1æˆ–0ã€‚å¸¸ç”¨äºåˆ¤æ–­æ¡ä»¶ã€‚</span><br><span class="line"> Â  Â  Â  Â  Â  Â select column1 from t1 where exists (select * from t2);</span><br><span class="line"> Â  Â -- è¡Œå­æŸ¥è¯¢</span><br><span class="line"> Â  Â  Â  Â æŸ¥è¯¢æ¡ä»¶æ˜¯ä¸€ä¸ªè¡Œã€‚</span><br><span class="line"> Â  Â  Â  Â select * from t1 where (id, gender) in (select id, gender from t2);</span><br><span class="line"> Â  Â  Â  Â è¡Œæ„é€ ç¬¦ï¼š(col1, col2, ...) æˆ– ROW(col1, col2, ...)</span><br><span class="line"> Â  Â  Â  Â è¡Œæ„é€ ç¬¦é€šå¸¸ç”¨äºä¸å¯¹èƒ½è¿”å›ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šåˆ—çš„å­æŸ¥è¯¢è¿›è¡Œæ¯”è¾ƒã€‚</span><br><span class="line"> Â  Â -- ç‰¹æ®Šè¿ç®—ç¬¦</span><br><span class="line"> Â  Â != all() Â  Â ç›¸å½“äº not in</span><br><span class="line"> Â  Â = some() Â  Â ç›¸å½“äº inã€‚any æ˜¯ some çš„åˆ«å</span><br><span class="line"> Â  Â != some() Â  ä¸ç­‰åŒäº not inï¼Œä¸ç­‰äºå…¶ä¸­æŸä¸€ä¸ªã€‚</span><br><span class="line"> Â  Â all, some å¯ä»¥é…åˆå…¶ä»–è¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨ã€‚</span><br></pre></td></tr></table></figure><h3 id="è¿æ¥æŸ¥è¯¢-join"><a href="#è¿æ¥æŸ¥è¯¢-join" class="headerlink" title="è¿æ¥æŸ¥è¯¢(join)"></a>è¿æ¥æŸ¥è¯¢(join)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"> Â å°†å¤šä¸ªè¡¨çš„å­—æ®µè¿›è¡Œè¿æ¥ï¼Œå¯ä»¥æŒ‡å®šè¿æ¥æ¡ä»¶ã€‚</span><br><span class="line">-- å†…è¿æ¥(inner join)</span><br><span class="line"> Â  Â - é»˜è®¤å°±æ˜¯å†…è¿æ¥ï¼Œå¯çœç•¥innerã€‚</span><br><span class="line"> Â  Â - åªæœ‰æ•°æ®å­˜åœ¨æ—¶æ‰èƒ½å‘é€è¿æ¥ã€‚å³è¿æ¥ç»“æœä¸èƒ½å‡ºç°ç©ºè¡Œã€‚</span><br><span class="line"> Â  Â on è¡¨ç¤ºè¿æ¥æ¡ä»¶ã€‚å…¶æ¡ä»¶è¡¨è¾¾å¼ä¸whereç±»ä¼¼ã€‚ä¹Ÿå¯ä»¥çœç•¥æ¡ä»¶ï¼ˆè¡¨ç¤ºæ¡ä»¶æ°¸è¿œä¸ºçœŸï¼‰</span><br><span class="line"> Â  Â ä¹Ÿå¯ç”¨whereè¡¨ç¤ºè¿æ¥æ¡ä»¶ã€‚</span><br><span class="line"> Â  Â è¿˜æœ‰ using, ä½†éœ€å­—æ®µåç›¸åŒã€‚ using(å­—æ®µå)</span><br><span class="line"> Â  Â -- äº¤å‰è¿æ¥ cross join</span><br><span class="line"> Â  Â  Â  Â å³ï¼Œæ²¡æœ‰æ¡ä»¶çš„å†…è¿æ¥ã€‚</span><br><span class="line"> Â  Â  Â  Â select * from tb1 cross join tb2;</span><br><span class="line">-- å¤–è¿æ¥(outer join)</span><br><span class="line"> Â  Â - å¦‚æœæ•°æ®ä¸å­˜åœ¨ï¼Œä¹Ÿä¼šå‡ºç°åœ¨è¿æ¥ç»“æœä¸­ã€‚</span><br><span class="line"> Â  Â -- å·¦å¤–è¿æ¥ left join</span><br><span class="line"> Â  Â  Â  Â å¦‚æœæ•°æ®ä¸å­˜åœ¨ï¼Œå·¦è¡¨è®°å½•ä¼šå‡ºç°ï¼Œè€Œå³è¡¨ä¸ºnullå¡«å……</span><br><span class="line"> Â  Â -- å³å¤–è¿æ¥ right join</span><br><span class="line"> Â  Â  Â  Â å¦‚æœæ•°æ®ä¸å­˜åœ¨ï¼Œå³è¡¨è®°å½•ä¼šå‡ºç°ï¼Œè€Œå·¦è¡¨ä¸ºnullå¡«å……</span><br><span class="line">-- è‡ªç„¶è¿æ¥(natural join)</span><br><span class="line"> Â  Â è‡ªåŠ¨åˆ¤æ–­è¿æ¥æ¡ä»¶å®Œæˆè¿æ¥ã€‚</span><br><span class="line"> Â  Â ç›¸å½“äºçœç•¥äº†usingï¼Œä¼šè‡ªåŠ¨æŸ¥æ‰¾ç›¸åŒå­—æ®µåã€‚</span><br><span class="line"> Â  Â natural join</span><br><span class="line"> Â  Â natural left join</span><br><span class="line"> Â  Â natural right join</span><br><span class="line"> Â  Â </span><br><span class="line">select info.id, info.name, info.stu_num, extra_info.hobby, extra_info.sex from info, extra_info where info.stu_num = extra_info.stu_id;</span><br></pre></td></tr></table></figure><p>å¯¼å‡º</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">select * into outfile æ–‡ä»¶åœ°å€ [æ§åˆ¶æ ¼å¼] from è¡¨å; Â  -- å¯¼å‡ºè¡¨æ•°æ®</span><br><span class="line"> </span><br><span class="line">load data [local] infile æ–‡ä»¶åœ°å€ [replace|ignore] into table è¡¨å [æ§åˆ¶æ ¼å¼]; -- å¯¼å…¥æ•°æ®</span><br><span class="line"> Â  Â ç”Ÿæˆçš„æ•°æ®é»˜è®¤çš„åˆ†éš”ç¬¦æ˜¯åˆ¶è¡¨ç¬¦</span><br><span class="line"> Â  Â localæœªæŒ‡å®šï¼Œåˆ™æ•°æ®æ–‡ä»¶å¿…é¡»åœ¨æœåŠ¡å™¨ä¸Š</span><br><span class="line"> Â  Â replace å’Œ ignore å…³é”®è¯æ§åˆ¶å¯¹ç°æœ‰çš„å”¯ä¸€é”®è®°å½•çš„é‡å¤çš„å¤„ç†</span><br><span class="line">-- æ§åˆ¶æ ¼å¼</span><br><span class="line">fields Â æ§åˆ¶å­—æ®µæ ¼å¼</span><br><span class="line">é»˜è®¤ï¼šfields terminated by &apos;&apos; enclosed by &apos;&apos; escaped by &apos;&apos;</span><br><span class="line"> Â  Â terminated by &apos;string&apos; Â -- ç»ˆæ­¢</span><br><span class="line"> Â  Â enclosed by &apos;char&apos; Â  Â  Â -- åŒ…è£¹</span><br><span class="line"> Â  Â escaped by &apos;char&apos; Â  Â  Â  -- è½¬ä¹‰</span><br><span class="line"> Â  Â -- ç¤ºä¾‹ï¼š</span><br><span class="line"> Â  Â  Â  Â SELECT a,b,a+b INTO OUTFILE &apos;/tmp/result.text&apos;</span><br><span class="line"> Â  Â  Â  Â FIELDS TERMINATED BY &apos;,&apos; OPTIONALLY ENCLOSED BY &apos;&quot;&apos;</span><br><span class="line"> Â  Â  Â  Â LINES TERMINATED BY &apos;&apos;</span><br><span class="line"> Â  Â  Â  Â FROM test_table;</span><br><span class="line">lines Â  æ§åˆ¶è¡Œæ ¼å¼</span><br><span class="line">é»˜è®¤ï¼šlines terminated by &apos;&apos;</span><br><span class="line"> Â  Â terminated by &apos;string&apos; Â -- ç»ˆæ­¢</span><br></pre></td></tr></table></figure><h3 id="INSERT"><a href="#INSERT" class="headerlink" title="INSERT"></a>INSERT</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">selectè¯­å¥è·å¾—çš„æ•°æ®å¯ä»¥ç”¨insertæ’å…¥ã€‚</span><br><span class="line">å¯ä»¥çœç•¥å¯¹åˆ—çš„æŒ‡å®šï¼Œè¦æ±‚ values () æ‹¬å·å†…ï¼Œæä¾›ç»™äº†æŒ‰ç…§åˆ—é¡ºåºå‡ºç°çš„æ‰€æœ‰å­—æ®µçš„å€¼ã€‚</span><br><span class="line"> Â  Â æˆ–è€…ä½¿ç”¨setè¯­æ³•ã€‚</span><br><span class="line"> Â  Â INSERT INTO tbl_name SET field=value,...ï¼›</span><br><span class="line">å¯ä»¥ä¸€æ¬¡æ€§ä½¿ç”¨å¤šä¸ªå€¼ï¼Œé‡‡ç”¨(), (), ();çš„å½¢å¼ã€‚</span><br><span class="line"> Â  Â INSERT INTO tbl_name VALUES (), (), ();</span><br><span class="line">å¯ä»¥åœ¨åˆ—å€¼æŒ‡å®šæ—¶ï¼Œä½¿ç”¨è¡¨è¾¾å¼ã€‚</span><br><span class="line"> Â  Â INSERT INTO tbl_name VALUES (field_value, 10+10, now());</span><br><span class="line">å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šå€¼ DEFAULTï¼Œè¡¨ç¤ºè¯¥åˆ—ä½¿ç”¨é»˜è®¤å€¼ã€‚</span><br><span class="line"> Â  Â INSERT INTO tbl_name VALUES (field_value, DEFAULT);</span><br><span class="line">å¯ä»¥é€šè¿‡ä¸€ä¸ªæŸ¥è¯¢çš„ç»“æœï¼Œä½œä¸ºéœ€è¦æ’å…¥çš„å€¼ã€‚</span><br><span class="line"> Â  Â INSERT INTO tbl_name SELECT ...;</span><br><span class="line">å¯ä»¥æŒ‡å®šåœ¨æ’å…¥çš„å€¼å‡ºç°ä¸»é”®ï¼ˆæˆ–å”¯ä¸€ç´¢å¼•ï¼‰å†²çªæ—¶ï¼Œæ›´æ–°å…¶ä»–éä¸»é”®åˆ—çš„ä¿¡æ¯ã€‚</span><br><span class="line"> Â  Â INSERT INTO tbl_name VALUES/SET/SELECT ON DUPLICATE KEY UPDATE å­—æ®µ=å€¼, â€¦;</span><br></pre></td></tr></table></figure><h3 id="DELETE"><a href="#DELETE" class="headerlink" title="DELETE"></a>DELETE</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">TRUNCATE [TABLE] tbl_name</span><br><span class="line">æ¸…ç©ºæ•°æ®</span><br><span class="line">åˆ é™¤é‡å»ºè¡¨</span><br><span class="line">åŒºåˆ«ï¼š</span><br><span class="line">1ï¼Œtruncate æ˜¯åˆ é™¤è¡¨å†åˆ›å»ºï¼Œdelete æ˜¯é€æ¡åˆ é™¤</span><br><span class="line">2ï¼Œtruncate é‡ç½®auto_incrementçš„å€¼ã€‚è€Œdeleteä¸ä¼š</span><br><span class="line">3ï¼Œtruncate ä¸çŸ¥é“åˆ é™¤äº†å‡ æ¡ï¼Œè€ŒdeleteçŸ¥é“ã€‚</span><br><span class="line">4ï¼Œå½“è¢«ç”¨äºå¸¦åˆ†åŒºçš„è¡¨æ—¶ï¼Œtruncate ä¼šä¿ç•™åˆ†åŒºã€‚</span><br></pre></td></tr></table></figure><h3 id="å¤‡ä»½ä¸è¿˜åŸ"><a href="#å¤‡ä»½ä¸è¿˜åŸ" class="headerlink" title="å¤‡ä»½ä¸è¿˜åŸ"></a>å¤‡ä»½ä¸è¿˜åŸ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">å¤‡ä»½ï¼Œå°†æ•°æ®çš„ç»“æ„ä¸è¡¨å†…æ•°æ®ä¿å­˜èµ·æ¥ã€‚</span><br><span class="line">åˆ©ç”¨ mysqldump æŒ‡ä»¤å®Œæˆã€‚</span><br><span class="line">-- å¯¼å‡º</span><br><span class="line">mysqldump [options] db_name [tables]</span><br><span class="line">mysqldump [options] ---database DB1 [DB2 DB3...]</span><br><span class="line">mysqldump [options] --all--database</span><br><span class="line">1. å¯¼å‡ºä¸€å¼ è¡¨</span><br><span class="line">ã€€ã€€mysqldump -uç”¨æˆ·å -på¯†ç  åº“å è¡¨å &gt; æ–‡ä»¶å(D:/a.sql)</span><br><span class="line">2. å¯¼å‡ºå¤šå¼ è¡¨</span><br><span class="line">ã€€ã€€mysqldump -uç”¨æˆ·å -på¯†ç  åº“å è¡¨1 è¡¨2 è¡¨3 &gt; æ–‡ä»¶å(D:/a.sql)</span><br><span class="line">3. å¯¼å‡ºæ‰€æœ‰è¡¨</span><br><span class="line">ã€€ã€€mysqldump -uç”¨æˆ·å -på¯†ç  åº“å &gt; æ–‡ä»¶å(D:/a.sql)</span><br><span class="line">4. å¯¼å‡ºä¸€ä¸ªåº“</span><br><span class="line">ã€€ã€€mysqldump -uç”¨æˆ·å -på¯†ç  --lock-all-tables --database åº“å &gt; æ–‡ä»¶å(D:/a.sql)</span><br><span class="line">å¯ä»¥-wæºå¸¦WHEREæ¡ä»¶</span><br><span class="line">-- å¯¼å…¥</span><br><span class="line">1. åœ¨ç™»å½•mysqlçš„æƒ…å†µä¸‹ï¼š</span><br><span class="line">ã€€ã€€source Â å¤‡ä»½æ–‡ä»¶</span><br><span class="line">2. åœ¨ä¸ç™»å½•çš„æƒ…å†µä¸‹</span><br><span class="line">ã€€ã€€mysql -uç”¨æˆ·å -på¯†ç  åº“å &lt; å¤‡ä»½æ–‡ä»¶ &gt;</span><br></pre></td></tr></table></figure><h3 id="è§†å›¾"><a href="#è§†å›¾" class="headerlink" title="è§†å›¾"></a>è§†å›¾</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">ä»€ä¹ˆæ˜¯è§†å›¾ï¼š</span><br><span class="line"> Â  Â è§†å›¾æ˜¯ä¸€ä¸ªè™šæ‹Ÿè¡¨ï¼Œå…¶å†…å®¹ç”±æŸ¥è¯¢å®šä¹‰ã€‚åŒçœŸå®çš„è¡¨ä¸€æ ·ï¼Œè§†å›¾åŒ…å«ä¸€ç³»åˆ—å¸¦æœ‰åç§°çš„åˆ—å’Œè¡Œæ•°æ®ã€‚ä½†æ˜¯ï¼Œè§†å›¾å¹¶ä¸åœ¨æ•°æ®åº“ä¸­ä»¥å­˜å‚¨çš„æ•°æ®å€¼é›†å½¢å¼å­˜åœ¨ã€‚è¡Œå’Œåˆ—æ•°æ®æ¥è‡ªç”±å®šä¹‰è§†å›¾çš„æŸ¥è¯¢æ‰€å¼•ç”¨çš„è¡¨ï¼Œå¹¶ä¸”åœ¨å¼•ç”¨è§†å›¾æ—¶åŠ¨æ€ç”Ÿæˆã€‚</span><br><span class="line"> Â  Â è§†å›¾å…·æœ‰è¡¨ç»“æ„æ–‡ä»¶ï¼Œä½†ä¸å­˜åœ¨æ•°æ®æ–‡ä»¶ã€‚</span><br><span class="line"> Â  Â å¯¹å…¶ä¸­æ‰€å¼•ç”¨çš„åŸºç¡€è¡¨æ¥è¯´ï¼Œè§†å›¾çš„ä½œç”¨ç±»ä¼¼äºç­›é€‰ã€‚å®šä¹‰è§†å›¾çš„ç­›é€‰å¯ä»¥æ¥è‡ªå½“å‰æˆ–å…¶å®ƒæ•°æ®åº“çš„ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ï¼Œæˆ–è€…å…¶å®ƒè§†å›¾ã€‚é€šè¿‡è§†å›¾è¿›è¡ŒæŸ¥è¯¢æ²¡æœ‰ä»»ä½•é™åˆ¶ï¼Œé€šè¿‡å®ƒä»¬è¿›è¡Œæ•°æ®ä¿®æ”¹æ—¶çš„é™åˆ¶ä¹Ÿå¾ˆå°‘ã€‚</span><br><span class="line"> Â  Â è§†å›¾æ˜¯å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„æŸ¥è¯¢çš„sqlè¯­å¥ï¼Œå®ƒä¸»è¦å‡ºäºä¸¤ç§åŸå› ï¼šå®‰å…¨åŸå› ï¼Œè§†å›¾å¯ä»¥éšè—ä¸€äº›æ•°æ®ï¼Œå¦‚ï¼šç¤¾ä¼šä¿é™©åŸºé‡‘è¡¨ï¼Œå¯ä»¥ç”¨è§†å›¾åªæ˜¾ç¤ºå§“åï¼Œåœ°å€ï¼Œè€Œä¸æ˜¾ç¤ºç¤¾ä¼šä¿é™©å·å’Œå·¥èµ„æ•°ç­‰ï¼Œå¦ä¸€åŸå› æ˜¯å¯ä½¿å¤æ‚çš„æŸ¥è¯¢æ˜“äºç†è§£å’Œä½¿ç”¨ã€‚</span><br><span class="line">-- åˆ›å»ºè§†å›¾</span><br><span class="line">CREATE [OR REPLACE] [ALGORITHM = &#123;UNDEFINED | MERGE | TEMPTABLE&#125;] VIEW view_name [(column_list)] AS select_statement</span><br><span class="line"> Â  Â - è§†å›¾åå¿…é¡»å”¯ä¸€ï¼ŒåŒæ—¶ä¸èƒ½ä¸è¡¨é‡åã€‚</span><br><span class="line"> Â  Â - è§†å›¾å¯ä»¥ä½¿ç”¨selectè¯­å¥æŸ¥è¯¢åˆ°çš„åˆ—åï¼Œä¹Ÿå¯ä»¥è‡ªå·±æŒ‡å®šç›¸åº”çš„åˆ—åã€‚</span><br><span class="line"> Â  Â - å¯ä»¥æŒ‡å®šè§†å›¾æ‰§è¡Œçš„ç®—æ³•ï¼Œé€šè¿‡ALGORITHMæŒ‡å®šã€‚</span><br><span class="line"> Â  Â - column_listå¦‚æœå­˜åœ¨ï¼Œåˆ™æ•°ç›®å¿…é¡»ç­‰äºSELECTè¯­å¥æ£€ç´¢çš„åˆ—æ•°</span><br><span class="line">-- æŸ¥çœ‹ç»“æ„</span><br><span class="line"> Â  Â SHOW CREATE VIEW view_name</span><br><span class="line">-- åˆ é™¤è§†å›¾</span><br><span class="line"> Â  Â - åˆ é™¤è§†å›¾åï¼Œæ•°æ®ä¾ç„¶å­˜åœ¨ã€‚</span><br><span class="line"> Â  Â - å¯åŒæ—¶åˆ é™¤å¤šä¸ªè§†å›¾ã€‚</span><br><span class="line"> Â  Â DROP VIEW [IF EXISTS] view_name ...</span><br><span class="line">-- ä¿®æ”¹è§†å›¾ç»“æ„</span><br><span class="line"> Â  Â - ä¸€èˆ¬ä¸ä¿®æ”¹è§†å›¾ï¼Œå› ä¸ºä¸æ˜¯æ‰€æœ‰çš„æ›´æ–°è§†å›¾éƒ½ä¼šæ˜ å°„åˆ°è¡¨ä¸Šã€‚</span><br><span class="line"> Â  Â ALTER VIEW view_name [(column_list)] AS select_statement</span><br><span class="line">-- è§†å›¾ä½œç”¨</span><br><span class="line"> Â  Â 1. ç®€åŒ–ä¸šåŠ¡é€»è¾‘</span><br><span class="line"> Â  Â 2. å¯¹å®¢æˆ·ç«¯éšè—çœŸå®çš„è¡¨ç»“æ„</span><br><span class="line">-- è§†å›¾ç®—æ³•(ALGORITHM)</span><br><span class="line"> Â  Â MERGE Â  Â  Â  åˆå¹¶</span><br><span class="line"> Â  Â  Â  Â å°†è§†å›¾çš„æŸ¥è¯¢è¯­å¥ï¼Œä¸å¤–éƒ¨æŸ¥è¯¢éœ€è¦å…ˆåˆå¹¶å†æ‰§è¡Œï¼</span><br><span class="line"> Â  Â TEMPTABLE Â  ä¸´æ—¶è¡¨</span><br><span class="line"> Â  Â  Â  Â å°†è§†å›¾æ‰§è¡Œå®Œæ¯•åï¼Œå½¢æˆä¸´æ—¶è¡¨ï¼Œå†åšå¤–å±‚æŸ¥è¯¢ï¼</span><br><span class="line"> Â  Â UNDEFINED Â  æœªå®šä¹‰(é»˜è®¤)ï¼ŒæŒ‡çš„æ˜¯MySQLè‡ªä¸»å»é€‰æ‹©ç›¸åº”çš„ç®—æ³•ã€‚</span><br></pre></td></tr></table></figure><h3 id="äº‹åŠ¡-transaction"><a href="#äº‹åŠ¡-transaction" class="headerlink" title="äº‹åŠ¡(transaction)"></a>äº‹åŠ¡(transaction)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">äº‹åŠ¡æ˜¯æŒ‡é€»è¾‘ä¸Šçš„ä¸€ç»„æ“ä½œï¼Œç»„æˆè¿™ç»„æ“ä½œçš„å„ä¸ªå•å…ƒï¼Œè¦ä¸å…¨æˆåŠŸè¦ä¸å…¨å¤±è´¥ã€‚</span><br><span class="line"> Â  Â - æ”¯æŒè¿ç»­SQLçš„é›†ä½“æˆåŠŸæˆ–é›†ä½“æ’¤é”€ã€‚</span><br><span class="line"> Â  Â - äº‹åŠ¡æ˜¯æ•°æ®åº“åœ¨æ•°æ®æ™šè‡ªä¹ æ–¹é¢çš„ä¸€ä¸ªåŠŸèƒ½ã€‚</span><br><span class="line"> Â  Â - éœ€è¦åˆ©ç”¨ InnoDB æˆ– BDB å­˜å‚¨å¼•æ“ï¼Œå¯¹è‡ªåŠ¨æäº¤çš„ç‰¹æ€§æ”¯æŒå®Œæˆã€‚</span><br><span class="line"> Â  Â - InnoDBè¢«ç§°ä¸ºäº‹åŠ¡å®‰å…¨å‹å¼•æ“ã€‚</span><br><span class="line">-- äº‹åŠ¡å¼€å¯</span><br><span class="line"> Â  Â START TRANSACTION; æˆ–è€… BEGIN;</span><br><span class="line"> Â  Â å¼€å¯äº‹åŠ¡åï¼Œæ‰€æœ‰è¢«æ‰§è¡Œçš„SQLè¯­å¥å‡è¢«è®¤ä½œå½“å‰äº‹åŠ¡å†…çš„SQLè¯­å¥ã€‚</span><br><span class="line">-- äº‹åŠ¡æäº¤</span><br><span class="line"> Â  Â COMMIT;</span><br><span class="line">-- äº‹åŠ¡å›æ»š</span><br><span class="line"> Â  Â ROLLBACK;</span><br><span class="line"> Â  Â å¦‚æœéƒ¨åˆ†æ“ä½œå‘ç”Ÿé—®é¢˜ï¼Œæ˜ å°„åˆ°äº‹åŠ¡å¼€å¯å‰ã€‚</span><br><span class="line">-- äº‹åŠ¡çš„ç‰¹æ€§</span><br><span class="line"> Â  Â 1. åŸå­æ€§ï¼ˆAtomicityï¼‰</span><br><span class="line"> Â  Â  Â  Â äº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œäº‹åŠ¡ä¸­çš„æ“ä½œè¦ä¹ˆéƒ½å‘ç”Ÿï¼Œè¦ä¹ˆéƒ½ä¸å‘ç”Ÿã€‚</span><br><span class="line"> Â  Â 2. ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰</span><br><span class="line"> Â  Â  Â  Â äº‹åŠ¡å‰åæ•°æ®çš„å®Œæ•´æ€§å¿…é¡»ä¿æŒä¸€è‡´ã€‚</span><br><span class="line"> Â  Â  Â  Â - äº‹åŠ¡å¼€å§‹å’Œç»“æŸæ—¶ï¼Œå¤–éƒ¨æ•°æ®ä¸€è‡´</span><br><span class="line"> Â  Â  Â  Â - åœ¨æ•´ä¸ªäº‹åŠ¡è¿‡ç¨‹ä¸­ï¼Œæ“ä½œæ˜¯è¿ç»­çš„</span><br><span class="line"> Â  Â 3. éš”ç¦»æ€§ï¼ˆIsolationï¼‰</span><br><span class="line"> Â  Â  Â  Â å¤šä¸ªç”¨æˆ·å¹¶å‘è®¿é—®æ•°æ®åº“æ—¶ï¼Œä¸€ä¸ªç”¨æˆ·çš„äº‹åŠ¡ä¸èƒ½è¢«å…¶å®ƒç”¨æˆ·çš„äº‹ç‰©æ‰€å¹²æ‰°ï¼Œå¤šä¸ªå¹¶å‘äº‹åŠ¡ä¹‹é—´çš„æ•°æ®è¦ç›¸äº’éš”ç¦»ã€‚</span><br><span class="line"> Â  Â 4. æŒä¹…æ€§ï¼ˆDurabilityï¼‰</span><br><span class="line"> Â  Â  Â  Â ä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦è¢«æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®æ”¹å˜å°±æ˜¯æ°¸ä¹…æ€§çš„ã€‚</span><br><span class="line">-- äº‹åŠ¡çš„å®ç°</span><br><span class="line"> Â  Â 1. è¦æ±‚æ˜¯äº‹åŠ¡æ”¯æŒçš„è¡¨ç±»å‹</span><br><span class="line"> Â  Â 2. æ‰§è¡Œä¸€ç»„ç›¸å…³çš„æ“ä½œå‰å¼€å¯äº‹åŠ¡</span><br><span class="line"> Â  Â 3. æ•´ç»„æ“ä½œå®Œæˆåï¼Œéƒ½æˆåŠŸï¼Œåˆ™æäº¤ï¼›å¦‚æœå­˜åœ¨å¤±è´¥ï¼Œé€‰æ‹©å›æ»šï¼Œåˆ™ä¼šå›åˆ°äº‹åŠ¡å¼€å§‹çš„å¤‡ä»½ç‚¹ã€‚</span><br><span class="line">-- äº‹åŠ¡çš„åŸç†</span><br><span class="line"> Â  Â åˆ©ç”¨InnoDBçš„è‡ªåŠ¨æäº¤(autocommit)ç‰¹æ€§å®Œæˆã€‚</span><br><span class="line"> Â  Â æ™®é€šçš„MySQLæ‰§è¡Œè¯­å¥åï¼Œå½“å‰çš„æ•°æ®æäº¤æ“ä½œå‡å¯è¢«å…¶ä»–å®¢æˆ·ç«¯å¯è§ã€‚</span><br><span class="line"> Â  Â è€Œäº‹åŠ¡æ˜¯æš‚æ—¶å…³é—­â€œè‡ªåŠ¨æäº¤â€æœºåˆ¶ï¼Œéœ€è¦commitæäº¤æŒä¹…åŒ–æ•°æ®æ“ä½œã€‚</span><br><span class="line">-- æ³¨æ„</span><br><span class="line"> Â  Â 1. æ•°æ®å®šä¹‰è¯­è¨€ï¼ˆDDLï¼‰è¯­å¥ä¸èƒ½è¢«å›æ»šï¼Œæ¯”å¦‚åˆ›å»ºæˆ–å–æ¶ˆæ•°æ®åº“çš„è¯­å¥ï¼Œå’Œåˆ›å»ºã€å–æ¶ˆæˆ–æ›´æ”¹è¡¨æˆ–å­˜å‚¨çš„å­ç¨‹åºçš„è¯­å¥ã€‚</span><br><span class="line"> Â  Â 2. äº‹åŠ¡ä¸èƒ½è¢«åµŒå¥—</span><br><span class="line">-- ä¿å­˜ç‚¹</span><br><span class="line"> Â  Â SAVEPOINT ä¿å­˜ç‚¹åç§° -- è®¾ç½®ä¸€ä¸ªäº‹åŠ¡ä¿å­˜ç‚¹</span><br><span class="line"> Â  Â ROLLBACK TO SAVEPOINT ä¿å­˜ç‚¹åç§° -- å›æ»šåˆ°ä¿å­˜ç‚¹</span><br><span class="line"> Â  Â RELEASE SAVEPOINT ä¿å­˜ç‚¹åç§° -- åˆ é™¤ä¿å­˜ç‚¹</span><br><span class="line">-- InnoDBè‡ªåŠ¨æäº¤ç‰¹æ€§è®¾ç½®</span><br><span class="line"> Â  Â SET autocommit = 0|1; Â  0è¡¨ç¤ºå…³é—­è‡ªåŠ¨æäº¤ï¼Œ1è¡¨ç¤ºå¼€å¯è‡ªåŠ¨æäº¤ã€‚</span><br><span class="line"> Â  Â - å¦‚æœå…³é—­äº†ï¼Œé‚£æ™®é€šæ“ä½œçš„ç»“æœå¯¹å…¶ä»–å®¢æˆ·ç«¯ä¹Ÿä¸å¯è§ï¼Œéœ€è¦commitæäº¤åæ‰èƒ½æŒä¹…åŒ–æ•°æ®æ“ä½œã€‚</span><br><span class="line"> Â  Â - ä¹Ÿå¯ä»¥å…³é—­è‡ªåŠ¨æäº¤æ¥å¼€å¯äº‹åŠ¡ã€‚ä½†ä¸START TRANSACTIONä¸åŒçš„æ˜¯ï¼Œ</span><br><span class="line"> Â  Â  Â  Â SET autocommitæ˜¯æ°¸ä¹…æ”¹å˜æœåŠ¡å™¨çš„è®¾ç½®ï¼Œç›´åˆ°ä¸‹æ¬¡å†æ¬¡ä¿®æ”¹è¯¥è®¾ç½®ã€‚(é’ˆå¯¹å½“å‰è¿æ¥)</span><br><span class="line"> Â  Â  Â  Â è€ŒSTART TRANSACTIONè®°å½•å¼€å¯å‰çš„çŠ¶æ€ï¼Œè€Œä¸€æ—¦äº‹åŠ¡æäº¤æˆ–å›æ»šåå°±éœ€è¦å†æ¬¡å¼€å¯äº‹åŠ¡ã€‚(é’ˆå¯¹å½“å‰äº‹åŠ¡)</span><br></pre></td></tr></table></figure><h3 id="é”è¡¨"><a href="#é”è¡¨" class="headerlink" title="é”è¡¨"></a>é”è¡¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">è¡¨é”å®šåªç”¨äºé˜²æ­¢å…¶å®ƒå®¢æˆ·ç«¯è¿›è¡Œä¸æ­£å½“åœ°è¯»å–å’Œå†™å…¥</span><br><span class="line">MyISAM æ”¯æŒè¡¨é”ï¼ŒInnoDB æ”¯æŒè¡Œé”</span><br><span class="line">-- é”å®š</span><br><span class="line">    LOCK TABLES tbl_name [AS alias]</span><br><span class="line">-- è§£é”</span><br><span class="line">    UNLOCK TABLES</span><br></pre></td></tr></table></figure><h3 id="è§¦å‘å™¨"><a href="#è§¦å‘å™¨" class="headerlink" title="è§¦å‘å™¨"></a>è§¦å‘å™¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">   Â è§¦å‘ç¨‹åºæ˜¯ä¸è¡¨æœ‰å…³çš„å‘½åæ•°æ®åº“å¯¹è±¡ï¼Œå½“è¯¥è¡¨å‡ºç°ç‰¹å®šäº‹ä»¶æ—¶ï¼Œå°†æ¿€æ´»è¯¥å¯¹è±¡</span><br><span class="line"> Â  Â ç›‘å¬ï¼šè®°å½•çš„å¢åŠ ã€ä¿®æ”¹ã€åˆ é™¤ã€‚</span><br><span class="line">-- åˆ›å»ºè§¦å‘å™¨</span><br><span class="line">CREATE TRIGGER trigger_name trigger_time trigger_event ON tbl_name FOR EACH ROW trigger_stmt</span><br><span class="line"> Â  Â å‚æ•°ï¼š</span><br><span class="line"> Â  Â trigger_timeæ˜¯è§¦å‘ç¨‹åºçš„åŠ¨ä½œæ—¶é—´ã€‚å®ƒå¯ä»¥æ˜¯ before æˆ– afterï¼Œä»¥æŒ‡æ˜è§¦å‘ç¨‹åºæ˜¯åœ¨æ¿€æ´»å®ƒçš„è¯­å¥ä¹‹å‰æˆ–ä¹‹åè§¦å‘ã€‚</span><br><span class="line"> Â  Â trigger_eventæŒ‡æ˜äº†æ¿€æ´»è§¦å‘ç¨‹åºçš„è¯­å¥çš„ç±»å‹</span><br><span class="line"> Â  Â  Â  Â INSERTï¼šå°†æ–°è¡Œæ’å…¥è¡¨æ—¶æ¿€æ´»è§¦å‘ç¨‹åº</span><br><span class="line"> Â  Â  Â  Â UPDATEï¼šæ›´æ”¹æŸä¸€è¡Œæ—¶æ¿€æ´»è§¦å‘ç¨‹åº</span><br><span class="line"> Â  Â  Â  Â DELETEï¼šä»è¡¨ä¸­åˆ é™¤æŸä¸€è¡Œæ—¶æ¿€æ´»è§¦å‘ç¨‹åº</span><br><span class="line"> Â  Â tbl_nameï¼šç›‘å¬çš„è¡¨ï¼Œå¿…é¡»æ˜¯æ°¸ä¹…æ€§çš„è¡¨ï¼Œä¸èƒ½å°†è§¦å‘ç¨‹åºä¸TEMPORARYè¡¨æˆ–è§†å›¾å…³è”èµ·æ¥ã€‚</span><br><span class="line"> Â  Â trigger_stmtï¼šå½“è§¦å‘ç¨‹åºæ¿€æ´»æ—¶æ‰§è¡Œçš„è¯­å¥ã€‚æ‰§è¡Œå¤šä¸ªè¯­å¥ï¼Œå¯ä½¿ç”¨BEGIN...ENDå¤åˆè¯­å¥ç»“æ„</span><br><span class="line">-- åˆ é™¤</span><br><span class="line">DROP TRIGGER [schema_name.]trigger_name</span><br><span class="line">å¯ä»¥ä½¿ç”¨oldå’Œnewä»£æ›¿æ—§çš„å’Œæ–°çš„æ•°æ®</span><br><span class="line"> Â  Â æ›´æ–°æ“ä½œï¼Œæ›´æ–°å‰æ˜¯oldï¼Œæ›´æ–°åæ˜¯new.</span><br><span class="line"> Â  Â åˆ é™¤æ“ä½œï¼Œåªæœ‰old.</span><br><span class="line"> Â  Â å¢åŠ æ“ä½œï¼Œåªæœ‰new.</span><br><span class="line">-- æ³¨æ„</span><br><span class="line"> Â  Â 1. å¯¹äºå…·æœ‰ç›¸åŒè§¦å‘ç¨‹åºåŠ¨ä½œæ—¶é—´å’Œäº‹ä»¶çš„ç»™å®šè¡¨ï¼Œä¸èƒ½æœ‰ä¸¤ä¸ªè§¦å‘ç¨‹åºã€‚</span><br><span class="line"> Â  Â </span><br><span class="line">-- å­—ç¬¦è¿æ¥å‡½æ•°</span><br><span class="line">concat(str1,str2,...])</span><br><span class="line">concat_ws(separator,str1,str2,...)</span><br><span class="line"> </span><br><span class="line">-- åˆ†æ”¯è¯­å¥</span><br><span class="line">if æ¡ä»¶ then</span><br><span class="line"> Â  Â æ‰§è¡Œè¯­å¥</span><br><span class="line">elseif æ¡ä»¶ then</span><br><span class="line"> Â  Â æ‰§è¡Œè¯­å¥</span><br><span class="line">else</span><br><span class="line"> Â  Â æ‰§è¡Œè¯­å¥</span><br><span class="line">end if;</span><br><span class="line"> </span><br><span class="line">-- ä¿®æ”¹æœ€å¤–å±‚è¯­å¥ç»“æŸç¬¦</span><br><span class="line">delimiter è‡ªå®šä¹‰ç»“æŸç¬¦å·</span><br><span class="line"> Â  Â SQLè¯­å¥</span><br><span class="line">è‡ªå®šä¹‰ç»“æŸç¬¦å·</span><br><span class="line">delimiter ; Â  Â  -- ä¿®æ”¹å›åŸæ¥çš„åˆ†å·</span><br><span class="line"> </span><br><span class="line">-- è¯­å¥å—åŒ…è£¹</span><br><span class="line">begin</span><br><span class="line"> Â  Â è¯­å¥å—</span><br><span class="line">end</span><br><span class="line"> </span><br><span class="line">-- ç‰¹æ®Šçš„æ‰§è¡Œ</span><br><span class="line">1. åªè¦æ·»åŠ è®°å½•ï¼Œå°±ä¼šè§¦å‘ç¨‹åºã€‚</span><br><span class="line">2. Insert into on duplicate key update è¯­æ³•ä¼šè§¦å‘ï¼š</span><br><span class="line"> Â  Â å¦‚æœæ²¡æœ‰é‡å¤è®°å½•ï¼Œä¼šè§¦å‘ before insert, after insert;</span><br><span class="line"> Â  Â å¦‚æœæœ‰é‡å¤è®°å½•å¹¶æ›´æ–°ï¼Œä¼šè§¦å‘ before insert, before update, after update;</span><br><span class="line"> Â  Â å¦‚æœæœ‰é‡å¤è®°å½•ä½†æ˜¯æ²¡æœ‰å‘ç”Ÿæ›´æ–°ï¼Œåˆ™è§¦å‘ before insert, before update</span><br><span class="line">3. Replace è¯­æ³• å¦‚æœæœ‰è®°å½•ï¼Œåˆ™æ‰§è¡Œ before insert, before delete, after delete, after insert</span><br></pre></td></tr></table></figure><h3 id="SQLç¼–ç¨‹"><a href="#SQLç¼–ç¨‹" class="headerlink" title="SQLç¼–ç¨‹"></a>SQLç¼–ç¨‹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line">--// å±€éƒ¨å˜é‡ ----------</span><br><span class="line">-- å˜é‡å£°æ˜</span><br><span class="line">    declare var_name[,...] type [default value]</span><br><span class="line">    è¿™ä¸ªè¯­å¥è¢«ç”¨æ¥å£°æ˜å±€éƒ¨å˜é‡ã€‚è¦ç»™å˜é‡æä¾›ä¸€ä¸ªé»˜è®¤å€¼ï¼Œè¯·åŒ…å«ä¸€ä¸ªdefaultå­å¥ã€‚å€¼å¯ä»¥è¢«æŒ‡å®šä¸ºä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä¸éœ€è¦ä¸ºä¸€ä¸ªå¸¸æ•°ã€‚å¦‚æœæ²¡æœ‰defaultå­å¥ï¼Œåˆå§‹å€¼ä¸ºnullã€‚</span><br><span class="line">-- èµ‹å€¼</span><br><span class="line">    ä½¿ç”¨ set å’Œ select into è¯­å¥ä¸ºå˜é‡èµ‹å€¼ã€‚</span><br><span class="line">    - æ³¨æ„ï¼šåœ¨å‡½æ•°å†…æ˜¯å¯ä»¥ä½¿ç”¨å…¨å±€å˜é‡ï¼ˆç”¨æˆ·è‡ªå®šä¹‰çš„å˜é‡ï¼‰</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">--// å…¨å±€å˜é‡ ----------</span><br><span class="line">-- å®šä¹‰ã€èµ‹å€¼</span><br><span class="line">set è¯­å¥å¯ä»¥å®šä¹‰å¹¶ä¸ºå˜é‡èµ‹å€¼ã€‚</span><br><span class="line">set @var = value;</span><br><span class="line">ä¹Ÿå¯ä»¥ä½¿ç”¨select intoè¯­å¥ä¸ºå˜é‡åˆå§‹åŒ–å¹¶èµ‹å€¼ã€‚è¿™æ ·è¦æ±‚selectè¯­å¥åªèƒ½è¿”å›ä¸€è¡Œï¼Œä½†æ˜¯å¯ä»¥æ˜¯å¤šä¸ªå­—æ®µï¼Œå°±æ„å‘³ç€åŒæ—¶ä¸ºå¤šä¸ªå˜é‡è¿›è¡Œèµ‹å€¼ï¼Œå˜é‡çš„æ•°é‡éœ€è¦ä¸æŸ¥è¯¢çš„åˆ—æ•°ä¸€è‡´ã€‚</span><br><span class="line">è¿˜å¯ä»¥æŠŠèµ‹å€¼è¯­å¥çœ‹ä½œä¸€ä¸ªè¡¨è¾¾å¼ï¼Œé€šè¿‡selectæ‰§è¡Œå®Œæˆã€‚æ­¤æ—¶ä¸ºäº†é¿å…=è¢«å½“ä½œå…³ç³»è¿ç®—ç¬¦çœ‹å¾…ï¼Œä½¿ç”¨:=ä»£æ›¿ã€‚ï¼ˆsetè¯­å¥å¯ä»¥ä½¿ç”¨= å’Œ :=ï¼‰ã€‚</span><br><span class="line">select @var:=20;</span><br><span class="line">select @v1:=id, @v2=name from t1 limit 1;</span><br><span class="line">select * from tbl_name where @var:=30;</span><br><span class="line">select into å¯ä»¥å°†è¡¨ä¸­æŸ¥è¯¢è·å¾—çš„æ•°æ®èµ‹ç»™å˜é‡ã€‚</span><br><span class="line">    -| select max(height) into @max_height from tb;</span><br><span class="line">-- è‡ªå®šä¹‰å˜é‡å</span><br><span class="line">ä¸ºäº†é¿å…selectè¯­å¥ä¸­ï¼Œç”¨æˆ·è‡ªå®šä¹‰çš„å˜é‡ä¸ç³»ç»Ÿæ ‡è¯†ç¬¦ï¼ˆé€šå¸¸æ˜¯å­—æ®µåï¼‰å†²çªï¼Œç”¨æˆ·è‡ªå®šä¹‰å˜é‡åœ¨å˜é‡åå‰ä½¿ç”¨@ä½œä¸ºå¼€å§‹ç¬¦å·ã€‚</span><br><span class="line">@var=10;</span><br><span class="line">    - å˜é‡è¢«å®šä¹‰åï¼Œåœ¨æ•´ä¸ªä¼šè¯å‘¨æœŸéƒ½æœ‰æ•ˆï¼ˆç™»å½•åˆ°é€€å‡ºï¼‰</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">--// æ§åˆ¶ç»“æ„ ----------</span><br><span class="line">-- ifè¯­å¥</span><br><span class="line">if search_condition then</span><br><span class="line">    statement_list   </span><br><span class="line">[elseif search_condition then</span><br><span class="line">    statement_list]</span><br><span class="line">...</span><br><span class="line">[else</span><br><span class="line">    statement_list]</span><br><span class="line">end if;</span><br><span class="line">-- caseè¯­å¥</span><br><span class="line">CASE value WHEN [compare-value] THEN result</span><br><span class="line">[WHEN [compare-value] THEN result ...]</span><br><span class="line">[ELSE result]</span><br><span class="line">END</span><br><span class="line">-- whileå¾ªç¯</span><br><span class="line">[begin_label:] while search_condition do</span><br><span class="line">    statement_list</span><br><span class="line">end while [end_label];</span><br><span class="line">- å¦‚æœéœ€è¦åœ¨å¾ªç¯å†…æå‰ç»ˆæ­¢ whileå¾ªç¯ï¼Œåˆ™éœ€è¦ä½¿ç”¨æ ‡ç­¾ï¼›æ ‡ç­¾éœ€è¦æˆå¯¹å‡ºç°ã€‚</span><br><span class="line">    -- é€€å‡ºå¾ªç¯</span><br><span class="line">        é€€å‡ºæ•´ä¸ªå¾ªç¯ leave</span><br><span class="line">        é€€å‡ºå½“å‰å¾ªç¯ iterate</span><br><span class="line">        é€šè¿‡é€€å‡ºçš„æ ‡ç­¾å†³å®šé€€å‡ºå“ªä¸ªå¾ªç¯</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">--// å†…ç½®å‡½æ•° ----------</span><br><span class="line">-- æ•°å€¼å‡½æ•°</span><br><span class="line">abs(x)          -- ç»å¯¹å€¼ abs(-10.9) = 10</span><br><span class="line">format(x, d)    -- æ ¼å¼åŒ–åƒåˆ†ä½æ•°å€¼ format(1234567.456, 2) = 1,234,567.46</span><br><span class="line">ceil(x)         -- å‘ä¸Šå–æ•´ ceil(10.1) = 11</span><br><span class="line">floor(x)        -- å‘ä¸‹å–æ•´ floor (10.1) = 10</span><br><span class="line">round(x)        -- å››èˆäº”å…¥å»æ•´</span><br><span class="line">mod(m, n)       -- m%n m mod n æ±‚ä½™ 10%3=1</span><br><span class="line">pi()            -- è·å¾—åœ†å‘¨ç‡</span><br><span class="line">pow(m, n)       -- m^n</span><br><span class="line">sqrt(x)         -- ç®—æœ¯å¹³æ–¹æ ¹</span><br><span class="line">rand()          -- éšæœºæ•°</span><br><span class="line">truncate(x, d)  -- æˆªå–dä½å°æ•°</span><br><span class="line">-- æ—¶é—´æ—¥æœŸå‡½æ•°</span><br><span class="line">now(), current_timestamp();     -- å½“å‰æ—¥æœŸæ—¶é—´</span><br><span class="line">current_date();                 -- å½“å‰æ—¥æœŸ</span><br><span class="line">current_time();                 -- å½“å‰æ—¶é—´</span><br><span class="line">date(&apos;yyyy-mm-dd hh:ii:ss&apos;);    -- è·å–æ—¥æœŸéƒ¨åˆ†</span><br><span class="line">time(&apos;yyyy-mm-dd hh:ii:ss&apos;);    -- è·å–æ—¶é—´éƒ¨åˆ†</span><br><span class="line">date_format(&apos;yyyy-mm-dd hh:ii:ss&apos;, &apos;%d %y %a %d %m %b %j&apos;); -- æ ¼å¼åŒ–æ—¶é—´</span><br><span class="line">unix_timestamp();               -- è·å¾—unixæ—¶é—´æˆ³</span><br><span class="line">from_unixtime();                -- ä»æ—¶é—´æˆ³è·å¾—æ—¶é—´</span><br><span class="line">-- å­—ç¬¦ä¸²å‡½æ•°</span><br><span class="line">length(string)          -- stringé•¿åº¦ï¼Œå­—èŠ‚</span><br><span class="line">char_length(string)     -- stringçš„å­—ç¬¦ä¸ªæ•°</span><br><span class="line">substring(str, position [,length])      -- ä»strçš„positionå¼€å§‹,å–lengthä¸ªå­—ç¬¦</span><br><span class="line">replace(str ,search_str ,replace_str)   -- åœ¨strä¸­ç”¨replace_stræ›¿æ¢search_str</span><br><span class="line">instr(string ,substring)    -- è¿”å›substringé¦–æ¬¡åœ¨stringä¸­å‡ºç°çš„ä½ç½®</span><br><span class="line">concat(string [,...])   -- è¿æ¥å­—ä¸²</span><br><span class="line">charset(str)            -- è¿”å›å­—ä¸²å­—ç¬¦é›†</span><br><span class="line">lcase(string)           -- è½¬æ¢æˆå°å†™</span><br><span class="line">left(string, length)    -- ä»string2ä¸­çš„å·¦è¾¹èµ·å–lengthä¸ªå­—ç¬¦</span><br><span class="line">load_file(file_name)    -- ä»æ–‡ä»¶è¯»å–å†…å®¹</span><br><span class="line">locate(substring, string [,start_position]) -- åŒinstr,ä½†å¯æŒ‡å®šå¼€å§‹ä½ç½®</span><br><span class="line">lpad(string, length, pad)   -- é‡å¤ç”¨padåŠ åœ¨stringå¼€å¤´,ç›´åˆ°å­—ä¸²é•¿åº¦ä¸ºlength</span><br><span class="line">ltrim(string)           -- å»é™¤å‰ç«¯ç©ºæ ¼</span><br><span class="line">repeat(string, count)   -- é‡å¤countæ¬¡</span><br><span class="line">rpad(string, length, pad)   --åœ¨stråç”¨padè¡¥å……,ç›´åˆ°é•¿åº¦ä¸ºlength</span><br><span class="line">rtrim(string)           -- å»é™¤åç«¯ç©ºæ ¼</span><br><span class="line">strcmp(string1 ,string2)    -- é€å­—ç¬¦æ¯”è¾ƒä¸¤å­—ä¸²å¤§å°</span><br><span class="line">-- æµç¨‹å‡½æ•°</span><br><span class="line">case when [condition] then result [when [condition] then result ...] [else result] end   å¤šåˆ†æ”¯</span><br><span class="line">if(expr1,expr2,expr3)  åŒåˆ†æ”¯ã€‚</span><br><span class="line">-- èšåˆå‡½æ•°</span><br><span class="line">count()</span><br><span class="line">sum();</span><br><span class="line">max();</span><br><span class="line">min();</span><br><span class="line">avg();</span><br><span class="line">group_concat()</span><br><span class="line">-- å…¶ä»–å¸¸ç”¨å‡½æ•°</span><br><span class="line">md5();</span><br><span class="line">default();</span><br><span class="line"> </span><br><span class="line">--// å­˜å‚¨å‡½æ•°ï¼Œè‡ªå®šä¹‰å‡½æ•° ----------</span><br><span class="line">-- æ–°å»º</span><br><span class="line">    CREATE FUNCTION function_name (å‚æ•°åˆ—è¡¨) RETURNS è¿”å›å€¼ç±»å‹</span><br><span class="line">        å‡½æ•°ä½“</span><br><span class="line">    - å‡½æ•°åï¼Œåº”è¯¥åˆæ³•çš„æ ‡è¯†ç¬¦ï¼Œå¹¶ä¸”ä¸åº”è¯¥ä¸å·²æœ‰çš„å…³é”®å­—å†²çªã€‚</span><br><span class="line">    - ä¸€ä¸ªå‡½æ•°åº”è¯¥å±äºæŸä¸ªæ•°æ®åº“ï¼Œå¯ä»¥ä½¿ç”¨db_name.funciton_nameçš„å½¢å¼æ‰§è¡Œå½“å‰å‡½æ•°æ‰€å±æ•°æ®åº“ï¼Œå¦åˆ™ä¸ºå½“å‰æ•°æ®åº“ã€‚</span><br><span class="line">    - å‚æ•°éƒ¨åˆ†ï¼Œç”±&quot;å‚æ•°å&quot;å’Œ&quot;å‚æ•°ç±»å‹&quot;ç»„æˆã€‚å¤šä¸ªå‚æ•°ç”¨é€—å·éš”å¼€ã€‚</span><br><span class="line">    - å‡½æ•°ä½“ç”±å¤šæ¡å¯ç”¨çš„mysqlè¯­å¥ï¼Œæµç¨‹æ§åˆ¶ï¼Œå˜é‡å£°æ˜ç­‰è¯­å¥æ„æˆã€‚</span><br><span class="line">    - å¤šæ¡è¯­å¥åº”è¯¥ä½¿ç”¨ begin...end è¯­å¥å—åŒ…å«ã€‚</span><br><span class="line">    - ä¸€å®šè¦æœ‰ return è¿”å›å€¼è¯­å¥ã€‚</span><br><span class="line">-- åˆ é™¤</span><br><span class="line">    DROP FUNCTION [IF EXISTS] function_name;</span><br><span class="line">-- æŸ¥çœ‹</span><br><span class="line">    SHOW FUNCTION STATUS LIKE &apos;partten&apos;</span><br><span class="line">    SHOW CREATE FUNCTION function_name;</span><br><span class="line">-- ä¿®æ”¹</span><br><span class="line">    ALTER FUNCTION function_name å‡½æ•°é€‰é¡¹</span><br><span class="line"> </span><br><span class="line">--// å­˜å‚¨è¿‡ç¨‹ï¼Œè‡ªå®šä¹‰åŠŸèƒ½ ----------</span><br><span class="line">-- å®šä¹‰</span><br><span class="line">å­˜å‚¨å­˜å‚¨è¿‡ç¨‹ æ˜¯ä¸€æ®µä»£ç ï¼ˆè¿‡ç¨‹ï¼‰ï¼Œå­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„sqlç»„æˆã€‚</span><br><span class="line">ä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹é€šå¸¸ç”¨äºå®Œæˆä¸€æ®µä¸šåŠ¡é€»è¾‘ï¼Œä¾‹å¦‚æŠ¥åï¼Œäº¤ç­è´¹ï¼Œè®¢å•å…¥åº“ç­‰ã€‚</span><br><span class="line">è€Œä¸€ä¸ªå‡½æ•°é€šå¸¸ä¸“æ³¨ä¸æŸä¸ªåŠŸèƒ½ï¼Œè§†ä¸ºå…¶ä»–ç¨‹åºæœåŠ¡çš„ï¼Œéœ€è¦åœ¨å…¶ä»–è¯­å¥ä¸­è°ƒç”¨å‡½æ•°æ‰å¯ä»¥ï¼Œè€Œå­˜å‚¨è¿‡ç¨‹ä¸èƒ½è¢«å…¶ä»–è°ƒç”¨ï¼Œæ˜¯è‡ªå·±æ‰§è¡Œ é€šè¿‡callæ‰§è¡Œã€‚</span><br><span class="line">-- åˆ›å»º</span><br><span class="line">CREATE PROCEDURE sp_name (å‚æ•°åˆ—è¡¨)</span><br><span class="line">    è¿‡ç¨‹ä½“</span><br><span class="line">å‚æ•°åˆ—è¡¨ï¼šä¸åŒäºå‡½æ•°çš„å‚æ•°åˆ—è¡¨ï¼Œéœ€è¦æŒ‡æ˜å‚æ•°ç±»å‹</span><br><span class="line">INï¼Œè¡¨ç¤ºè¾“å…¥å‹</span><br><span class="line">OUTï¼Œè¡¨ç¤ºè¾“å‡ºå‹</span><br><span class="line">INOUTï¼Œè¡¨ç¤ºæ··åˆå‹</span><br><span class="line">æ³¨æ„ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">/* å­˜å‚¨è¿‡ç¨‹ */ ------------------</span><br><span class="line">å­˜å‚¨è¿‡ç¨‹æ˜¯ä¸€æ®µå¯æ‰§è¡Œæ€§ä»£ç çš„é›†åˆã€‚ç›¸æ¯”å‡½æ•°ï¼Œæ›´åå‘äºä¸šåŠ¡é€»è¾‘ã€‚</span><br><span class="line">è°ƒç”¨ï¼šCALL è¿‡ç¨‹å</span><br><span class="line">-- æ³¨æ„</span><br><span class="line">- æ²¡æœ‰è¿”å›å€¼ã€‚</span><br><span class="line">- åªèƒ½å•ç‹¬è°ƒç”¨ï¼Œä¸å¯å¤¹æ‚åœ¨å…¶ä»–è¯­å¥ä¸­</span><br><span class="line">-- å‚æ•°</span><br><span class="line">IN|OUT|INOUT å‚æ•°å æ•°æ®ç±»å‹</span><br><span class="line">IN      è¾“å…¥ï¼šåœ¨è°ƒç”¨è¿‡ç¨‹ä¸­ï¼Œå°†æ•°æ®è¾“å…¥åˆ°è¿‡ç¨‹ä½“å†…éƒ¨çš„å‚æ•°</span><br><span class="line">OUT     è¾“å‡ºï¼šåœ¨è°ƒç”¨è¿‡ç¨‹ä¸­ï¼Œå°†è¿‡ç¨‹ä½“å¤„ç†å®Œçš„ç»“æœè¿”å›åˆ°å®¢æˆ·ç«¯</span><br><span class="line">INOUT   è¾“å…¥è¾“å‡ºï¼šæ—¢å¯è¾“å…¥ï¼Œä¹Ÿå¯è¾“å‡º</span><br><span class="line">-- è¯­æ³•</span><br><span class="line">CREATE PROCEDURE è¿‡ç¨‹å (å‚æ•°åˆ—è¡¨)</span><br><span class="line">BEGIN</span><br><span class="line">    è¿‡ç¨‹ä½“</span><br><span class="line">END</span><br></pre></td></tr></table></figure><h3 id="ç”¨æˆ·å’Œæƒé™ç®¡ç†"><a href="#ç”¨æˆ·å’Œæƒé™ç®¡ç†" class="headerlink" title="ç”¨æˆ·å’Œæƒé™ç®¡ç†"></a>ç”¨æˆ·å’Œæƒé™ç®¡ç†</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">-- rootå¯†ç é‡ç½®</span><br><span class="line">1. åœæ­¢MySQLæœåŠ¡</span><br><span class="line">2.  [Linux] /usr/local/mysql/bin/safe_mysqld --skip-grant-tables &amp;amp;</span><br><span class="line">    [Windows] mysqld --skip-grant-tables</span><br><span class="line">3. use mysql;</span><br><span class="line">4. UPDATE `user` SET PASSWORD=PASSWORD(&quot;å¯†ç &quot;) WHERE `user` = &quot;root&quot;;</span><br><span class="line">5. FLUSH PRIVILEGES;</span><br><span class="line">ç”¨æˆ·ä¿¡æ¯è¡¨ï¼šmysql.user</span><br><span class="line">-- åˆ·æ–°æƒé™</span><br><span class="line">FLUSH PRIVILEGES;</span><br><span class="line">-- å¢åŠ ç”¨æˆ·</span><br><span class="line">CREATE USER ç”¨æˆ·å IDENTIFIED BY [PASSWORD] å¯†ç (å­—ç¬¦ä¸²)</span><br><span class="line">    - å¿…é¡»æ‹¥æœ‰mysqlæ•°æ®åº“çš„å…¨å±€CREATE USERæƒé™ï¼Œæˆ–æ‹¥æœ‰INSERTæƒé™ã€‚</span><br><span class="line">    - åªèƒ½åˆ›å»ºç”¨æˆ·ï¼Œä¸èƒ½èµ‹äºˆæƒé™ã€‚</span><br><span class="line">    - ç”¨æˆ·åï¼Œæ³¨æ„å¼•å·ï¼šå¦‚ &apos;user_name&apos;@&apos;192.168.1.1&apos;</span><br><span class="line">    - å¯†ç ä¹Ÿéœ€å¼•å·ï¼Œçº¯æ•°å­—å¯†ç ä¹Ÿè¦åŠ å¼•å·</span><br><span class="line">    - è¦åœ¨çº¯æ–‡æœ¬ä¸­æŒ‡å®šå¯†ç ï¼Œéœ€å¿½ç•¥PASSWORDå…³é”®è¯ã€‚è¦æŠŠå¯†ç æŒ‡å®šä¸ºç”±PASSWORD()å‡½æ•°è¿”å›çš„æ··ç¼–å€¼ï¼Œéœ€åŒ…å«å…³é”®å­—PASSWORD</span><br><span class="line">-- é‡å‘½åç”¨æˆ·</span><br><span class="line">RENAME USER old_user TO new_user</span><br><span class="line">-- è®¾ç½®å¯†ç </span><br><span class="line">SET PASSWORD = PASSWORD(&apos;å¯†ç &apos;)  -- ä¸ºå½“å‰ç”¨æˆ·è®¾ç½®å¯†ç </span><br><span class="line">SET PASSWORD FOR ç”¨æˆ·å = PASSWORD(&apos;å¯†ç &apos;) -- ä¸ºæŒ‡å®šç”¨æˆ·è®¾ç½®å¯†ç </span><br><span class="line">-- åˆ é™¤ç”¨æˆ·</span><br><span class="line">DROP USER ç”¨æˆ·å</span><br><span class="line">-- åˆ†é…æƒé™/æ·»åŠ ç”¨æˆ·</span><br><span class="line">GRANT æƒé™åˆ—è¡¨ ON è¡¨å TO ç”¨æˆ·å [IDENTIFIED BY [PASSWORD] &apos;password&apos;]</span><br><span class="line">    - all privileges è¡¨ç¤ºæ‰€æœ‰æƒé™</span><br><span class="line">    - *.* è¡¨ç¤ºæ‰€æœ‰åº“çš„æ‰€æœ‰è¡¨</span><br><span class="line">    - åº“å.è¡¨å è¡¨ç¤ºæŸåº“ä¸‹é¢çš„æŸè¡¨</span><br><span class="line">    GRANT ALL PRIVILEGES ON `pms`.* TO &apos;pms&apos;@&apos;%&apos; IDENTIFIED BY &apos;pms0817&apos;;</span><br><span class="line">-- æŸ¥çœ‹æƒé™</span><br><span class="line">SHOW GRANTS FOR ç”¨æˆ·å</span><br><span class="line">    -- æŸ¥çœ‹å½“å‰ç”¨æˆ·æƒé™</span><br><span class="line">    SHOW GRANTS; æˆ– SHOW GRANTS FOR CURRENT_USER; æˆ– SHOW GRANTS FOR CURRENT_USER();</span><br><span class="line">-- æ’¤æ¶ˆæƒé™</span><br><span class="line">REVOKE æƒé™åˆ—è¡¨ ON è¡¨å FROM ç”¨æˆ·å</span><br><span class="line">REVOKE ALL PRIVILEGES, GRANT OPTION FROM ç”¨æˆ·å   -- æ’¤é”€æ‰€æœ‰æƒé™</span><br><span class="line">-- æƒé™å±‚çº§</span><br><span class="line">-- è¦ä½¿ç”¨GRANTæˆ–REVOKEï¼Œæ‚¨å¿…é¡»æ‹¥æœ‰GRANT OPTIONæƒé™ï¼Œå¹¶ä¸”æ‚¨å¿…é¡»ç”¨äºæ‚¨æ­£åœ¨æˆäºˆæˆ–æ’¤é”€çš„æƒé™ã€‚</span><br><span class="line">å…¨å±€å±‚çº§ï¼šå…¨å±€æƒé™é€‚ç”¨äºä¸€ä¸ªç»™å®šæœåŠ¡å™¨ä¸­çš„æ‰€æœ‰æ•°æ®åº“ï¼Œmysql.user</span><br><span class="line">    GRANT ALL ON *.*å’Œ REVOKE ALL ON *.*åªæˆäºˆå’Œæ’¤é”€å…¨å±€æƒé™ã€‚</span><br><span class="line">æ•°æ®åº“å±‚çº§ï¼šæ•°æ®åº“æƒé™é€‚ç”¨äºä¸€ä¸ªç»™å®šæ•°æ®åº“ä¸­çš„æ‰€æœ‰ç›®æ ‡ï¼Œmysql.db, mysql.host</span><br><span class="line">    GRANT ALL ON db_name.*å’ŒREVOKE ALL ON db_name.*åªæˆäºˆå’Œæ’¤é”€æ•°æ®åº“æƒé™ã€‚</span><br><span class="line">è¡¨å±‚çº§ï¼šè¡¨æƒé™é€‚ç”¨äºä¸€ä¸ªç»™å®šè¡¨ä¸­çš„æ‰€æœ‰åˆ—ï¼Œmysql.talbes_priv</span><br><span class="line">    GRANT ALL ON db_name.tbl_nameå’ŒREVOKE ALL ON db_name.tbl_nameåªæˆäºˆå’Œæ’¤é”€è¡¨æƒé™ã€‚</span><br><span class="line">åˆ—å±‚çº§ï¼šåˆ—æƒé™é€‚ç”¨äºä¸€ä¸ªç»™å®šè¡¨ä¸­çš„å•ä¸€åˆ—ï¼Œmysql.columns_priv</span><br><span class="line">    å½“ä½¿ç”¨REVOKEæ—¶ï¼Œæ‚¨å¿…é¡»æŒ‡å®šä¸è¢«æˆæƒåˆ—ç›¸åŒçš„åˆ—ã€‚</span><br><span class="line">-- æƒé™åˆ—è¡¨</span><br><span class="line">ALL [PRIVILEGES]    -- è®¾ç½®é™¤GRANT OPTIONä¹‹å¤–çš„æ‰€æœ‰ç®€å•æƒé™</span><br><span class="line">ALTER   -- å…è®¸ä½¿ç”¨ALTER TABLE</span><br><span class="line">ALTER ROUTINE   -- æ›´æ”¹æˆ–å–æ¶ˆå·²å­˜å‚¨çš„å­ç¨‹åº</span><br><span class="line">CREATE  -- å…è®¸ä½¿ç”¨CREATE TABLE</span><br><span class="line">CREATE ROUTINE  -- åˆ›å»ºå·²å­˜å‚¨çš„å­ç¨‹åº</span><br><span class="line">CREATE TEMPORARY TABLES     -- å…è®¸ä½¿ç”¨CREATE TEMPORARY TABLE</span><br><span class="line">CREATE USER     -- å…è®¸ä½¿ç”¨CREATE USER, DROP USER, RENAME USERå’ŒREVOKE ALL PRIVILEGESã€‚</span><br><span class="line">CREATE VIEW     -- å…è®¸ä½¿ç”¨CREATE VIEW</span><br><span class="line">DELETE  -- å…è®¸ä½¿ç”¨DELETE</span><br><span class="line">DROP    -- å…è®¸ä½¿ç”¨DROP TABLE</span><br><span class="line">EXECUTE     -- å…è®¸ç”¨æˆ·è¿è¡Œå·²å­˜å‚¨çš„å­ç¨‹åº</span><br><span class="line">FILE    -- å…è®¸ä½¿ç”¨SELECT...INTO OUTFILEå’ŒLOAD DATA INFILE</span><br><span class="line">INDEX   -- å…è®¸ä½¿ç”¨CREATE INDEXå’ŒDROP INDEX</span><br><span class="line">INSERT  -- å…è®¸ä½¿ç”¨INSERT</span><br><span class="line">LOCK TABLES     -- å…è®¸å¯¹æ‚¨æ‹¥æœ‰SELECTæƒé™çš„è¡¨ä½¿ç”¨LOCK TABLES</span><br><span class="line">PROCESS     -- å…è®¸ä½¿ç”¨SHOW FULL PROCESSLIST</span><br><span class="line">REFERENCES  -- æœªè¢«å®æ–½</span><br><span class="line">RELOAD  -- å…è®¸ä½¿ç”¨FLUSH</span><br><span class="line">REPLICATION CLIENT  -- å…è®¸ç”¨æˆ·è¯¢é—®ä»å±æœåŠ¡å™¨æˆ–ä¸»æœåŠ¡å™¨çš„åœ°å€</span><br><span class="line">REPLICATION SLAVE   -- ç”¨äºå¤åˆ¶å‹ä»å±æœåŠ¡å™¨ï¼ˆä»ä¸»æœåŠ¡å™¨ä¸­è¯»å–äºŒè¿›åˆ¶æ—¥å¿—äº‹ä»¶ï¼‰</span><br><span class="line">SELECT  -- å…è®¸ä½¿ç”¨SELECT</span><br><span class="line">SHOW DATABASES  -- æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“</span><br><span class="line">SHOW VIEW   -- å…è®¸ä½¿ç”¨SHOW CREATE VIEW</span><br><span class="line">SHUTDOWN    -- å…è®¸ä½¿ç”¨mysqladmin shutdown</span><br><span class="line">SUPER   -- å…è®¸ä½¿ç”¨CHANGE MASTER, KILL, PURGE MASTER LOGSå’ŒSET GLOBALè¯­å¥ï¼Œmysqladmin debugå‘½ä»¤ï¼›å…è®¸æ‚¨è¿æ¥ï¼ˆä¸€æ¬¡ï¼‰ï¼Œå³ä½¿å·²è¾¾åˆ°max_connectionsã€‚</span><br><span class="line">UPDATE  -- å…è®¸ä½¿ç”¨UPDATE</span><br><span class="line">USAGE   -- â€œæ— æƒé™â€çš„åŒä¹‰è¯</span><br><span class="line">GRANT OPTION    -- å…è®¸æˆäºˆæƒé™</span><br></pre></td></tr></table></figure><h3 id="è¡¨ç»´æŠ¤"><a href="#è¡¨ç»´æŠ¤" class="headerlink" title="è¡¨ç»´æŠ¤"></a>è¡¨ç»´æŠ¤</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- åˆ†æå’Œå­˜å‚¨è¡¨çš„å…³é”®å­—åˆ†å¸ƒ</span><br><span class="line">ANALYZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE è¡¨å ...</span><br><span class="line">-- æ£€æŸ¥ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨æ˜¯å¦æœ‰é”™è¯¯</span><br><span class="line">CHECK TABLE tbl_name [, tbl_name] ... [option] ...</span><br><span class="line">option = &#123;QUICK | FAST | MEDIUM | EXTENDED | CHANGED&#125;</span><br><span class="line">-- æ•´ç†æ•°æ®æ–‡ä»¶çš„ç¢ç‰‡</span><br><span class="line">OPTIMIZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name [, tbl_name] ...</span><br></pre></td></tr></table></figure><h3 id="æ‚é¡¹"><a href="#æ‚é¡¹" class="headerlink" title="æ‚é¡¹"></a>æ‚é¡¹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1. å¯ç”¨åå¼•å·ï¼ˆ`ï¼‰ä¸ºæ ‡è¯†ç¬¦ï¼ˆåº“åã€è¡¨åã€å­—æ®µåã€ç´¢å¼•ã€åˆ«åï¼‰åŒ…è£¹ï¼Œä»¥é¿å…ä¸å…³é”®å­—é‡åï¼ä¸­æ–‡ä¹Ÿå¯ä»¥ä½œä¸ºæ ‡è¯†ç¬¦ï¼</span><br><span class="line">2. æ¯ä¸ªåº“ç›®å½•å­˜åœ¨ä¸€ä¸ªä¿å­˜å½“å‰æ•°æ®åº“çš„é€‰é¡¹æ–‡ä»¶db.optã€‚</span><br><span class="line">3. æ³¨é‡Šï¼š</span><br><span class="line">    å•è¡Œæ³¨é‡Š # æ³¨é‡Šå†…å®¹</span><br><span class="line">    å¤šè¡Œæ³¨é‡Š /* æ³¨é‡Šå†…å®¹ */</span><br><span class="line">    å•è¡Œæ³¨é‡Š -- æ³¨é‡Šå†…å®¹     (æ ‡å‡†SQLæ³¨é‡Šé£æ ¼ï¼Œè¦æ±‚åŒç ´æŠ˜å·ååŠ ä¸€ç©ºæ ¼ç¬¦ï¼ˆç©ºæ ¼ã€TABã€æ¢è¡Œç­‰ï¼‰)</span><br><span class="line">4. æ¨¡å¼é€šé…ç¬¦ï¼š</span><br><span class="line">    _   ä»»æ„å•ä¸ªå­—ç¬¦</span><br><span class="line">    %   ä»»æ„å¤šä¸ªå­—ç¬¦ï¼Œç”šè‡³åŒ…æ‹¬é›¶å­—ç¬¦</span><br><span class="line">    å•å¼•å·éœ€è¦è¿›è¡Œè½¬ä¹‰ &apos;</span><br><span class="line">5. CMDå‘½ä»¤è¡Œå†…çš„è¯­å¥ç»“æŸç¬¦å¯ä»¥ä¸º &quot;;&quot;, &quot;G&quot;, &quot;g&quot;ï¼Œä»…å½±å“æ˜¾ç¤ºç»“æœã€‚å…¶ä»–åœ°æ–¹è¿˜æ˜¯ç”¨åˆ†å·ç»“æŸã€‚delimiter å¯ä¿®æ”¹å½“å‰å¯¹è¯çš„è¯­å¥ç»“æŸç¬¦ã€‚</span><br><span class="line">6. SQLå¯¹å¤§å°å†™ä¸æ•æ„Ÿ</span><br><span class="line">7. æ¸…é™¤å·²æœ‰è¯­å¥ï¼šc</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaå¤šçº¿ç¨‹ä¹‹çº¿ç¨‹åŒæ­¥</title>
      <link href="/2019/11/20/java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B9%8B%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5/"/>
      <url>/2019/11/20/java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B9%8B%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5/</url>
      
        <content type="html"><![CDATA[<hr><hr><p>ç”¨ä¸€ä¸ªç®€å•çš„é¢˜ç›®æ¥è¯´æ˜çº¿ç¨‹åŒæ­¥çš„ä¸‰ç§æ–¹å¼ï¼Œé¢˜ç›®å¦‚ä¸‹ï¼š</p><p>â€‹        æ¨¡æ‹Ÿä¼ æ™ºæ’­å®¢çš„ä¸‰ä¸ªè€å¸ˆåŒæ—¶åˆ†å‘80ä»½å­¦ä¹ ç¬”è®°ï¼Œæ¯ä¸ªè€å¸ˆç›¸å½“äºä¸€ä¸ªçº¿ç¨‹ã€‚</p><h3 id="åŒæ­¥ä»£ç å—å®ç°"><a href="#åŒæ­¥ä»£ç å—å®ç°" class="headerlink" title="åŒæ­¥ä»£ç å—å®ç°"></a>åŒæ­¥ä»£ç å—å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Synclock</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> note = <span class="number">80</span>;</span><br><span class="line">    Object lock = <span class="keyword">new</span> Object();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">            <span class="keyword">synchronized</span>(lock)&#123;</span><br><span class="line">                <span class="keyword">if</span>(note &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName()+<span class="string">"è€å¸ˆæ­£åœ¨åˆ†å‘ç¬¬"</span>+ note-- +<span class="string">"ä»½å­¦ä¹ ç¬”è®°ã€‚"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="åŒæ­¥æ–¹æ³•å®ç°"><a href="#åŒæ­¥æ–¹æ³•å®ç°" class="headerlink" title="åŒæ­¥æ–¹æ³•å®ç°"></a>åŒæ­¥æ–¹æ³•å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SynMethods</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> note = <span class="number">80</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>)&#123;</span><br><span class="line">            SendNote();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">SendNote</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(note &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">100</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">"è€å¸ˆæ­£åœ¨åˆ†å‘ç¬¬"</span>+ note-- +<span class="string">"ä»½å­¦ä¹ ç¬”è®°ã€‚"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åŒæ­¥é”å®ç°"><a href="#åŒæ­¥é”å®ç°" class="headerlink" title="åŒæ­¥é”å®ç°"></a>åŒæ­¥é”å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SynLock</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> note = <span class="number">80</span>;</span><br><span class="line">    <span class="comment">//å®šä¹‰ä¸€ä¸ªé”å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Lock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>)&#123;</span><br><span class="line">            lock.lock();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">"è€å¸ˆæ­£åœ¨åˆ†å‘ç¬¬"</span>+ note-- +<span class="string">"ä»½å­¦ä¹ ç¬”è®°ã€‚"</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">                lock.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•ä»£ç "><a href="#æµ‹è¯•ä»£ç " class="headerlink" title="æµ‹è¯•ä»£ç "></a>æµ‹è¯•ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SynCodeBlock synCodeBlock = <span class="keyword">new</span> SynCodeBlock();</span><br><span class="line">        <span class="comment">//åˆ›å»ºå¹¶å¼€å¯ä¸‰ä¸ªçº¿ç¨‹ï¼Œæ¨¡æ‹Ÿä¸‰ä¸ªè€å¸ˆåˆ†å‘ç¬”è®°</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(synCodeBlock,<span class="string">"æ‰˜å°¼"</span>).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(synCodeBlock,<span class="string">"å¼ ä¸‰"</span>).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(synCodeBlock,<span class="string">"æå››"</span>).start();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        SynMethods synMethods = <span class="keyword">new</span> SynMethods();</span><br><span class="line">        <span class="keyword">new</span> Thread(synMethods,<span class="string">"æ‰˜å°¼"</span>).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(synMethods,<span class="string">"å¼ ä¸‰"</span>).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(synMethods,<span class="string">"æå››"</span>).start();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        SynLock synLock = <span class="keyword">new</span> SynLock();</span><br><span class="line">        <span class="keyword">new</span> Thread(synLock,<span class="string">"æ‰˜å°¼"</span>).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(synLock,<span class="string">"å¼ ä¸‰"</span>).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(synLock,<span class="string">"æå››"</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>åŒæ­¥ä»£ç å—ã€åŒæ­¥æ–¹æ³•ã€åŒæ­¥é”éƒ½æ˜¯å®ç°ä¸åŒçº¿ç¨‹å¯¹åŒä¸€èµ„æºçš„å…±çº¿é—®é¢˜ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> å¤šçº¿ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç‰›å®¢åœ¨çº¿ç¼–ç¨‹ä¹‹æ•°æ®åº“SQLå®æˆ˜</title>
      <link href="/2019/11/19/%E7%89%9B%E5%AE%A2%E5%9C%A8%E7%BA%BF%E7%BC%96%E7%A8%8B%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%93SQL%E5%AE%9E%E6%88%98/"/>
      <url>/2019/11/19/%E7%89%9B%E5%AE%A2%E5%9C%A8%E7%BA%BF%E7%BC%96%E7%A8%8B%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%93SQL%E5%AE%9E%E6%88%98/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€æŸ¥è¯¢æœ€æ™šå…¥èŒå‘˜å·¥çš„æ‰€æœ‰ä¿¡æ¯"><a href="#ä¸€ã€æŸ¥è¯¢æœ€æ™šå…¥èŒå‘˜å·¥çš„æ‰€æœ‰ä¿¡æ¯" class="headerlink" title="ä¸€ã€æŸ¥è¯¢æœ€æ™šå…¥èŒå‘˜å·¥çš„æ‰€æœ‰ä¿¡æ¯"></a>ä¸€ã€æŸ¥è¯¢æœ€æ™šå…¥èŒå‘˜å·¥çš„æ‰€æœ‰ä¿¡æ¯</h1><ul><li><strong>é¢˜ç›®æè¿°</strong></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥æ‰¾æœ€æ™šå…¥èŒå‘˜å·¥çš„æ‰€æœ‰ä¿¡æ¯</span><br><span class="line">CREATE TABLE `employees` (</span><br><span class="line">`emp_no` int(11) NOT NULL,</span><br><span class="line">`birth_date` date NOT NULL,</span><br><span class="line">`first_name` varchar(14) NOT NULL,</span><br><span class="line">`last_name` varchar(16) NOT NULL,</span><br><span class="line">`gender` char(1) NOT NULL,</span><br><span class="line">`hire_date` date NOT NULL,</span><br><span class="line">PRIMARY KEY (`emp_no`));</span><br></pre></td></tr></table></figure><a id="more"></a><ul><li><strong>SQLè¯­å¥</strong></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * </span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> hire_date = (<span class="keyword">select</span> <span class="keyword">max</span>(hire_date)<span class="keyword">from</span> employees);</span><br></pre></td></tr></table></figure><ul><li><p><strong>æ€»ç»“</strong></p><p>è€ƒå¯Ÿselectè¯­å¥çš„åµŒå¥—ä½¿ç”¨</p></li></ul><h1 id="äºŒã€æŸ¥æ‰¾å…¥èŒå‘˜å·¥æ—¶é—´æ’åå€’æ•°ç¬¬ä¸‰åçš„å‘˜å·¥æ‰€æœ‰ä¿¡æ¯"><a href="#äºŒã€æŸ¥æ‰¾å…¥èŒå‘˜å·¥æ—¶é—´æ’åå€’æ•°ç¬¬ä¸‰åçš„å‘˜å·¥æ‰€æœ‰ä¿¡æ¯" class="headerlink" title="äºŒã€æŸ¥æ‰¾å…¥èŒå‘˜å·¥æ—¶é—´æ’åå€’æ•°ç¬¬ä¸‰åçš„å‘˜å·¥æ‰€æœ‰ä¿¡æ¯"></a>äºŒã€æŸ¥æ‰¾å…¥èŒå‘˜å·¥æ—¶é—´æ’åå€’æ•°ç¬¬ä¸‰åçš„å‘˜å·¥æ‰€æœ‰ä¿¡æ¯</h1><ul><li><strong>é¢˜ç›®æè¿°</strong></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥æ‰¾å…¥èŒå‘˜å·¥æ—¶é—´æ’åå€’æ•°ç¬¬ä¸‰çš„å‘˜å·¥æ‰€æœ‰ä¿¡æ¯</span><br><span class="line">CREATE TABLE `employees` (</span><br><span class="line">`emp_no` int(11) NOT NULL,</span><br><span class="line">`birth_date` date NOT NULL,</span><br><span class="line">`first_name` varchar(14) NOT NULL,</span><br><span class="line">`last_name` varchar(16) NOT NULL,</span><br><span class="line">`gender` char(1) NOT NULL,</span><br><span class="line">`hire_date` date NOT NULL,</span><br><span class="line">PRIMARY KEY (`emp_no`));</span><br></pre></td></tr></table></figure><ul><li><strong>SQLè¯­å¥</strong></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span>*</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> hire_date <span class="keyword">desc</span> </span><br><span class="line"><span class="keyword">limit</span> <span class="number">2</span>,<span class="number">1</span>;</span><br></pre></td></tr></table></figure><ul><li><p><strong>æ€»ç»“</strong></p><p>order byä½œç”¨ï¼š</p><p>å¯¹è®°å½•è¿›è¡Œæ’åºï¼ˆé»˜è®¤å‡åºï¼‰ï¼Œdescä¸ºé™åºï¼Œascä¸ºå‡åºã€‚</p><p>limitä½œç”¨ï¼š</p><p>ç”¨äºé™åˆ¶æ˜¾ç¤ºçš„æ¡æ•°ã€‚</p><p>Limit [offset,] N<br> Offset: åç§»é‡,å³è·³è¿‡å‡ è¡Œï¼Œ0å¯ä¸å†™<br> N: å–å‡ºæ¡ç›®</p><p><conter> <img src="https://s2.ax1x.com/2019/11/19/Mg0c01.png" alt="Mg0c01.png"></conter></p></li></ul><h1 id="ä¸‰ã€æŸ¥æ‰¾å½“å‰è–ªæ°´è¯¦æƒ…ä»¥åŠéƒ¨é—¨ç¼–å·"><a href="#ä¸‰ã€æŸ¥æ‰¾å½“å‰è–ªæ°´è¯¦æƒ…ä»¥åŠéƒ¨é—¨ç¼–å·" class="headerlink" title="ä¸‰ã€æŸ¥æ‰¾å½“å‰è–ªæ°´è¯¦æƒ…ä»¥åŠéƒ¨é—¨ç¼–å·"></a>ä¸‰ã€æŸ¥æ‰¾å½“å‰è–ªæ°´è¯¦æƒ…ä»¥åŠéƒ¨é—¨ç¼–å·</h1><ul><li><strong>é¢˜ç›®æè¿°</strong></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥æ‰¾å„ä¸ªéƒ¨é—¨å½“å‰(to_date=&apos;9999-01-01&apos;)é¢†å¯¼å½“å‰è–ªæ°´è¯¦æƒ…ä»¥åŠå…¶å¯¹åº”éƒ¨é—¨ç¼–å·dept_no</span><br><span class="line">CREATE TABLE `dept_manager` (</span><br><span class="line">`dept_no` char(4) NOT NULL,</span><br><span class="line">`emp_no` int(11) NOT NULL,</span><br><span class="line">`from_date` date NOT NULL,</span><br><span class="line">`to_date` date NOT NULL,</span><br><span class="line">PRIMARY KEY (`emp_no`,`dept_no`));</span><br><span class="line">CREATE TABLE `salaries` (</span><br><span class="line">`emp_no` int(11) NOT NULL,</span><br><span class="line">`salary` int(11) NOT NULL,</span><br><span class="line">`from_date` date NOT NULL,</span><br><span class="line">`to_date` date NOT NULL,</span><br><span class="line">PRIMARY KEY (`emp_no`,`from_date`));</span><br></pre></td></tr></table></figure><ul><li><strong>SQLè¯­å¥</strong></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> salaries.*,dept_manager.dept_no </span><br><span class="line"><span class="keyword">from</span> salaries, dept_manager </span><br><span class="line"><span class="keyword">where</span> salaries.emp_no = dept_manager.emp_no</span><br><span class="line"><span class="keyword">and</span> salaries.to_date = <span class="string">"9999-01-01"</span></span><br><span class="line"><span class="keyword">and</span> dept_manager.to_date = <span class="string">"9999-01-01"</span>;</span><br></pre></td></tr></table></figure><ul><li><p><strong>æ€»ç»“</strong></p><p>å¤šæ¡ä»¶æŸ¥è¯¢ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç‰›å®¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè®¾è®¡æ¨¡å¼</title>
      <link href="/2019/11/18/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/11/18/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<hr><h1 id="ä¸€ã€è£…é¥°è€…æ¨¡å¼"><a href="#ä¸€ã€è£…é¥°è€…æ¨¡å¼" class="headerlink" title="ä¸€ã€è£…é¥°è€…æ¨¡å¼"></a>ä¸€ã€è£…é¥°è€…æ¨¡å¼</h1><p>åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–åœ°èŒè´£ã€‚å°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼ŒDecoratoræ¨¡å¼ç›¸æ¯”ç”Ÿæˆå­ç±»æ¥è¯´æ›´ä¸ºçµæ´»ã€‚</p><h2 id="é€‚ç”¨æ€§"><a href="#é€‚ç”¨æ€§" class="headerlink" title="é€‚ç”¨æ€§"></a>é€‚ç”¨æ€§</h2><ul><li>åœ¨ä¸å½±å“å…¶ä»–å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œä»¥åŠ¨æ€é€æ˜çš„æ–¹å¼ç»™å•ä¸ªå¯¹è±¡å¢åŠ èŒè´£ã€‚</li><li>å¤„ç†é‚£äº›å¯ä»¥æ’¤é”€çš„èŒè´£ã€‚</li><li>å½“ä¸èƒ½é‡‡ç”¨ç”Ÿæˆå­ç±»çš„æ–¹æ³•è¿›è¡Œæ‰©å……æ—¶ã€‚</li></ul><h2 id="å‚ä¸è€…"><a href="#å‚ä¸è€…" class="headerlink" title="å‚ä¸è€…"></a>å‚ä¸è€…</h2><ul><li><p>Component</p><p>å®šä¹‰ä¸€ä¸ªå¯¹è±¡æ¥å£ï¼Œå¯ä»¥ç»™è¿™äº›å¯¹è±¡åŠ¨æ€åœ°æ·»åŠ èŒè´£ã€‚</p></li><li><p>ConcereteComponent</p><p>å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥ç»™è¿™ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›èŒè´£ã€‚</p></li><li><p>Decorator</p><p>ç»´æŒä¸€ä¸ªæŒ‡å‘Componentå¯¹è±¡åœ°æŒ‡é’ˆï¼Œå¹¶å®šä¹‰ä¸€ä¸ªä¸Componentæ¥å£ä¸€è‡´åœ°æ¥å£</p></li><li><p>ConcreteDecorator</p><p>å‘ç»„ä»¶æ·»åŠ èŒè´£ã€‚</p></li></ul><a id="more"></a><h2 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><p><strong>Componet</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ConcereteComponent</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Man</span> <span class="title">impements</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">(ï¼‰&#123;</span></span></span><br><span class="line"><span class="function"><span class="params">        System.out.println(<span class="string">"ç”·äººåœ¨åƒé¥­ï¼"</span>)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Decorator</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Decorator</span> <span class="keyword">implements</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">protected</span> Person person;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPerson</span><span class="params">(Person person)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.person = person;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        person.eat();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ConcreteDecortor</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ManDecoratorA</span> <span class="keyword">extends</span> <span class="title">Decorator</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.eat();</span><br><span class="line">        reEat();</span><br><span class="line">        System.out.println(<span class="string">"ManDecoratorAç±»"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reEat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å†åƒä¸€é¡¿é¥­"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ManDecoratorB</span> <span class="keyword">extends</span> <span class="title">Decorator</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.eat();</span><br><span class="line">        System.out.println(<span class="string">"=========="</span>);</span><br><span class="line">        System.out.println(<span class="string">"ManDecoratorBç±»"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Test</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        Man man  = <span class="keyword">new</span> Man();</span><br><span class="line">        ManDecoratorA md1 = <span class="keyword">new</span> ManDecoratorA();</span><br><span class="line">        ManDecoratorB md2 = <span class="keyword">new</span> ManDecoratorB();</span><br><span class="line">        </span><br><span class="line">        md1.setPerson(man);</span><br><span class="line">        md2.setPerson(md1);</span><br><span class="line">        md2.eat();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>result</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ç”·äººåœ¨åƒ</span><br><span class="line">å†åƒä¸€é¡¿é¥­</span><br><span class="line">ManDecoratorAç±»</span><br><span class="line">===============</span><br><span class="line">ManDecoratorBç±»</span><br></pre></td></tr></table></figure><h1 id="äºŒã€å•ä¾‹æ¨¡å¼"><a href="#äºŒã€å•ä¾‹æ¨¡å¼" class="headerlink" title="äºŒã€å•ä¾‹æ¨¡å¼"></a>äºŒã€å•ä¾‹æ¨¡å¼</h1><p>ä¿è¯ä¸€ä¸ªç±»æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå®ä¾‹åŒ–å¯¹è±¡ï¼Œæä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ã€‚</p><h2 id="é€‚ç”¨æ€§-1"><a href="#é€‚ç”¨æ€§-1" class="headerlink" title="é€‚ç”¨æ€§"></a>é€‚ç”¨æ€§</h2><ul><li>å½“ç±»åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹è€Œä¸”å®¢æˆ·å¯ä»¥ä»ä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„è®¿é—®ç‚¹è®¿é—®å®ƒæ—¶ã€‚</li><li>å½“è¿™ä¸ªå”¯ä¸€å®ä¾‹åº”è¯¥æ˜¯é€šè¿‡å­ç±»åŒ–å¯æ‰©å±•çš„ï¼Œå¹¶ä¸”å®¢æˆ·åº”è¯¥æ— éœ€æ›´æ”¹ä»£ç å°±èƒ½ä½¿ç”¨ä¸€ä¸ªæ‰©å±•çš„å®ä¾‹æ—¶ã€‚</li></ul><h2 id="å‚ä¸è€…-1"><a href="#å‚ä¸è€…-1" class="headerlink" title="å‚ä¸è€…"></a>å‚ä¸è€…</h2><ul><li><p><strong>Singleton</strong></p><p>å®šä¹‰ä¸€ä¸ªInstanceæ“ä½œï¼Œå…è®¸å®¢æˆ·è®¿é—®å®ƒçš„å”¯ä¸€å®ä¾‹ã€‚Instanceæ˜¯ä¸€ä¸ªç±»æ“ä½œã€‚</p></li></ul><h2 id="å•ä¾‹æ¨¡å¼ç‰¹ç‚¹"><a href="#å•ä¾‹æ¨¡å¼ç‰¹ç‚¹" class="headerlink" title="å•ä¾‹æ¨¡å¼ç‰¹ç‚¹"></a>å•ä¾‹æ¨¡å¼ç‰¹ç‚¹</h2><ul><li>å•ä¾‹ç±»åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ã€‚</li><li>å•ä¾‹ç±»å¿…é¡»è‡ªå·±åˆ›å»ºè‡ªå·±çš„å”¯ä¸€å®ä¾‹ã€‚</li><li>å•ä¾‹ç±»å¿…é¡»ç»™æ‰€æœ‰å…¶ä»–å¯¹è±¡æä¾›è¿™ä¸€å®ä¾‹ã€‚</li></ul><p>å•ä¾‹æ¨¡å¼ä¿è¯äº†å…¨å±€å¯¹è±¡çš„å”¯ä¸€æ€§ï¼Œæ¯”å¦‚ç³»ç»Ÿå¯åŠ¨è¯»å–é…ç½®æ–‡ä»¶å°±éœ€è¦å•ä¾‹ä¿è¯é…ç½®çš„ä¸€è‡´æ€§ã€‚</p><h2 id="å•ä¾‹æ¨¡å¼çš„çº¿ç¨‹å®‰å…¨é—®é¢˜"><a href="#å•ä¾‹æ¨¡å¼çš„çº¿ç¨‹å®‰å…¨é—®é¢˜" class="headerlink" title="å•ä¾‹æ¨¡å¼çš„çº¿ç¨‹å®‰å…¨é—®é¢˜"></a>å•ä¾‹æ¨¡å¼çš„çº¿ç¨‹å®‰å…¨é—®é¢˜</h2><p>ä¸€æ–¹é¢åœ¨è·å–å•ä¾‹çš„æ—¶å€™ï¼Œè¦ä¿è¯ä¸èƒ½äº§ç”Ÿå¤šä¸ªå®ä¾‹å¯¹è±¡ï¼Œåé¢ä¼šè¯¦ç»†è®²åˆ°äº”ç§å®ç°æ–¹å¼ï¼›</p><p>â€‹        å¦ä¸€æ–¹é¢ï¼Œåœ¨ä½¿ç”¨å•ä¾‹å¯¹è±¡çš„æ—¶å€™ï¼Œè¦æ³¨æ„å•ä¾‹å¯¹è±¡å†…çš„å®ä¾‹å˜é‡æ˜¯ä¼šè¢«å¤šçº¿ç¨‹å…±äº«çš„ï¼Œæ¨èä½¿ç”¨æ— çŠ¶æ€çš„å¯¹è±¡ï¼Œä¸ä¼šå› ä¸ºå¤šä¸ªçº¿ç¨‹çš„äº¤æ›¿è°ƒåº¦è€Œç ´åè‡ªèº«çŠ¶æ€å¯¼è‡´çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸¸ç”¨çš„VOï¼ŒDTOç­‰ï¼ˆå±€éƒ¨å˜é‡æ˜¯åœ¨ç”¨æˆ·æ ˆä¸­çš„ï¼Œè€Œä¸”ç”¨æˆ·æ ˆæœ¬èº«å°±æ˜¯çº¿ç¨‹ç§æœ‰çš„å†…å­˜åŒºåŸŸï¼Œæ‰€ä»¥ä¸å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼‰ã€‚</p><h2 id="å•ä¾‹æ¨¡å¼çš„é€‰æ‹©"><a href="#å•ä¾‹æ¨¡å¼çš„é€‰æ‹©" class="headerlink" title="å•ä¾‹æ¨¡å¼çš„é€‰æ‹©"></a>å•ä¾‹æ¨¡å¼çš„é€‰æ‹©</h2><p>â€‹        æˆ‘ä»¬æœ€æ—©ä½¿ç”¨çš„MVCæ¡†æ¶Struts1ä¸­çš„actionå°±æ˜¯å•ä¾‹æ¨¡å¼çš„ï¼Œè€Œåˆ°äº†Struts2å°±ä½¿ç”¨äº†å¤šä¾‹ã€‚åœ¨Struts1é‡Œï¼Œå½“æœ‰å¤šä¸ªè¯·æ±‚è®¿é—®ï¼Œæ¯ä¸ªéƒ½ä¼šåˆ†é…ä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œåœ¨è¿™äº›çº¿ç¨‹ï¼Œæ“ä½œçš„éƒ½æ˜¯åŒä¸€ä¸ªactionå¯¹è±¡ï¼Œæ¯ä¸ªç”¨æˆ·çš„æ•°æ®éƒ½æ˜¯ä¸åŒçš„ï¼Œè€Œactionå´åªæœ‰ä¸€ä¸ªã€‚åˆ°äº†Struts2ï¼Œ actionå¯¹è±¡ä¸ºæ¯ä¸€ä¸ªè¯·æ±‚äº§ç”Ÿä¸€ä¸ªå®ä¾‹ï¼Œå¹¶ä¸ä¼šå¸¦æ¥çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼ˆå®é™…ä¸Šservletå®¹å™¨ç»™æ¯ä¸ªè¯·æ±‚äº§ç”Ÿè®¸å¤šå¯ä¸¢å¼ƒçš„å¯¹è±¡ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å½±å“åˆ°æ€§èƒ½å’Œåƒåœ¾å›æ”¶é—®é¢˜ï¼Œæœ‰æ—¶é—´ä¼šåšä¸‹ç ”ç©¶ï¼‰ã€‚</p><h2 id="å®ç°å•ä¾‹æ¨¡å¼çš„æ–¹å¼"><a href="#å®ç°å•ä¾‹æ¨¡å¼çš„æ–¹å¼" class="headerlink" title="å®ç°å•ä¾‹æ¨¡å¼çš„æ–¹å¼"></a>å®ç°å•ä¾‹æ¨¡å¼çš„æ–¹å¼</h2><ul><li><strong>é¥¿æ±‰æ¨¡å¼ï¼ˆç«‹å³åŠ è½½ï¼‰</strong></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é¥¿æ±‰æ¨¡å¼</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton1</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ç§æœ‰æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton1 single = <span class="keyword">new</span> Singleton1();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//é™æ€å·¥å‚æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton1 <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> single;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹        é¥¿æ±‰æ¨¡å¼åœ¨ç±»åŠ è½½åˆå§‹åŒ–æ—¶å°±åˆ›å»ºå¥½ä¸€ä¸ªé™æ€çš„å¯¹è±¡ä¾›å¤–éƒ¨ä½¿ç”¨ï¼Œé™¤éç³»ç»Ÿé‡å¯ï¼Œè¿™ä¸ªå¯¹è±¡ä¸ä¼šæ”¹å˜ï¼Œæ‰€ä»¥æœ¬èº«å°±æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p><p>â€‹        Singletoné€šè¿‡å°†æ„é€ æ–¹æ³•é™å®šä¸ºprivateé¿å…äº†ç±»åœ¨å¤–éƒ¨è¢«å®ä¾‹åŒ–ï¼Œåœ¨åŒä¸€ä¸ªè™šæ‹ŸæœºèŒƒå›´å†…ï¼ŒSingletonçš„å”¯ä¸€å®ä¾‹åªèƒ½é€šè¿‡getInstance()æ–¹æ³•è®¿é—®ã€‚ï¼ˆäº‹å®ä¸Šï¼Œé€šè¿‡Javaåå°„æœºåˆ¶æ˜¯èƒ½å¤Ÿå®ä¾‹åŒ–æ„é€ æ–¹æ³•ä¸ºprivateçš„ç±»çš„ï¼Œé‚£åŸºæœ¬ä¸Šä¼šä½¿æ‰€æœ‰çš„Javaå•ä¾‹å®ç°å¤±æ•ˆã€‚æ­¤é—®é¢˜åœ¨æ­¤å¤„ä¸åšè®¨è®ºï¼Œå§‘ä¸”é—­ç€çœ¼å°±è®¤ä¸ºåå°„æœºåˆ¶ä¸å­˜åœ¨ã€‚ï¼‰</p><ul><li><strong>æ‡’æ±‰æ¨¡å¼ï¼ˆå»¶æ—¶åŠ è½½ï¼‰</strong></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ‡’æ±‰æ¨¡å¼</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton2</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ç§æœ‰æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton2 single = <span class="keyword">null</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton2 <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(single == <span class="keyword">null</span>)&#123;</span><br><span class="line">            single = <span class="keyword">new</span> Singleton2();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> single;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹        è¯¥ç¤ºä¾‹è™½ç„¶ç”¨å»¶è¿ŸåŠ è½½æ–¹å¼å®ç°äº†æ‡’æ±‰å¼å•ä¾‹ï¼Œä½†åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¼šäº§ç”Ÿå¤šä¸ªsingleå¯¹è±¡ï¼Œå¦‚ä½•æ”¹é€ è¯·çœ‹ä»¥ä¸‹æ–¹å¼ã€‚</p><p><strong>ä½¿ç”¨SynchronizedåŒæ­¥é”</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton3</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ç§æœ‰æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton3 single = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton3 <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (Singleton3.class) &#123;</span><br><span class="line">            <span class="keyword">if</span> (single == <span class="keyword">null</span>) &#123;</span><br><span class="line">                single = <span class="keyword">new</span> Singleton3();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> single;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹        åœ¨æ–¹æ³•ä¸ŠåŠ synchronizedåŒæ­¥é”æˆ–æ˜¯ç”¨åŒæ­¥ä»£ç å—å¯¹ç±»åŠ åŒæ­¥é”ï¼Œæ­¤ç§æ–¹å¼è™½ç„¶è§£å†³äº†å¤šä¸ªå®ä¾‹å¯¹è±¡é—®é¢˜ï¼Œä½†æ˜¯è¯¥æ–¹å¼è¿è¡Œæ•ˆç‡å´å¾ˆä½ä¸‹ï¼Œä¸‹ä¸€ä¸ªçº¿ç¨‹æƒ³è¦è·å–å¯¹è±¡ï¼Œå°±å¿…é¡»ç­‰å¾…ä¸Šä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾é”ä¹‹åï¼Œæ‰å¯ä»¥ç»§ç»­è¿è¡Œã€‚</p><p><strong>åŒå±‚æ ¡éªŒé”</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton4</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ç§æœ‰æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton4</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton4 single = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åŒå±‚æ ¡éªŒé”</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton4 <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (single == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (Singleton4.class) &#123;</span><br><span class="line">                <span class="keyword">if</span> (single == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    single = <span class="keyword">new</span> Singleton4();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> single;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨åŒé‡æ£€æŸ¥è¿›ä¸€æ­¥åšäº†ä¼˜åŒ–ï¼Œå¯ä»¥é¿å…æ•´ä¸ªæ–¹æ³•è¢«é”ï¼Œåªå¯¹éœ€è¦é”çš„ä»£ç éƒ¨åˆ†åŠ é”ï¼Œå¯ä»¥æé«˜æ‰§è¡Œæ•ˆç‡ã€‚</p><ul><li><strong>é™æ€å†…éƒ¨ç±»</strong></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton5</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton5</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é™æ€å†…éƒ¨ç±»</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">InnerObject</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> Singleton5 single = <span class="keyword">new</span> Singleton5();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton5 <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> InnerObject.single;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹        é™æ€å†…éƒ¨ç±»è™½ç„¶ä¿è¯äº†å•ä¾‹åœ¨å¤šçº¿ç¨‹å¹¶å‘ä¸‹çš„çº¿ç¨‹å®‰å…¨æ€§ï¼Œ<em>ä½†æ˜¯åœ¨é‡åˆ°åºåˆ—åŒ–å¯¹è±¡æ—¶ï¼Œé»˜è®¤çš„æ–¹å¼è¿è¡Œå¾—åˆ°çš„ç»“æœå°±æ˜¯å¤šä¾‹çš„</em>ã€‚è¿™ç§æƒ…å†µä¸å¤šåšè¯´æ˜äº†ï¼Œä½¿ç”¨æ—¶è¯·æ³¨æ„ã€‚</p><ul><li><strong>staticé™æ€ä»£ç å—</strong></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton6</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton6</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton6 single = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é™æ€ä»£ç å—</span></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        single = <span class="keyword">new</span> Singleton6();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton6 <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> single;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é™æ€ä»£ç å—åœ¨ç±»é¦–æ¬¡åŠ è½½çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡ã€‚</p><ul><li><strong>å†…éƒ¨æšä¸¾ç±»</strong></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonFactory</span> </span>&#123;</span><br><span class="line">    <span class="comment">//å†…éƒ¨æšä¸¾ç±»</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">enum</span> EnumSingleton&#123;</span><br><span class="line">        Singleton;</span><br><span class="line">        <span class="keyword">private</span> Singleton7 singleton;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æšä¸¾ç±»çš„æ„é€ æ–¹æ³•åœ¨ç±»åŠ è½½æ—¶è¢«å®ä¾‹åŒ–</span></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="title">EnumSingleton</span><span class="params">()</span></span>&#123;</span><br><span class="line">            singleton = <span class="keyword">new</span> Singleton7();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> Singleton7 <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> singleton;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton7 <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> EnumSingleton.Singleton.getInstance();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton7</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Singleton7</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æµ‹è¯•ä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> javaè®¾è®¡æ¨¡å¼.å•ä¾‹æ¨¡å¼;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SinglletonTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"é¥¿æ±‰æ¨¡å¼(ç«‹å³åŠ è½½)"</span>);</span><br><span class="line">        Singleton1 singleton1 = Singleton1.getInstance();</span><br><span class="line">        Singleton1 singleton2 = Singleton1.getInstance();</span><br><span class="line">        System.out.println(singleton1);</span><br><span class="line">        System.out.println(singleton2);</span><br><span class="line">        System.out.println(<span class="string">"æ‡’æ±‰æ¨¡å¼ï¼ˆå»¶æ—¶åŠ è½½ï¼‰"</span>);</span><br><span class="line">        Singleton2 singleton3 = Singleton2.getInstance();</span><br><span class="line">        Singleton2 singleton4 = Singleton2.getInstance();</span><br><span class="line">        System.out.println(singleton3);</span><br><span class="line">        System.out.println(singleton4);</span><br><span class="line">        System.out.println(<span class="string">"ä½¿ç”¨SynchronizedåŒæ­¥é”"</span>);</span><br><span class="line">        Singleton3 singleton5 = Singleton3.getInstance();</span><br><span class="line">        Singleton3 singleton6 = Singleton3.getInstance();</span><br><span class="line">        System.out.println(singleton5);</span><br><span class="line">        System.out.println(singleton6);</span><br><span class="line">        System.out.println(<span class="string">"åŒå±‚æ ¡éªŒé”"</span>);</span><br><span class="line">        Singleton4 singleton7 = Singleton4.getInstance();</span><br><span class="line">        Singleton4 singleton8 = Singleton4.getInstance();</span><br><span class="line">        System.out.println(singleton7);</span><br><span class="line">        System.out.println(singleton8);</span><br><span class="line">        System.out.println(<span class="string">"é™æ€å†…éƒ¨ç±»"</span>);</span><br><span class="line">        Singleton5 singleton9 = Singleton5.getInstance();</span><br><span class="line">        Singleton5 singleton10 = Singleton5.getInstance();</span><br><span class="line">        System.out.println(singleton9);</span><br><span class="line">        System.out.println(singleton10);</span><br><span class="line">        System.out.println(<span class="string">"staticé™æ€ä»£ç å—"</span>);</span><br><span class="line">        Singleton6 singleton11 = Singleton6.getInstance();</span><br><span class="line">        Singleton6 singleton12 = Singleton6.getInstance();</span><br><span class="line">        System.out.println(singleton11);</span><br><span class="line">        System.out.println(singleton12);</span><br><span class="line">        System.out.println(<span class="string">"å†…éƒ¨æšä¸¾ç±»"</span>);</span><br><span class="line">        Singleton7 singletonFactory = SingletonFactory.getInstance();</span><br><span class="line">        Singleton7 singletonFactory1 = SingletonFactory.getInstance();</span><br><span class="line">        System.out.println(singletonFactory);</span><br><span class="line">        System.out.println(singletonFactory1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æµ‹è¯•ç»“æœ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">é¥¿æ±‰æ¨¡å¼(ç«‹å³åŠ è½½)</span><br><span class="line">javaè®¾è®¡æ¨¡å¼.å•ä¾‹æ¨¡å¼.Singleton1@<span class="number">74</span>a14482</span><br><span class="line">javaè®¾è®¡æ¨¡å¼.å•ä¾‹æ¨¡å¼.Singleton1@<span class="number">74</span>a14482</span><br><span class="line">æ‡’æ±‰æ¨¡å¼ï¼ˆå»¶æ—¶åŠ è½½ï¼‰</span><br><span class="line">javaè®¾è®¡æ¨¡å¼.å•ä¾‹æ¨¡å¼.Singleton2@<span class="number">1540e19</span>d</span><br><span class="line">javaè®¾è®¡æ¨¡å¼.å•ä¾‹æ¨¡å¼.Singleton2@<span class="number">1540e19</span>d</span><br><span class="line">ä½¿ç”¨SynchronizedåŒæ­¥é”</span><br><span class="line">javaè®¾è®¡æ¨¡å¼.å•ä¾‹æ¨¡å¼.Singleton3@<span class="number">677327</span>b6</span><br><span class="line">javaè®¾è®¡æ¨¡å¼.å•ä¾‹æ¨¡å¼.Singleton3@<span class="number">677327</span>b6</span><br><span class="line">åŒå±‚æ ¡éªŒé”</span><br><span class="line">javaè®¾è®¡æ¨¡å¼.å•ä¾‹æ¨¡å¼.Singleton4@<span class="number">14</span>ae5a5</span><br><span class="line">javaè®¾è®¡æ¨¡å¼.å•ä¾‹æ¨¡å¼.Singleton4@<span class="number">14</span>ae5a5</span><br><span class="line">é™æ€å†…éƒ¨ç±»</span><br><span class="line">javaè®¾è®¡æ¨¡å¼.å•ä¾‹æ¨¡å¼.Singleton5@<span class="number">7f</span>31245a</span><br><span class="line">javaè®¾è®¡æ¨¡å¼.å•ä¾‹æ¨¡å¼.Singleton5@<span class="number">7f</span>31245a</span><br><span class="line"><span class="keyword">static</span>é™æ€ä»£ç å—</span><br><span class="line">javaè®¾è®¡æ¨¡å¼.å•ä¾‹æ¨¡å¼.Singleton6@<span class="number">6</span>d6f6e28</span><br><span class="line">javaè®¾è®¡æ¨¡å¼.å•ä¾‹æ¨¡å¼.Singleton6@<span class="number">6</span>d6f6e28</span><br><span class="line">å†…éƒ¨æšä¸¾ç±»</span><br><span class="line">javaè®¾è®¡æ¨¡å¼.å•ä¾‹æ¨¡å¼.Singleton7@<span class="number">135f</span>baa4</span><br><span class="line">javaè®¾è®¡æ¨¡å¼.å•ä¾‹æ¨¡å¼.Singleton7@<span class="number">135f</span>baa4</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç‰›å®¢åœ¨çº¿ç¼–ç¨‹ä¹‹å‰‘æŒ‡</title>
      <link href="/2019/11/18/%E7%89%9B%E5%AE%A2%E5%9C%A8%E7%BA%BF%E7%BC%96%E7%A8%8B%E4%B9%8B%E5%89%91%E6%8C%87/"/>
      <url>/2019/11/18/%E7%89%9B%E5%AE%A2%E5%9C%A8%E7%BA%BF%E7%BC%96%E7%A8%8B%E4%B9%8B%E5%89%91%E6%8C%87/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€æ ˆçš„å‹å…¥ã€å¼¹å‡ºåºåˆ—"><a href="#ä¸€ã€æ ˆçš„å‹å…¥ã€å¼¹å‡ºåºåˆ—" class="headerlink" title="ä¸€ã€æ ˆçš„å‹å…¥ã€å¼¹å‡ºåºåˆ—"></a>ä¸€ã€æ ˆçš„å‹å…¥ã€å¼¹å‡ºåºåˆ—</h1><h5 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h5><p>â€‹        è¾“å…¥ä¸¤ä¸ªæ•´æ•°åºåˆ—ï¼Œç¬¬ä¸€ä¸ªåºåˆ—è¡¨ç¤ºæ ˆçš„å‹å…¥é¡ºåºï¼Œè¯·åˆ¤æ–­ç¬¬äºŒä¸ªåºåˆ—æ˜¯å¦å¯èƒ½ä¸ºè¯¥æ ˆçš„å¼¹å‡ºé¡ºåºã€‚å‡è®¾å‹å…¥æ ˆçš„æ‰€æœ‰æ•°å­—å‡ä¸ç›¸ç­‰ã€‚ä¾‹å¦‚åºåˆ—1,2,3,4,5æ˜¯æŸæ ˆçš„å‹å…¥é¡ºåºï¼Œåºåˆ—4,5,3,2,1æ˜¯è¯¥å‹æ ˆåºåˆ—å¯¹åº”çš„ä¸€ä¸ªå¼¹å‡ºåºåˆ—ï¼Œä½†4,3,5,1,2å°±ä¸å¯èƒ½æ˜¯è¯¥å‹æ ˆåºåˆ—çš„å¼¹å‡ºåºåˆ—ã€‚ï¼ˆæ³¨æ„ï¼šè¿™ä¸¤ä¸ªåºåˆ—çš„é•¿åº¦æ˜¯ç›¸ç­‰çš„ï¼‰</p><a id="more"></a><h6 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h6><p>â€‹        ç”¨ä¸€ä¸ªæ ˆæ¥æ¨¡æ‹Ÿå…¥æ ˆå’Œå‡ºæ ˆçš„è¿‡ç¨‹ã€‚</p><h6 id="StackåŒ…ä¸­å¸¸ç”¨çš„æ–¹æ³•ï¼š"><a href="#StackåŒ…ä¸­å¸¸ç”¨çš„æ–¹æ³•ï¼š" class="headerlink" title="StackåŒ…ä¸­å¸¸ç”¨çš„æ–¹æ³•ï¼š"></a>StackåŒ…ä¸­å¸¸ç”¨çš„æ–¹æ³•ï¼š</h6><p>â€‹        push(); å°†ä¸€ä¸ªé¡¹ç›®æ¨åˆ°è¿™ä¸ªå †æ ˆçš„é¡¶éƒ¨ã€‚(ç»™å †æ ˆé‡Œæ·»åŠ å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯å…¥æ ˆã€‚)</p><p>â€‹        pop():åœ¨è¿™ä¸ªå †æ ˆçš„é¡¶éƒ¨åˆ é™¤é˜Ÿå½¢ï¼Œå¹¶è¿”å›è¯¥å¯¹è±¡çš„å€¼ä½œä¸ºè¯¥å‡½æ•°çš„è¿”å›å€¼ã€‚ï¼ˆå³å¼¹æ ˆï¼‰</p><p>â€‹        peek():æŸ¥çœ‹æ­¤å †æ ˆé¡¶éƒ¨çš„å¯¹è±¡ã€‚ï¼ˆå³æŸ¥çœ‹æ ˆé¡¶å…ƒç´ ï¼‰</p><p><strong>æ³¨ï¼šæ ˆçš„å¼¹æ ˆç‰¹ç‚¹æ˜¯å…ˆè¿›åå‡ºã€‚</strong></p><p>ä»£ç å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="comment">//å¯¼å…¥ æ ˆçš„åŒ…</span></span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">IsPopOrder</span><span class="params">(<span class="keyword">int</span> [] pushA,<span class="keyword">int</span> [] popA)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//å¦‚æœpushAï¼ŒpopAä¹‹é—´æœ‰ä¸€ä¸ªæ˜¯ç©ºçš„ï¼Œåˆ™æ˜¯ä¸åˆæ³•çš„ï¼Œè¿”å›false</span></span><br><span class="line">        <span class="keyword">if</span>(pushA == <span class="keyword">null</span> &amp;&amp; popA == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªè¾…åŠ©æ ˆæ¥æ¨¡æ‹Ÿå…¥æ ˆå‡ºæ ˆçš„è¿‡ç¨‹</span></span><br><span class="line">        Stack&lt;Integer&gt; stack = <span class="keyword">new</span> Stack&lt;Integer&gt;();</span><br><span class="line">        <span class="comment">//å®šä¹‰ä¸€ä¸ªindexæ¥è®°å½•å‡ºæ ˆpopAçš„ä½ç½®</span></span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//å¾ªç¯ï¼Œä¸€ç›´åˆ°æ‰€æœ‰å†…å®¹å…¥æ ˆå®Œæ¯•</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; pushA.length;i++)&#123;</span><br><span class="line">            stack.push(pushA[i]);</span><br><span class="line">            <span class="comment">//å¦‚æœç›®å‰çš„æ ˆé¡¶ä¸å‡ºæ ˆçš„é˜Ÿåˆ—ç›¸åŒåˆ™å‡ºæ ˆï¼Œç„¶åindex++</span></span><br><span class="line">            <span class="comment">//å¦‚æœæ ˆä¸ä¸ºç©ºï¼Œç»§ç»­å‡ºæ ˆã€‚</span></span><br><span class="line">            <span class="keyword">while</span>((!stack.isEmpty()) &amp;&amp; stack.peek() == popA[index])&#123;</span><br><span class="line">                stack.pop();</span><br><span class="line">                index++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¦‚æœæœ€åæ ˆä¸ºç©ºï¼Œåˆ™è¿”å›true</span></span><br><span class="line">        <span class="keyword">return</span> stack.isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="äºŒã€ä»ä¸Šå¾€ä¸‹æ‰“å°äºŒå‰æ ‘"><a href="#äºŒã€ä»ä¸Šå¾€ä¸‹æ‰“å°äºŒå‰æ ‘" class="headerlink" title="äºŒã€ä»ä¸Šå¾€ä¸‹æ‰“å°äºŒå‰æ ‘"></a>äºŒã€ä»ä¸Šå¾€ä¸‹æ‰“å°äºŒå‰æ ‘</h1><h5 id="é¢˜ç›®æè¿°-1"><a href="#é¢˜ç›®æè¿°-1" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h5><p>â€‹        ä»ä¸Šå¾€ä¸‹æ‰“å°å‡ºäºŒå‰æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œé€šå±‚èŠ‚ç‚¹ä»å·¦è‡³å³æ‰“å°ã€‚</p><h6 id="æ€è·¯ï¼š-1"><a href="#æ€è·¯ï¼š-1" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h6><p>â€‹        å±‚æ¬¡éå†,ç”¨arraylistæ¨¡æ‹Ÿä¸€ä¸ªé˜Ÿåˆ—æ¥å­˜å‚¨ç›¸åº”çš„TreeNodeã€‚</p><h6 id="ArrayListå’ŒLinkedListåŒ…ä¸­çš„å¸¸ç”¨æ–¹æ³•ï¼š"><a href="#ArrayListå’ŒLinkedListåŒ…ä¸­çš„å¸¸ç”¨æ–¹æ³•ï¼š" class="headerlink" title="ArrayListå’ŒLinkedListåŒ…ä¸­çš„å¸¸ç”¨æ–¹æ³•ï¼š"></a>ArrayListå’ŒLinkedListåŒ…ä¸­çš„å¸¸ç”¨æ–¹æ³•ï¼š</h6><p>â€‹        ArrayListå’ŒLinkedListéƒ½ç»§æ‰¿äº†Listç±»ï¼Œå…¶ä¸­addï¼ˆï¼‰æ–¹æ³•å°±æ˜¯ç»§æ‰¿è‡ªListç±»çš„ã€‚</p><p>â€‹        add():æ·»åŠ å¯¹è±¡è‡³é›†åˆ(Listã€ArrayListã€LinkedList)ä¸­ã€‚</p><p>â€‹        isEmpty():ç”¨æ¥åˆ¤æ–­é›†åˆä¸­æ˜¯å¦åŒ…å«å…ƒç´ å¯¹è±¡ã€‚è¿”å›å€¼ç±»å‹ä¸ºBooleanã€‚</p><p>â€‹        removeFirst():ç§»é™¤å¹¶è¿”å›é›†åˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ å¯¹è±¡ã€‚</p><p>ä»£ç å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">public class TreeNode &#123;</span></span><br><span class="line"><span class="comment">    int val = 0;</span></span><br><span class="line"><span class="comment">    TreeNode left = null;</span></span><br><span class="line"><span class="comment">    TreeNode right = null;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    public TreeNode(int val) &#123;</span></span><br><span class="line"><span class="comment">        this.val = val;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;Integer&gt; <span class="title">PrintFromTopToBottom</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//å¦‚æœäºŒå‰æ ‘ä¸ºç©ºåˆ™è¿”å›ä¸€ä¸ªç©ºçš„arrayList</span></span><br><span class="line">        <span class="keyword">if</span>(root == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//1.å®šä¹‰ä¸€ä¸ªArrayListå¯¹è±¡ç”¨æ¥å­˜å‚¨äºŒå‰æ ‘çš„èŠ‚ç‚¹å€¼val</span></span><br><span class="line">        ArrayList&lt;Integer&gt; arrayList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="comment">//2.å®šä¹‰ä¸€ä¸ªLinkedListå¯¹è±¡æ¥åšå±‚åºéå†</span></span><br><span class="line">        LinkedList&lt;TreeNode&gt; linkedList = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        linkedList.add(root);</span><br><span class="line">        <span class="keyword">while</span>(!linkedList.isEmpty())&#123;</span><br><span class="line">            TreeNode temp = linkedList.removeFirst();</span><br><span class="line">            <span class="keyword">if</span>(temp.left != <span class="keyword">null</span>)&#123;</span><br><span class="line">                linkedList.add(temp.left);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(temp.right != <span class="keyword">null</span>)&#123;</span><br><span class="line">                linkedList.add(temp.right);</span><br><span class="line">            &#125;</span><br><span class="line">            arrayList.add(temp.val);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> arrayList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ä¸‰ã€äºŒå‰æœç´¢æ ‘çš„ååºéå†åºåˆ—"><a href="#ä¸‰ã€äºŒå‰æœç´¢æ ‘çš„ååºéå†åºåˆ—" class="headerlink" title="ä¸‰ã€äºŒå‰æœç´¢æ ‘çš„ååºéå†åºåˆ—"></a>ä¸‰ã€äºŒå‰æœç´¢æ ‘çš„ååºéå†åºåˆ—</h1><h5 id="é¢˜ç›®æè¿°-2"><a href="#é¢˜ç›®æè¿°-2" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h5><p>â€‹        è¾“å…¥ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œåˆ¤æ–­è¯¥æ•°ç»„æ˜¯ä¸æ˜¯æŸäºŒå‰æœç´¢æ ‘çš„ååºéå†çš„ç»“æœã€‚å¦‚æœæ˜¯åˆ™è¾“å‡ºYes,å¦åˆ™è¾“å‡ºNoã€‚å‡è®¾è¾“å…¥çš„æ•°ç»„çš„ä»»æ„ä¸¤ä¸ªæ•°å­—éƒ½äº’ä¸ç›¸åŒã€‚</p><h6 id="æ€è·¯ï¼š-2"><a href="#æ€è·¯ï¼š-2" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h6><p>â€‹        é€’å½’è°ƒç”¨ã€‚</p><p>â€‹        å¯¹äºä¸€ä¸ªåºåˆ—Sï¼Œæœ€åä¸€ä¸ªå…ƒç´ æ˜¯lastï¼ˆå³å°±æ˜¯æ ¹èŠ‚ç‚¹å…ƒç´ ï¼‰ï¼Œè®¾å»æ‰lastå…ƒç´ åçš„åºåˆ—ä¸ºTï¼Œé‚£ä¹ˆTå¿…å®šæ»¡è¶³ï¼šå¯ä»¥åˆ†ä¸ºä¸¤æ®µï¼Œå‰ä¸€æ®µï¼ˆå³å·¦å­æ ‘ï¼‰å°äºlastï¼Œåä¸€æ®µï¼ˆå³å­æ ‘ï¼‰å¤§äºlastï¼Œä¸”ä¸¤æ®µéƒ½æ˜¯åˆæ³•çš„ååºåºåˆ—ã€‚</p><p>ä»£ç å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">VerifySquenceOfBST</span><span class="params">(<span class="keyword">int</span> [] sequence)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(sequence.length == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> judge(sequence,<span class="number">0</span>,sequence.length-<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">judge</span><span class="params">(<span class="keyword">int</span> [] arr,<span class="keyword">int</span> start,<span class="keyword">int</span> last)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(start &gt;= last)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//ååºéå†ï¼Œæœ€åçš„ä¸€ä¸ªä½ç½®å…ƒç´ å³æ˜¯æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">int</span> i = last;</span><br><span class="line">        <span class="comment">//æ‰¾åˆ°çš„iå³æ˜¯åˆ†å‰²å·¦å­æ ‘ä¸å³å­æ ‘çš„ä½ç½®ã€‚i-1çš„ä½ç½®åˆ°startä¸ºå·¦å­æ ‘ï¼Œiåˆ°last-1ä½ç½®ä¸ºå³å­æ ‘</span></span><br><span class="line">        <span class="comment">//å› ä¸ºäºŒå‰æ ‘çš„å·¦å­æ ‘çš„æ‰€æœ‰å…ƒç´ å°äºæ ¹èŠ‚ç‚¹çš„å€¼ï¼Œå³å­æ ‘çš„æ‰€æœ‰å…ƒç´ çš„å€¼å¤§äºæ ¹èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">        <span class="keyword">while</span>(i &gt; start &amp;&amp; arr[i-<span class="number">1</span>] &gt; arr[last])&#123;</span><br><span class="line">            --i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å·¦å­æ ‘çš„æ‰€æœ‰å…ƒç´ å€¼éƒ½è¦å°äºæ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i - <span class="number">1</span>;j &gt;= start;--j)&#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[j] &gt; arr[last])&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åœ¨é€’å½’çš„æ—¶å€™åˆ¤æ–­å·¦å­æ ‘å’Œå³å­æ ‘æ˜¯å¦æ»¡è¶³ååºéå†</span></span><br><span class="line">        <span class="keyword">return</span>(judge(arr,start,i-<span class="number">1</span>) &amp;&amp; judge(arr,i,last-<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å››ã€æŠŠæ•°ç»„æ’æˆæœ€å°çš„æ•°"><a href="#å››ã€æŠŠæ•°ç»„æ’æˆæœ€å°çš„æ•°" class="headerlink" title="å››ã€æŠŠæ•°ç»„æ’æˆæœ€å°çš„æ•°"></a>å››ã€æŠŠæ•°ç»„æ’æˆæœ€å°çš„æ•°</h1><h5 id="é¢˜ç›®æè¿°-3"><a href="#é¢˜ç›®æè¿°-3" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h5><p>â€‹        è¾“å…¥ä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„ï¼ŒæŠŠæ•°ç»„é‡Œæ‰€æœ‰æ•°å­—æ‹¼æ¥èµ·æ¥æ’æˆä¸€ä¸ªæ•°ï¼Œæ‰“å°èƒ½æ‹¼æ¥å‡ºçš„æ‰€æœ‰æ•°å­—ä¸­æœ€å°çš„ä¸€ä¸ªã€‚ä¾‹å¦‚è¾“å…¥æ•°ç»„{3ï¼Œ32ï¼Œ321}ï¼Œåˆ™æ‰“å°å‡ºè¿™ä¸‰ä¸ªæ•°å­—èƒ½æ’æˆçš„æœ€å°æ•°å­—ä¸º321323ã€‚</p><h6 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a><strong>æ€è·¯</strong></h6><p>â€‹        å†’æ³¡æ’åº</p><p>ä»£ç å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">PrintMinNumber</span><span class="params">(<span class="keyword">int</span> [] numbers)</span> </span>&#123;</span><br><span class="line">        String str = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;numbers.length;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&lt;numbers.length;j++)&#123;</span><br><span class="line">                String s1= numbers[i]+<span class="string">""</span>+numbers[j];</span><br><span class="line">                String s2= numbers[j]+<span class="string">""</span>+numbers[i];</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span>(s1.compareTo(s2)&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                    temp = numbers[j];</span><br><span class="line">                    numbers[j]=numbers[i];</span><br><span class="line">                    numbers[i] = temp;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;numbers.length;i++)&#123;</span><br><span class="line">            str += String.valueOf(numbers[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç‰›å®¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¤­åœ†æ›²çº¿å¯†ç ç³»ç»Ÿ</title>
      <link href="/2019/11/11/%E6%A4%AD%E5%9C%86%E6%9B%B2%E7%BA%BF%E5%AF%86%E7%A0%81%E5%AD%A6%E7%B3%BB%E7%BB%9F/"/>
      <url>/2019/11/11/%E6%A4%AD%E5%9C%86%E6%9B%B2%E7%BA%BF%E5%AF%86%E7%A0%81%E5%AD%A6%E7%B3%BB%E7%BB%9F/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¤­åœ†æ›²çº¿å¯†ç ç³»ç»Ÿ"><a href="#æ¤­åœ†æ›²çº¿å¯†ç ç³»ç»Ÿ" class="headerlink" title="æ¤­åœ†æ›²çº¿å¯†ç ç³»ç»Ÿ"></a>æ¤­åœ†æ›²çº¿å¯†ç ç³»ç»Ÿ</h1><h2 id="ä¸€ä¸ªç®€å•çš„RASç®—æ³•"><a href="#ä¸€ä¸ªç®€å•çš„RASç®—æ³•" class="headerlink" title="ä¸€ä¸ªç®€å•çš„RASç®—æ³•"></a>ä¸€ä¸ªç®€å•çš„RASç®—æ³•</h2><p>â€‹        RASå¯†ç ç³»ç»Ÿæœ€è®©äººå¤´ç–¼çš„é—®é¢˜å°±æ˜¯ï¼Œåœ¨åŠ è§£å¯†æˆ–è€…ç­¾åçš„æ—¶å€™éœ€è¦åºå¤§çš„è¿ç®—é‡ï¼Œæ‰€éœ€è¾ƒé•¿çš„è¿ç®—æ—¶é—´ã€‚å¯¹äºä¸€äº›å¤„ç†å™¨ä¸å¼ºå¤§çš„è®¾å¤‡ï¼Œæ¯”å¦‚æ‰‹æœºã€PDAï¼ˆPersonal Digital Assistantï¼‰æˆ–è€…åŠæ—¶å“åº”çš„ç³»ç»Ÿä¸å‹å¥½ã€‚å› æ­¤æœ‰äº†æ¤­åœ†æ›²çº¿å¯†ç ç³»ç»Ÿï¼ˆECCï¼‰ã€‚ECCè¿ç®—é‡è¾ƒå°‘ï¼Œå› æ­¤èƒ½æé«˜æ•ˆç‡ã€‚</p><a id="more"></a><h2 id="æ¤­åœ†æ›²çº¿çš„åŠ æ³•æ¦‚å¿µ"><a href="#æ¤­åœ†æ›²çº¿çš„åŠ æ³•æ¦‚å¿µ" class="headerlink" title="æ¤­åœ†æ›²çº¿çš„åŠ æ³•æ¦‚å¿µ"></a>æ¤­åœ†æ›²çº¿çš„åŠ æ³•æ¦‚å¿µ</h2><p><strong>ä¸­å¿ƒæ€æƒ³ï¼š</strong></p><p>â€‹        æ¤­åœ†æ›²çº¿çš„å¯†ç ç³»ç»Ÿä¸»è¦æ˜¯åˆ©ç”¨æ¤­åœ†æ›²çº¿æ‰€æ„æˆçš„æœ‰é™ç¾¤æ¥ä»£æ›¿ä¼ ç»Ÿçš„RSAæˆ–ElGamalæ‰€ä½¿ç”¨çš„æœ‰é™ç¾¤ï¼Œè¿™é‡Œæ‰€ä½¿ç”¨çš„æ¤­åœ†æ›²çº¿æ–¹ç¨‹å¼å¯ä»¥ç®€åŒ–ä¸º :<br>$$<br>y^2=x^3+ax+b<br>$$<br>å®ƒçš„æ›²çº¿æ°å¥½å¯¹ç§°äºy=0è¿™æ¡ç›´çº¿ï¼Œä½†åœ¨å†³å®šå‚æ•°aã€bæ—¶ï¼Œå¿…é¡»è®©æ›²çº¿æ²¡æœ‰é‡æ ¹ï¼ˆå¦‚æ­¤æ‰èƒ½ç¡®ä¿å”¯ä¸€è§£ï¼‰ï¼Œå› æ­¤aå’Œbå¿…é¡»æ»¡è¶³ï¼š<br>$$<br>4a^3+27b^2!=0<br>$$<br>â€‹        å†³å®šå‚æ•°aå’Œbåï¼Œå°±å¯ä»¥åœ¨æ¤­åœ†æ›²çº¿ä¸Šå®šä¹‰å‡ºä¸€ä¸ªæœ‰é™åŠ æ³•ç¾¤ï¼Œè¿™ä¸ªåŠ æ³•ä¸ä¸€èˆ¬çš„åŠ æ³•ä¸åŒï¼Œå®ƒçš„å‡ ä½•æ¦‚å¿µæ—¶ä»¤å…¶åŠ æ³•å•ä½å…ƒç´ ä¸ºä¸€æ— ç©·è¿œçš„ç‚¹Oï¼Œä¸”O=-Oï¼Œå¹¶ä¸”æ­¤åŠ æ³•å•ä½å…ƒç´ è¦æ»¡è¶³ï¼šè‹¥æ¤­åœ†æ›²çº¿ä¸ŠæŸä¸‰ç‚¹å…±çº¿çš„è¯ï¼Œå…¶å’Œå°±ç­‰äºOã€‚</p><p>â€‹        æ¤­åœ†æ›²çº¿çš„åŠ æ³•è¿ç®—æ˜¯å°†æ¤­åœ†æ›²çº¿ä¸Šä¸¤ä¸ªåæ ‡ç‚¹ç›¸åŠ ï¼Œä¾åæ ‡ç‚¹çš„ä½ç½®ä¸åŒå…±æœ‰å…±æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼Œå…¶åŠ æ³•çš„è¿‡ç¨‹éƒ½è¦æ»¡è¶³3ç‚¹å…±çº¿æ—¶å…¶å’Œä¸ºOçš„è¿™ä¸€é¡¹è¦æ±‚ã€‚</p><ul><li><h3 id="æ¤­åœ†æ›²çº¿ä¸Šçš„ä¸åŒåæ ‡ç‚¹ç›¸åŠ "><a href="#æ¤­åœ†æ›²çº¿ä¸Šçš„ä¸åŒåæ ‡ç‚¹ç›¸åŠ " class="headerlink" title="æ¤­åœ†æ›²çº¿ä¸Šçš„ä¸åŒåæ ‡ç‚¹ç›¸åŠ "></a>æ¤­åœ†æ›²çº¿ä¸Šçš„ä¸åŒåæ ‡ç‚¹ç›¸åŠ </h3><p>Aã€Bä¸ºæ¤­åœ†æ›²çº¿ä¸Šçš„ä¸åŒç‚¹ï¼Œå°†ä¸¤ä¸ªåæ ‡ç›¸åŠ ï¼Œå…¶åšæ³•å¦‚ä¸‹ï¼š</p><p>&lt;1&gt;.å…ˆæ‰¾å‡ºAä¸Bè¿™ä¸¤ç‚¹æ‰€æ„æˆçš„ç›´çº¿ã€‚</p><p>&lt;2&gt;.æ¥ç€æ‰¾å‡ºè¿™æ¡ç›´çº¿ä¸æ¤­åœ†æ›²çº¿çš„äº¤ç‚¹Rã€‚</p><p>&lt;3&gt;.ç”±äºAã€Bã€Rè¿™ä¸‰ç‚¹å…±çº¿ï¼Œæ ¹æ®æ¤­åœ†æ›²çº¿åŠ æ³•å®šä¹‰å¯çŸ¥A+B+R=O,å› æ­¤å¯æ±‚å¾—A+B=-Rï¼Œè¿™é‡Œ-Rè¡¨ç¤ºåæ ‡ç‚¹Rå¯¹y=0è¿™æ¡ç›´çº¿çš„å½±å°„ï¼Œä¹Ÿå°±æ˜¯Rå¯¹ç§°äºyè½´çš„åæ ‡ç‚¹ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ã€‚</p><p><a href="https://imgchr.com/i/MQLB59" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/11/11/MQLB59.md.png" alt="MQLB59.md.png"></a></p></li><li><h3 id="æ¤­åœ†æ›²çº¿ä¸Šç›¸åŒåæ ‡ç‚¹ç›¸åŠ "><a href="#æ¤­åœ†æ›²çº¿ä¸Šç›¸åŒåæ ‡ç‚¹ç›¸åŠ " class="headerlink" title="æ¤­åœ†æ›²çº¿ä¸Šç›¸åŒåæ ‡ç‚¹ç›¸åŠ "></a>æ¤­åœ†æ›²çº¿ä¸Šç›¸åŒåæ ‡ç‚¹ç›¸åŠ </h3><p>è‹¥æ¤­åœ†æ›²çº¿ä¸Šçš„ç›¸åŒç‚¹åšç›¸åŠ ï¼Œå…¶åšæ³•å¦‚ä¸‹ï¼š</p><p>&lt;1&gt;.æ‰¾å‡ºAç‚¹åœ¨æ¤­åœ†æ›²çº¿ä¸Šçš„åˆ‡çº¿ã€‚</p><p>&lt;2&gt;.æ‰¾å‡ºè¿™æ¡åˆ‡çº¿ä¸æ¤­åœ†æ›²çº¿çš„äº¤ç‚¹Rã€‚</p><p>&lt;3&gt;.å¯ä»¥çœ‹æˆAã€Aã€Rè¿™ä¸‰ç‚¹å…±çº¿ï¼Œæ ¹æ®æ¤­åœ†æ›²çº¿åŠ æ³•çš„å®šä¹‰å¯çŸ¥A+A+R=Oï¼Œå› æ­¤A+A=-R(å¦‚ä¸‹å›¾æ‰€ç¤º)ã€‚</p><p><a href="https://imgchr.com/i/Ml3d1J" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/11/11/Ml3d1J.md.png" alt="Ml3d1J.md.png"></a></p></li><li><h3 id="æ¤­åœ†æ›²çº¿ä¸Šä¸€åæ ‡ç‚¹ä¸æ— ç©·è¿œç‚¹ç›¸åŠ "><a href="#æ¤­åœ†æ›²çº¿ä¸Šä¸€åæ ‡ç‚¹ä¸æ— ç©·è¿œç‚¹ç›¸åŠ " class="headerlink" title="æ¤­åœ†æ›²çº¿ä¸Šä¸€åæ ‡ç‚¹ä¸æ— ç©·è¿œç‚¹ç›¸åŠ "></a>æ¤­åœ†æ›²çº¿ä¸Šä¸€åæ ‡ç‚¹ä¸æ— ç©·è¿œç‚¹ç›¸åŠ </h3><p>ç¬¬ä¸‰ç§çŠ¶å†µæ˜¯æ¤­åœ†æ›²çº¿ä¸Šä¸€Aç‚¹ä¸æ— ç©·è¿œç‚¹åšç›¸åŠ ï¼Œå…¶å‡ ä½•æ¦‚å¿µå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://s2.ax1x.com/2019/11/11/MltcSU.png" alt="MltcSU.png"></p><p>æŠŠæ— ç©·è¿œç‚¹è§†ä¸ºyè½´ä¸Šä¸€ä¸ªæ­£å‘æè¿œçš„ç‚¹ï¼Œä¾æ®å®šä¹‰æ­¤æ— ç©·è¿œçš„ç‚¹å°±æ˜¯Oã€‚æ­¤æ— ç©·è¿œç‚¹ä¸Aç‚¹æ‰€æ„æˆçš„ç›´çº¿ï¼Œå¯è§†ä¸ºä¸€æ¡å‚ç›´çº¿ã€‚å› æ­¤ï¼Œæ­¤å‚ç›´çº¿ä¸æ¤­åœ†æ›²çº¿ä¼šç›¸äº¤äºå¦ä¸€ç‚¹Rï¼Œå› æ­¤å¯æ±‚å¾—A+oo=-Rï¼Œè€ŒRä¸Aåˆšå¥½äº’ä¸ºyè½´çš„å¯¹ç§°ç‚¹ï¼ˆA=-Rï¼‰ï¼Œæ•…A+oo=Aã€‚</p></li></ul><ul><li><h3 id="æ¤­åœ†æ›²çº¿ä¸Šä¸¤å¯¹ç§°ç‚¹ç›¸åŠ "><a href="#æ¤­åœ†æ›²çº¿ä¸Šä¸¤å¯¹ç§°ç‚¹ç›¸åŠ " class="headerlink" title="æ¤­åœ†æ›²çº¿ä¸Šä¸¤å¯¹ç§°ç‚¹ç›¸åŠ "></a>æ¤­åœ†æ›²çº¿ä¸Šä¸¤å¯¹ç§°ç‚¹ç›¸åŠ </h3></li></ul><h2 id="åœ¨æœ‰é™ä½“å†…çš„æ¤­åœ†æ›²çº¿è¿ç®—"><a href="#åœ¨æœ‰é™ä½“å†…çš„æ¤­åœ†æ›²çº¿è¿ç®—" class="headerlink" title="åœ¨æœ‰é™ä½“å†…çš„æ¤­åœ†æ›²çº¿è¿ç®—"></a>åœ¨æœ‰é™ä½“å†…çš„æ¤­åœ†æ›²çº¿è¿ç®—</h2><h2 id="æ¤­åœ†æ›²çº¿çš„å…¬å¼€å¯†é’¥åŠ å¯†æœºåˆ¶"><a href="#æ¤­åœ†æ›²çº¿çš„å…¬å¼€å¯†é’¥åŠ å¯†æœºåˆ¶" class="headerlink" title="æ¤­åœ†æ›²çº¿çš„å…¬å¼€å¯†é’¥åŠ å¯†æœºåˆ¶"></a>æ¤­åœ†æ›²çº¿çš„å…¬å¼€å¯†é’¥åŠ å¯†æœºåˆ¶</h2><h2 id="æ¤­åœ†æ›²çº¿çš„æ•°å­—ç­¾å"><a href="#æ¤­åœ†æ›²çº¿çš„æ•°å­—ç­¾å" class="headerlink" title="æ¤­åœ†æ›²çº¿çš„æ•°å­—ç­¾å"></a>æ¤­åœ†æ›²çº¿çš„æ•°å­—ç­¾å</h2><p>â€‹    </p>]]></content>
      
      
      <categories>
          
          <category> åŠ å¯†ç®—æ³• </category>
          
          <category> æ¤­åœ†æ›²çº¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œä¿¡æ¯å®‰å…¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RSAåŠ å¯†ç®—æ³•æµ…æ</title>
      <link href="/2019/11/09/RSA%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95%E6%B5%85%E6%9E%90/"/>
      <url>/2019/11/09/RSA%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95%E6%B5%85%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="RSAçš„åŠ è§£å¯†æœºåˆ¶"><a href="#RSAçš„åŠ è§£å¯†æœºåˆ¶" class="headerlink" title="RSAçš„åŠ è§£å¯†æœºåˆ¶"></a>RSAçš„åŠ è§£å¯†æœºåˆ¶</h1><p>RSAçš„åŠ å¯†ç³»ç»Ÿå¯åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼Œå³ç”¨æˆ·å¯†é’¥çš„äº§ç”Ÿã€åŠ å¯†ç®—æ³•ä»¥åŠè§£å¯†ç®—æ³•ã€‚</p><h2 id="ç”¨æˆ·å¯†é’¥çš„äº§ç”Ÿ"><a href="#ç”¨æˆ·å¯†é’¥çš„äº§ç”Ÿ" class="headerlink" title="ç”¨æˆ·å¯†é’¥çš„äº§ç”Ÿ"></a>ç”¨æˆ·å¯†é’¥çš„äº§ç”Ÿ</h2><p>åœ¨ç”¨æˆ·å¯†é’¥çš„äº§ç”Ÿéƒ¨åˆ†ï¼Œé¦–å…ˆæ­¤ç³»ç»Ÿçš„æ¯ä¸€ä¸ªç”¨æˆ·å°†è‡ªè¡Œé€‰æ‹©ä¸€ç»„å…¬å¼€å¯†é’¥ï¼Œç„¶åå…¬ä¹‹äºä¼—ï¼Œä½¿å¾—ä»–äººéƒ½èƒ½ä½¿ç”¨æ­¤å…¬å¼€å¯†é’¥å¯¹æœºå¯†æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œç„¶åè‡ªå·±ä½¿ç”¨ç§å¯†å¯†é’¥è¿›è¡Œè§£å¯†ï¼Œè·å–æœºå¯†æ•°æ®ã€‚</p><p>â€‹        ä»¥ä¸‹æ˜¯RSAå¯†é’¥çš„äº§ç”Ÿè¿‡ç¨‹ï¼š</p><a id="more"></a><p>â€‹        &lt;1&gt;.é¦–å…ˆæ‰¾å‡ºä¸¤ä¸ªå¤§è´¨æ•°på’Œqï¼Œä¸¤è€…å‡è‡³å°‘ä¸º100ä½çš„åè¿›åˆ¶æ•°ã€‚</p><p>â€‹        &lt;2&gt;.è®¡ç®—N=p * q åŠ Ï†(N)= (q-1)*(p-1),    å…¶ä¸­Ï†(N)ä¸ºæ¬§æ‹‰å‡½æ•°ï¼Œæ„ä¸ºå°äºNçš„æ•´æ•°ä¸­ä¸Näº’è´¨çš„æ•´æ•°ä¸ªæ•°ã€‚ä¾‹å¦‚ï¼Œåªæœ‰1å’Œ5è¿™ä¸¤ä¸ªæ•°ä¸6äº’è´¨ï¼Œæ‰€ä»¥Ï†(6)=2ã€‚</p><p>â€‹        &lt;3&gt;.æ‰¾å‡ºä¸€ä¸ªä¸Ï†(N)äº’è´¨çš„æ•°eï¼Œå› æ­¤ï¼ˆeï¼ŒNï¼‰å¯ä»¥ä½œä¸ºè¯¥ç”¨æˆ·çš„å…¬å¼€å¯†é’¥ã€‚</p><p>â€‹        &lt;4&gt;.è®¡ç®—å‡ºè¯¥ç”¨æˆ·çš„ç§å¯†å¯†é’¥dï¼Œä½¿å¾—e * d mod Ï†(N) =1ï¼Œä¹Ÿå°±æ˜¯åœ¨æ¨¡Ï†(N)çš„æƒ…å†µä¸‹ï¼Œä½¿å¾—eå’Œdäº’ä¸ºä¹˜æ³•åå…ƒç´ ï¼Œå…¶ä¸­dç§°ä¸ºç”¨æˆ·çš„ç§å¯†å¯†é’¥ï¼Œé¡»ç»å¯¹ä¿å¯†ã€‚</p><h2 id="åŠ å¯†è§£å¯†æœºåˆ¶"><a href="#åŠ å¯†è§£å¯†æœºåˆ¶" class="headerlink" title="åŠ å¯†è§£å¯†æœºåˆ¶"></a>åŠ å¯†è§£å¯†æœºåˆ¶</h2><p>åœ¨RSAå¯†ç ç³»ç»Ÿé‡Œï¼Œæ¯æ¬¡åŠ å¯†æˆ–è§£å¯†çš„ä¿¡æ¯å—çš„å€¼åœ¨0~ï¼ˆN-1ï¼‰çš„èŒƒå›´å†…ã€‚è‹¥æ˜æ–‡åŠå¯†æ–‡å¤§äºè¿™ä¸ªå—ï¼Œåˆ™åˆ†å—ã€‚</p><p>åœ¨å®é™…åŠ è§£å¯†è¿‡ç¨‹ä¸­ï¼ŒNè‡³å°‘ä¸º521ä½ã€‚Nå€¼è¶Šå¤§ï¼ŒRSAçš„å®‰å…¨æ€§è¶Šé«˜ï¼ŒåŠ è§£å¯†æ‰€éœ€è¦çš„æ—¶é—´å°±è¶Šé•¿ã€‚</p><p>ç°åœ¨å‡è®¾è¦å¯¹Mä¿¡æ¯è¿›è¡ŒåŠ å¯†ï¼Œå…¶ä¸­0&lt;=M&lt;=(N-1),RSAåŠ å¯†ç®—æ³•ä¸ºï¼šC=Eeï¼ˆMï¼‰=M^2modN.<br>$$<br>C=Ee(M)=M^emodN<br>$$<br>Cä¸ºåŠ å¯†åçš„å¯†æ–‡ã€‚è‹¥è¦å¯¹Cè¿›è¡Œè§£å¯†ï¼Œåˆ™éœ€è¦è®¡ç®—ï¼šM=D<sub>d<sub>ï¼ˆCï¼‰modM<br>$$<br>M=Dd(C)modN<br>$$</sub></sub></p><h2 id="åŠ å¯†è§£å¯†ç®—æ³•çš„JAVAä»£ç å®ç°"><a href="#åŠ å¯†è§£å¯†ç®—æ³•çš„JAVAä»£ç å®ç°" class="headerlink" title="åŠ å¯†è§£å¯†ç®—æ³•çš„JAVAä»£ç å®ç°"></a>åŠ å¯†è§£å¯†ç®—æ³•çš„JAVAä»£ç å®ç°</h2><p><strong>RSAåŠ å¯†è§£å¯†çš„ç®€å•JAVAå®ç°ä»£ç å¦‚ä¸‹ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lcx.rsa;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RSAEncrypt</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> p=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> q=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> n=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> m=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> public_key=<span class="number">0</span>;<span class="comment">//å…¬åŒ™</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> private_key=<span class="number">0</span>;<span class="comment">//å¯†åŒ™</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> text=<span class="number">0</span>;<span class="comment">//æ˜æ–‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> secretword=<span class="number">0</span>;<span class="comment">//å¯†æ–‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> word=<span class="number">0</span>;<span class="comment">//è§£å¯†åæ˜æ–‡</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ¤æ–­æ˜¯å¦ä¸ºç´ æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">primenumber</span><span class="params">(<span class="keyword">long</span> t)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> k=<span class="number">0</span>;</span><br><span class="line">        k=(<span class="keyword">long</span>)Math.sqrt((<span class="keyword">double</span>)t);</span><br><span class="line">        <span class="keyword">boolean</span> flag=<span class="keyword">true</span>;</span><br><span class="line">        outer:<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=k;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>((t%i)==<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                flag = <span class="keyword">false</span>;</span><br><span class="line">                <span class="keyword">break</span> outer;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¾“å…¥PQ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">inputPQ</span><span class="params">()</span><span class="keyword">throws</span> Exception</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">do</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"è¯·è¾“å…¥ç´ æ•°p: "</span>);</span><br><span class="line">            BufferedReader stdin=<span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</span><br><span class="line">            String br=stdin.readLine();</span><br><span class="line">            <span class="keyword">this</span>.p=Integer.parseInt(br);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(!primenumber(<span class="keyword">this</span>.p));</span><br><span class="line">        <span class="keyword">do</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"è¯·è¾“å…¥ç´ æ•°q: "</span>);</span><br><span class="line">            BufferedReader stdin=<span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</span><br><span class="line">            String br=stdin.readLine();</span><br><span class="line">            <span class="keyword">this</span>.q=Integer.parseInt(br);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(!primenumber(<span class="keyword">this</span>.q));</span><br><span class="line">        <span class="keyword">this</span>.n=<span class="keyword">this</span>.p*<span class="keyword">this</span>.q;</span><br><span class="line">        <span class="keyword">this</span>.m=(p-<span class="number">1</span>)*(q-<span class="number">1</span>);</span><br><span class="line">        System.out.println(<span class="string">"è¿™ä¸¤ä¸ªç´ æ•°çš„ä¹˜ç§¯ä¸ºp*qï¼š"</span>+<span class="keyword">this</span>.n);</span><br><span class="line">        System.out.println(<span class="string">"æ‰€å¾—çš„å°äºï¼®å¹¶ä¸”ä¸ï¼®äº’ç´ çš„æ•´æ•°çš„ä¸ªæ•°ä¸ºm=(p-1)(q-1)ï¼š"</span>+<span class="keyword">this</span>.m);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ±‚æœ€å¤§å…¬çº¦æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">gcd</span><span class="params">(<span class="keyword">long</span> a,<span class="keyword">long</span> b)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> gcd;</span><br><span class="line">        <span class="keyword">if</span>(b==<span class="number">0</span>)</span><br><span class="line">            gcd=a;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            gcd=gcd(b,a%b);</span><br><span class="line">        System.out.println(<span class="string">"gcd:"</span>+gcd);</span><br><span class="line">        <span class="keyword">return</span> gcd;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¾“å…¥å…¬åŒ™</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getPublic_key</span><span class="params">()</span><span class="keyword">throws</span> Exception</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">do</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"è¯·è¾“å…¥ä¸€ä¸ªå…¬é’¥çš„å€¼ï¼Œè¿™ä¸ªå€¼è¦æ±‚å°äºmå¹¶ä¸”å’Œmäº’è´¨ï¼š "</span>);</span><br><span class="line">            BufferedReader stdin=<span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</span><br><span class="line">            String br=stdin.readLine();</span><br><span class="line">            <span class="keyword">this</span>.public_key=Long.parseLong(br);</span><br><span class="line">        &#125;<span class="keyword">while</span>((<span class="keyword">this</span>.public_key &gt;= <span class="keyword">this</span>.m) || (<span class="keyword">this</span>.gcd(<span class="keyword">this</span>.m,<span class="keyword">this</span>.public_key)!=<span class="number">1</span>));</span><br><span class="line">        System.out.println(<span class="string">"å…¬é’¥ä¸ºï¼š"</span>+<span class="keyword">this</span>.public_key);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è®¡ç®—å¾—åˆ°å¯†åŒ™</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getPrivate_key</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> value=<span class="number">1</span>;</span><br><span class="line">        outer:<span class="keyword">for</span>(<span class="keyword">long</span> i=<span class="number">1</span>;;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            value=i*<span class="keyword">this</span>.m+<span class="number">1</span>;</span><br><span class="line">            System.out.println(<span class="string">"value:  "</span>+value);</span><br><span class="line">            <span class="keyword">if</span>((value%<span class="keyword">this</span>.public_key==<span class="number">0</span>)&amp;&amp; (value/<span class="keyword">this</span>.public_key &lt; <span class="keyword">this</span>.m))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">this</span>.private_key=value/<span class="keyword">this</span>.public_key;</span><br><span class="line">                <span class="keyword">break</span> outer;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"äº§ç”Ÿçš„ä¸€ä¸ªç§é’¥ä¸ºï¼š"</span>+<span class="keyword">this</span>.private_key);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¾“å…¥æ˜æ–‡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getText</span><span class="params">()</span><span class="keyword">throws</span> Exception</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"è¯·è¾“å…¥æ˜æ–‡ï¼š"</span>);</span><br><span class="line">        BufferedReader stdin=<span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</span><br><span class="line">        String br=stdin.readLine();</span><br><span class="line">        <span class="keyword">this</span>.text=Long.parseLong(br);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åŠ å¯†ã€è§£å¯†è®¡ç®—</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">colum</span><span class="params">(<span class="keyword">long</span> y,<span class="keyword">long</span> n,<span class="keyword">long</span> key)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> mul;</span><br><span class="line">        <span class="keyword">if</span>(key==<span class="number">1</span>)</span><br><span class="line">            mul=y%n;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            mul=y*<span class="keyword">this</span>.colum(y,n,key-<span class="number">1</span>)%n;</span><br><span class="line">        <span class="keyword">return</span> mul;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åŠ å¯†åè§£å¯†</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pascolum</span><span class="params">()</span><span class="keyword">throws</span> Exception</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.getText();</span><br><span class="line">        System.out.println(<span class="string">"è¾“å…¥æ˜æ–‡ä¸º: "</span>+<span class="keyword">this</span>.text);</span><br><span class="line">        <span class="comment">//åŠ å¯†</span></span><br><span class="line">        <span class="keyword">this</span>.secretword=<span class="keyword">this</span>.colum(<span class="keyword">this</span>.text,<span class="keyword">this</span>.n,<span class="keyword">this</span>.public_key);</span><br><span class="line">        System.out.println(<span class="string">"æ‰€å¾—çš„å¯†æ–‡ä¸ºï¼š"</span>+<span class="keyword">this</span>.secretword);</span><br><span class="line">        <span class="comment">//è§£å¯†</span></span><br><span class="line">        <span class="keyword">this</span>.word=<span class="keyword">this</span>.colum(<span class="keyword">this</span>.secretword,<span class="keyword">this</span>.n,<span class="keyword">this</span>.private_key);</span><br><span class="line">        System.out.println(<span class="string">"è§£å¯†åæ‰€å¾—çš„æ˜æ–‡ä¸ºï¼š"</span>+<span class="keyword">this</span>.word);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æµ‹è¯•å¦‚ä¸‹ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lcx.rsa;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RSAEncryptTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String []args)</span><span class="keyword">throws</span> Exception</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        RSAEncrypt t = <span class="keyword">new</span> RSAEncrypt();</span><br><span class="line">        t.inputPQ();</span><br><span class="line">        t.getPublic_key();</span><br><span class="line">        t.getPrivate_key();</span><br><span class="line">        t.pascolum();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å…¥æ•°æ®æ¥æºä¸ºè¯¾æœ¬ä¸Šä¾‹é¢˜æ‰€ç»™ï¼Œç”¨æ¥éªŒè¯åŠ å¯†è§£å¯†ç®—æ³•å®ç°çš„æ­£ç¡®æ€§ã€‚</p><p><strong>è¯¾æœ¬ä¾‹é¢˜å¦‚ä¸‹ï¼š</strong></p><p><img src="https://s2.ax1x.com/2019/11/09/MmEbex.png" alt="MmEbex.png"></p><p><strong>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</strong></p><p><a href="https://imgchr.com/i/MmElJe" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/11/09/MmElJe.md.png" alt="MmElJe.md.png"></a></p>]]></content>
      
      
      <categories>
          
          <category> åŠ å¯†ç®—æ³• </category>
          
          <category> RSA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œä¿¡æ¯å®‰å…¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ARM9æŒ‡ä»¤æ“ä½œç³»ç»Ÿ</title>
      <link href="/2019/11/04/ARM9%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
      <url>/2019/11/04/ARM9%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/</url>
      
        <content type="html"><![CDATA[<p><strong>æ³¨ï¼š</strong>ä¸ºäº†è¿…é€Ÿçš„å¤ä¹ å®ŒARM9çš„å¯»å€æ–¹å¼ä»¥åŠåŸºæœ¬æŒ‡ä»¤é›†ï¼Œåœ¨æ­¤åªåšæŒ‡ä»¤æ¼”ç¤ºï¼Œä¸åšè¯¦ç»†çš„æ–‡å­—å™è¿°ã€‚</p><h1 id="ä¸€ã€ARMå¤„ç†å™¨çš„å¯»å€æ–¹å¼"><a href="#ä¸€ã€ARMå¤„ç†å™¨çš„å¯»å€æ–¹å¼" class="headerlink" title="ä¸€ã€ARMå¤„ç†å™¨çš„å¯»å€æ–¹å¼"></a>ä¸€ã€ARMå¤„ç†å™¨çš„å¯»å€æ–¹å¼</h1><ul><li><h2 id="å¯„å­˜å™¨å¯»å€"><a href="#å¯„å­˜å™¨å¯»å€" class="headerlink" title="å¯„å­˜å™¨å¯»å€"></a>å¯„å­˜å™¨å¯»å€</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MOV R2,R3;R2&lt;-R3R3ä¸­çš„å†…å®¹èµ‹ç»™R2</span><br><span class="line">ADD R2,R3,R4    ;R2&lt;-R3+R4R3+R4ä¸­çš„å†…å®¹ç›¸åŠ ï¼Œç»“æœèµ‹ç»™R2</span><br></pre></td></tr></table></figure></li></ul><a id="more"></a><ul><li><h2 id="ç«‹å³å¯»å€"><a href="#ç«‹å³å¯»å€" class="headerlink" title="ç«‹å³å¯»å€"></a>ç«‹å³å¯»å€</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ADD R1.R1,#1234:R1&lt;-R1+1234</span><br><span class="line">ADD R1,R1,#0x7f;R1&lt;-R1+0x7f</span><br></pre></td></tr></table></figure></li><li><h2 id="å¯„å­˜å™¨é—´æ¥å¯»å€"><a href="#å¯„å­˜å™¨é—´æ¥å¯»å€" class="headerlink" title="å¯„å­˜å™¨é—´æ¥å¯»å€"></a>å¯„å­˜å™¨é—´æ¥å¯»å€</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LDR R1,[R2];R1&lt;-[R2]R2ä¸­çš„å†…å®¹ä¸ºåœ°å€ï¼Œè¯¥æŒ‡ä»¤å®ç°å°†è¯¥åœ°å€ä¸­çš„æ•°æ®ä¼ é€åˆ°R1</span><br><span class="line">STR R1,[R2];[R2]&lt;-R1</span><br></pre></td></tr></table></figure></li></ul><ul><li><h2 id="å˜å€å¯»å€"><a href="#å˜å€å¯»å€" class="headerlink" title="å˜å€å¯»å€"></a>å˜å€å¯»å€</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">LDR R0,[R1,#8];R0&lt;-[R1+8]R1çš„å†…å®¹åŠ ä¸Š8å½¢æˆçš„æ“ä½œæ•°çš„æœ‰æ•ˆåœ°å€ï¼Œå¹¶å°†åœ°å€ä¸­çš„æ“ä½œæ•°å­˜å…¥R0ä¸­</span><br><span class="line">LDR R0,[R1,#8]!;R0&lt;-[R1+8],R1&lt;-R1+8</span><br><span class="line">LDR R0,[R1],#2;R0&lt;-[R1],R1&lt;-R1+2</span><br><span class="line">LDR R0,[R1,R2];R0&lt;-[R1+R2]</span><br></pre></td></tr></table></figure></li></ul><ul><li><h2 id="å¯„å­˜å™¨ç§»ä½å¯»å€"><a href="#å¯„å­˜å™¨ç§»ä½å¯»å€" class="headerlink" title="å¯„å­˜å™¨ç§»ä½å¯»å€"></a>å¯„å­˜å™¨ç§»ä½å¯»å€</h2><p><strong>1.LSL(æˆ–ASL)æ“ä½œ</strong></p><p>æ“ä½œçš„æ ¼å¼ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">é€šç”¨å¯„å­˜å™¨ï¼ŒLSLï¼ˆæˆ–ASLï¼‰æ“ä½œæ•°</span><br></pre></td></tr></table></figure><p>ä½œç”¨ï¼šå¯å®Œæˆå¯¹é€šç”¨å¯„å­˜å™¨ä¸­çš„å†…å®¹è¿›è¡Œé€»è¾‘ï¼ˆæˆ–ç®—æœ¯ï¼‰çš„å·¦ç§»æ“ä½œã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MOV R0,R1,LSL#4;å°†R1ä¸­çš„å†…å®¹é€»è¾‘å·¦ç§»å››ä½åé€ç»™R0</span><br></pre></td></tr></table></figure><p><strong>2.LSRæ“ä½œ</strong></p><p>æ“ä½œçš„æ ¼å¼ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">é€šç”¨å¯„å­˜å™¨ï¼ŒLSRæ“ä½œæ•°</span><br></pre></td></tr></table></figure><p>ä½œç”¨ï¼šå¯å®Œæˆå¯¹é€šç”¨å¯„å­˜å™¨ä¸­çš„å†…å®¹è¿›è¡Œé€»è¾‘çš„å³ç§»æ“ä½œã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MOV R0,R1,LSR#4;å°†R1ä¸­çš„å†…å®¹é€»è¾‘å³ç§»å››ä½åé€ç»™R0</span><br></pre></td></tr></table></figure><p><strong>3.RORæ“ä½œ</strong></p><p>æ“ä½œçš„æ ¼å¼ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">é€šç”¨å¯„å­˜å™¨ï¼ŒRORæ“ä½œæ•°</span><br></pre></td></tr></table></figure><p>ä½œç”¨ï¼šå¯¹å¯„å­˜å™¨ä¸­çš„å†…å®¹è¿›è¡Œå¾ªç¯å³ç§»çš„æ“ä½œã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MOV R0,R1,ROR#4;R1çš„å†…å®¹å¾ªç¯å³ç§»4ä½åä¼ åˆ°R0ä¸­</span><br></pre></td></tr></table></figure><p><strong>4.ASRæ“ä½œ</strong></p><p>æ“ä½œçš„æ ¼å¼ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">é€šç”¨å¯„å­˜å™¨ï¼ŒASRæ“ä½œæ•°</span><br></pre></td></tr></table></figure><p>ä½œç”¨ï¼šå¯¹å¯„å­˜å™¨ä¸­çš„å†…å®¹è¿›è¡Œå³ç§»çš„æ“ä½œã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MOV R0,R1,ASR#4;R1çš„å†…å®¹å³ç§»4ä½åä¼ åˆ°R0ä¸­ï¼Œç¬¦å·ä¸ºä¿æŒä¸å˜ã€‚</span><br></pre></td></tr></table></figure><p><strong>5.RRXæ“ä½œ</strong></p><p>æ“ä½œçš„æ ¼å¼ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">é€šç”¨å¯„å­˜å™¨ï¼ŒRRX</span><br></pre></td></tr></table></figure><p>ä½œç”¨ï¼šå¯¹å¯„å­˜å™¨ä¸­çš„å†…å®¹è¿›è¡Œå¸¦æ‰©å……çš„å¾ªç¯å³ç§»çš„æ“ä½œã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MOV R0,R1,RRX;R1çš„å†…å®¹è¿›è¡Œå¸¦æ‰©å……çš„å¾ªç¯å³ç§»1ä½åä¼ åˆ°R0ä¸­</span><br></pre></td></tr></table></figure></li><li><h2 id="å¤šå¯„å­˜å™¨å¯»å€"><a href="#å¤šå¯„å­˜å™¨å¯»å€" class="headerlink" title="å¤šå¯„å­˜å™¨å¯»å€"></a>å¤šå¯„å­˜å™¨å¯»å€</h2><ul><li><h3 id="å †æ ˆå¯»å€"><a href="#å †æ ˆå¯»å€" class="headerlink" title="å †æ ˆå¯»å€"></a>å †æ ˆå¯»å€</h3></li><li><h3 id="ç›¸å¯¹å¯»å€"><a href="#ç›¸å¯¹å¯»å€" class="headerlink" title="ç›¸å¯¹å¯»å€"></a>ç›¸å¯¹å¯»å€</h3></li></ul></li></ul><h1 id="äºŒã€ARMæŒ‡ä»¤é›†"><a href="#äºŒã€ARMæŒ‡ä»¤é›†" class="headerlink" title="äºŒã€ARMæŒ‡ä»¤é›†"></a>äºŒã€ARMæŒ‡ä»¤é›†</h1><ul><li><h2 id="æŒ‡ä»¤æ ¼å¼"><a href="#æŒ‡ä»¤æ ¼å¼" class="headerlink" title="æŒ‡ä»¤æ ¼å¼"></a>æŒ‡ä»¤æ ¼å¼</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;opcode&gt;&#123;&lt;code&gt;&#125;&#123;s&#125;&lt;Rd&gt;,&lt;Rn&gt;,&lt;op2&gt;</span><br></pre></td></tr></table></figure><p>å„é¡¹ä»‹ç»å¦‚ä¸‹ï¼š</p><p><opcode>:æ“ä½œç ï¼Œå¦‚ADDç­‰æ“ä½œæŒ‡ä»¤ã€‚</opcode></p><p>{<code>}ï¼šå†³å®šæŒ‡ä»¤æ‰§è¡Œçš„æ¡ä»¶ç ã€‚</code></p><p>{s}ï¼šå†³å®šæŒ‡ä»¤æ‰§è¡Œæ˜¯å¦å½±å“CPRSå¯„å­˜å™¨çš„å€¼ã€‚</p><p><rd>ï¼šç›®çš„å¯„å­˜å™¨ã€‚</rd></p><p><rn>ï¼šç¬¬ä¸€ä¸ªæ“ä½œæ•°ï¼Œä¸ºå¯„å­˜å™¨ã€‚</rn></p><p><op2>ï¼šç¬¬äºŒä¸ªæ“ä½œæ•°ã€‚</op2></p></li></ul><p><strong>æ³¨</strong>ï¼šopcodeã€condä¸sä¹‹é—´æ²¡æœ‰åˆ†éš”ç¬¦ï¼Œsä¸Rdä¹‹é—´ç”¨ç©ºæ ¼éš”å¼€ã€‚</p><ul><li><h2 id="æ¡ä»¶ç "><a href="#æ¡ä»¶ç " class="headerlink" title="æ¡ä»¶ç "></a>æ¡ä»¶ç </h2><p>å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p><table><thead><tr><th align="center">æ¡ä»¶ç </th><th align="center">åŠ©è®°ç¬¦åç¼€</th><th align="center">æ ‡å¿—</th><th align="center">å«ä¹‰</th></tr></thead><tbody><tr><td align="center">0000</td><td align="center">EQ</td><td align="center">Zç½®ä½</td><td align="center">ç›¸ç­‰</td></tr><tr><td align="center">0001</td><td align="center">NE</td><td align="center">Zæ¸…é›¶</td><td align="center">ä¸ç›¸ç­‰</td></tr><tr><td align="center">0010</td><td align="center">CS</td><td align="center">Cç½®ä½</td><td align="center">æ— ç¬¦å·æ•°å¤§äºæˆ–ç­‰äº</td></tr><tr><td align="center">0011</td><td align="center">CC</td><td align="center">Cæ¸…é›¶</td><td align="center">æ— ç¬¦å·æ•°å°äº</td></tr><tr><td align="center">0100</td><td align="center">MI</td><td align="center">Nç½®ä½</td><td align="center">è´Ÿæ•°</td></tr><tr><td align="center">0101</td><td align="center">PL</td><td align="center">Næ¸…é›¶</td><td align="center">æ­£æ•°æˆ–é›¶</td></tr><tr><td align="center">0110</td><td align="center">VS</td><td align="center">Vç½®ä½</td><td align="center">æº¢å‡º</td></tr><tr><td align="center">0111</td><td align="center">VC</td><td align="center">Væ¸…é›¶</td><td align="center">æœªæº¢å‡º</td></tr><tr><td align="center">1000</td><td align="center">HI</td><td align="center">Cç½®ä½Zæ¸…é›¶</td><td align="center">æ— ç¬¦å·æ•°å¤§äº</td></tr><tr><td align="center">1001</td><td align="center">LS</td><td align="center">Cæ¸…é›¶Zç½®ä½</td><td align="center">æ— ç¬¦å·æ•°å°äºæˆ–ç­‰äº</td></tr><tr><td align="center">1010</td><td align="center">GE</td><td align="center">Nç­‰äºV</td><td align="center">å¸¦ç¬¦å·æ•°å¤§äºæˆ–ç­‰äº</td></tr><tr><td align="center">1011</td><td align="center">LT</td><td align="center">Nä¸ç­‰äºV</td><td align="center">å¸¦ç¬¦å·æ•°å°äº</td></tr><tr><td align="center">1100</td><td align="center">GT</td><td align="center">Zæ¸…é›¶ä¸”ï¼ˆNç­‰äºVï¼‰</td><td align="center">å¸¦ç¬¦å·æ•°å¤§äº</td></tr><tr><td align="center">1101</td><td align="center">LE</td><td align="center">Zç½®ä½æˆ–ï¼ˆNä¸ç­‰Vï¼‰</td><td align="center">å¸¦ç¬¦å·æ•°å°äºæˆ–ç­‰äº</td></tr><tr><td align="center">1110</td><td align="center">AL</td><td align="center">å¿½ç•¥</td><td align="center">æ— æ¡ä»¶æ‰§è¡Œ</td></tr></tbody></table></li><li><h2 id="ARMå­˜å‚¨å™¨è®¿é—®æŒ‡ä»¤"><a href="#ARMå­˜å‚¨å™¨è®¿é—®æŒ‡ä»¤" class="headerlink" title="ARMå­˜å‚¨å™¨è®¿é—®æŒ‡ä»¤"></a>ARMå­˜å‚¨å™¨è®¿é—®æŒ‡ä»¤</h2><p><strong>1.å•ä¸€æ•°æ®åŠ è½½/å­˜å‚¨æŒ‡ä»¤</strong></p><p><strong><1>.LDRæŒ‡ä»¤</1></strong></p><p>LDRçš„æŒ‡ä»¤æ ¼å¼ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LDR&#123;æ¡ä»¶&#125; ç›®çš„å¯„å­˜å™¨,&lt;å­˜å‚¨å™¨åœ°å€&gt;</span><br></pre></td></tr></table></figure><p>æŒ‡ä»¤ç¤ºä¾‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">LDR R3,[R4];å°†å­˜å‚¨å™¨åœ°å€ä¸ºR4ä¸­çš„å­—æ•°æ®è¯»å…¥R3å¯„å­˜å™¨ä¸­</span><br><span class="line">LDR R3,[R1,R2];å°†å­˜å‚¨å™¨åœ°å€ä¸ºR1+R2ä¸­çš„å­—æ•°æ®è¯»å…¥R3å¯„å­˜å™¨ä¸­</span><br><span class="line">LDR R3,[R1,#8];å°†å­˜å‚¨å™¨åœ°å€ä¸ºR1+8ä¸­çš„å­—æ•°æ®è¯»å…¥R3å¯„å­˜å™¨ä¸­</span><br><span class="line">LDR R3,[R1,R2]!;å°†å­˜å‚¨å™¨åœ°å€ä¸ºR1ä¸­çš„å­—æ•°æ®è¯»å…¥R3å¯„å­˜å™¨ä¸­,å°†æ–°åœ°å€R1+R2å†™å…¥R1</span><br></pre></td></tr></table></figure><p>LDRæŒ‡ä»¤æ˜¯å­—åŠ è½½æŒ‡ä»¤ã€‚</p><p><strong><2>.LDRBæŒ‡ä»¤</2></strong></p><p>LDRBçš„æŒ‡ä»¤æ ¼å¼ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LDR&#123;æ¡ä»¶&#125;B ç›®çš„å¯„å­˜å™¨,&lt;å­˜å‚¨å™¨åœ°å€&gt;</span><br></pre></td></tr></table></figure><p>æŒ‡ä»¤ç¤ºä¾‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LDRB R3,[R1];å°†å­˜å‚¨å™¨åœ°å€ä¸ºR4ä¸­çš„å­—æ•°æ®è¯»å…¥R3å¯„å­˜å™¨ä¸­,å¹¶å°†R3çš„é«˜24ä½æ¸…é›¶</span><br></pre></td></tr></table></figure><p>LDRBæŒ‡ä»¤æ˜¯å­—åŠ è½½æŒ‡ä»¤ï¼ŒåŒæ—¶å°†å¯„å­˜å™¨çš„é«˜24ä½æ¸…é›¶ã€‚</p><p><strong><3>.LDRHæŒ‡ä»¤</3></strong></p><p>LDRHçš„æŒ‡ä»¤æ ¼å¼ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LDR&#123;æ¡ä»¶&#125;H ç›®çš„å¯„å­˜å™¨,&lt;å­˜å‚¨å™¨åœ°å€&gt;</span><br></pre></td></tr></table></figure><p>æŒ‡ä»¤ç¤ºä¾‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LDRH R3,[R1];å°†å­˜å‚¨å™¨åœ°å€ä¸ºR4ä¸­çš„å­—æ•°æ®è¯»å…¥R3å¯„å­˜å™¨ä¸­,å¹¶å°†R3çš„é«˜16ä½æ¸…é›¶</span><br></pre></td></tr></table></figure><p>LDRBæŒ‡ä»¤æ˜¯å­—åŠ è½½æŒ‡ä»¤ï¼ŒåŒæ—¶å°†å¯„å­˜å™¨çš„é«˜16ä½æ¸…é›¶ã€‚</p><p><strong><4>.STRæŒ‡ä»¤</4></strong></p><p>STRçš„æŒ‡ä»¤æ ¼å¼ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">STR&#123;æ¡ä»¶&#125; æºå¯„å­˜å™¨,&lt;å­˜å‚¨å™¨åœ°å€&gt;</span><br></pre></td></tr></table></figure><p>æŒ‡ä»¤ç¤ºä¾‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">STR R3,[R1],#8;å°†R3ä¸­çš„å­—æ•°æ®å†™å…¥ä»¥R1ä¸ºåœ°å€çš„å­˜å‚¨å™¨ä¸­ï¼Œå¹¶å°†æ–°åœ°å€R1+8å†™å…¥R1</span><br></pre></td></tr></table></figure><p>STRæŒ‡ä»¤æ˜¯å­—å­˜å‚¨æŒ‡ä»¤ï¼Œä»æºå¯„å­˜å™¨ä¸­å°†ä¸€ä¸ª32ä½çš„å­—æ•°æ®ä¼ é€åˆ°å¯„å­˜å™¨ä¸­ã€‚</p><p><strong><5>.STRBæŒ‡ä»¤</5></strong></p><p>STRBçš„æŒ‡ä»¤æ ¼å¼ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">STR&#123;æ¡ä»¶&#125;B æºå¯„å­˜å™¨,&lt;å­˜å‚¨å™¨åœ°å€&gt;</span><br></pre></td></tr></table></figure><p>æŒ‡ä»¤ç¤ºä¾‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">STRB R3,[R1,#8];å°†R3ä¸­çš„å­—æ•°æ®å†™å…¥ä»¥R1+8ä¸ºåœ°å€çš„å­˜å‚¨å™¨ä¸­</span><br></pre></td></tr></table></figure><p>STRBæŒ‡ä»¤æ˜¯æ— ç¬¦å·å­—èŠ‚å­˜å‚¨æŒ‡ä»¤ï¼Œä»æºå¯„å­˜å™¨ä¸­å°†ä¸€ä¸ª8ä½çš„å­—èŠ‚æ•°æ®ä¼ é€åˆ°å¯„å­˜å™¨ä¸­ã€‚è¯¥å­—èŠ‚æ•°æ®æ˜¯æºå¯„å­˜å™¨ä¸­çš„ä½8ä½ã€‚</p><p><strong><6>.STRHæŒ‡ä»¤</6></strong></p><p>STRHçš„æŒ‡ä»¤æ ¼å¼ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">STR&#123;æ¡ä»¶&#125;H æºå¯„å­˜å™¨,&lt;å­˜å‚¨å™¨åœ°å€&gt;</span><br></pre></td></tr></table></figure><p>æŒ‡ä»¤ç¤ºä¾‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">STRH R3,[R1];å°†R3ä¸­çš„åŠå­—æ•°æ®å†™å…¥ä»¥R1ä¸ºåœ°å€çš„å­˜å‚¨å™¨ä¸­</span><br></pre></td></tr></table></figure><p>STRHæŒ‡ä»¤æ˜¯æ— ç¬¦å·åŠå­—å­˜å‚¨æŒ‡ä»¤ï¼Œä»æºå¯„å­˜å™¨ä¸­å°†ä¸€ä¸ª16ä½çš„åŠå­—æ•°æ®ä¼ é€åˆ°å¯„å­˜å™¨ä¸­ã€‚è¯¥å­—èŠ‚æ•°æ®æ˜¯æºå¯„å­˜å™¨ä¸­çš„ä½16ä½ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ </category>
          
          <category> ARM9æŒ‡ä»¤æ“ä½œ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åµŒå…¥å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdownè¿›é˜¶è¯­æ³•å­¦ä¹ ç¬”è®°</title>
      <link href="/2019/11/02/Markdown%E8%BF%9B%E9%98%B6%E8%AF%AD%E6%B3%95/"/>
      <url>/2019/11/02/Markdown%E8%BF%9B%E9%98%B6%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>å†™åšå®¢éœ€è¦ç”¨åˆ°Markdownè¯­æ³•ï¼Œäºæ˜¯äº§ç”Ÿäº†æ•´ç†Markdownç¬”è®°çš„æƒ³æ³•ã€‚</p><p>è¿™ç¯‡æ–‡ç« æ˜¯åŸºäº<a href="[https://lisongbai.top/2019/10/31/Markdown%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1/](https://lisongbai.top/2019/10/31/MarkdownåŸºæœ¬è¯­æ³•å­¦ä¹ ç¬”è®°-1/)">MarkdownåŸºæœ¬è¯­æ³•</a>çš„è¿›é˜¶è¯­æ³•ã€‚</p><h2 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h2><h3 id="1-å†…å®¹ç›®å½•"><a href="#1-å†…å®¹ç›®å½•" class="headerlink" title="1.å†…å®¹ç›®å½•"></a>1.å†…å®¹ç›®å½•</h3><p>åœ¨æ–‡ç« çš„æœ€å¼€å§‹ä½¿ç”¨[TOC]å¼•ç”¨ç›®å½•ï¼Œä¾‹å¦‚æœ¬æ–‡ç›®å½•ï¼š</p><h3 id="2-åŠ å¼ºä»£ç å—"><a href="#2-åŠ å¼ºä»£ç å—" class="headerlink" title="2.åŠ å¼ºä»£ç å—"></a>2.åŠ å¼ºä»£ç å—</h3><p>ä½¿ç”¨â€```â€+â€è¯­è¨€åâ€è¿›è¡Œæ ‡è®°ã€‚ä¾‹å¦‚ï¼š</p><ul><li><p>javaç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">public class TreeNode &#123;</span></span><br><span class="line"><span class="comment">    int val = 0;</span></span><br><span class="line"><span class="comment">    TreeNode left = null;</span></span><br><span class="line"><span class="comment">    TreeNode right = null;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    public TreeNode(int val) &#123;</span></span><br><span class="line"><span class="comment">        this.val = val;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Mirror</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root != <span class="keyword">null</span>)&#123;</span><br><span class="line">            TreeNode temp = root.left;</span><br><span class="line">            root.left = root.right;</span><br><span class="line">            root.right = temp;</span><br><span class="line">            Mirror(root.left);</span><br><span class="line">            Mirror(root.right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><a id="more"></a><h3 id="3-è„šæ³¨"><a href="#3-è„šæ³¨" class="headerlink" title="3.è„šæ³¨"></a>3.è„šæ³¨</h3><p>ä½¿ç”¨[^keyword]è¡¨ç¤ºæ³¨è„š</p><ul><li><p>æ³¨è„š</p><p>è¿™æ˜¯ä¸€ä¸ªæ³¨è„š[^1]çš„æ ·ä¾‹ã€‚</p></li></ul><h3 id="4-æ ‡ç­¾å’Œåˆ†ç±»"><a href="#4-æ ‡ç­¾å’Œåˆ†ç±»" class="headerlink" title="4.æ ‡ç­¾å’Œåˆ†ç±»"></a>4.æ ‡ç­¾å’Œåˆ†ç±»</h3><p>ä¸€èˆ¬åœ¨å»å…½è¾“å…¥tagsæ·»åŠ æ ‡ç­¾ï¼Œcategoriesæ·»åŠ åˆ†ç±»ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> tags: </span><br><span class="line"> - Markdown</span><br><span class="line"> - è¯­è¨€</span><br><span class="line"> categories:</span><br><span class="line">- æŠ€æœ¯</span><br></pre></td></tr></table></figure><p><strong>æ³¨ï¼š</strong>åˆ†ç±»å…·æœ‰å±‚æ¬¡æ€§ï¼Œæ ‡ç­¾æ— å±‚æ¬¡æ€§ã€‚</p><h3 id="5-å¾…åŠäº‹é¡¹Todoåˆ—è¡¨"><a href="#5-å¾…åŠäº‹é¡¹Todoåˆ—è¡¨" class="headerlink" title="5.å¾…åŠäº‹é¡¹Todoåˆ—è¡¨"></a>5.å¾…åŠäº‹é¡¹Todoåˆ—è¡¨</h3><p>ä½¿ç”¨å¸¦æœ‰[]æˆ–è€…[x]ï¼ˆæœªå®Œæˆæˆ–å·²å®Œæˆï¼‰é¡¹çš„åˆ—è¡¨è¯­æ³•æ”¥å†™ä¸€ä¸ªä»£åŠäº‹é¡¹åˆ—è¡¨ä¾‹å¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- [ ] æ—©èµ·è·‘æ­¥</span><br><span class="line">- [X] å®Œæˆè®¡ç½‘å¤§ä½œä¸š</span><br><span class="line">- [x] ç¼–è¯‘å¹¶æ›´æ¢ubuntuå†…æ ¸</span><br></pre></td></tr></table></figure><p>æ˜¾ç¤ºæ•ˆæœï¼š</p><ul><li><input disabled type="checkbox"> æ—©èµ·è·‘æ­¥</li><li><input checked disabled type="checkbox"> å®Œæˆè®¡ç½‘å¤§ä½œä¸š</li><li><input checked disabled type="checkbox"> ç¼–è¯‘å¹¶æ›´æ¢ubuntuå†…æ ¸</li></ul><p><strong>æ³¨ï¼š</strong>-ç©ºæ ¼[]ç©ºæ ¼å…·ä½“äº‹é¡¹ï¼ˆ[]ä¸­å¡«ç©ºæ ¼ä¸ºæœªå®Œæˆäº‹é¡¹ï¼Œå¡«xä¸ºå®Œæˆäº‹é¡¹ï¼‰</p><h3 id="6-LaTeXçš„å…¬å¼è§„åˆ™"><a href="#6-LaTeXçš„å…¬å¼è§„åˆ™" class="headerlink" title="6.LaTeXçš„å…¬å¼è§„åˆ™"></a>6.LaTeXçš„å…¬å¼è§„åˆ™</h3><h5 id="å¸¸ç”¨è§„åˆ™"><a href="#å¸¸ç”¨è§„åˆ™" class="headerlink" title="å¸¸ç”¨è§„åˆ™"></a>å¸¸ç”¨è§„åˆ™</h5><h6 id="1ï¼‰è½¬ä¹‰"><a href="#1ï¼‰è½¬ä¹‰" class="headerlink" title="1ï¼‰è½¬ä¹‰"></a>1ï¼‰è½¬ä¹‰</h6><blockquote><p>ä¸€ä¸‹å‡ ä¸ªå­—ç¬¦: # $ % &amp; ~ _ ^ \ { }æœ‰ç‰¹æ®Šæ„ä¹‰ï¼Œéœ€è¦è¡¨ç¤ºè¿™äº›å­—ç¬¦æ—¶ï¼Œéœ€è¦è½¬ä¹‰ï¼Œå³åœ¨æ¯ä¸ªå­—ç¬¦å‰åŠ ä¸Š \ ã€‚<br> \boxedå‘½ä»¤ç»™å…¬å¼åŠ ä¸€ä¸ªæ–¹æ¡†ã€‚</p></blockquote><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$E = mc^<span class="number">2</span> $</span><br><span class="line">$ \boxed&#123;E=mc^<span class="number">2</span>&#125; $</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=E%20%3D%20mc%5E2%20%5Cquad%20%5Cboxed%7BE%3Dmc%5E2%7D" alt="E = mc^2 \quad \boxed{E=mc^2}"></p><h6 id="2ï¼‰å¸Œè…Šå­—æ¯"><a href="#2ï¼‰å¸Œè…Šå­—æ¯" class="headerlink" title="2ï¼‰å¸Œè…Šå­—æ¯"></a>2ï¼‰å¸Œè…Šå­—æ¯</h6><p><img src="https:////upload-images.jianshu.io/upload_images/3187098-f9884c349c6d36df.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/870/format/webp" alt="img"></p><h6 id="3ï¼‰ä¸Šä¸‹æ ‡å’Œæ ¹å·"><a href="#3ï¼‰ä¸Šä¸‹æ ‡å’Œæ ¹å·" class="headerlink" title="3ï¼‰ä¸Šä¸‹æ ‡å’Œæ ¹å·"></a>3ï¼‰ä¸Šä¸‹æ ‡å’Œæ ¹å·</h6><blockquote><p>ç”¨^æ¥è¡¨ç¤ºä¸Šæ ‡<br> ç”¨_æ¥è¡¨ç¤ºä¸‹æ ‡<br> æ ¹å·ç”¨\sqrtè¡¨ç¤º</p></blockquote><p>æ³¨æ„ï¼šä¸Šä¸‹æ ‡å¦‚æœå¤šä½™ä¸€ä¸ªå­—ç¬¦æˆ–ç¬¦å·ï¼Œéœ€è¦ç”¨{}æ‹¬èµ·æ¥ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ \sum<span class="number">_</span>&#123;i=<span class="number">1</span>&#125;^n a_i $</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Csum_%7Bi%3D1%7D%5En%20a_i" alt="\sum_{i=1}^n a_i"><br> \sqrt[å¼€æ–¹æ¬¡æ•°ï¼Œé»˜è®¤ä¸º2]{å¼€æ–¹å…¬å¼}ï¼Œ ä¾‹å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$$ x_&#123;ij&#125;^<span class="number">2</span>\quad \<span class="built_in">sqrt</span>&#123;x&#125;\quad \<span class="built_in">sqrt</span>[<span class="number">3</span>]&#123;x&#125; $$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=x_%7Bij%7D%5E2%5Cquad%20%5Csqrt%7Bx%7D%5Cquad%20%5Csqrt%5B3%5D%7Bx%7D" alt="x_{ij}^2\quad \sqrt{x}\quad \sqrt[3]{x}"><br> å…¶ä¸­\quadè¡¨ç¤ºæ·»åŠ ç©ºæ ¼ã€‚</p><h6 id="4ï¼‰åˆ†æ•°"><a href="#4ï¼‰åˆ†æ•°" class="headerlink" title="4ï¼‰åˆ†æ•°"></a>4ï¼‰åˆ†æ•°</h6><blockquote><p>åˆ†æ•°ç”¨\fracè¡¨ç¤ºã€‚</p></blockquote><blockquote><p>å­—å·å·¥å…·ç¯å¢ƒè®¾ç½®ï¼š<br> \dfracå‘½ä»¤æŠŠå­—å·è®¾ç½®ä¸ºç‹¬ç«‹å…¬å¼ä¸­çš„å¤§å°ï¼›<br> \tfracåˆ™æŠŠå­—å·è®¾ç½®ä¸ºè¡Œé—´å…¬å¼ä¸­çš„å¤§å°ã€‚</p></blockquote><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ \frac&#123;<span class="number">1</span>&#125;&#123;<span class="number">2</span>&#125; \dfrac&#123;<span class="number">1</span>&#125;&#123;<span class="number">2</span>&#125; $</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cfrac%7B1%7D%7B2%7D%20%5Cdfrac%7B1%7D%7B2%7D" alt="\frac{1}{2} \dfrac{1}{2}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$$ \frac&#123;<span class="number">1</span>&#125;&#123;<span class="number">2</span>&#125; \tfrac&#123;<span class="number">1</span>&#125;&#123;<span class="number">2</span>&#125; $$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cfrac%7B1%7D%7B2%7D%20%5Ctfrac%7B1%7D%7B2%7D" alt="\frac{1}{2} \tfrac{1}{2}"></p><h6 id="5ï¼‰è¿ç®—ç¬¦"><a href="#5ï¼‰è¿ç®—ç¬¦" class="headerlink" title="5ï¼‰è¿ç®—ç¬¦"></a>5ï¼‰è¿ç®—ç¬¦</h6><blockquote><p>+ - * / = ç›´æ¥è¾“å…¥ï¼›</p></blockquote><blockquote><p>ç‰¹æ®Šè¿ç®—åˆ™ç”¨ä»¥ä¸‹ç‰¹æ®Šå‘½ä»¤<code>\pm\; \times\; \div\; \cdot\; \cap\; \cup\; \geq\; \leq\; \neq\; \approx\; \equiv</code><br> <img src="https://math.jianshu.com/math?formula=%5Cpm%5C%3B%20%5Ctimes%5C%3B%20%5Cdiv%5C%3B%20%5Ccdot%5C%3B%20%5Ccap%5C%3B%20%5Ccup%5C%3B%20%5Cgeq%5C%3B%20%5Cleq%5C%3B%20%5Cneq%5C%3B%20%5Capprox%5C%3B%20%5Cequiv" alt="\pm\; \times\; \div\; \cdot\; \cap\; \cup\; \geq\; \leq\; \neq\; \approx\; \equiv"></p></blockquote><blockquote><p>å’Œã€ç§¯ã€æé™ã€ç§¯åˆ†ç­‰è¿ç®—ç¬¦ç”¨\sum, \prod, \lim, \int,è¿™äº›å…¬å¼åœ¨è¡Œå†…å…¬å¼è¢«å‹ç¼©ï¼Œä»¥é€‚åº”è¡Œé«˜ï¼Œå¯ä»¥é€šè¿‡\limitså’Œ\nolimitså‘½ä»¤æ˜¾ç¤ºåˆ¶åŠ¨æ˜¯å¦å‹ç¼©ã€‚<br> <img src="https://math.jianshu.com/math?formula=%5Csum%5C%3B%20%5Cprod%5C%3B%20%5Clim%5C%3B%20%5Cint%5C%3B" alt="\sum\; \prod\; \lim\; \int\;"></p></blockquote><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ \sum<span class="number">_</span>&#123;i=<span class="number">1</span>&#125;^n i </span><br><span class="line"></span><br><span class="line">$ \prod<span class="number">_</span>&#123;i=<span class="number">1</span>&#125;^n </span><br><span class="line"></span><br><span class="line">$\lim<span class="number">_</span>&#123;x\to<span class="number">0</span>&#125;x^<span class="number">2</span> </span><br><span class="line"></span><br><span class="line">$\int<span class="number">_</span>&#123;a&#125;^&#123;b&#125;x^<span class="number">2</span> dx </span><br><span class="line"></span><br><span class="line">$\sum<span class="number">_</span>&#123;i=<span class="number">1</span>&#125;^n i \quad\prod<span class="number">_</span>&#123;i=<span class="number">1</span>&#125;^n </span><br><span class="line">\quad</span><br><span class="line">\lim<span class="number">_</span>&#123;x\to<span class="number">0</span>&#125;x^<span class="number">2</span> \quad\int<span class="number">_</span>&#123;a&#125;^&#123;b&#125;x^<span class="number">2</span> dx </span><br><span class="line">$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Csum_%7Bi%3D1%7D%5En%20i%20%5Cquad%5Cprod_%7Bi%3D1%7D%5En%20%5Cquad%20%5Clim_%7Bx%5Cto0%7D%20x%5E2%20%5Cquad%5Cint_a%5Eb%20x%5E2%20dx%20%24%24%24%24%20%5Csum_%7Bi%3D1%7D%5En%20i%20%5Cquad%5Cprod_%7Bi%3D1%7D%5En%5Cquad%5Clim_%7Bx%5Cto0%7D%20x%5E2%20%5Cquad%5Cint_a%5Eb%20x%5E2%20dx%20%5Csum%5Cnolimits_%7Bi%3D1%7D%5En%5Cquad%5Cprod%5Cnolimits_%7Bi%3D1%7D%5En%20%5Cquad%20%5Clim%5Cnolimits_%7Bx%5Cto0%7D%20x%5E2%20%5Cquad%5Cint%5Cnolimits_a%5Eb%20x%5E2%20dx" alt="\sum_{i=1}^n i \quad\prod_{i=1}^n \quad \lim_{x\to0} x^2 \quad\int_a^b x^2 dx $$$$ \sum_{i=1}^n i \quad\prod_{i=1}^n\quad\lim_{x\to0} x^2 \quad\int_a^b x^2 dx \sum\nolimits_{i=1}^n\quad\prod\nolimits_{i=1}^n \quad \lim\nolimits_{x\to0} x^2 \quad\int\nolimits_a^b x^2 dx"></p><h6 id="6ï¼‰å¤šé‡ç§¯åˆ†"><a href="#6ï¼‰å¤šé‡ç§¯åˆ†" class="headerlink" title="6ï¼‰å¤šé‡ç§¯åˆ†"></a>6ï¼‰å¤šé‡ç§¯åˆ†</h6><blockquote><p>ä½¿ç”¨å¦‚ä¸‹å½¢å¼ï¼š\intã€\iintã€\iiintã€\iiiintã€\idotsint</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$$ \<span class="keyword">int</span> \<span class="keyword">int</span> \quad \<span class="keyword">int</span> \<span class="keyword">int</span> \<span class="keyword">int</span> \quad </span><br><span class="line"> \<span class="keyword">int</span> \<span class="keyword">int</span> \<span class="keyword">int</span> \<span class="keyword">int</span> \quad \<span class="keyword">int</span> \dots \<span class="keyword">int</span> $$</span><br><span class="line"></span><br><span class="line">$$ \iint \quad \iiint \quad \iiiint \quad \idotsint $$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cint%5Cint%5Cquad%5Cint%5Cint%5Cint%5Cquad%5Cint%5Cint%5Cint%5Cint%5Cquad%5Cint%5Cdots%5Cint%24%24%24%24%20%5Ciint%5Cquad%5Ciiint%5Cquad%5Ciiiint%5Cquad%5Cidotsint" alt="\int\int\quad\int\int\int\quad\int\int\int\int\quad\int\dots\int$$$$ \iint\quad\iiint\quad\iiiint\quad\idotsint"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ \leftarrow $</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cleftarrow" alt="\leftarrow"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ \rightarrow $</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Crightarrow" alt="\rightarrow"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ \leftrightarrow $</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cleftrightarrow" alt="\leftrightarrow"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ \longleftarrow $</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Clongleftarrow" alt="\longleftarrow"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$longleftrightarrow$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5CLongleftarrow" alt="\Longleftarrow"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ \Longrightarrow $</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5CLongleftrightarrow" alt="\Longleftrightarrow"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$\xleftarrowå’Œ$\xrightarrowå¯æ ¹æ®å†…å®¹è‡ªåŠ¨è°ƒæ•´</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cxleftarrow%7Bx%2By%2Bz%7D" alt="\xleftarrow{x+y+z}"></p><p><img src="https://math.jianshu.com/math?formula=%5Cxrightarrow%5Bx%5D%7Bx%2By%2Bz%7D" alt="\xrightarrow[x]{x+y+z}"></p><h6 id="7ï¼‰æ³¨éŸ³å’Œæ ‡æ³¨"><a href="#7ï¼‰æ³¨éŸ³å’Œæ ‡æ³¨" class="headerlink" title="7ï¼‰æ³¨éŸ³å’Œæ ‡æ³¨"></a>7ï¼‰æ³¨éŸ³å’Œæ ‡æ³¨</h6><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ \bar&#123;x&#125; $</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cbar%7Bx%7D" alt="\bar{x}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ \acute&#123;x&#125;$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cacute%7Bx%7D" alt="\acute{x}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ \mathring&#123;x&#125;$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cmathring%7Bx%7D" alt="\mathring{x}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ \vec&#123;x&#125;$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cvec%7Bx%7D" alt="\vec{x}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ \grave&#123;x&#125; $</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cgrave%7Bx%7D" alt="\grave{x}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ \dot&#123;x&#125;$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cdot%7Bx%7D" alt="\dot{x}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ \hat&#123;x&#125;$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Chat%7Bx%7D" alt="\hat{x}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ \tilde&#123;x&#125;$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Ctilde%7Bx%7D" alt="\tilde{x}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ \ddot&#123;x&#125;$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cddot%7Bx%7D" alt="\ddot{x}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ \check&#123;x&#125; $</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Ccheck%7Bx%7D" alt="\check{x}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ \breve&#123;x&#125;$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cbreve%7Bx%7D" alt="\breve{x}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ \dddot&#123;x&#125; $</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cdddot%7Bx%7D" alt="\dddot{x}"></p><h6 id="8ï¼‰åˆ†éš”ç¬¦"><a href="#8ï¼‰åˆ†éš”ç¬¦" class="headerlink" title="8ï¼‰åˆ†éš”ç¬¦"></a>8ï¼‰åˆ†éš”ç¬¦</h6><blockquote><p>æ‹¬å·ç”¨() [] {} \lange \rangleè¡¨ç¤º ()  []  {}  âŸ¨âŸ©</p></blockquote><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ \overline&#123;xxx&#125;$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Coverline%7Bxxx%7D" alt="\overline{xxx}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$\overleftrightarrow&#123;xxx&#125;$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Coverleftrightarrow%7Bxxx%7D" alt="\overleftrightarrow{xxx}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$\underline&#123;xxx&#125;$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cunderline%7Bxxx%7D" alt="\underline{xxx}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$\underleftrightarrow&#123;xxx&#125;$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cunderleftrightarrow%7Bxxx%7D" alt="\underleftrightarrow{xxx}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$\overleftarrow&#123;xxx&#125;$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Coverleftarrow%7Bxxx%7D" alt="\overleftarrow{xxx}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$\overbrace&#123;xxx&#125;$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Coverbrace%7Bxxx%7D" alt="\overbrace{xxx}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$\underleftarrow&#123;xxx&#125;$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cunderleftarrow%7Bxxx%7D" alt="\underleftarrow{xxx}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$\underbrace&#123;xxx&#125;$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cunderbrace%7Bxxx%7D" alt="\underbrace{xxx}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$\overrightarrow&#123;xxx&#125;$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Coverrightarrow%7Bxxx%7D" alt="\overrightarrow{xxx}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$\widehat&#123;xxx&#125;$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cwidehat%7Bxxx%7D" alt="\widehat{xxx}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$\underrightarrow&#123;xxx&#125;$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cunderrightarrow%7Bxxx%7D" alt="\underrightarrow{xxx}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$\widetilde&#123;xxx&#125;$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cwidetilde%7Bxxx%7D" alt="\widetilde{xxx}"></p><h6 id="9ï¼‰çœç•¥å·"><a href="#9ï¼‰çœç•¥å·" class="headerlink" title="9ï¼‰çœç•¥å·"></a>9ï¼‰çœç•¥å·</h6><blockquote><p>çœç•¥å·ç”¨ \dots \cdots \vdots \ddotsè¡¨ç¤º ï¼Œ\dotså’Œ\cdotsçš„çºµå‘ä½ç½®ä¸åŒï¼Œå‰è€…ä¸€èˆ¬ç”¨äºæœ‰ä¸‹æ ‡çš„åºåˆ—</p></blockquote><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$$ x_1, x_2, \dots, x_n\quad <span class="number">1</span>,<span class="number">2</span>,\cdots,n\quad \vdots\quad \ddots $$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=x_1%2C%20x_2%2C%20%5Cdots%2C%20x_n%5Cquad%201%2C2%2C%5Ccdots%2Cn%5Cquad%20%5Cvdots%5Cquad%20%5Cddots" alt="x_1, x_2, \dots, x_n\quad 1,2,\cdots,n\quad \vdots\quad \ddots"></p><h6 id="10ï¼‰ç©ºç™½é—´è·"><a href="#10ï¼‰ç©ºç™½é—´è·" class="headerlink" title="10ï¼‰ç©ºç™½é—´è·"></a>10ï¼‰ç©ºç™½é—´è·</h6><table><thead><tr><th>è¯­æ³•</th><th align="left">æ ¼å¼</th><th>å®ä¾‹</th><th>æ˜¾ç¤º</th></tr></thead><tbody><tr><td>quadç©ºæ ¼</td><td align="left"><code>a \quad b</code></td><td><img src="https://math.jianshu.com/math?formula=a%20%5Cquad%20b" alt="a \quad b"></td><td>ä¸€ä¸ª<em>m</em>çš„å®½åº¦</td></tr><tr><td>ä¸¤ä¸ªquadç©ºæ ¼</td><td align="left"><code>a \qquad b</code></td><td><img src="https://math.jianshu.com/math?formula=a%20%5Cqquad%20b" alt="a \qquad b"></td><td>ä¸¤ä¸ª<em>m</em>çš„å®½åº¦</td></tr><tr><td>å¤§ç©ºæ ¼</td><td align="left"><code>a \: b</code></td><td><img src="https://math.jianshu.com/math?formula=a%5C%3Ab" alt="a\:b"></td><td>1/3<em>m</em>å®½åº¦</td></tr><tr><td>ä¸­ç­‰ç©ºæ ¼</td><td align="left"><code>a \; b</code></td><td><img src="https://math.jianshu.com/math?formula=a%5C%3Bb" alt="a\;b"></td><td>2/7<em>m</em>å®½åº¦</td></tr><tr><td>å°ç©ºæ ¼</td><td align="left"><code>a \, b</code></td><td><img src="https://math.jianshu.com/math?formula=a%5C%2Cb" alt="a\,b"></td><td>1/6<em>m</em>å®½åº¦</td></tr><tr><td>æ²¡æœ‰ç©ºæ ¼</td><td align="left"><code>ab</code></td><td><img src="https://math.jianshu.com/math?formula=ab" alt="ab"></td><td>æ²¡æœ‰ç©ºæ ¼</td></tr><tr><td>ç¼©è¿›ç©ºæ ¼</td><td align="left"><code>a \! b</code></td><td><img src="https://math.jianshu.com/math?formula=a%5C!b" alt="a\!b"></td><td>ç¼©è¿›1/6<em>m</em>å®½åº¦</td></tr></tbody></table><h5 id="å¤æ‚å…¬å¼"><a href="#å¤æ‚å…¬å¼" class="headerlink" title="å¤æ‚å…¬å¼"></a>å¤æ‚å…¬å¼</h5><h6 id="1ï¼‰çŸ©é˜µ"><a href="#1ï¼‰çŸ©é˜µ" class="headerlink" title="1ï¼‰çŸ©é˜µ"></a>1ï¼‰çŸ©é˜µ</h6><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">\<span class="keyword">begin</span>&#123;array&#125;&#123;ccc&#125;</span><br><span class="line">x_1 &amp; x_2 &amp;\dots\\</span><br><span class="line">x_3 &amp; x_4 &amp;\dots\\</span><br><span class="line">\vdots&amp;\vdots&amp;\ddots</span><br><span class="line">\<span class="keyword">end</span>&#123;array&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cbegin%7Barray%7D%7Bccc%7D%20x_1%20%26%20x_2%20%26%5Cdots%5C%5C%20x_3%20%26%20x_%204%26%5Cdots%5C%5C%20%5Cvdots%26%5Cvdots%26%5Cddots%20%5Cend%7Barray%7D" alt="\begin{array}{ccc} x_1 &amp; x_2 &amp;\dots\\ x_3 &amp; x_ 4&amp;\dots\\ \vdots&amp;\vdots&amp;\ddots \end{array}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">\<span class="keyword">begin</span>&#123;pmatrix&#125; </span><br><span class="line">a &amp; b\\ </span><br><span class="line">c &amp; d \\</span><br><span class="line">\<span class="keyword">end</span>&#123;pmatrix&#125;</span><br><span class="line"></span><br><span class="line">\quad</span><br><span class="line"></span><br><span class="line">\<span class="keyword">begin</span>&#123;bmatrix&#125; </span><br><span class="line">a &amp; b \\ </span><br><span class="line">c &amp; d \\</span><br><span class="line">\<span class="keyword">end</span>&#123;bmatrix&#125;</span><br><span class="line"></span><br><span class="line">\quad</span><br><span class="line"></span><br><span class="line">\<span class="keyword">begin</span>&#123;Bmatrix&#125; </span><br><span class="line">a &amp; b \\ </span><br><span class="line">c &amp; d \\</span><br><span class="line">\<span class="keyword">end</span>&#123;Bmatrix&#125;</span><br><span class="line"></span><br><span class="line">\quad</span><br><span class="line"></span><br><span class="line">\<span class="keyword">begin</span>&#123;vmatrix&#125; </span><br><span class="line">a &amp; b \\ </span><br><span class="line">c &amp; d \\</span><br><span class="line">\<span class="keyword">end</span>&#123;vmatrix&#125;</span><br><span class="line"></span><br><span class="line">\quad</span><br><span class="line"></span><br><span class="line">\<span class="keyword">begin</span>&#123;Vmatrix&#125; </span><br><span class="line">a &amp; b \\ </span><br><span class="line">c &amp; d \\</span><br><span class="line">\<span class="keyword">end</span>&#123;Vmatrix&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cbegin%7Bpmatrix%7D%20a%20%26%20b%5C%5C%20c%20%26%20d%20%5C%5C%5Cend%7Bpmatrix%7D%5Cquad%5Cbegin%7Bbmatrix%7D%20a%20%26%20b%20%5C%5C%20c%20%26%20d%20%5C%5C%5Cend%7Bbmatrix%7D%5Cquad%5Cbegin%7BBmatrix%7D%20a%20%26%20b%20%5C%5C%20c%20%26%20d%5C%5C%5Cend%7BBmatrix%7D%5Cquad%5Cbegin%7Bvmatrix%7D%20a%20%26%20b%20%5C%5C%20c%20%26%20d%20%5C%5C%5Cend%7Bvmatrix%7D%5Cquad%5Cbegin%7BVmatrix%7D%20a%20%26%20b%5C%5C%20c%20%26%20d%20%5C%5C%5Cend%7BVmatrix%7D" alt="\begin{pmatrix} a &amp; b\\ c &amp; d \\\end{pmatrix}\quad\begin{bmatrix} a &amp; b \\ c &amp; d \\\end{bmatrix}\quad\begin{Bmatrix} a &amp; b \\ c &amp; d\\\end{Bmatrix}\quad\begin{vmatrix} a &amp; b \\ c &amp; d \\\end{vmatrix}\quad\begin{Vmatrix} a &amp; b\\ c &amp; d \\\end{Vmatrix}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">(</span><br><span class="line">\<span class="keyword">begin</span>&#123;smallmatrix&#125; </span><br><span class="line">a &amp; b \\ </span><br><span class="line">c &amp; d </span><br><span class="line">\<span class="keyword">end</span>&#123;smallmatrix&#125;</span><br><span class="line">) </span><br><span class="line">$$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=(%5Cbegin%7Bsmallmatrix%7D%20a%20%26%20b%20%5C%5C%20c%20%26%20d%20%5Cend%7Bsmallmatrix%7D)" alt="(\begin{smallmatrix} a &amp; b \\ c &amp; d \end{smallmatrix})"></p><h6 id="2ï¼‰é•¿å…¬å¼"><a href="#2ï¼‰é•¿å…¬å¼" class="headerlink" title="2ï¼‰é•¿å…¬å¼"></a>2ï¼‰é•¿å…¬å¼</h6><blockquote><p>æ— éœ€å¯¹é½å¯ä½¿ç”¨multlineï¼›<br> éœ€è¦å¯¹é½ä½¿ç”¨splitï¼›<br> ç”¨\æ¥åˆ†è¡Œï¼›<br> ç”¨&amp;è®¾ç½®å¯¹é½çš„ä½ç½®</p></blockquote><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">\<span class="keyword">begin</span>&#123;multline&#125;    </span><br><span class="line">x = a+b+c+&#123;&#125; \\     </span><br><span class="line">d+e+f+g  </span><br><span class="line">\<span class="keyword">end</span>&#123;multline&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cbegin%7Bmultline%7D%20x%20%3D%20a%2Bb%2Bc%2B%7B%7D%20%5C%5C%20d%2Be%2Bf%2Bg%20%5Cend%7Bmultline%7D" alt="\begin{multline} x = a+b+c+{} \\ d+e+f+g \end{multline}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">\<span class="keyword">begin</span>&#123;split&#125;</span><br><span class="line">x = &#123;&#125; &amp; a + b + c +&#123;&#125;\\    </span><br><span class="line">       &amp; d + e + f + g</span><br><span class="line">\<span class="keyword">end</span>&#123;split&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cbegin%7Bsplit%7D%20x%20%3D%20%7B%7D%20%26%20a%20%2B%20b%20%2B%20c%20%2B%7B%7D%5C%5C%20%26%20d%20%2B%20e%20%2B%20f%20%2B%20g%20%5Cend%7Bsplit%7D" alt="\begin{split} x = {} &amp; a + b + c +{}\\ &amp; d + e + f + g \end{split}"></p><h6 id="3ï¼‰å…¬å¼ç»„"><a href="#3ï¼‰å…¬å¼ç»„" class="headerlink" title="3ï¼‰å…¬å¼ç»„"></a>3ï¼‰å…¬å¼ç»„</h6><blockquote><p>ä¸éœ€è¦å¯¹é½çš„å…¬å¼ç»„ç”¨gatherï¼›<br> éœ€è¦å¯¹é½ä½¿ç”¨align:</p></blockquote><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$\<span class="keyword">begin</span>&#123;gather&#125;</span><br><span class="line">a = b+c+d\\</span><br><span class="line">x = y+z\\</span><br><span class="line"><span class="number">5</span> = <span class="number">4</span>+<span class="number">1</span>\\</span><br><span class="line">\<span class="keyword">end</span>&#123;gather&#125;$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cbegin%7Bgather%7D%20a%20%3D%20b%2Bc%2Bd%5C%5C%20x%20%3D%20y%2Bz%5C%5C%205%20%3D%204%2B1%20%5Cend%7Bgather%7D" alt="\begin{gather} a = b+c+d\\ x = y+z\\ 5 = 4+1 \end{gather}"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$\<span class="keyword">begin</span>&#123;align&#125;</span><br><span class="line">a &amp;=b+c+d \\</span><br><span class="line">x &amp;=y+z\\</span><br><span class="line"><span class="number">5</span> &amp;= <span class="number">4</span>+<span class="number">1</span></span><br><span class="line">\<span class="keyword">end</span>&#123;align&#125;$</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=%5Cbegin%7Balign%7D%20a%20%26%3Db%2Bc%2Bd%20%5C%5C%20x%20%26%3Dy%2Bz%5C%5C%205%20%26%3D%204%2B1%20%5Cend%7Balign%7D" alt="\begin{align} a &amp;=b+c+d \\ x &amp;=y+z\\ 5 &amp;= 4+1 \end{align}"></p><h6 id="4ï¼‰åˆ†æ”¯å…¬å¼"><a href="#4ï¼‰åˆ†æ”¯å…¬å¼" class="headerlink" title="4ï¼‰åˆ†æ”¯å…¬å¼"></a>4ï¼‰åˆ†æ”¯å…¬å¼</h6><blockquote><p><strong>åˆ†æ®µå‡½æ•°</strong>é€šå¸¸ç”¨casesæ¬¡ç¯å¢ƒæºç¨‹åˆ†æ”¯å…¬å¼</p></blockquote><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ y=\<span class="keyword">begin</span>&#123;cases&#125;</span><br><span class="line">-x,\quad x\leq <span class="number">0</span>\\</span><br><span class="line">x, \quad x&gt;<span class="number">0</span></span><br><span class="line">\<span class="keyword">end</span>&#123;cases&#125; $</span><br></pre></td></tr></table></figure><p><img src="https://math.jianshu.com/math?formula=y%3D%5Cbegin%7Bcases%7D-x%2C%5Cquad%20x%5Cleq%200%5C%5Cx%2C%20%5Cquad%20x%3E0%5Cend%7Bcases%7D" alt="y=\begin{cases}-x,\quad x\leq 0\\x, \quad x&gt;0\end{cases}"></p>]]></content>
      
      
      <categories>
          
          <category> Markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MarkdownåŸºæœ¬è¯­æ³•å­¦ä¹ ç¬”è®°</title>
      <link href="/2019/10/31/Markdown%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"/>
      <url>/2019/10/31/Markdown%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h1 id="ä¸€ã€æ ‡é¢˜"><a href="#ä¸€ã€æ ‡é¢˜" class="headerlink" title="ä¸€ã€æ ‡é¢˜"></a>ä¸€ã€æ ‡é¢˜</h1><p>ä¸€ä¸ª#æ˜¯ä¸€çº§æ ‡é¢˜ï¼ŒäºŒä¸ª#æ˜¯äºŒçº§æ ‡é¢˜ï¼Œä»¥æ­¤ç±»æ¨ã€‚æœ€å¤šåˆ°å…­çº§æ ‡é¢˜ã€‚</p><p>æ³¨ï¼šæ ‡å‡†è¯­æ³•ä¸€èˆ¬åœ¨#åé¢è·Ÿç©ºæ ¼å†å†™æ ‡é¢˜ï¼Œæœ‰çš„åœ°æ–¹å¯ä»¥ä¸åŠ ç©ºæ ¼ï¼ˆæ¯”å¦‚ï¼šç®€ä¹¦ä¸Šå†™Markdownï¼‰ã€‚</p><p>å®ä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿™æ˜¯ä¸€çº§æ ‡é¢˜</span></span><br><span class="line"><span class="comment">## è¿™æ˜¯äºŒçº§æ ‡é¢˜</span></span><br><span class="line"><span class="comment">### è¿™æ˜¯ä¸‰çº§æ ‡é¢˜</span></span><br><span class="line">...</span><br><span class="line"><span class="comment">###### è¿™æ˜¯å…­çº§æ ‡é¢˜</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><h1 id="è¿™æ˜¯ä¸€çº§æ ‡é¢˜"><a href="#è¿™æ˜¯ä¸€çº§æ ‡é¢˜" class="headerlink" title="è¿™æ˜¯ä¸€çº§æ ‡é¢˜"></a>è¿™æ˜¯ä¸€çº§æ ‡é¢˜</h1><h2 id="è¿™æ˜¯äºŒçº§æ ‡é¢˜"><a href="#è¿™æ˜¯äºŒçº§æ ‡é¢˜" class="headerlink" title="è¿™æ˜¯äºŒçº§æ ‡é¢˜"></a>è¿™æ˜¯äºŒçº§æ ‡é¢˜</h2><a id="more"></a><h3 id="è¿™æ˜¯ä¸‰çº§æ ‡é¢˜"><a href="#è¿™æ˜¯ä¸‰çº§æ ‡é¢˜" class="headerlink" title="è¿™æ˜¯ä¸‰çº§æ ‡é¢˜"></a>è¿™æ˜¯ä¸‰çº§æ ‡é¢˜</h3><p>â€¦</p><h6 id="è¿™æ˜¯å…­çº§æ ‡é¢˜"><a href="#è¿™æ˜¯å…­çº§æ ‡é¢˜" class="headerlink" title="è¿™æ˜¯å…­çº§æ ‡é¢˜"></a>è¿™æ˜¯å…­çº§æ ‡é¢˜</h6><h1 id="äºŒã€å­—ä½“"><a href="#äºŒã€å­—ä½“" class="headerlink" title="äºŒã€å­—ä½“"></a>äºŒã€å­—ä½“</h1><ul><li><h5 id="åŠ ç²—"><a href="#åŠ ç²—" class="headerlink" title="åŠ ç²—"></a>åŠ ç²—</h5><p>è¦åŠ ç²—çš„æ–‡å­—å·¦å³åˆ†åˆ«ç”¨ä¸¤ä¸ª**åŒ…èµ·æ¥</p></li><li><h5 id="æ–œä½“"><a href="#æ–œä½“" class="headerlink" title="æ–œä½“"></a>æ–œä½“</h5><p>è¦æ–œä½“çš„æ–‡å­—å·¦å³åˆ†åˆ«ç”¨ä¸€ä¸ª*åŒ…èµ·æ¥</p></li><li><h5 id="æ–œä½“åŠ ç²—"><a href="#æ–œä½“åŠ ç²—" class="headerlink" title="æ–œä½“åŠ ç²—"></a>æ–œä½“åŠ ç²—</h5><p>è¦æ–œä½“å’ŒåŠ ç²—çš„æ–‡å­—å·¦å³åˆ†åˆ«ç”¨ä¸‰ä¸ª*å·åŒ…èµ·æ¥</p></li><li><h5 id="åˆ é™¤çº¿"><a href="#åˆ é™¤çº¿" class="headerlink" title="åˆ é™¤çº¿"></a>åˆ é™¤çº¿</h5><p>è¦åŠ åˆ é™¤çº¿çš„æ–‡å­—å·¦å³åˆ†åˆ«ç”¨ä¸¤ä¸ª~~åŒ…èµ·æ¥</p><p>å®ä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">**è¿™æ˜¯åŠ ç²—å­—ä½“**</span><br><span class="line">*è¿™æ˜¯æ–œä½“*</span><br><span class="line">***è¿™æ˜¯åŠ ç²—æ–œä½“***</span><br><span class="line">~~è¿™æ˜¯åŠ åˆ é™¤çº¿çš„~~</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p></li></ul><p>  <strong>è¿™æ˜¯åŠ ç²—å­—ä½“</strong><br>  <em>è¿™æ˜¯æ–œä½“</em><br>  <strong><em>è¿™æ˜¯åŠ ç²—æ–œä½“</em></strong><br>  <del>è¿™æ˜¯åŠ åˆ é™¤çº¿çš„</del></p><h1 id="ä¸‰ã€å¼•ç”¨"><a href="#ä¸‰ã€å¼•ç”¨" class="headerlink" title="ä¸‰ã€å¼•ç”¨"></a>ä¸‰ã€å¼•ç”¨</h1><p>  åœ¨å¼•ç”¨æ–‡å­—å‰åŠ &gt;å³å¯ã€‚å¼•ç”¨å¯ä»¥åµŒå¥—ã€‚</p><p>  å®ä¾‹ï¼š</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;è¿™æ˜¯å¼•ç”¨çš„å†…å®¹</span><br><span class="line">&gt;&gt;è¿™æ˜¯å¼•ç”¨çš„å†…å®¹</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;è¿™æ˜¯å¼•ç”¨çš„å†…å®¹</span><br></pre></td></tr></table></figure><p>  æ•ˆæœå¦‚ä¸‹ï¼š</p><blockquote><p>è¿™æ˜¯å¼•ç”¨çš„å†…å®¹</p><blockquote><p>è¿™æ˜¯å¼•ç”¨çš„å†…å®¹</p><blockquote><blockquote><blockquote><blockquote><p>è¿™æ˜¯å¼•ç”¨çš„å†…å®¹</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><h1 id="å››ã€åˆ†å‰²çº¿"><a href="#å››ã€åˆ†å‰²çº¿" class="headerlink" title="å››ã€åˆ†å‰²çº¿"></a>å››ã€åˆ†å‰²çº¿</h1><p>  ä¸‰ä¸ªæˆ–è€…ä¸‰ä¸ªä»¥ä¸Šçš„ - æˆ–è€… * éƒ½å¯ä»¥</p><p>  å®ä¾‹ï¼š</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">----</span><br><span class="line">***</span><br><span class="line">****</span><br></pre></td></tr></table></figure><p>  æ•ˆæœå¦‚ä¸‹ï¼š</p><p>  å¯ä»¥çœ‹åˆ°ï¼Œæ˜¾ç¤ºçš„æ•ˆæœæ˜¯ä¸€æ¯›ä¸€æ ·çš„ã€‚</p><hr><hr><hr><hr><h1 id="äº”ã€å›¾ç‰‡"><a href="#äº”ã€å›¾ç‰‡" class="headerlink" title="äº”ã€å›¾ç‰‡"></a>äº”ã€å›¾ç‰‡</h1><p>è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">![å›¾ç‰‡alt]ï¼ˆå›¾ç‰‡åœ°å€ â€å›¾ç‰‡titleâ€œï¼‰</span><br><span class="line"></span><br><span class="line">å›¾ç‰‡altå°±æ˜¯æ˜¾ç¤ºåœ¨å›¾ç‰‡åº•çº¿çš„æ–‡å­—ï¼Œç›¸å½“äºå¯¹å›¾ç‰‡å†…å®¹çš„è§£é‡Šã€‚</span><br><span class="line">å›¾ç‰‡titleæ˜¯å›¾ç‰‡çš„æ ‡é¢˜ï¼Œå½“é¼ æ ‡ç§»åŠ¨åˆ°å›¾ç‰‡ä¸Šæ—¶æ˜¾ç¤ºçš„å†…å®¹ã€‚æ‰€ä»¥titleå¯æœ‰å¯æ— ã€‚</span><br></pre></td></tr></table></figure><p>å®ä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![KTeDsJ.png](https://s2.ax1x.com/2019/10/31/KTeDsJ.png)</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p><img src="https://s2.ax1x.com/2019/10/31/KTeDsJ.png" alt="KTeDsJ.png"></p><p><strong>ä¸Šä¼ æœ¬åœ°å›¾ç‰‡ç›´æ¥æ‹‰åˆ°mdæ–‡ä»¶ä¸­å°±okï¼</strong></p><p>æ³¨ï¼šè‹¥å‘å¸ƒåšå®¢çš„è¯å›¾ç‰‡ä¸æ˜¾ç¤ºå‚è€ƒè¿™ç¯‡<a href="https://blog.csdn.net/Mandyucan/article/details/80421711" target="_blank" rel="noopener">åšå®¢</a></p><h1 id="å…­ã€è¶…é“¾æ¥"><a href="#å…­ã€è¶…é“¾æ¥" class="headerlink" title="å…­ã€è¶…é“¾æ¥"></a>å…­ã€è¶…é“¾æ¥</h1><p>è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[è¶…é“¾æ¥å](è¶…é“¾æ¥åœ°å€ <span class="string">"è¶…é“¾æ¥title"</span>)</span><br><span class="line">titleå¯åŠ å¯ä¸åŠ </span><br></pre></td></tr></table></figure><p>å®ä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[å°æçš„åšå®¢]ï¼ˆhttps://lisongbai.topï¼‰</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p> <a href="https://lisongbai.top">å°æçš„åšå®¢</a></p><p>æ³¨ï¼š()ä¸€å®šè¦ä½¿ç”¨è‹±æ–‡æ‹¬å·Markdownä¸è¯†åˆ«ä¸­æ–‡æ‹¬å·ã€‚</p><h1 id="ä¸ƒã€åˆ—è¡¨"><a href="#ä¸ƒã€åˆ—è¡¨" class="headerlink" title="ä¸ƒã€åˆ—è¡¨"></a>ä¸ƒã€åˆ—è¡¨</h1><ul><li><h5 id="æ— åºåˆ—è¡¨"><a href="#æ— åºåˆ—è¡¨" class="headerlink" title="æ— åºåˆ—è¡¨"></a>æ— åºåˆ—è¡¨</h5><p>è¯­æ³•ï¼š</p><p>æ— åºåˆ—è¡¨ç”¨â€ <strong>-  + *</strong> â€œä»»æ„ä¸€ä¸ªéƒ½å¯ä»¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- åˆ—è¡¨å†…å®¹</span><br><span class="line">+ åˆ—è¡¨å†…å®¹</span><br><span class="line">* åˆ—è¡¨å†…å®¹</span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼š- + * è·Ÿå†…å®¹ä¹‹é—´éƒ½è¦æœ‰ä¸€ä¸ªç©ºæ ¼</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><ul><li><p>åˆ—è¡¨å†…å®¹</p></li><li><p>åˆ—è¡¨å†…å®¹</p></li><li><p>åˆ—è¡¨å†…å®¹</p></li></ul></li><li><h5 id="æœ‰åºåˆ—è¡¨"><a href="#æœ‰åºåˆ—è¡¨" class="headerlink" title="æœ‰åºåˆ—è¡¨"></a>æœ‰åºåˆ—è¡¨</h5><p>è¯­æ³•ï¼š</p><p>æ•°å­—åŠ ç‚¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.åˆ—è¡¨å†…å®¹</span><br><span class="line">2.åˆ—è¡¨å†…å®¹</span><br><span class="line">3.åˆ—è¡¨å†…å®¹</span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼šåºå·è·Ÿå†…å®¹ä¹‹é—´è¦æœ‰ç©ºæ ¼</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p>1.åˆ—è¡¨å†…å®¹<br>2.åˆ—è¡¨å†…å®¹<br>3.åˆ—è¡¨å†…å®¹</p></li></ul><ul><li><h5 id="åˆ—è¡¨åµŒå¥—"><a href="#åˆ—è¡¨åµŒå¥—" class="headerlink" title="åˆ—è¡¨åµŒå¥—"></a>åˆ—è¡¨åµŒå¥—</h5><p><strong>ä¸Šä¸€çº§å’Œä¸‹ä¸€é›†ä¹‹é—´æ•²ä¸‰ä¸ªç©ºæ ¼å³å¯</strong></p><p>ä»”ç»†è§‚å¯Ÿæ ‡é¢˜ä¸ƒä¸­çš„åˆ—è¡¨ä½ ä¼šå‘ç°æ— é¡»åˆ—è¡¨çš„åµŒå¥—æ»´ï¼</p></li></ul><h1 id="å…«ã€è¡¨æ ¼"><a href="#å…«ã€è¡¨æ ¼" class="headerlink" title="å…«ã€è¡¨æ ¼"></a>å…«ã€è¡¨æ ¼</h1><p>è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">è¡¨å¤´|è¡¨å¤´|è¡¨å¤´</span><br><span class="line">---|:--:|---:</span><br><span class="line">å†…å®¹|å†…å®¹|å†…å®¹</span><br><span class="line">å†…å®¹|å†…å®¹|å†…å®¹</span><br><span class="line"></span><br><span class="line">ç¬¬äºŒè¡Œåˆ†å‰²è¡¨å¤´å’Œå†…å®¹ã€‚</span><br><span class="line">- æœ‰ä¸€ä¸ªå°±è¡Œï¼Œä¸ºäº†å¯¹é½ï¼Œå¤šåŠ äº†å‡ ä¸ª</span><br><span class="line">æ–‡å­—é»˜è®¤å±…å·¦</span><br><span class="line">-ä¸¤è¾¹åŠ ï¼šè¡¨ç¤ºæ–‡å­—å±…ä¸­</span><br><span class="line">-å³è¾¹åŠ ï¼šè¡¨ç¤ºæ–‡å­—å±…å³</span><br><span class="line">æ³¨ï¼šåŸç”Ÿçš„è¯­æ³•ä¸¤è¾¹éƒ½è¦ç”¨ | åŒ…èµ·æ¥ã€‚æ­¤å¤„çœç•¥</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è‹±é›„ | åˆ«å | ç¾ç»Š</span><br><span class="line">:- | :-: | -:</span><br><span class="line">æ°æ–¯ | ç‚®ç‹ | æµ·å…‹æ–¯</span><br><span class="line">æé’ | å°å­¦åƒ§ | æš‚æ— </span><br><span class="line">ç–¾é£å‰‘è±ª | æ‰˜å„¿ç´¢ | å‰‘å£«</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><table><thead><tr><th align="right">è‹±é›„</th><th align="center">åˆ«å</th><th align="right">ç¾ç»Š</th></tr></thead><tbody><tr><td align="right">æ°æ–¯</td><td align="center">ç‚®ç‹</td><td align="right">æµ·å…‹æ–¯</td></tr><tr><td align="right">æé’</td><td align="center">å°å­¦åƒ§</td><td align="right">æš‚æ— </td></tr><tr><td align="right">ç–¾é£å‰‘è±ª</td><td align="center">æ‰˜å„¿ç´¢</td><td align="right">å‰‘å£«</td></tr></tbody></table><h1 id="ä¹ã€ä»£ç "><a href="#ä¹ã€ä»£ç " class="headerlink" title="ä¹ã€ä»£ç "></a>ä¹ã€ä»£ç </h1><p>è¯­æ³•ï¼š</p><p>å•è¡Œä»£ç ï¼šä»£ç ä¹‹é—´åˆ†åˆ«ç”¨ä¸€ä¸ªåå¼•å·åŒ…èµ·æ¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`ä»£ç å†…å®¹`</span><br></pre></td></tr></table></figure><p>ä»£ç å—ï¼šä»£ç ä¹‹é—´åˆ†åˆ«ç”¨ä¸‰ä¸ªåå¼•å·åŒ…èµ·æ¥ï¼Œä¸”ä¸¤è¾¹çš„åå¼•å·å•ç‹¬å ä¸€è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(```)</span><br><span class="line">ä»£ç ...</span><br><span class="line">ä»£ç ...</span><br><span class="line">ä»£ç ...</span><br><span class="line">(```)</span><br></pre></td></tr></table></figure><p>æ³¨ï¼šä¸ºäº†é˜²æ­¢è½¬è¯‘ï¼Œå‰åä¸‰ä¸ªåå¼•å·å¤„åŠ äº†å°æ‹¬å·ï¼Œå®é™…æ˜¯æ²¡æœ‰çš„ã€‚è¿™é‡Œåªæ˜¯ç”¨æ¥æ¼”ç¤ºï¼Œå®é™…ä¸­å»æ‰ä¸¤è¾¹å°æ‹¬å·å³å¯ã€‚</p><p>å®ä¾‹ï¼š</p><p>å•è¡Œä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`System.Out.Println(<span class="string">"hello hexo!"</span>);`</span><br></pre></td></tr></table></figure><p>ä»£ç å—</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"><span class="function">Public <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">    System.Out.Println(<span class="string">"hello hexo!"</span>);</span><br><span class="line">&#125;</span><br><span class="line">```</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><code>System.Out.Println(&quot;hello hexo!&quot;);</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Public <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">    System.Out.Println(<span class="string">"hello hexo!"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åã€æµç¨‹å›¾"><a href="#åã€æµç¨‹å›¾" class="headerlink" title="åã€æµç¨‹å›¾"></a>åã€æµç¨‹å›¾</h1><p>å®ä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">```flow</span><br><span class="line"></span><br><span class="line">st=&gt;start: å¼€å§‹æ¡†</span><br><span class="line"></span><br><span class="line">op=&gt;operation: å¤„ç†æ¡†</span><br><span class="line"></span><br><span class="line">cond=&gt;condition: åˆ¤æ–­æ¡†(æ˜¯æˆ–å¦?)</span><br><span class="line"></span><br><span class="line">sub1=&gt;subroutine: å­æµç¨‹</span><br><span class="line"></span><br><span class="line">io=&gt;inputoutput: è¾“å…¥è¾“å‡ºæ¡†</span><br><span class="line"></span><br><span class="line">e=&gt;end: ç»“æŸæ¡†</span><br><span class="line"></span><br><span class="line">st-&gt;op-&gt;cond</span><br><span class="line"></span><br><span class="line">cond(yes)-&gt;io-&gt;e</span><br><span class="line"></span><br><span class="line">cond(no)-&gt;sub1(right)-&gt;op</span><br><span class="line"></span><br><span class="line">```</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">```flow</span><br><span class="line"></span><br><span class="line">st=&gt;start: å¼€å§‹æ¡†</span><br><span class="line"></span><br><span class="line">op=&gt;operation: å¤„ç†æ¡†</span><br><span class="line"></span><br><span class="line">cond=&gt;condition: åˆ¤æ–­æ¡†(æ˜¯æˆ–å¦?)</span><br><span class="line"></span><br><span class="line">sub1=&gt;subroutine: å­æµç¨‹</span><br><span class="line"></span><br><span class="line">io=&gt;inputoutput: è¾“å…¥è¾“å‡ºæ¡†</span><br><span class="line"></span><br><span class="line">e=&gt;end: ç»“æŸæ¡†</span><br><span class="line"></span><br><span class="line">st-&gt;op-&gt;cond</span><br><span class="line"></span><br><span class="line">cond(yes)-&gt;io-&gt;e</span><br><span class="line"></span><br><span class="line">cond(no)-&gt;sub1(right)-&gt;op</span><br><span class="line"></span><br><span class="line">```</span><br></pre></td></tr></table></figure><p>æ³¨ï¼šæˆ‘ç”¨çš„æ˜¯Typoraç¼–è¾‘å™¨ï¼Œè¿™ä¸ªæœ‰ç‚¹é—®é¢˜ï¼Œæš‚æœªè§£å†³ã€‚<strong>cond(yes)-&gt;io-&gt;e  cond(no)-&gt;sub1(right)-&gt;op</strong>è¿™ä¸¤æ¡è¯­å¥åªä¼šæ‰§è¡Œç¬¬ä¸€æ¡ï¼Œä»è€Œå¯¼è‡´æœ‰ä¸€æ¡çº¿å®ƒç”»ä¸å‡ºæ¥ã€‚</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://i.loli.net/2019/10/31/ImfquYTA7HvLch9.png" alt="æµç¨‹å›¾.png"></p>]]></content>
      
      
      <categories>
          
          <category> Markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>htmlå­¦ä¹ ç¬”è®°&lt;ä¸€&gt;</title>
      <link href="/2019/10/31/html%E4%B8%8Ecss%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"/>
      <url>/2019/10/31/html%E4%B8%8Ecss%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="1-ä¸€ä¸ªå®Œæ•´çš„ç½‘é¡µ"><a href="#1-ä¸€ä¸ªå®Œæ•´çš„ç½‘é¡µ" class="headerlink" title="1. ä¸€ä¸ªå®Œæ•´çš„ç½‘é¡µ"></a>1. ä¸€ä¸ªå®Œæ•´çš„ç½‘é¡µ</h1><p>â€‹    ç½‘é¡µçš„å†…å®¹ + ç½‘é¡µçš„æ ·å¼ + ç½‘é¡µçš„åŠ¨ä½œ</p><h1 id="2-ä¸‡ç»´ç½‘è”ç›Ÿ-W3C"><a href="#2-ä¸‡ç»´ç½‘è”ç›Ÿ-W3C" class="headerlink" title="2. ä¸‡ç»´ç½‘è”ç›Ÿ(W3C)"></a>2. ä¸‡ç»´ç½‘è”ç›Ÿ(W3C)</h1><p>ç”±è’‚å§†Â·ä¼¯çº³æ–¯-æäº1994å¹´10æœˆåœ¨éº»çœç†å·¥å­¦é™¢ï¼ˆMITï¼‰è®¡ç®—æœºç§‘å­¦å®éªŒå®¤æˆç«‹<br>æ˜¯WebæŠ€æœ¯é¢†åŸŸæœ€å…·æƒå¨å’Œå½±å“åŠ›çš„å›½é™…ä¸­ç«‹æ€§æŠ€æœ¯æ ‡å‡†æœºæ„<br>ä¸ºWebæŠ€æœ¯çš„äº’ç›¸å…¼å®¹ï¼Œäº’è”ç½‘æŠ€æœ¯çš„å‘å±•å’Œåº”ç”¨èµ·åˆ°äº†åŸºç¡€æ€§å’Œæ ¹æœ¬æ€§çš„æ”¯æ’‘ä½œç”¨</p><a id="more"></a><p>ä¸€æµçš„ä¼ä¸šåšæ ‡å‡†(è‹¹æœ  é«˜é€š   google   å¾®è½¯   åä¸º)</p><p>äºŒæµä¼ä¸šåšäº§å“(è…¾è®¯  é˜¿é‡Œ   ç¾å›¢   å­—èŠ‚è·³åŠ¨)  BAT  TMD</p><p>ä¸‰æµä¼ä¸šåšæœåŠ¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.w3school.com.cn/</span><br></pre></td></tr></table></figure><h1 id="3-htmlçš„ç®€ä»‹"><a href="#3-htmlçš„ç®€ä»‹" class="headerlink" title="3. htmlçš„ç®€ä»‹"></a>3. htmlçš„ç®€ä»‹</h1><p>â€‹    HTMLï¼ˆHyperText Mark-up Languageï¼‰ï¼šè¶…æ–‡æœ¬æ ‡è®°è¯­è¨€æˆ–è¶…æ–‡æœ¬è¿æ¥æ ‡ç¤ºè¯­è¨€ï¼Œç”±Tim Berners-Leeå‘æ˜ï¼Œæ˜¯æ„æˆç½‘é¡µæ–‡æ¡£çš„ä¸»è¦è¯­è¨€</p><h1 id="4-htmlçš„ç¼–å†™"><a href="#4-htmlçš„ç¼–å†™" class="headerlink" title="4. htmlçš„ç¼–å†™"></a>4. htmlçš„ç¼–å†™</h1><ul><li>HTMLæ–‡ä»¶ä¸€èˆ¬å­˜å‚¨ä¸º.htmæˆ–.htmlæ–‡ä»¶</li></ul><h1 id="5-htmlçš„ç¼–å†™å·¥å…·-ç¼–è¾‘å™¨"><a href="#5-htmlçš„ç¼–å†™å·¥å…·-ç¼–è¾‘å™¨" class="headerlink" title="5. htmlçš„ç¼–å†™å·¥å…·(ç¼–è¾‘å™¨)"></a>5. htmlçš„ç¼–å†™å·¥å…·(ç¼–è¾‘å™¨)</h1><ul><li>windowsè‡ªå¸¦çš„è®°äº‹æœ¬</li><li>Notepad++(windowså¹³å°æœ€å¼ºå¤§çš„æ–‡æœ¬ç¼–è¾‘å™¨)</li><li>Sublim(è·¨å¹³å°æœ€å¼ºå¤§çš„ç¼–è¾‘å™¨)</li><li>VScode(è·¨å¹³å°æœ€å¼ºå¤§çš„ç¼–è¾‘å™¨, â€œå®‡å®™ç¬¬ä¸€ç¼–è¾‘å™¨â€)</li></ul><h1 id="6-htmlçš„ç¼–å†™å·¥å…·-é›†æˆå¼€å‘ç¯å¢ƒ"><a href="#6-htmlçš„ç¼–å†™å·¥å…·-é›†æˆå¼€å‘ç¯å¢ƒ" class="headerlink" title="6. htmlçš„ç¼–å†™å·¥å…·(é›†æˆå¼€å‘ç¯å¢ƒ)"></a>6. htmlçš„ç¼–å†™å·¥å…·(é›†æˆå¼€å‘ç¯å¢ƒ)</h1><ul><li>Dreamweaver(æ”¶è´¹  å·²ç»ä¸æ€ä¹ˆç”¨äº†)</li><li><strong>IntelliJ IDEA(æ–°ä¸€ä»£çš„ç¥å™¨)</strong></li><li><strong>Hbuilder(ä¸“å±å‰ç«¯å¼€å‘çš„ç¥å™¨)</strong></li></ul><h1 id="7-htmlä¸­çš„ç‰¹æ®Šå­—ç¬¦"><a href="#7-htmlä¸­çš„ç‰¹æ®Šå­—ç¬¦" class="headerlink" title="7. htmlä¸­çš„ç‰¹æ®Šå­—ç¬¦"></a>7. htmlä¸­çš„ç‰¹æ®Šå­—ç¬¦</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ç©ºæ ¼&amp;nbsp;</span><br><span class="line">å¤§äºå·(&gt;)&amp;gt;</span><br><span class="line">å°äºå·(&lt;)&amp;lt;</span><br><span class="line">å¼•å·(")&amp;quot;</span><br><span class="line">ç‰ˆæƒç¬¦å·@&amp;copy;</span><br></pre></td></tr></table></figure><h1 id="8-htmlä¸­çš„åˆ—è¡¨"><a href="#8-htmlä¸­çš„åˆ—è¡¨" class="headerlink" title="8. htmlä¸­çš„åˆ—è¡¨"></a>8. htmlä¸­çš„åˆ—è¡¨</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ— åºåˆ—è¡¨ </span></span><br><span class="line"><span class="comment">disc: å®ä½“åœ†å¿ƒ,é»˜è®¤å€¼</span></span><br><span class="line"><span class="comment">square: å®ä½“æ–¹å¿ƒ</span></span><br><span class="line"><span class="comment">circle: ç©ºå¿ƒåœ†--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">type</span>=<span class="string">"circle"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>Java<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>C++<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>C#<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æœ‰åºåˆ—è¡¨</span></span><br><span class="line"><span class="comment">1: æ•°å­—(é˜¿æ‹‰ä¼¯æ•°å­—)</span></span><br><span class="line"><span class="comment">a/A: å­—æ¯(è‹±æ–‡å­—æ¯)</span></span><br><span class="line"><span class="comment">i/I: ç½—é©¬æ•°å­—</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ol</span> <span class="attr">type</span>=<span class="string">"I"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>è¯­æ–‡<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>æ•°å­¦<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>è‹±è¯­<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- è‡ªå®šä¹‰åˆ—è¡¨</span></span><br><span class="line"><span class="comment">dt:åˆ—è¡¨çš„æ ‡é¢˜</span></span><br><span class="line"><span class="comment">dd:åˆ—è¡¨çš„å†…å®¹</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dt</span>&gt;</span>æ‰€å±å­¦é™¢<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>è®¡ç®—æœºé™¢<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dt</span>&gt;</span>æ‰€å±ä¸“ä¸š<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>è®¡ç®—æœºç½‘ç»œ<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="9-htmlä¸­çš„è¡¨æ ¼"><a href="#9-htmlä¸­çš„è¡¨æ ¼" class="headerlink" title="9. htmlä¸­çš„è¡¨æ ¼"></a>9. htmlä¸­çš„è¡¨æ ¼</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>è¡¨æ ¼<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    border:è¡¨æ ¼è¾¹æ¡†çš„å®½åº¦</span></span><br><span class="line"><span class="comment">    width:è¡¨æ ¼è‡ªèº«çš„å®½åº¦</span></span><br><span class="line"><span class="comment">    height:è¡¨æ ¼è‡ªèº«çš„é«˜åº¦</span></span><br><span class="line"><span class="comment">    aligin: è¡¨æ ¼çš„æ°´å¹³ä½ç½®å¯¹å…¶æ–¹å¼(left  center   right)</span></span><br><span class="line"><span class="comment">    cellspacing: å•å…ƒæ ¼è·ç¦»è¾¹æ¡†çš„å¤§å°</span></span><br><span class="line"><span class="comment">    cellpadding: å•å…ƒæ ¼å†…å®¹è·ç¦»å•å…ƒæ ¼çš„è·ç¦»</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"1px"</span> <span class="attr">width</span>=<span class="string">"800px"</span> <span class="attr">height</span>=<span class="string">"300px"</span> <span class="attr">align</span>=<span class="string">"center"</span> <span class="attr">cellspacing</span>=<span class="string">"0px"</span> <span class="attr">cellpadding</span>=<span class="string">"0px"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        aligin: ç»™træŒ‡å®šaliginåˆ™ä»£è¡¨trä¸­çš„tdçš„æ‰€æœ‰å†…å®¹çš„å¯¹å…¶æ–¹å¼</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- rowspan è¡Œåˆå¹¶(ç«–ç›´æ–¹å‘ä¸Šçš„åˆå¹¶) --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">rowspan</span>=<span class="string">"2"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- åˆ—åˆå¹¶(æ°´çš®æ–¹å‘ä¸Šçš„åˆå¹¶) --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"2"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>7<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>8<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>9<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="10-è¡¨å•æ ‡ç­¾"><a href="#10-è¡¨å•æ ‡ç­¾" class="headerlink" title="10. è¡¨å•æ ‡ç­¾"></a>10. è¡¨å•æ ‡ç­¾</h1><h1 id="11-htmlä¸­çš„è¯­ä¹‰åŒ–æ ‡ç­¾"><a href="#11-htmlä¸­çš„è¯­ä¹‰åŒ–æ ‡ç­¾" class="headerlink" title="11. htmlä¸­çš„è¯­ä¹‰åŒ–æ ‡ç­¾"></a>11. htmlä¸­çš„è¯­ä¹‰åŒ–æ ‡ç­¾</h1><ul><li><p>è¯­ä¹‰åŒ–æ ‡ç­¾å¯ä»¥è®©é¡µé¢ç»“æ„æ›´åŠ ç®€æ´ã€åˆç†</p></li><li><p>èƒ½å¤Ÿè¾¾åˆ°è§åçŸ¥ä¹‰çš„ä½œç”¨</p></li><li><p>æ›´åŠ ç¬¦åˆWebæ ‡å‡†ï¼Œæ›´åˆ©äºæœç´¢å¼•æ“çš„æŠ“å–ï¼ˆSEOçš„ä¼˜åŒ–ï¼‰å’Œå¼€å‘ç»´æŠ¤</p><p>article   header   footer</p></li></ul><h1 id="12-iframeæ¡†æ¶æ ‡ç­¾"><a href="#12-iframeæ¡†æ¶æ ‡ç­¾" class="headerlink" title="12. iframeæ¡†æ¶æ ‡ç­¾"></a>12. iframeæ¡†æ¶æ ‡ç­¾</h1><p> ç”¨æ¥å¼•ç”¨æ¡†æ¶é¡µé¢ï¼Œsrcå±æ€§ç”¨æ¥æŒ‡å®šè¦å¼•å…¥çš„é¡µé¢</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span>Â <span class="attr">src</span>=<span class="string">"path"</span>Â <span class="attr">name</span>=<span class="string">"mainFrame"</span>Â <span class="attr">frameborder</span>=<span class="string">"x"</span>Â <span class="attr">scrolling</span>=<span class="string">"yes/no"</span>Â Â <span class="attr">noresize</span>=<span class="string">"noresize"</span>Â <span class="attr">width</span>=<span class="string">"x"</span>Â <span class="attr">height</span>=<span class="string">"y"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="13-ç‹¬é—¨ç§˜ç±"><a href="#13-ç‹¬é—¨ç§˜ç±" class="headerlink" title="13. ç‹¬é—¨ç§˜ç±"></a>13. ç‹¬é—¨ç§˜ç±</h1><p>emmentè¡¨è¾¾å¼:</p><p>åŒçº§åˆ«:  +</p><p>å­çº§:  &gt;</p><p>å±æ€§: []</p><p>æ–‡æœ¬: {}</p><p>æ•°é‡:  *n</p><p>åˆ†ç»„:  ()</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> html </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2019/10/23/hello-world/"/>
      <url>/2019/10/23/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><a id="more"></a><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> hello hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hello hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
